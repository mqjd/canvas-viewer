(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var mxClient$1={VERSION:"drawio@v24.7.17",IS_IE:navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE")>=0,IS_IE11:navigator.userAgent!=null&&!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:navigator.userAgent!=null&&!!navigator.userAgent.match(/Edge\//),IS_EM:"spellcheck"in document.createElement("textarea")&&document.documentMode==8,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:navigator.userAgent!=null&&navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:navigator.userAgent!=null&&(navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0),IS_OT:navigator.userAgent!=null&&navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:/Apple Computer, Inc/.test(navigator.vendor),IS_ANDROID:navigator.appVersion.indexOf("Android")>=0,IS_IOS:/iP(hone|od|ad)/.test(navigator.platform)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,IS_WEBVIEW:/((iPhone|iPod|iPad).*AppleWebKit(?!.*Version)|; wv)/i.test(navigator.userAgent),IS_GC:/Google Inc/.test(navigator.vendor),IS_CHROMEAPP:window.chrome!=null&&chrome.app!=null&&chrome.app.runtime!=null,IS_FF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,IS_MT:navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_SVG:navigator.appName.toUpperCase()!="MICROSOFT INTERNET EXPLORER",NO_FO:!document.createElementNS||document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString()!=="[object SVGForeignObjectElement]"||navigator.userAgent.indexOf("Opera/")>=0,IS_WIN:navigator.appVersion.indexOf("Win")>0,IS_MAC:navigator.appVersion.indexOf("Mac")>0,IS_CHROMEOS:/\bCrOS\b/.test(navigator.appVersion),IS_LINUX:/\bLinux\b/.test(navigator.appVersion),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:window.PointerEvent!=null&&!(navigator.appVersion.indexOf("Mac")>0),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,defaultBundles:[],isBrowserSupported:function(){return mxClient$1.IS_SVG},link:function(t,e,i,n){i=i||document;var r=i.createElement("link");r.setAttribute("rel",t),r.setAttribute("href",e),r.setAttribute("charset","UTF-8"),r.setAttribute("type","text/css"),n&&r.setAttribute("id",n);var l=i.getElementsByTagName("head")[0];l.appendChild(r)},loadResources:function(t,e){var i=mxClient$1.defaultBundles.length;function n(){--i==0&&t()}for(var r=0;r<mxClient$1.defaultBundles.length;r++)mxResources.add(mxClient$1.defaultBundles[r],e,n)},include:function(t){document.write('<script src="'+t+'"><\/script>')},mxLoadResources:!1,mxForceIncludes:!1,mxResourceExtension:".txt",mxLoadStylesheets:!1,basePath:".",imageBasePath:"images",defaultLanguage:"zh_cn",mxLanguages:["zh_cn","en_us"]};mxClient$1.language=mxClient$1.IS_IE?navigator.userLanguage:navigator.language;var mxObjectIdentity$1={FIELD_NAME:"mxObjectId",counter:0,get:function(t){if(t!=null){if(t[mxObjectIdentity$1.FIELD_NAME]==null)if(typeof t=="object"){var e=mxUtils$1.getFunctionName(t.constructor);t[mxObjectIdentity$1.FIELD_NAME]=e+"#"+mxObjectIdentity$1.counter++}else typeof t=="function"&&(t[mxObjectIdentity$1.FIELD_NAME]="Function#"+mxObjectIdentity$1.counter++);return t[mxObjectIdentity$1.FIELD_NAME]}return null},clear:function(t){(typeof t=="object"||typeof t=="function")&&delete t[mxObjectIdentity$1.FIELD_NAME]}};function mxPoint$1(t,e){this.x=t??0,this.y=e??0}mxPoint$1.prototype.x=null;mxPoint$1.prototype.y=null;mxPoint$1.prototype.equals=function(t){return t!=null&&t.x==this.x&&t.y==this.y};mxPoint$1.prototype.clone=function(){return mxUtils$1.clone(this)};function mxRectangle$1(t,e,i,n){mxPoint$1.call(this,t,e),this.width=i??0,this.height=n??0}mxRectangle$1.prototype=new mxPoint$1;mxRectangle$1.prototype.constructor=mxRectangle$1;mxRectangle$1.prototype.width=null;mxRectangle$1.prototype.height=null;mxRectangle$1.prototype.setRect=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n};mxRectangle$1.prototype.getCenterX=function(){return this.x+this.width/2};mxRectangle$1.prototype.getCenterY=function(){return this.y+this.height/2};mxRectangle$1.prototype.add=function(t){if(t!=null){var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.y=i,this.width=n-e,this.height=r-i}};mxRectangle$1.prototype.intersect=function(t){if(t!=null){var e=this.x+this.width,i=t.x+t.width,n=this.y+this.height,r=t.y+t.height;this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.width=Math.min(e,i)-this.x,this.height=Math.min(n,r)-this.y}};mxRectangle$1.prototype.grow=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this};mxRectangle$1.prototype.getPoint=function(){return new mxPoint$1(this.x,this.y)};mxRectangle$1.prototype.rotate90=function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;var e=this.width;this.width=this.height,this.height=e};mxRectangle$1.prototype.equals=function(t){return t!=null&&t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height};mxRectangle$1.fromPoint=function(t){return new mxRectangle$1(t.x,t.y,0,0)};mxRectangle$1.fromRectangle=function(t){return new mxRectangle$1(t.x,t.y,t.width,t.height)};var mxConstants$1={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",DIALECT_MARKDOWN:"markdown",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"#808080",VML_SHADOWCOLOR:"#808080",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_BLUR:2,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient$1.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle$1(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle$1(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle$1(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle$1(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_FILL_STYLE:"fillStyle",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_BLOCK_SPACING:"blockSpacing",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_TEXT_SHADOW:"textShadow",STYLE_SHADOW_OFFSET_X:"shadowOffsetX",STYLE_SHADOW_OFFSET_Y:"shadowOffsetY",STYLE_SHADOW_BLUR:"shadowBlur",STYLE_SHADOWCOLOR:"shadowColor",STYLE_SHADOW_OPACITY:"shadowOpacity",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_SWIMLANE_HEAD:"swimlaneHead",STYLE_SWIMLANE_BODY:"swimlaneBody",STYLE_ENDFILL:"endFill",STYLE_ENDFILLCOLOR:"endFillColor",STYLE_STARTFILL:"startFill",STYLE_STARTFILLCOLOR:"startFillColor",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_AUTOSIZE_GRID:"autosizeGrid",STYLE_FIXED_WIDTH:"fixedWidth",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",STYLE_CLIP_PATH:"clipPath",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,FONT_STRIKETHROUGH:8,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",DIRECTION_RADIAL:"radial",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",TEXT_DIRECTION_VERTICAL_LR:"vertical-lr",TEXT_DIRECTION_VERTICAL_RL:"vertical-rl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxMouseEvent$1(t,e){this.evt=t,this.state=e,this.sourceState=e}mxMouseEvent$1.prototype.consumed=!1;mxMouseEvent$1.prototype.evt=null;mxMouseEvent$1.prototype.graphX=null;mxMouseEvent$1.prototype.graphY=null;mxMouseEvent$1.prototype.state=null;mxMouseEvent$1.prototype.sourceState=null;mxMouseEvent$1.prototype.getEvent=function(){return this.evt};mxMouseEvent$1.prototype.getSource=function(){return mxEvent$1.getSource(this.evt)};mxMouseEvent$1.prototype.isSource=function(t){return t!=null?mxUtils$1.isAncestorNode(t.node,this.getSource()):!1};mxMouseEvent$1.prototype.getX=function(){return mxEvent$1.getClientX(this.getEvent())};mxMouseEvent$1.prototype.getY=function(){return mxEvent$1.getClientY(this.getEvent())};mxMouseEvent$1.prototype.getGraphX=function(){return this.graphX};mxMouseEvent$1.prototype.getGraphY=function(){return this.graphY};mxMouseEvent$1.prototype.getState=function(){return this.state};mxMouseEvent$1.prototype.getCell=function(){var t=this.getState();return t!=null?t.cell:null};mxMouseEvent$1.prototype.isPopupTrigger=function(){return mxEvent$1.isPopupTrigger(this.getEvent())};mxMouseEvent$1.prototype.isConsumed=function(){return this.consumed};mxMouseEvent$1.prototype.consume=function(t){t=t??(this.evt.touches!=null||mxEvent$1.isMouseEvent(this.evt)),t&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient$1.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0};var mxEvent$1={addListener:function(){var t=function(i,n,r){i.mxListenerList==null&&(i.mxListenerList=[]);var l={name:n,f:r};i.mxListenerList.push(l)};if(window.addEventListener){var e=!1;try{document.addEventListener("test",function(){},Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch{}return function(i,n,r){i.addEventListener(n,r,e?{passive:!1}:!1),t(i,n,r)}}else return function(i,n,r){i.attachEvent("on"+n,r),t(i,n,r)}}(),removeListener:function(){var t=function(e,i,n){if(e.mxListenerList!=null){for(var r=e.mxListenerList.length,l=0;l<r;l++){var s=e.mxListenerList[l];if(s.f==n){e.mxListenerList.splice(l,1);break}}e.mxListenerList.length==0&&(e.mxListenerList=null)}};return window.removeEventListener?function(e,i,n){e.removeEventListener(i,n,!1),t(e,i,n)}:function(e,i,n){e.detachEvent("on"+i,n),t(e,i,n)}}(),removeAllListeners:function(t){var e=t.mxListenerList;if(e!=null)for(;e.length>0;){var i=e[0];mxEvent$1.removeListener(t,i.name,i.f)}},addGestureListeners:function(t,e,i,n){e!=null&&mxEvent$1.addListener(t,mxClient$1.IS_POINTER?"pointerdown":"mousedown",e),i!=null&&mxEvent$1.addListener(t,mxClient$1.IS_POINTER?"pointermove":"mousemove",i),n!=null&&mxEvent$1.addListener(t,mxClient$1.IS_POINTER?"pointerup":"mouseup",n),!mxClient$1.IS_POINTER&&mxClient$1.IS_TOUCH&&(e!=null&&mxEvent$1.addListener(t,"touchstart",e),i!=null&&mxEvent$1.addListener(t,"touchmove",i),n!=null&&mxEvent$1.addListener(t,"touchend",n))},removeGestureListeners:function(t,e,i,n){e!=null&&mxEvent$1.removeListener(t,mxClient$1.IS_POINTER?"pointerdown":"mousedown",e),i!=null&&mxEvent$1.removeListener(t,mxClient$1.IS_POINTER?"pointermove":"mousemove",i),n!=null&&mxEvent$1.removeListener(t,mxClient$1.IS_POINTER?"pointerup":"mouseup",n),!mxClient$1.IS_POINTER&&mxClient$1.IS_TOUCH&&(e!=null&&mxEvent$1.removeListener(t,"touchstart",e),i!=null&&mxEvent$1.removeListener(t,"touchmove",i),n!=null&&mxEvent$1.removeListener(t,"touchend",n))},redirectMouseEvents:function(t,e,i,n,r,l,s){var a=function(o){return typeof i=="function"?i(o):i};mxEvent$1.addGestureListeners(t,function(o){n!=null?n(o):mxEvent$1.isConsumed(o)||e.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(o,a(o)))},function(o){r!=null?r(o):mxEvent$1.isConsumed(o)||e.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(o,a(o)))},function(o){l!=null?l(o):mxEvent$1.isConsumed(o)||e.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(o,a(o)))}),mxEvent$1.addListener(t,"dblclick",function(o){if(s!=null)s(o);else if(!mxEvent$1.isConsumed(o)){var u=a(o);e.dblClick(o,u!=null?u.cell:null)}})},release:function(t){try{if(t!=null){mxEvent$1.removeAllListeners(t);var e=t.childNodes;if(e!=null)for(var i=e.length,n=0;n<i;n+=1)mxEvent$1.release(e[n])}}catch{}},addMouseWheelListener:function(t,e){if(t!=null){var i=function(a){a==null&&(a=window.event),a.ctrlKey&&a.preventDefault(),(Math.abs(a.deltaX)>.5||Math.abs(a.deltaY)>.5)&&t(a,a.deltaY==0?-a.deltaX>0:-a.deltaY>0)};if(e=e??window,mxClient$1.IS_SF&&!mxClient$1.IS_TOUCH){var n=1;mxEvent$1.addListener(e,"gesturestart",function(a){mxEvent$1.consume(a),n=1}),mxEvent$1.addListener(e,"gesturechange",function(a){mxEvent$1.consume(a);var o=n-a.scale;Math.abs(o)>.2&&(t(a,o<0,!0),n=a.scale)}),mxEvent$1.addListener(e,"gestureend",function(a){mxEvent$1.consume(a)})}else{var r=[],l=0,s=0;mxEvent$1.addGestureListeners(e,mxUtils$1.bind(this,function(a){!mxEvent$1.isMouseEvent(a)&&a.pointerId!=null&&r.push(a)}),mxUtils$1.bind(this,function(a){if(!mxEvent$1.isMouseEvent(a)&&r.length==2){for(var o=0;o<r.length;o++)if(a.pointerId==r[o].pointerId){r[o]=a;break}var u=Math.abs(r[0].clientX-r[1].clientX),d=Math.abs(r[0].clientY-r[1].clientY),p=Math.abs(u-l),c=Math.abs(d-s);if(p>mxEvent$1.PINCH_THRESHOLD||c>mxEvent$1.PINCH_THRESHOLD){var g=r[0].clientX+(r[1].clientX-r[0].clientX)/2,x=r[0].clientY+(r[1].clientY-r[0].clientY)/2;t(r[0],p>c?u>l:d>s,!0,g,x),l=u,s=d}}}),mxUtils$1.bind(this,function(a){r=[],l=0,s=0}))}mxEvent$1.addListener(e,"wheel",i)}},disableContextMenu:function(t){mxEvent$1.addListener(t,"contextmenu",function(e){return e.preventDefault&&e.preventDefault(),!1})},getSource:function(t){return t.srcElement!=null?t.srcElement:t.target},isConsumed:function(t){return t.isConsumed!=null&&t.isConsumed},isTouchEvent:function(t){return t.pointerType!=null?t.pointerType=="touch"||t.pointerType===t.MSPOINTER_TYPE_TOUCH:t.mozInputSource!=null?t.mozInputSource==5:t.type.indexOf("touch")==0},isPenEvent:function(t){return t.pointerType!=null?t.pointerType=="pen"||t.pointerType===t.MSPOINTER_TYPE_PEN:t.mozInputSource!=null?t.mozInputSource==2:t.type.indexOf("pen")==0},isMultiTouchEvent:function(t){return t.type!=null&&t.type.indexOf("touch")==0&&t.touches!=null&&t.touches.length>1},isMouseEvent:function(t){return!mxClient$1.IS_ANDROID&&mxClient$1.IS_LINUX&&mxClient$1.IS_GC?!0:t.pointerType!=null?t.pointerType=="mouse"||t.pointerType===t.MSPOINTER_TYPE_MOUSE:t.mozInputSource!=null?t.mozInputSource==1:t.type.indexOf("mouse")==0},isLeftMouseButton:function(t){return"buttons"in t&&(t.type=="mousedown"||t.type=="mousemove")?t.buttons==1:"which"in t?t.which===1:t.button===1},isMiddleMouseButton:function(t){return"which"in t?t.which===2:t.button===4},isRightMouseButton:function(t){return"which"in t?t.which===3:t.button===2},isPopupTrigger:function(t){return mxEvent$1.isRightMouseButton(t)||mxClient$1.IS_MAC&&mxEvent$1.isControlDown(t)&&!mxEvent$1.isShiftDown(t)&&!mxEvent$1.isMetaDown(t)&&!mxEvent$1.isAltDown(t)},isShiftDown:function(t){return t!=null?t.shiftKey:!1},isAltDown:function(t){return t!=null?t.altKey:!1},isControlDown:function(t){return t!=null?t.ctrlKey:!1},isMetaDown:function(t){return t!=null?t.metaKey:!1},getMainEvent:function(t){return(t.type=="touchstart"||t.type=="touchmove")&&t.touches!=null&&t.touches[0]!=null?t=t.touches[0]:t.type=="touchend"&&t.changedTouches!=null&&t.changedTouches[0]!=null&&(t=t.changedTouches[0]),t},getClientX:function(t){return mxEvent$1.getMainEvent(t).clientX},getClientY:function(t){return mxEvent$1.getMainEvent(t).clientY},consume:function(t,e,i){e=e??!0,i=i??!0,e&&(t.preventDefault?(i&&t.stopPropagation(),t.preventDefault()):i&&(t.cancelBubble=!0)),t.isConsumed=!0,t.preventDefault||(t.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",CONSUME_MOUSE_EVENT:"consumeMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset",PINCH_THRESHOLD:10};function mxDictionary$1(){this.clear()}mxDictionary$1.prototype.map=null;mxDictionary$1.prototype.clear=function(){this.map={}};mxDictionary$1.prototype.get=function(t){var e=mxObjectIdentity$1.get(t);return this.map[e]};mxDictionary$1.prototype.put=function(t,e){var i=mxObjectIdentity$1.get(t),n=this.map[i];return this.map[i]=e,n};mxDictionary$1.prototype.remove=function(t){var e=mxObjectIdentity$1.get(t),i=this.map[e];return delete this.map[e],i};mxDictionary$1.prototype.getCount=function(){var t=0;for(var e in this.map)t++;return t};mxDictionary$1.prototype.getKeys=function(){var t=[];for(var e in this.map)t.push(e);return t};mxDictionary$1.prototype.getValues=function(){var t=[];for(var e in this.map)t.push(this.map[e]);return t};mxDictionary$1.prototype.visit=function(t){for(var e in this.map)t(e,this.map[e])};var mxCellPath$1={PATH_SEPARATOR:".",create:function(t){var e="";if(t!=null)for(var i=t.getParent();i!=null;){var n=i.getIndex(t);e=n+mxCellPath$1.PATH_SEPARATOR+e,t=i,i=t.getParent()}var r=e.length;return r>1&&(e=e.substring(0,r-1)),e},getParentPath:function(t){if(t!=null){var e=t.lastIndexOf(mxCellPath$1.PATH_SEPARATOR);if(e>=0)return t.substring(0,e);if(t.length>0)return""}return null},resolve:function(t,e){var i=t;if(e!=null)for(var n=e.split(mxCellPath$1.PATH_SEPARATOR),r=0;r<n.length;r++)i=i.getChildAt(parseInt(n[r]));return i},compare:function(t,e){for(var i=Math.min(t.length,e.length),n=0,r=0;r<i;r++)if(t[r]!=e[r]){if(t[r].length==0||e[r].length==0)n=t[r]==e[r]?0:t[r]>e[r]?1:-1;else{var l=parseInt(t[r]),s=parseInt(e[r]);n=l==s?0:l>s?1:-1}break}if(n==0){var l=t.length,s=e.length;l!=s&&(n=l>s?1:-1)}return n}},mxUtils$1={errorResource:mxClient$1.language!="none"?"error":"",closeResource:mxClient$1.language!="none"?"close":"",errorImage:mxClient$1.imageBasePath+"/error.gif",removeCursors:function(t){t.style!=null&&(t.style.cursor="");var e=t.childNodes;if(e!=null)for(var i=e.length,n=0;n<i;n+=1)mxUtils$1.removeCursors(e[n])},getCurrentStyle:function(){return mxClient$1.IS_IE&&(document.documentMode==null||document.documentMode<9)?function(t){return t!=null?t.currentStyle:null}:function(t){return t!=null?window.getComputedStyle(t,""):null}}(),getCssFontFamily:function(t){if(typeof t=="string"){for(var e=t.split(","),i=0;i<e.length;i++)e[i]=mxUtils$1.trim(e[i]),e[i].charAt(0)=='"'&&e[i].charAt(e[i].length-1)=='"'&&(e[i]=e[i].substring(1,e[i].length-1));t=e.join(", ")}return t},parseCssFontFamily:function(t,e){if(typeof t=="string"){for(var i=t.split(","),n=0;n<i.length;n++)i[n]=mxUtils$1.trim(i[n]),i[n].charAt(0)=='"'&&i[n].charAt(i[n].length-1)=='"'&&(i[n]=i[n].substring(1,i[n].length-1)),e&&(i[n]=mxUtils$1.htmlEntities(i[n])),i[n]='"'+i[n]+'"';t=i.join(", ")}return t},parseCssNumber:function(t){return t=="thin"?t="2":t=="medium"?t="4":t=="thick"&&(t="6"),t=parseFloat(t),isNaN(t)&&(t=0),t},setPrefixedStyle:function(){var t=null;return mxClient$1.IS_OT?t="O":mxClient$1.IS_SF||mxClient$1.IS_GC?t="Webkit":mxClient$1.IS_MT?t="Moz":mxClient$1.IS_IE&&document.documentMode>=9&&document.documentMode<10&&(t="ms"),function(e,i,n){e[i]=n,t!=null&&i.length>0&&(i=t+i.substring(0,1).toUpperCase()+i.substring(1),e[i]=n)}}(),hasScrollbars:function(t){var e=mxUtils$1.getCurrentStyle(t);return e!=null&&(e.overflow=="scroll"||e.overflow=="auto")},bind:function(t,e){return function(){return e.apply(t,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0)try{eval("var _mxJavaScriptExpression="+expr),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(t){mxLog.warn(t.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(t){mxLog.warn(t.message+" while evaluating "+expr)}return result},findNode:function(t,e,i){if(t.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=t.getAttribute(e);if(n!=null&&n==i)return t}for(t=t.firstChild;t!=null;){var r=mxUtils$1.findNode(t,e,i);if(r!=null)return r;t=t.nextSibling}return null},getFunctionName:function(t){var e=null;if(t!=null){if(t.name!=null)e=t.name;else if(e=mxUtils$1.trim(t.toString()),/^function\s/.test(e)){e=mxUtils$1.ltrim(e.substring(9));var i=e.indexOf("(");i>0&&(e=e.substring(0,i))}}return e},indexOf:function(t,e){if(t!=null&&e!=null){for(var i=0;i<t.length;i++)if(t[i]==e)return i}return-1},lastIndexOf:function(t,e){if(t!=null&&e!=null){for(var i=t.length-1;i>=0;i--)if(t[i]==e)return i}return-1},forEach:function(t,e){if(t!=null&&e!=null)for(var i=0;i<t.length;i++)e(t[i]);return t},remove:function(t,e){var i=null;if(typeof e=="object")for(var n=mxUtils$1.indexOf(e,t);n>=0;)e.splice(n,1),i=t,n=mxUtils$1.indexOf(e,t);for(var r in e)e[r]==t&&(delete e[r],i=t);return i},addItems:function(t,e){for(var i=0;i<e.length;i++)e[i]!=null&&(e[i].constructor==Array?mxUtils$1.addItems(t,e[i]):mxUtils$1.indexOf(t,e[i])<0&&t.push(e[i]));return t},isNode:function(t,e,i,n){return t!=null&&t.constructor===Element&&(e==null||t.nodeName.toLowerCase()==e.toLowerCase())?i==null||t.getAttribute(i)==n:!1},isAncestorNode:function(t,e){for(var i=e;i!=null;){if(i==t)return!0;i=i.parentNode}return!1},visitNodes:function(t,e){if(t.nodeType==mxConstants$1.NODETYPE_ELEMENT)for(e(t),t=t.firstChild;t!=null;)mxUtils$1.visitNodes(t,e),t=t.nextSibling},getChildNodes:function(t,e){e=e||mxConstants$1.NODETYPE_ELEMENT;for(var i=[],n=t.firstChild;n!=null;)n.nodeType==e&&i.push(n),n=n.nextSibling;return i},removeChildNodes:function(t){for(;t.lastChild!=null;)t.removeChild(t.lastChild)},importNode:function(t,e,i){return mxClient$1.IS_IE&&(document.documentMode==null||document.documentMode<10)?mxUtils$1.importNodeImplementation(t,e,i):t.importNode(e,i)},importNodeImplementation:function(t,e,i){switch(e.nodeType){case 1:{var n=t.createElement(e.nodeName);if(e.attributes&&e.attributes.length>0)for(var r=0;r<e.attributes.length;r++)n.setAttribute(e.attributes[r].nodeName,e.getAttribute(e.attributes[r].nodeName));if(i&&e.childNodes&&e.childNodes.length>0)for(var r=0;r<e.childNodes.length;r++)n.appendChild(mxUtils$1.importNodeImplementation(t,e.childNodes[r],i));return n}case 3:case 4:case 8:return t.createTextNode(e.nodeValue!=null?e.nodeValue:e.value)}},createXmlDocument:function(){var t=null;return document.implementation&&document.implementation.createDocument&&(t=document.implementation.createDocument("","",null)),t},parseXml:function(t){var e=new DOMParser;return e.parseFromString(t,"text/xml")},getSvgDefs:function(t){var e=t.ownerDocument,i=t.getElementsByTagName("defs"),n=null;return i.length==0||i[0].parentNode!=t?(n=e.createElementNS!=null?e.createElementNS(mxConstants$1.NS_SVG,"defs"):e.createElement("defs"),t.firstChild!=null?t.insertBefore(n,t.firstChild):t.appendChild(n)):n=i[0],n},clearSelection:function(){return document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){}}(),removeWhitespace:function(t,e){for(var i=e?t.previousSibling:t.nextSibling;i!=null&&i.nodeType==mxConstants$1.NODETYPE_TEXT;){var n=e?i.previousSibling:i.nextSibling,r=mxUtils$1.getTextContent(i);mxUtils$1.trim(r).length==0&&i.parentNode.removeChild(i),i=n}},htmlEntities:function(t,e,i,n){return t=String(t??""),t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),(i==null||i)&&(t=t.replace(/"/g,"&quot;"),t=t.replace(/\'/g,"&#39;")),(e==null||e)&&(t=t.replace(/\n/g,"&#xa;")),(n==null||n)&&(t=t.replace(/\t/g,"&#x9;")),t},decodeHtml:function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},getXml:function(t,e){var i="";if(mxClient$1.IS_IE||mxClient$1.IS_IE11)i=mxUtils$1.getPrettyXml(t,"","","");else if(window.XMLSerializer!=null){var n=new XMLSerializer;i=n.serializeToString(t)}else t.xml!=null&&(i=t.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,`
`));return e=e||"&#xa;",i=i.replace(/\n/g,e),i},getPrettyXml:function(t,e,i,n,r){var l=[];if(t!=null)if(e=e??"  ",i=i??"",n=n??`
`,t.namespaceURI!=null&&t.namespaceURI!=r&&(r=t.namespaceURI,t.getAttribute("xmlns")==null&&t.setAttribute("xmlns",t.namespaceURI)),t.nodeType==mxConstants$1.NODETYPE_DOCUMENT)l.push(mxUtils$1.getPrettyXml(t.documentElement,e,i,n,r));else if(t.nodeType==mxConstants$1.NODETYPE_DOCUMENT_FRAGMENT){var s=t.firstChild;if(s!=null)for(;s!=null;)l.push(mxUtils$1.getPrettyXml(s,e,i,n,r)),s=s.nextSibling}else if(t.nodeType==mxConstants$1.NODETYPE_COMMENT){var a=mxUtils$1.getTextContent(t);a.length>0&&l.push(i+"<!--"+a+"-->"+n)}else if(t.nodeType==mxConstants$1.NODETYPE_TEXT){var a=mxUtils$1.trim(mxUtils$1.getTextContent(t));a.length>0&&l.push(i+mxUtils$1.htmlEntities(a,!1,!1)+n)}else if(t.nodeType==mxConstants$1.NODETYPE_CDATA){var a=mxUtils$1.getTextContent(t);a.length>0&&l.push(i+"<![CDATA["+a+"]]"+n)}else{l.push(i+"<"+t.nodeName);var o=t.attributes;if(o!=null)for(var u=0;u<o.length;u++){var d=mxUtils$1.htmlEntities(o[u].value);l.push(" "+o[u].nodeName+'="'+d+'"')}var s=t.firstChild;if(s!=null){for(l.push(">"+n);s!=null;)l.push(mxUtils$1.getPrettyXml(s,e,i+e,n,r)),s=s.nextSibling;l.push(i+"</"+t.nodeName+">"+n)}else l.push(" />"+n)}return l.join("")},extractTextWithWhitespace:function(t){var e=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],i=[];function n(r){if(!(r.length==1&&(r[0].nodeName=="BR"||r[0].innerHTML==`
`)))for(var l=0;l<r.length;l++){var s=r[l];s.nodeName=="BR"||s.innerHTML==`
`||(r.length==1||l==0)&&s.nodeName=="DIV"&&s.innerHTML.toLowerCase()=="<br>"?i.push(`
`):(s.nodeType===3||s.nodeType===4?s.nodeValue.length>0&&i.push(s.nodeValue):s.nodeType!==8&&s.childNodes.length>0&&n(s.childNodes),l<r.length-1&&mxUtils$1.indexOf(e,r[l+1].nodeName)>=0&&i.push(`
`))}}return n(t),i.join("")},replaceTrailingNewlines:function(t,e){for(var i="";t.length>0&&t.charAt(t.length-1)==`
`;)t=t.substring(0,t.length-1),i+=e;return t+i},getNodeValue:function(t){t=t.firstChild;for(var e=[];t!=null;)(t.nodeType==mxConstants$1.NODETYPE_TEXT||t.nodeType==mxConstants$1.NODETYPE_CDATA)&&t.nodeValue!=null&&e.push(mxUtils$1.trim(t.nodeValue)),t=t.nextSibling;return e.length>0?e.join(""):""},getTextContent:function(t){return mxClient$1.IS_IE&&t.innerText!==void 0?t.innerText:t!=null?t[t.textContent===void 0?"text":"textContent"]:""},setTextContent:function(t,e){t.innerText!==void 0?t.innerText=e:t[t.textContent===void 0?"text":"textContent"]=e},getInnerHtml:function(){return mxClient$1.IS_IE?function(t){return t!=null?t.innerHTML:""}:function(t){if(t!=null){var e=new XMLSerializer;return e.serializeToString(t)}return""}}(),getOuterHtml:function(){return mxClient$1.IS_IE?function(t){if(t!=null){if(t.outerHTML!=null)return t.outerHTML;var e=[];e.push("<"+t.nodeName);var i=t.attributes;if(i!=null)for(var n=0;n<i.length;n++){var r=i[n].value;r!=null&&r.length>0&&(e.push(" "),e.push(i[n].nodeName),e.push('="'),e.push(r),e.push('"'))}return t.innerHTML.length==0?e.push("/>"):(e.push(">"),e.push(t.innerHTML),e.push("</"+t.nodeName+">")),e.join("")}return""}:function(t){if(t!=null){var e=new XMLSerializer;return e.serializeToString(t)}return""}}(),write:function(t,e){var i=t.ownerDocument,n=i.createTextNode(e);return t!=null&&t.appendChild(n),n},writeln:function(t,e){var i=t.ownerDocument,n=i.createTextNode(e);return t!=null&&(t.appendChild(n),t.appendChild(document.createElement("br"))),n},br:function(t,e){e=e||1;for(var i=null,n=0;n<e;n++)t!=null&&(i=t.ownerDocument.createElement("br"),t.appendChild(i));return i},button:function(t,e,i,n){i=i??document;var r=i.createElement("button");return mxUtils$1.write(r,t),mxEvent$1.addListener(r,"click",function(l){e(l)}),n!=null&&(r.className=n),r},para:function(t,e){var i=document.createElement("p");return mxUtils$1.write(i,e),t!=null&&t.appendChild(i),i},addTransparentBackgroundFilter:function(t){t.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient$1.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(t,e,i,n,r){return mxUtils$1.link(t,e,function(){i.execute(n)},r)},linkInvoke:function(t,e,i,n,r,l){return mxUtils$1.link(t,e,function(){i[n](r)},l)},link:function(t,e,i,n){var r=document.createElement("span");return r.style.color="blue",r.style.textDecoration="underline",r.style.cursor="pointer",n!=null&&(r.style.paddingLeft=n+"px"),mxEvent$1.addListener(r,"click",i),mxUtils$1.write(r,e),t!=null&&t.appendChild(r),r},getDocumentSize:function(){var t=document.body,e=document.documentElement;try{return new mxRectangle$1(0,0,t.clientWidth||e.clientWidth,Math.max(t.clientHeight||0,e.clientHeight))}catch{return new mxRectangle$1}},fit:function(t,e){e=e||0;var i=mxUtils$1.getDocumentSize(),n=parseInt(t.offsetLeft),r=parseInt(t.offsetWidth),l=mxUtils$1.getDocumentScrollOrigin(t.ownerDocument),s=l.x,a=l.y,o=s+i.width-e;n+r>o&&(t.style.left=Math.max(s+e,o-r)+"px");var u=parseInt(t.offsetTop),d=parseInt(t.offsetHeight),p=a+i.height-e;u+d>p&&(t.style.top=Math.max(a+e,p-d)+"px")},load:function(t){var e=new mxXmlRequest(t,null,"GET",!1);return e.send(),e},get:function(t,e,i,n,r,l,s){var a=new mxXmlRequest(t,null,"GET"),o=a.setRequestHeaders;return s&&(a.setRequestHeaders=function(u,d){o.apply(this,arguments);for(var p in s)u.setRequestHeader(p,s[p])}),n!=null&&a.setBinary(n),a.send(e,i,r,l),a},getAll:function(t,e,i){for(var n=t.length,r=[],l=0,s=function(){l==0&&i!=null&&i(),l++},a=0;a<t.length;a++)(function(o,u){mxUtils$1.get(o,function(d){var p=d.getStatus();p<200||p>299?s():(r[u]=d,n--,n==0&&e(r))},s)})(t[a],a);n==0&&e(r)},post:function(t,e,i,n){return new mxXmlRequest(t,e).send(i,n)},submit:function(t,e,i,n){return new mxXmlRequest(t,e).simulate(i,n)},loadInto:function(t,e,i){mxClient$1.IS_IE?e.onreadystatechange=function(){e.readyState==4&&i()}:e.addEventListener("load",i,!1),e.load(t)},getValue:function(t,e,i){var n=t!=null?t[e]:null;return n==null&&(n=i),n},getNumber:function(t,e,i){var n=t!=null?t[e]:null;return n==null&&(n=i||0),Number(n)},getColor:function(t,e,i){var n=t!=null?t[e]:null;return n==null?n=i:n==mxConstants$1.NONE&&(n=null),n},isEmptyObject:function(t){for(var e in t)return!1;return!0},clone:function(t,e,i){i=i??!1;var n=null;if(t!=null&&typeof t.constructor=="function")if(t.constructor===Element)n=t.cloneNode(i!=null?!i:!1);else{n=new t.constructor;for(var r in t)r!=mxObjectIdentity$1.FIELD_NAME&&(e==null||mxUtils$1.indexOf(e,r)<0)&&(!i&&typeof t[r]=="object"?n[r]=mxUtils$1.clone(t[r]):n[r]=t[r])}return n},equalPoints:function(t,e){if(t==null&&e!=null||t!=null&&e==null||t!=null&&e!=null&&t.length!=e.length)return!1;if(t!=null&&e!=null){for(var i=0;i<t.length;i++)if(t[i]!=null&&e[i]==null||t[i]==null&&e[i]!=null||t[i]!=null&&e[i]!=null&&(t[i].x!=e[i].x||t[i].y!=e[i].y))return!1}return!0},equalEntries:function(t,e){var i=0;if(t==null&&e!=null||t!=null&&e==null||t!=null&&e!=null&&t.length!=e.length)return!1;if(t!=null&&e!=null){for(var n in e)i++;for(var n in t)if(i--,(!mxUtils$1.isNaN(t[n])||!mxUtils$1.isNaN(e[n]))&&t[n]!=e[n])return!1}return i==0},removeDuplicates:function(t){for(var e=new mxDictionary$1,i=[],n=0;n<t.length;n++)e.get(t[n])||(i.push(t[n]),e.put(t[n],!0));return i},isNaN:function(t){return typeof t=="number"&&isNaN(t)},extend:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},toString:function(t){var e="";for(var i in t)try{if(t[i]==null)e+=i+` = [null]
`;else if(typeof t[i]=="function")e+=i+` => [Function]
`;else if(typeof t[i]=="object"){var n=mxUtils$1.getFunctionName(t[i].constructor);e+=i+" => ["+n+`]
`}else e+=i+" = "+t[i]+`
`}catch(r){e+=i+"="+r.message}return e},toRadians:function(t){return Math.PI*t/180},toDegree:function(t){return t*180/Math.PI},arcToCurves:function(t,e,i,n,r,l,s,a,o){if(a-=t,o-=e,i===0||n===0)return vt;var u=s,d=r;i=Math.abs(i),n=Math.abs(n);var p=-a/2,c=-o/2,g=Math.cos(d*Math.PI/180),x=Math.sin(d*Math.PI/180),C=g*p+x*c,T=-1*x*p+g*c,A=C*C,R=T*T,_=i*i,N=n*n,H=A/_+R/N,k;if(H>1)i=Math.sqrt(H)*i,n=Math.sqrt(H)*n,k=0;else{var K=1;l===u&&(K=-1),k=K*Math.sqrt((_*N-_*R-N*A)/(_*R+N*A))}var Q=k*i*T/n,nt=-1*k*n*C/i,dt=g*Q-x*nt+a/2,mt=x*Q+g*nt+o/2,xt=Math.atan2((T-nt)/n,(C-Q)/i)-Math.atan2(0,1),Y=xt>=0?xt:2*Math.PI+xt;xt=Math.atan2((-T-nt)/n,(-C-Q)/i)-Math.atan2((T-nt)/n,(C-Q)/i);var B=xt>=0?xt:2*Math.PI+xt;u==0&&B>0?B-=2*Math.PI:u!=0&&B<0&&(B+=2*Math.PI);for(var U=B*2/Math.PI,lt=Math.ceil(U<0?-1*U:U),tt=B/lt,st=8/3*Math.sin(tt/4)*Math.sin(tt/4)/Math.sin(tt/2),ft=g*i,$t=g*n,Ct=x*i,pt=x*n,ct=Math.cos(Y),Mt=Math.sin(Y),bt=-st*(ft*Mt+pt*ct),Ot=-st*(Ct*Mt-$t*ct),gt=0,Tt=0,vt=[],Pt=0;Pt<lt;++Pt){Y+=tt,ct=Math.cos(Y),Mt=Math.sin(Y),gt=ft*ct-pt*Mt+dt,Tt=Ct*ct+$t*Mt+mt;var Dt=-st*(ft*Mt+pt*ct),zt=-st*(Ct*Mt-$t*ct),Rt=Pt*6;vt[Rt]=Number(bt+t),vt[Rt+1]=Number(Ot+e),vt[Rt+2]=Number(gt-Dt+t),vt[Rt+3]=Number(Tt-zt+e),vt[Rt+4]=Number(gt+t),vt[Rt+5]=Number(Tt+e),bt=gt+Dt,Ot=Tt+zt}return vt},getBoundingBox:function(t,e,i){var n=null;if(t!=null&&e!=null&&e!=0){var r=mxUtils$1.toRadians(e),l=Math.cos(r),s=Math.sin(r);i=i??new mxPoint$1(t.x+t.width/2,t.y+t.height/2);var a=new mxPoint$1(t.x,t.y),o=new mxPoint$1(t.x+t.width,t.y),u=new mxPoint$1(o.x,t.y+t.height),d=new mxPoint$1(t.x,u.y);a=mxUtils$1.getRotatedPoint(a,l,s,i),o=mxUtils$1.getRotatedPoint(o,l,s,i),u=mxUtils$1.getRotatedPoint(u,l,s,i),d=mxUtils$1.getRotatedPoint(d,l,s,i),n=new mxRectangle$1(a.x,a.y,0,0),n.add(new mxRectangle$1(o.x,o.y,0,0)),n.add(new mxRectangle$1(u.x,u.y,0,0)),n.add(new mxRectangle$1(d.x,d.y,0,0))}return n},getRotatedPoint:function(t,e,i,n){n=n??new mxPoint$1;var r=t.x-n.x,l=t.y-n.y,s=r*e-l*i,a=l*e+r*i;return new mxPoint$1(s+n.x,a+n.y)},getPortConstraints:function(t,e,i,n){var r=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_PORT_CONSTRAINT,mxUtils$1.getValue(e.style,i?mxConstants$1.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants$1.STYLE_TARGET_PORT_CONSTRAINT,null));if(r==null)return n;var l=r.toString(),s=mxConstants$1.DIRECTION_MASK_NONE,a=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_PORT_CONSTRAINT_ROTATION,0),o=0;a==1&&(o=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION,0));var u=0;if(o>45?(u=1,o>=135&&(u=2)):o<-45&&(u=3,o<=-135&&(u=2)),l.indexOf(mxConstants$1.DIRECTION_NORTH)>=0)switch(u){case 0:s|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 1:s|=mxConstants$1.DIRECTION_MASK_EAST;break;case 2:s|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 3:s|=mxConstants$1.DIRECTION_MASK_WEST;break}if(l.indexOf(mxConstants$1.DIRECTION_WEST)>=0)switch(u){case 0:s|=mxConstants$1.DIRECTION_MASK_WEST;break;case 1:s|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 2:s|=mxConstants$1.DIRECTION_MASK_EAST;break;case 3:s|=mxConstants$1.DIRECTION_MASK_SOUTH;break}if(l.indexOf(mxConstants$1.DIRECTION_SOUTH)>=0)switch(u){case 0:s|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 1:s|=mxConstants$1.DIRECTION_MASK_WEST;break;case 2:s|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 3:s|=mxConstants$1.DIRECTION_MASK_EAST;break}if(l.indexOf(mxConstants$1.DIRECTION_EAST)>=0)switch(u){case 0:s|=mxConstants$1.DIRECTION_MASK_EAST;break;case 1:s|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 2:s|=mxConstants$1.DIRECTION_MASK_WEST;break;case 3:s|=mxConstants$1.DIRECTION_MASK_NORTH;break}return s},reversePortConstraints:function(t){var e=0;return e=(t&mxConstants$1.DIRECTION_MASK_WEST)<<3,e|=(t&mxConstants$1.DIRECTION_MASK_NORTH)<<1,e|=(t&mxConstants$1.DIRECTION_MASK_SOUTH)>>1,e|=(t&mxConstants$1.DIRECTION_MASK_EAST)>>3,e},findNearestSegment:function(t,e,i){var n=-1;if(t.absolutePoints.length>0)for(var r=t.absolutePoints[0],l=null,s=1;s<t.absolutePoints.length;s++){var a=t.absolutePoints[s],o=mxUtils$1.ptSegDistSq(r.x,r.y,a.x,a.y,e,i);(l==null||o<l)&&(l=o,n=s-1),r=a}return n},getDirectedBounds:function(t,e,i,n,r){var l=mxUtils$1.getValue(i,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST);if(n=n??mxUtils$1.getValue(i,mxConstants$1.STYLE_FLIPH,!1),r=r??mxUtils$1.getValue(i,mxConstants$1.STYLE_FLIPV,!1),e.x=Math.round(Math.max(0,Math.min(t.width,e.x))),e.y=Math.round(Math.max(0,Math.min(t.height,e.y))),e.width=Math.round(Math.max(0,Math.min(t.width,e.width))),e.height=Math.round(Math.max(0,Math.min(t.height,e.height))),r&&(l==mxConstants$1.DIRECTION_SOUTH||l==mxConstants$1.DIRECTION_NORTH)||n&&(l==mxConstants$1.DIRECTION_EAST||l==mxConstants$1.DIRECTION_WEST)){var s=e.x;e.x=e.width,e.width=s}if(n&&(l==mxConstants$1.DIRECTION_SOUTH||l==mxConstants$1.DIRECTION_NORTH)||r&&(l==mxConstants$1.DIRECTION_EAST||l==mxConstants$1.DIRECTION_WEST)){var s=e.y;e.y=e.height,e.height=s}var a=mxRectangle$1.fromRectangle(e);return l==mxConstants$1.DIRECTION_SOUTH?(a.y=e.x,a.x=e.height,a.width=e.y,a.height=e.width):l==mxConstants$1.DIRECTION_WEST?(a.y=e.height,a.x=e.width,a.width=e.x,a.height=e.y):l==mxConstants$1.DIRECTION_NORTH&&(a.y=e.width,a.x=e.y,a.width=e.height,a.height=e.x),new mxRectangle$1(t.x+a.x,t.y+a.y,t.width-a.width-a.x,t.height-a.height-a.y)},getPerimeterPoint:function(t,e,i){for(var n=null,r=0;r<t.length-1;r++){var l=mxUtils$1.intersection(t[r].x,t[r].y,t[r+1].x,t[r+1].y,e.x,e.y,i.x,i.y);if(l!=null){var s=i.x-l.x,a=i.y-l.y,o={p:l,distSq:a*a+s*s};o!=null&&(n==null||n.distSq>o.distSq)&&(n=o)}}return n!=null?n.p:null},intersectsPoints:function(t,e){for(var i=0;i<e.length-1;i++)if(mxUtils$1.rectangleIntersectsSegment(t,e[i],e[i+1]))return!0;return!1},rectangleIntersectsSegment:function(t,e,i){var n=t.y,r=t.x,l=n+t.height,s=r+t.width,a=e.x,o=i.x;if(e.x>i.x&&(a=i.x,o=e.x),o>s&&(o=s),a<r&&(a=r),a>o)return!1;var u=e.y,d=i.y,p=i.x-e.x;if(Math.abs(p)>1e-7){var c=(i.y-e.y)/p,g=e.y-c*e.x;u=c*a+g,d=c*o+g}if(u>d){var x=d;d=u,u=x}return d>l&&(d=l),u<n&&(u=n),!(u>d)},contains:function(t,e,i){return t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i},intersects:function(t,e,i){var n=t.width,r=t.height,l=e.width,s=e.height;if(!i&&(l<=0||s<=0||n<=0||r<=0))return!1;var a=t.x,o=t.y,u=e.x,d=e.y;return l+=u,s+=d,n+=a,r+=o,(l<u||l>a)&&(s<d||s>o)&&(n<a||n>u)&&(r<o||r>d)},intersectsHotspot:function(t,e,i,n,r,l){if(n=n??1,r=r??0,l=l??0,n>0){var s=t.getCenterX(),a=t.getCenterY(),o=t.width,u=t.height,d=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_STARTSIZE)*t.view.scale;d>0&&(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_HORIZONTAL,!0)?(a=t.y+d/2,u=d):(s=t.x+d/2,o=d)),o=Math.max(r,o*n),u=Math.max(r,u*n),l>0&&(o=Math.min(o,l),u=Math.min(u,l));var p=new mxRectangle$1(s-o/2,a-u/2,o,u),c=mxUtils$1.toRadians(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION)||0);if(c!=0){var g=Math.cos(-c),x=Math.sin(-c),s=new mxPoint$1(t.getCenterX(),t.getCenterY()),C=mxUtils$1.getRotatedPoint(new mxPoint$1(e,i),g,x,s);e=C.x,i=C.y}return mxUtils$1.contains(p,e,i)}return!0},getOffset:function(t,e){for(var i=0,n=0,r=!1,l=t,s=document.body,a=document.documentElement;l!=null&&l!=s&&l!=a&&!r;){var o=mxUtils$1.getCurrentStyle(l);o!=null&&(r=r||o.position=="fixed"),l=l.parentNode}if(!e&&!r){var u=mxUtils$1.getDocumentScrollOrigin(t.ownerDocument);i+=u.x,n+=u.y}var d=t.getBoundingClientRect();return d!=null&&(i+=d.left,n+=d.top),new mxPoint$1(i,n)},getDocumentScrollOrigin:function(t){var e=t.defaultView||t.parentWindow,i=e!=null&&window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,n=e!=null&&window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint$1(i,n)},getScrollOrigin:function(t,e,i){e=e??!1,i=i??!0;for(var n=t!=null?t.ownerDocument:document,r=n.body,l=n.documentElement,s=new mxPoint$1,a=!1;t!=null&&t!=r&&t!=l;){!isNaN(t.scrollLeft)&&!isNaN(t.scrollTop)&&(s.x+=t.scrollLeft,s.y+=t.scrollTop);var o=mxUtils$1.getCurrentStyle(t);o!=null&&(a=a||o.position=="fixed"),t=e?t.parentNode:null}if(!a&&i){var u=mxUtils$1.getDocumentScrollOrigin(n);s.x+=u.x,s.y+=u.y}return s},convertPoint:function(t,e,i){var n=mxUtils$1.getScrollOrigin(t,!1),r=mxUtils$1.getOffset(t);return r.x-=n.x,r.y-=n.y,new mxPoint$1(e-r.x,i-r.y)},removeJavascriptProtocol:function(t){for(t=t!=null?mxUtils$1.zapGremlins(t):null;t!=null&&mxUtils$1.ltrim(t.toLowerCase()).substring(0,11)==="javascript:";)t=t.substring(t.toLowerCase().indexOf(":")+1);return t},zapGremlins:function(t){for(var e=0,i=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);(r>=32||r==9||r==10||r==13)&&r!=65535&&r!=65534||(i.push(t.substring(e,n)),e=n+1)}return e>0&&e<t.length&&i.push(t.substring(e)),i.length==0?t:i.join("")},ltrim:function(t,e){return e=e||"\\s|\\0",t!=null?t.replace(new RegExp("^["+e+"]+","g"),""):null},rtrim:function(t,e){return e=e||"\\s|\\0",t!=null?t.replace(new RegExp("["+e+"]+$","g"),""):null},trim:function(t,e){return mxUtils$1.ltrim(mxUtils$1.rtrim(t,e),e)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)&&(typeof t!="string"||t.toLowerCase().indexOf("0x")<0)},isInteger:function(t){return String(parseInt(t))===String(t)},mod:function(t,e){return(t%e+e)%e},intersection:function(t,e,i,n,r,l,s,a){var o=(a-l)*(i-t)-(s-r)*(n-e),u=(s-r)*(e-l)-(a-l)*(t-r),d=(i-t)*(e-l)-(n-e)*(t-r),p=u/o,c=d/o;if(p>=0&&p<=1&&c>=0&&c<=1){var g=t+p*(i-t),x=e+p*(n-e);return new mxPoint$1(g,x)}return null},ptSegDistSq:function(t,e,i,n,r,l){i-=t,n-=e,r-=t,l-=e;var s=r*i+l*n,a;s<=0?a=0:(r=i-r,l=n-l,s=r*i+l*n,s<=0?a=0:a=s*s/(i*i+n*n));var o=r*r+l*l-a;return o<0&&(o=0),o},ptLineDist:function(t,e,i,n,r,l){return Math.abs((n-e)*r-(i-t)*l+i*e-n*t)/Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))},relativeCcw:function(t,e,i,n,r,l){i-=t,n-=e,r-=t,l-=e;var s=r*n-l*i;return s==0&&(s=r*i+l*n,s>0&&(r-=i,l-=n,s=r*i+l*n,s<0&&(s=0))),s<0?-1:s>0?1:0},animateChanges:function(t,e){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(t,e,i){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(t,e,i,n,r,l){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(t,e){mxClient$1.IS_IE&&(typeof document.documentMode>"u"||document.documentMode<9)?e>=100?t.style.filter="":t.style.filter="alpha(opacity="+e+")":t.style.opacity=e/100},createElementNs:function(t,e,i){if(t.createElementNS!=null)return t.createElementNS(e,i);var n=t.createElement(i);return namespace!=null&&n.setAttribute("xmlns",e),n},createImage:function(t){var e=null;return e=document.createElement("img"),e.setAttribute("src",t),e.setAttribute("border","0"),e},sortCells:function(t,e){e=e??!0;var i=new mxDictionary$1;return t.sort(function(n,r){var l=i.get(n);l==null&&(l=mxCellPath$1.create(n).split(mxCellPath$1.PATH_SEPARATOR),i.put(n,l));var s=i.get(r);s==null&&(s=mxCellPath$1.create(r).split(mxCellPath$1.PATH_SEPARATOR),i.put(r,s));var a=mxCellPath$1.compare(l,s);return a==0?0:a>0==e?1:-1}),t},getStylename:function(t){if(t!=null){var e=t.split(";"),i=e[0];if(i.indexOf("=")<0)return i}return""},getStylenames:function(t){var e=[];if(t!=null)for(var i=t.split(";"),n=0;n<i.length;n++)i[n].indexOf("=")<0&&e.push(i[n]);return e},indexOfStylename:function(t,e){if(t!=null&&e!=null)for(var i=t.split(";"),n=0,r=0;r<i.length;r++){if(i[r]==e)return n;n+=i[r].length+1}return-1},addStylename:function(t,e){return mxUtils$1.indexOfStylename(t,e)<0&&(t==null?t="":t.length>0&&t.charAt(t.length-1)!=";"&&(t+=";"),t+=e),t},removeStylename:function(t,e){var i=[];if(t!=null)for(var n=t.split(";"),r=0;r<n.length;r++)n[r]!=e&&i.push(n[r]);return i.join(";")},removeAllStylenames:function(t){var e=[];if(t!=null)for(var i=t.split(";"),n=0;n<i.length;n++)i[n].indexOf("=")>=0&&e.push(i[n]);return e.join(";")},setCellStyles:function(t,e,i,n){if(e!=null&&e.length>0){t.beginUpdate();try{for(var r=0;r<e.length;r++)if(e[r]!=null){var l=mxUtils$1.setStyle(t.getStyle(e[r]),i,n);t.setStyle(e[r],l)}}finally{t.endUpdate()}}},parseHexColor:function(t,e){var i=null;if(t!=null&&t.length>=7&&t.charAt(0)=="#"){var n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),l=parseInt(t.substring(5,7),16),s=e??1;t.length>7&&(s=parseInt(t.substring(7,9),16)/255),i={r:n,g:r,b:l,a:s}}return i},hex2rgb:function(t){var e=mxUtils$1.parseHexColor(t);return e!=null&&(t="rgb("+e.r+", "+e.g+", "+e.b+")"),t},hex2rgba:function(t,e){var i=mxUtils$1.parseHexColor(t,e);return i!=null&&(t="rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")"),t},rgba2hex:function(t){return rgb=t&&t.match?t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i):t,rgb&&rgb.length===4?"#"+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2):t},setStyle:function(t,e,i){var n=i!=null&&(typeof i.length>"u"||i.length>0);if(t==null||t.length==0)n&&(t=e+"="+i+";");else if(t.substring(0,e.length+1)==e+"="){var r=t.indexOf(";");n?t=e+"="+i+(r<0?";":t.substring(r)):t=r<0||r==t.length-1?"":t.substring(r+1)}else{var l=t.indexOf(";"+e+"=");if(l<0){if(n){var s=t.charAt(t.length-1)==";"?"":";";t=t+s+e+"="+i+";"}}else{var r=t.indexOf(";",l+1);n?t=t.substring(0,l+1)+e+"="+i+(r<0?";":t.substring(r)):t=t.substring(0,l)+(r<0?";":t.substring(r))}}return t},setCellStyleFlags:function(t,e,i,n,r){if(e!=null&&e.length>0){t.beginUpdate();try{for(var l=0;l<e.length;l++)if(e[l]!=null){var s=mxUtils$1.setStyleFlag(t.getStyle(e[l]),i,n,r);t.setStyle(e[l],s)}}finally{t.endUpdate()}}},setStyleFlag:function(t,e,i,n){if(t==null||t.length==0)n||n==null?t=e+"="+i:t=e+"=0";else{var r=t.indexOf(e+"=");if(r<0){var l=t.charAt(t.length-1)==";"?"":";";n||n==null?t=t+l+e+"="+i:t=t+l+e+"=0"}else{var s=t.indexOf(";",r),a="";s<0?a=t.substring(r+e.length+1):a=t.substring(r+e.length+1,s),n==null?a=parseInt(a)^i:n?a=parseInt(a)|i:a=parseInt(a)&~i,t=t.substring(0,r)+e+"="+a+(s>=0?t.substring(s):"")}}return t},getAlignmentAsPoint:function(t,e){var i=-.5,n=-.5;return t==mxConstants$1.ALIGN_LEFT?i=0:t==mxConstants$1.ALIGN_RIGHT&&(i=-1),e==mxConstants$1.ALIGN_TOP?n=0:e==mxConstants$1.ALIGN_BOTTOM&&(n=-1),new mxPoint$1(i,n)},getSizeForString:function(t,e,i,n,r){e=e??mxConstants$1.DEFAULT_FONTSIZE,i=i??mxConstants$1.DEFAULT_FONTFAMILY;var l=document.createElement("div");if(l.style.fontFamily=i,l.style.fontSize=Math.round(e)+"px",l.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?e*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT*mxSvgCanvas2D.prototype.lineHeightCorrection,r!=null){(r&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(l.style.fontWeight="bold"),(r&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(l.style.fontStyle="italic");var s=[];(r&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&s.push("underline"),(r&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&s.push("line-through"),s.length>0&&(l.style.textDecoration=s.join(" "))}l.style.position="absolute",l.style.visibility="hidden",l.style.display="inline-block",l.style.zoom="1",n!=null?(l.style.width=n+"px",l.style.whiteSpace="normal"):l.style.whiteSpace="nowrap",l.innerHTML=t,document.body.appendChild(l);var a=new mxRectangle$1(0,0,l.offsetWidth,l.offsetHeight);return document.body.removeChild(l),a},getViewXml:function(t,e,i,n,r){if(n=n??0,r=r??0,e=e??1,i==null){var l=t.getModel();i=[l.getRoot()]}var s=t.getView(),a=null,o=s.isEventsEnabled();s.setEventsEnabled(!1);var u=s.drawPane,d=s.overlayPane;t.dialect==mxConstants$1.DIALECT_SVG?(s.drawPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),s.canvas.appendChild(s.drawPane),s.overlayPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),s.canvas.appendChild(s.overlayPane)):(s.drawPane=s.drawPane.cloneNode(!1),s.canvas.appendChild(s.drawPane),s.overlayPane=s.overlayPane.cloneNode(!1),s.canvas.appendChild(s.overlayPane));var p=s.getTranslate();s.translate=new mxPoint$1(n,r);var c=new mxTemporaryCellStates(t.getView(),e,i);try{var g=new mxCodec;a=g.encode(t.getView())}finally{c.destroy(),s.translate=p,s.canvas.removeChild(s.drawPane),s.canvas.removeChild(s.overlayPane),s.drawPane=u,s.overlayPane=d,s.setEventsEnabled(o)}return a},getScaleForPageCount:function(t,e,i,n){if(t<1)return 1;i=i??mxConstants$1.PAGE_FORMAT_A4_PORTRAIT,n=n??0;var r=i.width-n*2,l=i.height-n*2,s=mxRectangle$1.fromRectangle(e.getGraphBounds()),a=e.getView().getScale();s.width/=a,s.height/=a;var o=s.width,u=s.height,d=1,p=r/l,c=o/u,g=c/p,x=Math.sqrt(t),C=Math.sqrt(g),T=x*C,A=x/C;if(T<1&&A>t){var R=A/t;A=t,T/=R}if(A<1&&T>t){var R=T/t;T=t,A/=R}for(var _=Math.ceil(T)*Math.ceil(A),N=0;_>t;){var H=Math.floor(T)/T,k=Math.floor(A)/A;H==1&&(H=Math.floor(T-1)/T),k==1&&(k=Math.floor(A-1)/A);var R=1;if(H>k?R=H:R=k,T=T*R,A=A*R,_=Math.ceil(T)*Math.ceil(A),N++,N>10)break}var K=r*T;return d=K/o,d*.99999},show:function(t,e,i,n,r,l){if(i=i??0,n=n??0,e==null){var s=window.open();e=s.document}else e.open();document.documentMode==9&&e.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->');var a=t.getGraphBounds(),o=Math.ceil(i-a.x),u=Math.ceil(n-a.y);if(r==null&&(r=Math.ceil(a.width+i)+Math.ceil(Math.ceil(a.x)-a.x)),l==null&&(l=Math.ceil(a.height+n)+Math.ceil(Math.ceil(a.y)-a.y)),mxClient$1.IS_IE||document.documentMode==11){for(var d="<html><head>",p=document.getElementsByTagName("base"),c=0;c<p.length;c++)d+=p[c].outerHTML;d+="<style>";for(var c=0;c<document.styleSheets.length;c++)try{d+=document.styleSheets[c].cssText}catch{}d+='</style></head><body style="margin:0px;">',d+='<div style="position:absolute;overflow:hidden;width:'+r+"px;height:"+l+'px;"><div style="position:relative;left:'+o+"px;top:"+u+'px;">',d+=t.container.innerHTML,d+="</div></div></body><html>",e.writeln(d),e.close()}else{e.writeln("<html><head>");for(var p=document.getElementsByTagName("base"),c=0;c<p.length;c++)e.writeln(mxUtils$1.getOuterHtml(p[c]));for(var g=document.getElementsByTagName("link"),c=0;c<g.length;c++)e.writeln(mxUtils$1.getOuterHtml(g[c]));for(var x=document.getElementsByTagName("style"),c=0;c<x.length;c++)e.writeln(mxUtils$1.getOuterHtml(x[c]));e.writeln('</head><body style="margin:0px;"></body></html>'),e.close();var C=e.createElement("div");C.position="absolute",C.overflow="hidden",C.style.width=r+"px",C.style.height=l+"px";var T=e.createElement("div");T.style.position="absolute",T.style.left=o+"px",T.style.top=u+"px";for(var A=t.container.firstChild,R=null;A!=null;){var _=A.cloneNode(!0);A==t.view.drawPane.ownerSVGElement?(C.appendChild(_),R=_):T.appendChild(_),A=A.nextSibling}e.body.appendChild(C),T.firstChild!=null&&e.body.appendChild(T),R!=null&&(R.style.minWidth="",R.style.minHeight="",R.firstChild.setAttribute("transform","translate("+o+","+u+")"))}return mxUtils$1.removeCursors(e.body),e},printScreen:function(t){var e=window.open();mxUtils$1.show(t,e.document);var i=function(){e.focus(),e.print(),e.close()};mxClient$1.IS_GC?e.setTimeout(i,500):i()},popup:function(t,e){if(e){var i=document.createElement("div");i.style.overflow="scroll",i.style.width="636px",i.style.height="460px";var n=document.createElement("pre");n.innerHTML=mxUtils$1.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),i.appendChild(n);var r=document.body.clientWidth,l=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight),s=new mxWindow("Popup Window",i,r/2-320,l/2-240,640,480,!1,!0);s.setClosable(!0),s.setVisible(!0)}else if(mxClient$1.IS_NS){var s=window.open();s.document.writeln("<pre>"+mxUtils$1.htmlEntities(t)+"</pre"),s.document.close()}else{var s=window.open(),n=s.document.createElement("pre");n.innerHTML=mxUtils$1.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),s.document.body.appendChild(n)}},alert:function(t){alert(t)},prompt:function(t,e){return prompt(t,e??"")},confirm:function(t){return confirm(t)},error:function(t,e,i,n){var r=document.createElement("div");r.style.padding="20px";var l=document.createElement("img");l.setAttribute("src",n||mxUtils$1.errorImage),l.setAttribute("valign","bottom"),l.style.verticalAlign="middle",r.appendChild(l),r.appendChild(document.createTextNode("")),r.appendChild(document.createTextNode("")),r.appendChild(document.createTextNode("")),mxUtils$1.write(r,t);var s=document.body.clientWidth,a=document.body.clientHeight||document.documentElement.clientHeight,o=new mxWindow(mxResources.get(mxUtils$1.errorResource)||mxUtils$1.errorResource,r,(s-e)/2,a/4,e,null,!1,!0);if(i){mxUtils$1.br(r);var u=document.createElement("p"),d=document.createElement("button");mxClient$1.IS_IE?d.style.cssText="float:right":d.setAttribute("style","float:right"),mxEvent$1.addListener(d,"click",function(p){o.destroy()}),mxUtils$1.write(d,mxResources.get(mxUtils$1.closeResource)||mxUtils$1.closeResource),u.appendChild(d),r.appendChild(u),mxUtils$1.br(r),o.setClosable(!0)}return o.setVisible(!0),o},makeDraggable:function(t,e,i,n,r,l,s,a,o,u){var d=new mxDragSource(t,i);return d.dragOffset=new mxPoint$1(r??0,l??mxConstants$1.TOOLTIP_VERTICAL_OFFSET),d.autoscroll=s,d.setGuidesEnabled(!1),o!=null&&(d.highlightDropTargets=o),u!=null&&(d.getDropTarget=u),d.getGraphForEvent=function(p){return typeof e=="function"?e(p):e},n!=null&&(d.createDragElement=function(){return n.cloneNode(!0)},a&&(d.createPreviewElement=function(p){var c=n.cloneNode(!0),g=parseInt(c.style.width),x=parseInt(c.style.height);return c.style.width=Math.round(g*p.view.scale)+"px",c.style.height=Math.round(x*p.view.scale)+"px",c})),d},format:function(t){return parseFloat(parseFloat(t).toFixed(2))}};function mxCellHighlight$1(t,e,i,n){t!=null&&(this.graph=t,this.highlightColor=e??mxConstants$1.DEFAULT_VALID_COLOR,this.strokeWidth=i??mxConstants$1.HIGHLIGHT_STROKEWIDTH,this.dashed=n??!1,this.opacity=mxConstants$1.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils$1.bind(this,function(){if(this.state!=null){var r=this.graph.view.getState(this.state.cell);r==null?this.hide():(this.state=r,this.repaint())}}),this.graph.getView().addListener(mxEvent$1.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.repaintHandler),this.resetHandler=mxUtils$1.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent$1.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent$1.UP,this.resetHandler))}mxCellHighlight$1.prototype.keepOnTop=!1;mxCellHighlight$1.prototype.graph=null;mxCellHighlight$1.prototype.state=null;mxCellHighlight$1.prototype.spacing=0;mxCellHighlight$1.prototype.resetHandler=null;mxCellHighlight$1.prototype.setHighlightColor=function(t){this.highlightColor=t,this.shape!=null&&(this.shape.stroke=t)};mxCellHighlight$1.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),!this.keepOnTop&&this.shape.node.parentNode.firstChild!=this.shape.node&&this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)};mxCellHighlight$1.prototype.createShape=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.svgStrokeTolerance=this.graph.tolerance,t.points=this.state.absolutePoints,t.apply(this.state),t.stroke=this.highlightColor,t.opacity=this.opacity,t.isDashed=this.dashed,t.isShadow=!1,t.dialect=mxConstants$1.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(t.node,this.graph,this.state),this.graph.dialect!=mxConstants$1.DIALECT_SVG?t.pointerEvents=!1:t.svgPointerEvents="stroke",t};mxCellHighlight$1.prototype.getStrokeWidth=function(t){return this.strokeWidth};mxCellHighlight$1.prototype.repaint=function(){this.state!=null&&this.shape!=null&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle$1(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),this.state.shape!=null&&this.shape.setCursor(this.state.shape.getCursor()),this.shape.redraw())};mxCellHighlight$1.prototype.hide=function(){this.highlight(null)};mxCellHighlight$1.prototype.highlight=function(t){this.state!=t&&(this.shape!=null&&(this.shape.destroy(),this.shape=null),this.state=t,this.state!=null&&this.drawHighlight())};mxCellHighlight$1.prototype.isHighlightAt=function(t,e){var i=!1;if(this.shape!=null&&document.elementFromPoint!=null)for(var n=document.elementFromPoint(t,e);n!=null;){if(n==this.shape.node){i=!0;break}n=n.parentNode}return i};mxCellHighlight$1.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),this.shape!=null&&(this.shape.destroy(),this.shape=null)};function mxEventSource(t){this.setEventSource(t)}mxEventSource.prototype.eventListeners=null;mxEventSource.prototype.eventsEnabled=!0;mxEventSource.prototype.eventSource=null;mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled};mxEventSource.prototype.setEventsEnabled=function(t){this.eventsEnabled=t};mxEventSource.prototype.getEventSource=function(){return this.eventSource};mxEventSource.prototype.setEventSource=function(t){this.eventSource=t};mxEventSource.prototype.addListener=function(t,e){this.eventListeners==null&&(this.eventListeners=[]),this.eventListeners.push(t),this.eventListeners.push(e)};mxEventSource.prototype.removeListener=function(t){if(this.eventListeners!=null)for(var e=0;e<this.eventListeners.length;)this.eventListeners[e+1]==t?this.eventListeners.splice(e,2):e+=2};mxEventSource.prototype.fireEvent=function(t,e){if(this.eventListeners!=null&&this.isEventsEnabled()){t==null&&(t=new mxEventObject),e==null&&(e=this.getEventSource()),e==null&&(e=this);for(var i=0;i<this.eventListeners.length;i+=2){var n=this.eventListeners[i];(n==null||n==t.getName())&&this.eventListeners[i+1].apply(this,[e,t])}}};function mxEventObject$1(t){this.name=t,this.properties=[];for(var e=1;e<arguments.length;e+=2)arguments[e+1]!=null&&(this.properties[arguments[e]]=arguments[e+1])}mxEventObject$1.prototype.name=null;mxEventObject$1.prototype.properties=null;mxEventObject$1.prototype.consumed=!1;mxEventObject$1.prototype.getName=function(){return this.name};mxEventObject$1.prototype.getProperties=function(){return this.properties};mxEventObject$1.prototype.getProperty=function(t){return this.properties[t]};mxEventObject$1.prototype.isConsumed=function(){return this.consumed};mxEventObject$1.prototype.consume=function(){this.consumed=!0};function mxCellMarker$1(t,e,i,n){mxEventSource.call(this),t!=null&&(this.graph=t,this.validColor=e??mxConstants$1.DEFAULT_VALID_COLOR,this.invalidColor=i??mxConstants$1.DEFAULT_INVALID_COLOR,this.hotspot=n??mxConstants$1.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight$1(t))}mxUtils$1.extend(mxCellMarker$1,mxEventSource);mxCellMarker$1.prototype.graph=null;mxCellMarker$1.prototype.enabled=!0;mxCellMarker$1.prototype.hotspot=mxConstants$1.DEFAULT_HOTSPOT;mxCellMarker$1.prototype.hotspotEnabled=!1;mxCellMarker$1.prototype.validColor=null;mxCellMarker$1.prototype.invalidColor=null;mxCellMarker$1.prototype.currentColor=null;mxCellMarker$1.prototype.validState=null;mxCellMarker$1.prototype.markedState=null;mxCellMarker$1.prototype.setEnabled=function(t){this.enabled=t};mxCellMarker$1.prototype.isEnabled=function(){return this.enabled};mxCellMarker$1.prototype.setHotspot=function(t){this.hotspot=t};mxCellMarker$1.prototype.getHotspot=function(){return this.hotspot};mxCellMarker$1.prototype.setHotspotEnabled=function(t){this.hotspotEnabled=t};mxCellMarker$1.prototype.isHotspotEnabled=function(){return this.hotspotEnabled};mxCellMarker$1.prototype.hasValidState=function(){return this.validState!=null};mxCellMarker$1.prototype.getValidState=function(){return this.validState};mxCellMarker$1.prototype.getMarkedState=function(){return this.markedState};mxCellMarker$1.prototype.reset=function(){this.validState=null,this.markedState!=null&&(this.markedState=null,this.unmark())};mxCellMarker$1.prototype.process=function(t){var e=null;return this.isEnabled()&&(e=this.getState(t),this.setCurrentState(e,t)),e};mxCellMarker$1.prototype.setCurrentState=function(t,e,i){var n=t!=null?this.isValidState(t):!1;i=i??this.getMarkerColor(e.getEvent(),t,n),n?this.validState=t:this.validState=null,(t!=this.markedState||i!=this.currentColor)&&(this.currentColor=i,t!=null&&this.currentColor!=null?(this.markedState=t,this.mark()):this.markedState!=null&&(this.markedState=null,this.unmark()))};mxCellMarker$1.prototype.markCell=function(t,e){var i=this.graph.getView().getState(t);i!=null&&(this.currentColor=e??this.validColor,this.markedState=i,this.mark())};mxCellMarker$1.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject$1(mxEvent$1.MARK,"state",this.markedState))};mxCellMarker$1.prototype.unmark=function(){this.mark()};mxCellMarker$1.prototype.isValidState=function(t){return!0};mxCellMarker$1.prototype.getMarkerColor=function(t,e,i){return i?this.validColor:this.invalidColor};mxCellMarker$1.prototype.getState=function(t){var e=this.graph.getView(),i=this.getCell(t),n=this.getStateToMark(e.getState(i));return n!=null&&this.intersects(n,t)?n:null};mxCellMarker$1.prototype.getCell=function(t){return t.getCell()};mxCellMarker$1.prototype.getStateToMark=function(t){return t};mxCellMarker$1.prototype.intersects=function(t,e){return this.hotspotEnabled?mxUtils$1.intersectsHotspot(t,e.getGraphX(),e.getGraphY(),this.hotspot,mxConstants$1.MIN_HOTSPOT_SIZE,mxConstants$1.MAX_HOTSPOT_SIZE):!0};mxCellMarker$1.prototype.destroy=function(){this.highlight.destroy()};function mxCellTracker(t,e,i){mxCellMarker$1.call(this,t,e),this.graph.addMouseListener(this),i!=null&&(this.getCell=i),mxClient.IS_IE&&mxEvent$1.addListener(window,"unload",mxUtils$1.bind(this,function(){this.destroy()}))}mxUtils$1.extend(mxCellTracker,mxCellMarker$1);mxCellTracker.prototype.mouseDown=function(t,e){};mxCellTracker.prototype.mouseMove=function(t,e){this.isEnabled()&&this.process(e)};mxCellTracker.prototype.mouseUp=function(t,e){};mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker$1.prototype.destroy.apply(this))};var mxLog$1={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){if(mxLog$1.window==null&&document.body!=null){var t=mxLog$1.consoleName+" - mxGraph "+mxClient.VERSION,e=document.createElement("table");e.setAttribute("width","100%"),e.setAttribute("height","100%");var i=document.createElement("tbody"),n=document.createElement("tr"),r=document.createElement("td");r.style.verticalAlign="top",mxLog$1.textarea=document.createElement("textarea"),mxLog$1.textarea.setAttribute("wrap","off"),mxLog$1.textarea.setAttribute("readOnly","true"),mxLog$1.textarea.style.height="100%",mxLog$1.textarea.style.resize="none",mxLog$1.textarea.value=mxLog$1.buffer,mxClient.IS_NS&&document.compatMode!="BackCompat"?mxLog$1.textarea.style.width="99%":mxLog$1.textarea.style.width="100%",r.appendChild(mxLog$1.textarea),n.appendChild(r),i.appendChild(n),n=document.createElement("tr"),mxLog$1.td=document.createElement("td"),mxLog$1.td.style.verticalAlign="top",mxLog$1.td.setAttribute("height","30px"),n.appendChild(mxLog$1.td),i.appendChild(n),e.appendChild(i),mxLog$1.addButton("Info",function(u){mxLog$1.info()}),mxLog$1.addButton("DOM",function(u){var d=mxUtils.getInnerHtml(document.body);mxLog$1.debug(d)}),mxLog$1.addButton("Trace",function(u){mxLog$1.TRACE=!mxLog$1.TRACE,mxLog$1.TRACE?mxLog$1.debug("Tracing enabled"):mxLog$1.debug("Tracing disabled")}),mxLog$1.addButton("Copy",function(u){try{mxUtils.copy(mxLog$1.textarea.value)}catch(d){mxUtils.alert(d)}}),mxLog$1.addButton("Show",function(u){try{mxUtils.popup(mxLog$1.textarea.value)}catch(d){mxUtils.alert(d)}}),mxLog$1.addButton("Clear",function(u){mxLog$1.textarea.value=""});var l=0,s=0;if(typeof window.innerWidth=="number"?(l=window.innerHeight,s=window.innerWidth):(l=document.documentElement.clientHeight||document.body.clientHeight,s=document.body.clientWidth),mxLog$1.window=new mxWindow(t,e,Math.max(0,s-320),Math.max(0,l-210),300,160),mxLog$1.window.setMaximizable(!0),mxLog$1.window.setScrollable(!1),mxLog$1.window.setResizable(!0),mxLog$1.window.setClosable(!0),mxLog$1.window.destroyOnClose=!1,(mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&document.compatMode!="BackCompat"||document.documentMode==11){var a=mxLog$1.window.getElement(),o=function(u,d){mxLog$1.textarea.style.height=Math.max(0,a.offsetHeight-70)+"px"};mxLog$1.window.addListener(mxEvent.RESIZE_END,o),mxLog$1.window.addListener(mxEvent.MAXIMIZE,o),mxLog$1.window.addListener(mxEvent.NORMALIZE,o),mxLog$1.textarea.style.height="92px"}}},info:function(){mxLog$1.writeln(mxUtils.toString(navigator))},addButton:function(t,e){var i=document.createElement("button");mxUtils.write(i,t),mxEvent.addListener(i,"click",e),mxLog$1.td.appendChild(i)},isVisible:function(){return mxLog$1.window!=null?mxLog$1.window.isVisible():!1},show:function(){mxLog$1.setVisible(!0)},setVisible:function(t){mxLog$1.window==null&&mxLog$1.init(),mxLog$1.window!=null&&mxLog$1.window.setVisible(t)},enter:function(t){if(mxLog$1.TRACE)return mxLog$1.writeln("Entering "+t),new Date().getTime()},leave:function(t,e){if(mxLog$1.TRACE){var i=e!=0?" ("+(new Date().getTime()-e)+" ms)":"";mxLog$1.writeln("Leaving "+t+i)}},debug:function(){mxLog$1.DEBUG&&mxLog$1.writeln.apply(this,arguments)},warn:function(){mxLog$1.WARN&&mxLog$1.writeln.apply(this,arguments)},write:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");mxLog$1.textarea!=null?(mxLog$1.textarea.value=mxLog$1.textarea.value+t,navigator.userAgent!=null&&navigator.userAgent.indexOf("Presto/2.5")>=0&&(mxLog$1.textarea.style.visibility="hidden",mxLog$1.textarea.style.visibility="visible"),mxLog$1.textarea.scrollTop=mxLog$1.textarea.scrollHeight):mxLog$1.buffer+=t},writeln:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");mxLog$1.write(t+`
`)}},mxUrlConverter=function(){};mxUrlConverter.prototype.enabled=!0;mxUrlConverter.prototype.baseUrl=null;mxUrlConverter.prototype.baseDomain=null;mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var t=this.baseUrl.lastIndexOf("/");t>0&&(this.baseUrl=this.baseUrl.substring(0,t+1))};mxUrlConverter.prototype.isEnabled=function(){return this.enabled};mxUrlConverter.prototype.setEnabled=function(t){this.enabled=t};mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl};mxUrlConverter.prototype.setBaseUrl=function(t){this.baseUrl=t};mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain};mxUrlConverter.prototype.setBaseDomain=function(t){this.baseDomain=t};mxUrlConverter.prototype.isRelativeUrl=function(t){return typeof t=="string"&&t.substring(0,10)!="data:image"&&t.substring(0,7)!="http://"&&t.substring(0,7)!="file://"&&t.substring(0,8)!="https://"&&t.substring(0,2)!="//"};mxUrlConverter.prototype.convert=function(t){return this.isEnabled()&&this.isRelativeUrl(t)&&(this.getBaseUrl()==null&&this.updateBaseUrl(),t.charAt(0)=="/"?t=this.getBaseDomain()+t:t=this.getBaseUrl()+t),t};function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}mxAbstractCanvas2D.prototype.state=null;mxAbstractCanvas2D.prototype.states=null;mxAbstractCanvas2D.prototype.path=null;mxAbstractCanvas2D.prototype.rotateHtml=!0;mxAbstractCanvas2D.prototype.lastX=0;mxAbstractCanvas2D.prototype.lastY=0;mxAbstractCanvas2D.prototype.moveOp="M";mxAbstractCanvas2D.prototype.lineOp="L";mxAbstractCanvas2D.prototype.quadOp="Q";mxAbstractCanvas2D.prototype.curveOp="C";mxAbstractCanvas2D.prototype.closeOp="Z";mxAbstractCanvas2D.prototype.pointerEvents=!1;mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter};mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]};mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants$1.DEFAULT_FONTSIZE,fontFamily:mxConstants$1.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowStyle:null,shadowColor:mxConstants$1.SHADOWCOLOR,shadowAlpha:mxConstants$1.SHADOW_OPACITY,shadowDx:mxConstants$1.SHADOW_OFFSET_X,shadowDy:mxConstants$1.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}};mxAbstractCanvas2D.prototype.format=function(t){return Math.round(parseFloat(t))};mxAbstractCanvas2D.prototype.addOp=function(){if(this.path!=null&&(this.path.push(arguments[0]),arguments.length>2))for(var t=this.state,e=2;e<arguments.length;e+=2)this.lastX=arguments[e-1],this.lastY=arguments[e],this.path.push(this.format((this.lastX+t.dx)*t.scale)),this.path.push(this.format((this.lastY+t.dy)*t.scale))};mxAbstractCanvas2D.prototype.rotatePoint=function(t,e,i,n,r){var l=i*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(t,e),Math.cos(l),Math.sin(l),new mxPoint(n,r))};mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)};mxAbstractCanvas2D.prototype.restore=function(){this.states.length>0&&(this.state=this.states.pop())};mxAbstractCanvas2D.prototype.setTitle=function(t){};mxAbstractCanvas2D.prototype.setLink=function(t,e){};mxAbstractCanvas2D.prototype.scale=function(t){this.state.scale*=t,this.state.strokeWidth*=t};mxAbstractCanvas2D.prototype.translate=function(t,e){this.state.dx+=t,this.state.dy+=e};mxAbstractCanvas2D.prototype.rotate=function(t,e,i,n,r){};mxAbstractCanvas2D.prototype.setAlpha=function(t){this.state.alpha=t};mxAbstractCanvas2D.prototype.setFillAlpha=function(t){this.state.fillAlpha=t};mxAbstractCanvas2D.prototype.setStrokeAlpha=function(t){this.state.strokeAlpha=t};mxAbstractCanvas2D.prototype.setFillColor=function(t){t==mxConstants$1.NONE&&(t=null),this.state.fillColor=t,this.state.gradientColor=null};mxAbstractCanvas2D.prototype.setFillStyle=function(t){t==mxConstants$1.NONE&&(t=null),this.state.fillStyle=t};mxAbstractCanvas2D.prototype.setGradient=function(t,e,i,n,r,l,s,a,o){var u=this.state;u.fillColor=t,u.gradientFillAlpha=a??1,u.gradientColor=e,u.gradientAlpha=o??1,u.gradientDirection=s};mxAbstractCanvas2D.prototype.setStrokeColor=function(t){t==mxConstants$1.NONE&&(t=null),this.state.strokeColor=t};mxAbstractCanvas2D.prototype.setStrokeWidth=function(t){this.state.strokeWidth=t};mxAbstractCanvas2D.prototype.setDashed=function(t,e){this.state.dashed=t,this.state.fixDash=e};mxAbstractCanvas2D.prototype.setDashPattern=function(t){this.state.dashPattern=t};mxAbstractCanvas2D.prototype.setLineCap=function(t){this.state.lineCap=t};mxAbstractCanvas2D.prototype.setLineJoin=function(t){this.state.lineJoin=t};mxAbstractCanvas2D.prototype.setMiterLimit=function(t){this.state.miterLimit=t};mxAbstractCanvas2D.prototype.setFontColor=function(t){t==mxConstants$1.NONE&&(t=null),this.state.fontColor=t};mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(t){t==mxConstants$1.NONE&&(t=null),this.state.fontBackgroundColor=t};mxAbstractCanvas2D.prototype.setFontBorderColor=function(t){t==mxConstants$1.NONE&&(t=null),this.state.fontBorderColor=t};mxAbstractCanvas2D.prototype.setFontSize=function(t){this.state.fontSize=parseFloat(t)};mxAbstractCanvas2D.prototype.setFontFamily=function(t){this.state.fontFamily=t};mxAbstractCanvas2D.prototype.setFontStyle=function(t){t==null&&(t=0),this.state.fontStyle=t};mxAbstractCanvas2D.prototype.setShadow=function(t,e){this.state.shadow=t,this.state.shadowStyle=e};mxAbstractCanvas2D.prototype.setShadowColor=function(t){t==mxConstants$1.NONE&&(t=null),this.state.shadowColor=t};mxAbstractCanvas2D.prototype.setShadowAlpha=function(t){this.state.shadowAlpha=t};mxAbstractCanvas2D.prototype.setShadowOffset=function(t,e){this.state.shadowDx=t,this.state.shadowDy=e};mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0,this.lastY=0,this.path=[]};mxAbstractCanvas2D.prototype.moveTo=function(t,e){this.addOp(this.moveOp,t,e)};mxAbstractCanvas2D.prototype.lineTo=function(t,e){this.addOp(this.lineOp,t,e)};mxAbstractCanvas2D.prototype.quadTo=function(t,e,i,n){this.addOp(this.quadOp,t,e,i,n)};mxAbstractCanvas2D.prototype.curveTo=function(t,e,i,n,r,l){this.addOp(this.curveOp,t,e,i,n,r,l)};mxAbstractCanvas2D.prototype.arcTo=function(t,e,i,n,r,l,s){var a=mxUtils.arcToCurves(this.lastX,this.lastY,t,e,i,n,r,l,s);if(a!=null)for(var o=0;o<a.length;o+=6)this.curveTo(a[o],a[o+1],a[o+2],a[o+3],a[o+4],a[o+5])};mxAbstractCanvas2D.prototype.close=function(t,e,i,n,r,l){this.addOp(this.closeOp)};mxAbstractCanvas2D.prototype.end=function(){};function mxSvgCanvas2D$1(t,e){mxAbstractCanvas2D.call(this),this.root=t,this.gradients=[],this.fillPatterns=[],this.defs=null,this.styleEnabled=e??!1;var i=null;if(t.ownerDocument!=document){for(var n=t;n!=null&&n.nodeName!="svg";)n=n.parentNode;i=n}if(i!=null){var r=i.getElementsByTagName("defs");r.length>0&&(this.defs=i.getElementsByTagName("defs")[0]),this.defs==null&&(this.defs=this.createElement("defs"),i.firstChild!=null?i.insertBefore(this.defs,i.firstChild):i.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle())}}mxUtils$1.extend(mxSvgCanvas2D$1,mxAbstractCanvas2D);(function(){if(mxSvgCanvas2D$1.prototype.useDomParser=!mxClient$1.IS_IE&&typeof DOMParser=="function"&&typeof XMLSerializer=="function",mxSvgCanvas2D$1.prototype.useDomParser)try{var t=new DOMParser().parseFromString("test text","text/html");mxSvgCanvas2D$1.prototype.useDomParser=t!=null}catch{mxSvgCanvas2D$1.prototype.useDomParser=!1}mxSvgCanvas2D$1.prototype.useAbsoluteIds=!mxClient$1.IS_CHROMEAPP&&!mxClient$1.IS_IE&&!mxClient$1.IS_IE11&&!mxClient$1.IS_EDGE&&document.getElementsByTagName("base").length>0})();mxSvgCanvas2D$1.prototype.node=null;mxSvgCanvas2D$1.prototype.matchHtmlAlignment=!0;mxSvgCanvas2D$1.prototype.textEnabled=!0;mxSvgCanvas2D$1.prototype.foEnabled=!0;mxSvgCanvas2D$1.prototype.foAltText="[Object]";mxSvgCanvas2D$1.prototype.foOffset=0;mxSvgCanvas2D$1.prototype.textOffset=0;mxSvgCanvas2D$1.prototype.imageOffset=0;mxSvgCanvas2D$1.prototype.strokeTolerance=0;mxSvgCanvas2D$1.prototype.minStrokeWidth=1;mxSvgCanvas2D$1.prototype.refCount=0;mxSvgCanvas2D$1.prototype.lineHeightCorrection=1;mxSvgCanvas2D$1.prototype.pointerEventsValue="all";mxSvgCanvas2D$1.prototype.fontMetricsPadding=10;mxSvgCanvas2D$1.prototype.foreignObjectPadding=2;mxSvgCanvas2D$1.prototype.cacheOffsetSize=!0;mxSvgCanvas2D$1.prototype.setCssText=function(t,e){t!=null&&(mxClient$1.IS_IE||mxClient$1.IS_IE11?t.setAttribute("style",e):t.style!=null&&(t.style.cssText=e))};mxSvgCanvas2D$1.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))};mxSvgCanvas2D$1.prototype.getBaseUrl=function(){var t=window.location.href,e=t.indexOf("#");return e>0&&(t=t.substring(0,e)),t};mxSvgCanvas2D$1.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[],this.fillPatterns=[]};mxSvgCanvas2D$1.prototype.createStyle=function(t){var e=this.createElement("style");return e.setAttribute("type","text/css"),mxUtils$1.write(e,"svg{font-family:"+mxConstants$1.DEFAULT_FONTFAMILY+";font-size:"+mxConstants$1.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),e};mxSvgCanvas2D$1.prototype.createElement=function(t,e){if(this.root.ownerDocument.createElementNS!=null)return this.root.ownerDocument.createElementNS(e||mxConstants$1.NS_SVG,t);var i=this.root.ownerDocument.createElement(t);return e!=null&&i.setAttribute("xmlns",e),i};mxSvgCanvas2D$1.prototype.getAlternateText=function(t,e,i,n,r,l,s,a,o,u,d,p,c){return l!=null?this.foAltText:null};mxSvgCanvas2D$1.prototype.createAlternateContent=function(t,e,i,n,r,l,s,a,o,u,d,p,c){var g=this.getAlternateText(t,e,i,n,r,l,s,a,o,u,d,p,c),x=this.state;if(g!=null&&x.fontSize>0){var C=a==mxConstants$1.ALIGN_TOP?1:a==mxConstants$1.ALIGN_BOTTOM?0:.3,T=s==mxConstants$1.ALIGN_RIGHT?"end":s==mxConstants$1.ALIGN_LEFT?"start":"middle",A=this.createElement("text");A.setAttribute("x",Math.round(e+x.dx)),A.setAttribute("y",Math.round(i+x.dy+C*x.fontSize)),A.setAttribute("fill",x.fontColor||"black"),A.setAttribute("font-family",mxUtils$1.parseCssFontFamily(x.fontFamily)),A.setAttribute("font-size",Math.round(x.fontSize)+"px"),T!="start"&&A.setAttribute("text-anchor",T),(x.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&A.setAttribute("font-weight","bold"),(x.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&A.setAttribute("font-style","italic");var R=[];return(x.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&R.push("underline"),(x.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&R.push("line-through"),R.length>0&&A.setAttribute("text-decoration",R.join(" ")),mxUtils$1.write(A,g),A}else return null};mxSvgCanvas2D$1.prototype.createGradientId=function(t,e,i,n,r){t=mxUtils$1.rgba2hex(t),t.charAt(0)=="#"&&(t=t.substring(1)),e=mxUtils$1.rgba2hex(e),e.charAt(0)=="#"&&(e=e.substring(1)),t=t.toLowerCase()+"-"+i,e=e.toLowerCase()+"-"+n;var l=null;if(r==null||r==mxConstants$1.DIRECTION_SOUTH)l="s";else if(r==mxConstants$1.DIRECTION_EAST)l="e";else if(r==mxConstants$1.DIRECTION_RADIAL)l="r";else{var s=t;t=e,e=s,r==mxConstants$1.DIRECTION_NORTH?l="s":r==mxConstants$1.DIRECTION_WEST&&(l="e")}return"mx-gradient-"+t+"-"+e+"-"+l};mxSvgCanvas2D$1.prototype.getSvgGradient=function(t,e,i,n,r){var l=this.createGradientId(t,e,i,n,r),s=this.gradients[l];if(s==null){var a=this.root.ownerSVGElement,o=0,u=l+"-"+o;if(a!=null)for(s=a.ownerDocument.getElementById(u);s!=null&&s.ownerSVGElement!=a;)u=l+"-"+o++,s=a.ownerDocument.getElementById(u);else u="id"+ ++this.refCount;s==null&&(s=this.createSvgGradient(t,e,i,n,r),s.setAttribute("id",u),this.defs!=null?this.defs.appendChild(s):a.appendChild(s)),this.gradients[l]=s}return s.getAttribute("id")};mxSvgCanvas2D$1.prototype.createSvgGradient=function(t,e,i,n,r){var l=this.createElement(r==mxConstants$1.DIRECTION_RADIAL?"radialGradient":"linearGradient");l.setAttribute("x1","0%"),l.setAttribute("y1","0%"),l.setAttribute("x2","0%"),l.setAttribute("y2","0%"),r==null||r==mxConstants$1.DIRECTION_SOUTH?l.setAttribute("y2","100%"):r==mxConstants$1.DIRECTION_EAST?l.setAttribute("x2","100%"):r==mxConstants$1.DIRECTION_NORTH?l.setAttribute("y1","100%"):r==mxConstants$1.DIRECTION_WEST&&l.setAttribute("x1","100%");var s=this.createElement("stop");return s.setAttribute("offset","0%"),s.style.stopColor=t,s.style.stopOpacity=i,l.appendChild(s),s=this.createElement("stop"),s.setAttribute("offset","100%"),s.style.stopColor=e,s.style.stopOpacity=n,l.appendChild(s),l};mxSvgCanvas2D$1.prototype.createFillPatternId=function(t,e,i){return i=mxUtils$1.rgba2hex(i),i.charAt(0)=="#"&&(i=i.substring(1)),("mx-pattern-"+t+"-"+e+"-"+i).toLowerCase()};mxSvgCanvas2D$1.prototype.getFillPattern=function(t,e,i,n){var r=this.createFillPatternId(t,e,i),l=this.fillPatterns[r];if(l==null){var s=this.root.ownerSVGElement,a=0,o=r+"-"+a;if(s!=null)for(l=s.ownerDocument.getElementById(o);l!=null&&l.ownerSVGElement!=s;)o=r+"-"+a++,l=s.ownerDocument.getElementById(o);else o="id"+ ++this.refCount;if(l==null){switch(t){case"hatch":l=this.createHatchPattern(e,i,n);break;case"dots":l=this.createDotsPattern(e,i,n);break;case"cross-hatch":l=this.createCrossHatchPattern(e,i,n);break;case"dashed":l=this.createDashedPattern(e,i,n);break;case"zigzag":case"zigzag-line":l=this.createZigZagLinePattern(e,i,n);break;default:return null}l.setAttribute("id",o),this.defs!=null?this.defs.appendChild(l):s.appendChild(l)}this.fillPatterns[r]=l}return l.getAttribute("id")};mxSvgCanvas2D$1.prototype.createHatchPattern=function(t,e,i){var n=t*1.5*i,r=this.format((10+n)*i),l=this.createElement("pattern");l.setAttribute("patternUnits","userSpaceOnUse"),l.setAttribute("width",r),l.setAttribute("height",r),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("patternTransform","rotate(45)");var s=this.createElement("line");return s.setAttribute("x1","0"),s.setAttribute("y1","0"),s.setAttribute("x2","0"),s.setAttribute("y2",r),s.setAttribute("stroke",e),s.setAttribute("stroke-width",n),l.appendChild(s),l};mxSvgCanvas2D$1.prototype.createDashedPattern=function(t,e,i){var n=t*1.5*i,r=this.format((10+n)*i),l=this.createElement("pattern");l.setAttribute("patternUnits","userSpaceOnUse"),l.setAttribute("width",r),l.setAttribute("height",r),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("patternTransform","rotate(45)");var s=this.createElement("line");return s.setAttribute("x1","0"),s.setAttribute("y1",r/4),s.setAttribute("x2","0"),s.setAttribute("y2",3*r/4),s.setAttribute("stroke",e),s.setAttribute("stroke-width",n),l.appendChild(s),l};mxSvgCanvas2D$1.prototype.createZigZagLinePattern=function(t,e,i){var n=t*1.5*i,r=this.format((10+n)*i),l=this.createElement("pattern");l.setAttribute("patternUnits","userSpaceOnUse"),l.setAttribute("width",r),l.setAttribute("height",r),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("patternTransform","rotate(45)");var s=this.createElement("path"),a=r/4,o=3*r/4;return s.setAttribute("d","M "+a+" 0 L "+o+" 0 L "+a+" "+r+" L "+o+" "+r),s.setAttribute("stroke",e),s.setAttribute("stroke-width",n),s.setAttribute("fill","none"),l.appendChild(s),l};mxSvgCanvas2D$1.prototype.createCrossHatchPattern=function(t,e,i){var n=t*.5*i,r=this.format(1.5*(10+n)*i),l=this.createElement("pattern");l.setAttribute("patternUnits","userSpaceOnUse"),l.setAttribute("width",r),l.setAttribute("height",r),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("patternTransform","rotate(45)");var s=this.createElement("rect");return s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("width",r),s.setAttribute("height",r),s.setAttribute("stroke",e),s.setAttribute("stroke-width",n),s.setAttribute("fill","none"),l.appendChild(s),l};mxSvgCanvas2D$1.prototype.createDotsPattern=function(t,e,i){var n=this.format((10+t)*i),r=this.createElement("pattern");r.setAttribute("patternUnits","userSpaceOnUse"),r.setAttribute("width",n),r.setAttribute("height",n),r.setAttribute("x","0"),r.setAttribute("y","0");var l=this.createElement("circle");return l.setAttribute("cx",n/2),l.setAttribute("cy",n/2),l.setAttribute("r",n/4),l.setAttribute("stroke","none"),l.setAttribute("fill",e),r.appendChild(l),r};mxSvgCanvas2D$1.prototype.addTitle=function(t){if(t!=null&&this.title!=null){var e=this.createElement("title");mxUtils$1.write(e,this.title),t.appendChild(e)}return t};mxSvgCanvas2D$1.prototype.addNode=function(t,e){var i=this.addTitle(this.node),n=this.state;if(i!=null){if(i.nodeName=="path")if(this.path!=null&&this.path.length>0)i.setAttribute("d",this.path.join(" "));else return;t&&n.fillColor!=null?this.updateFill():this.styleEnabled||(i.nodeName=="ellipse"&&mxClient$1.IS_FF?i.setAttribute("fill","transparent"):i.setAttribute("fill","none"),t=!1),e&&n.strokeColor!=null?this.updateStroke():this.styleEnabled||i.setAttribute("stroke","none"),n.transform!=null&&n.transform.length>0&&i.setAttribute("transform",n.transform),this.pointerEvents?i.setAttribute("pointer-events",this.pointerEventsValue):!this.pointerEvents&&this.originalRoot==null&&i.setAttribute("pointer-events","none"),this.strokeTolerance>0&&(!t||n.fillColor==null||!mxShape$1.forceFilledPointerEvents&&!this.pointerEvents&&this.originalRoot==null)&&this.addTolerance(i),(i.nodeName!="rect"&&i.nodeName!="path"&&i.nodeName!="ellipse"||i.getAttribute("fill")!="none"&&i.getAttribute("fill")!="transparent"||i.getAttribute("stroke")!="none"||i.getAttribute("pointer-events")!="none")&&this.root.appendChild(i),this.node=null}};mxSvgCanvas2D$1.prototype.getShadowFilter=function(){var t=this.state,e=t.shadowStyle;if(t.scale!=1){var i=e.split("(");if(i.length>0){var n=i[1].split(" ");if(n.length>3){let l=function(s){return Math.round(parseFloat(n[s])*t.scale*100)/100+"px"};var r=l;e=i[0]+"("+l(0)+" "+l(1)+" "+l(2)+" "+n.slice(3).join(" ")+(i.length>2?"("+i.slice(2).join("("):"")}}}return e};mxSvgCanvas2D$1.prototype.addTolerance=function(t){this.root.appendChild(this.createTolerance(t))};mxSvgCanvas2D$1.prototype.updateFill=function(){var t=this.state;(t.alpha<1||t.fillAlpha<1)&&this.node.setAttribute("fill-opacity",t.alpha*t.fillAlpha);var e,i=!1;if(t.fillColor!=null)if(t.gradientColor!=null&&t.gradientColor!=mxConstants$1.NONE){i=!0;var n=this.getSvgGradient(String(t.fillColor),String(t.gradientColor),t.gradientFillAlpha,t.gradientAlpha,t.gradientDirection);if(this.root.ownerDocument==document&&this.useAbsoluteIds){var r=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");e="url("+r+"#"+n+")"}else e="url(#"+n+")"}else e=String(t.fillColor).toLowerCase();var l=t.fillStyle==null||t.fillStyle=="auto"||t.fillStyle=="solid"?null:this.getFillPattern(t.fillStyle,this.getCurrentStrokeWidth(),e,t.scale);if(i||l==null)this.node.setAttribute("fill",e);else if(this.root.ownerDocument==document&&this.useAbsoluteIds){var r=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+r+"#"+l+")")}else this.node.setAttribute("fill","url(#"+l+")")};mxSvgCanvas2D$1.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))};mxSvgCanvas2D$1.prototype.updateStroke=function(){var t=this.state;this.node.setAttribute("stroke",String(t.strokeColor).toLowerCase()),(t.alpha<1||t.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",t.alpha*t.strokeAlpha);var e=this.getCurrentStrokeWidth();e!=1&&this.node.setAttribute("stroke-width",e),this.node.nodeName=="path"&&this.updateStrokeAttributes(),t.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((t.fixDash?1:t.strokeWidth)*t.scale))};mxSvgCanvas2D$1.prototype.updateStrokeAttributes=function(){var t=this.state;if(t.lineJoin!=null&&t.lineJoin!="miter"&&this.node.setAttribute("stroke-linejoin",t.lineJoin),t.lineCap!=null){var e=t.lineCap;e=="flat"&&(e="butt"),e!="butt"&&this.node.setAttribute("stroke-linecap",e)}t.miterLimit!=null&&(!this.styleEnabled||t.miterLimit!=10)&&this.node.setAttribute("stroke-miterlimit",t.miterLimit)};mxSvgCanvas2D$1.prototype.createDashPattern=function(t){var e=[];if(typeof this.state.dashPattern=="string"){var i=this.state.dashPattern.split(" ");if(i.length>0)for(var n=0;n<i.length;n++)e[n]=Math.round(Number(i[n])*t*100)/100}return e.join(" ")};mxSvgCanvas2D$1.prototype.createTolerance=function(t){var e=t.cloneNode(!0),i=parseFloat(e.getAttribute("stroke-width")||1)+this.strokeTolerance;return e.setAttribute("pointer-events","stroke"),e.setAttribute("visibility","hidden"),e.removeAttribute("stroke-dasharray"),e.setAttribute("stroke-width",i),e.setAttribute("fill","none"),e.setAttribute("stroke",mxClient$1.IS_OT?"none":"white"),e};mxSvgCanvas2D$1.prototype.createShadow=function(t){var e=t.cloneNode(!0),i=this.state;return e.getAttribute("fill")!="none"&&(!mxClient$1.IS_FF||e.getAttribute("fill")!="transparent")&&e.setAttribute("fill",i.shadowColor),e.getAttribute("stroke")!="none"&&e.setAttribute("stroke",i.shadowColor),e.setAttribute("transform","translate("+this.format(i.shadowDx*i.scale)+","+this.format(i.shadowDy*i.scale)+")"+(i.transform||"")),e.setAttribute("opacity",i.shadowAlpha),e};mxSvgCanvas2D$1.prototype.setTitle=function(t){this.title=t};mxSvgCanvas2D$1.prototype.setLink=function(t,e){if(t==null)this.root=this.originalRoot;else{this.originalRoot=this.root;var i=this.createElement("a");i.setAttributeNS==null||this.root.ownerDocument!=document&&document.documentMode==null?i.setAttribute("xlink:href",t):i.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",t),e!=null&&i.setAttribute("target",e),this.root.appendChild(i),this.root=i}};mxSvgCanvas2D$1.prototype.rotate=function(t,e,i,n,r){if(t!=0||e||i){var l=this.state;if(n+=l.dx,r+=l.dy,n*=l.scale,r*=l.scale,l.transform=l.transform||"",e&&i)t+=180;else if(e!=i){var s=e?n:0,a=e?-1:1,o=i?r:0,u=i?-1:1;l.transform+="translate("+this.format(s)+","+this.format(o)+")scale("+this.format(a)+","+this.format(u)+")translate("+this.format(-s)+","+this.format(-o)+")"}(e?!i:i)&&(t*=-1),t!=0&&(l.transform+="rotate("+this.format(t)+","+this.format(n)+","+this.format(r)+")"),l.rotation=l.rotation+t,l.rotationCx=n,l.rotationCy=r}};mxSvgCanvas2D$1.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")};mxSvgCanvas2D$1.prototype.rect=function(t,e,i,n){var r=this.state,l=this.createElement("rect");l.setAttribute("x",this.format((t+r.dx)*r.scale)),l.setAttribute("y",this.format((e+r.dy)*r.scale)),l.setAttribute("width",this.format(i*r.scale)),l.setAttribute("height",this.format(n*r.scale)),this.node=l};mxSvgCanvas2D$1.prototype.roundrect=function(t,e,i,n,r,l){this.rect(t,e,i,n),r>0&&this.node.setAttribute("rx",this.format(r*this.state.scale)),l>0&&this.node.setAttribute("ry",this.format(l*this.state.scale))};mxSvgCanvas2D$1.prototype.ellipse=function(t,e,i,n){var r=this.state,l=this.createElement("ellipse");l.setAttribute("cx",this.format((t+i/2+r.dx)*r.scale)),l.setAttribute("cy",this.format((e+n/2+r.dy)*r.scale)),l.setAttribute("rx",i/2*r.scale),l.setAttribute("ry",n/2*r.scale),this.node=l};mxSvgCanvas2D$1.prototype.image=function(t,e,i,n,r,l,s,a,o){r=this.converter.convert(r),l=l??!0,s=s??!1,a=a??!1;var u=this.state;t+=u.dx,e+=u.dy;var d=this.createElement("image");d.setAttribute("x",this.format(t*u.scale)+this.imageOffset),d.setAttribute("y",this.format(e*u.scale)+this.imageOffset),d.setAttribute("width",this.format(i*u.scale)),d.setAttribute("height",this.format(n*u.scale)),d.setAttributeNS==null?d.setAttribute("xlink:href",r):d.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",r),l||d.setAttribute("preserveAspectRatio","none"),(u.alpha<1||u.fillAlpha<1)&&d.setAttribute("opacity",u.alpha*u.fillAlpha);var p=this.state.transform||"";if(s||a){var c=1,g=1,x=0,C=0;s&&(c=-1,x=-i-2*t),a&&(g=-1,C=-n-2*e),p+="scale("+c+","+g+")translate("+x*u.scale+","+C*u.scale+")"}p.length>0&&d.setAttribute("transform",p),this.pointerEvents||d.setAttribute("pointer-events","none"),o!=null&&this.processClipPath(d,o,new mxRectangle(t,e,i,n)),this.root.appendChild(d)};mxSvgCanvas2D$1.prototype.processClipPath=function(t,e,i){try{var n=this.createElement("clipPath");n.setAttribute("id",this.createClipPathId(e)),n.setAttribute("clipPathUnits","objectBoundingBox");var r=this.appendClipPath(n,e,i);if(r!=null){var l=this.state;t.setAttribute("x",i.x*l.scale-i.width*l.scale*r.x/r.width+this.imageOffset),t.setAttribute("y",i.y*l.scale-i.height*l.scale*r.y/r.height+this.imageOffset),t.setAttribute("width",i.width*l.scale/r.width),t.setAttribute("height",i.height*l.scale/r.height)}this.setClip(t,n)}catch{}};mxSvgCanvas2D$1.prototype.convertHtml=function(t){if(this.useDomParser){var e=new DOMParser().parseFromString(t,"text/html");e!=null&&(t=new XMLSerializer().serializeToString(e.body),t.substring(0,5)=="<body"&&(t=t.substring(t.indexOf(">",5)+1)),t.substring(t.length-7,t.length)=="</body>"&&(t=t.substring(0,t.length-7)))}else if(document.implementation!=null&&document.implementation.createDocument!=null){var i=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),n=i.createElement("body");i.documentElement.appendChild(n);var r=document.createElement("div");r.innerHTML=t;for(var l=r.firstChild;l!=null;){var s=l.nextSibling;n.appendChild(i.adoptNode(l)),l=s}return n.innerHTML}else{var a=document.createElement("textarea");a.innerHTML=t.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=a.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return t};mxSvgCanvas2D$1.prototype.createDiv=function(t){var e=t;if(mxUtils$1.isNode(e)||(e="<div><div>"+this.convertHtml(e)+"</div></div>"),!mxClient$1.IS_IE&&!mxClient$1.IS_IE11&&document.createElementNS){var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(mxUtils$1.isNode(e)){var n=document.createElement("div"),r=n.cloneNode(!1);this.root.ownerDocument!=document?n.appendChild(e.cloneNode(!0)):n.appendChild(e),r.appendChild(n),i.appendChild(r)}else i.innerHTML=e;return i}else return mxUtils$1.isNode(e)&&(e="<div><div>"+mxUtils$1.getXml(e)+"</div></div>"),e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>",mxUtils$1.parseXml(e).documentElement};mxSvgCanvas2D$1.prototype.updateText=function(t,e,i,n,r,l,s,a,o,u,d,p){p!=null&&p.firstChild!=null&&p.firstChild.firstChild!=null&&this.updateTextNodes(t,e,i,n,r,l,s,a,o,u,d,p.firstChild)};mxSvgCanvas2D$1.prototype.addForeignObject=function(t,e,i,n,r,l,s,a,o,u,d,p,c,g,x){var C=this.addTitle(this.createElement("g")),T=this.createElement("foreignObject");if(this.setCssText(T,"overflow: visible; text-align: left;"),T.setAttribute("pointer-events","none"),g.ownerDocument!=document&&(g=mxUtils$1.importNodeImplementation(T.ownerDocument,g,!0)),T.appendChild(g),C.appendChild(T),this.updateTextNodes(t,e,i,n,l,s,a,u,d,p,c,C,o),this.root.ownerDocument!=document){var A=this.createAlternateContent(T,t,e,i,n,r,l,s,a,o,u,d,p);if(A!=null){T.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var R=this.createElement("switch");R.appendChild(T),R.appendChild(A),C.appendChild(R)}}x.appendChild(C)};mxSvgCanvas2D$1.prototype.updateTextNodes=function(t,e,i,n,r,l,s,a,o,u,d,p,c){var g=this.state.scale,x=d!=null&&d.substring(0,9)=="vertical-",C="",T="";if(x){var A=d.substring(d.length-3)=="-rl";T=r==mxConstants$1.ALIGN_LEFT?A?"flex-end":"flex-start":r==mxConstants$1.ALIGN_RIGHT?A?"flex-start":"flex-end":"center",C=l==mxConstants$1.ALIGN_TOP?"flex-start":l==mxConstants$1.ALIGN_BOTTOM?"flex-end":"center"}else T=l==mxConstants$1.ALIGN_TOP?"flex-start":l==mxConstants$1.ALIGN_BOTTOM?"flex-end":"center",C=r==mxConstants$1.ALIGN_LEFT?"flex-start":r==mxConstants$1.ALIGN_RIGHT?"flex-end":"center";mxSvgCanvas2D$1.createCss(i+this.foreignObjectPadding,n,r,l,s,a,o,d,this.state.fontBackgroundColor!=null?this.state.fontBackgroundColor:null,this.state.fontBorderColor!=null?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+T+"; justify-content: unsafe "+C+"; "+(d!=null&&d.substring(0,9)=="vertical-"?"writing-mode: "+d+";":""),this.getTextCss(),g,mxUtils$1.bind(this,function(R,_,N,H,k){t+=this.state.dx,e+=this.state.dy;var K=p.firstChild;K.nodeName=="title"&&(K=K.nextSibling);var Q=K.firstChild,nt=Q.firstChild,dt=nt.firstChild;c=="md"&&(dt.setAttribute("class","markdown-body"),k=`${k}; height:${n}px;width:${i}px;`);var mt=(this.rotateHtml?this.state.rotation:0)+(u??0),xt=(this.foOffset!=0?"translate("+this.foOffset+" "+this.foOffset+")":"")+(g!=1?"scale("+g+")":"");this.setCssText(dt,k),this.setCssText(nt,H),nt.setAttribute("data-drawio-colors","color: "+this.state.fontColor+"; "+(this.state.fontBackgroundColor==null?"":"background-color: "+this.state.fontBackgroundColor+"; ")+(this.state.fontBorderColor==null?"":"border-color: "+this.state.fontBorderColor+"; ")),K.setAttribute("width",Math.ceil(1/Math.min(1,g)*100)+"%"),K.setAttribute("height",Math.ceil(1/Math.min(1,g)*100)+"%");var Y=Math.round(e+_);Y<0?(K.setAttribute("y",Y),N+="padding-top: 0; "):(K.removeAttribute("y"),N+="padding-top: "+Y+"px; "),this.setCssText(Q,N+"margin-left: "+Math.round(t+R)+"px;"),xt+=mt!=0?"rotate("+mt+" "+t+" "+e+")":"",xt!=""?p.setAttribute("transform",xt):p.removeAttribute("transform"),this.state.alpha!=1?p.setAttribute("opacity",this.state.alpha):p.removeAttribute("opacity")}))};mxSvgCanvas2D$1.createCss=function(t,e,i,n,r,l,s,a,o,u,d,p,c,g){var x=a!=null&&a.substring(0,9)=="vertical-",C="box-sizing: border-box; font-size: 0; ";x?C+="text-align: "+(n==mxConstants$1.ALIGN_TOP?"left":n==mxConstants$1.ALIGN_BOTTOM?"right":"center")+"; ":C+="text-align: "+(i==mxConstants$1.ALIGN_LEFT?"left":i==mxConstants$1.ALIGN_RIGHT?"right":"center")+"; ";var T=mxUtils$1.getAlignmentAsPoint(i,n),A="overflow: hidden; ",R="width: 1px; ",_="height: 1px; ",N=T.x*t,H=T.y*e;s?(R="width: "+Math.round(t)+"px; ",C+="max-height: "+Math.round(e)+"px; ",H=0):l=="fill"?(R="width: "+Math.round(t)+"px; ",_="height: "+Math.round(e)+"px; ",p+="width: 100%; height: 100%; ",C+="width: "+Math.round(t-2)+"px; "+_):l=="width"?(R="width: "+Math.round(t-2)+"px; ",p+="width: 100%; ",C+=R,H=0,e>0&&(C+="max-height: "+Math.round(e)+"px; ")):l=="block"?(R="width: "+Math.round(t-2)+"px; ",p+="width: 100%; ",A="",H=0,C+=R,n=="middle"&&(C+="max-height: "+Math.round(e)+"px; ")):(A="",x?N=0:H=0);var k="";o!=null&&(k+="background-color: "+o+"; "),u!=null&&(k+="border: 1px solid "+u+"; "),A==""||s?p+=k:C+=k,r&&(x&&e>0||!x&&t>0)?(p+="white-space: normal; word-wrap: "+mxConstants$1.WORD_WRAP+"; ",x?_="height: "+Math.round(e)+"px; ":R="width: "+Math.round(t)+"px; ",A!=""&&l!="fill"&&(x?N=0:H=0)):(p+="white-space: nowrap; ",A==""&&l!="block"&&(N=0)),g(N,H,d+R+_,C+A,p,A)};mxSvgCanvas2D$1.prototype.getTextCss=function(){var t=this.state,e=mxConstants$1.ABSOLUTE_LINE_HEIGHT?t.fontSize*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT*this.lineHeightCorrection,i="display: inline-block; font-size: "+mxUtils$1.htmlEntities(t.fontSize)+"px; font-family: "+mxUtils$1.parseCssFontFamily(t.fontFamily,!0)+"; color: "+mxUtils$1.htmlEntities(t.fontColor)+"; line-height: "+mxUtils$1.htmlEntities(e)+"; pointer-events: "+(this.pointerEvents?mxUtils$1.htmlEntities(this.pointerEventsValue):"none")+"; ";(t.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(i+="font-weight: bold; "),(t.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(i+="font-style: italic; ");var n=[];return(t.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&n.push("underline"),(t.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&n.push("line-through"),n.length>0&&(i+="text-decoration: "+n.join(" ")+"; "),i};mxSvgCanvas2D$1.prototype.text=function(t,e,i,n,r,l,s,a,o,u,d,p,c){if(this.textEnabled&&r!=null)if(p=p??0,this.foEnabled&&(o=="html"||o=="md")){var g=this.createDiv(r);g!=null&&(c!=null&&c.substring(0,9)!="vertical-"&&g.setAttribute("dir",c),this.addForeignObject(t,e,i,n,r,l,s,a,o,u,d,p,c,g,this.root))}else this.plainText(t+this.state.dx,e+this.state.dy,i,n,r,l,s,a,u,d,p,c)};mxSvgCanvas2D$1.prototype.createClip=function(t,e,i,n){t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n);for(var r="mx-clip-"+t+"-"+e+"-"+i+"-"+n,l=0,s=r+"-"+l;document.getElementById(s)!=null;)s=r+"-"+ ++l;var a=this.createElement("clipPath");a.setAttribute("id",s);var o=this.createElement("rect");return o.setAttribute("x",t),o.setAttribute("y",e),o.setAttribute("width",i),o.setAttribute("height",n),a.appendChild(o),a};mxSvgCanvas2D$1.prototype.createClipPathId=function(t){for(var e="mx-clippath-"+t.replace(/[^a-zA-Z0-9]+/g,"-"),i=e.charAt(e.length-1)=="-"?"":"-",n=0,r=e+i+n;document.getElementById(r)!=null;)r=e+i+ ++n;return r};mxSvgCanvas2D$1.prototype.appendClipPath=function(t,e,i){var n=e.match(/\(([^)]+)\)/),r=null;return e.substring(0,7)=="polygon"?r=this.appendPolygonClip(n[1],t,i):e.substring(0,6)=="circle"?r=this.appendCircleClip(n[1],t,i):e.substring(0,7)=="ellipse"?r=this.appendEllipseClip(n[1],t,i):e.substring(0,5)=="inset"&&(r=this.appendInsetClip(n[1],t,i)),r};mxSvgCanvas2D$1.prototype.appendPolygonClip=function(t,e,i){for(var n=this.createElement("polygon"),r=t.split(/[ ,]+/),l=null,s=null,a=null,o=null,u=[],d=0;d<r.length;d++){var p=this.parseClipValue(r,d);d%2==0?((l==null||l>p)&&(l=p),(a==null||a<p)&&(a=p)):((s==null||s>p)&&(s=p),(o==null||o<p)&&(o=p)),u.push(p)}return n.setAttribute("points",u.join(",")),e.appendChild(n),new mxRectangle(l,s,a-l,o-s)};mxSvgCanvas2D$1.prototype.appendCircleClip=function(t,e,i){var n=this.createElement("circle"),r=t.split(/[ ,]+/),l=this.parseClipValue(r,0),s=this.parseClipValue(r,2),a=this.parseClipValue(r,3);return n.setAttribute("r",l),n.setAttribute("cx",s),n.setAttribute("cy",a),e.appendChild(n),new mxRectangle(s-l,a-l,2*l,2*l)};mxSvgCanvas2D$1.prototype.appendEllipseClip=function(t,e,i){var n=this.createElement("ellipse"),r=t.split(/[ ,]+/),l=this.parseClipValue(r,0),s=this.parseClipValue(r,1),a=this.parseClipValue(r,3),o=this.parseClipValue(r,4);return n.setAttribute("rx",l),n.setAttribute("ry",s),n.setAttribute("cx",a),n.setAttribute("cy",o),e.appendChild(n),new mxRectangle(a-l,o-s,2*l,2*s)};mxSvgCanvas2D$1.prototype.appendInsetClip=function(t,e,i){var n=this.createElement("rect"),r=t.split(/[ ,]+/),l=this.parseClipValue(r,0),s=this.parseClipValue(r,1),a=this.parseClipValue(r,2),o=this.parseClipValue(r,3),u=1-s-o,d=1-l-a;if(n.setAttribute("x",o),n.setAttribute("y",l),n.setAttribute("width",u),n.setAttribute("height",d),r.length>4&&r[4]=="round"){var p=this.parseClipValue(r,5);n.setAttribute("rx",p),n.setAttribute("ry",p)}return e.appendChild(n),new mxRectangle(o,l,u,d)};mxSvgCanvas2D$1.prototype.parseClipValue=function(t,e){var i=t[Math.min(e,t.length-1)],n=1;if(i=="center")n=.5;else if(i=="top"||i=="left")n=0;else{var r=parseFloat(i);isNaN(r)||(n=Math.max(0,Math.min(1,r/100)))}return n};mxSvgCanvas2D$1.prototype.setClip=function(t,e){if(this.defs!=null?this.defs.appendChild(e):this.root.appendChild(e),!mxClient$1.IS_CHROMEAPP&&!mxClient$1.IS_IE&&!mxClient$1.IS_IE11&&!mxClient$1.IS_EDGE&&this.root.ownerDocument==document){var i=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");t.setAttribute("clip-path","url("+i+"#"+e.getAttribute("id")+")")}else t.setAttribute("clip-path","url(#"+e.getAttribute("id")+")")};mxSvgCanvas2D$1.prototype.plainText=function(t,e,i,n,r,l,s,a,o,u,d,p){d=d??0;var c=this.state,g=c.fontSize,x=c.transform||"",C=this.addTitle(this.createElement("g"));if(this.updateFont(C),!this.pointerEvents&&this.originalRoot==null&&C.setAttribute("pointer-events","none"),d!=0&&(x+="rotate("+d+","+this.format(t*c.scale)+","+this.format(e*c.scale)+")"),p!=null&&p.substring(0,9)!="vertical-"&&C.setAttribute("direction",p),u&&i>0&&n>0){var T=t,H=e;l==mxConstants$1.ALIGN_CENTER?T-=i/2:l==mxConstants$1.ALIGN_RIGHT&&(T-=i),o!="fill"&&(s==mxConstants$1.ALIGN_MIDDLE?H-=n/2:s==mxConstants$1.ALIGN_BOTTOM&&(H-=n)),this.setClip(C,this.createClip(T*c.scale-2,H*c.scale-2,i*c.scale+4,n*c.scale+4))}var A=l==mxConstants$1.ALIGN_RIGHT?"end":l==mxConstants$1.ALIGN_CENTER?"middle":"start";A!="start"&&C.setAttribute("text-anchor",A),(!this.styleEnabled||g!=mxConstants$1.DEFAULT_FONTSIZE)&&C.setAttribute("font-size",g*c.scale+"px"),x.length>0&&C.setAttribute("transform",x),c.alpha<1&&C.setAttribute("opacity",c.alpha);var R=r.split(`
`),_=Math.round(g*mxConstants$1.LINE_HEIGHT),N=g+(R.length-1)*_,H=e+g-1;if(s==mxConstants$1.ALIGN_MIDDLE)if(o=="fill")H-=n/2;else{var k=(this.matchHtmlAlignment&&u&&n>0?Math.min(N,n):N)/2;H-=k}else if(s==mxConstants$1.ALIGN_BOTTOM)if(o=="fill")H-=n;else{var k=this.matchHtmlAlignment&&u&&n>0?Math.min(N,n):N;H-=k+1}for(var K=0;K<R.length;K++){if(R[K].length>0&&mxUtils$1.trim(R[K]).length>0){var Q=this.createElement("text");Q.setAttribute("x",this.format(t*c.scale)+this.textOffset),Q.setAttribute("y",this.format(H*c.scale)+this.textOffset),mxUtils$1.write(Q,R[K]),C.appendChild(Q)}H+=_}this.root.appendChild(C),this.addTextBackground(C,r,t,e,i,o=="fill"?n:N,l,s,o)};mxSvgCanvas2D$1.prototype.updateFont=function(t){var e=this.state;t.setAttribute("fill",e.fontColor),(!this.styleEnabled||e.fontFamily!=mxConstants$1.DEFAULT_FONTFAMILY)&&t.setAttribute("font-family",mxUtils$1.parseCssFontFamily(e.fontFamily)),(e.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&t.setAttribute("font-weight","bold"),(e.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&t.setAttribute("font-style","italic");var i=[];(e.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.push("underline"),(e.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&i.push("line-through"),i.length>0&&t.setAttribute("text-decoration",i.join(" "))};mxSvgCanvas2D$1.prototype.addTextBackground=function(t,e,i,n,r,l,s,a,o){var u=this.state;if(document.body!=null&&(u.fontBackgroundColor!=null||u.fontBorderColor!=null)){var d=null;if(o=="fill"||o=="width")s==mxConstants$1.ALIGN_CENTER?i-=r/2:s==mxConstants$1.ALIGN_RIGHT&&(i-=r),a==mxConstants$1.ALIGN_MIDDLE?n-=l/2:a==mxConstants$1.ALIGN_BOTTOM&&(n-=l),d=new mxRectangle((i+1)*u.scale,n*u.scale,(r-2)*u.scale,(l+2)*u.scale);else if(t.getBBox!=null&&this.root.ownerDocument==document)try{d=t.getBBox();var p=mxClient$1.IS_IE&&mxClient$1.IS_SVG;d=new mxRectangle(d.x,d.y+(p?0:1),d.width,d.height+(p?1:0))}catch{}if(d==null||d.width==0||d.height==0){var c=document.createElement("div");c.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?u.fontSize*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT,c.style.fontSize=u.fontSize+"px",c.style.fontFamily=mxUtils$1.parseCssFontFamily(u.fontFamily),c.style.whiteSpace="nowrap",c.style.position="absolute",c.style.visibility="hidden",c.style.display="inline-block",c.style.zoom="1",(u.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(c.style.fontWeight="bold"),(u.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(c.style.fontStyle="italic"),e=mxUtils$1.htmlEntities(e,!1),c.innerHTML=e.replace(/\n/g,"<br/>"),document.body.appendChild(c);var r=c.offsetWidth,l=c.offsetHeight;c.parentNode.removeChild(c),s==mxConstants$1.ALIGN_CENTER?i-=r/2:s==mxConstants$1.ALIGN_RIGHT&&(i-=r),a==mxConstants$1.ALIGN_MIDDLE?n-=l/2:a==mxConstants$1.ALIGN_BOTTOM&&(n-=l),d=new mxRectangle((i+1)*u.scale,(n+2)*u.scale,r*u.scale,(l+1)*u.scale)}if(d!=null){var g=this.createElement("rect");g.setAttribute("fill",u.fontBackgroundColor||"none"),g.setAttribute("stroke",u.fontBorderColor||"none"),g.setAttribute("x",Math.floor(d.x-1)),g.setAttribute("y",Math.floor(d.y-1)),g.setAttribute("width",Math.ceil(d.width+2)),g.setAttribute("height",Math.ceil(d.height));var x=u.fontBorderColor!=null?Math.max(1,this.format(u.scale)):0;g.setAttribute("stroke-width",x),this.root.ownerDocument==document&&mxUtils$1.mod(x,2)==1&&g.setAttribute("transform","translate(0.5, 0.5)"),t.insertBefore(g,t.firstChild)}}};mxSvgCanvas2D$1.prototype.stroke=function(){this.addNode(!1,!0)};mxSvgCanvas2D$1.prototype.fill=function(){this.addNode(!0,!1)};mxSvgCanvas2D$1.prototype.fillAndStroke=function(){this.addNode(!0,!0)};function mxShape$1(t){this.stencil=t,this.initStyles()}mxShape$1.forceFilledPointerEvents=!0;mxShape$1.prototype.dialect=null;mxShape$1.prototype.scale=1;mxShape$1.prototype.antiAlias=!0;mxShape$1.prototype.minSvgStrokeWidth=1;mxShape$1.prototype.bounds=null;mxShape$1.prototype.points=null;mxShape$1.prototype.node=null;mxShape$1.prototype.state=null;mxShape$1.prototype.style=null;mxShape$1.prototype.boundingBox=null;mxShape$1.prototype.stencil=null;mxShape$1.prototype.svgStrokeTolerance=8;mxShape$1.prototype.pointerEvents=!0;mxShape$1.prototype.svgPointerEvents="all";mxShape$1.prototype.shapePointerEvents=!1;mxShape$1.prototype.stencilPointerEvents=!1;mxShape$1.prototype.outline=!1;mxShape$1.prototype.visible=!0;mxShape$1.prototype.useSvgBoundingBox=!1;mxShape$1.prototype.init=function(t){this.node==null&&(this.node=this.create(t),t!=null&&t.appendChild(this.node))};mxShape$1.prototype.initStyles=function(t){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1};mxShape$1.prototype.isHtmlAllowed=function(){return!1};mxShape$1.prototype.getSvgScreenOffset=function(){var t=this.stencil&&this.stencil.strokewidth!="inherit"?Number(this.stencil.strokewidth):this.strokewidth;return mxUtils$1.mod(Math.max(1,Math.round(t*this.scale)),2)==1?.5:0};mxShape$1.prototype.create=function(t){var e=null;return t!=null&&t.ownerSVGElement!=null?e=this.createSvg(t):e=this.createHtml(t),e};mxShape$1.prototype.createSvg=function(){return document.createElementNS(mxConstants$1.NS_SVG,"g")};mxShape$1.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t};mxShape$1.prototype.reconfigure=function(){this.redraw()};mxShape$1.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),this.node.nodeName=="DIV"?this.redrawHtmlShape():this.redrawShape()):(this.node.style.visibility="hidden",this.boundingBox=null)};mxShape$1.prototype.clear=function(){if(this.node.ownerSVGElement!=null)for(;this.node.lastChild!=null;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(this.cursor!=null?"cursor:"+this.cursor+";":""),this.node.innerText=""};mxShape$1.prototype.updateBoundsFromPoints=function(){var t=this.points;if(t!=null&&t.length>0&&t[0]!=null){this.bounds=new mxRectangle$1(Number(t[0].x),Number(t[0].y),this.scale,this.scale);for(var e=1;e<this.points.length;e++)t[e]!=null&&this.bounds.add(new mxRectangle$1(Number(t[e].x),Number(t[e].y),this.scale,this.scale))}};mxShape$1.prototype.getLabelBounds=function(t){var e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),i=t;if(e!=mxConstants$1.DIRECTION_SOUTH&&e!=mxConstants$1.DIRECTION_NORTH&&this.state!=null&&this.state.text!=null&&this.state.text.isPaintBoundsInverted()){i=i.clone();var n=i.width;i.width=i.height,i.height=n}var r=this.getLabelMargins(i);if(r!=null){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,!1)=="1",s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,!1)=="1";if(this.state!=null&&this.state.text!=null&&this.state.text.isPaintBoundsInverted()){var n=r.x;r.x=r.height,r.height=r.width,r.width=r.y,r.y=n,n=l,l=s,s=n}return mxUtils$1.getDirectedBounds(t,r,this.style,l,s)}return t};mxShape$1.prototype.getLabelMargins=function(t){return null};mxShape$1.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds!=null&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0};mxShape$1.prototype.getShadowStyle=function(){var t={dx:mxConstants$1.SHADOW_OFFSET_X,dy:mxConstants$1.SHADOW_OFFSET_Y,blur:mxConstants$1.SHADOW_BLUR,color:mxConstants$1.SHADOWCOLOR,opacity:mxConstants$1.SHADOW_OPACITY*100};return this.style!=null&&(t.dx=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW_OFFSET_X,t.dx),t.dy=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW_OFFSET_Y,t.dy),t.blur=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW_BLUR,t.blur),t.color=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOWCOLOR,t.color),t.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW_OPACITY,t.opacity)),t};mxShape$1.prototype.createDropShadow=function(t,e){return"drop-shadow("+Math.round(t.dx*e*100)/100+"px "+Math.round(t.dy*e*100)/100+"px "+Math.round(t.blur*e*100)/100+"px "+mxUtils$1.hex2rgba(t.color,t.opacity/100)+")"};mxShape$1.prototype.updateSvgFilters=function(t){this.node.style.filter=this.isShadowEnabled()?this.createDropShadow(this.getShadowStyle(),t):""};mxShape$1.prototype.isShadowEnabled=function(){return this.isShadow};mxShape$1.prototype.redrawShape=function(){var t=this.createCanvas();t!=null&&(t.pointerEvents=this.pointerEvents,this.beforePaint(t),this.paint(t),this.afterPaint(t),this.destroyCanvas(t))};mxShape$1.prototype.createCanvas=function(){var t=null;return this.node.ownerSVGElement!=null&&(t=this.createSvgCanvas()),t!=null&&this.outline&&(t.setStrokeWidth(this.strokewidth),t.setStrokeColor(this.stroke),this.isDashed!=null&&t.setDashed(this.isDashed),t.setStrokeWidth=function(){},t.setStrokeColor=function(){},t.setFillColor=function(){},t.setGradient=function(){},t.setDashed=function(){},t.image=function(){},t.text=function(){}),t};mxShape$1.prototype.createSvgCanvas=function(){var t=new mxSvgCanvas2D$1(this.node,!1);t.strokeTolerance=this.svgStrokeTolerance,t.pointerEventsValue=this.svgPointerEvents;var e=this.getSvgScreenOffset();return e!=0?this.node.setAttribute("transform","translate("+e+","+e+")"):this.node.removeAttribute("transform"),t.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(t.format=function(i){return Math.round(parseFloat(i))}),t};mxShape$1.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)};mxShape$1.prototype.updateHtmlFilters=function(t){var e="";if(this.opacity<100&&(e+="alpha(opacity="+this.opacity+")"),this.isShadow&&(e+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants$1.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants$1.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants$1.VML_SHADOWCOLOR+"')"),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE){var i=this.fill,n=this.gradient,r="0",l={east:0,south:1,west:2,north:3},s=this.direction!=null?l[this.direction]:0;if(this.gradientDirection!=null&&(s=mxUtils$1.mod(s+l[this.gradientDirection]-1,4)),s==1){r="1";var a=i;i=n,n=a}else if(s==2){var a=i;i=n,n=a}else s==3&&(r="1");e+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+i+"', endColorStr='"+n+"', gradientType='"+r+"')"}t.style.filter=e};mxShape$1.prototype.updateHtmlColors=function(t){var e=this.stroke;e!=null&&e!=mxConstants$1.NONE?(t.style.borderColor=e,this.isDashed?t.style.borderStyle="dashed":this.strokewidth>0&&(t.style.borderStyle="solid"),t.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):t.style.borderWidth="0px",e=this.outline?null:this.fill,e!=null&&e!=mxConstants$1.NONE?(t.style.backgroundColor=e,t.style.backgroundImage="none"):this.pointerEvents?t.style.backgroundColor="transparent":this.setTransparentBackgroundImage(t)};mxShape$1.prototype.updateHtmlBounds=function(t){var e=Math.ceil(this.strokewidth*this.scale);t.style.borderWidth=Math.max(1,e)+"px",t.style.overflow="hidden",t.style.left=Math.round(this.bounds.x-e/2)+"px",t.style.top=Math.round(this.bounds.y-e/2)+"px",document.compatMode=="CSS1Compat"&&(e=-e),t.style.width=Math.round(Math.max(0,this.bounds.width+e))+"px",t.style.height=Math.round(Math.max(0,this.bounds.height+e))+"px"};mxShape$1.prototype.destroyCanvas=function(t){if(t instanceof mxSvgCanvas2D$1){for(var e in t.gradients){var i=t.gradients[e];i!=null&&(i.mxRefCount=(i.mxRefCount||0)+1)}for(var e in t.fillPatterns){var n=t.fillPatterns[e];n!=null&&(n.mxRefCount=(n.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.releaseSvgFillPatterns(this.oldFillPatterns),this.oldGradients=t.gradients,this.oldFillPatterns=t.fillPatterns}};mxShape$1.prototype.beforePaint=function(t){};mxShape$1.prototype.afterPaint=function(t){};mxShape$1.prototype.paint=function(t){var e=t.pointerEvents,i=!1;if(t!=null&&this.outline){var n=t.stroke;t.stroke=function(){i=!0,n.apply(this,arguments)},t.fillAndStroke=t.stroke}var r=this.scale,l=this.bounds.x/r,s=this.bounds.y/r,a=this.bounds.width/r,o=this.bounds.height/r;if(this.isPaintBoundsInverted()){var u=(a-o)/2;l+=u,s-=u;var d=a;a=o,o=d}this.updateTransform(t,l,s,a,o),this.configureCanvas(t,l,s,a,o),this.updateSvgFilters(t!=null?t.state.scale:r);var p=null;if(this.stencil==null&&this.points==null&&this.shapePointerEvents||this.stencil!=null&&this.stencilPointerEvents){var c=this.createBoundingBox();if(this.dialect==mxConstants$1.DIALECT_SVG)p=this.createTransparentSvgRectangle(c.x,c.y,c.width,c.height),this.node.appendChild(p);else{var g=t.createRect("rect",c.x/r,c.y/r,c.width/r,c.height/r);g.appendChild(t.createTransparentFill()),g.stroked="false",t.root.appendChild(g)}}if(this.stencil!=null)this.stencil.drawShape(t,this,l,s,a,o);else{t.setStrokeWidth(this.strokewidth);var x=this.getWaypoints();if(x!=null)x.length>1&&this.paintEdgeShape(t,x);else{var C=t.state.dx,T=t.state.dy;this.paintVertexShape(t,l,s,a,o),t.state.dx=C,t.state.dy=T}}p!=null&&t.state!=null&&t.state.transform!=null&&p.setAttribute("transform",t.state.transform),t!=null&&this.outline&&!i&&(t.rect(l,s,a,o),t.stroke()),t.pointerEvents=e};mxShape$1.prototype.getWaypoints=function(){var t=this.points,e=null;if(t!=null&&(e=[],t.length>0)){var i=this.scale,n=Math.max(i,1),r=t[0];e.push(new mxPoint$1(r.x/i,r.y/i));for(var l=1;l<t.length;l++){var s=t[l];(Math.abs(r.x-s.x)>=n||Math.abs(r.y-s.y)>=n)&&e.push(new mxPoint$1(s.x/i,s.y/i)),r=s}}return e};mxShape$1.prototype.configureCanvas=function(t,e,i,n,r){var l=null;if(this.style!=null&&(l=this.style.dashPattern),t.setAlpha(this.opacity/100),t.setFillAlpha(this.fillOpacity/100),t.setStrokeAlpha(this.strokeOpacity/100),this.isShadow!=null&&t.setShadow(this.isShadow,this.shadowStyle),this.isDashed!=null&&t.setDashed(this.isDashed,this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FIX_DASH,!1)==1:!1),l!=null&&t.setDashPattern(l),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE){var s=this.getGradientBounds(t,e,i,n,r);t.setGradient(this.fill,this.gradient,s.x,s.y,s.width,s.height,this.gradientDirection)}else t.setFillColor(this.fill),t.setFillStyle(this.fillStyle);this.style!=null&&(this.style.linecap!=null&&t.setLineCap(this.style.linecap),this.style.linejoin!=null&&t.setLineJoin(this.style.linejoin)),t.setStrokeColor(this.stroke),this.configurePointerEvents(t)};mxShape$1.prototype.configurePointerEvents=function(t){this.style!=null&&(!mxShape$1.forceFilledPointerEvents||this.fill==null||this.fill==mxConstants$1.NONE||this.opacity==0||this.fillOpacity==0)&&mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="0"&&(t.pointerEvents=!1)};mxShape$1.prototype.getGradientBounds=function(t,e,i,n,r){return new mxRectangle$1(e,i,n,r)};mxShape$1.prototype.updateTransform=function(t,e,i,n,r){t.scale(this.scale),t.rotate(this.getShapeRotation(),this.flipH,this.flipV,e+n/2,i+r/2)};mxShape$1.prototype.paintVertexShape=function(t,e,i,n,r){this.paintBackground(t,e,i,n,r),(!this.outline||this.style==null||mxUtils$1.getValue(this.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0)&&(t.setShadow(!1),this.paintForeground(t,e,i,n,r))};mxShape$1.prototype.paintBackground=function(t,e,i,n,r){};mxShape$1.prototype.paintForeground=function(t,e,i,n,r){};mxShape$1.prototype.paintEdgeShape=function(t,e){};mxShape$1.prototype.getArcSize=function(t,e){var i=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")i=Math.min(t/2,Math.min(e/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;i=Math.min(t*n,e*n)}return i};mxShape$1.prototype.paintGlassEffect=function(t,e,i,n,r,l){var s=Math.ceil(this.strokewidth/2),a=.4;t.setGradient("#ffffff","#ffffff",e,i,n,r*.6,"south",.9,.1),t.begin(),l+=2*s,this.isRounded?(t.moveTo(e-s+l,i-s),t.quadTo(e-s,i-s,e-s,i-s+l),t.lineTo(e-s,i+r*a),t.quadTo(e+n*.5,i+r*.7,e+n+s,i+r*a),t.lineTo(e+n+s,i-s+l),t.quadTo(e+n+s,i-s,e+n+s-l,i-s)):(t.moveTo(e-s,i-s),t.lineTo(e-s,i+r*a),t.quadTo(e+n*.5,i+r*.7,e+n+s,i+r*a),t.lineTo(e+n+s,i-s)),t.close(),t.fill()};mxShape$1.prototype.addPoints=function(t,e,i,n,r,l,s){if(e!=null&&e.length>0){s=s??!0;var a=e[e.length-1];if(r&&i){e=e.slice();var o=e[0],u=new mxPoint$1(a.x+(o.x-a.x)/2,a.y+(o.y-a.y)/2);e.splice(0,0,u)}var d=e[0],p=1;for(s?t.moveTo(d.x,d.y):t.lineTo(d.x,d.y);p<(r?e.length:e.length-1);){var c=e[mxUtils$1.mod(p,e.length)],g=d.x-c.x,x=d.y-c.y;if(i&&(g!=0||x!=0)&&(l==null||mxUtils$1.indexOf(l,p-1)<0)){var C=Math.sqrt(g*g+x*x),T=g*Math.min(n,C/2)/C,A=x*Math.min(n,C/2)/C,R=c.x+T,_=c.y+A;t.lineTo(R,_);for(var N=e[mxUtils$1.mod(p+1,e.length)];p<e.length-2&&Math.round(N.x-c.x)==0&&Math.round(N.y-c.y)==0;)N=e[mxUtils$1.mod(p+2,e.length)],p++;g=N.x-c.x,x=N.y-c.y,C=Math.max(1,Math.sqrt(g*g+x*x));var H=g*Math.min(n,C/2)/C,k=x*Math.min(n,C/2)/C,K=c.x+H,Q=c.y+k;t.quadTo(c.x,c.y,K,Q),c=new mxPoint$1(K,Q)}else t.lineTo(c.x,c.y);d=c,p++}r?t.close():t.lineTo(a.x,a.y)}};mxShape$1.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass};mxShape$1.prototype.apply=function(t){if(this.state=t,this.style=t.style,this.style!=null){if(this.fill=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILL_OPACITY,this.fillOpacity),this.fillStyle=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILL_STYLE,this.fillStyle),this.strokeOpacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING,this.spacing),this.startSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ROTATION,this.rotation),this.direction=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DIRECTION,this.direction),this.flipH=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,0)==1,this.flipV=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,0)==1,this.stencil!=null&&(this.flipH=mxUtils$1.getValue(this.style,"stencilFlipH",0)==1||this.flipH,this.flipV=mxUtils$1.getValue(this.style,"stencilFlipV",0)==1||this.flipV),this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH){var e=this.flipH;this.flipH=this.flipV,this.flipV=e}this.isShadow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW,this.isShadow)==1,this.isDashed=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DASHED,this.isDashed)==1,this.isRounded=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ROUNDED,this.isRounded)==1,this.glass=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GLASS,this.glass)==1,this.fill==mxConstants$1.NONE&&(this.fill=null),this.gradient==mxConstants$1.NONE&&(this.gradient=null),this.stroke==mxConstants$1.NONE&&(this.stroke=null)}};mxShape$1.prototype.setCursor=function(t){t==null&&(t=""),this.cursor=t,this.node!=null&&(this.node.style.cursor=t)};mxShape$1.prototype.getCursor=function(){return this.cursor};mxShape$1.prototype.isRoundable=function(){return!1};mxShape$1.prototype.getSvgBoundingBox=function(){var t=null;if(this.node!=null&&this.node.ownerSVGElement!=null)try{var e=this.node.getBBox();e.width>0&&e.height>0&&(t=new mxRectangle$1(e.x,e.y,e.width,e.height),this.stroke!=null&&t.grow(this.strokewidth*this.scale/2))}catch{}return t};mxShape$1.prototype.getShapeBoundingBox=function(){var t=null;if(this.bounds!=null&&(t=this.createBoundingBox(),t!=null)){this.augmentBoundingBox(t);var e=this.getShapeRotation();e!=0&&(t=mxUtils$1.getBoundingBox(t,e))}return t};mxShape$1.prototype.createBoundingBox=function(){var t=this.bounds.clone();return(this.stencil!=null&&(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&t.rotate90(),t};mxShape$1.prototype.augmentBoundingBox=function(t){if(this.isShadow){var e=this.getShadowStyle();e.dx<0&&(t.x+=e.dx,t.width-=e.dx),e.dy<0&&(t.y+=e.dy,t.height-=e.dy),t.grow(Math.max(e.blur,0)*this.scale*2),t.width+=Math.ceil(Math.max(e.dx,0)*this.scale),t.height+=Math.ceil(Math.max(e.dy,0)*this.scale)}this.stroke!=null&&t.grow(this.strokewidth*this.scale/2)};mxShape$1.prototype.updateBoundingBox=function(){var t=this.useSvgBoundingBox?this.getSvgBoundingBox():null;t==null&&(t=this.getShapeBoundingBox()),this.boundingBox=t};mxShape$1.prototype.isPaintBoundsInverted=function(){return this.stencil==null&&(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH)};mxShape$1.prototype.getRotation=function(){return this.rotation!=null?this.rotation:0};mxShape$1.prototype.getTextRotation=function(){var t=this.getRotation();return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,1)!=1&&(t+=mxText.prototype.verticalTextRotation),t};mxShape$1.prototype.getShapeRotation=function(){var t=this.getRotation();return this.direction!=null&&(this.direction==mxConstants$1.DIRECTION_NORTH?t+=270:this.direction==mxConstants$1.DIRECTION_WEST?t+=180:this.direction==mxConstants$1.DIRECTION_SOUTH&&(t+=90)),t};mxShape$1.prototype.createTransparentSvgRectangle=function(t,e,i,n){var r=document.createElementNS(mxConstants$1.NS_SVG,"rect");return r.setAttribute("x",t),r.setAttribute("y",e),r.setAttribute("width",i),r.setAttribute("height",n),r.setAttribute("fill","none"),r.setAttribute("stroke","none"),r.setAttribute("pointer-events","all"),r};mxShape$1.prototype.setTransparentBackgroundImage=function(t){t.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"};mxShape$1.prototype.intersectsRectangle=function(t,e){return t!=null&&(e||this.node!=null&&this.node.style.display!="none"&&this.node.style.visibility!="hidden")&&mxUtils$1.intersects(this.bounds,t,!0)};mxShape$1.prototype.releaseSvgGradients=function(t){if(t!=null)for(var e in t){var i=t[e];i!=null&&(i.mxRefCount=(i.mxRefCount||0)-1,i.mxRefCount==0&&i.parentNode!=null&&i.parentNode.removeChild(i))}};mxShape$1.prototype.releaseSvgFillPatterns=function(t){if(t!=null)for(var e in t){var i=t[e];i!=null&&(i.mxRefCount=(i.mxRefCount||0)-1,i.mxRefCount==0&&i.parentNode!=null&&i.parentNode.removeChild(i))}};mxShape$1.prototype.destroy=function(){this.node!=null&&(mxEvent$1.release(this.node),this.node.parentNode!=null&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.releaseSvgFillPatterns(this.oldFillPatterns),this.oldGradients=null,this.oldFillPatterns=null};function mxRectangleShape$1(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxRectangleShape$1,mxShape$1);mxRectangleShape$1.prototype.isHtmlAllowed=function(){var t=!0;return this.style!=null&&(t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!this.isRounded&&!this.glass&&this.rotation==0&&(t||this.fill!=null&&this.fill!=mxConstants$1.NONE)};mxRectangleShape$1.prototype.paintBackground=function(t,e,i,n,r){if(this.isRounded){var l=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")l=Math.min(n/2,Math.min(r/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;l=Math.min(n*s,r*s)}t.roundrect(e,i,n,r,l,l)}else t.rect(e,i,n,r);t.fillAndStroke()};mxRectangleShape$1.prototype.isRoundable=function(){return!0};mxRectangleShape$1.prototype.paintForeground=function(t,e,i,n,r){this.glass&&!this.outline&&this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.paintGlassEffect(t,e,i,n,r,this.getArcSize(n+this.strokewidth,r+this.strokewidth))};function mxImageShape$1(t,e,i,n,r){mxShape$1.call(this),this.bounds=t,this.image=e,this.fill=i,this.stroke=n,this.strokewidth=r??1}mxUtils$1.extend(mxImageShape$1,mxRectangleShape$1);mxImageShape$1.prototype.preserveImageAspect=!0;mxImageShape$1.prototype.getSvgScreenOffset=function(){return 0};mxImageShape$1.prototype.apply=function(t){mxShape$1.prototype.apply.apply(this,arguments),this.fill=null,this.stroke=null,this.gradient=null,this.style!=null&&(this.preserveImageAspect=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_ASPECT,1)==1,this.imageBackground=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BACKGROUND,null),this.imageBorder=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,null),this.flipH=this.flipH||mxUtils$1.getValue(this.style,"imageFlipH",0)==1,this.flipV=this.flipV||mxUtils$1.getValue(this.style,"imageFlipV",0)==1,this.clipPath=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_CLIP_PATH,null))};mxImageShape$1.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect};mxImageShape$1.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t};mxImageShape$1.prototype.isRoundable=function(){return!1};mxImageShape$1.prototype.getImageDataUri=function(){return this.image};mxImageShape$1.prototype.configurePointerEvents=function(t){};mxImageShape$1.prototype.paintVertexShape=function(t,e,i,n,r){this.image!=null?(this.imageBackground!=null&&(t.setFillColor(this.imageBackground),t.setStrokeColor(this.imageBorder),t.rect(e,i,n,r),t.fillAndStroke()),t.image(e,i,n,r,this.getImageDataUri(),this.preserveImageAspect,!1,!1,this.clipPath),this.imageBorder!=null&&(t.setShadow(!1),t.setStrokeColor(this.imageBorder),t.rect(e,i,n,r),t.stroke())):mxRectangleShape$1.prototype.paintBackground.apply(this,arguments)};mxImageShape$1.prototype.redrawHtmlShape=function(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerText="",this.image!=null){var t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BACKGROUND,""),e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=t,this.node.style.borderColor=e;var i=document.createElement("img");i.setAttribute("border","0"),i.style.position="absolute",i.src=this.image;var n=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=n,this.flipH&&this.flipV?n+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?n+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(n+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),i.style.filter!=n&&(i.style.filter=n),i.nodeName=="image"?i.style.rotation=this.rotation:this.rotation!=0?mxUtils$1.setPrefixedStyle(i.style,"transform","rotate("+this.rotation+"deg)"):mxUtils$1.setPrefixedStyle(i.style,"transform",""),i.style.width=this.node.style.width,i.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(i)}else this.setTransparentBackgroundImage(this.node)};function mxImage(t,e,i,n,r){this.src=t,this.width=e??this.width,this.height=i??this.height,this.x=n??this.x,this.y=r??this.y}mxImage.prototype.src=null;mxImage.prototype.width=0;mxImage.prototype.height=0;mxImage.prototype.x=0;mxImage.prototype.y=0;function mxConstraintHandler(t){this.graph=t,this.resetHandler=mxUtils$1.bind(this,function(e,i){this.currentFocus!=null&&this.graph.view.getState(this.currentFocus.cell)==null?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent$1.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent$1.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.resetHandler),this.graph.addListener(mxEvent$1.ROOT,this.resetHandler)}mxConstraintHandler.prototype.pointImage=new mxImage(mxClient$1.imageBasePath+"/point.gif",5,5);mxConstraintHandler.prototype.graph=null;mxConstraintHandler.prototype.enabled=!0;mxConstraintHandler.prototype.highlightColor=mxConstants$1.DEFAULT_VALID_COLOR;mxConstraintHandler.prototype.isEnabled=function(){return this.enabled};mxConstraintHandler.prototype.setEnabled=function(t){this.enabled=t};mxConstraintHandler.prototype.reset=function(){if(this.focusIcons!=null){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusIcons=null}this.focusHighlight!=null&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null};mxConstraintHandler.prototype.getTolerance=function(t){return this.graph.getTolerance()};mxConstraintHandler.prototype.getImageForConstraint=function(t,e,i){return this.pointImage};mxConstraintHandler.prototype.isEventIgnored=function(t,e){return!1};mxConstraintHandler.prototype.isStateIgnored=function(t,e){return!1};mxConstraintHandler.prototype.destroyIcons=function(){if(this.focusIcons!=null){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusIcons=null,this.focusPoints=null}};mxConstraintHandler.prototype.destroyFocusHighlight=function(){this.focusHighlight!=null&&(this.focusHighlight.destroy(),this.focusHighlight=null)};mxConstraintHandler.prototype.isKeepFocusEvent=function(t){return mxEvent$1.isShiftDown(t.getEvent())&&!mxEvent$1.isAltDown(t.getEvent())};mxConstraintHandler.prototype.getCellForEvent=function(t,e){var i=t.getCell();if(i==null&&e!=null&&(t.getGraphX()!=e.x||t.getGraphY()!=e.y)&&(i=this.graph.getCellAt(e.x,e.y)),i!=null&&!this.graph.isCellConnectable(i)){var n=this.graph.getModel().getParent(i);this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(i=n)}return this.graph.isCellLocked(i)?null:i};mxConstraintHandler.prototype.update=function(t,e,i,n){if(this.isEnabled()&&!this.isEventIgnored(t)){this.mouseleaveHandler==null&&this.graph.container!=null&&(this.mouseleaveHandler=mxUtils$1.bind(this,function(){this.reset()}),mxEvent$1.addListener(this.graph.container,"mouseleave",this.resetHandler));var r=this.getTolerance(t),l=n!=null?n.x:t.getGraphX(),s=n!=null?n.y:t.getGraphY(),a=new mxRectangle$1(l-r,s-r,2*r,2*r),o=new mxRectangle$1(t.getGraphX()-r,t.getGraphY()-r,2*r,2*r),u=this.graph.view.getState(this.getCellForEvent(t,n));!this.isKeepFocusEvent(t)&&(this.currentFocusArea==null||this.currentFocus==null||u!=null||!this.graph.getModel().isVertex(this.currentFocus.cell)||!mxUtils$1.intersects(this.currentFocusArea,o))&&u!=this.currentFocus&&(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(t,u,e)),this.currentConstraint=null,this.currentPoint=null;var d=null;if(this.focusIcons!=null&&this.constraints!=null&&(u==null||this.currentFocus==u))for(var p=o.getCenterX(),c=o.getCenterY(),g=0;g<this.focusIcons.length;g++){var x=p-this.focusIcons[g].bounds.getCenterX(),C=c-this.focusIcons[g].bounds.getCenterY(),T=x*x+C*C;if((this.intersects(this.focusIcons[g],o,e,i)||n!=null&&this.intersects(this.focusIcons[g],a,e,i))&&(d==null||T<d)){this.currentConstraint=this.constraints[g],this.currentPoint=this.focusPoints[g],d=T;var T=this.focusIcons[g].bounds.clone();if(T.grow(mxConstants$1.HIGHLIGHT_SIZE+1),T.width-=1,T.height-=1,this.focusHighlight==null){var A=this.createHighlightShape();A.dialect=mxConstants$1.DIALECT_SVG,A.pointerEvents=!1,A.init(this.graph.getView().getOverlayPane()),this.focusHighlight=A;var R=mxUtils$1.bind(this,function(){return this.currentFocus!=null?this.currentFocus:u});mxEvent$1.redirectMouseEvents(A.node,this.graph,R)}this.focusHighlight.bounds=T,this.focusHighlight.redraw()}}this.currentConstraint==null&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null};mxConstraintHandler.prototype.redraw=function(){if(this.currentFocus!=null&&this.constraints!=null&&this.focusIcons!=null){var t=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=t,this.currentFocusArea=new mxRectangle$1(t.x,t.y,t.width,t.height);for(var e=0;e<this.constraints.length;e++){var i=this.graph.getConnectionPoint(t,this.constraints[e]),n=this.getImageForConstraint(t,this.constraints[e],i),r=new mxRectangle$1(Math.round(i.x-n.width/2),Math.round(i.y-n.height/2),n.width,n.height);this.focusIcons[e].bounds=r,this.focusIcons[e].redraw(),this.currentFocusArea.add(this.focusIcons[e].bounds),this.focusPoints[e]=i}}};mxConstraintHandler.prototype.setFocus=function(t,e,i){if(this.constraints=e!=null&&!this.isStateIgnored(e,i)&&this.graph.isCellConnectable(e.cell)?this.isEnabled()?this.graph.getAllConnectionConstraints(e,i)||[]:[]:null,this.constraints!=null){if(this.currentFocus=e,this.currentFocusArea=new mxRectangle$1(e.x,e.y,e.width,e.height),this.focusIcons!=null){for(var n=0;n<this.focusIcons.length;n++)this.focusIcons[n].destroy();this.focusIcons=null,this.focusPoints=null}this.focusPoints=[],this.focusIcons=[];for(var n=0;n<this.constraints.length;n++){var r=this.graph.getConnectionPoint(e,this.constraints[n]),l=this.getImageForConstraint(e,this.constraints[n],r),s=l.src,a=new mxRectangle$1(Math.round(r.x-l.width/2),Math.round(r.y-l.height/2),l.width,l.height),o=new mxImageShape$1(a,s);o.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,o.preserveImageAspect=!1,o.init(this.graph.getView().getDecoratorPane()),o.node.previousSibling!=null&&o.node.parentNode.insertBefore(o.node,o.node.parentNode.firstChild);var u=mxUtils$1.bind(this,function(){return this.currentFocus!=null?this.currentFocus:e});o.redraw(),mxEvent$1.redirectMouseEvents(o.node,this.graph,u),this.currentFocusArea.add(o.bounds),this.focusIcons.push(o),this.focusPoints.push(r)}this.currentFocusArea.grow(this.getTolerance(t))}else this.destroyIcons(),this.destroyFocusHighlight()};mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants$1.HIGHLIGHT_STROKEWIDTH);return t.opacity=mxConstants$1.HIGHLIGHT_OPACITY,t};mxConstraintHandler.prototype.intersects=function(t,e,i,n){return mxUtils$1.intersects(t.bounds,e)};mxConstraintHandler.prototype.destroy=function(){this.reset(),this.resetHandler!=null&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),this.mouseleaveHandler!=null&&this.graph.container!=null&&(mxEvent$1.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)};function mxConnectionHandler(t,e){mxEventSource.call(this),t!=null&&(this.graph=t,this.factoryMethod=e,this.init(),this.escapeHandler=mxUtils$1.bind(this,function(i,n){this.reset()}),this.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}mxUtils$1.extend(mxConnectionHandler,mxEventSource);mxConnectionHandler.prototype.graph=null;mxConnectionHandler.prototype.factoryMethod=!0;mxConnectionHandler.prototype.moveIconFront=!1;mxConnectionHandler.prototype.moveIconBack=!1;mxConnectionHandler.prototype.connectImage=null;mxConnectionHandler.prototype.targetConnectImage=!1;mxConnectionHandler.prototype.enabled=!0;mxConnectionHandler.prototype.select=!0;mxConnectionHandler.prototype.createTarget=!1;mxConnectionHandler.prototype.marker=null;mxConnectionHandler.prototype.constraintHandler=null;mxConnectionHandler.prototype.error=null;mxConnectionHandler.prototype.waypointsEnabled=!1;mxConnectionHandler.prototype.ignoreMouseDown=!1;mxConnectionHandler.prototype.first=null;mxConnectionHandler.prototype.connectIconOffset=new mxPoint$1(0,mxConstants$1.TOOLTIP_VERTICAL_OFFSET);mxConnectionHandler.prototype.edgeState=null;mxConnectionHandler.prototype.changeHandler=null;mxConnectionHandler.prototype.drillHandler=null;mxConnectionHandler.prototype.mouseDownCounter=0;mxConnectionHandler.prototype.movePreviewAway=!1;mxConnectionHandler.prototype.outlineConnect=!1;mxConnectionHandler.prototype.livePreview=!1;mxConnectionHandler.prototype.cursor=null;mxConnectionHandler.prototype.insertBeforeSource=!1;mxConnectionHandler.prototype.isEnabled=function(){return this.enabled};mxConnectionHandler.prototype.setEnabled=function(t){this.enabled=t};mxConnectionHandler.prototype.isInsertBefore=function(t,e,i,n,r){return this.insertBeforeSource&&e!=i&&this.graph.model.getParent(t)==this.graph.model.getParent(e)};mxConnectionHandler.prototype.isCreateTarget=function(t){return this.createTarget};mxConnectionHandler.prototype.setCreateTarget=function(t){this.createTarget=t};mxConnectionHandler.prototype.createShape=function(){var t=this.livePreview&&this.edgeState!=null?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants$1.INVALID_COLOR);return t.dialect=mxConstants$1.DIALECT_SVG,t.scale=this.graph.view.scale,t.svgStrokeTolerance=0,t.pointerEvents=!1,t.isDashed=!0,t.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(t.node,this.graph,null),t};mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils$1.bind(this,function(t){this.iconState!=null&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),this.iconState!=null?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):this.previous!=null&&this.graph.view.getState(this.previous.cell)==null&&this.reset()}),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils$1.bind(this,function(t){this.reset()}),this.graph.addListener(mxEvent$1.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent$1.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent$1.UP,this.drillHandler)};mxConnectionHandler.prototype.isConnectableCell=function(t){return!0};mxConnectionHandler.prototype.createMarker=function(){var t=new mxCellMarker$1(this.graph);return t.hotspotEnabled=!0,t.getCell=mxUtils$1.bind(this,function(e){var i=mxCellMarker$1.prototype.getCell.apply(t,arguments);if(this.error=null,i==null&&this.currentPoint!=null&&(i=this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y)),i!=null&&!this.graph.isCellConnectable(i)){var n=this.graph.getModel().getParent(i);this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(i=n)}return(this.graph.isSwimlane(i)&&this.currentPoint!=null&&this.graph.hitsSwimlaneContent(i,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(i))&&(i=null),i!=null?this.isConnecting()?this.previous!=null&&(this.error=this.validateConnection(this.previous.cell,i),this.error!=null&&this.error.length==0&&(i=null,this.isCreateTarget(e.getEvent())&&(this.error=null))):this.isValidSource(i,e)||(i=null):this.isConnecting()&&!this.isCreateTarget(e.getEvent())&&!this.graph.allowDanglingEdges&&(this.error=""),i}),t.isValidState=mxUtils$1.bind(this,function(e){return this.isConnecting()?this.error==null:mxCellMarker$1.prototype.isValidState.apply(t,arguments)}),t.getMarkerColor=mxUtils$1.bind(this,function(e,i,n){return this.connectImage==null||this.isConnecting()?mxCellMarker$1.prototype.getMarkerColor.apply(t,arguments):null}),t.intersects=mxUtils$1.bind(this,function(e,i){return this.connectImage!=null||this.isConnecting()?!0:mxCellMarker$1.prototype.intersects.apply(t,arguments)}),t};mxConnectionHandler.prototype.start=function(t,e,i,n){this.previous=t,this.first=new mxPoint$1(e,i),this.edgeState=n??this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=t,this.marker.mark(),this.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.previous))};mxConnectionHandler.prototype.isConnecting=function(){return this.first!=null&&this.shape!=null};mxConnectionHandler.prototype.isValidSource=function(t,e){return this.graph.isValidSource(t)};mxConnectionHandler.prototype.isValidTarget=function(t){return!0};mxConnectionHandler.prototype.validateConnection=function(t,e){return this.isValidTarget(e)?this.graph.getEdgeValidationError(null,t,e):""};mxConnectionHandler.prototype.getConnectImage=function(t){return this.connectImage};mxConnectionHandler.prototype.isMoveIconToFrontForState=function(t){return t.text!=null&&t.text.node.parentNode==this.graph.container?!0:this.moveIconFront};mxConnectionHandler.prototype.createIcons=function(t){var e=this.getConnectImage(t);if(e!=null&&t!=null){this.iconState=t;var i=[],n=new mxRectangle$1(0,0,e.width,e.height),r=new mxImageShape(n,e.src,null,null,0);r.preserveImageAspect=!1,this.isMoveIconToFrontForState(t)?(r.dialect=mxConstants$1.DIALECT_STRICTHTML,r.init(this.graph.container)):(r.dialect=mxConstants$1.DIALECT_SVG,r.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&r.node.previousSibling!=null&&r.node.parentNode.insertBefore(r.node,r.node.parentNode.firstChild)),r.node.style.cursor=mxConstants$1.CURSOR_CONNECT;var l=mxUtils$1.bind(this,function(){return this.currentState!=null?this.currentState:t}),s=mxUtils$1.bind(this,function(a){mxEvent$1.isConsumed(a)||(this.icon=r,this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(a,l())))});return mxEvent$1.redirectMouseEvents(r.node,this.graph,l,s),i.push(r),this.redrawIcons(i,this.iconState),i}return null};mxConnectionHandler.prototype.redrawIcons=function(t,e){if(t!=null&&t[0]!=null&&e!=null){var i=this.getIconPosition(t[0],e);t[0].bounds.x=i.x,t[0].bounds.y=i.y,t[0].redraw()}};mxConnectionHandler.prototype.getIconPosition=function(t,e){var i=this.graph.getView().scale,n=e.getCenterX(),r=e.getCenterY();if(this.graph.isSwimlane(e.cell)){var l=this.graph.getStartSize(e.cell);n=l.width!=0?e.x+l.width*i/2:n,r=l.height!=0?e.y+l.height*i/2:r;var s=mxUtils$1.toRadians(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION)||0);if(s!=0){var a=Math.cos(s),o=Math.sin(s),u=new mxPoint$1(e.getCenterX(),e.getCenterY()),d=mxUtils$1.getRotatedPoint(new mxPoint$1(n,r),a,o,u);n=d.x,r=d.y}}return new mxPoint$1(n-t.bounds.width/2,r-t.bounds.height/2)};mxConnectionHandler.prototype.destroyIcons=function(){if(this.icons!=null){for(var t=0;t<this.icons.length;t++)this.icons[t].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}};mxConnectionHandler.prototype.isStartEvent=function(t){return this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null||this.previous!=null&&this.error==null&&(this.icons==null||this.icons!=null&&this.icon!=null)};mxConnectionHandler.prototype.mouseDown=function(t,e){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!e.isConsumed()&&!this.isConnecting()&&this.isStartEvent(e)){if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint$1(e.getGraphX(),e.getGraphY()),this.edgeState=this.createEdgeState(e),this.mouseDownCounter=1,this.waypointsEnabled&&this.shape==null&&(this.waypoints=null,this.shape=this.createShape(),this.edgeState!=null&&this.shape.apply(this.edgeState)),this.previous==null&&this.edgeState!=null){var i=this.graph.getPointForEvent(e.getEvent());this.edgeState.cell.geometry.setTerminalPoint(i,!0)}this.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.previous)),e.consume()}this.selectedIcon=this.icon,this.icon=null};mxConnectionHandler.prototype.isImmediateConnectSource=function(t){return!this.graph.isCellMovable(t.cell)};mxConnectionHandler.prototype.createEdgeState=function(t){return null};mxConnectionHandler.prototype.isOutlineConnectEvent=function(t){if(mxEvent$1.isShiftDown(t.getEvent())&&mxEvent$1.isAltDown(t.getEvent()))return!1;var e=mxUtils$1.getOffset(this.graph.container),i=t.getEvent(),n=mxEvent$1.getClientX(i),r=mxEvent$1.getClientY(i),l=document.documentElement,s=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),a=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),o=this.currentPoint.x-this.graph.container.scrollLeft+e.x-s,u=this.currentPoint.y-this.graph.container.scrollTop+e.y-a;return this.outlineConnect&&(mxEvent$1.isShiftDown(t.getEvent())&&!mxEvent$1.isAltDown(t.getEvent())||t.isSource(this.marker.highlight.shape)||!mxEvent$1.isShiftDown(t.getEvent())&&mxEvent$1.isAltDown(t.getEvent())&&t.getState()!=null||this.marker.highlight.isHighlightAt(n,r)||(o!=n||u!=r)&&t.getState()==null&&this.marker.highlight.isHighlightAt(o,u))};mxConnectionHandler.prototype.updateCurrentState=function(t,e){if(this.constraintHandler.update(t,this.first==null,!1,this.first==null||t.isSource(this.marker.highlight.shape)?null:e),this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null)this.marker.highlight!=null&&this.marker.highlight.state!=null&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?this.marker.highlight.shape.stroke!="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),this.previous!=null&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),this.error==null&&(this.currentState=this.constraintHandler.currentFocus),(this.error!=null||this.currentState!=null&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(t),this.currentState=this.marker.getValidState()),this.currentState!=null&&!this.isCellEnabled(this.currentState.cell)&&(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null);var i=this.isOutlineConnectEvent(t);if(this.currentState!=null&&i){t.isSource(this.marker.highlight.shape)&&(e=new mxPoint$1(t.getGraphX(),t.getGraphY()));var n=this.graph.getOutlineConstraint(e,this.currentState,t);this.constraintHandler.setFocus(t,this.currentState,!1),this.constraintHandler.currentConstraint=n,this.constraintHandler.currentPoint=e}if(this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){var r=this.graph.view.scale;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null?(this.marker.highlight.shape.stroke=mxConstants$1.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.OUTLINE_HIGHLIGHT_STROKEWIDTH/r/r,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(t.getCell())&&this.marker.getValidState()!=t.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants$1.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.HIGHLIGHT_STROKEWIDTH/r/r,this.marker.highlight.repaint())}}};mxConnectionHandler.prototype.isCellEnabled=function(t){return!0};mxConnectionHandler.prototype.convertWaypoint=function(t){var e=this.graph.getView().getScale(),i=this.graph.getView().getTranslate();t.x=t.x/e-i.x,t.y=t.y/e-i.y};mxConnectionHandler.prototype.snapToPreview=function(t,e){if(!mxEvent$1.isAltDown(t.getEvent())&&this.previous!=null){var i=this.graph.gridSize*this.graph.view.scale/2,n=this.sourceConstraint!=null?this.first:new mxPoint$1(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(n.x-t.getGraphX())<i&&(e.x=n.x),Math.abs(n.y-t.getGraphY())<i&&(e.y=n.y)}};mxConnectionHandler.prototype.mouseMove=function(t,e){if(!e.isConsumed()&&(this.ignoreMouseDown||this.first!=null||!this.graph.isMouseDown)){!this.isEnabled()&&this.currentState!=null&&(this.destroyIcons(),this.currentState=null);var i=this.graph.getView(),n=i.scale,r=i.translate,l=new mxPoint$1(e.getGraphX(),e.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(e.getEvent())&&(l=new mxPoint$1((this.graph.snap(l.x/n-r.x)+r.x)*n,(this.graph.snap(l.y/n-r.y)+r.y)*n)),this.snapToPreview(e,l),this.currentPoint=l,(this.first!=null||this.isEnabled()&&this.graph.isEnabled())&&(this.shape!=null||this.first==null||Math.abs(e.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(e.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(e,l),this.first!=null){var s=null,a=l;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null)s=this.constraintHandler.currentConstraint,a=this.constraintHandler.currentPoint.clone();else if(this.previous!=null&&mxEvent$1.isShiftDown(e.getEvent())&&!this.graph.isIgnoreTerminalEvent(e.getEvent())){var o=new mxPoint$1(this.previous.getCenterX(),this.previous.getCenterY());this.sourceConstraint!=null&&(o=this.first),Math.abs(o.x-l.x)<Math.abs(o.y-l.y)?l.x=o.x:l.y=o.y}var u=this.first;if(this.selectedIcon!=null){var d=this.selectedIcon.bounds.width,p=this.selectedIcon.bounds.height;if(this.currentState!=null&&this.targetConnectImage){var c=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=c.x,this.selectedIcon.bounds.y=c.y}else{var g=new mxRectangle$1(e.getGraphX()+this.connectIconOffset.x,e.getGraphY()+this.connectIconOffset.y,d,p);this.selectedIcon.bounds=g}this.selectedIcon.redraw()}if(this.edgeState!=null)this.updateEdgeState(a,s),a=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],u=this.edgeState.absolutePoints[0];else{if(this.currentState!=null&&this.constraintHandler.currentConstraint==null){var x=this.getTargetPerimeterPoint(this.currentState,e);x!=null&&(a=x)}if(this.sourceConstraint==null&&this.previous!=null){var C=this.waypoints!=null&&this.waypoints.length>0?this.waypoints[0]:a,x=this.getSourcePerimeterPoint(this.previous,C,e);x!=null&&(u=x)}}if(this.currentState==null&&this.movePreviewAway){var x=u;if(this.edgeState!=null&&this.edgeState.absolutePoints.length>=2){var T=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];T!=null&&(x=T)}var A=a.x-x.x,R=a.y-x.y,_=Math.sqrt(A*A+R*R);if(_==0)return;this.originalPoint=a.clone(),a.x-=A*4/_,a.y-=R*4/_}else this.originalPoint=null;if(this.shape==null){var A=Math.abs(e.getGraphX()-this.first.x),R=Math.abs(e.getGraphY()-this.first.y);(A>this.graph.tolerance||R>this.graph.tolerance)&&(this.shape=this.createShape(),this.edgeState!=null&&this.shape.apply(this.edgeState),this.updateCurrentState(e,l))}if(this.shape!=null){if(this.edgeState!=null)this.shape.points=this.edgeState.absolutePoints;else{var N=[u];this.waypoints!=null&&(N=N.concat(this.waypoints)),N.push(a),this.shape.points=N}this.drawPreview()}this.cursor!=null&&(this.graph.container.style.cursor=this.cursor),mxEvent$1.consume(e.getEvent()),e.consume()}else!this.isEnabled()||!this.graph.isEnabled()?this.constraintHandler.reset():this.previous!=this.currentState&&this.edgeState==null?(this.destroyIcons(),this.currentState!=null&&this.error==null&&this.constraintHandler.currentConstraint==null&&(this.icons=this.createIcons(this.currentState),this.icons==null&&(this.currentState.setCursor(mxConstants$1.CURSOR_CONNECT),e.consume())),this.previous=this.currentState):this.previous==this.currentState&&this.currentState!=null&&this.icons==null&&!this.graph.isMouseDown&&e.consume();if(!this.graph.isMouseDown&&this.currentState!=null&&this.icons!=null){for(var H=!1,k=e.getSource(),K=0;K<this.icons.length&&!H;K++)H=k==this.icons[K].node||k.parentNode==this.icons[K].node;H||this.updateIcons(this.currentState,this.icons,e)}}else this.constraintHandler.reset()};mxConnectionHandler.prototype.updateEdgeState=function(t,e){this.sourceConstraint!=null&&this.sourceConstraint.point!=null&&(this.edgeState.style[mxConstants$1.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants$1.STYLE_EXIT_Y]=this.sourceConstraint.point.y),e!=null&&e.point!=null?(this.edgeState.style[mxConstants$1.STYLE_ENTRY_X]=e.point.x,this.edgeState.style[mxConstants$1.STYLE_ENTRY_Y]=e.point.y):(delete this.edgeState.style[mxConstants$1.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants$1.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,this.currentState!=null?null:t],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),this.currentState!=null&&(e==null&&(e=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,e));var i=null;if(this.waypoints!=null){i=[];for(var n=0;n<this.waypoints.length;n++){var r=this.waypoints[n].clone();this.convertWaypoint(r),i[n]=r}}this.graph.view.updatePoints(this.edgeState,i,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)};mxConnectionHandler.prototype.getTargetPerimeterPoint=function(t,e){var i=null,n=t.view,r=n.getPerimeterFunction(t);if(r!=null){var l=this.waypoints!=null&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint$1(this.previous.getCenterX(),this.previous.getCenterY()),s=r(n.getPerimeterBounds(t),this.edgeState,l,!1);s!=null&&(i=s)}else i=new mxPoint$1(t.getCenterX(),t.getCenterY());return i};mxConnectionHandler.prototype.getSourcePerimeterPoint=function(t,e,i){var n=null,r=t.view,l=r.getPerimeterFunction(t),s=new mxPoint$1(t.getCenterX(),t.getCenterY());if(l!=null){var a=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION,0),o=-a*(Math.PI/180);a!=0&&(e=mxUtils$1.getRotatedPoint(new mxPoint$1(e.x,e.y),Math.cos(o),Math.sin(o),s));var u=l(r.getPerimeterBounds(t),t,e,!1);u!=null&&(a!=0&&(u=mxUtils$1.getRotatedPoint(new mxPoint$1(u.x,u.y),Math.cos(-o),Math.sin(-o),s)),n=u)}else n=s;return n};mxConnectionHandler.prototype.updateIcons=function(t,e,i){};mxConnectionHandler.prototype.isStopEvent=function(t){return t.getState()!=null};mxConnectionHandler.prototype.addWaypointForEvent=function(t){var e=mxUtils$1.convertPoint(this.graph.container,t.getX(),t.getY()),i=Math.abs(e.x-this.first.x),n=Math.abs(e.y-this.first.y),r=this.waypoints!=null||this.mouseDownCounter>1&&(i>this.graph.tolerance||n>this.graph.tolerance);if(r){this.waypoints==null&&(this.waypoints=[]);var l=this.graph.view.scale,e=new mxPoint$1(this.graph.snap(t.getGraphX()/l)*l,this.graph.snap(t.getGraphY()/l)*l);this.waypoints.push(e)}};mxConnectionHandler.prototype.checkConstraints=function(t,e){return t==null||e==null||t.point==null||e.point==null||!t.point.equals(e.point)||t.dx!=e.dx||t.dy!=e.dy||t.perimeter!=e.perimeter};mxConnectionHandler.prototype.mouseUp=function(t,e){if(!e.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(e)){this.addWaypointForEvent(e),e.consume();return}var i=this.sourceConstraint,n=this.constraintHandler.currentConstraint,r=this.previous!=null?this.previous.cell:null,l=null;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(l=this.constraintHandler.currentFocus.cell),l==null&&this.currentState!=null&&(l=this.currentState.cell),this.error==null&&(r==null||l==null||r!=l||this.checkConstraints(i,n))?this.connect(r,l,e.getEvent(),e.getCell()):(this.previous!=null&&this.marker.validState!=null&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,e.getEvent()),this.error!=null&&this.error.length>0&&this.graph.validationAlert(this.error)),this.destroyIcons(),e.consume()}this.first!=null&&this.reset()};mxConnectionHandler.prototype.reset=function(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.cursor!=null&&this.graph.container!=null&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject$1(mxEvent$1.RESET))};mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(this.error==null),this.edgeState!=null&&(this.edgeState.shape=this.shape,this.graph.cellRenderer.postConfigureShape(this.edgeState),this.edgeState.shape=null),this.shape.redraw()};mxConnectionHandler.prototype.updatePreview=function(t){this.shape.strokewidth=this.getEdgeWidth(t),this.shape.stroke=this.getEdgeColor(t)};mxConnectionHandler.prototype.getEdgeColor=function(t){return t?mxConstants$1.VALID_COLOR:mxConstants$1.INVALID_COLOR};mxConnectionHandler.prototype.getEdgeWidth=function(t){return t?3:1};mxConnectionHandler.prototype.connect=function(t,e,i,n){if(e!=null||this.isCreateTarget(i)||this.graph.allowDanglingEdges){var r=this.graph.getModel(),l=!1,s=null;r.beginUpdate();try{if(t!=null&&e==null&&!this.graph.isIgnoreTerminalEvent(i)&&this.isCreateTarget(i)&&(e=this.createTargetVertex(i,t),e!=null)){if(n=this.graph.getDropTarget([e],i,n),l=!0,n==null||!this.graph.getModel().isEdge(n)){var a=this.graph.getView().getState(n);if(a!=null){var o=r.getGeometry(e);o.x-=a.origin.x,o.y-=a.origin.y}}else n=this.graph.getDefaultParent();this.graph.addCell(e,n)}var u=this.graph.getDefaultParent(),d=this.graph.getReferenceTerminal(t),p=this.graph.getReferenceTerminal(e),c=u;d!=null&&p!=null?c=r.getNearestCommonAncestor(d,p):d!=null&&(c=r.getParent(d)),c!=null&&!r.isEdge(c)&&c!=r.getRoot()&&(u=c);var g=null,x=null;if(this.edgeState!=null&&(g=this.edgeState.cell.value,x=this.edgeState.cell.style),s=this.insertEdge(u,null,g,t,e,x),s!=null){if(this.graph.setConnectionConstraint(s,t,!0,this.sourceConstraint),this.graph.setConnectionConstraint(s,e,!1,this.constraintHandler.currentConstraint),this.edgeState!=null&&r.setGeometry(s,this.edgeState.cell.geometry),this.isInsertBefore(s,t,e,i,n)&&(this.constraintHandler.currentConstraint==null||this.constraintHandler.currentConstraint.perimeter)){for(var o=t;o.parent!=null&&o.geometry!=null&&o.geometry.relative&&o.parent!=s.parent;)o=this.graph.model.getParent(o);o!=null&&o.parent!=null&&o.parent==s.parent&&r.add(u,s,o.parent.getIndex(o))}var C=r.getGeometry(s);if(C==null&&(C=new mxGeometry,C.relative=!0,r.setGeometry(s,C)),this.waypoints!=null&&this.waypoints.length>0){var T=this.graph.view.scale,A=this.graph.view.translate;C.points=[];for(var R=0;R<this.waypoints.length;R++){var _=this.waypoints[R];C.points.push(new mxPoint$1(_.x/T-A.x,_.y/T-A.y))}}if(e==null){var N=this.graph.view.translate,T=this.graph.view.scale,_=this.originalPoint!=null?new mxPoint$1(this.originalPoint.x/T-N.x,this.originalPoint.y/T-N.y):new mxPoint$1(this.currentPoint.x/T-N.x,this.currentPoint.y/T-N.y);_.x-=this.graph.panDx/this.graph.view.scale,_.y-=this.graph.panDy/this.graph.view.scale;var a=this.graph.getView().getState(r.getParent(s));a!=null&&(_.x-=a.origin.x,_.y-=a.origin.y),C.setTerminalPoint(_,!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CONNECT,"cell",s,"terminal",e,"event",i,"target",n,"terminalInserted",l))}}catch(H){mxLog$1.show(),mxLog$1.debug(H.message)}finally{r.endUpdate()}this.select&&this.selectCells(s,l?e:null)}};mxConnectionHandler.prototype.selectCells=function(t,e){this.graph.setSelectionCell(t)};mxConnectionHandler.prototype.insertEdge=function(t,e,i,n,r,l){if(this.factoryMethod==null)return this.graph.insertEdge(t,e,i,n,r,l);var s=this.createEdge(i,n,r,l);return s=this.graph.addEdge(s,t,n,r),s};mxConnectionHandler.prototype.createTargetVertex=function(t,e){for(var n=this.graph.getCellGeometry(e);n!=null&&n.relative;)e=this.graph.getModel().getParent(e),n=this.graph.getCellGeometry(e);var i=this.graph.cloneCell(e),n=this.graph.getModel().getGeometry(i);if(n!=null){var r=this.graph.view.translate,l=this.graph.view.scale,s=new mxPoint$1(this.currentPoint.x/l-r.x,this.currentPoint.y/l-r.y);n.x=Math.round(s.x-n.width/2-this.graph.panDx/l),n.y=Math.round(s.y-n.height/2-this.graph.panDy/l);var a=this.getAlignmentTolerance();if(a>0){var o=this.graph.view.getState(e);if(o!=null){var u=o.x/l-r.x,d=o.y/l-r.y;Math.abs(u-n.x)<=a&&(n.x=Math.round(u)),Math.abs(d-n.y)<=a&&(n.y=Math.round(d))}}}return i};mxConnectionHandler.prototype.getAlignmentTolerance=function(t){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance};mxConnectionHandler.prototype.createEdge=function(t,e,i,n){var r=null;if(this.factoryMethod!=null&&(r=this.factoryMethod(e,i,n)),r==null){r=new mxCell(t||""),r.setEdge(!0),r.setStyle(n);var l=new mxGeometry;l.relative=!0,r.setGeometry(l)}return r};mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.shape!=null&&(this.shape.destroy(),this.shape=null),this.marker!=null&&(this.marker.destroy(),this.marker=null),this.constraintHandler!=null&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),this.drillHandler!=null&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),this.escapeHandler!=null&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)};function mxGuide$1(t,e){this.graph=t,this.setStates(e)}mxGuide$1.prototype.graph=null;mxGuide$1.prototype.states=null;mxGuide$1.prototype.horizontal=!0;mxGuide$1.prototype.vertical=!0;mxGuide$1.prototype.guideX=null;mxGuide$1.prototype.guideY=null;mxGuide$1.prototype.rounded=!1;mxGuide$1.prototype.tolerance=2;mxGuide$1.prototype.setStates=function(t){this.states=t};mxGuide$1.prototype.isEnabledForEvent=function(t){return!0};mxGuide$1.prototype.getGuideTolerance=function(t){return t&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance};mxGuide$1.prototype.createGuideShape=function(t){var e=new mxPolyline([],mxConstants$1.GUIDE_COLOR,mxConstants$1.GUIDE_STROKEWIDTH);return e.isDashed=!0,e};mxGuide$1.prototype.isStateIgnored=function(t){return!1};mxGuide$1.prototype.move=function(t,e,i,n){if(this.states!=null&&(this.horizontal||this.vertical)&&t!=null&&e!=null){let B=function(lt,tt,st){var ft=!1;st&&Math.abs(lt-A)<g?(e.x=lt-t.getCenterX(),g=Math.abs(lt-A),ft=!0):st||(Math.abs(lt-C)<g?(e.x=lt-t.x,g=Math.abs(lt-C),ft=!0):Math.abs(lt-T)<g&&(e.x=lt-t.x-t.width,g=Math.abs(lt-T),ft=!0)),ft&&(o=tt,u=lt,this.guideX==null&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=mxConstants$1.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),a=a||ft},U=function(lt,tt,st){var ft=!1;st&&Math.abs(lt-N)<x?(e.y=lt-t.getCenterY(),x=Math.abs(lt-N),ft=!0):st||(Math.abs(lt-R)<x?(e.y=lt-t.y,x=Math.abs(lt-R),ft=!0):Math.abs(lt-_)<x&&(e.y=lt-t.y-t.height,x=Math.abs(lt-_),ft=!0)),ft&&(p=tt,c=lt,this.guideY==null&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=mxConstants$1.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),d=d||ft};var xt=B,Y=U,r=this.graph.getView().scale,l=this.getGuideTolerance(i)*r,s=t.clone();s.x+=e.x,s.y+=e.y;for(var a=!1,o=null,u=null,d=!1,p=null,c=null,g=l,x=l,C=s.x,T=s.x+s.width,A=s.getCenterX(),R=s.y,_=s.y+s.height,N=s.getCenterY(),H=0;H<this.states.length;H++){var k=this.states[H];k!=null&&!this.isStateIgnored(k)&&(this.horizontal&&(B.call(this,k.getCenterX(),k,!0),B.call(this,k.x,k,!1),B.call(this,k.x+k.width,k,!1),k.cell==null&&B.call(this,k.getCenterX(),k,!1)),this.vertical&&(U.call(this,k.getCenterY(),k,!0),U.call(this,k.y,k,!1),U.call(this,k.y+k.height,k,!1),k.cell==null&&U.call(this,k.getCenterY(),k,!1)))}this.graph.snapDelta(e,t,!i,a,d),e=this.getDelta(t,o,e.x,p,e.y);var K=this.graph.container;if(!a&&this.guideX!=null)this.guideX.node.style.visibility="hidden";else if(this.guideX!=null){var Q=null,nt=null;o!=null&&t!=null&&(Q=Math.min(t.y+e.y-this.graph.panDy,o.y),nt=Math.max(t.y+t.height+e.y-this.graph.panDy,o.y+o.height)),Q!=null&&nt!=null?this.guideX.points=[new mxPoint$1(u,Q),new mxPoint$1(u,nt)]:this.guideX.points=[new mxPoint$1(u,-this.graph.panDy),new mxPoint$1(u,K.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(o,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}if(!d&&this.guideY!=null)this.guideY.node.style.visibility="hidden";else if(this.guideY!=null){var dt=null,mt=null;p!=null&&t!=null&&(dt=Math.min(t.x+e.x-this.graph.panDx,p.x),mt=Math.max(t.x+t.width+e.x-this.graph.panDx,p.x+p.width)),dt!=null&&mt!=null?this.guideY.points=[new mxPoint$1(dt,c),new mxPoint$1(mt,c)]:this.guideY.points=[new mxPoint$1(-this.graph.panDx,c),new mxPoint$1(K.scrollWidth-3-this.graph.panDx,c)],this.guideY.stroke=this.getGuideColor(p,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}return e};mxGuide$1.prototype.getDelta=function(t,e,i,n,r){var l=this.graph.view.scale;return(this.rounded||e!=null&&e.cell==null)&&(i=Math.round((t.x+i)/l)*l-t.x),(this.rounded||n!=null&&n.cell==null)&&(r=Math.round((t.y+r)/l)*l-t.y),new mxPoint$1(i,r)};mxGuide$1.prototype.getGuideColor=function(t,e){return mxConstants$1.GUIDE_COLOR};mxGuide$1.prototype.hide=function(){this.setVisible(!1)};mxGuide$1.prototype.setVisible=function(t){this.guideX!=null&&(this.guideX.node.style.visibility=t?"visible":"hidden"),this.guideY!=null&&(this.guideY.node.style.visibility=t?"visible":"hidden")};mxGuide$1.prototype.destroy=function(){this.guideX!=null&&(this.guideX.destroy(),this.guideX=null),this.guideY!=null&&(this.guideY.destroy(),this.guideY=null)};function mxGraphHandler(t){this.graph=t,this.graph.addMouseListener(this),this.panHandler=mxUtils$1.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent$1.PAN,this.panHandler),this.escapeHandler=mxUtils$1.bind(this,function(e,i){this.reset()}),this.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils$1.bind(this,function(e,i){this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(mxUtils$1.bind(this,function(){if(this.refreshThread=null,this.first!=null&&!this.suspended){var n=this.currentDx,r=this.currentDy;this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.pBounds==null&&!this.livePreviewUsed?this.reset():(this.currentDx=n,this.currentDy=r,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1,!0),this.updatePreview()))}}),0)}),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.graph.addListener(mxEvent$1.REFRESH,this.refreshHandler),this.keyHandler=mxUtils$1.bind(this,function(e){if(this.graph.container!=null&&this.graph.container.style.visibility!="hidden"&&this.first!=null&&!this.suspended){var i=this.graph.isCloneEvent(e)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();i!=this.cloning&&(this.cloning=i,this.checkPreview(),this.updatePreview())}}),mxEvent$1.addListener(document,"keydown",this.keyHandler),mxEvent$1.addListener(document,"keyup",this.keyHandler)}mxGraphHandler.prototype.graph=null;mxGraphHandler.prototype.maxCells=mxClient$1.IS_IE?20:50;mxGraphHandler.prototype.enabled=!0;mxGraphHandler.prototype.highlightEnabled=!0;mxGraphHandler.prototype.cloneEnabled=!0;mxGraphHandler.prototype.moveEnabled=!0;mxGraphHandler.prototype.guidesEnabled=!1;mxGraphHandler.prototype.handlesVisible=!0;mxGraphHandler.prototype.guide=null;mxGraphHandler.prototype.currentDx=null;mxGraphHandler.prototype.currentDy=null;mxGraphHandler.prototype.updateCursor=!0;mxGraphHandler.prototype.selectEnabled=!0;mxGraphHandler.prototype.removeCellsFromParent=!0;mxGraphHandler.prototype.removeEmptyParents=!1;mxGraphHandler.prototype.connectOnDrop=!1;mxGraphHandler.prototype.scrollOnMove=!0;mxGraphHandler.prototype.minimumSize=6;mxGraphHandler.prototype.previewColor="black";mxGraphHandler.prototype.htmlPreview=!1;mxGraphHandler.prototype.shape=null;mxGraphHandler.prototype.scaleGrid=!1;mxGraphHandler.prototype.rotationEnabled=!0;mxGraphHandler.prototype.maxLivePreview=0;mxGraphHandler.prototype.allowLivePreview=mxClient$1.IS_SVG;mxGraphHandler.prototype.isEnabled=function(){return this.enabled};mxGraphHandler.prototype.setEnabled=function(t){this.enabled=t};mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled};mxGraphHandler.prototype.setCloneEnabled=function(t){this.cloneEnabled=t};mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled};mxGraphHandler.prototype.setMoveEnabled=function(t){this.moveEnabled=t};mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled};mxGraphHandler.prototype.setSelectEnabled=function(t){this.selectEnabled=t};mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent};mxGraphHandler.prototype.setRemoveCellsFromParent=function(t){this.removeCellsFromParent=t};mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,i){var n=this.graph.model.getParent(t);if(e){var r=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t);return!this.graph.isSiblingSelected(t)&&(r!=null&&r.relative||!this.graph.isSwimlane(n))}else return(!this.graph.isToggleEvent(i.getEvent())||!this.graph.isSiblingSelected(t)&&!this.graph.isCellSelected(t)&&!this.graph.isSwimlane(n)||this.graph.isCellSelected(n))&&(this.graph.isToggleEvent(i.getEvent())||!this.graph.isCellSelected(n))};mxGraphHandler.prototype.getInitialCellForEvent=function(t){var e=t.getState();if((!this.graph.isToggleEvent(t.getEvent())||!mxEvent$1.isAltDown(t.getEvent()))&&e!=null&&!this.graph.isCellSelected(e.cell))for(var i=this.graph.model,n=this.graph.view.getState(i.getParent(e.cell));n!=null&&!this.graph.isCellSelected(n.cell)&&(i.isVertex(n.cell)||i.isEdge(n.cell))&&this.isPropagateSelectionCell(e.cell,!0,t)&&n.cell!=this.graph.getCurrentRoot();)e=n,n=this.graph.view.getState(this.graph.getModel().getParent(e.cell));return e!=null?e.cell:null};mxGraphHandler.prototype.isDelayedSelection=function(t,e){if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent$1.isAltDown(e.getEvent()))for(;t!=null;){if(this.graph.selectionCellsHandler.isHandled(t))return this.graph.cellEditor.getEditingCell()!=t;t=this.graph.model.getParent(t)}return this.graph.isToggleEvent(e.getEvent())};mxGraphHandler.prototype.selectDelayed=function(t){if(!this.graph.popupMenuHandler.isPopupTrigger(t)){var e=t.getCell();e==null&&(e=this.cell),this.selectCellForEvent(e,t)}};mxGraphHandler.prototype.selectCellForEvent=function(t,e){var i=this.graph.view.getState(t);if(i!=null)if(e.isSource(i.control))this.graph.selectCellForEvent(t,e.getEvent());else{if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent$1.isAltDown(e.getEvent()))for(var n=this.graph.getModel(),r=n.getParent(t);this.graph.view.getState(r)!=null&&(n.isVertex(r)||n.isEdge(r)&&!this.graph.isToggleEvent(e.getEvent()))&&this.isPropagateSelectionCell(t,!1,e)&&r!=this.graph.getCurrentRoot();)t=r,r=n.getParent(t);this.graph.selectCellForEvent(t,e.getEvent())}return t};mxGraphHandler.prototype.consumeMouseEvent=function(t,e){e.consume()};mxGraphHandler.prototype.mouseDown=function(t,e){this.mouseDownX=e.getX(),this.mouseDownY=e.getY();var i=e.getEvent(),n=mxEvent$1.isAltDown(i)&&mxEvent$1.isShiftDown(i)&&!this.graph.isSelectionEmpty();if(!e.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&(e.getState()!=null||n)&&!mxEvent$1.isMultiTouchEvent(i)){var r=this.getInitialCellForEvent(e);this.delayedSelection=this.isDelayedSelection(r,e),this.cell=null,r==null&&n&&(r=this.graph.getSelectionCell());var l=this.graph.getSelectionCount();this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(r,i),mxEvent$1.isTouchEvent(e.getEvent())&&this.graph.isCellSelected(r)&&l>0&&(this.blockDelayedSelection=!0,this.delayedSelection=!0),this.isMoveEnabled()&&(this.delayedSelection?this.cell=r:this.start(r,e.getX(),e.getY()),this.cellWasClicked=!0,this.graph.isCellLocked(r)||this.consumeMouseEvent(mxEvent$1.MOUSE_DOWN,e))}};mxGraphHandler.prototype.getGuideStates=function(){var t=this.graph.getDefaultParent(),e=this.graph.getModel(),i=mxUtils$1.bind(this,function(n){return this.graph.view.getState(n)!=null&&e.isVertex(n)&&e.getGeometry(n)!=null&&!e.getGeometry(n).relative});return this.graph.view.getCellStates(e.filterDescendants(i,t))};mxGraphHandler.prototype.getCells=function(t,e){if(e==null&&!this.delayedSelection&&this.graph.isCellMovable(t))return[this.graph.getCompositeParent(t)];e=e??this.graph.getSelectionCells();for(var i=new mxDictionary$1,n=[],r=0;r<e.length;r++){var l=this.graph.getCompositeParent(e[r]);i.get(l)==null&&(i.put(l,!0),n.push(l))}for(var s=[],r=0;r<n.length;r++){for(var a=this.graph.model.getParent(n[r]);i.get(a)==null&&a!=null;)a=this.graph.model.getParent(a);a==null&&s.push(n[r])}return this.graph.getMovableCells(s)};mxGraphHandler.prototype.getPreviewBounds=function(t){var e=this.getBoundingBox(t);if(e!=null){if(e.width=Math.max(0,e.width-1),e.height=Math.max(0,e.height-1),e.width<this.minimumSize){var i=this.minimumSize-e.width;e.x-=i/2,e.width=this.minimumSize}else e.x=Math.round(e.x),e.width=Math.ceil(e.width);if(this.graph.view.translate,this.graph.view.scale,e.height<this.minimumSize){var n=this.minimumSize-e.height;e.y-=n/2,e.height=this.minimumSize}else e.y=Math.round(e.y),e.height=Math.ceil(e.height)}return e};mxGraphHandler.prototype.getBoundingBox=function(t){var e=null;if(t!=null&&t.length>0){for(var i=this.graph.getModel(),n=0;n<t.length;n++)if(i.isVertex(t[n])||i.isEdge(t[n])){var r=this.graph.view.getState(t[n]);if(r!=null){var l=r;i.isVertex(t[n])&&r.shape!=null&&r.shape.boundingBox!=null&&(l=r.shape.boundingBox),e==null?e=mxRectangle$1.fromRectangle(l):e.add(l)}}}return e};mxGraphHandler.prototype.createPreviewShape=function(t){var e=new mxRectangleShape$1(t,null,this.previewColor);return e.isDashed=!0,this.htmlPreview?(e.dialect=mxConstants$1.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=mxConstants$1.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),e.pointerEvents=!1,mxClient$1.IS_IOS&&(e.getSvgScreenOffset=function(){return 0})),e};mxGraphHandler.prototype.start=function(t,e,i,n){var r=this.graph.model,l=r.getGeometry(t);if(this.first==null&&this.graph.isCellMovable(t)&&(!r.isEdge(t)||this.graph.getSelectionCount()>1||l.points!=null&&l.points.length>0||r.getTerminal(t,!0)==null||r.getTerminal(t,!1)==null||this.graph.allowDanglingEdges)){this.cell=t,this.first=mxUtils$1.convertPoint(this.graph.container,e,i),this.cells=n??this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary$1,this.cloning=!1,this.cellCount=0;for(var s=0;s<this.cells.length;s++)this.cellCount+=this.addStates(this.cells[s],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide$1(this.graph,this.getGuideStates());for(var a=this.graph.model.getParent(t),o=this.graph.model.getChildCount(a)<2,u=new mxDictionary$1,d=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell),s=0;s<d.length;s++){var p=this.graph.view.getState(d[s]);p!=null&&!u.get(p)&&u.put(p,!0)}this.guide.isStateIgnored=mxUtils$1.bind(this,function(c){var g=this.graph.model.getParent(c.cell);return c.cell!=null&&(!this.cloning&&this.isCellMoving(c.cell)||c.cell!=(this.target||a)&&!o&&!u.get(c)&&(this.target==null||this.graph.model.getChildCount(this.target)>=2)&&g!=(this.target||a))})}}};mxGraphHandler.prototype.addStates=function(t,e){var i=this.graph.view.getState(t),n=0;if(i!=null&&e.get(t)==null){e.put(t,i),n++;for(var r=this.graph.model.getChildCount(t),l=0;l<r;l++)n+=this.addStates(this.graph.model.getChildAt(t,l),e)}return n};mxGraphHandler.prototype.isCellMoving=function(t){return this.allCells.get(t)!=null};mxGraphHandler.prototype.useGuidesForEvent=function(t){return this.guide!=null?this.guide.isEnabledForEvent(t.getEvent())&&!this.isConstrainedEvent(t):!0};mxGraphHandler.prototype.snap=function(t){var e=this.scaleGrid?this.graph.view.scale:1;return t.x=this.graph.snap(t.x/e)*e,t.y=this.graph.snap(t.y/e)*e,t};mxGraphHandler.prototype.getDelta=function(t){var e=mxUtils$1.convertPoint(this.graph.container,t.getX(),t.getY());return new mxPoint$1(e.x-this.first.x-this.graph.panDx,e.y-this.first.y-this.graph.panDy)};mxGraphHandler.prototype.updateHint=function(t){};mxGraphHandler.prototype.removeHint=function(){};mxGraphHandler.prototype.roundLength=function(t){return Math.round(t*100)/100};mxGraphHandler.prototype.isValidDropTarget=function(t,e){for(var i=0;i<this.cells.length;i++)if(this.graph.model.getParent(this.cells[i])!=t)return!0;return!1};mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?(!this.cloning||!this.livePreviewActive)&&(this.livePreviewActive=!0,this.livePreviewUsed=!0):!this.livePreviewUsed&&this.shape==null&&(this.shape=this.createPreviewShape(this.bounds))};mxGraphHandler.prototype.mouseMove=function(t,e){var i=this.graph,n=i.tolerance;if(this.first==null&&this.delayedSelection&&this.cell!=null&&this.mouseDownX!=null&&this.mouseDownY!=null&&(Math.abs(this.mouseDownX-e.getX())>n||Math.abs(this.mouseDownY-e.getY())>n)){this.delayedSelection=!1,this.cellWasClicked=!0,!this.graph.isCellSelected(this.cell)&&!mxEvent$1.isAltDown(e.getEvent())&&(this.graph.isToggleEvent(e.getEvent())?i.addSelectionCell(this.cell):this.graph.isAncestorSelected(this.cell)||i.setSelectionCell(this.cell));var r=i.getSelectionCells();(!this.graph.isToggleEvent(e.getEvent())||!mxEvent$1.isAltDown(e.getEvent())||i.isSelectionEmpty())&&(r=r.concat(this.cell)),this.start(this.cell,this.mouseDownX,this.mouseDownY,this.getCells(null,r))}var l=this.first!=null?this.getDelta(e):null;if(!e.isConsumed()&&i.isMouseDown&&this.cell!=null&&l!=null&&this.bounds!=null&&!this.suspended){if(mxEvent$1.isMultiTouchEvent(e.getEvent())){this.reset();return}if(this.shape!=null||this.livePreviewActive||this.cloning||Math.abs(l.x)>n||Math.abs(l.y)>n){this.highlight==null&&(this.highlight=new mxCellHighlight$1(this.graph,mxConstants$1.DROP_TARGET_COLOR,3));var s=i.isCloneEvent(e.getEvent())&&i.isCellsCloneable()&&this.isCloneEnabled(),a=i.isGridEnabledEvent(e.getEvent()),o=e.getCell();o=o!=null&&mxUtils$1.indexOf(this.cells,o)<0?o:i.getCellAt(e.getGraphX(),e.getGraphY(),null,null,null,mxUtils$1.bind(this,function(T,A,R){return mxUtils$1.indexOf(this.cells,T.cell)>=0}));var u=!0,d=null;this.cloning=s,i.isDropEnabled()&&this.highlightEnabled&&(d=i.getDropTarget(this.cells,e.getEvent(),o,s));var p=i.getView().getState(d),c=!1;if(p!=null&&(s||this.isValidDropTarget(d,e)))this.target!=d&&(this.target=d,this.setHighlightColor(mxConstants$1.DROP_TARGET_COLOR)),c=!0;else if(this.target=null,this.connectOnDrop&&o!=null&&this.cells.length==1&&i.getModel().isVertex(o)&&i.isCellConnectable(o)&&(p=i.getView().getState(o),p!=null)){var g=i.getEdgeValidationError(null,this.cell,o),x=g==null?mxConstants$1.VALID_COLOR:mxConstants$1.INVALID_CONNECT_TARGET_COLOR;this.setHighlightColor(x),c=!0}p!=null&&c?this.highlight.highlight(p):this.highlight.hide(),this.guide!=null&&this.useGuidesForEvent(e)?(l=this.guide.move(this.bounds,l,a,s),u=!1):l=i.snapDelta(l,this.bounds,!a,!1,!1),this.guide!=null&&u&&this.guide.hide(),this.isConstrainedEvent(e)&&(Math.abs(l.x)>Math.abs(l.y)?l.y=0:l.x=0),this.checkPreview(),(this.currentDx!=l.x||this.currentDy!=l.y)&&(this.currentDx=l.x,this.currentDy=l.y,this.updatePreview())}this.updateHint(e),this.consumeMouseEvent(mxEvent$1.MOUSE_MOVE,e),mxEvent$1.consume(e.getEvent())}else if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!e.isConsumed()&&(e.getState()!=null||e.sourceState!=null)&&!i.isMouseDown){var C=i.getCursorForMouseEvent(e);C==null&&i.isEnabled()&&i.isCellMovable(e.getCell())&&(i.getModel().isEdge(e.getCell())?C=mxConstants$1.CURSOR_MOVABLE_EDGE:C=mxConstants$1.CURSOR_MOVABLE_VERTEX),C!=null&&e.sourceState!=null&&e.sourceState.setCursor(C)}};mxGraphHandler.prototype.isConstrainedEvent=function(t){return(this.target==null||this.graph.isCloneEvent(t.getEvent()))&&this.graph.isConstrainedEvent(t.getEvent())};mxGraphHandler.prototype.updatePreview=function(t){this.livePreviewUsed&&!t?this.cells!=null&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()};mxGraphHandler.prototype.updatePreviewShape=function(){this.shape!=null&&this.pBounds!=null&&(this.shape.bounds=new mxRectangle$1(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())};mxGraphHandler.prototype.updateLivePreview=function(t,e){if(!this.suspended){var i=[];if(this.allCells!=null&&this.allCells.visit(mxUtils$1.bind(this,function(x,C){var T=this.graph.view.getState(C.cell);if(T!=C&&(C.destroy(),T!=null?this.allCells.put(C.cell,T):this.allCells.remove(C.cell),C=T),C!=null){var A=C.clone();i.push([C,A]),C.shape!=null&&(C.shape.originalPointerEvents==null&&(C.shape.originalPointerEvents=C.shape.pointerEvents),C.shape.pointerEvents=!1,C.text!=null&&(C.text.originalPointerEvents==null&&(C.text.originalPointerEvents=C.text.pointerEvents),C.text.pointerEvents=!1)),this.graph.model.isVertex(C.cell)&&((!this.cloning||this.graph.isCellCloneable(C.cell))&&(C.x+=t,C.y+=e),this.cloning?C.text!=null&&(C.text.updateBoundingBox(),C.text.boundingBox!=null&&(C.text.boundingBox.x+=t,C.text.boundingBox.y+=e),C.text.unrotatedBoundingBox!=null&&(C.text.unrotatedBoundingBox.x+=t,C.text.unrotatedBoundingBox.y+=e)):(C.view.graph.cellRenderer.redraw(C,!0),C.view.invalidate(C.cell),C.invalid=!1,C.control!=null&&C.control.node!=null&&(C.control.node.style.visibility="hidden")))}})),i.length==0)this.reset();else{for(var n=this.graph.view.scale,r=0;r<i.length;r++){var l=i[r][0];if(this.graph.model.isEdge(l.cell)&&(!this.cloning||this.graph.isCellCloneable(l.cell))){var s=this.graph.getCellGeometry(l.cell),a=[];if(s!=null&&s.points!=null)for(var o=0;o<s.points.length;o++)s.points[o]!=null&&a.push(new mxPoint$1(s.points[o].x+t/n,s.points[o].y+e/n));var u=l.visibleSourceState,d=l.visibleTargetState,p=i[r][1].absolutePoints;if(u==null||!this.isCellMoving(u.cell)){var c=p[0];l.setAbsoluteTerminalPoint(new mxPoint$1(c.x+t,c.y+e),!0),u=null}else l.view.updateFixedTerminalPoint(l,u,!0,this.graph.getConnectionConstraint(l,u,!0));if(d==null||!this.isCellMoving(d.cell)){var g=p[p.length-1];l.setAbsoluteTerminalPoint(new mxPoint$1(g.x+t,g.y+e),!1),d=null}else l.view.updateFixedTerminalPoint(l,d,!1,this.graph.getConnectionConstraint(l,d,!1));l.view.updatePoints(l,a,u,d),l.view.updateFloatingTerminalPoints(l,u,d),l.view.updateEdgeLabelOffset(l),l.invalid=!1,this.cloning||l.view.graph.cellRenderer.redraw(l,!0)}}this.graph.view.validate(),this.redrawHandles(i),this.resetPreviewStates(i)}}};mxGraphHandler.prototype.redrawHandles=function(t){for(var e=0;e<t.length;e++){var i=this.graph.selectionCellsHandler.getHandler(t[e][0].cell);i!=null&&i.redraw(!0)}};mxGraphHandler.prototype.resetPreviewStates=function(t){for(var e=0;e<t.length;e++)t[e][0].setState(t[e][1])};mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),this.shape!=null&&(this.shape.node.style.visibility="hidden"),this.guide!=null&&this.guide.setVisible(!1),this.suspended=!0)};mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),this.shape!=null&&(this.shape.node.style.visibility="visible"),this.guide!=null&&this.guide.setVisible(!0))};mxGraphHandler.prototype.resetLivePreview=function(){this.allCells!=null&&(this.allCells.visit(mxUtils$1.bind(this,function(t,e){e.shape!=null&&e.shape.originalPointerEvents!=null&&(e.shape.pointerEvents=e.shape.originalPointerEvents,e.shape.originalPointerEvents=null,e.shape.bounds=null,e.text!=null&&(e.text.pointerEvents=e.text.originalPointerEvents,e.text.originalPointerEvents=null)),e.control!=null&&e.control.node!=null&&e.control.node.style.visibility=="hidden"&&(e.control.node.style.visibility=""),this.cloning||e.text!=null&&e.text.updateBoundingBox(),e.view.invalidate(e.cell)})),this.graph.view.validate())};mxGraphHandler.prototype.setHandlesVisibleForCells=function(t,e,i){if(i||this.handlesVisible!=e){this.handlesVisible=e;for(var n=0;n<t.length;n++){var r=this.graph.selectionCellsHandler.getHandler(t[n]);r!=null&&(r.setHandlesVisible(e),e&&r.redraw())}}};mxGraphHandler.prototype.setHighlightColor=function(t){this.highlight!=null&&this.highlight.setHighlightColor(t)};mxGraphHandler.prototype.mouseUp=function(t,e){if(!e.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),this.cell!=null&&this.first!=null&&this.currentDx!=null&&this.currentDy!=null&&(this.shape!=null||this.livePreviewUsed||this.cloning)){var i=this.graph,n=e.getCell();if(this.connectOnDrop&&this.target==null&&n!=null&&i.getModel().isVertex(n)&&i.isCellConnectable(n)&&i.isEdgeValid(null,this.cell,n))i.connectionHandler.connect(this.cell,n,e.getEvent());else{var r=i.getView().scale,l=this.roundLength(this.currentDx/r),s=this.roundLength(this.currentDy/r),a=this.target;i.isSplitEnabled()&&i.isSplitTarget(a,this.cells,e.getEvent())?i.splitEdge(a,this.cells,null,l,s,e.getGraphX(),e.getGraphY()):this.moveCells(this.cells,l,s,this.cloning,this.target,e.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&!this.blockDelayedSelection&&this.cell!=null&&this.selectDelayed(e);this.cellWasClicked&&this.consumeMouseEvent(mxEvent$1.MOUSE_UP,e),this.reset()};mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.blockDelayedSelection=!1,this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null};mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,i){if(this.graph.getModel().isVertex(t)){var n=this.graph.getView().getState(t);if(n!=null){var r=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(i),mxEvent$1.getClientY(i)),l=mxUtils$1.toRadians(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ROTATION)||0);if(l!=0){var s=Math.cos(-l),a=Math.sin(-l),o=new mxPoint$1(n.getCenterX(),n.getCenterY());r=mxUtils$1.getRotatedPoint(r,s,a,o)}return!mxUtils$1.contains(n,r.x,r.y)}}return!1};mxGraphHandler.prototype.moveCells=function(t,e,i,n,r,l){n&&(t=this.graph.getCloneableCells(t));var s=this.graph.getModel().getParent(this.cell);!this.graph.isCellSelected(this.cell)&&this.graph.isCellSelected(s)&&(s=this.graph.getModel().getParent(s)),r==null&&l!=null&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(s,t,l)&&(r=this.graph.getDefaultParent()),n=n&&!this.graph.isCellLocked(r||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var a=[];if(!n&&r!=null&&this.removeEmptyParents){for(var o=new mxDictionary$1,u=0;u<t.length;u++)o.put(t[u],!0);for(var u=0;u<t.length;u++){var d=this.graph.model.getParent(t[u]);d!=null&&!o.get(d)&&(o.put(d,!0),a.push(d))}}t=this.graph.moveCells(t,e,i,n,r,l);for(var p=[],u=0;u<a.length;u++)this.shouldRemoveParent(a[u])&&p.push(a[u]);this.graph.removeCells(p,!1)}finally{this.graph.getModel().endUpdate()}n&&this.graph.setSelectionCells(t),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(t[0])};mxGraphHandler.prototype.shouldRemoveParent=function(t){var e=this.graph.view.getState(t);return e!=null&&(this.graph.model.isEdge(e.cell)||this.graph.model.isVertex(e.cell))&&this.graph.isCellDeletable(e.cell)&&this.graph.model.getChildCount(e.cell)==0&&this.graph.isTransparentState(e)};mxGraphHandler.prototype.destroyShapes=function(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.guide!=null&&(this.guide.destroy(),this.guide=null),this.highlight!=null&&(this.highlight.destroy(),this.highlight=null)};mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),this.escapeHandler!=null&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.refreshHandler!=null&&(this.graph.getModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent$1.removeListener(document,"keydown",this.keyHandler),mxEvent$1.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()};function mxEllipse(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxEllipse,mxShape$1);mxEllipse.prototype.paintVertexShape=function(t,e,i,n,r){t.ellipse(e,i,n,r),t.fillAndStroke()};function mxVertexHandler$1(t){t!=null&&(this.state=t,this.init(),this.escapeHandler=mxUtils$1.bind(this,function(e,i){this.livePreview&&this.index!=null&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}mxVertexHandler$1.prototype.graph=null;mxVertexHandler$1.prototype.state=null;mxVertexHandler$1.prototype.singleSizer=!1;mxVertexHandler$1.prototype.index=null;mxVertexHandler$1.prototype.allowHandleBoundsCheck=!0;mxVertexHandler$1.prototype.handleImage=null;mxVertexHandler$1.prototype.handlesVisible=!0;mxVertexHandler$1.prototype.tolerance=0;mxVertexHandler$1.prototype.rotationEnabled=!1;mxVertexHandler$1.prototype.parentHighlightEnabled=!1;mxVertexHandler$1.prototype.rotationRaster=!0;mxVertexHandler$1.prototype.rotationCursor="crosshair";mxVertexHandler$1.prototype.livePreview=!1;mxVertexHandler$1.prototype.movePreviewToFront=!1;mxVertexHandler$1.prototype.manageSizers=!1;mxVertexHandler$1.prototype.constrainGroupByChildren=!1;mxVertexHandler$1.prototype.rotationHandleVSpacing=-16;mxVertexHandler$1.prototype.horizontalOffset=0;mxVertexHandler$1.prototype.verticalOffset=0;mxVertexHandler$1.prototype.init=function(){this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle$1(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=mxConstants$1.DIALECT_SVG,this.selectionBorder.svgStrokeTolerance=0,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellLocked(this.state.cell)&&this.selectionBorder.setCursor(mxConstants$1.CURSOR_MOVABLE_VERTEX),this.refresh(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()};mxVertexHandler$1.prototype.isHandlesVisible=function(){return!this.graph.isCellLocked(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<=mxGraphHandler.prototype.maxCells)};mxVertexHandler$1.prototype.refresh=function(){this.selectionBorder!=null&&(this.selectionBorder.strokewidth=this.getSelectionStrokeWidth(),this.selectionBorder.isDashed=this.isSelectionDashed(),this.selectionBorder.stroke=this.getSelectionColor(),this.selectionBorder.redraw()),this.sizers!=null&&this.destroySizers(),this.isHandlesVisible()&&(this.sizers=this.createSizers()),this.customHandles!=null&&this.destroyCustomHandles(),this.isHandlesVisible()&&(this.customHandles=this.createCustomHandles())};mxVertexHandler$1.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)};mxVertexHandler$1.prototype.isConstrainedEvent=function(t){return mxEvent$1.isShiftDown(t.getEvent())||this.state.style[mxConstants$1.STYLE_ASPECT]=="fixed"};mxVertexHandler$1.prototype.isCenteredEvent=function(t,e){return!1};mxVertexHandler$1.prototype.createCustomHandles=function(){return null};mxVertexHandler$1.prototype.updateMinBounds=function(){var t=this.graph.getChildCells(this.state.cell);if(t.length>0&&(this.minBounds=this.graph.view.getBounds(t),this.minBounds!=null)){var e=this.state.view.scale,i=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=e,this.minBounds.y/=e,this.minBounds.width/=e,this.minBounds.height/=e,this.x0=this.state.x/e-i.x,this.y0=this.state.y/e-i.y}};mxVertexHandler$1.prototype.getSelectionBounds=function(t){return new mxRectangle$1(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height))};mxVertexHandler$1.prototype.createParentHighlightShape=function(t){return this.createSelectionShape(t)};mxVertexHandler$1.prototype.createSelectionShape=function(t){var e=new mxRectangleShape$1(mxRectangle$1.fromRectangle(t),null,this.getSelectionColor());return e.strokewidth=this.getSelectionStrokeWidth(),e.isDashed=this.isSelectionDashed(),e};mxVertexHandler$1.prototype.getSelectionColor=function(){return this.graph.isCellEditable(this.state.cell)?mxConstants$1.VERTEX_SELECTION_COLOR:mxConstants$1.LOCKED_HANDLE_FILLCOLOR};mxVertexHandler$1.prototype.getSelectionStrokeWidth=function(){return mxConstants$1.VERTEX_SELECTION_STROKEWIDTH};mxVertexHandler$1.prototype.isSelectionDashed=function(){return mxConstants$1.VERTEX_SELECTION_DASHED};mxVertexHandler$1.prototype.createSizer=function(t,e,i,n){i=i||mxConstants$1.HANDLE_SIZE;var r=new mxRectangle$1(0,0,i,i),l=this.createSizerShape(r,e,n,this.handleImage);return l.isHtmlAllowed()&&this.state.text!=null&&this.state.text.node.parentNode==this.graph.container?(l.bounds.height-=1,l.bounds.width-=1,l.dialect=mxConstants$1.DIALECT_STRICTHTML,l.init(this.graph.container)):(l.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,l.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(l.node,this.graph,this.state),this.graph.isEnabled()&&l.setCursor(t),this.isSizerVisible(e)||(l.visible=!1),l};mxVertexHandler$1.prototype.isSizerVisible=function(t){return!0};mxVertexHandler$1.prototype.createSizerShape=function(t,e,i,n){if(n!=null){t=new mxRectangle$1(t.x,t.y,n.width,n.height);var r=new mxImageShape$1(t,n.src);return r.preserveImageAspect=!1,r}else return e==mxEvent$1.ROTATION_HANDLE?new mxEllipse(t,i||mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR):new mxRectangleShape$1(t,i||mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)};mxVertexHandler$1.prototype.moveSizerTo=function(t,e,i){t!=null&&(t.bounds.x=Math.floor(e-t.bounds.width/2),t.bounds.y=Math.floor(i-t.bounds.height/2),t.node!=null&&t.node.style.display!="none"&&t.redraw())};mxVertexHandler$1.prototype.getHandleForEvent=function(t){var e=mxEvent$1.isMouseEvent(t.getEvent())?1:this.tolerance,i=this.allowHandleBoundsCheck&&(mxClient$1.IS_IE||e>0)?new mxRectangle$1(t.getGraphX()-e,t.getGraphY()-e,2*e,2*e):null,n=mxUtils$1.bind(this,function(l){var s=l!=null&&l.constructor!=mxImageShape$1&&this.allowHandleBoundsCheck?l.strokewidth+l.svgStrokeTolerance:null,a=s!=null?new mxRectangle$1(t.getGraphX()-Math.floor(s/2),t.getGraphY()-Math.floor(s/2),s,s):i;return l!=null&&(t.isSource(l)||l.intersectsRectangle(a))});if(n(this.rotationShape))return mxEvent$1.ROTATION_HANDLE;if(n(this.labelShape))return mxEvent$1.LABEL_HANDLE;if(this.sizers!=null){for(var r=0;r<this.sizers.length;r++)if(n(this.sizers[r]))return r}if(this.customHandles!=null&&this.isCustomHandleEvent(t)){for(var r=this.customHandles.length-1;r>=0;r--)if(this.customHandles[r]!=null&&n(this.customHandles[r].shape))return mxEvent$1.CUSTOM_HANDLE-r}return null};mxVertexHandler$1.prototype.isCustomHandleEvent=function(t){return!0};mxVertexHandler$1.prototype.mouseDown=function(t,e){if(!e.isConsumed()&&this.graph.isEnabled()&&(!mxEvent$1.isAltDown(e.getEvent())||!mxEvent$1.isShiftDown(e.getEvent()))){var i=this.getHandleForEvent(e);i!=null&&(this.start(e.getGraphX(),e.getGraphY(),i),e.consume())}};mxVertexHandler$1.prototype.isLivePreviewBorder=function(){return this.state.shape!=null&&this.state.shape.fill==null&&this.state.shape.stroke==null};mxVertexHandler$1.prototype.start=function(t,e,i){if(this.selectionBorder!=null)if(this.livePreviewActive=this.livePreview&&this.graph.model.getChildCount(this.state.cell)==0,this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=i,this.startX=t,this.startY=e,this.index<=mxEvent$1.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{var n=this.state.view.graph.model,r=n.getParent(this.state.cell);if(this.state.view.currentRoot!=r&&(n.isVertex(r)||n.isEdge(r))&&(this.parentState=this.state.view.graph.view.getState(r)),this.selectionBorder.node.style.display=i==mxEvent$1.ROTATION_HANDLE?"inline":"none",(!this.livePreviewActive||this.isLivePreviewBorder())&&(this.preview=this.createSelectionShape(this.bounds),!(mxClient$1.IS_SVG&&Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0")!=0)&&this.state.text!=null&&this.state.text.node.parentNode==this.graph.container?(this.preview.dialect=mxConstants$1.DIALECT_STRICTHTML,this.preview.init(this.graph.container)):(this.preview.dialect=mxConstants$1.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane()))),i==mxEvent$1.ROTATION_HANDLE){var l=this.getRotationHandlePosition(),s=l.x-this.state.getCenterX(),a=l.y-this.state.getCenterY();this.startAngle=s!=0?Math.atan(a/s)*180/Math.PI+90:0,this.startDist=Math.sqrt(s*s+a*a)}if(this.livePreviewActive){this.hideSizers(),i==mxEvent$1.ROTATION_HANDLE?this.rotationShape.node.style.display="":i==mxEvent$1.LABEL_HANDLE?this.labelShape.node.style.display="":this.sizers!=null&&this.sizers[i]!=null?this.sizers[i].node.style.display="":i<=mxEvent$1.CUSTOM_HANDLE&&this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-i]!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-i].setVisible(!0);var o=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var u=0;u<o.length;u++){var d=this.graph.selectionCellsHandler.getHandler(o[u]);d!=null&&this.edgeHandlers.push(d)}}}};mxVertexHandler$1.prototype.createGhostPreview=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.init(this.graph.view.getOverlayPane()),t.scale=this.state.view.scale,t.bounds=this.bounds,t.outline=!0,t};mxVertexHandler$1.prototype.setHandlesVisible=function(t){if(this.handlesVisible=t,this.sizers!=null)for(var e=0;e<this.sizers.length;e++)this.sizers[e].node.style.display=t?"":"none";if(this.customHandles!=null)for(var e=0;e<this.customHandles.length;e++)this.customHandles[e]!=null&&this.customHandles[e].setVisible(t)};mxVertexHandler$1.prototype.hideSizers=function(){this.setHandlesVisible(!1)};mxVertexHandler$1.prototype.checkTolerance=function(t){this.inTolerance&&this.startX!=null&&this.startY!=null&&(mxEvent$1.isMouseEvent(t.getEvent())||Math.abs(t.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(t.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)};mxVertexHandler$1.prototype.updateHint=function(t){};mxVertexHandler$1.prototype.removeHint=function(){};mxVertexHandler$1.prototype.roundAngle=function(t){return Math.round(t*10)/10};mxVertexHandler$1.prototype.roundLength=function(t){return Math.round(t*100)/100};mxVertexHandler$1.prototype.mouseMove=function(t,e){!e.isConsumed()&&this.index!=null?(this.checkTolerance(e),this.inTolerance||(this.index<=mxEvent$1.CUSTOM_HANDLE?this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index]!=null&&(this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].active=!0,this.ghostPreview!=null?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),this.selectionBounds!=null&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent$1.LABEL_HANDLE?this.moveLabel(e):(this.index==mxEvent$1.ROTATION_HANDLE?this.rotateVertex(e):this.resizeVertex(e),this.updateHint(e))),e.consume()):!this.graph.isMouseDown&&this.getHandleForEvent(e)!=null&&e.consume(!1)};mxVertexHandler$1.prototype.isGhostPreview=function(){return this.state.view.graph.model.getChildCount(this.state.cell)>0};mxVertexHandler$1.prototype.moveLabel=function(t){var e=new mxPoint$1(t.getGraphX(),t.getGraphY()),i=this.graph.view.translate,n=this.graph.view.scale;this.graph.isGridEnabledEvent(t.getEvent())&&(e.x=(this.graph.snap(e.x/n-i.x)+i.x)*n,e.y=(this.graph.snap(e.y/n-i.y)+i.y)*n);var r=this.rotationShape!=null?this.sizers.length-2:this.sizers.length-1;this.moveSizerTo(this.sizers[r],e.x,e.y)};mxVertexHandler$1.prototype.rotateVertex=function(t){var e=new mxPoint$1(t.getGraphX(),t.getGraphY()),i=this.state.x+this.state.width/2-e.x,n=this.state.y+this.state.height/2-e.y;if(this.currentAlpha=i!=0?Math.atan(n/i)*180/Math.PI+90:n<0?180:0,i>0&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(t.getEvent())){var i=e.x-this.state.getCenterX(),n=e.y-this.state.getCenterY(),r=Math.sqrt(i*i+n*n),l;r-this.startDist<2?l=15:r-this.startDist<25?l=5:l=1,this.currentAlpha=Math.round(this.currentAlpha/l)*l}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()};mxVertexHandler$1.prototype.resizeVertex=function(t){var e=new mxPoint$1(this.state.getCenterX(),this.state.getCenterY()),i=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),n=new mxPoint$1(t.getGraphX(),t.getGraphY()),r=this.graph.view.translate,l=this.graph.view.scale,s=Math.cos(-i),a=Math.sin(-i),T=n.x-this.startX,A=n.y-this.startY,o=s*T-a*A,u=a*T+s*A;T=o,A=u;var d=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(d,T/l,A/l,this.index,this.graph.isGridEnabledEvent(t.getEvent()),1,new mxPoint$1(0,0),this.isConstrainedEvent(t),this.isCenteredEvent(this.state,t)),!d.relative){var p=this.graph.getMaximumGraphBounds();if(p!=null&&this.parentState!=null&&(p=mxRectangle$1.fromRectangle(p),p.x-=(this.parentState.x-r.x*l)/l,p.y-=(this.parentState.y-r.y*l)/l),this.graph.isConstrainChild(this.state.cell)){var c=this.graph.getCellContainmentArea(this.state.cell);if(c!=null){var g=this.graph.getOverlap(this.state.cell);g>0&&(c=mxRectangle$1.fromRectangle(c),c.x-=c.width*g,c.y-=c.height*g,c.width+=2*c.width*g,c.height+=2*c.height*g),p==null?p=c:(p=mxRectangle$1.fromRectangle(p),p.intersect(c))}}p!=null&&(this.unscaledBounds.x<p.x&&(this.unscaledBounds.width-=p.x-this.unscaledBounds.x,this.unscaledBounds.x=p.x),this.unscaledBounds.y<p.y&&(this.unscaledBounds.height-=p.y-this.unscaledBounds.y,this.unscaledBounds.y=p.y),this.unscaledBounds.x+this.unscaledBounds.width>p.x+p.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-p.x-p.width),this.unscaledBounds.y+this.unscaledBounds.height>p.y+p.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-p.y-p.height))}var x=this.bounds;this.bounds=new mxRectangle$1((this.parentState!=null?this.parentState.x:r.x*l)+this.unscaledBounds.x*l,(this.parentState!=null?this.parentState.y:r.y*l)+this.unscaledBounds.y*l,this.unscaledBounds.width*l,this.unscaledBounds.height*l),d.relative&&this.parentState!=null&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),s=Math.cos(i),a=Math.sin(i);var C=new mxPoint$1(this.bounds.getCenterX(),this.bounds.getCenterY()),T=C.x-e.x,A=C.y-e.y,R=s*T-a*A,_=a*T+s*A,N=R-T,H=_-A,k=this.bounds.x-this.state.x,K=this.bounds.y-this.state.y,Q=s*k-a*K,nt=a*k+s*K;this.bounds.x+=N,this.bounds.y+=H,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+N/l),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+H/l),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),!this.graph.isCellCollapsed(this.state.cell)&&(N!=0||H!=0)?(this.childOffsetX=this.state.x-this.bounds.x+Q,this.childOffsetY=this.state.y-this.bounds.y+nt):(this.childOffsetX=0,this.childOffsetY=0),x.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(t),this.preview!=null?this.drawPreview():this.updateParentHighlight())};mxVertexHandler$1.prototype.updateLivePreview=function(t){var e=this.graph.view.scale,i=this.graph.view.translate,n=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint$1(this.state.x/e-i.x,this.state.y/e-i.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height;var r=this.state.absoluteOffset;r=new mxPoint$1(r.x,r.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var l=this.graph.getCellGeometry(this.state.cell);if(l!=null){var s=l.offset||this.EMPTY_POINT;s!=null&&!l.relative&&(this.state.absoluteOffset.x=this.state.view.scale*s.x,this.state.absoluteOffset.y=this.state.view.scale*s.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="hidden"),this.state.setState(n)};mxVertexHandler$1.prototype.moveToFront=function(){(this.state.text!=null&&this.state.text.node!=null&&this.state.text.node.nextSibling!=null||this.state.shape!=null&&this.state.shape.node!=null&&this.state.shape.node.nextSibling!=null&&(this.state.text==null||this.state.shape.node.nextSibling!=this.state.text.node))&&(this.state.shape!=null&&this.state.shape.node!=null&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),this.state.text!=null&&this.state.text.node!=null&&this.state.text.node.parentNode.appendChild(this.state.text.node))};mxVertexHandler$1.prototype.mouseUp=function(t,e){if(this.index!=null&&this.state!=null){var i=new mxPoint$1(e.getGraphX(),e.getGraphY()),n=this.index;this.index=null,this.ghostPreview==null&&this.state.view.invalidate(this.state.cell,!1,!1),this.graph.getModel().beginUpdate();try{if(n<=mxEvent$1.CUSTOM_HANDLE){if(this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-n]!=null){var r=this.state.view.graph.getCellStyle(this.state.cell);this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].active=!1,this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].execute(e),this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-n]!=null&&(this.state.style=r,this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].positionChanged())}}else if(n==mxEvent$1.ROTATION_HANDLE)if(this.currentAlpha!=null){var l=this.currentAlpha-(this.state.style[mxConstants$1.STYLE_ROTATION]||0);l!=0&&this.rotateCell(this.state.cell,l)}else this.rotateClick();else{var s=this.graph.isGridEnabledEvent(e.getEvent()),a=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),o=Math.cos(-a),u=Math.sin(-a),d=i.x-this.startX,p=i.y-this.startY,c=o*d-u*p,g=u*d+o*p;d=c,p=g;var x=this.graph.view.scale,C=this.isRecursiveResize(this.state,e);this.resizeCell(this.state.cell,this.roundLength(d/x),this.roundLength(p/x),n,s,this.isConstrainedEvent(e),C)}}finally{this.graph.getModel().endUpdate()}this.state.invalid&&this.state.view.validate(),e.consume(),this.reset(),this.redrawHandles()}};mxVertexHandler$1.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveResize(this.state)};mxVertexHandler$1.prototype.rotateClick=function(){};mxVertexHandler$1.prototype.rotateCell=function(t,e,i){if(e!=0){var n=this.graph.getModel();if(n.isVertex(t)||n.isEdge(t)){if(!n.isEdge(t)){var r=this.graph.getCurrentCellStyle(t),l=(r[mxConstants$1.STYLE_ROTATION]||0)+e;this.graph.setCellStyles(mxConstants$1.STYLE_ROTATION,l,[t])}var s=this.graph.getCellGeometry(t);if(s!=null){var a=this.graph.getCellGeometry(i);if(a!=null&&!n.isEdge(i)&&(s=s.clone(),s.rotate(e,new mxPoint$1(a.width/2,a.height/2)),n.setGeometry(t,s)),n.isVertex(t)&&!s.relative||n.isEdge(t))for(var o=n.getChildCount(t),u=0;u<o;u++)this.rotateCell(n.getChildAt(t,u),e,t)}}}};mxVertexHandler$1.prototype.reset=function(){if(this.sizers!=null&&this.index!=null&&this.sizers[this.index]!=null&&this.sizers[this.index].node.style.display=="none"&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,this.preview!=null&&(this.preview.destroy(),this.preview=null),this.ghostPreview!=null&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&this.sizers!=null){for(var t=0;t<this.sizers.length;t++)this.sizers[t]!=null&&(this.sizers[t].node.style.display="");this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="")}if(this.customHandles!=null)for(var t=0;t<this.customHandles.length;t++)this.customHandles[t]!=null&&(this.customHandles[t].active?(this.customHandles[t].active=!1,this.customHandles[t].reset()):this.customHandles[t].setVisible(!0));this.selectionBorder!=null&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle$1(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.handlesVisible=!0,this.unscaledBounds=null,this.livePreviewActive=null};mxVertexHandler$1.prototype.resizeCell=function(t,e,i,n,r,l,s){var a=this.graph.model.getGeometry(t);if(a!=null){if(n==mxEvent$1.LABEL_HANDLE){var o=-mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),u=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,!0)==1,d=Math.cos(o),p=Math.sin(o),c=this.graph.view.scale,g=mxUtils$1.getRotatedPoint(new mxPoint$1(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/c),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/c)),d,p);u||(g.y=-g.y),a=a.clone(),a.offset==null?a.offset=g:(a.offset.x+=g.x,a.offset.y+=g.y),this.graph.model.setGeometry(t,a)}else if(this.unscaledBounds!=null){var c=this.graph.view.scale;(this.childOffsetX!=0||this.childOffsetY!=0)&&this.moveChildren(t,Math.round(this.childOffsetX/c),Math.round(this.childOffsetY/c)),this.graph.resizeCell(t,this.unscaledBounds,s)}}};mxVertexHandler$1.prototype.moveChildren=function(t,e,i){for(var n=this.graph.getModel(),r=n.getChildCount(t),l=0;l<r;l++){var s=n.getChildAt(t,l),a=this.graph.getCellGeometry(s);a!=null&&(a=a.clone(),a.translate(e,i),n.setGeometry(s,a))}};mxVertexHandler$1.prototype.union=function(t,e,i,n,r,l,s,a,o){if(r=r!=null?r&&this.graph.gridEnabled:this.graph.gridEnabled,this.singleSizer){var u=t.x+t.width+e,d=t.y+t.height+i;r&&(u=this.graph.snap(u/l)*l,d=this.graph.snap(d/l)*l);var p=new mxRectangle$1(t.x,t.y,0,0);return p.add(new mxRectangle$1(u,d,0,0)),p}else{var c=t.width,g=t.height,x=t.x-s.x*l,C=x+c,T=t.y-s.y*l,A=T+g,R=x+c/2,_=T+g/2;n>4?(A=A+i,r?A=this.graph.snap(A/l)*l:A=Math.round(A/l)*l):n<3&&(T=T+i,r?T=this.graph.snap(T/l)*l:T=Math.round(T/l)*l),n==0||n==3||n==5?(x+=e,r?x=this.graph.snap(x/l)*l:x=Math.round(x/l)*l):(n==2||n==4||n==7)&&(C+=e,r?C=this.graph.snap(C/l)*l:C=Math.round(C/l)*l);var N=C-x,H=A-T;if(a){var k=this.graph.getCellGeometry(this.state.cell);if(k!=null){var K=k.width/k.height;n==1||n==2||n==7||n==6?N=H*K:H=N/K,n==0&&(x=C-N,T=A-H)}}if(o){N+=N-c,H+=H-g;var Q=R-(x+N/2),nt=_-(T+H/2);x+=Q,T+=nt,C+=Q,A+=nt}N<0&&(x+=N,N=Math.abs(N)),H<0&&(T+=H,H=Math.abs(H));var dt=new mxRectangle$1(x+s.x*l,T+s.y*l,N,H);return this.minBounds!=null&&(dt.width=Math.max(dt.width,this.minBounds.x*l+this.minBounds.width*l+Math.max(0,this.x0*l-dt.x)),dt.height=Math.max(dt.height,this.minBounds.y*l+this.minBounds.height*l+Math.max(0,this.y0*l-dt.y))),dt}};mxVertexHandler$1.prototype.redraw=function(t){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle$1(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),t||this.redrawHandles()};mxVertexHandler$1.prototype.getHandlePadding=function(){var t=new mxPoint$1(0,0),e=this.tolerance;return this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null&&(this.bounds.width<2*this.sizers[0].bounds.width+2*e||this.bounds.height<2*this.sizers[0].bounds.height+2*e)&&(e/=2,t.x=this.sizers[0].bounds.width+e,t.y=this.sizers[0].bounds.height+e),t};mxVertexHandler$1.prototype.getSizerBounds=function(){return this.bounds};mxVertexHandler$1.prototype.redrawHandles=function(){var t=this.getSizerBounds(),e=this.tolerance;if(this.horizontalOffset=0,this.verticalOffset=0,this.customHandles!=null){for(var i=0;i<this.customHandles.length;i++)if(this.customHandles[i]!=null){var n=this.customHandles[i].shape.node.style.display;this.customHandles[i].redraw(),this.customHandles[i].shape.node.style.display=n,this.customHandles[i].shape.node.style.visibility=!this.handlesVisible||!this.isHandlesVisible()||!this.isCustomHandleVisible(this.customHandles[i])||this.graph.isEditing()?"hidden":""}}if(this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null){if(this.index==null&&this.manageSizers&&this.sizers.length>=8){var r=this.getHandlePadding();this.horizontalOffset=r.x,this.verticalOffset=r.y,(this.horizontalOffset!=0||this.verticalOffset!=0)&&(t=new mxRectangle$1(t.x,t.y,t.width,t.height),t.x-=this.horizontalOffset/2,t.width+=this.horizontalOffset,t.y-=this.verticalOffset/2,t.height+=this.verticalOffset),this.sizers.length>=8&&(t.width<2*this.sizers[0].bounds.width+2*e||t.height<2*this.sizers[0].bounds.height+2*e?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var l=t.x+t.width,s=t.y+t.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],l,s);else{var a=t.x+t.width/2,o=t.y+t.height/2;if(this.sizers.length>=8){var u=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],d=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),p=Math.cos(d),c=Math.sin(d),g=Math.round(d*4/Math.PI),x=new mxPoint$1(t.getCenterX(),t.getCenterY()),C=mxUtils$1.getRotatedPoint(new mxPoint$1(t.x,t.y),p,c,x);this.moveSizerTo(this.sizers[0],C.x,C.y),this.sizers[0].setCursor(u[mxUtils$1.mod(0+g,u.length)]),C.x=a,C.y=t.y,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[1],C.x,C.y),this.sizers[1].setCursor(u[mxUtils$1.mod(1+g,u.length)]),C.x=l,C.y=t.y,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[2],C.x,C.y),this.sizers[2].setCursor(u[mxUtils$1.mod(2+g,u.length)]),C.x=t.x,C.y=o,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[3],C.x,C.y),this.sizers[3].setCursor(u[mxUtils$1.mod(7+g,u.length)]),C.x=l,C.y=o,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[4],C.x,C.y),this.sizers[4].setCursor(u[mxUtils$1.mod(3+g,u.length)]),C.x=t.x,C.y=s,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[5],C.x,C.y),this.sizers[5].setCursor(u[mxUtils$1.mod(6+g,u.length)]),C.x=a,C.y=s,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[6],C.x,C.y),this.sizers[6].setCursor(u[mxUtils$1.mod(5+g,u.length)]),C.x=l,C.y=s,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[7],C.x,C.y),this.sizers[7].setCursor(u[mxUtils$1.mod(4+g,u.length)]);var T=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,!0)==1;C.x=a+this.state.absoluteOffset.x,C.y=o+(T?1:-1)*this.state.absoluteOffset.y,C=mxUtils$1.getRotatedPoint(C,p,c,x),this.moveSizerTo(this.sizers[8],C.x,C.y)}else this.state.width>=2&&this.state.height>=2&&this.state.absoluteOffset!=null?this.moveSizerTo(this.sizers[0],a+this.state.absoluteOffset.x,o+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}if(this.sizers!=null)for(var i=0;i<this.sizers.length;i++)this.sizers[i].node.style.visibility=this.isHandlesVisible()?"":"hidden";if(this.rotationShape!=null){var d=mxUtils$1.toRadians(this.currentAlpha!=null?this.currentAlpha:this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),p=Math.cos(d),c=Math.sin(d),x=new mxPoint$1(this.state.getCenterX(),this.state.getCenterY()),C=mxUtils$1.getRotatedPoint(this.getRotationHandlePosition(),p,c,x);this.rotationShape.node!=null&&(this.moveSizerTo(this.rotationShape,C.x,C.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()||!this.handlesVisible||!this.isHandlesVisible()||!this.isRotationHandleVisible()?"hidden":"")}if(this.selectionBorder!=null&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0")),this.edgeHandlers!=null)for(var i=0;i<this.edgeHandlers.length;i++)this.edgeHandlers[i].redraw()};mxVertexHandler$1.prototype.isCustomHandleVisible=function(t){return this.state.view.graph.getSelectionCount()==1};mxVertexHandler$1.prototype.getRotationHandlePosition=function(){return new mxPoint$1(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)};mxVertexHandler$1.prototype.isParentHighlightVisible=function(){return!this.graph.isCellSelected(this.graph.model.getParent(this.state.cell))};mxVertexHandler$1.prototype.destroyParentHighlight=function(){this.parentHighlight.state!=null&&(delete this.parentHighlight.state.parentHighlight,delete this.parentHighlight.state),this.parentHighlight.destroy(),this.parentHighlight=null};mxVertexHandler$1.prototype.updateParentHighlight=function(){if(!this.isDestroyed()){var t=this.isParentHighlightVisible(),e=this.graph.model.getParent(this.state.cell),i=this.graph.view.getState(e);if(this.parentHighlight!=null)if(this.graph.model.isVertex(e)&&t){var n=this.parentHighlight.bounds;i!=null&&(n.x!=i.x||n.y!=i.y||n.width!=i.width||n.height!=i.height)&&(this.parentHighlight.bounds=mxRectangle$1.fromRectangle(i),this.parentHighlight.redraw())}else this.destroyParentHighlight();else this.parentHighlightEnabled&&t&&this.graph.model.isVertex(e)&&i!=null&&i.parentHighlight==null&&(this.parentHighlight=this.createParentHighlightShape(i),this.parentHighlight.dialect=mxConstants$1.DIALECT_SVG,this.parentHighlight.svgStrokeTolerance=0,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(i.style[mxConstants$1.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),i.parentHighlight=this.parentHighlight,this.parentHighlight.state=i)}};mxVertexHandler$1.prototype.drawPreview=function(){this.preview!=null&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()};mxVertexHandler$1.prototype.getSelectionBorderBounds=function(){return this.bounds};mxVertexHandler$1.prototype.createSizers=function(){var t=this.graph.isCellResizable(this.state.cell)&&!this.graph.isCellLocked(this.state.cell),e=[];if(t||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var i=0;t&&(this.singleSizer||(e.push(this.createSizer("nw-resize",i++)),e.push(this.createSizer("n-resize",i++)),e.push(this.createSizer("ne-resize",i++)),e.push(this.createSizer("w-resize",i++)),e.push(this.createSizer("e-resize",i++)),e.push(this.createSizer("sw-resize",i++)),e.push(this.createSizer("s-resize",i++))),e.push(this.createSizer("se-resize",i++)));var n=this.graph.model.getGeometry(this.state.cell);n!=null&&!n.relative&&!this.graph.isSwimlane(this.state.cell)&&this.graph.isLabelMovable(this.state.cell)&&(this.labelShape=this.createSizer(mxConstants$1.CURSOR_LABEL_HANDLE,mxEvent$1.LABEL_HANDLE,mxConstants$1.LABEL_HANDLE_SIZE,mxConstants$1.LABEL_HANDLE_FILLCOLOR),e.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!t&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants$1.CURSOR_MOVABLE_VERTEX,mxEvent$1.LABEL_HANDLE,null,mxConstants$1.LABEL_HANDLE_FILLCOLOR),e.push(this.labelShape));return this.rotationShape==null&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent$1.ROTATION_HANDLE,mxConstants$1.HANDLE_SIZE+3,mxConstants$1.HANDLE_FILLCOLOR),e.push(this.rotationShape)),e};mxVertexHandler$1.prototype.destroyCustomHandles=function(){if(this.customHandles!=null){for(var t=0;t<this.customHandles.length;t++)this.customHandles[t]!=null&&this.customHandles[t].destroy();this.customHandles=null}};mxVertexHandler$1.prototype.destroySizers=function(){if(this.sizers!=null){for(var t=0;t<this.sizers.length;t++)this.sizers[t].destroy();this.sizers=null,this.rotationShape=null}};mxVertexHandler$1.prototype.isDestroyed=function(){return this.selectionBorder==null};mxVertexHandler$1.prototype.destroy=function(){this.escapeHandler!=null&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.preview!=null&&(this.preview.destroy(),this.preview=null),this.ghostPreview!=null&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.selectionBorder!=null&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.parentHighlight!=null&&this.destroyParentHighlight(),this.labelShape=null,this.removeHint(),this.destroySizers(),this.destroyCustomHandles()};function mxConnectionConstraint$1(t,e,i,n,r){this.point=t,this.perimeter=e??!0,this.name=i,this.dx=n||0,this.dy=r||0}mxConnectionConstraint$1.prototype.point=null;mxConnectionConstraint$1.prototype.perimeter=null;mxConnectionConstraint$1.prototype.name=null;mxConnectionConstraint$1.prototype.dx=null;mxConnectionConstraint$1.prototype.dy=null;var mxEdgeStyle$1={EntityRelation:function(t,e,i,n,r){var l=t.view,s=l.graph,a=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_SEGMENT,mxConstants$1.ENTITY_SEGMENT)*l.scale,o=t.absolutePoints,u=o[0],d=o[o.length-1],p=!1;if(e!=null){var c=s.getCellGeometry(e.cell);c.relative?p=c.x<=.5:i!=null&&(p=(d!=null?d.x:i.x+i.width)<(u!=null?u.x:e.x))}if(u!=null)e=new mxCellState,e.x=u.x,e.y=u.y;else if(e!=null){var g=mxUtils$1.getPortConstraints(e,t,!0,mxConstants$1.DIRECTION_MASK_NONE);g!=mxConstants$1.DIRECTION_MASK_NONE&&g!=mxConstants$1.DIRECTION_MASK_WEST+mxConstants$1.DIRECTION_MASK_EAST&&(p=g==mxConstants$1.DIRECTION_MASK_WEST)}else return;var x=!0;if(i!=null){var C=s.getCellGeometry(i.cell);C.relative?x=C.x<=.5:e!=null&&(x=(u!=null?u.x:e.x+e.width)<(d!=null?d.x:i.x))}if(d!=null)i=new mxCellState,i.x=d.x,i.y=d.y;else if(i!=null){var g=mxUtils$1.getPortConstraints(i,t,!1,mxConstants$1.DIRECTION_MASK_NONE);g!=mxConstants$1.DIRECTION_MASK_NONE&&g!=mxConstants$1.DIRECTION_MASK_WEST+mxConstants$1.DIRECTION_MASK_EAST&&(x=g==mxConstants$1.DIRECTION_MASK_WEST)}if(e!=null&&i!=null){var T=p?e.x:e.x+e.width,A=l.getRoutingCenterY(e),R=x?i.x:i.x+i.width,_=l.getRoutingCenterY(i),N=a,H=p?-N:N,k=new mxPoint$1(T+H,A);H=x?-N:N;var K=new mxPoint$1(R+H,_);if(p==x){var Q=p?Math.min(T,R)-a:Math.max(T,R)+a;r.push(new mxPoint$1(Q,A)),r.push(new mxPoint$1(Q,_))}else if(k.x<K.x==p){var nt=A+(_-A)/2;r.push(k),r.push(new mxPoint$1(k.x,nt)),r.push(new mxPoint$1(K.x,nt)),r.push(K)}else r.push(k),r.push(K)}},Loop:function(t,e,i,n,r){var l=t.absolutePoints,s=l[0],a=l[l.length-1];if(s!=null&&a!=null){if(n!=null&&n.length>0)for(var o=0;o<n.length;o++){var u=n[o];u=t.view.transformControlPoint(t,u),r.push(new mxPoint$1(u.x,u.y))}return}if(e!=null){var d=t.view,p=d.graph,u=n!=null&&n.length>0?n[0]:null;u!=null&&(u=d.transformControlPoint(t,u),mxUtils$1.contains(e,u.x,u.y)&&(u=null));var c=0,g=0,x=0,C=0,T=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_SEGMENT,p.gridSize)*d.scale,A=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_WEST);A==mxConstants$1.DIRECTION_NORTH||A==mxConstants$1.DIRECTION_SOUTH?(c=d.getRoutingCenterX(e),g=T):(x=d.getRoutingCenterY(e),C=T),u==null||u.x<e.x||u.x>e.x+e.width?u!=null?(c=u.x,C=Math.max(Math.abs(x-u.y),C)):A==mxConstants$1.DIRECTION_NORTH?x=e.y-2*g:A==mxConstants$1.DIRECTION_SOUTH?x=e.y+e.height+2*g:A==mxConstants$1.DIRECTION_EAST?c=e.x-2*C:c=e.x+e.width+2*C:u!=null&&(c=d.getRoutingCenterX(e),g=Math.max(Math.abs(c-u.x),C),x=u.y,C=0),r.push(new mxPoint$1(c-g,x-C)),r.push(new mxPoint$1(c+g,x+C))}},ElbowConnector:function(t,e,i,n,r){var l=n!=null&&n.length>0?n[0]:null,s=!1,a=!1;if(e!=null&&i!=null)if(l!=null){var o=Math.min(e.x,i.x),u=Math.max(e.x+e.width,i.x+i.width),d=Math.min(e.y,i.y),p=Math.max(e.y+e.height,i.y+i.height);l=t.view.transformControlPoint(t,l),s=l.y<d||l.y>p,a=l.x<o||l.x>u}else{var o=Math.max(e.x,i.x),u=Math.min(e.x+e.width,i.x+i.width);if(s=o==u,!s){var d=Math.max(e.y,i.y),p=Math.min(e.y+e.height,i.y+i.height);a=d==p}}!a&&(s||t.style[mxConstants$1.STYLE_ELBOW]==mxConstants$1.ELBOW_VERTICAL)?mxEdgeStyle$1.TopToBottom(t,e,i,n,r):mxEdgeStyle$1.SideToSide(t,e,i,n,r)},SideToSide:function(t,e,i,n,r){var l=t.view,s=n!=null&&n.length>0?n[0]:null,a=t.absolutePoints,o=a[0],u=a[a.length-1];if(s!=null&&(s=l.transformControlPoint(t,s)),o!=null&&(e=new mxCellState,e.x=o.x,e.y=o.y),u!=null&&(i=new mxCellState,i.x=u.x,i.y=u.y),e!=null&&i!=null){var d=Math.max(e.x,i.x),p=Math.min(e.x+e.width,i.x+i.width),c=s!=null?s.x:Math.round(p+(d-p)/2),g=l.getRoutingCenterY(e),x=l.getRoutingCenterY(i);if(s!=null&&(s.y>=e.y&&s.y<=e.y+e.height&&(g=s.y),s.y>=i.y&&s.y<=i.y+i.height&&(x=s.y)),!mxUtils$1.contains(i,c,g)&&!mxUtils$1.contains(e,c,g)&&r.push(new mxPoint$1(c,g)),!mxUtils$1.contains(i,c,x)&&!mxUtils$1.contains(e,c,x)&&r.push(new mxPoint$1(c,x)),r.length==1)if(s!=null)!mxUtils$1.contains(i,c,s.y)&&!mxUtils$1.contains(e,c,s.y)&&r.push(new mxPoint$1(c,s.y));else{var C=Math.max(e.y,i.y),T=Math.min(e.y+e.height,i.y+i.height);r.push(new mxPoint$1(c,C+(T-C)/2))}}},TopToBottom:function(t,e,i,n,r){var l=t.view,s=n!=null&&n.length>0?n[0]:null,a=t.absolutePoints,o=a[0],u=a[a.length-1];if(s!=null&&(s=l.transformControlPoint(t,s)),o!=null&&(e=new mxCellState,e.x=o.x,e.y=o.y),u!=null&&(i=new mxCellState,i.x=u.x,i.y=u.y),e!=null&&i!=null){var d=Math.max(e.y,i.y),p=Math.min(e.y+e.height,i.y+i.height),c=l.getRoutingCenterX(e);s!=null&&s.x>=e.x&&s.x<=e.x+e.width&&(c=s.x);var g=s!=null?s.y:Math.round(p+(d-p)/2);if(!mxUtils$1.contains(i,c,g)&&!mxUtils$1.contains(e,c,g)&&r.push(new mxPoint$1(c,g)),s!=null&&s.x>=i.x&&s.x<=i.x+i.width?c=s.x:c=l.getRoutingCenterX(i),!mxUtils$1.contains(i,c,g)&&!mxUtils$1.contains(e,c,g)&&r.push(new mxPoint$1(c,g)),r.length==1)if(s!=null&&r.length==1)!mxUtils$1.contains(i,s.x,g)&&!mxUtils$1.contains(e,s.x,g)&&r.push(new mxPoint$1(s.x,g));else{var x=Math.max(e.x,i.x),C=Math.min(e.x+e.width,i.x+i.width);r.push(new mxPoint$1(x+(C-x)/2,g))}}},SegmentConnector:function(t,e,i,n,r){var l=mxEdgeStyle$1.scalePointArray(t.absolutePoints,t.view.scale),s=mxEdgeStyle$1.scaleCellState(e,t.view.scale),a=mxEdgeStyle$1.scaleCellState(i,t.view.scale),o=1,u=[];function d(B){u.push(B)}var p=r.length>0?r[0]:null,c=!0,g=null;function x(B){return B.x=Math.round(B.x*t.view.scale*10)/10,B.y=Math.round(B.y*t.view.scale*10)/10,(p==null||Math.abs(p.x-B.x)>=o||Math.abs(p.y-B.y)>=Math.max(1,t.view.scale))&&(r.push(B),p=B),p}var C=l[0];C==null&&s!=null?C=new mxPoint$1(t.view.getRoutingCenterX(s),t.view.getRoutingCenterY(s)):C!=null&&(C=C.clone());var T=l.length-1;if(n!=null&&n.length>0){for(var A=[],R=0;R<n.length;R++){var _=t.view.transformControlPoint(t,n[R],!0);_!=null&&A.push(_)}if(A.length==0)return;C!=null&&A[0]!=null&&(Math.abs(A[0].x-C.x)<o&&(A[0].x=C.x),Math.abs(A[0].y-C.y)<o&&(A[0].y=C.y));var N=l[T];N!=null&&A[A.length-1]!=null&&(Math.abs(A[A.length-1].x-N.x)<o&&(A[A.length-1].x=N.x),Math.abs(A[A.length-1].y-N.y)<o&&(A[A.length-1].y=N.y)),g=A[0];var H=s,k=l[0],K=!1,Q=!1,nt=g;k!=null&&(H=null);for(var R=0;R<2;R++){var dt=k!=null&&k.x==nt.x,mt=k!=null&&k.y==nt.y,xt=H!=null&&nt.y>=H.y&&nt.y<=H.y+H.height,Y=H!=null&&nt.x>=H.x&&nt.x<=H.x+H.width;if(K=mt||k==null&&xt,Q=dt||k==null&&Y,!(R==0&&(K&&Q||dt&&mt))){if(k!=null&&!mt&&!dt&&(xt||Y)){c=!xt;break}if(Q||K){c=K,R==1&&(c=A.length%2==0?K:Q);break}}H=a,k=l[T],k!=null&&(H=null),nt=A[A.length-1],dt&&mt&&(A=A.slice(1))}c&&(l[0]!=null&&l[0].y!=g.y||l[0]==null&&s!=null&&(g.y<s.y||g.y>s.y+s.height))?d(new mxPoint$1(C.x,g.y)):!c&&(l[0]!=null&&l[0].x!=g.x||l[0]==null&&s!=null&&(g.x<s.x||g.x>s.x+s.width))&&d(new mxPoint$1(g.x,C.y)),c?C.y=g.y:C.x=g.x;for(var R=0;R<A.length;R++)c=!c,g=A[R],c?C.y=g.y:C.x=g.x,d(C.clone())}else g=C,c=!0;if(C=l[T],C==null&&a!=null&&(C=new mxPoint$1(t.view.getRoutingCenterX(a),t.view.getRoutingCenterY(a))),C!=null&&g!=null&&(c&&(l[T]!=null&&l[T].y!=g.y||l[T]==null&&a!=null&&(g.y<a.y||g.y>a.y+a.height))?d(new mxPoint$1(C.x,g.y)):!c&&(l[T]!=null&&l[T].x!=g.x||l[T]==null&&a!=null&&(g.x<a.x||g.x>a.x+a.width))&&d(new mxPoint$1(g.x,C.y))),l[0]==null&&s!=null)for(;u.length>0&&u[0]!=null&&mxUtils$1.contains(s,u[0].x,u[0].y);)u.splice(0,1);if(l[T]==null&&a!=null)for(;u.length>0&&u[u.length-1]!=null&&mxUtils$1.contains(a,u[u.length-1].x,u[u.length-1].y);)u.splice(u.length-1,1);for(var R=0;R<u.length;R++)x(u[R]);N!=null&&r[r.length-1]!=null&&Math.abs(N.x-r[r.length-1].x)<=o&&Math.abs(N.y-r[r.length-1].y)<=o&&(r.splice(r.length-1,1),r[r.length-1]!=null&&(Math.abs(r[r.length-1].x-N.x)<o&&(r[r.length-1].x=N.x),Math.abs(r[r.length-1].y-N.y)<o&&(r[r.length-1].y=N.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(t,e){var i=mxUtils$1.getValue(t.style,e?mxConstants$1.STYLE_SOURCE_JETTY_SIZE:mxConstants$1.STYLE_TARGET_JETTY_SIZE,mxUtils$1.getValue(t.style,mxConstants$1.STYLE_JETTY_SIZE,mxEdgeStyle$1.orthBuffer));if(i=="auto"){var n=mxUtils$1.getValue(t.style,e?mxConstants$1.STYLE_STARTARROW:mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE);if(n!=mxConstants$1.NONE){var r=mxUtils$1.getNumber(t.style,e?mxConstants$1.STYLE_STARTSIZE:mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE);i=Math.max(2,Math.ceil((r+mxEdgeStyle$1.orthBuffer)/mxEdgeStyle$1.orthBuffer))*mxEdgeStyle$1.orthBuffer}else i=2*mxEdgeStyle$1.orthBuffer}return i},scalePointArray:function(t,e){var i=[];if(t!=null)for(var n=0;n<t.length;n++)if(t[n]!=null){var r=new mxPoint$1(Math.round(t[n].x/e*10)/10,Math.round(t[n].y/e*10)/10);i[n]=r}else i[n]=null;else i=null;return i},scaleCellState:function(t,e){var i=null;return t!=null?(i=t.clone(),i.setRect(Math.round(t.x/e*10)/10,Math.round(t.y/e*10)/10,Math.round(t.width/e*10)/10,Math.round(t.height/e*10)/10)):i=null,i},OrthConnector:function(t,e,i,n,r){var l=t.view.graph,s=u==null?!1:l.getModel().isEdge(u.cell),a=d==null?!1:l.getModel().isEdge(d.cell),o=mxEdgeStyle$1.scalePointArray(t.absolutePoints,t.view.scale),u=mxEdgeStyle$1.scaleCellState(e,t.view.scale),d=mxEdgeStyle$1.scaleCellState(i,t.view.scale),p=o[0],c=o[o.length-1],g=u!=null?u.x:p.x,x=u!=null?u.y:p.y,C=u!=null?u.width:1,T=u!=null?u.height:1,A=d!=null?d.x:c.x,R=d!=null?d.y:c.y,_=d!=null?d.width:1,N=d!=null?d.height:1,H=mxEdgeStyle$1.getJettySize(t,!0),k=mxEdgeStyle$1.getJettySize(t,!1);u!=null&&d==u&&(k=Math.max(H,k),H=k);var K=k+H,Q=!1;if(p!=null&&c!=null){var $t=c.x-p.x,Ct=c.y-p.y;Q=$t*$t+Ct*Ct<K*K}if(Q||mxEdgeStyle$1.orthPointsFallback&&n!=null&&n.length>0||s||a){mxEdgeStyle$1.SegmentConnector(t,e,i,n,r);return}var nt=[mxConstants$1.DIRECTION_MASK_ALL,mxConstants$1.DIRECTION_MASK_ALL],dt=0;if(u!=null&&(nt[0]=mxUtils$1.getPortConstraints(u,t,!0,mxConstants$1.DIRECTION_MASK_ALL),dt=mxUtils$1.getValue(u.style,mxConstants$1.STYLE_ROTATION,0),dt!=0)){var mt=mxUtils$1.getBoundingBox(new mxRectangle$1(g,x,C,T),dt);g=mt.x,x=mt.y,C=mt.width,T=mt.height}if(d!=null&&(nt[1]=mxUtils$1.getPortConstraints(d,t,!1,mxConstants$1.DIRECTION_MASK_ALL),dt=mxUtils$1.getValue(d.style,mxConstants$1.STYLE_ROTATION,0),dt!=0)){var mt=mxUtils$1.getBoundingBox(new mxRectangle$1(A,R,_,N),dt);A=mt.x,R=mt.y,_=mt.width,N=mt.height}if(!(C==0||T==0||_==0||N==0)){for(var xt=[0,0],Y=[[g,x,C,T],[A,R,_,N]],B=[H,k],U=0;U<2;U++)mxEdgeStyle$1.limits[U][1]=Y[U][0]-B[U],mxEdgeStyle$1.limits[U][2]=Y[U][1]-B[U],mxEdgeStyle$1.limits[U][4]=Y[U][0]+Y[U][2]+B[U],mxEdgeStyle$1.limits[U][8]=Y[U][1]+Y[U][3]+B[U];var lt=Y[0][0]+Y[0][2]/2,tt=Y[0][1]+Y[0][3]/2,st=Y[1][0]+Y[1][2]/2,ft=Y[1][1]+Y[1][3]/2,$t=lt-st,Ct=tt-ft,pt=0;$t<0?Ct<0?pt=2:pt=1:Ct<=0&&(pt=3,$t==0&&(pt=2));var ct=null;u!=null&&(ct=p);for(var Mt=[[.5,.5],[.5,.5]],U=0;U<2;U++)ct!=null&&(Mt[U][0]=(ct.x-Y[U][0])/Y[U][2],Math.abs(ct.x-Y[U][0])<=1?xt[U]=mxConstants$1.DIRECTION_MASK_WEST:Math.abs(ct.x-Y[U][0]-Y[U][2])<=1&&(xt[U]=mxConstants$1.DIRECTION_MASK_EAST),Mt[U][1]=(ct.y-Y[U][1])/Y[U][3],Math.abs(ct.y-Y[U][1])<=1?xt[U]=mxConstants$1.DIRECTION_MASK_NORTH:Math.abs(ct.y-Y[U][1]-Y[U][3])<=1&&(xt[U]=mxConstants$1.DIRECTION_MASK_SOUTH)),ct=null,d!=null&&(ct=c);var bt=Y[0][1]-(Y[1][1]+Y[1][3]),Ot=Y[0][0]-(Y[1][0]+Y[1][2]),gt=Y[1][1]-(Y[0][1]+Y[0][3]),Tt=Y[1][0]-(Y[0][0]+Y[0][2]);mxEdgeStyle$1.vertexSeperations[1]=Math.max(Ot-K,0),mxEdgeStyle$1.vertexSeperations[2]=Math.max(bt-K,0),mxEdgeStyle$1.vertexSeperations[4]=Math.max(gt-K,0),mxEdgeStyle$1.vertexSeperations[3]=Math.max(Tt-K,0);var vt=[],Pt=[],Dt=[];Pt[0]=Ot>=Tt?mxConstants$1.DIRECTION_MASK_WEST:mxConstants$1.DIRECTION_MASK_EAST,Dt[0]=bt>=gt?mxConstants$1.DIRECTION_MASK_NORTH:mxConstants$1.DIRECTION_MASK_SOUTH,Pt[1]=mxUtils$1.reversePortConstraints(Pt[0]),Dt[1]=mxUtils$1.reversePortConstraints(Dt[0]);for(var zt=Ot>=Tt?Ot:Tt,Rt=bt>=gt?bt:gt,Nt=[[0,0],[0,0]],Bt=!1,U=0;U<2;U++)xt[U]==0&&(Pt[U]&nt[U]||(Pt[U]=mxUtils$1.reversePortConstraints(Pt[U])),Dt[U]&nt[U]||(Dt[U]=mxUtils$1.reversePortConstraints(Dt[U])),Nt[U][0]=Dt[U],Nt[U][1]=Pt[U]);Rt>0&&zt>0&&((Pt[0]&nt[0])>0&&(Dt[1]&nt[1])>0?(Nt[0][0]=Pt[0],Nt[0][1]=Dt[0],Nt[1][0]=Dt[1],Nt[1][1]=Pt[1],Bt=!0):(Dt[0]&nt[0])>0&&(Pt[1]&nt[1])>0&&(Nt[0][0]=Dt[0],Nt[0][1]=Pt[0],Nt[1][0]=Pt[1],Nt[1][1]=Dt[1],Bt=!0)),Rt>0&&!Bt&&(Nt[0][0]=Dt[0],Nt[0][1]=Pt[0],Nt[1][0]=Dt[1],Nt[1][1]=Pt[1],Bt=!0),zt>0&&!Bt&&(Nt[0][0]=Pt[0],Nt[0][1]=Dt[0],Nt[1][0]=Pt[1],Nt[1][1]=Dt[1],Bt=!0);for(var U=0;U<2;U++)xt[U]==0&&(Nt[U][0]&nt[U]||(Nt[U][0]=Nt[U][1]),vt[U]=Nt[U][0]&nt[U],vt[U]|=(Nt[U][1]&nt[U])<<8,vt[U]|=(Nt[1-U][U]&nt[U])<<16,vt[U]|=(Nt[1-U][1-U]&nt[U])<<24,vt[U]&15||(vt[U]=vt[U]<<8),vt[U]&3840||(vt[U]=vt[U]&15|vt[U]>>8),vt[U]&983040||(vt[U]=vt[U]&65535|(vt[U]&251658240)>>8),xt[U]=vt[U]&15,(nt[U]==mxConstants$1.DIRECTION_MASK_WEST||nt[U]==mxConstants$1.DIRECTION_MASK_NORTH||nt[U]==mxConstants$1.DIRECTION_MASK_EAST||nt[U]==mxConstants$1.DIRECTION_MASK_SOUTH)&&(xt[U]=nt[U]));var kt=xt[0]==mxConstants$1.DIRECTION_MASK_EAST?3:xt[0],Xt=xt[1]==mxConstants$1.DIRECTION_MASK_EAST?3:xt[1];kt-=pt,Xt-=pt,kt<1&&(kt+=4),Xt<1&&(Xt+=4);var ie=mxEdgeStyle$1.routePatterns[kt-1][Xt-1];switch(mxEdgeStyle$1.wayPoints1[0][0]=Y[0][0],mxEdgeStyle$1.wayPoints1[0][1]=Y[0][1],xt[0]){case mxConstants$1.DIRECTION_MASK_WEST:mxEdgeStyle$1.wayPoints1[0][0]-=H,mxEdgeStyle$1.wayPoints1[0][1]+=Mt[0][1]*Y[0][3];break;case mxConstants$1.DIRECTION_MASK_SOUTH:mxEdgeStyle$1.wayPoints1[0][0]+=Mt[0][0]*Y[0][2],mxEdgeStyle$1.wayPoints1[0][1]+=Y[0][3]+H;break;case mxConstants$1.DIRECTION_MASK_EAST:mxEdgeStyle$1.wayPoints1[0][0]+=Y[0][2]+H,mxEdgeStyle$1.wayPoints1[0][1]+=Mt[0][1]*Y[0][3];break;case mxConstants$1.DIRECTION_MASK_NORTH:mxEdgeStyle$1.wayPoints1[0][0]+=Mt[0][0]*Y[0][2],mxEdgeStyle$1.wayPoints1[0][1]-=H;break}for(var At=0,Jt=(xt[0]&(mxConstants$1.DIRECTION_MASK_EAST|mxConstants$1.DIRECTION_MASK_WEST))>0?0:1,ne=Jt,Wt=0,U=0;U<ie.length;U++){var re=ie[U]&15,te=re==mxConstants$1.DIRECTION_MASK_EAST?3:re;te+=pt,te>4&&(te-=4);var se=mxEdgeStyle$1.dirVectors[te-1];Wt=te%2>0?0:1,Wt!=Jt&&(At++,mxEdgeStyle$1.wayPoints1[At][0]=mxEdgeStyle$1.wayPoints1[At-1][0],mxEdgeStyle$1.wayPoints1[At][1]=mxEdgeStyle$1.wayPoints1[At-1][1]);var S=(ie[U]&mxEdgeStyle$1.TARGET_MASK)>0,I=(ie[U]&mxEdgeStyle$1.SOURCE_MASK)>0,L=(ie[U]&mxEdgeStyle$1.SIDE_MASK)>>5;L=L<<pt,L>15&&(L=L>>4);var D=(ie[U]&mxEdgeStyle$1.CENTER_MASK)>0;if((I||S)&&L<9){var O=0,V=I?0:1;if(D&&Wt==0?O=Y[V][0]+Mt[V][0]*Y[V][2]:D?O=Y[V][1]+Mt[V][1]*Y[V][3]:O=mxEdgeStyle$1.limits[V][L],Wt==0){var j=mxEdgeStyle$1.wayPoints1[At][0],at=(O-j)*se[0];at>0&&(mxEdgeStyle$1.wayPoints1[At][0]+=se[0]*at)}else{var ot=mxEdgeStyle$1.wayPoints1[At][1],yt=(O-ot)*se[1];yt>0&&(mxEdgeStyle$1.wayPoints1[At][1]+=se[1]*yt)}}else D&&(mxEdgeStyle$1.wayPoints1[At][0]+=se[0]*Math.abs(mxEdgeStyle$1.vertexSeperations[te]/2),mxEdgeStyle$1.wayPoints1[At][1]+=se[1]*Math.abs(mxEdgeStyle$1.vertexSeperations[te]/2));At>0&&mxEdgeStyle$1.wayPoints1[At][Wt]==mxEdgeStyle$1.wayPoints1[At-1][Wt]?At--:Jt=Wt}for(var U=0;U<=At;U++){if(U==At){var Lt=(xt[1]&(mxConstants$1.DIRECTION_MASK_EAST|mxConstants$1.DIRECTION_MASK_WEST))>0?0:1,It=Lt==ne?0:1;if(It!=(At+1)%2)break}r.push(new mxPoint$1(Math.round(mxEdgeStyle$1.wayPoints1[U][0]*t.view.scale*10)/10,Math.round(mxEdgeStyle$1.wayPoints1[U][1]*t.view.scale*10)/10))}for(var Gt=1;Gt<r.length;)r[Gt-1]==null||r[Gt]==null||r[Gt-1].x!=r[Gt].x||r[Gt-1].y!=r[Gt].y?Gt++:r.splice(Gt,1)}},getRoutePattern:function(t,e,i,n){var r=t[0]==mxConstants$1.DIRECTION_MASK_EAST?3:t[0],l=t[1]==mxConstants$1.DIRECTION_MASK_EAST?3:t[1];r-=e,l-=e,r<1&&(r+=4),l<1&&(l+=4);var s=routePatterns[r-1][l-1];return(i==0||n==0)&&inlineRoutePatterns[r-1][l-1]!=null&&(s=inlineRoutePatterns[r-1][l-1]),s}};function mxEdgeHandler$1(t){t!=null&&t.shape!=null&&(this.state=t,this.init(),this.escapeHandler=mxUtils$1.bind(this,function(e,i){var n=this.index!=null;this.reset(),n&&this.graph.cellRenderer.redraw(this.state,!1,t.view.isRendering())}),this.state.view.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}mxEdgeHandler$1.prototype.graph=null;mxEdgeHandler$1.prototype.state=null;mxEdgeHandler$1.prototype.marker=null;mxEdgeHandler$1.prototype.constraintHandler=null;mxEdgeHandler$1.prototype.error=null;mxEdgeHandler$1.prototype.shape=null;mxEdgeHandler$1.prototype.bends=null;mxEdgeHandler$1.prototype.labelShape=null;mxEdgeHandler$1.prototype.cloneEnabled=!0;mxEdgeHandler$1.prototype.addEnabled=!1;mxEdgeHandler$1.prototype.removeEnabled=!1;mxEdgeHandler$1.prototype.dblClickRemoveEnabled=!1;mxEdgeHandler$1.prototype.mergeRemoveEnabled=!1;mxEdgeHandler$1.prototype.straightRemoveEnabled=!1;mxEdgeHandler$1.prototype.virtualBendsEnabled=!1;mxEdgeHandler$1.prototype.virtualBendOpacity=40;mxEdgeHandler$1.prototype.parentHighlightEnabled=!1;mxEdgeHandler$1.prototype.preferHtml=!1;mxEdgeHandler$1.prototype.allowHandleBoundsCheck=!0;mxEdgeHandler$1.prototype.snapToTerminals=!1;mxEdgeHandler$1.prototype.handleImage=null;mxEdgeHandler$1.prototype.tolerance=0;mxEdgeHandler$1.prototype.outlineConnect=!1;mxEdgeHandler$1.prototype.manageLabelHandle=!1;mxEdgeHandler$1.prototype.init=function(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.svgStrokeTolerance=0,this.shape.pointerEvents=!1,mxEvent$1.redirectMouseEvents(this.shape.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.shape.setCursor(mxConstants$1.CURSOR_MOVABLE_EDGE),this.preferHtml=this.state.text!=null&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var t=this.state.getVisibleTerminalState(!0);if(t!=null&&(this.preferHtml=t.text!=null&&t.text.node.parentNode==this.graph.container),!this.preferHtml){var e=this.state.getVisibleTerminalState(!1);e!=null&&(this.preferHtml=e.text!=null&&e.text.node.parentNode==this.graph.container)}}this.updateParentHighlight(),this.refresh(),this.redraw()};mxEdgeHandler$1.prototype.createLabelShape=function(){var t=this.createLabelHandleShape();return this.initBend(t),t};mxEdgeHandler$1.prototype.getConstraintHandler=function(){return this.constraintHandler==null&&(this.constraintHandler=this.createConstraintHandler()),this.constraintHandler};mxEdgeHandler$1.prototype.createConstraintHandler=function(){return new mxConstraintHandler(this.graph)};mxEdgeHandler$1.prototype.isParentHighlightVisible=mxVertexHandler$1.prototype.isParentHighlightVisible;mxEdgeHandler$1.prototype.destroyParentHighlight=mxVertexHandler$1.prototype.destroyParentHighlight;mxEdgeHandler$1.prototype.updateParentHighlight=mxVertexHandler$1.prototype.updateParentHighlight;mxEdgeHandler$1.prototype.createCustomHandles=function(){return null};mxEdgeHandler$1.prototype.isVirtualBendsEnabled=function(t){return this.virtualBendsEnabled&&(this.state.style[mxConstants$1.STYLE_EDGE]==null||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.NONE||this.state.style[mxConstants$1.STYLE_NOEDGESTYLE]==1)&&mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_SHAPE,null)!="arrow"};mxEdgeHandler$1.prototype.isCellEnabled=function(t){return!0};mxEdgeHandler$1.prototype.isAddPointEvent=function(t){return mxEvent$1.isShiftDown(t)};mxEdgeHandler$1.prototype.isRemovePointEvent=function(t){return mxEvent$1.isShiftDown(t)};mxEdgeHandler$1.prototype.getSelectionPoints=function(t){return t.absolutePoints};mxEdgeHandler$1.prototype.createParentHighlightShape=function(t){var e=new mxRectangleShape$1(mxRectangle$1.fromRectangle(t),null,this.getSelectionColor());return e.strokewidth=this.getSelectionStrokeWidth(),e.isDashed=this.isSelectionDashed(),e};mxEdgeHandler$1.prototype.createSelectionShape=function(t){var e=new this.state.shape.constructor;return e.outline=!0,e.apply(this.state),e.isDashed=this.isSelectionDashed(),e.stroke=this.getSelectionColor(),e.isShadow=!1,e};mxEdgeHandler$1.prototype.getSelectionColor=function(){return this.graph.isCellEditable(this.state.cell)?mxConstants$1.EDGE_SELECTION_COLOR:mxConstants$1.LOCKED_HANDLE_FILLCOLOR};mxEdgeHandler$1.prototype.getSelectionStrokeWidth=function(){return mxConstants$1.EDGE_SELECTION_STROKEWIDTH};mxEdgeHandler$1.prototype.isSelectionDashed=function(){return mxConstants$1.EDGE_SELECTION_DASHED};mxEdgeHandler$1.prototype.isConnectableCell=function(t){return!0};mxEdgeHandler$1.prototype.getCellAt=function(t,e){return this.outlineConnect?null:this.graph.getCellAt(t,e)};mxEdgeHandler$1.prototype.createMarker=function(){var t=new mxCellMarker$1(this.graph),e=this;return t.getCell=function(i){var n=mxCellMarker$1.prototype.getCell.apply(this,arguments);if((n==e.state.cell||n==null)&&e.currentPoint!=null&&(n=e.graph.getCellAt(e.currentPoint.x,e.currentPoint.y)),n!=null&&!this.graph.isCellConnectable(n)){var r=this.graph.getModel().getParent(n);this.graph.getModel().isVertex(r)&&this.graph.isCellConnectable(r)&&(n=r)}var l=e.graph.getModel();return(this.graph.isSwimlane(n)&&e.currentPoint!=null&&this.graph.hitsSwimlaneContent(n,e.currentPoint.x,e.currentPoint.y)||!e.isConnectableCell(n)||n==e.state.cell||n!=null&&!e.graph.connectableEdges&&l.isEdge(n)||l.isAncestor(e.state.cell,n))&&(n=null),this.graph.isCellConnectable(n)||(n=null),n},t.isValidState=function(i){var n=e.graph.getModel(),r=e.graph.view.getTerminalPort(i,e.graph.view.getState(n.getTerminal(e.state.cell,!e.isSource)),!e.isSource),l=r!=null?r.cell:null,s=e.isSource?i.cell:l,a=e.isSource?l:i.cell;return e.error=e.validateConnection(s,a),e.error==null},t};mxEdgeHandler$1.prototype.validateConnection=function(t,e){return this.graph.getEdgeValidationError(this.state.cell,t,e)};mxEdgeHandler$1.prototype.createBends=function(){var t=this.state.cell,e=[];if(this.abspoints!=null){for(var i=0;i<this.abspoints.length;i++)if(this.isHandleVisible(i)){var n=i==0,r=i==this.abspoints.length-1,l=n||r;(l||this.graph.isCellBendable(t))&&mxUtils$1.bind(this,function(s){var a=this.createHandleShape(s,null,s==this.abspoints.length-1);this.initBend(a,mxUtils$1.bind(this,mxUtils$1.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,s)}))),this.isHandleEnabled(i)&&a.setCursor(l?mxConstants$1.CURSOR_TERMINAL_HANDLE:mxConstants$1.CURSOR_BEND_HANDLE),e.push(a),l||(this.points.push(new mxPoint$1(0,0)),a.node.style.visibility="hidden")})(i)}}return e};mxEdgeHandler$1.prototype.createVirtualBends=function(){var t=[];if(this.abspoints!=null&&this.abspoints.length>0&&this.graph.isCellBendable(this.state.cell))for(var e=1;e<this.abspoints.length;e++)mxUtils$1.bind(this,function(i){this.initBend(i),i.setCursor(mxConstants$1.CURSOR_VIRTUAL_BEND_HANDLE),t.push(i)})(this.createHandleShape());return t};mxEdgeHandler$1.prototype.isHandleEnabled=function(t){return!0};mxEdgeHandler$1.prototype.isHandleVisible=function(t){var e=this.state.getVisibleTerminalState(!0),i=this.state.getVisibleTerminalState(!1),n=this.graph.getCellGeometry(this.state.cell),r=n!=null?this.graph.view.getEdgeStyle(this.state,n.points,e,i):null;return r!=mxEdgeStyle$1.EntityRelation||t==0||t==this.abspoints.length-1};mxEdgeHandler$1.prototype.createHandleShape=function(t){if(this.handleImage!=null){var e=new mxImageShape$1(new mxRectangle$1(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return e.preserveImageAspect=!1,e}else{var i=mxConstants$1.HANDLE_SIZE;return this.preferHtml&&(i-=1),new mxRectangleShape$1(new mxRectangle$1(0,0,i,i),mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}};mxEdgeHandler$1.prototype.createLabelHandleShape=function(){if(this.labelHandleImage!=null){var t=new mxImageShape$1(new mxRectangle$1(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return t.preserveImageAspect=!1,t}else{var e=mxConstants$1.LABEL_HANDLE_SIZE;return new mxRectangleShape$1(new mxRectangle$1(0,0,e,e),mxConstants$1.LABEL_HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}};mxEdgeHandler$1.prototype.initBend=function(t,e){this.preferHtml?(t.dialect=mxConstants$1.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(t.node,this.graph,this.state,null,null,null,e),mxClient$1.IS_TOUCH&&t.node.setAttribute("pointer-events","none")};mxEdgeHandler$1.prototype.getHandleForEvent=function(t){var e=null;if(this.state!=null){let a=function(o){if(o!=null&&(t.isSource(o)||o.intersectsRectangle(n))){var u=t.getGraphX()-o.bounds.getCenterX(),d=t.getGraphY()-o.bounds.getCenterY(),p=u*u+d*d;if(r==null||p<=r)return r=p,!0}return!1};var s=a,i=mxEvent$1.isMouseEvent(t.getEvent())?0:2*this.tolerance,n=this.allowHandleBoundsCheck?new mxRectangle$1(t.getGraphX()-i,t.getGraphY()-i,i,i):null,r=null;if(this.customHandles!=null&&this.isCustomHandleEvent(t)){for(var l=this.customHandles.length-1;l>=0;l--)if(a(this.customHandles[l].shape))return mxEvent$1.CUSTOM_HANDLE-l}if(this.state.text!=null&&(t.isSource(this.state.text)||a(this.labelShape))&&(e=mxEvent$1.LABEL_HANDLE),this.bends!=null)for(var l=0;l<this.bends.length;l++)a(this.bends[l])&&(e=l);if(this.virtualBends!=null&&this.isAddVirtualBendEvent(t))for(var l=0;l<this.virtualBends.length;l++)a(this.virtualBends[l])&&(e=mxEvent$1.VIRTUAL_HANDLE-l)}return e};mxEdgeHandler$1.prototype.isAddVirtualBendEvent=function(t){return!0};mxEdgeHandler$1.prototype.isCustomHandleEvent=function(t){return!0};mxEdgeHandler$1.prototype.mouseDown=function(t,e){if(this.graph.isCellEditable(this.state.cell)){var i=this.getHandleForEvent(e);if(this.bends!=null&&this.bends[i]!=null){var n=this.bends[i].bounds;this.snapPoint=new mxPoint$1(n.getCenterX(),n.getCenterY())}this.addEnabled&&i==null&&this.isAddPointEvent(e.getEvent())?(this.addPoint(this.state,e.getEvent()),e.consume()):i!=null&&!e.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(e.getEvent())?this.removePoint(this.state,i):(i!=mxEvent$1.LABEL_HANDLE||this.graph.isLabelMovable(e.getCell()))&&(i<=mxEvent$1.VIRTUAL_HANDLE&&mxUtils$1.setOpacity(this.virtualBends[mxEvent$1.VIRTUAL_HANDLE-i].node,100),this.mouseDownX=e.getX(),this.mouseDownY=e.getY(),this.handle=i),mxEvent$1.isShiftDown(e.getEvent())||e.consume())}};mxEdgeHandler$1.prototype.start=function(t,e,i){if(this.startX=t,this.startY=e,this.isSource=this.bends==null?!1:i==0,this.isTarget=this.bends==null?!1:i==this.bends.length-1,this.isLabel=i==mxEvent$1.LABEL_HANDLE,this.isSource||this.isTarget){var n=this.state.cell,r=this.graph.model.getTerminal(n,this.isSource);(r==null&&this.graph.isTerminalPointMovable(n,this.isSource)||r!=null&&this.graph.isCellDisconnectable(n,r,this.isSource))&&(this.index=i)}else this.index=i;if(this.index<=mxEvent$1.CUSTOM_HANDLE&&this.index>mxEvent$1.VIRTUAL_HANDLE&&this.customHandles!=null)for(var l=0;l<this.customHandles.length;l++)l!=mxEvent$1.CUSTOM_HANDLE-this.index&&this.customHandles[l].setVisible(!1)};mxEdgeHandler$1.prototype.clonePreviewState=function(t,e){return this.state.clone()};mxEdgeHandler$1.prototype.getSnapToTerminalTolerance=function(){return 2};mxEdgeHandler$1.prototype.updateHint=function(t,e){};mxEdgeHandler$1.prototype.removeHint=function(){};mxEdgeHandler$1.prototype.roundLength=function(t){return Math.round(t)};mxEdgeHandler$1.prototype.isSnapToTerminalsEvent=function(t){return this.snapToTerminals&&!mxEvent$1.isAltDown(t.getEvent())};mxEdgeHandler$1.prototype.getPointForEvent=function(t){var e=this.graph.getView(),i=e.scale,n=new mxPoint$1(this.roundLength(t.getGraphX()/i)*i,this.roundLength(t.getGraphY()/i)*i),r=this.getSnapToTerminalTolerance(),l=!1,s=!1;if(r>0&&this.isSnapToTerminalsEvent(t)){let c=function(x){if(x!=null){var C=x.x;Math.abs(n.x-C)<r&&(n.x=C,l=!0);var T=x.y;Math.abs(n.y-T)<r&&(n.y=T,s=!0)}},g=function(x){x!=null&&c.call(this,new mxPoint$1(e.getRoutingCenterX(x),e.getRoutingCenterY(x)))};var d=c,p=g;g.call(this,this.state.getVisibleTerminalState(!0)),g.call(this,this.state.getVisibleTerminalState(!1));var a=this.state.absolutePoints;if(a!=null)for(var o=0;o<a.length;o++)(o>0||!this.state.isFloatingTerminalPoint(!0))&&(o<a.length-1||!this.state.isFloatingTerminalPoint(!1))&&c.call(this,this.state.absolutePoints[o])}if(this.graph.isGridEnabledEvent(t.getEvent())){var u=e.translate;l||(n.x=(this.graph.snap(n.x/i-u.x)+u.x)*i),s||(n.y=(this.graph.snap(n.y/i-u.y)+u.y)*i)}return n};mxEdgeHandler$1.prototype.getPreviewTerminalState=function(t){var e=this.getConstraintHandler();if(e.update(t,this.isSource,!0,t.isSource(this.marker.highlight.shape)?null:this.currentPoint),e.currentFocus!=null&&e.currentConstraint!=null){this.marker.highlight!=null&&this.marker.highlight.state!=null&&this.marker.highlight.state.cell==e.currentFocus.cell?this.marker.highlight.shape.stroke!="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(e.currentFocus.cell,"transparent");var i=this.graph.getModel(),n=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(i.getTerminal(this.state.cell,!this.isSource)),!this.isSource),r=n!=null?n.cell:null,l=this.isSource?e.currentFocus.cell:r,s=this.isSource?r:e.currentFocus.cell;this.error=this.validateConnection(l,s);var a=null;return this.error==null&&(a=e.currentFocus),(this.error!=null||a!=null&&!this.isCellEnabled(a.cell))&&e.reset(),a}else{if(this.graph.isIgnoreTerminalEvent(t.getEvent()))return this.marker.reset(),null;this.marker.process(t);var o=this.marker.getValidState();return o!=null&&!this.isCellEnabled(o.cell)&&(e.reset(),this.marker.reset()),this.marker.getValidState()}};mxEdgeHandler$1.prototype.getPreviewPoints=function(t,e){var i=this.graph.getCellGeometry(this.state.cell),n=i.points!=null?i.points.slice():null,r=new mxPoint$1(t.x,t.y),l=null;if(!this.isSource&&!this.isTarget)if(this.convertPoint(r,!1),n==null)n=[r];else{if(this.index<=mxEvent$1.VIRTUAL_HANDLE&&n.splice(mxEvent$1.VIRTUAL_HANDLE-this.index,0,r),!this.isSource&&!this.isTarget){for(var s=0;s<this.bends.length;s++)if(s!=this.index){var a=this.bends[s];a!=null&&mxUtils$1.contains(a.bounds,t.x,t.y)&&(this.index<=mxEvent$1.VIRTUAL_HANDLE?n.splice(mxEvent$1.VIRTUAL_HANDLE-this.index,1):n.splice(this.index-1,1),l=n)}if(l==null&&this.straightRemoveEnabled&&(e==null||!mxEvent$1.isAltDown(e.getEvent()))){let x=function(C,T){C>0&&C<u.length-1&&mxUtils$1.ptSegDistSq(u[C-1].x,u[C-1].y,u[C+1].x,u[C+1].y,T.x,T.y)<o&&(n.splice(C-1,1),l=n)};var g=x,o=this.graph.tolerance*this.graph.tolerance,u=this.state.absolutePoints.slice();u[this.index]=t;var d=this.state.getVisibleTerminalState(!0);if(d!=null){var p=this.graph.getConnectionConstraint(this.state,d,!0);(p==null||this.graph.getConnectionPoint(d,p)==null)&&(u[0]=new mxPoint$1(d.view.getRoutingCenterX(d),d.view.getRoutingCenterY(d)))}var c=this.state.getVisibleTerminalState(!1);if(c!=null){var p=this.graph.getConnectionConstraint(this.state,c,!1);(p==null||this.graph.getConnectionPoint(c,p)==null)&&(u[u.length-1]=new mxPoint$1(c.view.getRoutingCenterX(c),c.view.getRoutingCenterY(c)))}x(this.index,t)}}l==null&&this.index>mxEvent$1.VIRTUAL_HANDLE&&(n[this.index-1]=r)}else this.graph.resetEdgesOnConnect&&(n=null);return l??n};mxEdgeHandler$1.prototype.isOutlineConnectEvent=function(t){if(mxEvent$1.isShiftDown(t.getEvent())&&mxEvent$1.isAltDown(t.getEvent()))return!1;var e=mxUtils$1.getOffset(this.graph.container),i=t.getEvent(),n=mxEvent$1.getClientX(i),r=mxEvent$1.getClientY(i),l=document.documentElement,s=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),a=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),o=this.currentPoint.x-this.graph.container.scrollLeft+e.x-s,u=this.currentPoint.y-this.graph.container.scrollTop+e.y-a;return this.outlineConnect&&(mxEvent$1.isShiftDown(t.getEvent())&&!mxEvent$1.isAltDown(t.getEvent())||t.isSource(this.marker.highlight.shape)||!mxEvent$1.isShiftDown(t.getEvent())&&mxEvent$1.isAltDown(t.getEvent())&&t.getState()!=null||this.marker.highlight.isHighlightAt(n,r)||(o!=n||u!=r)&&t.getState()==null&&this.marker.highlight.isHighlightAt(o,u))};mxEdgeHandler$1.prototype.updatePreviewState=function(t,e,i,n,r){var l=this.isSource?i:this.state.getVisibleTerminalState(!0),s=this.isTarget?i:this.state.getVisibleTerminalState(!1),a=this.graph.getConnectionConstraint(t,l,!0),o=this.graph.getConnectionConstraint(t,s,!1),u=this.getConstraintHandler(),d=u.currentConstraint;if(d==null&&r&&(i!=null?(n.isSource(this.marker.highlight.shape)&&(e=new mxPoint$1(n.getGraphX(),n.getGraphY())),d=this.graph.getOutlineConstraint(e,i,n),u.setFocus(n,i,this.isSource),u.currentConstraint=d,u.currentPoint=e):d=new mxConnectionConstraint$1),this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){var p=this.graph.view.scale;u.currentConstraint!=null&&u.currentFocus!=null?(this.marker.highlight.shape.stroke=r?mxConstants$1.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants$1.OUTLINE_HIGHLIGHT_STROKEWIDTH/p/p,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(n.getCell())&&this.marker.getValidState()!=n.getState()?"transparent":mxConstants$1.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.HIGHLIGHT_STROKEWIDTH/p/p,this.marker.highlight.repaint())}this.isSource?a=d:this.isTarget&&(o=d),(this.isSource||this.isTarget)&&(d!=null&&d.point!=null?(t.style[this.isSource?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X]=d.point.x,t.style[this.isSource?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y]=d.point.y):(delete t.style[this.isSource?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X],delete t.style[this.isSource?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y])),t.setVisibleTerminalState(l,!0),t.setVisibleTerminalState(s,!1),(!this.isSource||l!=null)&&t.view.updateFixedTerminalPoint(t,l,!0,a),(!this.isTarget||s!=null)&&t.view.updateFixedTerminalPoint(t,s,!1,o),(this.isSource||this.isTarget)&&i==null&&(t.setAbsoluteTerminalPoint(e,this.isSource),this.marker.getMarkedState()==null&&(this.error=this.graph.allowDanglingEdges?null:"")),t.view.updatePoints(t,this.points,l,s),t.view.updateFloatingTerminalPoints(t,l,s)};mxEdgeHandler$1.prototype.mouseMove=function(t,e){if(this.index!=null&&this.marker!=null){var i=this.getConstraintHandler();if(this.currentPoint=this.getPointForEvent(e),this.error=null,this.snapPoint!=null&&mxEvent$1.isShiftDown(e.getEvent())&&!this.graph.isIgnoreTerminalEvent(e.getEvent())&&i.currentFocus==null&&i.currentFocus!=this.state&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent$1.CUSTOM_HANDLE&&this.index>mxEvent$1.VIRTUAL_HANDLE)this.customHandles!=null&&(this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].positionChanged(),this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display="none"));else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,e);var n=this.isSource||this.isTarget?this.getPreviewTerminalState(e):null;if(i.currentConstraint!=null&&i.currentFocus!=null&&i.currentPoint!=null)this.currentPoint=i.currentPoint.clone();else if(this.outlineConnect){var r=this.isSource||this.isTarget?this.isOutlineConnectEvent(e):!1;r?n=this.marker.highlight.state:n!=null&&n!=e.getState()&&this.graph.isCellConnectable(e.getCell())&&this.marker.highlight.shape!=null&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),n=null)}n!=null&&!this.isCellEnabled(n.cell)&&(n=null,this.marker.reset());var l=this.clonePreviewState(this.currentPoint,n!=null?n.cell:null);this.updatePreviewState(l,this.currentPoint,n,e,r);var s=this.error==null?this.marker.validColor:this.marker.invalidColor;this.setPreviewColor(s),this.abspoints=l.absolutePoints,this.active=!0,this.updateHint(e,this.currentPoint,l)}this.drawPreview(),mxEvent$1.consume(e.getEvent()),e.consume()}else if(!mxEvent$1.isShiftDown(e.getEvent())&&this.handle!=null&&this.mouseDownX!=null&&this.mouseDownY!=null){var a=this.graph.tolerance;(Math.abs(this.mouseDownX-e.getX())>a||Math.abs(this.mouseDownY-e.getY())>a)&&this.start(this.mouseDownX,this.mouseDownY,this.handle)}};mxEdgeHandler$1.prototype.mouseUp=function(t,e){if(this.index!=null&&this.marker!=null){this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display="");var i=this.state.cell,n=this.index;if(this.index=null,e.getX()!=this.startX||e.getY()!=this.startY){var r=!this.graph.isIgnoreTerminalEvent(e.getEvent())&&this.cloneEnabled&&this.graph.isCloneEvent(e.getEvent())&&this.graph.isCellsCloneable();if(this.error!=null)this.error.length>0&&this.graph.validationAlert(this.error);else if(n<=mxEvent$1.CUSTOM_HANDLE&&n>mxEvent$1.VIRTUAL_HANDLE){if(this.customHandles!=null){var l=this.graph.getModel();l.beginUpdate();try{this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].execute(e),this.shape!=null&&this.shape.node!=null&&(this.shape.apply(this.state),this.shape.redraw())}finally{l.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var s=null;if(this.constraintHandler!=null&&this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(s=this.constraintHandler.currentFocus.cell),s==null&&this.marker.hasValidState()&&this.marker.highlight!=null&&this.marker.highlight.shape!=null&&this.marker.highlight.shape.stroke!="transparent"&&this.marker.highlight.shape.stroke!="white"&&(s=this.marker.validState.cell),s!=null){var l=this.graph.getModel(),a=l.getParent(i);l.beginUpdate();try{if(r){var o=l.getGeometry(i),u=this.graph.cloneCell(i);l.add(a,u,l.getChildCount(a)),o!=null&&(o=o.clone(),l.setGeometry(u,o));var d=l.getTerminal(i,!this.isSource);this.graph.connectCell(u,d,!this.isSource),i=u}i=this.connect(i,s,this.isSource,r,e)}finally{l.endUpdate()}}else if(this.graph.isAllowDanglingEdges()){var p=this.abspoints[this.isSource?0:this.abspoints.length-1];p.x=this.roundLength(p.x/this.graph.view.scale-this.graph.view.translate.x),p.y=this.roundLength(p.y/this.graph.view.scale-this.graph.view.translate.y);var c=this.graph.getView().getState(this.graph.getModel().getParent(i));c!=null&&(p.x-=c.origin.x,p.y-=c.origin.y),p.x-=this.graph.panDx/this.graph.view.scale,p.y-=this.graph.panDy/this.graph.view.scale,i=this.changeTerminalPoint(i,p,this.isSource,r)}}else this.active?i=this.changePoints(i,this.points,r):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(e.getEvent())&&this.graph.selectCellForEvent(this.state.cell,e.getEvent());this.marker!=null&&(this.reset(),i!=this.state.cell&&this.graph.setSelectionCell(i)),e.consume()}else if(this.handle!=null&&this.bends!=null&&!mxEvent$1.isAltDown(e.getEvent())&&(this.handle==0||this.handle==this.bends.length-1)){var s=this.state.getVisibleTerminal(this.handle==0);s!=null&&(this.graph.selectCellForEvent(s,e.getEvent()),e.consume())}this.handle=null,this.mouseDownX=null,this.mouseDownY=null};mxEdgeHandler$1.prototype.reset=function(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.label=null,this.points=null,this.handle=null,this.startX=null,this.startY=null,this.mouseDownX=null,this.mouseDownY=null,this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.livePreview&&this.sizers!=null)for(var t=0;t<this.sizers.length;t++)this.sizers[t]!=null&&(this.sizers[t].node.style.display="");if(this.marker!=null&&this.marker.reset(),this.constraintHandler!=null&&this.constraintHandler.reset(),this.customHandles!=null)for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].reset();this.setPreviewColor(mxConstants$1.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()};mxEdgeHandler$1.prototype.setPreviewColor=function(t){this.shape!=null&&(this.shape.stroke=t)};mxEdgeHandler$1.prototype.convertPoint=function(t,e){var i=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/i-n.x),t.y=Math.round(t.y/i-n.y);var r=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return r!=null&&(t.x-=r.origin.x,t.y-=r.origin.y),t};mxEdgeHandler$1.prototype.moveLabel=function(t,e,i){var n=this.graph.getModel(),r=n.getGeometry(t.cell);if(r!=null){var l=this.graph.getView().scale;if(r=r.clone(),r.relative){var s=this.graph.getView().getRelativePoint(t,e,i);r.x=Math.round(s.x*1e4)/1e4,r.y=Math.round(s.y),r.offset=new mxPoint$1(0,0);var s=this.graph.view.getPoint(t,r);r.offset=new mxPoint$1(Math.round((e-s.x)/l),Math.round((i-s.y)/l))}else{var a=t.absolutePoints,o=a[0],u=a[a.length-1];if(o!=null&&u!=null){var d=o.x+(u.x-o.x)/2,p=o.y+(u.y-o.y)/2;r.offset=new mxPoint$1(Math.round((e-d)/l),Math.round((i-p)/l)),r.x=0,r.y=0}}n.setGeometry(t.cell,r)}};mxEdgeHandler$1.prototype.connect=function(t,e,i,n,r){var l=this.graph.getModel();l.beginUpdate();try{var s=this.constraintHandler!=null?this.constraintHandler.currentConstraint:null;s==null&&(s=new mxConnectionConstraint$1),this.graph.connectCell(t,e,i,s)}finally{l.endUpdate()}return t};mxEdgeHandler$1.prototype.changeTerminalPoint=function(t,e,i,n){var r=this.graph.getModel();r.beginUpdate();try{if(n){var l=r.getParent(t),s=r.getTerminal(t,!i);t=this.graph.cloneCell(t),r.add(l,t,r.getChildCount(l)),r.setTerminal(t,s,!i)}var a=r.getGeometry(t);a!=null&&(a=a.clone(),a.setTerminalPoint(e,i),r.setGeometry(t,a),this.graph.connectCell(t,null,i,new mxConnectionConstraint$1))}finally{r.endUpdate()}return t};mxEdgeHandler$1.prototype.changePoints=function(t,e,i){var n=this.graph.getModel();n.beginUpdate();try{if(i){var r=n.getParent(t),l=n.getTerminal(t,!0),s=n.getTerminal(t,!1);t=this.graph.cloneCell(t),n.add(r,t,n.getChildCount(r)),n.setTerminal(t,l,!0),n.setTerminal(t,s,!1)}var a=n.getGeometry(t);a!=null&&(a=a.clone(),a.points=e,n.setGeometry(t,a))}finally{n.endUpdate()}return t};mxEdgeHandler$1.prototype.addPoint=function(t,e){var i=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)),n=this.graph.isGridEnabledEvent(e);this.convertPoint(i,n),this.addPointAt(t,i.x,i.y),mxEvent$1.consume(e)};mxEdgeHandler$1.prototype.addPointAt=function(t,e,i){var n=this.graph.getCellGeometry(t.cell),r=new mxPoint$1(e,i);if(n!=null){n=n.clone();var l=this.graph.view.translate,s=this.graph.view.scale,a=new mxPoint$1(l.x*s,l.y*s),o=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(o)){var u=this.graph.view.getState(o);a=new mxPoint$1(u.x,u.y)}var d=mxUtils$1.findNearestSegment(t,r.x*s+a.x,r.y*s+a.y);n.points==null?n.points=[r]:n.points.splice(d,0,r),this.graph.getModel().setGeometry(t.cell,n),this.refresh(),this.redraw()}};mxEdgeHandler$1.prototype.removePoint=function(t,e){if(e>0&&e<this.abspoints.length-1){var i=this.graph.getCellGeometry(this.state.cell);i!=null&&i.points!=null&&(i=i.clone(),i.points.splice(e-1,1),this.graph.getModel().setGeometry(t.cell,i),this.refresh(),this.redraw())}};mxEdgeHandler$1.prototype.getHandleFillColor=function(t){var e=t==0,i=this.state.cell,n=this.graph.getModel().getTerminal(i,e),r=mxConstants$1.HANDLE_FILLCOLOR;return n!=null&&!this.graph.isCellDisconnectable(i,n,e)||n==null&&!this.graph.isTerminalPointMovable(i,e)?r=mxConstants$1.LOCKED_HANDLE_FILLCOLOR:n!=null&&this.graph.isCellDisconnectable(i,n,e)&&(r=mxConstants$1.CONNECT_HANDLE_FILLCOLOR),r};mxEdgeHandler$1.prototype.redraw=function(t){if(this.state!=null&&this.state.absolutePoints!=null){this.abspoints=this.state.absolutePoints.slice();var e=this.graph.getModel().getGeometry(this.state.cell);if(e!=null){var i=e.points;if(this.bends!=null&&this.bends.length>0&&i!=null){this.points==null&&(this.points=[]);for(var n=1;n<this.bends.length-1;n++)this.bends[n]!=null&&this.abspoints[n]!=null&&(this.points[n-1]=i[n-1])}}this.drawPreview(),t||this.redrawHandles()}};mxEdgeHandler$1.prototype.isTerminalHandleVisible=function(t){return!0};mxEdgeHandler$1.prototype.redrawHandles=function(){var t=this.state.cell;if(this.labelShape!=null){var e=this.labelShape.bounds;this.label=new mxPoint$1(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle$1(Math.round(this.label.x-e.width/2),Math.round(this.label.y-e.height/2),e.width,e.height);var i=this.graph.getLabel(t);this.labelShape.visible=i!=null&&i.length>0&&this.graph.isCellEditable(this.state.cell)&&this.graph.isLabelMovable(t)&&this.isHandlesVisible()}if(this.bends!=null&&this.bends.length>0){var n=this.abspoints.length-1,r=this.abspoints[0],l=r.x,s=r.y;e=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle$1(Math.floor(l-e.width/2),Math.floor(s-e.height/2),e.width,e.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds),this.bends[0].node.style.visibility=!this.isHandlesVisible()||!this.isTerminalHandleVisible(!0)?"hidden":"";var a=this.abspoints[n],o=a.x,u=a.y,d=this.bends.length-1;e=this.bends[d].bounds,this.bends[d].bounds=new mxRectangle$1(Math.floor(o-e.width/2),Math.floor(u-e.height/2),e.width,e.height),this.bends[d].fill=this.getHandleFillColor(d),this.bends[d].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[d].bounds),this.bends[d].node.style.visibility=!this.isHandlesVisible()||!this.isTerminalHandleVisible(!1)?"hidden":"",this.redrawInnerBends(r,a)}if(this.abspoints!=null&&this.virtualBends!=null&&this.virtualBends.length>0){for(var p=this.abspoints[0],c=0;c<this.virtualBends.length;c++)if(this.virtualBends[c]!=null&&this.abspoints[c+1]!=null){var g=this.abspoints[c+1],e=this.virtualBends[c],x=p.x+(g.x-p.x)/2,C=p.y+(g.y-p.y)/2;e.bounds=new mxRectangle$1(Math.floor(x-e.bounds.width/2),Math.floor(C-e.bounds.height/2),e.bounds.width,e.bounds.height),e.redraw(),mxUtils$1.setOpacity(e.node,this.virtualBendOpacity),p=g,this.manageLabelHandle&&this.checkLabelHandle(e.bounds),e.node.style.visibility=this.isHandlesVisible()?"":"hidden"}}if(this.labelShape!=null&&this.labelShape.redraw(),this.customHandles!=null)for(var c=0;c<this.customHandles.length;c++){var T=this.customHandles[c].shape.node.style.display;this.customHandles[c].redraw(),this.customHandles[c].shape.node.style.display=T,this.customHandles[c].shape.node.style.visibility=this.graph.isEditing()||!this.isHandlesVisible()||!this.isCustomHandleVisible(this.customHandles[c])?"hidden":""}};mxEdgeHandler$1.prototype.isCustomHandleVisible=function(t){return this.state.view.graph.getSelectionCount()==1};mxEdgeHandler$1.prototype.setHandlesVisible=function(t){if(this.bends!=null)for(var e=0;e<this.bends.length;e++)this.bends[e]!=null&&(this.bends[e].node.style.display=t?"":"none");if(this.virtualBends!=null)for(var e=0;e<this.virtualBends.length;e++)this.virtualBends[e]!=null&&(this.virtualBends[e].node.style.display=t?"":"none");if(this.labelShape!=null&&(this.labelShape.node.style.display=t?"":"none"),this.customHandles!=null)for(var e=0;e<this.customHandles.length;e++)this.customHandles[e].setVisible(t)};mxEdgeHandler$1.prototype.redrawInnerBends=function(t,e){for(var i=1;i<this.bends.length-1;i++)if(this.bends[i]!=null)if(this.abspoints[i]!=null){var n=this.abspoints[i].x,r=this.abspoints[i].y,l=this.bends[i].bounds;this.bends[i].bounds=new mxRectangle$1(Math.round(n-l.width/2),Math.round(r-l.height/2),l.width,l.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[i].bounds):this.handleImage==null&&this.labelShape.visible&&mxUtils$1.intersects(this.bends[i].bounds,this.labelShape.bounds)&&(w=mxConstants$1.HANDLE_SIZE+3,h=mxConstants$1.HANDLE_SIZE+3,this.bends[i].bounds=new mxRectangle$1(Math.round(n-w/2),Math.round(r-h/2),w,h)),this.bends[i].redraw(),this.bends[i].node.style.visibility=this.isHandlesVisible()?"":"hidden"}else this.bends[i].destroy(),this.bends[i]=null};mxEdgeHandler$1.prototype.checkLabelHandle=function(t){if(this.labelShape!=null){var e=this.labelShape.bounds;mxUtils$1.intersects(t,e)&&(t.getCenterY()<e.getCenterY()?e.y=t.y+t.height:e.y=t.y-e.height)}};mxEdgeHandler$1.prototype.drawPreview=function(){try{if(this.isLabel){var t=this.labelShape.bounds,e=new mxRectangle$1(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height);this.labelShape.bounds.equals(e)||(this.labelShape.bounds=e,this.labelShape.redraw())}this.shape!=null&&!mxUtils$1.equalPoints(this.shape.points,this.abspoints)&&(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch{}};mxEdgeHandler$1.prototype.isHandlesVisible=function(){return!this.graph.isCellLocked(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<=mxGraphHandler.prototype.maxCells)};mxEdgeHandler$1.prototype.refresh=function(){this.state!=null&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],this.shape!=null&&(this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.isShadow=!1,this.shape.redraw()),this.bends!=null&&(this.destroyBends(this.bends),this.bends=null),this.isHandlesVisible()&&(this.bends=this.createBends()),this.virtualBends!=null&&(this.destroyBends(this.virtualBends),this.virtualBends=null),this.isHandlesVisible()&&(this.virtualBends=this.createVirtualBends()),this.customHandles!=null&&(this.destroyBends(this.customHandles),this.customHandles=null),this.isHandlesVisible()&&(this.customHandles=this.createCustomHandles()),this.labelShape!=null&&(this.labelShape.destroy(),this.labelShape=null),this.isHandlesVisible()&&(this.labelShape=this.createLabelShape(),this.labelShape!=null&&this.labelShape.node!=null&&this.labelShape.node.parentNode!=null&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)))};mxEdgeHandler$1.prototype.isDestroyed=function(){return this.shape==null};mxEdgeHandler$1.prototype.destroyBends=function(t){if(t!=null)for(var e=0;e<t.length;e++)t[e]!=null&&t[e].destroy()};mxEdgeHandler$1.prototype.destroy=function(){this.escapeHandler!=null&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.marker!=null&&(this.marker.destroy(),this.marker=null),this.shape!=null&&(this.shape.destroy(),this.shape=null),this.labelShape!=null&&(this.labelShape.destroy(),this.labelShape=null),this.constraintHandler!=null&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.parentHighlight!=null&&this.destroyParentHighlight(),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()};const{mxResourceExtension}=mxClient$1;var mxResources$1={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(t){return mxClient$1.languages!=null?mxUtils.indexOf(mxClient$1.languages,t)>=0:!0},getDefaultBundle:function(t,e){return mxResources$1.loadDefaultBundle||!mxResources$1.isLanguageSupported(e)?t+mxResources$1.extension:null},getSpecialBundle:function(t,e){if(mxClient$1.languages==null||!this.isLanguageSupported(e)){var i=e.indexOf("-");i>0&&(e=e.substring(0,i))}return mxResources$1.loadSpecialBundle&&mxResources$1.isLanguageSupported(e)&&e!=mxClient$1.defaultLanguage?t+"_"+e+mxResources$1.extension:null},add:function(t,e,i){if(e=e??(mxClient$1.language!=null?mxClient$1.language.toLowerCase():mxConstants.NONE),e!=mxConstants.NONE){var n=mxResources$1.getDefaultBundle(t,e),r=mxResources$1.getSpecialBundle(t,e),l=function(){if(r!=null)if(i)mxUtils.get(r,function(o){mxResources$1.parse(o.getText()),i()},function(){i()});else try{var a=mxUtils.load(r);a.isReady()&&mxResources$1.parse(a.getText())}catch{}else i!=null&&i()};if(n!=null)if(i)mxUtils.get(n,function(a){mxResources$1.parse(a.getText()),l()},function(){l()});else try{var s=mxUtils.load(n);s.isReady()&&mxResources$1.parse(s.getText()),l()}catch{}else l()}},parse:function(t){if(t!=null){for(var e=t.split(`
`),i=0;i<e.length;i++)if(e[i].charAt(0)!="#"){var n=e[i].indexOf("=");if(n>0){var r=e[i].substring(0,n),l=e[i].length;e[i].charCodeAt(l-1)==13&&l--;var s=e[i].substring(n+1,l);this.resourcesEncoded?(s=s.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources$1.resources[r]=unescape(s)):mxResources$1.resources[r]=s}}}},get:function(t,e,i){var n=mxResources$1.resources[t];return n==null&&(n=i),n!=null&&e!=null&&(n=mxResources$1.replacePlaceholders(n,e)),n},replacePlaceholders:function(t,e){for(var i=[],n=null,r=0;r<t.length;r++){var l=t.charAt(r);l=="{"?n="":n!=null&&l=="}"?(n=parseInt(n)-1,n>=0&&n<e.length&&i.push(e[n]),n=null):n!=null?n+=l:i.push(l)}return i.join("")},loadResources:function(t){mxResources$1.add(mxClient$1.basePath+"/resources/editor",null,function(){mxResources$1.add(mxClient$1.basePath+"/resources/graph",null,t)})}};function mxElbowEdgeHandler$1(t){mxEdgeHandler$1.call(this,t)}mxUtils$1.extend(mxElbowEdgeHandler$1,mxEdgeHandler$1);mxElbowEdgeHandler$1.prototype.flipEnabled=!0;mxElbowEdgeHandler$1.prototype.doubleClickOrientationResource=mxClient$1.language!="none"?"doubleClickOrientation":"";mxElbowEdgeHandler$1.prototype.createBends=function(){var t=[],e=this.createHandleShape(0);return this.initBend(e),e.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),t.push(e),t.push(this.createVirtualBend(mxUtils$1.bind(this,function(i){!mxEvent$1.isConsumed(i)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,i),mxEvent$1.consume(i))}))),this.points.push(new mxPoint$1(0,0)),e=this.createHandleShape(2,null,!0),this.initBend(e),e.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),t.push(e),t};mxElbowEdgeHandler$1.prototype.createVirtualBends=function(){return null};mxElbowEdgeHandler$1.prototype.createVirtualBend=function(t){var e=this.createHandleShape();return this.initBend(e,t),e.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(e.node.style.display="none"),e};mxElbowEdgeHandler$1.prototype.getCursorForBend=function(){return this.state.style[mxConstants$1.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants$1.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.EDGESTYLE_ELBOW)&&this.state.style[mxConstants$1.STYLE_ELBOW]==mxConstants$1.ELBOW_VERTICAL?"row-resize":"col-resize"};mxElbowEdgeHandler$1.prototype.getTooltipForNode=function(t){var e=null;return this.bends!=null&&this.bends[1]!=null&&(t==this.bends[1].node||t.parentNode==this.bends[1].node)&&(e=this.doubleClickOrientationResource,e=mxResources$1.get(e)||e),e};mxElbowEdgeHandler$1.prototype.convertPoint=function(t,e){var i=this.graph.getView().getScale(),n=this.graph.getView().getTranslate(),r=this.state.origin;return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/i-n.x-r.x),t.y=Math.round(t.y/i-n.y-r.y),t};mxElbowEdgeHandler$1.prototype.redrawInnerBends=function(t,e){var i=this.graph.getModel().getGeometry(this.state.cell),n=this.state.absolutePoints,r=null;n.length>1?(t=n[1],e=n[n.length-2]):i.points!=null&&i.points.length>0&&(r=n[0]),r==null?r=new mxPoint$1(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2):r=new mxPoint$1(this.graph.getView().scale*(r.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(r.y+this.graph.getView().translate.y+this.state.origin.y));var l=this.bends[1].bounds,s=l.width,a=l.height,o=new mxRectangle$1(Math.round(r.x-s/2),Math.round(r.y-a/2),s,a);this.manageLabelHandle?this.checkLabelHandle(o):this.handleImage==null&&this.labelShape.visible&&mxUtils$1.intersects(o,this.labelShape.bounds)&&(s=mxConstants$1.HANDLE_SIZE+3,a=mxConstants$1.HANDLE_SIZE+3,o=new mxRectangle$1(Math.floor(r.x-s/2),Math.floor(r.y-a/2),s,a)),this.bends[1].bounds=o,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)};function mxEdgeSegmentHandler(t){mxEdgeHandler.call(this,t)}mxUtils$1.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler$1);mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var t=this.state.absolutePoints;if(t!=null){var e=Math.max(1,this.graph.view.scale);if(t.length==2||t.length==3&&(Math.abs(t[0].x-t[1].x)<e&&Math.abs(t[1].x-t[2].x)<e||Math.abs(t[0].y-t[1].y)<e&&Math.abs(t[1].y-t[2].y)<e)){var i=t[0].x+(t[t.length-1].x-t[0].x)/2,n=t[0].y+(t[t.length-1].y-t[0].y)/2;t=[t[0],new mxPoint$1(i,n),new mxPoint$1(i,n),t[t.length-1]]}}return t};mxEdgeSegmentHandler.prototype.getPreviewPoints=function(t){if(this.isSource||this.isTarget)return mxElbowEdgeHandler$1.prototype.getPreviewPoints.apply(this,arguments);var e=this.getCurrentPoints(),i=this.convertPoint(e[0].clone(),!1);t=this.convertPoint(t.clone(),!1);for(var n=[],r=1;r<e.length;r++){var l=this.convertPoint(e[r].clone(),!1);r==this.index&&(Math.round(i.x-l.x)==0&&(i.x=t.x,l.x=t.x),Math.round(i.y-l.y)==0&&(i.y=t.y,l.y=t.y)),r<e.length-1&&n.push(l),i=l}if(n.length==1){var s=this.state.getVisibleTerminalState(!0),a=this.state.getVisibleTerminalState(!1),o=this.state.view.getScale(),u=this.state.view.getTranslate(),d=n[0].x*o+u.x,p=n[0].y*o+u.y;(s!=null&&mxUtils$1.contains(s,d,p)||a!=null&&mxUtils$1.contains(a,d,p))&&(n=[t,t])}return n};mxEdgeSegmentHandler.prototype.updatePreviewState=function(t,e,i,n){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){e=this.convertPoint(e.clone(),!1);for(var r=t.absolutePoints,l=r[0],s=r[1],a=[],o=2;o<r.length;o++){var u=r[o];(Math.round(l.x-s.x)!=0||Math.round(s.x-u.x)!=0)&&(Math.round(l.y-s.y)!=0||Math.round(s.y-u.y)!=0)&&a.push(this.convertPoint(s.clone(),!1)),l=s,s=u}var d=this.state.getVisibleTerminalState(!0),p=this.state.getVisibleTerminalState(!1),c=this.state.absolutePoints;if(a.length==0&&(Math.round(r[0].x-r[r.length-1].x)==0||Math.round(r[0].y-r[r.length-1].y)==0))a=[e,e];else if(r.length==5&&a.length==2&&d!=null&&p!=null&&c!=null&&Math.round(c[0].x-c[c.length-1].x)==0){var g=this.graph.getView(),x=g.getScale(),C=g.getTranslate(),T=g.getRoutingCenterY(d)/x-C.y,A=this.graph.getConnectionConstraint(t,d,!0);if(A!=null){var R=this.graph.getConnectionPoint(d,A);R!=null&&(this.convertPoint(R,!1),T=R.y)}var _=g.getRoutingCenterY(p)/x-C.y,N=this.graph.getConnectionConstraint(t,p,!1);if(N){var R=this.graph.getConnectionPoint(p,N);R!=null&&(this.convertPoint(R,!1),_=R.y)}a=[new mxPoint$1(e.x,T),new mxPoint$1(e.x,_)]}this.points=a,t.view.updateFixedTerminalPoints(t,d,p),t.view.updatePoints(t,this.points,d,p),t.view.updateFloatingTerminalPoints(t,d,p)}};mxEdgeSegmentHandler.prototype.connect=function(t,e,i,n,r){var l=this.graph.getModel(),s=l.getGeometry(t),a=null;if(s!=null&&s.points!=null&&s.points.length>0){var o=this.abspoints,u=o[0],d=o[1];a=[];for(var p=2;p<o.length;p++){var c=o[p];(Math.round(u.x-d.x)!=0||Math.round(d.x-c.x)!=0)&&(Math.round(u.y-d.y)!=0||Math.round(d.y-c.y)!=0)&&a.push(this.convertPoint(d.clone(),!1)),u=d,d=c}}l.beginUpdate();try{if(a!=null){var s=l.getGeometry(t);s!=null&&(s=s.clone(),s.points=a,l.setGeometry(t,s))}t=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{l.endUpdate()}return t};mxEdgeSegmentHandler.prototype.getTooltipForNode=function(t){return null};mxEdgeSegmentHandler.prototype.start=function(t,e,i){mxEdgeHandler.prototype.start.apply(this,arguments),this.bends!=null&&this.bends[i]!=null&&!this.isSource&&!this.isTarget&&mxUtils$1.setOpacity(this.bends[i].node,100)};mxEdgeSegmentHandler.prototype.createBends=function(){var t=[],e=this.getCurrentPoints();if(e!=null){var r=this.createHandleShape(0);if(this.initBend(r),r.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),t.push(r),this.graph.isCellBendable(this.state.cell)){this.points==null&&(this.points=[]);for(var i=0;i<e.length-1;i++){r=this.createVirtualBend(),t.push(r);var n=Math.round(e[i].x-e[i+1].x)==0;Math.round(e[i].y-e[i+1].y)==0&&i<e.length-2&&(n=Math.round(e[i].x-e[i+2].x)==0),r.setCursor(n?"col-resize":"row-resize"),this.points.push(new mxPoint$1(0,0))}}var r=this.createHandleShape(e.length,null,!0);this.initBend(r),r.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),t.push(r)}return t};mxEdgeSegmentHandler.prototype.createVirtualBends=function(){return null};mxEdgeSegmentHandler.prototype.redrawInnerBends=function(t,e){if(this.graph.isCellBendable(this.state.cell)){var i=this.getCurrentPoints();if(i!=null&&i.length>1){var n=!1;if(i.length==4&&Math.round(i[1].x-i[2].x)==0&&Math.round(i[1].y-i[2].y)==0)if(n=!0,Math.round(i[0].y-i[i.length-1].y)==0){var r=i[0].x+(i[i.length-1].x-i[0].x)/2;i[1]=new mxPoint$1(r,i[1].y),i[2]=new mxPoint$1(r,i[2].y)}else{var l=i[0].y+(i[i.length-1].y-i[0].y)/2;i[1]=new mxPoint$1(i[1].x,l),i[2]=new mxPoint$1(i[2].x,l)}for(var s=0;s<i.length-1;s++)if(this.bends[s+1]!=null){var t=i[s],e=i[s+1],a=new mxPoint$1(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2),o=this.bends[s+1].bounds;this.bends[s+1].bounds=new mxRectangle$1(Math.floor(a.x-o.width/2),Math.floor(a.y-o.height/2),o.width,o.height),this.bends[s+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[s+1].bounds)}n&&(mxUtils$1.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils$1.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}};function mxHandle$1(t,e,i,n){this.graph=t.view.graph,this.state=t,this.cursor=e??this.cursor,this.image=i??this.image,this.shape=n??null,this.init()}mxHandle$1.prototype.cursor="default";mxHandle$1.prototype.image=null;mxHandle$1.prototype.ignoreGrid=!1;mxHandle$1.prototype.getPosition=function(t){};mxHandle$1.prototype.setPosition=function(t,e,i){};mxHandle$1.prototype.execute=function(t){};mxHandle$1.prototype.copyStyle=function(t){this.graph.setCellStyles(t,this.state.style[t],[this.state.cell])};mxHandle$1.prototype.processEvent=function(t){var e=this.graph.view.scale,i=this.graph.view.translate,n=new mxPoint$1(t.getGraphX()/e-i.x,t.getGraphY()/e-i.y);this.shape!=null&&this.shape.bounds!=null&&(n.x-=this.shape.bounds.width/e/4,n.y-=this.shape.bounds.height/e/4);var r=-mxUtils$1.toRadians(this.getRotation()),l=-mxUtils$1.toRadians(this.getTotalRotation())-r;n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,r),this.ignoreGrid||!this.graph.isGridEnabledEvent(t.getEvent())),l)),this.setPosition(this.state.getPaintBounds(),n,t),this.redraw()};mxHandle$1.prototype.positionChanged=function(){this.state.text!=null&&this.state.text.apply(this.state),this.state.shape!=null&&this.graph.cellRenderer.configureShape(this.state),this.graph.cellRenderer.redraw(this.state,!0)};mxHandle$1.prototype.getRotation=function(){return this.state.shape!=null?this.state.shape.getRotation():0};mxHandle$1.prototype.getTotalRotation=function(){return this.state.shape!=null?this.state.shape.getShapeRotation():0};mxHandle$1.prototype.init=function(){var t=this.isHtmlRequired();this.image!=null?(this.shape=new mxImageShape(new mxRectangle$1(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):this.shape==null&&(this.shape=this.createShape(t)),this.initShape(t)};mxHandle$1.prototype.createShape=function(t){var e=new mxRectangle$1(0,0,mxConstants$1.HANDLE_SIZE,mxConstants$1.HANDLE_SIZE);return new mxRectangleShape(e,mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)};mxHandle$1.prototype.initShape=function(t){t&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants$1.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,this.cursor!=null&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor};mxHandle$1.prototype.redraw=function(){if(this.shape!=null&&this.state.shape!=null){var t=this.getPosition(this.state.getPaintBounds());if(t!=null){var e=mxUtils$1.toRadians(this.getTotalRotation());t=this.rotatePoint(this.flipPoint(t),e);var i=this.graph.view.scale,n=this.graph.view.translate;this.shape.bounds.x=Math.floor((t.x+n.x)*i-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((t.y+n.y)*i-this.shape.bounds.height/2),this.shape.redraw()}}};mxHandle$1.prototype.isHtmlRequired=function(){return this.state.text!=null&&this.state.text.node.parentNode==this.graph.container};mxHandle$1.prototype.rotatePoint=function(t,e){var i=this.state.getCellBounds(),n=new mxPoint$1(i.getCenterX(),i.getCenterY()),r=Math.cos(e),l=Math.sin(e);return mxUtils$1.getRotatedPoint(t,r,l,n)};mxHandle$1.prototype.flipPoint=function(t){if(this.state.shape!=null){var e=this.state.getCellBounds();this.state.shape.flipH&&(t.x=2*e.x+e.width-t.x),this.state.shape.flipV&&(t.y=2*e.y+e.height-t.y)}return t};mxHandle$1.prototype.snapPoint=function(t,e){return e||(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t};mxHandle$1.prototype.setVisible=function(t){this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display=t?"":"none")};mxHandle$1.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()};mxHandle$1.prototype.destroy=function(){this.shape!=null&&(this.shape.destroy(),this.shape=null)};function mxKeyHandler(t,e){t!=null&&(this.graph=t,this.target=e||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils$1.bind(this,function(i){this.keyDown(i)}),mxEvent$1.addListener(this.target,"keydown",this.keydownHandler),mxClient$1.IS_IE&&mxEvent$1.addListener(window,"unload",mxUtils$1.bind(this,function(){this.destroy()})))}mxKeyHandler.prototype.graph=null;mxKeyHandler.prototype.target=null;mxKeyHandler.prototype.normalKeys=null;mxKeyHandler.prototype.shiftKeys=null;mxKeyHandler.prototype.controlKeys=null;mxKeyHandler.prototype.controlShiftKeys=null;mxKeyHandler.prototype.enabled=!0;mxKeyHandler.prototype.isEnabled=function(){return this.enabled};mxKeyHandler.prototype.setEnabled=function(t){this.enabled=t};mxKeyHandler.prototype.bindKey=function(t,e){this.normalKeys[t]=e};mxKeyHandler.prototype.bindShiftKey=function(t,e){this.shiftKeys[t]=e};mxKeyHandler.prototype.bindControlKey=function(t,e){this.controlKeys[t]=e};mxKeyHandler.prototype.bindControlShiftKey=function(t,e){this.controlShiftKeys[t]=e};mxKeyHandler.prototype.isControlDown=function(t){return mxEvent$1.isControlDown(t)};mxKeyHandler.prototype.getFunction=function(t){return t!=null&&!mxEvent$1.isAltDown(t)?this.isControlDown(t)?mxEvent$1.isShiftDown(t)?this.controlShiftKeys[t.keyCode]:this.controlKeys[t.keyCode]:mxEvent$1.isShiftDown(t)?this.shiftKeys[t.keyCode]:this.normalKeys[t.keyCode]:null};mxKeyHandler.prototype.isGraphEvent=function(t){var e=mxEvent$1.getSource(t);return e==this.target||e.parentNode==this.target||this.graph.cellEditor!=null&&this.graph.cellEditor.isEventSource(t)?!0:mxUtils$1.isAncestorNode(this.graph.container,e)};mxKeyHandler.prototype.keyDown=function(t){if(this.isEnabledForEvent(t)){if(t.keyCode==27)this.escape(t);else if(!this.isEventIgnored(t)){var e=this.getFunction(t);e!=null&&(e(t),mxEvent$1.consume(t))}}};mxKeyHandler.prototype.isEnabledForEvent=function(t){return this.graph.isEnabled()&&!mxEvent$1.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()};mxKeyHandler.prototype.isEventIgnored=function(t){return this.graph.isEditing()};mxKeyHandler.prototype.escape=function(t){this.graph.isEscapeEnabled()&&this.graph.escape(t)};mxKeyHandler.prototype.destroy=function(){this.target!=null&&this.keydownHandler!=null&&(mxEvent$1.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null};function mxPanningHandler(t){t!=null&&(this.graph=t,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils$1.bind(this,function(e,i){var n=i.getProperty("eventName"),r=i.getProperty("event");n==mxEvent$1.MOUSE_DOWN&&this.isForcePanningEvent(r)&&(this.start(r),this.active=!0,this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_START,"event",r)),r.consume())}),this.graph.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils$1.bind(this,function(e,i){if(this.isPinchEnabled()){var n=i.getProperty("event");!mxEvent$1.isConsumed(n)&&n.type=="gesturestart"?(this.initialScale=this.graph.view.scale,!this.active&&this.mouseDownEvent!=null&&(this.start(this.mouseDownEvent),this.mouseDownEvent=null)):n.type=="gestureend"&&this.initialScale!=null&&(this.initialScale=null),this.initialScale!=null&&this.zoomGraph(n)}}),this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils$1.bind(this,function(){this.active&&this.reset()}),mxEvent$1.addGestureListeners(document,null,null,this.mouseUpListener),mxEvent$1.addListener(document,"mouseleave",this.mouseUpListener))}mxPanningHandler.prototype=new mxEventSource;mxPanningHandler.prototype.constructor=mxPanningHandler;mxPanningHandler.prototype.graph=null;mxPanningHandler.prototype.useLeftButtonForPanning=!1;mxPanningHandler.prototype.usePopupTrigger=!0;mxPanningHandler.prototype.ignoreCell=!1;mxPanningHandler.prototype.previewEnabled=!0;mxPanningHandler.prototype.useGrid=!1;mxPanningHandler.prototype.panningEnabled=!0;mxPanningHandler.prototype.pinchEnabled=!0;mxPanningHandler.prototype.maxScale=8;mxPanningHandler.prototype.minScale=.01;mxPanningHandler.prototype.dx=null;mxPanningHandler.prototype.dy=null;mxPanningHandler.prototype.startX=0;mxPanningHandler.prototype.startY=0;mxPanningHandler.prototype.isActive=function(){return this.active||this.initialScale!=null};mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled};mxPanningHandler.prototype.setPanningEnabled=function(t){this.panningEnabled=t};mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled};mxPanningHandler.prototype.setPinchEnabled=function(t){this.pinchEnabled=t};mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return this.useLeftButtonForPanning&&t.getState()==null&&mxEvent$1.isLeftMouseButton(e)||mxEvent$1.isControlDown(e)&&mxEvent$1.isShiftDown(e)||this.usePopupTrigger&&mxEvent$1.isPopupTrigger(e)};mxPanningHandler.prototype.isForcePanningEvent=function(t){return this.ignoreCell||mxEvent$1.isMultiTouchEvent(t.getEvent())};mxPanningHandler.prototype.mouseDown=function(t,e){this.mouseDownEvent=e,!e.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(e)&&(this.start(e),this.consumePanningTrigger(e))};mxPanningHandler.prototype.start=function(t){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=t.getX(),this.startY=t.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0};mxPanningHandler.prototype.consumePanningTrigger=function(t){t.consume()};mxPanningHandler.prototype.mouseMove=function(t,e){if(this.dx=e.getX()-this.startX,this.dy=e.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject$1(mxEvent$1.PAN,"event",e));else if(this.panningTrigger){var i=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!i&&this.active&&this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_START,"event",e))}(this.active||this.panningTrigger)&&e.consume()};mxPanningHandler.prototype.mouseUp=function(t,e){if(this.active){if(this.dx!=null&&this.dy!=null){if(!this.graph.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.graph.container)){var i=this.graph.getView().scale,n=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(n.x+this.dx/i,n.y+this.dy/i)}e.consume()}this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_END,"event",e))}this.reset()};mxPanningHandler.prototype.zoomGraph=function(t){var e=Math.round(this.initialScale*t.scale*100)/100;this.minScale!=null&&(e=Math.max(this.minScale,e)),this.maxScale!=null&&(e=Math.min(this.maxScale,e)),this.graph.view.scale!=e&&(this.graph.zoomTo(e),mxEvent$1.consume(t))};mxPanningHandler.prototype.reset=function(){this.graph.isMouseDown=!1,this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null};mxPanningHandler.prototype.panGraph=function(t,e){this.graph.getView().setTranslate(t,e)};mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent$1.removeGestureListeners(document,null,null,this.mouseUpListener),mxEvent$1.removeListener(document,"mouseleave",this.mouseUpListener)};function mxPopupMenu$1(t){this.factoryMethod=t,t!=null&&this.init()}mxPopupMenu$1.prototype=new mxEventSource;mxPopupMenu$1.prototype.constructor=mxPopupMenu$1;mxPopupMenu$1.prototype.submenuImage=mxClient$1.imageBasePath+"/submenu.gif";mxPopupMenu$1.prototype.zIndex=10006;mxPopupMenu$1.prototype.factoryMethod=null;mxPopupMenu$1.prototype.useLeftButtonForPopup=!1;mxPopupMenu$1.prototype.enabled=!0;mxPopupMenu$1.prototype.itemCount=0;mxPopupMenu$1.prototype.autoExpand=!1;mxPopupMenu$1.prototype.smartSeparators=!1;mxPopupMenu$1.prototype.labels=!0;mxPopupMenu$1.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent$1.disableContextMenu(this.div)};mxPopupMenu$1.prototype.isEnabled=function(){return this.enabled};mxPopupMenu$1.prototype.setEnabled=function(t){this.enabled=t};mxPopupMenu$1.prototype.isPopupTrigger=function(t){return t.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent$1.isLeftMouseButton(t.getEvent())};mxPopupMenu$1.prototype.addItem=function(t,e,i,n,r,l,s,a){n=n||this,this.itemCount++,n.willAddSeparator&&(n.containsItems&&this.addSeparator(n,!0),n.willAddSeparator=!1),n.containsItems=!0;var o=document.createElement("tr");o.className="mxPopupMenuItem";var u=document.createElement("td");if(u.className="mxPopupMenuIcon",e!=null){var d=document.createElement("img");d.src=e,u.appendChild(d)}else if(r!=null){var p=document.createElement("div");p.className=r,u.appendChild(p)}if(o.appendChild(u),this.labels){var c=document.createElement("td");c.className="mxPopupMenuItem"+(l!=null&&!l?" mxDisabled":""),mxUtils.write(c,t),c.align="left",o.appendChild(c);var g=document.createElement("td");g.className="mxPopupMenuItem"+(l!=null&&!l?" mxDisabled":""),g.style.paddingRight="6px",g.style.textAlign="right",o.appendChild(g),n.div==null&&this.createSubmenu(n)}if(n.tbody.appendChild(o),s!=!1&&l!=!1){var x=null;mxEvent$1.addGestureListeners(o,mxUtils.bind(this,function(C){this.eventReceiver=o,n.activeRow!=o&&n.activeRow!=n&&(n.activeRow!=null&&n.activeRow.div.parentNode!=null&&this.hideSubmenu(n),o.div!=null&&(this.showSubmenu(n,o),n.activeRow=o)),document.selection!=null&&document.documentMode==8&&(x=document.selection.createRange()),mxEvent$1.consume(C)}),mxUtils.bind(this,function(C){n.activeRow!=o&&n.activeRow!=n&&(n.activeRow!=null&&n.activeRow.div.parentNode!=null&&this.hideSubmenu(n),this.autoExpand&&o.div!=null&&(this.showSubmenu(n,o),n.activeRow=o)),a||(o.className="mxPopupMenuItemHover")}),mxUtils.bind(this,function(C){if(this.eventReceiver==o){if(n.activeRow!=o&&this.hideMenu(),x!=null){try{x.select()}catch{}x=null}i!=null&&i(C)}this.eventReceiver=null,mxEvent$1.consume(C)})),a||mxEvent$1.addListener(o,"mouseout",mxUtils.bind(this,function(C){o.className="mxPopupMenuItem"}))}return o};mxPopupMenu$1.prototype.addCheckmark=function(t,e){var i=t.firstChild.nextSibling;i.style.backgroundImage="url('"+e+"')",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="2px 50%"};mxPopupMenu$1.prototype.createSubmenu=function(t){t.table=document.createElement("table"),t.table.className="mxPopupMenu",t.tbody=document.createElement("tbody"),t.table.appendChild(t.tbody),t.div=document.createElement("div"),t.div.className="mxPopupMenu",t.div.style.position="absolute",t.div.style.display="inline",t.div.style.zIndex=this.zIndex,t.div.appendChild(t.table);var e=document.createElement("img");e.setAttribute("src",this.submenuImage),td=t.firstChild.nextSibling.nextSibling,td.appendChild(e)};mxPopupMenu$1.prototype.showSubmenu=function(t,e){if(e.div!=null){e.div.style.left=t.div.offsetLeft+e.offsetLeft+e.offsetWidth-1+"px",e.div.style.top=t.div.offsetTop+e.offsetTop+"px",document.body.appendChild(e.div);var i=parseInt(e.div.offsetLeft),n=parseInt(e.div.offsetWidth),r=mxUtils.getDocumentScrollOrigin(document),l=document.body,s=document.documentElement,a=r.x+(l.clientWidth||s.clientWidth);i+n>a&&(e.div.style.left=Math.max(0,t.div.offsetLeft-n+16)+"px"),e.div.style.overflowY="auto",e.div.style.overflowX="hidden";var o=Math.max(document.body.clientHeight,document.documentElement.clientHeight);e.div.style.maxHeight=o-10+"px",mxUtils.fit(e.div)}};mxPopupMenu$1.prototype.addSeparator=function(t,e){if(t=t||this,this.smartSeparators&&!e)t.willAddSeparator=!0;else if(t.tbody!=null){t.willAddSeparator=!1;var i=document.createElement("tr"),n=document.createElement("td");n.className="mxPopupMenuIcon",n.style.padding="0 0 0 0px",i.appendChild(n);var r=document.createElement("td");r.style.padding="0 0 0 0px",r.setAttribute("colSpan","2");var l=document.createElement("hr");l.setAttribute("size","1"),r.appendChild(l),i.appendChild(r),t.tbody.appendChild(i)}};mxPopupMenu$1.prototype.popup=function(t,e,i,n){if(this.div!=null&&this.tbody!=null&&this.factoryMethod!=null){for(this.div.style.left=t+"px",this.div.style.top=e+"px";this.tbody.firstChild!=null;)mxEvent$1.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,i,n),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject$1(mxEvent$1.SHOW)))}};mxPopupMenu$1.prototype.isMenuShowing=function(){return this.div!=null&&this.div.parentNode==document.body};mxPopupMenu$1.prototype.showMenu=function(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)};mxPopupMenu$1.prototype.hideMenu=function(){this.div!=null&&(this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject$1(mxEvent$1.HIDE)))};mxPopupMenu$1.prototype.hideSubmenu=function(t){t.activeRow!=null&&(this.hideSubmenu(t.activeRow),t.activeRow.div.parentNode!=null&&t.activeRow.div.parentNode.removeChild(t.activeRow.div),t.activeRow=null)};mxPopupMenu$1.prototype.destroy=function(){this.div!=null&&(mxEvent$1.release(this.div),this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.div=null)};function mxPopupMenuHandler(t,e){t!=null&&(this.graph=t,this.factoryMethod=e,this.graph.addMouseListener(this),this.gestureHandler=mxUtils$1.bind(this,function(i,n){this.inTolerance=!1}),this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),this.init())}mxPopupMenuHandler.prototype=new mxPopupMenu$1;mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler;mxPopupMenuHandler.prototype.graph=null;mxPopupMenuHandler.prototype.selectOnPopup=!0;mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0;mxPopupMenuHandler.prototype.triggerX=null;mxPopupMenuHandler.prototype.triggerY=null;mxPopupMenuHandler.prototype.screenX=null;mxPopupMenuHandler.prototype.screenY=null;mxPopupMenuHandler.prototype.init=function(){mxPopupMenu$1.prototype.init.apply(this),mxEvent$1.addGestureListeners(this.div,mxUtils$1.bind(this,function(t){this.graph.tooltipHandler.hide()}))};mxPopupMenuHandler.prototype.isSelectOnPopup=function(t){return this.selectOnPopup};mxPopupMenuHandler.prototype.mouseDown=function(t,e){this.isEnabled()&&!mxEvent$1.isMultiTouchEvent(e.getEvent())&&(this.hideMenu(),this.triggerX=e.getGraphX(),this.triggerY=e.getGraphY(),this.screenX=mxEvent$1.getMainEvent(e.getEvent()).screenX,this.screenY=mxEvent$1.getMainEvent(e.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(e),this.inTolerance=!0)};mxPopupMenuHandler.prototype.mouseMove=function(t,e){this.inTolerance&&this.screenX!=null&&this.screenY!=null&&(Math.abs(mxEvent$1.getMainEvent(e.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent$1.getMainEvent(e.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)};mxPopupMenuHandler.prototype.mouseUp=function(t,e,i){var n=i==null;if(i=i??mxUtils$1.bind(this,function(l){var s=mxUtils$1.getScrollOrigin();this.popup(e.getX()+s.x+1,e.getY()+s.y+1,l,e.getEvent())}),this.popupTrigger&&this.inTolerance&&this.triggerX!=null&&this.triggerY!=null){var r=this.getCellForPopupEvent(e);this.graph.isEnabled()&&this.isSelectOnPopup(e)&&r!=null&&!this.graph.isCellSelected(r)?this.graph.setSelectionCell(r):this.clearSelectionOnBackground&&r==null&&this.graph.clearSelection(),this.graph.tooltipHandler.hide(),i(r),n&&e.consume()}this.popupTrigger=!1,this.inTolerance=!1};mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){return t.getCell()};mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu$1.prototype.destroy.apply(this)};function mxRubberband(t){t!=null&&(this.graph=t,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils$1.bind(this,function(e,i){var n=i.getProperty("eventName"),r=i.getProperty("event");if(n==mxEvent$1.MOUSE_DOWN&&this.isForceRubberbandEvent(r)){var l=mxUtils$1.getOffset(this.graph.container),s=mxUtils$1.getScrollOrigin(this.graph.container);s.x-=l.x,s.y-=l.y,this.start(r.getX()+s.x,r.getY()+s.y),r.consume(!1)}}),this.graph.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils$1.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent$1.PAN,this.panHandler),this.gestureHandler=mxUtils$1.bind(this,function(e,i){this.first!=null&&this.reset()}),this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),mxClient$1.IS_IE&&mxEvent$1.addListener(window,"unload",mxUtils$1.bind(this,function(){this.destroy()})))}mxRubberband.prototype.defaultOpacity=20;mxRubberband.prototype.enabled=!0;mxRubberband.prototype.div=null;mxRubberband.prototype.sharedDiv=null;mxRubberband.prototype.currentX=0;mxRubberband.prototype.currentY=0;mxRubberband.prototype.fadeOut=!1;mxRubberband.prototype.isEnabled=function(){return this.enabled};mxRubberband.prototype.setEnabled=function(t){this.enabled=t};mxRubberband.prototype.isForceRubberbandEvent=function(t){return mxEvent$1.isAltDown(t.getEvent())&&!mxEvent$1.isShiftDown(t.getEvent())};mxRubberband.prototype.mouseDown=function(t,e){if(!e.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&(e.getState()==null||this.graph.isCellLocked(e.getCell()))&&!mxEvent$1.isMultiTouchEvent(e.getEvent())){var i=mxUtils$1.getOffset(this.graph.container),n=mxUtils$1.getScrollOrigin(this.graph.container);n.x-=i.x,n.y-=i.y,this.start(e.getX()+n.x,e.getY()+n.y),e.consume(!1)}};mxRubberband.prototype.start=function(t,e){this.first=new mxPoint$1(t,e);var i=this.graph.container;function n(r){var l=new mxMouseEvent$1(r),s=mxUtils$1.convertPoint(i,l.getX(),l.getY());return l.graphX=s.x,l.graphY=s.y,l}this.dragHandler=mxUtils$1.bind(this,function(r){this.mouseMove(this.graph,n(r))}),this.dropHandler=mxUtils$1.bind(this,function(r){this.mouseUp(this.graph,n(r))}),mxClient$1.IS_FF&&mxEvent$1.addGestureListeners(document,null,this.dragHandler,this.dropHandler)};mxRubberband.prototype.mouseMove=function(t,e){if(!e.isConsumed()&&this.first!=null){var i=mxUtils$1.getScrollOrigin(this.graph.container),n=mxUtils$1.getOffset(this.graph.container);i.x-=n.x,i.y-=n.y;var r=e.getX()+i.x,l=e.getY()+i.y,s=this.first.x-r,a=this.first.y-l,o=this.graph.tolerance;(this.div!=null||Math.abs(s)>o||Math.abs(a)>o)&&(this.div==null&&(this.div=this.createShape()),mxUtils$1.clearSelection(),this.update(r,l),e.consume())}};mxRubberband.prototype.createShape=function(){this.sharedDiv==null&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils$1.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var t=this.sharedDiv;return mxClient$1.IS_SVG&&(!mxClient$1.IS_IE||document.documentMode>=10)&&this.fadeOut&&(this.sharedDiv=null),t};mxRubberband.prototype.isActive=function(t,e){return this.div!=null&&this.div.style.display!="none"};mxRubberband.prototype.mouseUp=function(t,e){var i=this.isActive();this.reset(),i&&(this.execute(e.getEvent()),e.consume())};mxRubberband.prototype.execute=function(t){var e=new mxRectangle$1(this.x,this.y,this.width,this.height);this.graph.selectRegion(e,t)};mxRubberband.prototype.reset=function(){if(this.div!=null)if(mxClient$1.IS_SVG&&(!mxClient$1.IS_IE||document.documentMode>=10)&&this.fadeOut){var t=this.div;mxUtils$1.setPrefixedStyle(t.style,"transition","all 0.2s linear"),t.style.pointerEvents="none",t.style.opacity=0,window.setTimeout(function(){t.parentNode.removeChild(t)},200)}else this.div.parentNode.removeChild(this.div);mxEvent$1.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null};mxRubberband.prototype.update=function(t,e){this.currentX=t,this.currentY=e,this.repaint()};mxRubberband.prototype.repaint=function(){if(this.div!=null){var t=this.currentX-this.graph.panDx,e=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,t),this.y=Math.min(this.first.y,e),this.width=Math.max(this.first.x,t)-this.x,this.height=Math.max(this.first.y,e)-this.y;var i=0,n=0;this.div.style.left=this.x+i+"px",this.div.style.top=this.y+n+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}};mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),this.sharedDiv!=null&&(this.sharedDiv=null))};function mxSelectionCellsHandler(t){mxEventSource.call(this),this.graph=t,this.handlers=new mxDictionary$1,this.graph.addMouseListener(this),this.redrawHandler=mxUtils$1.bind(this,function(e,i){this.isEnabled()&&this.refresh(!1)}),this.refreshHandler=mxUtils$1.bind(this,function(e,i){this.isEnabled()&&this.refresh(!0)}),this.graph.addListener(mxEvent$1.EDITING_STOPPED,this.redrawHandler),this.graph.addListener(mxEvent$1.EDITING_STARTED,this.redrawHandler),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.redrawHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.UP,this.refreshHandler)}mxUtils$1.extend(mxSelectionCellsHandler,mxEventSource);mxSelectionCellsHandler.prototype.graph=null;mxSelectionCellsHandler.prototype.enabled=!0;mxSelectionCellsHandler.prototype.refreshHandler=null;mxSelectionCellsHandler.prototype.maxHandlers=100;mxSelectionCellsHandler.prototype.handlers=null;mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled};mxSelectionCellsHandler.prototype.setEnabled=function(t){this.enabled=t};mxSelectionCellsHandler.prototype.getHandler=function(t){return this.handlers.get(t)};mxSelectionCellsHandler.prototype.isHandled=function(t){return this.getHandler(t)!=null};mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(t,e){e.reset.apply(e)})};mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){return this.graph.getSelectionCells()};mxSelectionCellsHandler.prototype.refresh=function(t){var e=this.handlers;this.handlers=new mxDictionary$1;var i=mxUtils$1.sortCells(this.getHandledSelectionCells(),!1);if(!t&&this.graph.graphHandler.maxCells>0&&this.graph.getSelectionCount()>0){var n=e.getCount();n>0&&(t=n<=this.graph.graphHandler.maxCells!=this.graph.getSelectionCount()<=this.graph.graphHandler.maxCells)}for(var r=0;r<i.length;r++){var l=this.graph.view.getState(i[r]);if(l!=null){var s=e.remove(i[r]);s!=null&&(s.state!=l?(s.destroy(),s=null):this.isHandlerActive(s)||(t&&s.refresh(),s.redraw())),s!=null&&this.handlers.put(i[r],s)}}e.visit(mxUtils$1.bind(this,function(a,o){this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE,"state",o.state)),o.destroy()}));for(var r=0;r<i.length;r++){var l=this.graph.view.getState(i[r]);if(l!=null){var s=this.handlers.get(i[r]);s==null?(s=this.graph.createHandler(l),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD,"state",l)),this.handlers.put(i[r],s)):s.updateParentHighlight()}}};mxSelectionCellsHandler.prototype.isHandlerActive=function(t){return t.index!=null};mxSelectionCellsHandler.prototype.updateHandler=function(t){var e=this.handlers.remove(t.cell);if(e!=null){var i=e.index,n=e.startX,r=e.startY;e.destroy(),e=this.graph.createHandler(t),e!=null&&(this.handlers.put(t.cell,e),i!=null&&n!=null&&r!=null&&e.start(n,r,i))}};mxSelectionCellsHandler.prototype.mouseDown=function(t,e){if(this.graph.isEnabled()&&this.isEnabled()){var i=[t,e];this.handlers.visit(function(n,r){r.mouseDown.apply(r,i)})}};mxSelectionCellsHandler.prototype.mouseMove=function(t,e){if(this.graph.isEnabled()&&this.isEnabled()){var i=[t,e];this.handlers.visit(function(n,r){r.mouseMove.apply(r,i)})}};mxSelectionCellsHandler.prototype.mouseUp=function(t,e){if(this.graph.isEnabled()&&this.isEnabled()){var i=[t,e];this.handlers.visit(function(n,r){r.mouseUp.apply(r,i)})}};mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.refreshHandler!=null&&(this.graph.getSelectionModel().removeListener(this.redrawHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.graph.removeListener(this.redrawHandler),this.redrawHandler=null,this.refreshHandler=null)};function mxTooltipHandler(t,e){t!=null&&(this.graph=t,this.delay=e||500,this.graph.addMouseListener(this))}mxTooltipHandler.prototype.zIndex=10005;mxTooltipHandler.prototype.graph=null;mxTooltipHandler.prototype.delay=null;mxTooltipHandler.prototype.ignoreTouchEvents=!0;mxTooltipHandler.prototype.hideOnHover=!1;mxTooltipHandler.prototype.destroyed=!1;mxTooltipHandler.prototype.enabled=!1;mxTooltipHandler.prototype.isEnabled=function(){return this.enabled};mxTooltipHandler.prototype.setEnabled=function(t){this.enabled=t};mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover};mxTooltipHandler.prototype.setHideOnHover=function(t){this.hideOnHover=t};mxTooltipHandler.prototype.init=function(){document.body!=null&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent$1.addGestureListeners(this.div,mxUtils$1.bind(this,function(t){var e=mxEvent$1.getSource(t);e.nodeName!="A"&&this.hideTooltip()})))};mxTooltipHandler.prototype.getStateForEvent=function(t){return t.getState()};mxTooltipHandler.prototype.mouseDown=function(t,e){this.reset(e,!1),this.hideTooltip()};mxTooltipHandler.prototype.mouseMove=function(t,e){if(e.getX()!=this.lastX||e.getY()!=this.lastY){this.reset(e,!0);var i=this.getStateForEvent(e);(this.isHideOnHover()||i!=this.state||e.getSource()!=this.node&&(!this.stateSource||i!=null&&this.stateSource==(e.isSource(i.shape)||!e.isSource(i.text))))&&this.hideTooltip()}this.lastX=e.getX(),this.lastY=e.getY()};mxTooltipHandler.prototype.mouseUp=function(t,e){this.reset(e,!0),this.hideTooltip()};mxTooltipHandler.prototype.resetTimer=function(){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null)};mxTooltipHandler.prototype.reset=function(t,e,i){if((!this.ignoreTouchEvents||mxEvent$1.isMouseEvent(t.getEvent()))&&(this.resetTimer(),i=i??this.getStateForEvent(t),e&&this.isEnabled()&&i!=null&&(this.div==null||this.div.style.visibility=="hidden"))){var n=t.getSource(),r=t.getX(),l=t.getY(),s=t.isSource(i.shape)||t.isSource(i.text);this.thread=window.setTimeout(mxUtils$1.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var a=this.graph.getTooltip(i,n,r,l);this.show(a,r,l),this.state=i,this.node=n,this.stateSource=s}}),this.delay)}};mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()};mxTooltipHandler.prototype.hideTooltip=function(){this.div!=null&&(this.div.style.visibility="hidden",this.div.innerText="")};mxTooltipHandler.prototype.show=function(t,e,i){if(!this.destroyed&&t!=null&&t.length>0){this.div==null&&this.init();var n=mxUtils$1.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=e+n.x+"px",this.div.style.top=i+mxConstants.TOOLTIP_VERTICAL_OFFSET+n.y+"px",mxUtils$1.isNode(t)?(this.div.style.whiteSpace="",this.div.innerText="",this.div.appendChild(t)):(this.div.style.whiteSpace="pre-line",this.div.innerHTML=t),this.div.style.visibility="",mxUtils$1.fit(this.div)}};mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent$1.release(this.div),this.div!=null&&this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)};var mxCodecRegistry={codecs:[],aliases:[],register:function(t){if(t!=null){var e=t.getName();mxCodecRegistry.codecs[e]=t;var i=mxUtils$1.getFunctionName(t.template.constructor);i!=e&&mxCodecRegistry.addAlias(i,e)}return t},addAlias:function(t,e){mxCodecRegistry.aliases[t]=e},getCodec:function(t){var e=null;if(t!=null){var i=mxUtils$1.getFunctionName(t),n=mxCodecRegistry.aliases[i];if(n!=null&&(i=n),e=mxCodecRegistry.codecs[i],e==null)try{e=new mxObjectCodec(new t),mxCodecRegistry.register(e)}catch{}}return e}},mxPerimeter={RectanglePerimeter:function(t,e,i,n){var r=t.getCenterX(),l=t.getCenterY(),s=i.x-r,a=i.y-l,o=Math.atan2(a,s),u=new mxPoint$1(0,0),d=Math.PI,p=Math.PI/2,c=p-o,g=Math.atan2(t.height,t.width);return o<-d+g||o>d-g?(u.x=t.x,u.y=l-t.width*Math.tan(o)/2):o<-g?(u.y=t.y,u.x=r-t.height*Math.tan(c)/2):o<g?(u.x=t.x+t.width,u.y=l+t.width*Math.tan(o)/2):(u.y=t.y+t.height,u.x=r+t.height*Math.tan(c)/2),n&&(i.x>=t.x&&i.x<=t.x+t.width?u.x=i.x:i.y>=t.y&&i.y<=t.y+t.height&&(u.y=i.y),i.x<t.x?u.x=t.x:i.x>t.x+t.width&&(u.x=t.x+t.width),i.y<t.y?u.y=t.y:i.y>t.y+t.height&&(u.y=t.y+t.height)),u},EllipsePerimeter:function(t,e,i,n){var r=t.x,l=t.y,s=t.width/2,a=t.height/2,o=r+s,u=l+a,d=i.x,p=i.y,c=parseInt(d-o),g=parseInt(p-u);if(c==0&&g!=0)return new mxPoint$1(o,u+a*g/Math.abs(g));if(c==0&&g==0)return new mxPoint$1(d,p);if(n){if(p>=l&&p<=l+t.height){var x=p-u,C=Math.sqrt(s*s*(1-x*x/(a*a)))||0;return d<=r&&(C=-C),new mxPoint$1(o+C,p)}if(d>=r&&d<=r+t.width){var C=d-o,x=Math.sqrt(a*a*(1-C*C/(s*s)))||0;return p<=l&&(x=-x),new mxPoint$1(d,u+x)}}var T=g/c,A=u-T*o,R=s*s*T*T+a*a,_=-2*o*R,N=s*s*T*T*o*o+a*a*o*o-s*s*a*a,H=Math.sqrt(_*_-4*R*N),k=(-_+H)/(2*R),K=(-_-H)/(2*R),Q=T*k+A,nt=T*K+A,dt=Math.sqrt(Math.pow(k-d,2)+Math.pow(Q-p,2)),mt=Math.sqrt(Math.pow(K-d,2)+Math.pow(nt-p,2)),xt=0,Y=0;return dt<mt?(xt=k,Y=Q):(xt=K,Y=nt),new mxPoint$1(xt,Y)},RhombusPerimeter:function(t,e,i,n){var r=t.x,l=t.y,s=t.width,a=t.height,o=r+s/2,u=l+a/2,d=i.x,p=i.y;if(o==d)return u>p?new mxPoint$1(o,l):new mxPoint$1(o,l+a);if(u==p)return o>d?new mxPoint$1(r,u):new mxPoint$1(r+s,u);var c=o,g=u;return n&&(d>=r&&d<=r+s?c=d:p>=l&&p<=l+a&&(g=p)),d<o?p<u?mxUtils$1.intersection(d,p,c,g,o,l,r,u):mxUtils$1.intersection(d,p,c,g,o,l+a,r,u):p<u?mxUtils$1.intersection(d,p,c,g,o,l,r+s,u):mxUtils$1.intersection(d,p,c,g,o,l+a,r+s,u)},TrianglePerimeter:function(t,e,i,n){var r=e!=null?e.style[mxConstants$1.STYLE_DIRECTION]:null,l=r==mxConstants$1.DIRECTION_NORTH||r==mxConstants$1.DIRECTION_SOUTH,s=t.x,a=t.y,o=t.width,u=t.height,d=s+o/2,p=a+u/2,c=new mxPoint$1(s,a),g=new mxPoint$1(s+o,p),x=new mxPoint$1(s,a+u);r==mxConstants$1.DIRECTION_NORTH?(c=x,g=new mxPoint$1(d,a),x=new mxPoint$1(s+o,a+u)):r==mxConstants$1.DIRECTION_SOUTH?(g=new mxPoint$1(d,a+u),x=new mxPoint$1(s+o,a)):r==mxConstants$1.DIRECTION_WEST&&(c=new mxPoint$1(s+o,a),g=new mxPoint$1(s,p),x=new mxPoint$1(s+o,a+u));var C=i.x-d,T=i.y-p,A=l?Math.atan2(C,T):Math.atan2(T,C),R=l?Math.atan2(o,u):Math.atan2(u,o),_=!1;r==mxConstants$1.DIRECTION_NORTH||r==mxConstants$1.DIRECTION_WEST?_=A>-R&&A<R:_=A<-Math.PI+R||A>Math.PI-R;var N=null;if(_)n&&(l&&i.x>=c.x&&i.x<=x.x||!l&&i.y>=c.y&&i.y<=x.y)?l?N=new mxPoint$1(i.x,c.y):N=new mxPoint$1(c.x,i.y):r==mxConstants$1.DIRECTION_NORTH?N=new mxPoint$1(s+o/2+u*Math.tan(A)/2,a+u):r==mxConstants$1.DIRECTION_SOUTH?N=new mxPoint$1(s+o/2-u*Math.tan(A)/2,a):r==mxConstants$1.DIRECTION_WEST?N=new mxPoint$1(s+o,a+u/2+o*Math.tan(A)/2):N=new mxPoint$1(s,a+u/2-o*Math.tan(A)/2);else{if(n){var H=new mxPoint$1(d,p);i.y>=a&&i.y<=a+u?(H.x=l?d:r==mxConstants$1.DIRECTION_WEST?s+o:s,H.y=i.y):i.x>=s&&i.x<=s+o&&(H.x=i.x,H.y=l?r==mxConstants$1.DIRECTION_NORTH?a+u:a:p),C=i.x-H.x,T=i.y-H.y,d=H.x,p=H.y}l&&i.x<=s+o/2||!l&&i.y<=a+u/2?N=mxUtils$1.intersection(i.x,i.y,d,p,c.x,c.y,g.x,g.y):N=mxUtils$1.intersection(i.x,i.y,d,p,g.x,g.y,x.x,x.y)}return N==null&&(N=new mxPoint$1(d,p)),N},HexagonPerimeter:function(t,e,i,n){var r=t.x,l=t.y,s=t.width,a=t.height,o=t.getCenterX(),u=t.getCenterY(),d=i.x,p=i.y,c=d-o,g=p-u,x=-Math.atan2(g,c),C=Math.PI,T=Math.PI/2,A=new mxPoint$1(o,u),R=e!=null?mxUtils$1.getValue(e.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,_=R==mxConstants$1.DIRECTION_NORTH||R==mxConstants$1.DIRECTION_SOUTH,N=new mxPoint$1,H=new mxPoint$1;if((d<r&&p<l||d<r&&p>l+a||d>r+s&&p<l||d>r+s&&p>l+a)&&(n=!1),n){if(_){if(d==o){if(p<=l)return new mxPoint$1(o,l);if(p>=l+a)return new mxPoint$1(o,l+a)}else if(d<r){if(p==l+a/4)return new mxPoint$1(r,l+a/4);if(p==l+3*a/4)return new mxPoint$1(r,l+3*a/4)}else if(d>r+s){if(p==l+a/4)return new mxPoint$1(r+s,l+a/4);if(p==l+3*a/4)return new mxPoint$1(r+s,l+3*a/4)}else if(d==r){if(p<u)return new mxPoint$1(r,l+a/4);if(p>u)return new mxPoint$1(r,l+3*a/4)}else if(d==r+s){if(p<u)return new mxPoint$1(r+s,l+a/4);if(p>u)return new mxPoint$1(r+s,l+3*a/4)}if(p==l)return new mxPoint$1(o,l);if(p==l+a)return new mxPoint$1(o,l+a);d<o?p>l+a/4&&p<l+3*a/4?(N=new mxPoint$1(r,l),H=new mxPoint$1(r,l+a)):p<l+a/4?(N=new mxPoint$1(r-Math.floor(.5*s),l+Math.floor(.5*a)),H=new mxPoint$1(r+s,l-Math.floor(.25*a))):p>l+3*a/4&&(N=new mxPoint$1(r-Math.floor(.5*s),l+Math.floor(.5*a)),H=new mxPoint$1(r+s,l+Math.floor(1.25*a))):d>o&&(p>l+a/4&&p<l+3*a/4?(N=new mxPoint$1(r+s,l),H=new mxPoint$1(r+s,l+a)):p<l+a/4?(N=new mxPoint$1(r,l-Math.floor(.25*a)),H=new mxPoint$1(r+Math.floor(1.5*s),l+Math.floor(.5*a))):p>l+3*a/4&&(N=new mxPoint$1(r+Math.floor(1.5*s),l+Math.floor(.5*a)),H=new mxPoint$1(r,l+Math.floor(1.25*a))))}else{if(p==u){if(d<=r)return new mxPoint$1(r,l+a/2);if(d>=r+s)return new mxPoint$1(r+s,l+a/2)}else if(p<l){if(d==r+s/4)return new mxPoint$1(r+s/4,l);if(d==r+3*s/4)return new mxPoint$1(r+3*s/4,l)}else if(p>l+a){if(d==r+s/4)return new mxPoint$1(r+s/4,l+a);if(d==r+3*s/4)return new mxPoint$1(r+3*s/4,l+a)}else if(p==l){if(d<o)return new mxPoint$1(r+s/4,l);if(d>o)return new mxPoint$1(r+3*s/4,l)}else if(p==l+a){if(d<o)return new mxPoint$1(r+s/4,l+a);if(p>u)return new mxPoint$1(r+3*s/4,l+a)}if(d==r)return new mxPoint$1(r,u);if(d==r+s)return new mxPoint$1(r+s,u);p<u?d>r+s/4&&d<r+3*s/4?(N=new mxPoint$1(r,l),H=new mxPoint$1(r+s,l)):d<r+s/4?(N=new mxPoint$1(r-Math.floor(.25*s),l+a),H=new mxPoint$1(r+Math.floor(.5*s),l-Math.floor(.5*a))):d>r+3*s/4&&(N=new mxPoint$1(r+Math.floor(.5*s),l-Math.floor(.5*a)),H=new mxPoint$1(r+Math.floor(1.25*s),l+a)):p>u&&(d>r+s/4&&d<r+3*s/4?(N=new mxPoint$1(r,l+a),H=new mxPoint$1(r+s,l+a)):d<r+s/4?(N=new mxPoint$1(r-Math.floor(.25*s),l),H=new mxPoint$1(r+Math.floor(.5*s),l+Math.floor(1.5*a))):d>r+3*s/4&&(N=new mxPoint$1(r+Math.floor(.5*s),l+Math.floor(1.5*a)),H=new mxPoint$1(r+Math.floor(1.25*s),l)))}var k=o,K=u;d>=r&&d<=r+s?(k=d,p<u?K=l+a:K=l):p>=l&&p<=l+a&&(K=p,d<o?k=r+s:k=r),A=mxUtils$1.intersection(k,K,i.x,i.y,N.x,N.y,H.x,H.y)}else{if(_){var Q=Math.atan2(a/4,s/2);if(x==Q)return new mxPoint$1(r+s,l+Math.floor(.25*a));if(x==T)return new mxPoint$1(r+Math.floor(.5*s),l);if(x==C-Q)return new mxPoint$1(r,l+Math.floor(.25*a));if(x==-Q)return new mxPoint$1(r+s,l+Math.floor(.75*a));if(x==-T)return new mxPoint$1(r+Math.floor(.5*s),l+a);if(x==-C+Q)return new mxPoint$1(r,l+Math.floor(.75*a));x<Q&&x>-Q?(N=new mxPoint$1(r+s,l),H=new mxPoint$1(r+s,l+a)):x>Q&&x<T?(N=new mxPoint$1(r,l-Math.floor(.25*a)),H=new mxPoint$1(r+Math.floor(1.5*s),l+Math.floor(.5*a))):x>T&&x<C-Q?(N=new mxPoint$1(r-Math.floor(.5*s),l+Math.floor(.5*a)),H=new mxPoint$1(r+s,l-Math.floor(.25*a))):x>C-Q&&x<=C||x<-C+Q&&x>=-C?(N=new mxPoint$1(r,l),H=new mxPoint$1(r,l+a)):x<-Q&&x>-T?(N=new mxPoint$1(r+Math.floor(1.5*s),l+Math.floor(.5*a)),H=new mxPoint$1(r,l+Math.floor(1.25*a))):x<-T&&x>-C+Q&&(N=new mxPoint$1(r-Math.floor(.5*s),l+Math.floor(.5*a)),H=new mxPoint$1(r+s,l+Math.floor(1.25*a)))}else{var Q=Math.atan2(a/2,s/4);if(x==Q)return new mxPoint$1(r+Math.floor(.75*s),l);if(x==C-Q)return new mxPoint$1(r+Math.floor(.25*s),l);if(x==C||x==-C)return new mxPoint$1(r,l+Math.floor(.5*a));if(x==0)return new mxPoint$1(r+s,l+Math.floor(.5*a));if(x==-Q)return new mxPoint$1(r+Math.floor(.75*s),l+a);if(x==-C+Q)return new mxPoint$1(r+Math.floor(.25*s),l+a);x>0&&x<Q?(N=new mxPoint$1(r+Math.floor(.5*s),l-Math.floor(.5*a)),H=new mxPoint$1(r+Math.floor(1.25*s),l+a)):x>Q&&x<C-Q?(N=new mxPoint$1(r,l),H=new mxPoint$1(r+s,l)):x>C-Q&&x<C?(N=new mxPoint$1(r-Math.floor(.25*s),l+a),H=new mxPoint$1(r+Math.floor(.5*s),l-Math.floor(.5*a))):x<0&&x>-Q?(N=new mxPoint$1(r+Math.floor(.5*s),l+Math.floor(1.5*a)),H=new mxPoint$1(r+Math.floor(1.25*s),l)):x<-Q&&x>-C+Q?(N=new mxPoint$1(r,l+a),H=new mxPoint$1(r+s,l+a)):x<-C+Q&&x>-C&&(N=new mxPoint$1(r-Math.floor(.25*s),l),H=new mxPoint$1(r+Math.floor(.5*s),l+Math.floor(1.5*a)))}A=mxUtils$1.intersection(o,u,i.x,i.y,N.x,N.y,H.x,H.y)}return A??new mxPoint$1(o,u)}};function mxStylesheet(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}mxStylesheet.prototype.styles;mxStylesheet.prototype.createDefaultVertexStyle=function(){var t=new Object;return t[mxConstants$1.STYLE_SHAPE]=mxConstants$1.SHAPE_RECTANGLE,t[mxConstants$1.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,t[mxConstants$1.STYLE_VERTICAL_ALIGN]=mxConstants$1.ALIGN_MIDDLE,t[mxConstants$1.STYLE_ALIGN]=mxConstants$1.ALIGN_CENTER,t[mxConstants$1.STYLE_FILLCOLOR]="#C3D9FF",t[mxConstants$1.STYLE_STROKECOLOR]="#6482B9",t[mxConstants$1.STYLE_FONTCOLOR]="#774400",t};mxStylesheet.prototype.createDefaultEdgeStyle=function(){var t=new Object;return t[mxConstants$1.STYLE_SHAPE]=mxConstants$1.SHAPE_CONNECTOR,t[mxConstants$1.STYLE_ENDARROW]=mxConstants$1.ARROW_CLASSIC,t[mxConstants$1.STYLE_VERTICAL_ALIGN]=mxConstants$1.ALIGN_MIDDLE,t[mxConstants$1.STYLE_ALIGN]=mxConstants$1.ALIGN_CENTER,t[mxConstants$1.STYLE_STROKECOLOR]="#6482B9",t[mxConstants$1.STYLE_FONTCOLOR]="#446299",t};mxStylesheet.prototype.putDefaultVertexStyle=function(t){this.putCellStyle("defaultVertex",t)};mxStylesheet.prototype.putDefaultEdgeStyle=function(t){this.putCellStyle("defaultEdge",t)};mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex};mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge};mxStylesheet.prototype.putCellStyle=function(t,e){this.styles[t]=e};mxStylesheet.prototype.getCellStyle=function(t,e,i){i=i??!0;var n=e;if(t!=null&&t.length>0){var r=t.split(";");n!=null&&t.charAt(0)!=";"?n=mxUtils$1.clone(n):n=new Object;for(var l=0;l<r.length;l++){var s=r[l],a=s.indexOf("=");if(a>=0){var o=s.substring(0,a),u=s.substring(a+1);u==mxConstants$1.NONE&&i?delete n[o]:mxUtils$1.isNumeric(u)?n[o]=parseFloat(u):n[o]=u}else{var d=this.styles[s];if(d!=null)for(var o in d)n[o]=d[o]}}}return n};function mxUndoableEdit(t,e){this.source=t,this.changes=[],this.significant=e??!0}mxUndoableEdit.prototype.source=null;mxUndoableEdit.prototype.changes=null;mxUndoableEdit.prototype.significant=null;mxUndoableEdit.prototype.undone=!1;mxUndoableEdit.prototype.redone=!1;mxUndoableEdit.prototype.isEmpty=function(){return this.changes.length==0};mxUndoableEdit.prototype.isSignificant=function(){return this.significant};mxUndoableEdit.prototype.add=function(t){this.changes.push(t)};mxUndoableEdit.prototype.notify=function(){};mxUndoableEdit.prototype.die=function(){};mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length,e=t-1;e>=0;e--){var i=this.changes[e];i.execute!=null?i.execute():i.undo!=null&&i.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",i))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()};mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length,e=0;e<t;e++){var i=this.changes[e];i.execute!=null?i.execute():i.redo!=null&&i.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",i))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()};function mxCell$2(t,e,i){this.value=t,this.setGeometry(e),this.setStyle(i),this.onInit!=null&&this.onInit()}mxCell$2.prototype.id=null;mxCell$2.prototype.value=null;mxCell$2.prototype.geometry=null;mxCell$2.prototype.style=null;mxCell$2.prototype.vertex=!1;mxCell$2.prototype.edge=!1;mxCell$2.prototype.connectable=!0;mxCell$2.prototype.visible=!0;mxCell$2.prototype.collapsed=!1;mxCell$2.prototype.parent=null;mxCell$2.prototype.source=null;mxCell$2.prototype.target=null;mxCell$2.prototype.children=null;mxCell$2.prototype.edges=null;mxCell$2.prototype.mxTransient=["id","value","parent","source","target","children","edges"];mxCell$2.prototype.getId=function(){return this.id};mxCell$2.prototype.setId=function(t){this.id=t};mxCell$2.prototype.getValue=function(){return this.value};mxCell$2.prototype.setValue=function(t){this.value=t};mxCell$2.prototype.valueChanged=function(t){var e=this.getValue();return this.setValue(t),e};mxCell$2.prototype.getGeometry=function(){return this.geometry};mxCell$2.prototype.setGeometry=function(t){this.geometry=t};mxCell$2.prototype.getStyle=function(){return this.style};mxCell$2.prototype.setStyle=function(t){this.style=t};mxCell$2.prototype.isVertex=function(){return this.vertex!=0};mxCell$2.prototype.setVertex=function(t){this.vertex=t};mxCell$2.prototype.isEdge=function(){return this.edge!=0};mxCell$2.prototype.setEdge=function(t){this.edge=t};mxCell$2.prototype.isConnectable=function(){return this.connectable!=0};mxCell$2.prototype.setConnectable=function(t){this.connectable=t};mxCell$2.prototype.isVisible=function(){return this.visible!=0};mxCell$2.prototype.setVisible=function(t){this.visible=t};mxCell$2.prototype.isCollapsed=function(){return this.collapsed!=0};mxCell$2.prototype.setCollapsed=function(t){this.collapsed=t};mxCell$2.prototype.getParent=function(){return this.parent};mxCell$2.prototype.setParent=function(t){this.parent=t};mxCell$2.prototype.getTerminal=function(t){return t?this.source:this.target};mxCell$2.prototype.setTerminal=function(t,e){return e?this.source=t:this.target=t,t};mxCell$2.prototype.getChildCount=function(){return this.children==null?0:this.children.length};mxCell$2.prototype.getIndex=function(t){return mxUtils$1.indexOf(this.children,t)};mxCell$2.prototype.getChildAt=function(t){return this.children==null?null:this.children[t]};mxCell$2.prototype.insert=function(t,e){return t!=null&&(e==null&&(e=this.getChildCount(),t.getParent()==this&&e--),t.removeFromParent(),t.setParent(this),this.children==null?(this.children=[],this.children.push(t)):this.children.splice(e,0,t)),t};mxCell$2.prototype.remove=function(t){var e=null;return this.children!=null&&t>=0&&(e=this.getChildAt(t),e!=null&&(this.children.splice(t,1),e.setParent(null))),e};mxCell$2.prototype.removeFromParent=function(){if(this.parent!=null){var t=this.parent.getIndex(this);this.parent.remove(t)}};mxCell$2.prototype.getEdgeCount=function(){return this.edges==null?0:this.edges.length};mxCell$2.prototype.getEdgeIndex=function(t){return mxUtils$1.indexOf(this.edges,t)};mxCell$2.prototype.getEdgeAt=function(t){return this.edges==null?null:this.edges[t]};mxCell$2.prototype.insertEdge=function(t,e){return t!=null&&(t.removeFromTerminal(e),t.setTerminal(this,e),(this.edges==null||t.getTerminal(!e)!=this||mxUtils$1.indexOf(this.edges,t)<0)&&(this.edges==null&&(this.edges=[]),this.edges.push(t))),t};mxCell$2.prototype.removeEdge=function(t,e){if(t!=null){if(t.getTerminal(!e)!=this&&this.edges!=null){var i=this.getEdgeIndex(t);i>=0&&this.edges.splice(i,1)}t.setTerminal(null,e)}return t};mxCell$2.prototype.removeFromTerminal=function(t){var e=this.getTerminal(t);e!=null&&e.removeEdge(this,t)};mxCell$2.prototype.hasAttribute=function(t){var e=this.getValue();return e!=null&&e.nodeType==mxConstants$1.NODETYPE_ELEMENT&&e.hasAttribute?e.hasAttribute(t):e.getAttribute(t)!=null};mxCell$2.prototype.getAttribute=function(t,e){var i=this.getValue(),n=i!=null&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT?i.getAttribute(t):null;return n??e};mxCell$2.prototype.setAttribute=function(t,e){var i=this.getValue();i!=null&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT&&i.setAttribute(t,e)};mxCell$2.prototype.clone=function(){var t=mxUtils$1.clone(this,this.mxTransient);return t.setValue(this.cloneValue()),t};mxCell$2.prototype.cloneValue=function(t){return t=t??this.getValue(),t!=null&&(typeof t.clone=="function"?t=t.clone():isNaN(t.nodeType)||(t=t.cloneNode(!0))),t};function mxGraphModel(t){this.currentEdit=this.createUndoableEdit(),t!=null?this.setRoot(t):this.clear()}mxGraphModel.prototype=new mxEventSource;mxGraphModel.prototype.constructor=mxGraphModel;mxGraphModel.prototype.root=null;mxGraphModel.prototype.cells=null;mxGraphModel.prototype.maintainEdgeParent=!0;mxGraphModel.prototype.ignoreRelativeEdgeParent=!0;mxGraphModel.prototype.createIds=!0;mxGraphModel.prototype.prefix="";mxGraphModel.prototype.postfix="";mxGraphModel.prototype.nextId=0;mxGraphModel.prototype.currentEdit=null;mxGraphModel.prototype.updateLevel=0;mxGraphModel.prototype.endingUpdate=!1;mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())};mxGraphModel.prototype.isCreateIds=function(){return this.createIds};mxGraphModel.prototype.setCreateIds=function(t){this.createIds=t};mxGraphModel.prototype.createRoot=function(){var t=new mxCell$2;return t.insert(new mxCell$2),t};mxGraphModel.prototype.getCells=function(){var t=[];if(this.cells!=null)for(var e in this.cells)t.push(this.cells[e]);return t};mxGraphModel.prototype.getCellCount=function(){var t=0;if(this.cells!=null)for(var e in this.cells)t++;return t};mxGraphModel.prototype.getCell=function(t){return this.cells!=null?this.cells[t]:null};mxGraphModel.prototype.filterCells=function(t,e){var i=null;if(t!=null){i=[];for(var n=0;n<t.length;n++)e(t[n])&&i.push(t[n])}return i};mxGraphModel.prototype.getDescendants=function(t){return this.filterDescendants(null,t)};mxGraphModel.prototype.filterDescendants=function(t,e){var i=[];e=e||this.getRoot(),(t==null||t(e))&&i.push(e);for(var n=this.getChildCount(e),r=0;r<n;r++){var l=this.getChildAt(e,r);i=i.concat(this.filterDescendants(t,l))}return i};mxGraphModel.prototype.getRoot=function(t){var e=t||this.root;if(t!=null)for(;t!=null;)e=t,t=this.getParent(t);return e};mxGraphModel.prototype.setRoot=function(t){return this.execute(new mxRootChange(this,t)),t};mxGraphModel.prototype.rootChanged=function(t){var e=this.root;return this.root=t,this.nextId=0,this.cells=null,this.cellAdded(t),e};mxGraphModel.prototype.isRoot=function(t){return t!=null&&this.root==t};mxGraphModel.prototype.isLayer=function(t){return this.isRoot(this.getParent(t))};mxGraphModel.prototype.isAncestor=function(t,e){for(;e!=null&&e!=t;)e=this.getParent(e);return e==t};mxGraphModel.prototype.contains=function(t){return this.isAncestor(this.root,t)};mxGraphModel.prototype.getParent=function(t){return t!=null?t.getParent():null};mxGraphModel.prototype.add=function(t,e,i){if(e!=t&&t!=null&&e!=null){i==null&&(i=this.getChildCount(t));var n=t!=this.getParent(e);this.execute(new mxChildChange$1(this,t,e,i)),this.maintainEdgeParent&&n&&this.updateEdgeParents(e)}return e};mxGraphModel.prototype.cellAdded=function(t){if(t!=null){if(t.getId()==null&&this.createIds&&t.setId(this.createId(t)),t.getId()!=null){var e=this.getCell(t.getId());if(e!=t){for(;e!=null;)t.setId(this.createId(t)),e=this.getCell(t.getId());this.cells==null&&(this.cells=new Object),this.cells[t.getId()]=t}}mxUtils$1.isNumeric(t.getId())&&(this.nextId=Math.max(this.nextId,t.getId()));for(var i=this.getChildCount(t),n=0;n<i;n++)this.cellAdded(this.getChildAt(t,n))}};mxGraphModel.prototype.createId=function(t){var e=this.nextId;return this.nextId++,this.prefix+e+this.postfix};mxGraphModel.prototype.updateEdgeParents=function(t,e){e=e||this.getRoot(t);for(var i=this.getChildCount(t),n=0;n<i;n++){var r=this.getChildAt(t,n);this.updateEdgeParents(r,e)}for(var l=this.getEdgeCount(t),s=[],n=0;n<l;n++)s.push(this.getEdgeAt(t,n));for(var n=0;n<s.length;n++){var a=s[n];this.isAncestor(e,a)&&this.updateEdgeParent(a,e)}};mxGraphModel.prototype.updateEdgeParent=function(t,e){for(var i=this.getTerminal(t,!0),n=this.getTerminal(t,!1),r=null;i!=null&&!this.isEdge(i)&&i.geometry!=null&&i.geometry.relative;)i=this.getParent(i);for(;n!=null&&this.ignoreRelativeEdgeParent&&!this.isEdge(n)&&n.geometry!=null&&n.geometry.relative;)n=this.getParent(n);if(this.isAncestor(e,i)&&this.isAncestor(e,n)&&(i==n?r=this.getParent(i):r=this.getNearestCommonAncestor(i,n),r!=null&&(this.getParent(r)!=this.root||this.isAncestor(r,t))&&this.getParent(t)!=r)){var l=this.getGeometry(t);if(l!=null){var s=this.getOrigin(this.getParent(t)),a=this.getOrigin(r),o=a.x-s.x,u=a.y-s.y;l=l.clone(),l.translate(-o,-u),this.setGeometry(t,l)}this.add(r,t,this.getChildCount(r))}};mxGraphModel.prototype.getOrigin=function(t){var e=null;if(t!=null){if(e=this.getOrigin(this.getParent(t)),!this.isEdge(t)){var i=this.getGeometry(t);i!=null&&(e.x+=i.x,e.y+=i.y)}}else e=new mxPoint$1;return e};mxGraphModel.prototype.getNearestCommonAncestor=function(t,e){if(t!=null&&e!=null){var i=mxCellPath$1.create(e);if(i!=null&&i.length>0){var n=t,r=mxCellPath$1.create(n);if(i.length<r.length){n=e;var l=r;r=i,i=l}for(;n!=null;){var s=this.getParent(n);if(i.indexOf(r+mxCellPath$1.PATH_SEPARATOR)==0&&s!=null)return n;r=mxCellPath$1.getParentPath(r),n=s}}}return null};mxGraphModel.prototype.remove=function(t){return t==this.root?this.setRoot(null):this.getParent(t)!=null&&this.execute(new mxChildChange$1(this,null,t)),t};mxGraphModel.prototype.cellRemoved=function(t){if(t!=null&&this.cells!=null){for(var e=this.getChildCount(t),i=e-1;i>=0;i--)this.cellRemoved(this.getChildAt(t,i));this.cells!=null&&t.getId()!=null&&delete this.cells[t.getId()]}};mxGraphModel.prototype.parentForCellChanged=function(t,e,i){var n=this.getParent(t);if(e!=null)(e!=n||n.getIndex(t)!=i)&&e.insert(t,i);else if(n!=null){var r=n.getIndex(t);n.remove(r)}var l=this.contains(e),s=this.contains(n);return l&&!s?this.cellAdded(t):s&&!l&&this.cellRemoved(t),n};mxGraphModel.prototype.getChildCount=function(t){return t!=null?t.getChildCount():0};mxGraphModel.prototype.getChildAt=function(t,e){return t!=null?t.getChildAt(e):null};mxGraphModel.prototype.getChildren=function(t){return t!=null?t.children:null};mxGraphModel.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)};mxGraphModel.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)};mxGraphModel.prototype.getChildCells=function(t,e,i){e=e??!1,i=i??!1;for(var n=this.getChildCount(t),r=[],l=0;l<n;l++){var s=this.getChildAt(t,l);(!i&&!e||i&&this.isEdge(s)||e&&this.isVertex(s))&&r.push(s)}return r};mxGraphModel.prototype.getTerminal=function(t,e){return t!=null?t.getTerminal(e):null};mxGraphModel.prototype.setTerminal=function(t,e,i){var n=e!=this.getTerminal(t,i);return this.execute(new mxTerminalChange$1(this,t,e,i)),this.maintainEdgeParent&&n&&this.updateEdgeParent(t,this.getRoot()),e};mxGraphModel.prototype.setTerminals=function(t,e,i){this.beginUpdate();try{this.setTerminal(t,e,!0),this.setTerminal(t,i,!1)}finally{this.endUpdate()}};mxGraphModel.prototype.terminalForCellChanged=function(t,e,i){var n=this.getTerminal(t,i);return e!=null?e.insertEdge(t,i):n!=null&&n.removeEdge(t,i),n};mxGraphModel.prototype.getEdgeCount=function(t){return t!=null?t.getEdgeCount():0};mxGraphModel.prototype.getEdgeAt=function(t,e){return t!=null?t.getEdgeAt(e):null};mxGraphModel.prototype.getDirectedEdgeCount=function(t,e,i){for(var n=0,r=this.getEdgeCount(t),l=0;l<r;l++){var s=this.getEdgeAt(t,l);s!=i&&this.getTerminal(s,e)==t&&n++}return n};mxGraphModel.prototype.getConnections=function(t){return this.getEdges(t,!0,!0,!1)};mxGraphModel.prototype.getIncomingEdges=function(t){return this.getEdges(t,!0,!1,!1)};mxGraphModel.prototype.getOutgoingEdges=function(t){return this.getEdges(t,!1,!0,!1)};mxGraphModel.prototype.getEdges=function(t,e,i,n){e=e??!0,i=i??!0,n=n??!0;for(var r=this.getEdgeCount(t),l=[],s=0;s<r;s++){var a=this.getEdgeAt(t,s),o=this.getTerminal(a,!0),u=this.getTerminal(a,!1);(n&&o==u||o!=u&&(e&&u==t||i&&o==t))&&l.push(a)}return l};mxGraphModel.prototype.getEdgesBetween=function(t,e,i){i=i??!1;var n=this.getEdgeCount(t),r=this.getEdgeCount(e),l=t,s=n;r<n&&(s=r,l=e);for(var a=[],o=0;o<s;o++){var u=this.getEdgeAt(l,o),d=this.getTerminal(u,!0),p=this.getTerminal(u,!1),c=d==t&&p==e,g=p==t&&d==e;(c||!i&&g)&&a.push(u)}return a};mxGraphModel.prototype.getOpposites=function(t,e,i,n){i=i??!0,n=n??!0;var r=[];if(t!=null)for(var l=0;l<t.length;l++){var s=this.getTerminal(t[l],!0),a=this.getTerminal(t[l],!1);s==e&&a!=null&&a!=e&&n?r.push(a):a==e&&s!=null&&s!=e&&i&&r.push(s)}return r};mxGraphModel.prototype.getTopmostCells=function(t){for(var e=new mxDictionary$1,i=[],n=0;n<t.length;n++)e.put(t[n],!0);for(var n=0;n<t.length;n++){for(var r=t[n],l=!0,s=this.getParent(r);s!=null;){if(e.get(s)){l=!1;break}s=this.getParent(s)}l&&i.push(r)}return i};mxGraphModel.prototype.isVertex=function(t){return t!=null?t.isVertex():!1};mxGraphModel.prototype.isEdge=function(t){return t!=null?t.isEdge():!1};mxGraphModel.prototype.isConnectable=function(t){return t!=null?t.isConnectable():!1};mxGraphModel.prototype.getValue=function(t){return t!=null?t.getValue():null};mxGraphModel.prototype.setValue=function(t,e){return this.execute(new mxValueChange$1(this,t,e)),e};mxGraphModel.prototype.valueForCellChanged=function(t,e){return t.valueChanged(e)};mxGraphModel.prototype.getGeometry=function(t){return t!=null?t.getGeometry():null};mxGraphModel.prototype.setGeometry=function(t,e){return e!=this.getGeometry(t)&&this.execute(new mxGeometryChange$1(this,t,e)),e};mxGraphModel.prototype.geometryForCellChanged=function(t,e){var i=this.getGeometry(t);return t.setGeometry(e),i};mxGraphModel.prototype.getStyle=function(t){return t!=null?t.getStyle():null};mxGraphModel.prototype.setStyle=function(t,e){return e!=this.getStyle(t)&&this.execute(new mxStyleChange$1(this,t,e)),e};mxGraphModel.prototype.styleForCellChanged=function(t,e){var i=this.getStyle(t);return t.setStyle(e),i};mxGraphModel.prototype.isCollapsed=function(t){return t!=null?t.isCollapsed():!1};mxGraphModel.prototype.setCollapsed=function(t,e){return e!=this.isCollapsed(t)&&this.execute(new mxCollapseChange(this,t,e)),e};mxGraphModel.prototype.collapsedStateForCellChanged=function(t,e){var i=this.isCollapsed(t);return t.setCollapsed(e),i};mxGraphModel.prototype.isVisible=function(t){return t!=null?t.isVisible():!1};mxGraphModel.prototype.setVisible=function(t,e){return e!=this.isVisible(t)&&this.execute(new mxVisibleChange(this,t,e)),e};mxGraphModel.prototype.visibleStateForCellChanged=function(t,e){var i=this.isVisible(t);return t.setVisible(e),i};mxGraphModel.prototype.execute=function(t){t.execute(),this.beginUpdate(),this.currentEdit.add(t),this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTE,"change",t)),this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",t)),this.endUpdate()};mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject$1(mxEvent$1.BEGIN_UPDATE)),this.updateLevel==1&&this.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT))};mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,this.updateLevel==0&&this.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT)),!this.endingUpdate){this.endingUpdate=this.updateLevel==0,this.fireEvent(new mxEventObject$1(mxEvent$1.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject$1(mxEvent$1.BEFORE_UNDO,"edit",this.currentEdit));var t=this.currentEdit;this.currentEdit=this.createUndoableEdit(),t.notify(),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",t))}}finally{this.endingUpdate=!1}}};mxGraphModel.prototype.createUndoableEdit=function(t){var e=new mxUndoableEdit(this,t??!0);return e.notify=function(){e.source.fireEvent(new mxEventObject$1(mxEvent$1.CHANGE,"edit",e,"changes",e.changes)),e.source.fireEvent(new mxEventObject$1(mxEvent$1.NOTIFY,"edit",e,"changes",e.changes))},e};mxGraphModel.prototype.mergeChildren=function(t,e,i){i=i??!0,this.beginUpdate();try{var n=new Object;this.mergeChildrenImpl(t,e,i,n);for(var r in n){var l=n[r],s=this.getTerminal(l,!0);s!=null&&(s=n[mxCellPath$1.create(s)],this.setTerminal(l,s,!0)),s=this.getTerminal(l,!1),s!=null&&(s=n[mxCellPath$1.create(s)],this.setTerminal(l,s,!1))}}finally{this.endUpdate()}};mxGraphModel.prototype.mergeChildrenImpl=function(t,e,i,n){this.beginUpdate();try{for(var r=t.getChildCount(),l=0;l<r;l++){var s=t.getChildAt(l);if(typeof s.getId=="function"){var a=s.getId(),o=a!=null&&(!this.isEdge(s)||!i)?this.getCell(a):null;if(o==null){var u=s.clone();u.setId(a),u.setTerminal(s.getTerminal(!0),!0),u.setTerminal(s.getTerminal(!1),!1),o=e.insert(u),this.cellAdded(o)}n[mxCellPath$1.create(s)]=o,this.mergeChildrenImpl(s,o,i,n)}}}finally{this.endUpdate()}};mxGraphModel.prototype.getParents=function(t){var e=[];if(t!=null)for(var i=new mxDictionary$1,n=0;n<t.length;n++){var r=this.getParent(t[n]);r!=null&&!i.get(r)&&(i.put(r,!0),e.push(r))}return e};mxGraphModel.prototype.cloneCell=function(t,e,i){return t!=null?this.cloneCells([t],e,null,i)[0]:null};mxGraphModel.prototype.cloneCells=function(t,e,i,n){e=e??!0,i=i??new Object,n=n??!1;for(var r=[],l=0;l<t.length;l++)t[l]!=null?r.push(this.cloneCellImpl(t[l],i,e,n)):r.push(null);for(var l=0;l<r.length;l++)r[l]!=null&&this.restoreClone(r[l],t[l],i);return r};mxGraphModel.prototype.cloneCellImpl=function(t,e,i,n){var r=mxObjectIdentity$1.get(t),l=e[r];if(l==null&&(l=this.cellCloned(t),e[r]=l,n&&(l.id=t.id),i))for(var s=this.getChildCount(t),a=0;a<s;a++){var o=this.cloneCellImpl(this.getChildAt(t,a),e,!0,n);l.insert(o)}return l};mxGraphModel.prototype.cellCloned=function(t){return t.clone()};mxGraphModel.prototype.restoreClone=function(t,e,i){var n=this.getTerminal(e,!0);if(n!=null){var r=i[mxObjectIdentity$1.get(n)];r!=null&&r.insertEdge(t,!0)}var l=this.getTerminal(e,!1);if(l!=null){var r=i[mxObjectIdentity$1.get(l)];r!=null&&r.insertEdge(t,!1)}for(var s=this.getChildCount(t),a=0;a<s;a++)this.restoreClone(this.getChildAt(t,a),this.getChildAt(e,a),i)};function mxRootChange(t,e){this.model=t,this.root=e,this.previous=e}mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)};function mxChildChange$1(t,e,i,n){this.model=t,this.parent=e,this.previous=e,this.child=i,this.index=n,this.previousIndex=n}mxChildChange$1.prototype.execute=function(){if(this.child!=null){var t=this.model.getParent(this.child),e=t!=null?t.getIndex(this.child):0;this.previous==null&&this.connect(this.child,!1),t=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),this.previous!=null&&this.connect(this.child,!0),this.parent=this.previous,this.previous=t,this.index=this.previousIndex,this.previousIndex=e}};mxChildChange$1.prototype.connect=function(t,e){e=e??!0;var i=t.getTerminal(!0),n=t.getTerminal(!1);i!=null&&(e?this.model.terminalForCellChanged(t,i,!0):this.model.terminalForCellChanged(t,null,!0)),n!=null&&(e?this.model.terminalForCellChanged(t,n,!1):this.model.terminalForCellChanged(t,null,!1)),t.setTerminal(i,!0),t.setTerminal(n,!1);for(var r=this.model.getChildCount(t),l=0;l<r;l++)this.connect(this.model.getChildAt(t,l),e)};function mxTerminalChange$1(t,e,i,n){this.model=t,this.cell=e,this.terminal=i,this.previous=i,this.source=n}mxTerminalChange$1.prototype.execute=function(){this.cell!=null&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))};function mxValueChange$1(t,e,i){this.model=t,this.cell=e,this.value=i,this.previous=i}mxValueChange$1.prototype.execute=function(){this.cell!=null&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))};function mxStyleChange$1(t,e,i){this.model=t,this.cell=e,this.style=i,this.previous=i}mxStyleChange$1.prototype.execute=function(){this.cell!=null&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))};function mxGeometryChange$1(t,e,i){this.model=t,this.cell=e,this.geometry=i,this.previous=i}mxGeometryChange$1.prototype.execute=function(){this.cell!=null&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))};function mxCollapseChange(t,e,i){this.model=t,this.cell=e,this.collapsed=i,this.previous=i}mxCollapseChange.prototype.execute=function(){this.cell!=null&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))};function mxVisibleChange(t,e,i){this.model=t,this.cell=e,this.visible=i,this.previous=i}mxVisibleChange.prototype.execute=function(){this.cell!=null&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))};function mxCellAttributeChange(t,e,i){this.cell=t,this.attribute=e,this.value=i,this.previous=i}mxCellAttributeChange.prototype.execute=function(){if(this.cell!=null){var t=this.cell.getAttribute(this.attribute);this.previous==null?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=t}};function mxGeometry$2(t,e,i,n){mxRectangle$1.call(this,t,e,i,n)}mxGeometry$2.prototype=new mxRectangle$1;mxGeometry$2.prototype.constructor=mxGeometry$2;mxGeometry$2.prototype.TRANSLATE_CONTROL_POINTS=!0;mxGeometry$2.prototype.alternateBounds=null;mxGeometry$2.prototype.sourcePoint=null;mxGeometry$2.prototype.targetPoint=null;mxGeometry$2.prototype.points=null;mxGeometry$2.prototype.offset=null;mxGeometry$2.prototype.relative=!1;mxGeometry$2.prototype.swap=function(){if(this.alternateBounds!=null){var t=new mxRectangle$1(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=t}};mxGeometry$2.prototype.getTerminalPoint=function(t){return t?this.sourcePoint:this.targetPoint};mxGeometry$2.prototype.setTerminalPoint=function(t,e){return e?this.sourcePoint=t:this.targetPoint=t,t};mxGeometry$2.prototype.rotate=function(t,e){var i=mxUtils$1.toRadians(t),n=Math.cos(i),r=Math.sin(i);if(!this.relative){var l=new mxPoint$1(this.getCenterX(),this.getCenterY()),s=mxUtils$1.getRotatedPoint(l,n,r,e);this.x=Math.round(s.x-this.width/2),this.y=Math.round(s.y-this.height/2)}if(this.sourcePoint!=null){var s=mxUtils$1.getRotatedPoint(this.sourcePoint,n,r,e);this.sourcePoint.x=Math.round(s.x),this.sourcePoint.y=Math.round(s.y)}if(this.targetPoint!=null){var s=mxUtils$1.getRotatedPoint(this.targetPoint,n,r,e);this.targetPoint.x=Math.round(s.x),this.targetPoint.y=Math.round(s.y)}if(this.points!=null){for(var a=0;a<this.points.length;a++)if(this.points[a]!=null){var s=mxUtils$1.getRotatedPoint(this.points[a],n,r,e);this.points[a].x=Math.round(s.x),this.points[a].y=Math.round(s.y)}}};mxGeometry$2.prototype.translate=function(t,e,i){if(t=parseFloat(t),e=parseFloat(e),!this.relative&&!i&&(this.x=parseFloat(this.x)+t,this.y=parseFloat(this.y)+e),this.sourcePoint!=null&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+e),this.targetPoint!=null&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+t,this.targetPoint.y=parseFloat(this.targetPoint.y)+e),this.TRANSLATE_CONTROL_POINTS&&this.points!=null)for(var n=0;n<this.points.length;n++)this.points[n]!=null&&(this.points[n].x=parseFloat(this.points[n].x)+t,this.points[n].y=parseFloat(this.points[n].y)+e)};mxGeometry$2.prototype.scale=function(t,e,i){if(t=parseFloat(t),e=parseFloat(e),this.sourcePoint!=null&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*e),this.targetPoint!=null&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*t,this.targetPoint.y=parseFloat(this.targetPoint.y)*e),this.points!=null)for(var n=0;n<this.points.length;n++)this.points[n]!=null&&(this.points[n].x=parseFloat(this.points[n].x)*t,this.points[n].y=parseFloat(this.points[n].y)*e);this.relative||(this.x=parseFloat(this.x)*t,this.y=parseFloat(this.y)*e,i&&(e=t=Math.min(t,e)),this.width=parseFloat(this.width)*t,this.height=parseFloat(this.height)*e)};mxGeometry$2.prototype.equals=function(t){return mxRectangle$1.prototype.equals.apply(this,arguments)&&this.relative==t.relative&&(this.sourcePoint==null&&t.sourcePoint==null||this.sourcePoint!=null&&this.sourcePoint.equals(t.sourcePoint))&&(this.targetPoint==null&&t.targetPoint==null||this.targetPoint!=null&&this.targetPoint.equals(t.targetPoint))&&(this.points==null&&t.points==null||this.points!=null&&mxUtils$1.equalPoints(this.points,t.points))&&(this.alternateBounds==null&&t.alternateBounds==null||this.alternateBounds!=null&&this.alternateBounds.equals(t.alternateBounds))&&(this.offset==null&&t.offset==null||this.offset!=null&&this.offset.equals(t.offset))};const codecList={mxStylesheet,Array,mxGraphModel,mxCell:mxCell$2,mxGeometry:mxGeometry$2,mxRectangle:mxRectangle$1,mxPoint:mxPoint$1,mxChildChange:mxChildChange$1,mxRootChange,mxTerminalChange:mxTerminalChange$1,mxValueChange:mxValueChange$1,mxStyleChange:mxStyleChange$1,mxGeometryChange:mxGeometryChange$1,mxCollapseChange,mxVisibleChange,mxCellAttributeChange};function mxCodec$1(t){this.document=t||mxUtils$1.createXmlDocument(),this.objects=[]}mxCodec$1.allowlist=null;mxCodec$1.prototype.document=null;mxCodec$1.prototype.objects=null;mxCodec$1.prototype.elements=null;mxCodec$1.prototype.encodeDefaults=!1;mxCodec$1.prototype.putObject=function(t,e){return this.objects[t]=e,e};mxCodec$1.prototype.getObject=function(t){var e=null;if(t!=null&&(e=this.objects[t],e==null&&(e=this.lookup(t),e==null))){var i=this.getElementById(t);i!=null&&(e=this.decode(i))}return e};mxCodec$1.prototype.lookup=function(t){return null};mxCodec$1.prototype.getElementById=function(t){return this.updateElements(),this.elements[t]};mxCodec$1.prototype.updateElements=function(){this.elements==null&&(this.elements=new Object,this.document.documentElement!=null&&this.addElement(this.document.documentElement))};mxCodec$1.prototype.addElement=function(t){if(t.nodeType==mxConstants$1.NODETYPE_ELEMENT){var e=t.getAttribute("id");if(e!=null){if(this.elements[e]==null)this.elements[e]=t;else if(this.elements[e]!=t)throw new Error(e+": Duplicate ID")}}for(t=t.firstChild;t!=null;)this.addElement(t),t=t.nextSibling};mxCodec$1.prototype.isObjectIgnored=function(t){return t==null};mxCodec$1.prototype.getId=function(t){var e=null;return t!=null&&!this.isObjectIgnored(t)&&(e=this.reference(t),e==null&&t instanceof mxCell$2&&(e=t.getId(),e==null&&(e=mxCellPath.create(t),e.length==0&&(e="root")))),e};mxCodec$1.prototype.reference=function(t){return null};mxCodec$1.prototype.encode=function(t){var e=null;if(t!=null&&t.constructor!=null&&!this.isObjectIgnored(t)){var i=mxCodecRegistry.getCodec(t.constructor);i!=null?e=i.encode(this,t):mxUtils$1.isNode(t)?e=mxUtils$1.importNode(this.document,t,!0):mxLog$1.warn("mxCodec.encode: No codec for "+mxUtils$1.getFunctionName(t.constructor))}return e};mxCodec$1.prototype.decode=function(t,e){this.updateElements();var i=null;if(t!=null&&t.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=this.getConstructor(t.nodeName),r=mxCodecRegistry.getCodec(n);r!=null?i=r.decode(this,t,e):(i=t.cloneNode(!0),i.removeAttribute("as"))}return i};mxCodec$1.prototype.isConstructorAllowed=function(t){return mxCodec$1.allowlist==null||mxUtils$1.indexOf(mxCodec$1.allowlist,t)>=0};mxCodec$1.prototype.getConstructor=function(t){var e=null;try{this.isConstructorAllowed(t)&&(e=codecList[t])}catch{}return e};mxCodec$1.prototype.encodeCell=function(t,e,i){if(!this.isObjectIgnored(t)){var n=this.encode(t);if(n!=null&&e.appendChild(n),i==null||i)for(var r=t.getChildCount(),l=0;l<r;l++)this.encodeCell(t.getChildAt(l),e)}};mxCodec$1.prototype.isCellCodec=function(t){return t!=null&&typeof t.isCellCodec=="function"?t.isCellCodec():!1};mxCodec$1.prototype.decodeCell=function(t,e){e=e??!0;var i=null;if(t!=null&&t.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=mxCodecRegistry.getCodec(t.nodeName);if(!this.isCellCodec(n))for(var r=t.firstChild;r!=null&&!this.isCellCodec(n);)n=mxCodecRegistry.getCodec(r.nodeName),r=r.nextSibling;this.isCellCodec(n)||(n=mxCodecRegistry.getCodec(mxCell$2)),i=n.decode(this,t),e&&this.insertIntoGraph(i)}return i};mxCodec$1.prototype.insertIntoGraph=function(t){var e=t.parent,i=t.getTerminal(!0),n=t.getTerminal(!1);if(t.setTerminal(null,!1),t.setTerminal(null,!0),t.parent=null,e!=null){if(e==t)throw new Error(e.id+": Self Reference");e.insert(t)}i!=null&&i.insertEdge(t,!0),n!=null&&n.insertEdge(t,!1)};mxCodec$1.prototype.setAttribute=function(t,e,i){e!=null&&i!=null&&t.setAttribute(e,i)};function mxObjectCodec$1(t,e,i,n){this.template=t,this.exclude=e??[],this.idrefs=i??[],this.mapping=n??[],this.reverse=new Object;for(var r in this.mapping)this.reverse[this.mapping[r]]=r}mxObjectCodec$1.allowEval=!1;mxObjectCodec$1.prototype.template=null;mxObjectCodec$1.prototype.exclude=null;mxObjectCodec$1.prototype.idrefs=null;mxObjectCodec$1.prototype.mapping=null;mxObjectCodec$1.prototype.reverse=null;mxObjectCodec$1.prototype.getName=function(){return mxUtils$1.getFunctionName(this.template.constructor)};mxObjectCodec$1.prototype.cloneTemplate=function(){return new this.template.constructor};mxObjectCodec$1.prototype.getFieldName=function(t){if(t!=null){var e=this.reverse[t];e!=null&&(t=e)}return t};mxObjectCodec$1.prototype.getAttributeName=function(t){if(t!=null){var e=this.mapping[t];e!=null&&(t=e)}return t};mxObjectCodec$1.prototype.isExcluded=function(t,e,i,n){return e==mxObjectIdentity$1.FIELD_NAME||mxUtils$1.indexOf(this.exclude,e)>=0};mxObjectCodec$1.prototype.isReference=function(t,e,i,n){return mxUtils$1.indexOf(this.idrefs,e)>=0};mxObjectCodec$1.prototype.encode=function(t,e){var i=t.document.createElement(this.getName());return e=this.beforeEncode(t,e,i),this.encodeObject(t,e,i),this.afterEncode(t,e,i)};mxObjectCodec$1.prototype.encodeObject=function(t,e,i){t.setAttribute(i,"id",t.getId(e));for(var n in e){var r=n,l=e[r];l!=null&&!this.isExcluded(e,r,l,!0)&&(mxUtils$1.isInteger(r)&&(r=null),this.encodeValue(t,e,r,l,i))}};mxObjectCodec$1.prototype.encodeValue=function(t,e,i,n,r){if(n!=null){if(this.isReference(e,i,n,!0)){var l=t.getId(n);if(l==null){mxLog$1.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+i+"="+n);return}n=l}var s=this.template[i];(i==null||t.encodeDefaults||s!=n)&&(i=this.getAttributeName(i),this.writeAttribute(t,e,i,n,r))}};mxObjectCodec$1.prototype.writeAttribute=function(t,e,i,n,r){typeof n!="object"?this.writePrimitiveAttribute(t,e,i,n,r):this.writeComplexAttribute(t,e,i,n,r)};mxObjectCodec$1.prototype.writePrimitiveAttribute=function(t,e,i,n,r){if(n=this.convertAttributeToXml(t,e,i,n,r),i==null){var l=t.document.createElement("add");typeof n=="function"?l.appendChild(t.document.createTextNode(n)):t.setAttribute(l,"value",n),r.appendChild(l)}else typeof n!="function"&&t.setAttribute(r,i,n)};mxObjectCodec$1.prototype.writeComplexAttribute=function(t,e,i,n,r){var l=t.encode(n);l!=null?(i!=null&&l.setAttribute("as",i),r.appendChild(l)):mxLog$1.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+i+": "+n)};mxObjectCodec$1.prototype.convertAttributeToXml=function(t,e,i,n){return this.isBooleanAttribute(t,e,i,n)&&(n=n==!0?"1":"0"),n};mxObjectCodec$1.prototype.isBooleanAttribute=function(t,e,i,n){return typeof n.length>"u"&&(n==!0||n==!1)};mxObjectCodec$1.prototype.convertAttributeFromXml=function(t,e,i){var n=e.value;return this.isNumericAttribute(t,e,i)&&(n=parseFloat(n),(isNaN(n)||!isFinite(n))&&(n=0)),n};mxObjectCodec$1.prototype.isNumericAttribute=function(t,e,i){var n=i.constructor==mxGeometry&&(e.name=="x"||e.name=="y"||e.name=="width"||e.name=="height")||i.constructor==mxPoint$1&&(e.name=="x"||e.name=="y")||mxUtils$1.isNumeric(e.value);return n};mxObjectCodec$1.prototype.beforeEncode=function(t,e,i){return e};mxObjectCodec$1.prototype.afterEncode=function(t,e,i){return i};mxObjectCodec$1.prototype.decode=function(t,e,i){var n=e.getAttribute("id"),r=t.objects[n];return r==null&&(r=i||this.cloneTemplate(),n!=null&&t.putObject(n,r)),e=this.beforeDecode(t,e,r),this.decodeNode(t,e,r),this.afterDecode(t,e,r)};mxObjectCodec$1.prototype.decodeNode=function(t,e,i){e!=null&&(this.decodeAttributes(t,e,i),this.decodeChildren(t,e,i))};mxObjectCodec$1.prototype.decodeAttributes=function(t,e,i){var n=e.attributes;if(n!=null)for(var r=0;r<n.length;r++)this.decodeAttribute(t,n[r],i)};mxObjectCodec$1.prototype.isIgnoredAttribute=function(t,e,i){return e.nodeName=="as"||e.nodeName=="id"||typeof i[e.nodeName]=="function"};mxObjectCodec$1.prototype.decodeAttribute=function(t,e,i){if(!this.isIgnoredAttribute(t,e,i)){var n=e.nodeName,r=this.convertAttributeFromXml(t,e,i),l=this.getFieldName(n);if(this.isReference(i,l,r,!1)){var s=t.getObject(r);if(s==null){mxLog$1.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+n+"="+r);return}r=s}this.isExcluded(i,n,r,!1)||(i[n]=r)}};mxObjectCodec$1.prototype.decodeChildren=function(t,e,i){for(var n=e.firstChild;n!=null;){var r=n.nextSibling;n.nodeType==mxConstants$1.NODETYPE_ELEMENT&&!this.processInclude(t,n,i)&&this.decodeChild(t,n,i),n=r}};mxObjectCodec$1.prototype.decodeChild=function(t,e,i){var n=this.getFieldName(e.getAttribute("as"));if(n==null||!this.isExcluded(i,n,e,!1)){var r=this.getFieldTemplate(i,n,e),l=null;e.nodeName=="add"?(l=e.getAttribute("value"),l==null&&mxObjectCodec$1.allowEval&&(l=mxUtils$1.eval(mxUtils$1.getTextContent(e)))):l=t.decode(e,r);try{this.addObjectValue(i,n,l,r)}catch(s){throw new Error(s.message+" for "+e.nodeName)}}};mxObjectCodec$1.prototype.getFieldTemplate=function(t,e,i){var n=t[e];return n instanceof Array&&n.length>0&&(n=null),n};mxObjectCodec$1.prototype.addObjectValue=function(t,e,i,n){if(i!=null&&i!=n)if(e!=null&&e.length>0)t[e]=i;else if(t.constructor===Array)t.push(i);else throw new Error("Could not add object")};mxObjectCodec$1.prototype.processInclude=function(t,e,i){if(e.nodeName=="include"){var n=e.getAttribute("name");if(n!=null)try{var r=mxUtils$1.load(n).getDocumentElement();r!=null&&t.decode(r,i)}catch{}return!0}return!1};mxObjectCodec$1.prototype.beforeDecode=function(t,e,i){return e};mxObjectCodec$1.prototype.afterDecode=function(t,e,i){return i};var mxGenericChangeCodec=function(t,e){var i=new mxObjectCodec$1(t,["model","previous"],["cell"]);return i.afterDecode=function(n,r,l){return mxUtils$1.isNode(l.cell)&&(l.cell=n.decodeCell(l.cell,!1)),l.previous=l[e],l},i};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange$1,"value"));mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange$1,"style"));mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange$1,"geometry"));mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed"));mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible"));mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value"));var mxStylesheetCodec=mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxStylesheet);return t.encode=function(e,i){var n=e.document.createElement(this.getName());for(var r in i.styles){var l=i.styles[r],s=e.document.createElement("add");if(r!=null){s.setAttribute("as",r);for(var a in l){var o=this.getStringValue(a,l[a]);if(o!=null){var u=e.document.createElement("add");u.setAttribute("value",o),u.setAttribute("as",a),s.appendChild(u)}}s.childNodes.length>0&&n.appendChild(s)}}return n},t.getStringValue=function(e,i){var n=typeof i;return n=="function"?i=mxStyleRegistry.getName(i):n=="object"&&(i=null),i},t.decode=function(e,i,n){var r=n||new this.template.constructor,l=i.getAttribute("id");for(l!=null&&(e.objects[l]=r),i=i.firstChild;i!=null;){if(!this.processInclude(e,i,r)&&i.nodeName=="add"){var s=i.getAttribute("as");if(s!=null){var a=i.getAttribute("extend"),o=a!=null?mxUtils$1.clone(r.styles[a]):null;o==null&&(a!=null&&mxLog$1.warn("mxStylesheetCodec.decode: stylesheet "+a+" not found to extend"),o=new Object);for(var u=i.firstChild;u!=null;){if(u.nodeType==mxConstants$1.NODETYPE_ELEMENT){var d=u.getAttribute("as");if(u.nodeName=="add"){var p=mxUtils$1.getTextContent(u),c=null;p!=null&&p.length>0&&mxStylesheetCodec.allowEval?c=mxUtils$1.eval(p):(c=u.getAttribute("value"),mxUtils$1.isNumeric(c)&&(c=parseFloat(c))),c!=null&&(o[d]=c)}else u.nodeName=="remove"&&delete o[d]}u=u.nextSibling}r.putCellStyle(s,o)}}i=i.nextSibling}return r},t}());mxStylesheetCodec.allowEval=!1;mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxCell$2,["children","edges","overlays","mxTransient"],["parent","source","target"]);return t.isCellCodec=function(){return!0},t.isNumericAttribute=function(e,i,n){return i.nodeName!=="value"&&mxObjectCodec$1.prototype.isNumericAttribute.apply(this,arguments)},t.isExcluded=function(e,i,n,r){return mxObjectCodec$1.prototype.isExcluded.apply(this,arguments)||r&&i=="value"&&mxUtils.isNode(n)},t.afterEncode=function(e,i,n){if(i.value!=null&&mxUtils.isNode(i.value)){var r=n;n=mxUtils.importNode(e.document,i.value,!0),n.appendChild(r);var l=r.getAttribute("id");n.setAttribute("id",l),r.removeAttribute("id")}return n},t.beforeDecode=function(e,i,n){var r=i.cloneNode(!0),l=this.getName();if(i.nodeName!=l){var s=i.getElementsByTagName(l)[0];s!=null&&s.parentNode==i?(mxUtils.removeWhitespace(s,!0),mxUtils.removeWhitespace(s,!1),s.parentNode.removeChild(s),r=s):r=null,n.value=i.cloneNode(!0);var a=n.value.getAttribute("id");a!=null&&(n.setId(a),n.value.removeAttribute("id"))}else n.setId(i.getAttribute("id"));if(r!=null)for(var o=0;o<this.idrefs.length;o++){var u=this.idrefs[o],d=r.getAttribute(u);if(d!=null){r.removeAttribute(u);var p=e.objects[d]||e.lookup(d);if(p==null){var c=e.getElementById(d);if(c!=null){var g=mxCodecRegistry.codecs[c.nodeName]||this;p=g.decode(e,c)}else window.console!=null&&console.error("mxCellCodec.beforeDecode: "+this.idrefs[o]+" "+d+" not found for cell "+n.getId())}n[u]=p}}return r},t}());mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxChildChange$1,["model","child","previousIndex"],["parent","previous"]);return t.isReference=function(e,i,n,r){return i=="child"&&(!r||e.model.contains(e.previous))?!0:mxUtils$1.indexOf(this.idrefs,i)>=0},t.isExcluded=function(e,i,n,r){return mxObjectCodec$1.prototype.isExcluded.apply(this,arguments)||r&&n!=null&&(i=="previous"||i=="parent")&&!e.model.contains(n)},t.afterEncode=function(e,i,n){return this.isReference(i,"child",i.child,!0)?n.setAttribute("child",e.getId(i.child)):e.encodeCell(i.child,n),n},t.beforeDecode=function(e,i,n){if(i.firstChild!=null&&i.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT){i=i.cloneNode(!0);var r=i.firstChild;n.child=e.decodeCell(r,!1);var l=r.nextSibling;for(r.parentNode.removeChild(r),r=l;r!=null;){if(l=r.nextSibling,r.nodeType==mxConstants$1.NODETYPE_ELEMENT){var s=r.getAttribute("id");e.lookup(s)==null&&e.decodeCell(r)}r.parentNode.removeChild(r),r=l}}else{var a=i.getAttribute("child");n.child=e.getObject(a)}return i},t.afterDecode=function(e,i,n){return n.child!=null&&(n.child.parent!=null&&n.previous!=null&&n.child.parent!=n.previous&&(n.previous=n.child.parent),n.child.parent=n.previous,n.previous=n.parent,n.previousIndex=n.index),n},t}());function mxPanningManager(t){this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(i,n){},mouseMove:function(i,n){},mouseUp:mxUtils$1.bind(this,function(i,n){this.active&&this.stop()})},t.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils$1.bind(this,function(){this.active&&this.stop()}),mxEvent$1.addListener(document,"mouseup",this.mouseUpListener);var e=mxUtils$1.bind(this,function(){return this.scrollbars=mxUtils$1.hasScrollbars(t.container),this.scrollLeft=t.container.scrollLeft,this.scrollTop=t.container.scrollTop,window.setInterval(mxUtils$1.bind(this,function(){if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var i=-t.container.scrollLeft-Math.ceil(this.dx),n=-t.container.scrollTop-Math.ceil(this.dy);t.panGraph(i,n),t.panDx=this.scrollLeft-t.container.scrollLeft,t.panDy=this.scrollTop-t.container.scrollTop,t.fireEvent(new mxEventObject(mxEvent$1.PAN))}else t.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=t.view.translate.x,this.t0y=t.view.translate.y,this.active=!0},this.panTo=function(i,n,r,l){this.active||this.start(),this.scrollLeft=t.container.scrollLeft,this.scrollTop=t.container.scrollTop,r=r??0,l=l??0;var s=t.container;this.dx=i+r-s.scrollLeft-s.clientWidth,this.dx<0&&Math.abs(this.dx)<this.border?this.dx=this.border+this.dx:this.handleMouseOut?this.dx=Math.max(this.dx,0):this.dx=0,this.dx==0&&(this.dx=i-s.scrollLeft,this.dx>0&&this.dx<this.border?this.dx=this.dx-this.border:this.handleMouseOut?this.dx=Math.min(0,this.dx):this.dx=0),this.dy=n+l-s.scrollTop-s.clientHeight,this.dy<0&&Math.abs(this.dy)<this.border?this.dy=this.border+this.dy:this.handleMouseOut?this.dy=Math.max(this.dy,0):this.dy=0,this.dy==0&&(this.dy=n-s.scrollTop,this.dy>0&&this.dy<this.border?this.dy=this.dy-this.border:this.handleMouseOut?this.dy=Math.min(0,this.dy):this.dy=0),this.dx!=0||this.dy!=0?(this.dx*=this.damper,this.dy*=this.damper,this.thread==null&&(this.thread=e())):this.thread!=null&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,this.thread!=null&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)t.panDx=0,t.panDy=0,t.fireEvent(new mxEventObject(mxEvent$1.PAN));else{var i=t.panDx,n=t.panDy;(i!=0||n!=0)&&(t.panGraph(0,0),t.view.setTranslate(this.t0x+i/t.view.scale,this.t0y+n/t.view.scale))}},this.destroy=function(){t.removeMouseListener(this.mouseListener),mxEvent$1.removeListener(document,"mouseup",this.mouseUpListener)}}mxPanningManager.prototype.damper=1/6;mxPanningManager.prototype.delay=10;mxPanningManager.prototype.handleMouseOut=!0;mxPanningManager.prototype.border=0;function mxGraphSelectionModel(t){this.graph=t,this.cells=[]}mxGraphSelectionModel.prototype=new mxEventSource;mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel;mxGraphSelectionModel.prototype.doneResource=mxClient$1.language!="none"?"done":"";mxGraphSelectionModel.prototype.updatingSelectionResource=mxClient$1.language!="none"?"updatingSelection":"";mxGraphSelectionModel.prototype.graph=null;mxGraphSelectionModel.prototype.singleSelection=!1;mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection};mxGraphSelectionModel.prototype.setSingleSelection=function(t){this.singleSelection=t};mxGraphSelectionModel.prototype.isSelected=function(t){return t!=null?mxUtils$1.indexOf(this.cells,t)>=0:!1};mxGraphSelectionModel.prototype.isEmpty=function(){return this.cells.length==0};mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)};mxGraphSelectionModel.prototype.setCell=function(t){t!=null&&this.setCells([t])};mxGraphSelectionModel.prototype.setCells=function(t){if(t!=null){this.singleSelection&&(t=[this.getFirstSelectableCell(t)]);for(var e=[],i=0;i<t.length;i++)this.graph.isCellSelectable(t[i])&&e.push(t[i]);this.changeSelection(e,this.cells)}};mxGraphSelectionModel.prototype.getFirstSelectableCell=function(t){if(t!=null){for(var e=0;e<t.length;e++)if(this.graph.isCellSelectable(t[e]))return t[e]}return null};mxGraphSelectionModel.prototype.addCell=function(t){t!=null&&this.addCells([t])};mxGraphSelectionModel.prototype.addCells=function(t){if(t!=null){var e=null;this.singleSelection&&(e=this.cells,t=[this.getFirstSelectableCell(t)]);for(var i=[],n=0;n<t.length;n++)!this.isSelected(t[n])&&this.graph.isCellSelectable(t[n])&&i.push(t[n]);this.changeSelection(i,e)}};mxGraphSelectionModel.prototype.removeCell=function(t){t!=null&&this.removeCells([t])};mxGraphSelectionModel.prototype.removeCells=function(t){if(t!=null){for(var e=[],i=0;i<t.length;i++)this.isSelected(t[i])&&e.push(t[i]);this.changeSelection(null,e)}};mxGraphSelectionModel.prototype.changeSelection=function(t,e){if(t!=null&&t.length>0&&t[0]!=null||e!=null&&e.length>0&&e[0]!=null){var i=new mxSelectionChange(this,t,e);i.execute();var n=new mxUndoableEdit(this,!1);n.add(i),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",n))}};mxGraphSelectionModel.prototype.cellAdded=function(t){t!=null&&!this.isSelected(t)&&this.cells.push(t)};mxGraphSelectionModel.prototype.cellRemoved=function(t){if(t!=null){var e=mxUtils$1.indexOf(this.cells,t);e>=0&&this.cells.splice(e,1)}};function mxSelectionChange(t,e,i){this.selectionModel=t,this.added=e!=null?e.slice():null,this.removed=i!=null?i.slice():null}mxSelectionChange.prototype.execute=function(){var t=mxLog$1.enter("mxSelectionChange.execute");if(window.status=mxResources$1.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,this.removed!=null)for(var e=0;e<this.removed.length;e++)this.selectionModel.cellRemoved(this.removed[e]);if(this.added!=null)for(var e=0;e<this.added.length;e++)this.selectionModel.cellAdded(this.added[e]);var i=this.added;this.added=this.removed,this.removed=i,window.status=mxResources$1.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog$1.leave("mxSelectionChange.execute",t),this.selectionModel.fireEvent(new mxEventObject$1(mxEvent$1.CHANGE,"added",this.added,"removed",this.removed))};var mxStencilRegistry$1={stencils:{},addStencil:function(t,e){mxStencilRegistry$1.stencils[t]=e},getStencil:function(t){return mxStencilRegistry$1.stencils[t]}};function mxPolyline$1(t,e,i){mxShape$1.call(this),this.points=t,this.stroke=e,this.strokewidth=i??1}mxUtils$1.extend(mxPolyline$1,mxShape$1);mxPolyline$1.prototype.getRotation=function(){return 0};mxPolyline$1.prototype.getShapeRotation=function(){return 0};mxPolyline$1.prototype.isPaintBoundsInverted=function(){return!1};mxPolyline$1.prototype.paintEdgeShape=function(t,e){var i=t.pointerEventsValue;t.pointerEventsValue="stroke",this.style==null||this.style[mxConstants$1.STYLE_CURVED]!=1?this.paintLine(t,e,this.isRounded):this.paintCurvedLine(t,e),t.pointerEventsValue=i};mxPolyline$1.prototype.paintLine=function(t,e,i){var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,e,i,n,!1),t.stroke()};mxPolyline$1.prototype.paintCurvedLine=function(t,e){t.begin();var i=e[0],n=e.length;t.moveTo(i.x,i.y);for(var r=1;r<n-2;r++){var a=e[r],o=e[r+1],l=(a.x+o.x)/2,s=(a.y+o.y)/2;t.quadTo(a.x,a.y,l,s)}var a=e[n-2],o=e[n-1];t.quadTo(a.x,a.y,o.x,o.y),t.stroke()};var mxMarker={markers:[],addMarker:function(t,e){mxMarker.markers[t]=e},createMarker:function(t,e,i,n,r,l,s,a,o,u){var d=mxMarker.markers[i];return d!=null?d(t,e,i,n,r,l,s,a,o,u):null}};(function(){function t(n){return n=n??2,function(r,l,s,a,o,u,d,p,c,g){var x=o*c*1.118,C=u*c*1.118;o=o*(d+c),u=u*(d+c);var T=a.clone();T.x-=x,T.y-=C;var A=s!=mxConstants$1.ARROW_CLASSIC&&s!=mxConstants$1.ARROW_CLASSIC_THIN?1:3/4;return a.x+=-o*A-x,a.y+=-u*A-C,function(){r.begin(),r.moveTo(T.x,T.y),r.lineTo(T.x-o-u/n,T.y-u+o/n),(s==mxConstants$1.ARROW_CLASSIC||s==mxConstants$1.ARROW_CLASSIC_THIN)&&r.lineTo(T.x-o*3/4,T.y-u*3/4),r.lineTo(T.x+u/n-o,T.y-u-o/n),r.close(),g?r.fillAndStroke():r.stroke()}}}mxMarker.addMarker("classic",t(2)),mxMarker.addMarker("classicThin",t(3)),mxMarker.addMarker("block",t(2)),mxMarker.addMarker("blockThin",t(3));function e(n){return n=n??2,function(r,l,s,a,o,u,d,p,c,g){var x=o*c*1.118,C=u*c*1.118;o=o*(d+c),u=u*(d+c);var T=a.clone();return T.x-=x,T.y-=C,a.x+=-x*2,a.y+=-C*2,function(){r.begin(),r.moveTo(T.x-o-u/n,T.y-u+o/n),r.lineTo(T.x,T.y),r.lineTo(T.x+u/n-o,T.y-u-o/n),r.stroke()}}}mxMarker.addMarker("open",e(2)),mxMarker.addMarker("openThin",e(3)),mxMarker.addMarker("oval",function(n,r,l,s,a,o,u,d,p,c){var g=u/2,x=s.clone();return s.x-=a*g,s.y-=o*g,function(){n.ellipse(x.x-g,x.y-g,u,u),c?n.fillAndStroke():n.stroke()}}),mxMarker.addMarker("baseDash",function(n,r,l,s,a,o,u,d,p,c){var g=a*(u+p+1),x=o*(u+p+1);return function(){n.begin(),n.moveTo(s.x-x/2,s.y+g/2),n.lineTo(s.x+x/2,s.y-g/2),n.stroke()}}),mxMarker.addMarker("doubleBlock",function(n,r,l,s,a,o,u,d,p,c){var g=2,x=a*p*1.118,C=o*p*1.118;a=a*(u+p),o=o*(u+p);var T=s.clone();T.x-=x,T.y-=C;var A=l!=mxConstants$1.ARROW_CLASSIC&&l!=mxConstants$1.ARROW_CLASSIC_THIN?1:3/4;return s.x+=-a*A*2-x,s.y+=-o*A*2-C,function(){n.begin(),n.moveTo(T.x,T.y),n.lineTo(T.x-a-o/g,T.y-o+a/g),n.lineTo(T.x+o/g-a,T.y-o-a/g),n.close(),n.moveTo(T.x-a,T.y-o),n.lineTo(T.x-2*a-.5*o,T.y+.5*a-2*o),n.lineTo(T.x-2*a+.5*o,T.y-.5*a-2*o),n.close(),c?n.fillAndStroke():n.stroke()}});function i(n,r,l,s,a,o,u,d,p,c){var g=l==mxConstants$1.ARROW_DIAMOND?.7071:.9862,x=a*p*g,C=o*p*g;a=a*(u+p),o=o*(u+p);var T=s.clone();T.x-=x,T.y-=C,s.x+=-a-x,s.y+=-o-C;var A=l==mxConstants$1.ARROW_DIAMOND?2:3.4;return function(){n.begin(),n.moveTo(T.x,T.y),n.lineTo(T.x-a/2-o/A,T.y+a/A-o/2),n.lineTo(T.x-a,T.y-o),n.lineTo(T.x-a/2+o/A,T.y-o/2-a/A),n.close(),c?n.fillAndStroke():n.stroke()}}mxMarker.addMarker("diamond",i),mxMarker.addMarker("diamondThin",i),mxMarker.addMarker("manyOptional",function(n,r,l,s,a,o,u,d,p,c){var g=a*(u+p+1),x=o*(u+p+1),C=u/2,T=s.x,A=s.y;return s.x-=2*g-a*p/2,s.y-=2*x-o*p/2,function(){n.begin(),n.ellipse(T-1.5*g-C,A-1.5*x-C,2*C,2*C),c?n.fillAndStroke():n.stroke(),n.begin(),n.moveTo(T,A),n.lineTo(T-g,A-x),n.moveTo(T+x/2,A-g/2),n.lineTo(T-g,A-x),n.lineTo(T-x/2,A+g/2),n.stroke()}})})();function mxConnector(t,e,i){mxPolyline$1.call(this,t,e,i)}mxUtils$1.extend(mxConnector,mxPolyline$1);mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=this.style!=null&&this.style[mxConstants$1.STYLE_CURVED]==1,mxShape$1.prototype.updateBoundingBox.apply(this,arguments)};mxConnector.prototype.paintEdgeShape=function(t,e){var i=this.createMarker(t,e,!0),n=this.createMarker(t,e,!1);mxPolyline$1.prototype.paintEdgeShape.apply(this,arguments),t.setShadow(!1),t.setDashed(!1),i!=null&&(t.setFillColor(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTFILLCOLOR,this.stroke)),i()),n!=null&&(t.setFillColor(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDFILLCOLOR,this.stroke)),n())};mxConnector.prototype.createMarker=function(t,e,i){var n=null,r=e.length,l=mxUtils$1.getValue(this.style,i?mxConstants$1.STYLE_STARTARROW:mxConstants$1.STYLE_ENDARROW),s=i?e[1]:e[r-2],a=i?e[0]:e[r-1];if(l!=null&&s!=null&&a!=null){var o=a.x-s.x,u=a.y-s.y,d=Math.sqrt(o*o+u*u),p=o/d,c=u/d,g=mxUtils$1.getNumber(this.style,i?mxConstants$1.STYLE_STARTSIZE:mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE),x=this.style[i?mxConstants$1.STYLE_STARTFILL:mxConstants$1.STYLE_ENDFILL]!=0;n=mxMarker.createMarker(t,this,l,a,p,c,g,i,this.strokewidth,x)}return n};mxConnector.prototype.augmentBoundingBox=function(t){mxShape$1.prototype.augmentBoundingBox.apply(this,arguments);var e=0;mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(e=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE)+1),mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(e=Math.max(e,mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE))+1),t.grow(e*this.scale)};function mxText$1(t,e,i,n,r,l,s,a,o,u,d,p,c,g,x,C,T,A,R,_,N){mxShape$1.call(this),this.value=t,this.bounds=e,this.color=r??"black",this.align=i??mxConstants$1.ALIGN_CENTER,this.valign=n??mxConstants$1.ALIGN_MIDDLE,this.family=l??mxConstants$1.DEFAULT_FONTFAMILY,this.size=s??mxConstants$1.DEFAULT_FONTSIZE,this.fontStyle=a??mxConstants$1.DEFAULT_FONTSTYLE,this.spacing=parseInt(o||2),this.spacingTop=this.spacing+parseInt(u||0),this.spacingRight=this.spacing+parseInt(d||0),this.spacingBottom=this.spacing+parseInt(p||0),this.spacingLeft=this.spacing+parseInt(c||0),this.horizontal=g??!0,this.background=x,this.border=C,this.wrap=T??!1,this.clipped=A??!1,this.overflow=R??"visible",this.labelPadding=_??0,this.textDirection=N,this.rotation=0,this.updateMargin()}mxUtils$1.extend(mxText$1,mxShape$1);mxText$1.prototype.baseSpacingTop=0;mxText$1.prototype.markdown=null;mxText$1.prototype.baseSpacingBottom=0;mxText$1.prototype.baseSpacingLeft=0;mxText$1.prototype.baseSpacingRight=0;mxText$1.prototype.replaceLinefeeds=!0;mxText$1.prototype.verticalTextRotation=-90;mxText$1.prototype.ignoreClippedStringSize=!0;mxText$1.prototype.ignoreStringSize=!1;mxText$1.prototype.textWidthPadding=document.documentMode==8&&!mxClient.IS_EM?4:3;mxText$1.prototype.lastValue=null;mxText$1.prototype.cacheEnabled=!0;mxText$1.prototype.isHtmlAllowed=function(){return document.documentMode!=8||mxClient.IS_EM};mxText$1.prototype.getSvgScreenOffset=function(){return 0};mxText$1.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds!=null&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)};mxText$1.prototype.configurePointerEvents=function(t){};mxText$1.prototype.getActualTextDirection=function(){var t=this.textDirection;return t==mxConstants$1.TEXT_DIRECTION_AUTO&&(t=this.getAutoDirection()),t!=mxConstants$1.TEXT_DIRECTION_LTR&&t!=mxConstants$1.TEXT_DIRECTION_RTL&&t!=mxConstants$1.TEXT_DIRECTION_VERTICAL_LR&&t!=mxConstants$1.TEXT_DIRECTION_VERTICAL_RL&&(t=null),t};mxText$1.prototype.paint=function(t,e){var i=this.scale,n=this.bounds.x/i,r=this.bounds.y/i,l=this.bounds.width/i,s=this.bounds.height/i;this.updateTransform(t,n,r,l,s),this.configureCanvas(t,n,r,l,s),this.updateSvgFilters(t!=null?t.state.scale:i);var a=this.getActualTextDirection();if(e)t.updateText(n,r,l,s,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),a,this.node);else{var o=mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML,u=this.dialect==mxConstants$1.DIALECT_MARKDOWN?"md":o?"html":"",d=u=="md"?this.markdown:this.value;!o&&u=="html"&&(d=mxUtils$1.htmlEntities(d,!1)),u=="html"&&!mxUtils$1.isNode(this.value)&&(d=mxUtils$1.replaceTrailingNewlines(d,"<div><br></div>")),d=!mxUtils$1.isNode(this.value)&&this.replaceLinefeeds&&u=="html"?d.replace(/\n/g,"<br/>"):d,t.text(n,r,l,s,d,this.align,this.valign,this.wrap,u,this.overflow,this.clipped,this.getTextRotation(),a)}};mxText$1.prototype.redraw=function(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML))if(this.node.nodeName=="DIV")mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,this.state==null||this.state.view.textDiv==null),mxClient.IS_IE&&(document.documentMode==null||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform());else{var t=this.createCanvas();t!=null&&t.updateText!=null?(t.pointerEvents=this.pointerEvents,this.paint(t,!0),this.destroyCanvas(t)):mxShape$1.prototype.redraw.apply(this,arguments)}else mxShape$1.prototype.redraw.apply(this,arguments),mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null};mxText$1.prototype.resetStyles=function(){mxShape$1.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants$1.ALIGN_CENTER,this.valign=mxConstants$1.ALIGN_MIDDLE,this.family=mxConstants$1.DEFAULT_FONTFAMILY,this.size=mxConstants$1.DEFAULT_FONTSIZE,this.fontStyle=mxConstants$1.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants$1.DEFAULT_TEXT_DIRECTION,delete this.margin};mxText$1.prototype.apply=function(t){var e=this.spacing;mxShape$1.prototype.apply.apply(this,arguments),this.style!=null&&(this.fontStyle=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTFAMILY,this.family),this.size=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTSIZE,this.size),this.color=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTCOLOR,this.color),this.align=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ALIGN,this.align),this.valign=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_TOP,this.spacingTop-e))+this.spacing,this.spacingRight=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_RIGHT,this.spacingRight-e))+this.spacing,this.spacingBottom=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_BOTTOM,this.spacingBottom-e))+this.spacing,this.spacingLeft=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_LEFT,this.spacingLeft-e))+this.spacing,this.horizontal=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null};mxText$1.prototype.getAutoDirection=function(){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return t!=null&&t.length>0&&t[0]>"z"?mxConstants$1.TEXT_DIRECTION_RTL:mxConstants$1.TEXT_DIRECTION_LTR};mxText$1.prototype.getContentNode=function(){var t=this.node;return t!=null&&(t.ownerSVGElement==null?t=this.node.firstChild.firstChild:t=t.firstChild.firstChild.firstChild.firstChild.firstChild),t};mxText$1.prototype.updateBoundingBox=function(){var t=this.node;this.boundingBox=this.bounds.clone();var e=this.getTextRotation(),i=this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER):null,n=this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE):null;if(!this.ignoreStringSize&&t!=null&&this.overflow!="fill"&&(!this.clipped||!this.ignoreClippedStringSize||i!=mxConstants$1.ALIGN_CENTER||n!=mxConstants$1.ALIGN_MIDDLE)){var r=null,l=null;if(t.ownerSVGElement!=null)if(t.firstChild!=null&&t.firstChild.firstChild!=null&&t.firstChild.firstChild.nodeName=="foreignObject"&&t.firstChild.firstChild.firstChild!=null&&t.firstChild.firstChild.firstChild.firstChild!=null)t=t.firstChild.firstChild.firstChild.firstChild,l=t.offsetHeight*this.scale,this.overflow=="width"?r=this.boundingBox.width:r=t.offsetWidth*this.scale;else try{var s=t.getBBox();typeof this.value=="string"&&mxUtils$1.trim(this.value)==0?this.boundingBox=null:s.width==0&&s.height==0?this.boundingBox=null:this.boundingBox=new mxRectangle$1(s.x,s.y,s.width,s.height);return}catch{}else{var a=this.state!=null?this.state.view.textDiv:null;if(this.offsetWidth!=null&&this.offsetHeight!=null)r=this.offsetWidth*this.scale,l=this.offsetHeight*this.scale;else{a!=null&&(this.updateFont(a),this.updateSize(a,!1),this.updateInnerHtml(a),t=a);var o=t;if(document.documentMode==8&&!mxClient.IS_EM){var u=Math.round(this.bounds.width/this.scale);if(this.wrap&&u>0){if(t.style.wordWrap=mxConstants$1.WORD_WRAP,t.style.whiteSpace="normal",t.style.wordWrap!="break-word"){var d=o.getElementsByTagName("div");d.length>0&&(o=d[d.length-1]),r=o.offsetWidth+2,d=this.node.getElementsByTagName("div"),this.clipped&&(r=Math.min(u,r)),d.length>1&&(d[d.length-2].style.width=r+"px")}}else t.style.whiteSpace="nowrap"}else o.firstChild!=null&&o.firstChild.nodeName=="DIV"&&(o=o.firstChild);this.offsetWidth=o.offsetWidth+this.textWidthPadding,this.offsetHeight=o.offsetHeight,r=this.offsetWidth*this.scale,l=this.offsetHeight*this.scale}}r!=null&&l!=null&&(this.boundingBox=new mxRectangle$1(this.bounds.x,this.bounds.y,r,l))}if(this.boundingBox!=null)if(e!=0){var p=mxUtils$1.getBoundingBox(new mxRectangle$1(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),e,new mxPoint$1(0,0));this.unrotatedBoundingBox=mxRectangle$1.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=p.x,this.boundingBox.y+=p.y,this.boundingBox.width=p.width,this.boundingBox.height=p.height}else this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null};mxText$1.prototype.getShapeRotation=function(){return 0};mxText$1.prototype.getTextRotation=function(){return this.state!=null&&this.state.shape!=null?this.state.shape.getTextRotation():0};mxText$1.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&this.state!=null&&this.state.view.graph.model.isVertex(this.state.cell)};mxText$1.prototype.configureCanvas=function(t,e,i,n,r){mxShape$1.prototype.configureCanvas.apply(this,arguments),t.setFontColor(this.color),t.setFontBackgroundColor(this.background),t.setFontBorderColor(this.border),t.setFontFamily(this.family),t.setFontSize(this.size),t.setFontStyle(this.fontStyle)};mxText$1.prototype.isShadowEnabled=function(){return this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_SHADOW,!1):!1};mxText$1.prototype.getHtmlValue=function(){var t=this.value;return this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(t=mxUtils$1.htmlEntities(t,!1)),t=mxUtils$1.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,t};mxText$1.prototype.getTextCss=function(){var t=mxConstants$1.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT,e="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+t+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ";(this.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(e+="font-weight: bold; "),(this.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(e+="font-style: italic; ");var i=[];return(this.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.push("underline"),(this.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&i.push("line-through"),i.length>0&&(e+="text-decoration: "+i.join(" ")+"; "),e};mxText$1.prototype.redrawHtmlShape=function(){if(mxClient.IS_SVG)this.redrawHtmlShapeWithCss3();else{var t=this.node.style;t.whiteSpace="normal",t.overflow="",t.width="",t.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,this.state==null||this.state.view.textDiv==null),this.offsetWidth=null,this.offsetHeight=null,mxClient.IS_IE&&(document.documentMode==null||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()}};mxText$1.prototype.redrawHtmlShapeWithCss3=function(){var t=Math.max(0,Math.round(this.bounds.width/this.scale)),e=Math.max(0,Math.round(this.bounds.height/this.scale)),i="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",n=this.getTextCss(),r=this.getActualTextDirection();mxSvgCanvas2D$1.createCss(t+2,e,this.align,this.valign,this.wrap,this.overflow,this.clipped,r,this.background!=null?mxUtils$1.htmlEntities(this.background):null,this.border!=null?mxUtils$1.htmlEntities(this.border):null,i,n,this.scale,mxUtils$1.bind(this,function(l,s,a,o,u,d){var p=this.getTextRotation(),c=(this.scale!=1?"scale("+this.scale+") ":"")+(p!=0?"rotate("+p+"deg) ":"")+(this.margin.x!=0||this.margin.y!=0?"translate("+this.margin.x*100+"%,"+this.margin.y*100+"%)":"");c!=""&&(c="transform-origin: 0 0; transform: "+c+"; "),this.overflow=="block"&&this.valign==mxConstants$1.ALIGN_MIDDLE&&(c+="max-height: "+(e+1)+"px;"),d==""?(a+=o,o="display:inline-block; min-width: 100%; "+c):(o+=c,mxClient.IS_SF&&(o+="-webkit-clip-path: content-box;")),this.overflow=="block"&&(o+="width: 100%; "),this.opacity<100&&(u+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",a);var g=mxUtils$1.isNode(this.value)?this.value.outerHTML:this.getHtmlValue();this.node.firstChild==null&&(this.node.innerHTML="<div><div>"+g+"</div></div>",mxClient.IS_IE11&&this.fixFlexboxForIe11(this.node)),this.node.firstChild.firstChild.setAttribute("style",u),this.node.firstChild.setAttribute("style",o)}))};mxText$1.prototype.fixFlexboxForIe11=function(t){for(var e=t.querySelectorAll('div[style*="display: flex; justify-content: flex-end;"]'),i=0;i<e.length;i++)e[i].style.justifyContent="flex-start",e[i].style.flexDirection="row-reverse";if(!this.wrap)for(var e=t.querySelectorAll('div[style*="display: flex; justify-content: center;"]'),n=-window.innerWidth,i=0;i<e.length;i++)e[i].style.marginLeft=n+"px",e[i].style.marginRight=n+"px"};mxText$1.prototype.updateHtmlTransform=function(){var t=this.getTextRotation(),e=this.node.style,i=this.margin.x,n=this.margin.y;t!=0?(mxUtils$1.setPrefixedStyle(e,"transformOrigin",-i*100+"% "+-n*100+"%"),mxUtils$1.setPrefixedStyle(e,"transform","translate("+i*100+"%,"+n*100+"%) scale("+this.scale+") rotate("+t+"deg)")):(mxUtils$1.setPrefixedStyle(e,"transformOrigin","0% 0%"),mxUtils$1.setPrefixedStyle(e,"transform","scale("+this.scale+") translate("+i*100+"%,"+n*100+"%)")),e.left=Math.round(this.bounds.x-Math.ceil(i*(this.overflow!="fill"&&this.overflow!="width"?3:1)))+"px",e.top=Math.round(this.bounds.y-n*(this.overflow!="fill"?3:1))+"px",this.opacity<100?e.opacity=this.opacity/100:e.opacity=""};mxText$1.prototype.updateInnerHtml=function(t){if(mxUtils$1.isNode(this.value))t.innerHTML=this.value.outerHTML;else{var e=this.value;this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(e=mxUtils$1.htmlEntities(e,!1)),e=mxUtils$1.replaceTrailingNewlines(e,"<div>&nbsp;</div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,e='<div style="display:inline-block;_display:inline;">'+e+"</div>",t.innerHTML=e}};mxText$1.prototype.updateHtmlFilter=function(){var t=this.node.style,e=this.margin.x,_=this.margin.y,i=this.scale;mxUtils$1.setOpacity(this.node,this.opacity);var n=0,r=0,l=this.state!=null?this.state.view.textDiv:null,s=this.node;if(l!=null){l.style.overflow="",l.style.height="",l.style.width="",this.updateFont(l),this.updateSize(l,!1),this.updateInnerHtml(l);var a=Math.round(this.bounds.width/this.scale);this.wrap&&a>0?(l.style.whiteSpace="normal",l.style.wordWrap=mxConstants$1.WORD_WRAP,n=a,this.clipped&&(n=Math.min(n,this.bounds.width)),l.style.width=n+"px"):l.style.whiteSpace="nowrap",s=l,s.firstChild!=null&&s.firstChild.nodeName=="DIV"&&(s=s.firstChild,this.wrap&&l.style.wordWrap=="break-word"&&(s.style.width="100%")),!this.clipped&&this.wrap&&a>0&&(n=s.offsetWidth+this.textWidthPadding,l.style.width=n+"px"),r=s.offsetHeight+2}else s.firstChild!=null&&s.firstChild.nodeName=="DIV"&&(s=s.firstChild,r=s.offsetHeight);n=s.offsetWidth+this.textWidthPadding,this.clipped&&(r=Math.min(r,this.bounds.height));var a=this.bounds.width/i,o=this.bounds.height/i;this.overflow=="fill"?(r=o,n=a):this.overflow=="width"&&(r=s.scrollHeight,n=a),this.offsetWidth=n,this.offsetHeight=r,o=r,this.overflow!="fill"&&this.overflow!="width"&&(this.clipped&&(n=Math.min(a,n)),a=n,this.wrap&&(t.width=Math.round(a)+"px")),o*=i,a*=i;var u=this.getTextRotation()*(Math.PI/180),d=parseFloat(parseFloat(Math.cos(u)).toFixed(8)),p=parseFloat(parseFloat(Math.sin(-u)).toFixed(8));u%=2*Math.PI,u<0&&(u+=2*Math.PI),u%=Math.PI,u>Math.PI/2&&(u=Math.PI-u);var c=Math.cos(u),g=Math.sin(-u),x=a*-(e+.5),C=o*-(_+.5),T=(o-o*c+a*g)/2+p*x-d*C,A=(a-a*c+o*g)/2-d*x-p*C;if(u!=0){var R="progid:DXImageTransform.Microsoft.Matrix(M11="+d+", M12="+p+", M21="+-p+", M22="+d+", sizingMethod='auto expand')";t.filter!=null&&t.filter.length>0?t.filter+=" "+R:t.filter=R}var _=0;t.zoom=i,t.left=Math.round(this.bounds.x+A-a/2)+"px",t.top=Math.round(this.bounds.y+T-o/2+_)+"px"};mxText$1.prototype.updateValue=function(){if(mxUtils$1.isNode(this.value))this.node.innerText="",this.node.appendChild(this.value);else{var t=this.value;this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(t=mxUtils$1.htmlEntities(t,!1)),t=mxUtils$1.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t;var e=this.background!=null&&this.background!=mxConstants$1.NONE?this.background:null,i=this.border!=null&&this.border!=mxConstants$1.NONE?this.border:null;if(this.overflow=="fill"||this.overflow=="width")e!=null&&(this.node.style.backgroundColor=e),i!=null&&(this.node.style.border="1px solid "+i);else{var n="";e!=null&&(n+="background-color:"+mxUtils$1.htmlEntities(e)+";"),i!=null&&(n+="border:1px solid "+mxUtils$1.htmlEntities(i)+";");var r=mxConstants$1.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT;t='<div style="zoom:1;'+n+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+r+'">'+t+"</div>"}this.node.innerHTML=t;var l=this.node.getElementsByTagName("div");if(l.length>0){var s=this.textDirection;s==mxConstants$1.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(s=this.getAutoDirection()),s==mxConstants$1.TEXT_DIRECTION_LTR||s==mxConstants$1.TEXT_DIRECTION_RTL?l[l.length-1].setAttribute("dir",s):l[l.length-1].removeAttribute("dir")}}};mxText$1.prototype.updateFont=function(t){var e=t.style;e.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants$1.LINE_HEIGHT+"px":mxConstants$1.LINE_HEIGHT,e.fontSize=this.size+"px",e.fontFamily=this.family,e.verticalAlign="top",e.color=this.color,(this.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD?e.fontWeight="bold":e.fontWeight="",(this.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC?e.fontStyle="italic":e.fontStyle="";var i=[];(this.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.push("underline"),(this.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&i.push("line-through"),e.textDecoration=i.join(" "),this.align==mxConstants$1.ALIGN_CENTER?e.textAlign="center":this.align==mxConstants$1.ALIGN_RIGHT?e.textAlign="right":e.textAlign="left"};mxText$1.prototype.updateSize=function(t,e){var i=Math.max(0,Math.round(this.bounds.width/this.scale)),n=Math.max(0,Math.round(this.bounds.height/this.scale)),r=t.style;if(this.clipped?(r.overflow="hidden",r.maxHeight=n+"px",r.maxWidth=i+"px"):this.overflow=="fill"?(r.width=i+1+"px",r.height=n+1+"px",r.overflow="hidden"):this.overflow=="width"?(r.width=i+1+"px",r.maxHeight=n+1+"px",r.overflow="hidden"):this.overflow=="block"&&(r.width=i+1+"px"),this.wrap&&i>0){if(r.wordWrap=mxConstants$1.WORD_WRAP,r.whiteSpace="normal",r.width=i+"px",e&&this.overflow!="fill"&&this.overflow!="width"){var l=t;l.firstChild!=null&&l.firstChild.nodeName=="DIV"&&(l=l.firstChild,t.style.wordWrap=="break-word"&&(l.style.width="100%"));var s=l.offsetWidth;if(s==0){var a=t.parentNode;t.style.visibility="hidden",document.body.appendChild(t),s=l.offsetWidth,t.style.visibility="",a.appendChild(t)}s+=3,this.clipped&&(s=Math.min(s,i)),r.width=s+"px"}}else r.whiteSpace="nowrap"};mxText$1.prototype.updateMargin=function(){this.margin=mxUtils$1.getAlignmentAsPoint(this.align,this.valign)};mxText$1.prototype.getSpacing=function(t,e){var i=0,n=0;return e!=null&&e.x==-.5||e==null&&this.align==mxConstants$1.ALIGN_CENTER?i=(this.spacingLeft-this.spacingRight)/2:e!=null&&e.x==-1||e==null&&this.align==mxConstants$1.ALIGN_RIGHT?i=-this.spacingRight-(t?0:this.baseSpacingRight):i=this.spacingLeft+(t?0:this.baseSpacingLeft),this.valign==mxConstants$1.ALIGN_MIDDLE?n=(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants$1.ALIGN_BOTTOM?n=-this.spacingBottom-(t?0:this.baseSpacingBottom):n=this.spacingTop+(t?0:this.baseSpacingTop),new mxPoint$1(i,n)};function mxRhombus(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxRhombus,mxShape$1);mxRhombus.prototype.isRoundable=function(){return!0};mxRhombus.prototype.paintVertexShape=function(t,e,i,n,r){var l=n/2,s=r/2,a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint$1(e+l,i),new mxPoint$1(e+n,i+s),new mxPoint$1(e+l,i+r),new mxPoint$1(e,i+s)],this.isRounded,a,!0),t.fillAndStroke()};function mxCylinder(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxCylinder,mxShape$1);mxCylinder.prototype.maxHeight=40;mxCylinder.prototype.paintVertexShape=function(t,e,i,n,r){t.translate(e,i),t.begin(),this.redrawPath(t,e,i,n,r,!1),t.fillAndStroke(),(!this.outline||this.style==null||mxUtils$1.getValue(this.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0)&&(t.setShadow(!1),t.begin(),this.redrawPath(t,e,i,n,r,!0),t.stroke())};mxCylinder.prototype.getCylinderSize=function(t,e,i,n){return Math.min(this.maxHeight,Math.round(n/5))};mxCylinder.prototype.redrawPath=function(t,e,i,n,r,l){var s=this.getCylinderSize(e,i,n,r);(l&&this.fill!=null||!l&&this.fill==null)&&(t.moveTo(0,s),t.curveTo(0,2*s,n,2*s,n,s),l||(t.stroke(),t.begin())),l||(t.moveTo(0,s),t.curveTo(0,-s/3,n,-s/3,n,s),t.lineTo(n,r-s),t.curveTo(n,r+s/3,0,r+s/3,0,r-s),t.close())};function mxActor(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxActor,mxShape$1);mxActor.prototype.paintVertexShape=function(t,e,i,n,r){t.translate(e,i),t.begin(),this.redrawPath(t,e,i,n,r),t.fillAndStroke()};mxActor.prototype.redrawPath=function(t,e,i,n,r){var l=n/3;t.moveTo(0,r),t.curveTo(0,3*r/5,0,2*r/5,n/2,2*r/5),t.curveTo(n/2-l,2*r/5,n/2-l,0,n/2,0),t.curveTo(n/2+l,0,n/2+l,2*r/5,n/2,2*r/5),t.curveTo(n,2*r/5,n,3*r/5,n,r),t.close()};function mxTriangle(){mxActor.call(this)}mxUtils$1.extend(mxTriangle,mxActor);mxTriangle.prototype.isRoundable=function(){return!0};mxTriangle.prototype.redrawPath=function(t,e,i,n,r){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint$1(0,0),new mxPoint$1(n,.5*r),new mxPoint$1(0,r)],this.isRounded,l,!0)};function mxHexagon(){mxActor.call(this)}mxUtils$1.extend(mxHexagon,mxActor);mxHexagon.prototype.redrawPath=function(t,e,i,n,r){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint$1(.25*n,0),new mxPoint$1(.75*n,0),new mxPoint$1(n,.5*r),new mxPoint$1(.75*n,r),new mxPoint$1(.25*n,r),new mxPoint$1(0,.5*r)],this.isRounded,l,!0)};function mxCloud(t,e,i,n){mxActor.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxCloud,mxActor);mxCloud.prototype.redrawPath=function(t,e,i,n,r){t.moveTo(.25*n,.25*r),t.curveTo(.05*n,.25*r,0,.5*r,.16*n,.55*r),t.curveTo(0,.66*r,.18*n,.9*r,.31*n,.8*r),t.curveTo(.4*n,r,.7*n,r,.8*n,.8*r),t.curveTo(n,.8*r,n,.6*r,.875*n,.5*r),t.curveTo(n,.3*r,.8*n,.1*r,.625*n,.2*r),t.curveTo(.5*n,.05*r,.3*n,.05*r,.25*n,.25*r),t.close()};function mxLine(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.stroke=e,this.strokewidth=i??1,this.vertical=n??this.vertical}mxUtils$1.extend(mxLine,mxShape$1);mxLine.prototype.vertical=!1;mxLine.prototype.paintVertexShape=function(t,e,i,n,r){if(t.begin(),this.vertical){var l=e+n/2;t.moveTo(l,i),t.lineTo(l,i+r)}else{var l=i+r/2;t.moveTo(e,l),t.lineTo(e+n,l)}t.stroke()};function mxArrow(t,e,i,n,r,l,s){mxShape$1.call(this),this.points=t,this.fill=e,this.stroke=i,this.strokewidth=n??1,this.arrowWidth=r??mxConstants$1.ARROW_WIDTH,this.spacing=l??mxConstants$1.ARROW_SPACING,this.endSize=s??mxConstants$1.ARROW_SIZE}mxUtils$1.extend(mxArrow,mxShape$1);mxArrow.prototype.augmentBoundingBox=function(t){mxShape$1.prototype.augmentBoundingBox.apply(this,arguments);var e=Math.max(this.arrowWidth,this.endSize);t.grow((e/2+this.strokewidth)*this.scale)};mxArrow.prototype.paintEdgeShape=function(t,e){var i=mxConstants$1.ARROW_SPACING,n=mxConstants$1.ARROW_WIDTH,r=mxConstants$1.ARROW_SIZE,l=e[0],s=e[e.length-1],a=s.x-l.x,o=s.y-l.y,u=Math.sqrt(a*a+o*o),d=u-2*i-r,p=a/u,c=o/u,g=d*p,x=d*c,C=n*c/3,T=-n*p/3,A=l.x-C/2+i*p,R=l.y-T/2+i*c,_=A+C,N=R+T,H=_+g,k=N+x,K=H+C,Q=k+T,nt=K-3*C,dt=Q-3*T;t.begin(),t.moveTo(A,R),t.lineTo(_,N),t.lineTo(H,k),t.lineTo(K,Q),t.lineTo(s.x-i*p,s.y-i*c),t.lineTo(nt,dt),t.lineTo(nt+C,dt+T),t.close(),t.fillAndStroke()};function mxArrowConnector(t,e,i,n,r,l,s){mxShape$1.call(this),this.points=t,this.fill=e,this.stroke=i,this.strokewidth=n??1,this.arrowWidth=r??mxConstants$1.ARROW_WIDTH,this.arrowSpacing=l??mxConstants$1.ARROW_SPACING,this.startSize=mxConstants$1.ARROW_SIZE/5,this.endSize=mxConstants$1.ARROW_SIZE/5}mxUtils$1.extend(mxArrowConnector,mxShape$1);mxArrowConnector.prototype.useSvgBoundingBox=!0;mxArrowConnector.prototype.isRoundable=function(){return!0};mxArrowConnector.prototype.resetStyles=function(){mxShape$1.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants$1.ARROW_SPACING};mxArrowConnector.prototype.apply=function(t){mxShape$1.prototype.apply.apply(this,arguments),this.style!=null&&(this.startSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3,this.endSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3)};mxArrowConnector.prototype.augmentBoundingBox=function(t){mxShape$1.prototype.augmentBoundingBox.apply(this,arguments);var e=this.getEdgeWidth();this.isMarkerStart()&&(e=Math.max(e,this.getStartArrowWidth())),this.isMarkerEnd()&&(e=Math.max(e,this.getEndArrowWidth())),t.grow((e/2+this.strokewidth)*this.scale)};mxArrowConnector.prototype.paintEdgeShape=function(t,e){var i=this.strokewidth;this.outline&&(i=Math.max(1,mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STROKEWIDTH,this.strokewidth)));var n=this.getStartArrowWidth()+i,r=this.getEndArrowWidth()+i,l=this.outline?this.getEdgeWidth()+i:this.getEdgeWidth(),s=this.isOpenEnded(),a=this.isMarkerStart(),o=this.isMarkerEnd(),u=s?0:this.arrowSpacing+i/2,d=this.startSize+i,p=this.endSize+i,c=this.isArrowRounded(),g=e[e.length-1],x=e[1].x-e[0].x,C=e[1].y-e[0].y,T=Math.sqrt(x*x+C*C);if(T!=0){var A=x/T,R,_=A,N=C/T,H,k=N,K=l*N,Q=-l*A,nt=[];c?t.setLineJoin("round"):e.length>2&&t.setMiterLimit(1.42),t.begin();var dt=A,mt=N;if(a&&!s)this.paintMarker(t,e[0].x,e[0].y,A,N,d,n,l,u,!0);else{var xt=e[0].x+K/2+u*A,Y=e[0].y+Q/2+u*N,B=e[0].x-K/2+u*A,U=e[0].y-Q/2+u*N;s?(t.moveTo(xt,Y),nt.push(function(){t.lineTo(B,U)})):(t.moveTo(B,U),t.lineTo(xt,Y))}for(var lt=0,tt=0,st=0,ft=0;ft<e.length-2;ft++){var $t=mxUtils$1.relativeCcw(e[ft].x,e[ft].y,e[ft+1].x,e[ft+1].y,e[ft+2].x,e[ft+2].y);if(lt=e[ft+2].x-e[ft+1].x,tt=e[ft+2].y-e[ft+1].y,st=Math.sqrt(lt*lt+tt*tt),st!=0){_=lt/st,k=tt/st;var Ct=A*_+N*k,pt=Math.max(Math.sqrt((Ct+1)/2),.04);R=A+_,H=N+k;var ct=Math.sqrt(R*R+H*H);if(ct!=0){R=R/ct,H=H/ct;var Mt=Math.max(pt,Math.min(this.strokewidth/200+.04,.35)),bt=$t!=0&&c?Math.max(.1,Mt):Math.max(pt,.06),Ot=e[ft+1].x+H*l/2/bt,gt=e[ft+1].y-R*l/2/bt,Tt=e[ft+1].x-H*l/2/bt,vt=e[ft+1].y+R*l/2/bt;if($t==0||!c)t.lineTo(Ot,gt),function(kt,Xt){nt.push(function(){t.lineTo(kt,Xt)})}(Tt,vt);else if($t==-1){var Pt=Tt+N*l,Dt=vt-A*l,zt=Tt+k*l,Rt=vt-_*l;t.lineTo(Pt,Dt),t.quadTo(Ot,gt,zt,Rt),function(kt,Xt){nt.push(function(){t.lineTo(kt,Xt)})}(Tt,vt)}else t.lineTo(Ot,gt),function(kt,Xt){var ie=Ot-N*l,At=gt+A*l,Jt=Ot-k*l,ne=gt+_*l;nt.push(function(){t.quadTo(kt,Xt,ie,At)}),nt.push(function(){t.lineTo(Jt,ne)})}(Tt,vt);A=_,N=k}}}if(K=l*k,Q=-l*_,o&&!s)this.paintMarker(t,g.x,g.y,-A,-N,p,r,l,u,!1);else{t.lineTo(g.x-u*_+K/2,g.y-u*k+Q/2);var Nt=g.x-u*_-K/2,Bt=g.y-u*k-Q/2;s?(t.moveTo(Nt,Bt),nt.splice(0,0,function(){t.moveTo(Nt,Bt)})):t.lineTo(Nt,Bt)}for(var ft=nt.length-1;ft>=0;ft--)nt[ft]();s?(t.end(),t.stroke()):(t.close(),t.fillAndStroke()),t.setShadow(!1),t.setMiterLimit(4),c&&t.setLineJoin("flat"),e.length>2&&(t.setMiterLimit(4),a&&!s&&(t.begin(),this.paintMarker(t,e[0].x,e[0].y,dt,mt,d,n,l,u,!0),t.stroke(),t.end()),o&&!s&&(t.begin(),this.paintMarker(t,g.x,g.y,-A,-N,p,r,l,u,!0),t.stroke(),t.end()))}};mxArrowConnector.prototype.paintMarker=function(t,e,i,n,r,l,s,a,o,u){var d=a/s,p=a*r/2,c=-a*n/2,g=(o+l)*n,x=(o+l)*r;u?t.moveTo(e-p+g,i-c+x):t.lineTo(e-p+g,i-c+x),t.lineTo(e-p/d+g,i-c/d+x),t.lineTo(e+o*n,i+o*r),t.lineTo(e+p/d+g,i+c/d+x),t.lineTo(e+p+g,i+c+x)};mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded};mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants$1.ARROW_WIDTH};mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants$1.ARROW_WIDTH};mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants$1.ARROW_WIDTH/3};mxArrowConnector.prototype.isOpenEnded=function(){return!1};mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE};mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE};function mxDoubleEllipse(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxDoubleEllipse,mxShape$1);mxDoubleEllipse.prototype.paintBackground=function(t,e,i,n,r){t.ellipse(e,i,n,r),t.fillAndStroke()};mxDoubleEllipse.prototype.paintForeground=function(t,e,i,n,r){if(!this.outline){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(n/5,r/5)));e+=l,i+=l,n-=2*l,r-=2*l,n>0&&r>0&&t.ellipse(e,i,n,r),t.stroke()}};mxDoubleEllipse.prototype.getLabelBounds=function(t){var e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(t.width/5/this.scale,t.height/5/this.scale)))*this.scale;return new mxRectangle$1(t.x+e,t.y+e,t.width-2*e,t.height-2*e)};function mxSwimlane(t,e,i,n){mxShape$1.call(this),this.bounds=t,this.fill=e,this.stroke=i,this.strokewidth=n??1}mxUtils$1.extend(mxSwimlane,mxShape$1);mxSwimlane.prototype.imageSize=16;mxSwimlane.prototype.apply=function(t){this.spacing,mxShape$1.prototype.apply.apply(this,arguments),this.style!=null&&(this.laneFill=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE))};mxSwimlane.prototype.isRoundable=function(){return!0};mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE))};mxSwimlane.prototype.getLabelBounds=function(t){var e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,0)==1,i=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,0)==1,n=new mxRectangle$1(t.x,t.y,t.width,t.height),r=this.isHorizontal(),l=this.getTitleSize(),s=this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH,a=r==!s,o=!a&&e!=(this.direction==mxConstants$1.DIRECTION_SOUTH||this.direction==mxConstants$1.DIRECTION_WEST),u=a&&i!=(this.direction==mxConstants$1.DIRECTION_SOUTH||this.direction==mxConstants$1.DIRECTION_WEST);if(s){var d=Math.min(n.width,l*this.scale);(o||u)&&(n.x+=n.width-d),n.width=d}else{var d=Math.min(n.height,l*this.scale);(o||u)&&(n.y+=n.height-d),n.height=d}return n};mxSwimlane.prototype.getGradientBounds=function(t,e,i,n,r){var l=this.getTitleSize();return this.isHorizontal()?new mxRectangle$1(e,i,n,Math.min(l,r)):new mxRectangle$1(e,i,Math.min(l,n),r)};mxSwimlane.prototype.getSwimlaneArcSize=function(t,e,i){if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")return Math.min(t/2,Math.min(e/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;return i*n*3};mxSwimlane.prototype.isHorizontal=function(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,1)==1};mxSwimlane.prototype.paintVertexShape=function(t,e,i,n,r){if(!this.outline){var l=this.getTitleSize(),s=0;this.isHorizontal()?l=Math.min(l,r):l=Math.min(l,n),t.translate(e,i),this.isRounded?(s=this.getSwimlaneArcSize(n,r,l),s=Math.min((this.isHorizontal()?r:n)-l,Math.min(l,s)),this.paintRoundedSwimlane(t,e,i,n,r,l,s)):this.paintSwimlane(t,e,i,n,r,l);var a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SEPARATORCOLOR,mxConstants$1.NONE);if(this.paintSeparator(t,e,i,n,r,l,a),this.image!=null){var o=this.getImageBounds(e,i,n,r),u=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_CLIP_PATH,null);t.image(o.x-e,o.y-i,o.width,o.height,this.image,!1,!1,!1,u)}this.glass&&(t.setShadow(!1),this.paintGlassEffect(t,0,0,n,l,s))}};mxSwimlane.prototype.configurePointerEvents=function(t){var e=!0,i=!0,n=!0;this.style!=null&&(e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1",i=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_HEAD,1)==1,n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_BODY,1)==1),(e||i||n)&&mxShape$1.prototype.configurePointerEvents.apply(this,arguments)};mxSwimlane.prototype.paintSwimlane=function(t,e,i,n,r,l){var s=this.laneFill,a=!0,o=!0,u=!0,d=!0;this.style!=null&&(a=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1",o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_LINE,1)==1,u=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_HEAD,1)==1,d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_BODY,1)==1),this.isHorizontal()?(t.begin(),t.moveTo(0,l),t.lineTo(0,0),t.lineTo(n,0),t.lineTo(n,l),u?t.fillAndStroke():t.fill(),l<r&&((s==mxConstants$1.NONE||!a)&&(t.pointerEvents=!1),s!=mxConstants$1.NONE&&t.setFillColor(s),t.begin(),t.moveTo(0,l),t.lineTo(0,r),t.lineTo(n,r),t.lineTo(n,l),d?s==mxConstants$1.NONE?t.stroke():d&&t.fillAndStroke():s!=mxConstants$1.NONE&&t.fill())):(t.begin(),t.moveTo(l,0),t.lineTo(0,0),t.lineTo(0,r),t.lineTo(l,r),u?t.fillAndStroke():t.fill(),l<n&&((s==mxConstants$1.NONE||!a)&&(t.pointerEvents=!1),s!=mxConstants$1.NONE&&t.setFillColor(s),t.begin(),t.moveTo(l,0),t.lineTo(n,0),t.lineTo(n,r),t.lineTo(l,r),d?s==mxConstants$1.NONE?t.stroke():d&&t.fillAndStroke():s!=mxConstants$1.NONE&&t.fill())),o&&this.paintDivider(t,e,i,n,r,l,s==mxConstants$1.NONE)};mxSwimlane.prototype.paintRoundedSwimlane=function(t,e,i,n,r,l,s){var a=this.laneFill,o=!0,u=!0,d=!0,p=!0;this.style!=null&&(o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1",u=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_LINE,1)==1,d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_HEAD,1)==1,p=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_BODY,1)==1),this.isHorizontal()?(t.begin(),t.moveTo(n,l),t.lineTo(n,s),t.quadTo(n,0,n-Math.min(n/2,s),0),t.lineTo(Math.min(n/2,s),0),t.quadTo(0,0,0,s),t.lineTo(0,l),d?t.fillAndStroke():t.fill(),l<r&&((a==mxConstants$1.NONE||!o)&&(t.pointerEvents=!1),a!=mxConstants$1.NONE&&t.setFillColor(a),t.begin(),t.moveTo(0,l),t.lineTo(0,r-s),t.quadTo(0,r,Math.min(n/2,s),r),t.lineTo(n-Math.min(n/2,s),r),t.quadTo(n,r,n,r-s),t.lineTo(n,l),p?a==mxConstants$1.NONE?t.stroke():p&&t.fillAndStroke():a!=mxConstants$1.NONE&&t.fill())):(t.begin(),t.moveTo(l,0),t.lineTo(s,0),t.quadTo(0,0,0,Math.min(r/2,s)),t.lineTo(0,r-Math.min(r/2,s)),t.quadTo(0,r,s,r),t.lineTo(l,r),d?t.fillAndStroke():t.fill(),l<n&&((a==mxConstants$1.NONE||!o)&&(t.pointerEvents=!1),a!=mxConstants$1.NONE&&t.setFillColor(a),t.begin(),t.moveTo(l,r),t.lineTo(n-s,r),t.quadTo(n,r,n,r-Math.min(r/2,s)),t.lineTo(n,Math.min(r/2,s)),t.quadTo(n,0,n-s,0),t.lineTo(l,0),p?a==mxConstants$1.NONE?t.stroke():p&&t.fillAndStroke():a!=mxConstants$1.NONE&&t.fill())),u&&this.paintDivider(t,e,i,n,r,l,a==mxConstants$1.NONE)};mxSwimlane.prototype.paintDivider=function(t,e,i,n,r,l,s){l!=0&&(s||t.setShadow(!1),t.begin(),this.isHorizontal()?(t.moveTo(0,l),t.lineTo(n,l)):(t.moveTo(l,0),t.lineTo(l,r)),t.stroke())};mxSwimlane.prototype.paintSeparator=function(t,e,i,n,r,l,s){s!=mxConstants$1.NONE&&(t.setStrokeColor(s),t.setDashed(!0),t.begin(),this.isHorizontal()?(t.moveTo(n,l),t.lineTo(n,r)):(t.moveTo(l,0),t.lineTo(n,0)),t.stroke(),t.setDashed(!1))};mxSwimlane.prototype.getImageBounds=function(t,e,i,n){return this.isHorizontal()?new mxRectangle$1(t+i-this.imageSize,e,this.imageSize,this.imageSize):new mxRectangle$1(t,e,this.imageSize,this.imageSize)};function mxLabel$1(t,e,i,n){mxRectangleShape$1.call(this,t,e,i,n)}mxUtils$1.extend(mxLabel$1,mxRectangleShape$1);mxLabel$1.prototype.imageSize=mxConstants$1.DEFAULT_IMAGESIZE;mxLabel$1.prototype.spacing=2;mxLabel$1.prototype.indicatorSize=10;mxLabel$1.prototype.indicatorSpacing=2;mxLabel$1.prototype.init=function(t){mxShape$1.prototype.init.apply(this,arguments),this.indicatorShape!=null&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))};mxLabel$1.prototype.redraw=function(){this.indicator!=null&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape$1.prototype.redraw.apply(this,arguments)};mxLabel$1.prototype.isHtmlAllowed=function(){return mxRectangleShape$1.prototype.isHtmlAllowed.apply(this,arguments)&&this.indicatorColor==null&&this.indicatorShape==null};mxLabel$1.prototype.paintForeground=function(t,e,i,n,r){this.paintImage(t,e,i,n,r),this.paintIndicator(t,e,i,n,r),mxRectangleShape$1.prototype.paintForeground.apply(this,arguments)};mxLabel$1.prototype.paintImage=function(t,e,i,n,r){if(this.image!=null){var l=this.getImageBounds(e,i,n,r),s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_CLIP_PATH,null);t.image(l.x,l.y,l.width,l.height,this.image,!1,!1,!1,s)}};mxLabel$1.prototype.getImageBounds=function(t,e,i,n){var r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_ALIGN,mxConstants$1.ALIGN_LEFT),l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE),s=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_WIDTH,mxConstants$1.DEFAULT_IMAGESIZE),a=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_HEIGHT,mxConstants$1.DEFAULT_IMAGESIZE),o=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_SPACING,this.spacing)+5;return r==mxConstants$1.ALIGN_CENTER?t+=(i-s)/2:r==mxConstants$1.ALIGN_RIGHT?t+=i-s-o:t+=o,l==mxConstants$1.ALIGN_TOP?e+=o:l==mxConstants$1.ALIGN_BOTTOM?e+=n-a-o:e+=(n-a)/2,new mxRectangle$1(t,e,s,a)};mxLabel$1.prototype.paintIndicator=function(t,e,i,n,r){if(this.indicator!=null)this.indicator.bounds=this.getIndicatorBounds(e,i,n,r),this.indicator.paint(t);else if(this.indicatorImage!=null){var l=this.getIndicatorBounds(e,i,n,r);t.image(l.x,l.y,l.width,l.height,this.indicatorImage,!1,!1,!1)}};mxLabel$1.prototype.getIndicatorBounds=function(t,e,i,n){var r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_ALIGN,mxConstants$1.ALIGN_LEFT),l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE),s=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_INDICATOR_WIDTH,this.indicatorSize),a=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_INDICATOR_HEIGHT,this.indicatorSize),o=this.spacing+5;return r==mxConstants$1.ALIGN_RIGHT?t+=i-s-o:r==mxConstants$1.ALIGN_CENTER?t+=(i-s)/2:t+=o,l==mxConstants$1.ALIGN_BOTTOM?e+=n-a-o:l==mxConstants$1.ALIGN_TOP?e+=o:e+=(n-a)/2,new mxRectangle$1(t,e,s,a)};mxLabel$1.prototype.redrawHtmlShape=function(){for(mxRectangleShape$1.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(this.image!=null){var t=document.createElement("img");t.style.position="relative",t.setAttribute("border","0");var e=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);e.x-=this.bounds.x,e.y-=this.bounds.y,t.style.left=Math.round(e.x)+"px",t.style.top=Math.round(e.y)+"px",t.style.width=Math.round(e.width)+"px",t.style.height=Math.round(e.height)+"px",t.src=this.image,this.node.appendChild(t)}};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function deepFreeze(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const i=t[e],n=typeof i;(n==="object"||n==="function")&&!Object.isFrozen(i)&&deepFreeze(i)}),t}class Response{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(t,...e){const i=Object.create(null);for(const n in t)i[n]=t[n];return e.forEach(function(n){for(const r in n)i[r]=n[r]}),i}const SPAN_CLOSE="</span>",emitsWrappingTags=t=>!!t.scope,scopeToCSSClass=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const i=t.split(".");return[`${e}${i.shift()}`,...i.map((n,r)=>`${n}${"_".repeat(r+1)}`)].join(" ")}return`${e}${t}`};class HTMLRenderer{constructor(e,i){this.buffer="",this.classPrefix=i.classPrefix,e.walk(this)}addText(e){this.buffer+=escapeHTML(e)}openNode(e){if(!emitsWrappingTags(e))return;const i=scopeToCSSClass(e.scope,{prefix:this.classPrefix});this.span(i)}closeNode(e){emitsWrappingTags(e)&&(this.buffer+=SPAN_CLOSE)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const newNode=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const i=newNode({scope:e});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,i){return typeof i=="string"?e.addText(i):i.children&&(e.openNode(i),i.children.forEach(n=>this._walk(e,n)),e.closeNode(i)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(i=>typeof i=="string")?e.children=[e.children.join("")]:e.children.forEach(i=>{TokenTree._collapse(i)}))}}class TokenTreeEmitter extends TokenTree{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,i){const n=e.root;i&&(n.scope=`language:${i}`),this.add(n)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function source(t){return t?typeof t=="string"?t:t.source:null}function lookahead(t){return concat("(?=",t,")")}function anyNumberOfTimes(t){return concat("(?:",t,")*")}function optional(t){return concat("(?:",t,")?")}function concat(...t){return t.map(i=>source(i)).join("")}function stripOptionsFromArgs(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function either(...t){return"("+(stripOptionsFromArgs(t).capture?"":"?:")+t.map(n=>source(n)).join("|")+")"}function countMatchGroups(t){return new RegExp(t.toString()+"|").exec("").length-1}function startsWith(t,e){const i=t&&t.exec(e);return i&&i.index===0}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(t,{joinWith:e}){let i=0;return t.map(n=>{i+=1;const r=i;let l=source(n),s="";for(;l.length>0;){const a=BACKREF_RE.exec(l);if(!a){s+=l;break}s+=l.substring(0,a.index),l=l.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?s+="\\"+String(Number(a[1])+r):(s+=a[0],a[0]==="("&&i++)}return s}).map(n=>`(${n})`).join(e)}const MATCH_NOTHING_RE=/\b\B/,IDENT_RE="[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",NUMBER_RE="\\b\\d+(\\.\\d+)?",C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BINARY_NUMBER_RE="\\b(0b[01]+)",RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=concat(e,/.*\b/,t.binary,/\b.*/)),inherit$1({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(i,n)=>{i.index!==0&&n.ignoreMatch()}},t)},BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT=function(t,e,i={}){const n=inherit$1({scope:"comment",begin:t,end:e,contains:[]},i);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:concat(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),NUMBER_MODE={scope:"number",begin:NUMBER_RE,relevance:0},C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE={scope:"number",begin:BINARY_NUMBER_RE,relevance:0},REGEXP_MODE={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]},TITLE_MODE={scope:"title",begin:IDENT_RE,relevance:0},UNDERSCORE_TITLE_MODE={scope:"title",begin:UNDERSCORE_IDENT_RE,relevance:0},METHOD_GUARD={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE,relevance:0},END_SAME_AS_BEGIN=function(t){return Object.assign(t,{"on:begin":(e,i)=>{i.data._beginMatch=e[1]},"on:end":(e,i)=>{i.data._beginMatch!==e[1]&&i.ignoreMatch()}})};var MODES=Object.freeze({__proto__:null,APOS_STRING_MODE,BACKSLASH_ESCAPE,BINARY_NUMBER_MODE,BINARY_NUMBER_RE,COMMENT,C_BLOCK_COMMENT_MODE,C_LINE_COMMENT_MODE,C_NUMBER_MODE,C_NUMBER_RE,END_SAME_AS_BEGIN,HASH_COMMENT_MODE,IDENT_RE,MATCH_NOTHING_RE,METHOD_GUARD,NUMBER_MODE,NUMBER_RE,PHRASAL_WORDS_MODE,QUOTE_STRING_MODE,REGEXP_MODE,RE_STARTERS_RE,SHEBANG,TITLE_MODE,UNDERSCORE_IDENT_RE,UNDERSCORE_TITLE_MODE});function skipIfHasPrecedingDot(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function scopeClassName(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function beginKeywords(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=skipIfHasPrecedingDot,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function compileIllegal(t,e){Array.isArray(t.illegal)&&(t.illegal=either(...t.illegal))}function compileMatch(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function compileRelevance(t,e){t.relevance===void 0&&(t.relevance=1)}const beforeMatchExt=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},t);Object.keys(t).forEach(n=>{delete t[n]}),t.keywords=i.keywords,t.begin=concat(i.beforeMatch,lookahead(i.begin)),t.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},t.relevance=0,delete i.beforeMatch},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(t,e,i=DEFAULT_KEYWORD_SCOPE){const n=Object.create(null);return typeof t=="string"?r(i,t.split(" ")):Array.isArray(t)?r(i,t):Object.keys(t).forEach(function(l){Object.assign(n,compileKeywords(t[l],e,l))}),n;function r(l,s){e&&(s=s.map(a=>a.toLowerCase())),s.forEach(function(a){const o=a.split("|");n[o[0]]=[l,scoreForKeyword(o[0],o[1])]})}}function scoreForKeyword(t,e){return e?Number(e):commonKeyword(t)?0:1}function commonKeyword(t){return COMMON_KEYWORDS.includes(t.toLowerCase())}const seenDeprecations={},error$1=t=>{console.error(t)},warn=(t,...e)=>{console.log(`WARN: ${t}`,...e)},deprecated=(t,e)=>{seenDeprecations[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),seenDeprecations[`${t}/${e}`]=!0)},MultiClassError=new Error;function remapScopeNames(t,e,{key:i}){let n=0;const r=t[i],l={},s={};for(let a=1;a<=e.length;a++)s[a+n]=r[a],l[a+n]=!0,n+=countMatchGroups(e[a-1]);t[i]=s,t[i]._emit=l,t[i]._multi=!0}function beginMultiClass(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw error$1("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if(typeof t.beginScope!="object"||t.beginScope===null)throw error$1("beginScope must be object"),MultiClassError;remapScopeNames(t,t.begin,{key:"beginScope"}),t.begin=_rewriteBackreferences(t.begin,{joinWith:""})}}function endMultiClass(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw error$1("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if(typeof t.endScope!="object"||t.endScope===null)throw error$1("endScope must be object"),MultiClassError;remapScopeNames(t,t.end,{key:"endScope"}),t.end=_rewriteBackreferences(t.end,{joinWith:""})}}function scopeSugar(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function MultiClass(t){scopeSugar(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),beginMultiClass(t),endMultiClass(t)}function compileLanguage(t){function e(s,a){return new RegExp(source(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(a?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,o){o.position=this.position++,this.matchIndexes[this.matchAt]=o,this.regexes.push([o,a]),this.matchAt+=countMatchGroups(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(o=>o[1]);this.matcherRe=e(_rewriteBackreferences(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const o=this.matcherRe.exec(a);if(!o)return null;const u=o.findIndex((p,c)=>c>0&&p!==void 0),d=this.matchIndexes[u];return o.splice(0,u),Object.assign(o,d)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const o=new i;return this.rules.slice(a).forEach(([u,d])=>o.addRule(u,d)),o.compile(),this.multiRegexes[a]=o,o}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,o){this.rules.push([a,o]),o.type==="begin"&&this.count++}exec(a){const o=this.getMatcher(this.regexIndex);o.lastIndex=this.lastIndex;let u=o.exec(a);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,u=d.exec(a)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function r(s){const a=new n;return s.contains.forEach(o=>a.addRule(o.begin,{rule:o,type:"begin"})),s.terminatorEnd&&a.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&a.addRule(s.illegal,{type:"illegal"}),a}function l(s,a){const o=s;if(s.isCompiled)return o;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach(d=>d(s,a)),t.compilerExtensions.forEach(d=>d(s,a)),s.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach(d=>d(s,a)),s.isCompiled=!0;let u=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),u=s.keywords.$pattern,delete s.keywords.$pattern),u=u||/\w+/,s.keywords&&(s.keywords=compileKeywords(s.keywords,t.case_insensitive)),o.keywordPatternRe=e(u,!0),a&&(s.begin||(s.begin=/\B|\b/),o.beginRe=e(o.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(o.endRe=e(o.end)),o.terminatorEnd=source(o.end)||"",s.endsWithParent&&a.terminatorEnd&&(o.terminatorEnd+=(s.end?"|":"")+a.terminatorEnd)),s.illegal&&(o.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(d){return expandOrCloneMode(d==="self"?s:d)})),s.contains.forEach(function(d){l(d,o)}),s.starts&&l(s.starts,a),o.matcher=r(o),o}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=inherit$1(t.classNameAliases||{}),l(t)}function dependencyOnParent(t){return t?t.endsWithParent||dependencyOnParent(t.starts):!1}function expandOrCloneMode(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return inherit$1(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:dependencyOnParent(t)?inherit$1(t,{starts:t.starts?inherit$1(t.starts):null}):Object.isFrozen(t)?inherit$1(t):t}var version="11.10.0";class HTMLInjectionError extends Error{constructor(e,i){super(e),this.name="HTMLInjectionError",this.html=i}}const escape$2=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch"),MAX_KEYWORD_HITS=7,HLJS=function(t){const e=Object.create(null),i=Object.create(null),n=[];let r=!0;const l="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function o(tt){return a.noHighlightRe.test(tt)}function u(tt){let st=tt.className+" ";st+=tt.parentNode?tt.parentNode.className:"";const ft=a.languageDetectRe.exec(st);if(ft){const $t=nt(ft[1]);return $t||(warn(l.replace("{}",ft[1])),warn("Falling back to no-highlight mode for this block.",tt)),$t?ft[1]:"no-highlight"}return st.split(/\s+/).find($t=>o($t)||nt($t))}function d(tt,st,ft){let $t="",Ct="";typeof st=="object"?($t=tt,ft=st.ignoreIllegals,Ct=st.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Ct=tt,$t=st),ft===void 0&&(ft=!0);const pt={code:$t,language:Ct};U("before:highlight",pt);const ct=pt.result?pt.result:p(pt.language,pt.code,ft);return ct.code=pt.code,U("after:highlight",ct),ct}function p(tt,st,ft,$t){const Ct=Object.create(null);function pt(I,L){return I.keywords[L]}function ct(){if(!At.keywords){ne.addText(Wt);return}let I=0;At.keywordPatternRe.lastIndex=0;let L=At.keywordPatternRe.exec(Wt),D="";for(;L;){D+=Wt.substring(I,L.index);const O=kt.case_insensitive?L[0].toLowerCase():L[0],V=pt(At,O);if(V){const[j,at]=V;if(ne.addText(D),D="",Ct[O]=(Ct[O]||0)+1,Ct[O]<=MAX_KEYWORD_HITS&&(re+=at),j.startsWith("_"))D+=L[0];else{const ot=kt.classNameAliases[j]||j;Ot(L[0],ot)}}else D+=L[0];I=At.keywordPatternRe.lastIndex,L=At.keywordPatternRe.exec(Wt)}D+=Wt.substring(I),ne.addText(D)}function Mt(){if(Wt==="")return;let I=null;if(typeof At.subLanguage=="string"){if(!e[At.subLanguage]){ne.addText(Wt);return}I=p(At.subLanguage,Wt,!0,Jt[At.subLanguage]),Jt[At.subLanguage]=I._top}else I=g(Wt,At.subLanguage.length?At.subLanguage:null);At.relevance>0&&(re+=I.relevance),ne.__addSublanguage(I._emitter,I.language)}function bt(){At.subLanguage!=null?Mt():ct(),Wt=""}function Ot(I,L){I!==""&&(ne.startScope(L),ne.addText(I),ne.endScope())}function gt(I,L){let D=1;const O=L.length-1;for(;D<=O;){if(!I._emit[D]){D++;continue}const V=kt.classNameAliases[I[D]]||I[D],j=L[D];V?Ot(j,V):(Wt=j,ct(),Wt=""),D++}}function Tt(I,L){return I.scope&&typeof I.scope=="string"&&ne.openNode(kt.classNameAliases[I.scope]||I.scope),I.beginScope&&(I.beginScope._wrap?(Ot(Wt,kt.classNameAliases[I.beginScope._wrap]||I.beginScope._wrap),Wt=""):I.beginScope._multi&&(gt(I.beginScope,L),Wt="")),At=Object.create(I,{parent:{value:At}}),At}function vt(I,L,D){let O=startsWith(I.endRe,D);if(O){if(I["on:end"]){const V=new Response(I);I["on:end"](L,V),V.isMatchIgnored&&(O=!1)}if(O){for(;I.endsParent&&I.parent;)I=I.parent;return I}}if(I.endsWithParent)return vt(I.parent,L,D)}function Pt(I){return At.matcher.regexIndex===0?(Wt+=I[0],1):(S=!0,0)}function Dt(I){const L=I[0],D=I.rule,O=new Response(D),V=[D.__beforeBegin,D["on:begin"]];for(const j of V)if(j&&(j(I,O),O.isMatchIgnored))return Pt(L);return D.skip?Wt+=L:(D.excludeBegin&&(Wt+=L),bt(),!D.returnBegin&&!D.excludeBegin&&(Wt=L)),Tt(D,I),D.returnBegin?0:L.length}function zt(I){const L=I[0],D=st.substring(I.index),O=vt(At,I,D);if(!O)return NO_MATCH;const V=At;At.endScope&&At.endScope._wrap?(bt(),Ot(L,At.endScope._wrap)):At.endScope&&At.endScope._multi?(bt(),gt(At.endScope,I)):V.skip?Wt+=L:(V.returnEnd||V.excludeEnd||(Wt+=L),bt(),V.excludeEnd&&(Wt=L));do At.scope&&ne.closeNode(),!At.skip&&!At.subLanguage&&(re+=At.relevance),At=At.parent;while(At!==O.parent);return O.starts&&Tt(O.starts,I),V.returnEnd?0:L.length}function Rt(){const I=[];for(let L=At;L!==kt;L=L.parent)L.scope&&I.unshift(L.scope);I.forEach(L=>ne.openNode(L))}let Nt={};function Bt(I,L){const D=L&&L[0];if(Wt+=I,D==null)return bt(),0;if(Nt.type==="begin"&&L.type==="end"&&Nt.index===L.index&&D===""){if(Wt+=st.slice(L.index,L.index+1),!r){const O=new Error(`0 width match regex (${tt})`);throw O.languageName=tt,O.badRule=Nt.rule,O}return 1}if(Nt=L,L.type==="begin")return Dt(L);if(L.type==="illegal"&&!ft){const O=new Error('Illegal lexeme "'+D+'" for mode "'+(At.scope||"<unnamed>")+'"');throw O.mode=At,O}else if(L.type==="end"){const O=zt(L);if(O!==NO_MATCH)return O}if(L.type==="illegal"&&D==="")return 1;if(se>1e5&&se>L.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Wt+=D,D.length}const kt=nt(tt);if(!kt)throw error$1(l.replace("{}",tt)),new Error('Unknown language: "'+tt+'"');const Xt=compileLanguage(kt);let ie="",At=$t||Xt;const Jt={},ne=new a.__emitter(a);Rt();let Wt="",re=0,te=0,se=0,S=!1;try{if(kt.__emitTokens)kt.__emitTokens(st,ne);else{for(At.matcher.considerAll();;){se++,S?S=!1:At.matcher.considerAll(),At.matcher.lastIndex=te;const I=At.matcher.exec(st);if(!I)break;const L=st.substring(te,I.index),D=Bt(L,I);te=I.index+D}Bt(st.substring(te))}return ne.finalize(),ie=ne.toHTML(),{language:tt,value:ie,relevance:re,illegal:!1,_emitter:ne,_top:At}}catch(I){if(I.message&&I.message.includes("Illegal"))return{language:tt,value:escape$2(st),illegal:!0,relevance:0,_illegalBy:{message:I.message,index:te,context:st.slice(te-100,te+100),mode:I.mode,resultSoFar:ie},_emitter:ne};if(r)return{language:tt,value:escape$2(st),illegal:!1,relevance:0,errorRaised:I,_emitter:ne,_top:At};throw I}}function c(tt){const st={value:escape$2(tt),illegal:!1,relevance:0,_top:s,_emitter:new a.__emitter(a)};return st._emitter.addText(tt),st}function g(tt,st){st=st||a.languages||Object.keys(e);const ft=c(tt),$t=st.filter(nt).filter(mt).map(bt=>p(bt,tt,!1));$t.unshift(ft);const Ct=$t.sort((bt,Ot)=>{if(bt.relevance!==Ot.relevance)return Ot.relevance-bt.relevance;if(bt.language&&Ot.language){if(nt(bt.language).supersetOf===Ot.language)return 1;if(nt(Ot.language).supersetOf===bt.language)return-1}return 0}),[pt,ct]=Ct,Mt=pt;return Mt.secondBest=ct,Mt}function x(tt,st,ft){const $t=st&&i[st]||ft;tt.classList.add("hljs"),tt.classList.add(`language-${$t}`)}function C(tt){let st=null;const ft=u(tt);if(o(ft))return;if(U("before:highlightElement",{el:tt,language:ft}),tt.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",tt);return}if(tt.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(tt)),a.throwUnescapedHTML))throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",tt.innerHTML);st=tt;const $t=st.textContent,Ct=ft?d($t,{language:ft,ignoreIllegals:!0}):g($t);tt.innerHTML=Ct.value,tt.dataset.highlighted="yes",x(tt,ft,Ct.language),tt.result={language:Ct.language,re:Ct.relevance,relevance:Ct.relevance},Ct.secondBest&&(tt.secondBest={language:Ct.secondBest.language,relevance:Ct.secondBest.relevance}),U("after:highlightElement",{el:tt,result:Ct,text:$t})}function T(tt){a=inherit(a,tt)}const A=()=>{N(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function R(){N(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let _=!1;function N(){if(document.readyState==="loading"){_=!0;return}document.querySelectorAll(a.cssSelector).forEach(C)}function H(){_&&N()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",H,!1);function k(tt,st){let ft=null;try{ft=st(t)}catch($t){if(error$1("Language definition for '{}' could not be registered.".replace("{}",tt)),r)error$1($t);else throw $t;ft=s}ft.name||(ft.name=tt),e[tt]=ft,ft.rawDefinition=st.bind(null,t),ft.aliases&&dt(ft.aliases,{languageName:tt})}function K(tt){delete e[tt];for(const st of Object.keys(i))i[st]===tt&&delete i[st]}function Q(){return Object.keys(e)}function nt(tt){return tt=(tt||"").toLowerCase(),e[tt]||e[i[tt]]}function dt(tt,{languageName:st}){typeof tt=="string"&&(tt=[tt]),tt.forEach(ft=>{i[ft.toLowerCase()]=st})}function mt(tt){const st=nt(tt);return st&&!st.disableAutodetect}function xt(tt){tt["before:highlightBlock"]&&!tt["before:highlightElement"]&&(tt["before:highlightElement"]=st=>{tt["before:highlightBlock"](Object.assign({block:st.el},st))}),tt["after:highlightBlock"]&&!tt["after:highlightElement"]&&(tt["after:highlightElement"]=st=>{tt["after:highlightBlock"](Object.assign({block:st.el},st))})}function Y(tt){xt(tt),n.push(tt)}function B(tt){const st=n.indexOf(tt);st!==-1&&n.splice(st,1)}function U(tt,st){const ft=tt;n.forEach(function($t){$t[ft]&&$t[ft](st)})}function lt(tt){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),C(tt)}Object.assign(t,{highlight:d,highlightAuto:g,highlightAll:N,highlightElement:C,highlightBlock:lt,configure:T,initHighlighting:A,initHighlightingOnLoad:R,registerLanguage:k,unregisterLanguage:K,listLanguages:Q,getLanguage:nt,registerAliases:dt,autoDetection:mt,inherit,addPlugin:Y,removePlugin:B}),t.debugMode=function(){r=!1},t.safeMode=function(){r=!0},t.versionString=version,t.regex={concat,lookahead,either,optional,anyNumberOfTimes};for(const tt in MODES)typeof MODES[tt]=="object"&&deepFreeze(MODES[tt]);return Object.assign(t,MODES),t},highlight=HLJS({});highlight.newInstance=()=>HLJS({});var core=highlight;highlight.HighlightJS=highlight;highlight.default=highlight;const HighlightJS=getDefaultExportFromCjs(core);function sql(t){const e=t.regex,i=t.COMMENT("--","$"),n={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},r={begin:/"/,end:/"/,contains:[{begin:/""/}]},l=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],o=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],p=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],c=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=d,x=[...u,...o].filter(_=>!d.includes(_)),C={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},T={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},A={begin:e.concat(/\b/,e.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function R(_,{exceptions:N,when:H}={}){const k=H;return N=N||[],_.map(K=>K.match(/\|\d+$/)||N.includes(K)?K:k(K)?`${K}|0`:K)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:R(x,{when:_=>_.length<3}),literal:l,type:a,built_in:p},contains:[{begin:e.either(...c),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:x.concat(c),literal:l,type:a}},{className:"type",begin:e.either(...s)},A,C,n,r,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,i,T]}}function bash(t){const e=t.regex,i={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},l=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,i,r]};r.contains.push(a);const o={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},p={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,i]},c=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=t.SHEBANG({binary:`(${c.join("|")})`,relevance:10}),x={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},C=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],T=["true","false"],A={match:/(\/[a-z._-]+)+/},R=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],_=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],N=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],H=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:C,literal:T,built_in:[...R,..._,"set","shopt",...N,...H]},contains:[g,t.SHEBANG(),x,p,l,s,A,a,o,u,d,i]}}const decodeCache={};function getDecodeCache(t){let e=decodeCache[t];if(e)return e;e=decodeCache[t]=[];for(let i=0;i<128;i++){const n=String.fromCharCode(i);e.push(n)}for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function decode$1(t,e){typeof e!="string"&&(e=decode$1.defaultChars);const i=getDecodeCache(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(n){let r="";for(let l=0,s=n.length;l<s;l+=3){const a=parseInt(n.slice(l+1,l+3),16);if(a<128){r+=i[a];continue}if((a&224)===192&&l+3<s){const o=parseInt(n.slice(l+4,l+6),16);if((o&192)===128){const u=a<<6&1984|o&63;u<128?r+="":r+=String.fromCharCode(u),l+=3;continue}}if((a&240)===224&&l+6<s){const o=parseInt(n.slice(l+4,l+6),16),u=parseInt(n.slice(l+7,l+9),16);if((o&192)===128&&(u&192)===128){const d=a<<12&61440|o<<6&4032|u&63;d<2048||d>=55296&&d<=57343?r+="":r+=String.fromCharCode(d),l+=6;continue}}if((a&248)===240&&l+9<s){const o=parseInt(n.slice(l+4,l+6),16),u=parseInt(n.slice(l+7,l+9),16),d=parseInt(n.slice(l+10,l+12),16);if((o&192)===128&&(u&192)===128&&(d&192)===128){let p=a<<18&1835008|o<<12&258048|u<<6&4032|d&63;p<65536||p>1114111?r+="":(p-=65536,r+=String.fromCharCode(55296+(p>>10),56320+(p&1023))),l+=9;continue}}r+=""}return r})}decode$1.defaultChars=";/?:@&=+$,#";decode$1.componentChars="";const encodeCache={};function getEncodeCache(t){let e=encodeCache[t];if(e)return e;e=encodeCache[t]=[];for(let i=0;i<128;i++){const n=String.fromCharCode(i);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+i.toString(16).toUpperCase()).slice(-2))}for(let i=0;i<t.length;i++)e[t.charCodeAt(i)]=t[i];return e}function encode$1(t,e,i){typeof e!="string"&&(i=e,e=encode$1.defaultChars),typeof i>"u"&&(i=!0);const n=getEncodeCache(e);let r="";for(let l=0,s=t.length;l<s;l++){const a=t.charCodeAt(l);if(i&&a===37&&l+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(l+1,l+3))){r+=t.slice(l,l+3),l+=2;continue}if(a<128){r+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&l+1<s){const o=t.charCodeAt(l+1);if(o>=56320&&o<=57343){r+=encodeURIComponent(t[l]+t[l+1]),l++;continue}}r+="%EF%BF%BD";continue}r+=encodeURIComponent(t[l])}return r}encode$1.defaultChars=";/?:@&=+$,-_.!~*'()#";encode$1.componentChars="-_.!~*'()";function format(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(t,e){if(t&&t instanceof Url)return t;const i=new Url;return i.parse(t,e),i}Url.prototype.parse=function(t,e){let i,n,r,l=t;if(l=l.trim(),!e&&t.split("#").length===1){const u=simplePathPattern.exec(l);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=protocolPattern.exec(l);if(s&&(s=s[0],i=s.toLowerCase(),this.protocol=s,l=l.substr(s.length)),(e||s||l.match(/^\/\/[^@\/]+@[^@\/]+/))&&(r=l.substr(0,2)==="//",r&&!(s&&hostlessProtocol[s])&&(l=l.substr(2),this.slashes=!0)),!hostlessProtocol[s]&&(r||s&&!slashedProtocol[s])){let u=-1;for(let x=0;x<hostEndingChars.length;x++)n=l.indexOf(hostEndingChars[x]),n!==-1&&(u===-1||n<u)&&(u=n);let d,p;u===-1?p=l.lastIndexOf("@"):p=l.lastIndexOf("@",u),p!==-1&&(d=l.slice(0,p),l=l.slice(p+1),this.auth=d),u=-1;for(let x=0;x<nonHostChars.length;x++)n=l.indexOf(nonHostChars[x]),n!==-1&&(u===-1||n<u)&&(u=n);u===-1&&(u=l.length),l[u-1]===":"&&u--;const c=l.slice(0,u);l=l.slice(u),this.parseHost(c),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const x=this.hostname.split(/\./);for(let C=0,T=x.length;C<T;C++){const A=x[C];if(A&&!A.match(hostnamePartPattern)){let R="";for(let _=0,N=A.length;_<N;_++)A.charCodeAt(_)>127?R+="x":R+=A[_];if(!R.match(hostnamePartPattern)){const _=x.slice(0,C),N=x.slice(C+1),H=A.match(hostnamePartStart);H&&(_.push(H[1]),N.unshift(H[2])),N.length&&(l=N.join(".")+l),this.hostname=_.join(".");break}}}}this.hostname.length>hostnameMaxLen&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=l.indexOf("#");a!==-1&&(this.hash=l.substr(a),l=l.slice(0,a));const o=l.indexOf("?");return o!==-1&&(this.search=l.substr(o),l=l.slice(0,o)),l&&(this.pathname=l),slashedProtocol[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Url.prototype.parseHost=function(t){let e=portPattern.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const mdurl=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$1,encode:encode$1,format,parse:urlParse},Symbol.toStringTag,{value:"Module"})),Any=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Cc=/[\0-\x1F\x7F-\x9F]/,regex$1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,regex=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Z=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ucmicro=Object.freeze(Object.defineProperty({__proto__:null,Any,Cc,Cf:regex$1,P,S:regex,Z},Symbol.toStringTag,{value:"Module"})),htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),xmlDecodeTree=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var _a;const decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint$1=(_a=String.fromCodePoint)!==null&&_a!==void 0?_a:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function replaceCodePoint(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=decodeMap.get(t))!==null&&e!==void 0?e:t}var CharCodes;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(CharCodes||(CharCodes={}));const TO_LOWER_BIT=32;var BinTrieFlags;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber(t){return t>=CharCodes.ZERO&&t<=CharCodes.NINE}function isHexadecimalCharacter(t){return t>=CharCodes.UPPER_A&&t<=CharCodes.UPPER_F||t>=CharCodes.LOWER_A&&t<=CharCodes.LOWER_F}function isAsciiAlphaNumeric(t){return t>=CharCodes.UPPER_A&&t<=CharCodes.UPPER_Z||t>=CharCodes.LOWER_A&&t<=CharCodes.LOWER_Z||isNumber(t)}function isEntityInAttributeInvalidEnd(t){return t===CharCodes.EQUALS||isAsciiAlphaNumeric(t)}var EntityDecoderState;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(e,i,n){this.decodeTree=e,this.emitCodePoint=i,this.errors=n,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,i){switch(this.state){case EntityDecoderState.EntityStart:return e.charCodeAt(i)===CharCodes.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(e,i+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(e,i));case EntityDecoderState.NumericStart:return this.stateNumericStart(e,i);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(e,i);case EntityDecoderState.NumericHex:return this.stateNumericHex(e,i);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(e,i)}}stateNumericStart(e,i){return i>=e.length?-1:(e.charCodeAt(i)|TO_LOWER_BIT)===CharCodes.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(e,i+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(e,i))}addToNumericResult(e,i,n,r){if(i!==n){const l=n-i;this.result=this.result*Math.pow(r,l)+parseInt(e.substr(i,l),r),this.consumed+=l}}stateNumericHex(e,i){const n=i;for(;i<e.length;){const r=e.charCodeAt(i);if(isNumber(r)||isHexadecimalCharacter(r))i+=1;else return this.addToNumericResult(e,n,i,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,n,i,16),-1}stateNumericDecimal(e,i){const n=i;for(;i<e.length;){const r=e.charCodeAt(i);if(isNumber(r))i+=1;else return this.addToNumericResult(e,n,i,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,n,i,10),-1}emitNumericEntity(e,i){var n;if(this.consumed<=i)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(e!==CharCodes.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,i){const{decodeTree:n}=this;let r=n[this.treeIndex],l=(r&BinTrieFlags.VALUE_LENGTH)>>14;for(;i<e.length;i++,this.excess++){const s=e.charCodeAt(i);if(this.treeIndex=determineBranch(n,r,this.treeIndex+Math.max(1,l),s),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode.Attribute&&(l===0||isEntityInAttributeInvalidEnd(s))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],l=(r&BinTrieFlags.VALUE_LENGTH)>>14,l!==0){if(s===CharCodes.SEMI)return this.emitNamedEntityData(this.treeIndex,l,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:i,decodeTree:n}=this,r=(n[i]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(i,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,i,n){const{decodeTree:r}=this;return this.emitCodePoint(i===1?r[e]&~BinTrieFlags.VALUE_LENGTH:r[e+1],n),i===3&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case EntityDecoderState.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function getDecoder(t){let e="";const i=new EntityDecoder(t,n=>e+=fromCodePoint$1(n));return function(r,l){let s=0,a=0;for(;(a=r.indexOf("&",a))>=0;){e+=r.slice(s,a),i.startEntity(l);const u=i.write(r,a+1);if(u<0){s=a+i.end();break}s=a+u,a=u===0?s+1:s}const o=e+r.slice(s);return e="",o}}function determineBranch(t,e,i,n){const r=(e&BinTrieFlags.BRANCH_LENGTH)>>7,l=e&BinTrieFlags.JUMP_TABLE;if(r===0)return l!==0&&n===l?i:-1;if(l){const o=n-l;return o<0||o>=r?-1:t[i+o]-1}let s=i,a=s+r-1;for(;s<=a;){const o=s+a>>>1,u=t[o];if(u<n)s=o+1;else if(u>n)a=o-1;else return t[o+r]}return-1}const htmlDecoder=getDecoder(htmlDecodeTree);getDecoder(xmlDecodeTree);function decodeHTML(t,e=DecodingMode.Legacy){return htmlDecoder(t,e)}function _class$1(t){return Object.prototype.toString.call(t)}function isString$1(t){return _class$1(t)==="[object String]"}const _hasOwnProperty=Object.prototype.hasOwnProperty;function has(t,e){return _hasOwnProperty.call(t,e)}function assign$1(t){return Array.prototype.slice.call(arguments,1).forEach(function(i){if(i){if(typeof i!="object")throw new TypeError(i+"must be object");Object.keys(i).forEach(function(n){t[n]=i[n]})}}),t}function arrayReplaceAt(t,e,i){return[].concat(t.slice(0,e),i,t.slice(e+1))}function isValidEntityCode(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function fromCodePoint(t){if(t>65535){t-=65536;const e=55296+(t>>10),i=56320+(t&1023);return String.fromCharCode(e,i)}return String.fromCharCode(t)}const UNESCAPE_MD_RE=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,ENTITY_RE=/&([a-z#][a-z0-9]{1,31});/gi,UNESCAPE_ALL_RE=new RegExp(UNESCAPE_MD_RE.source+"|"+ENTITY_RE.source,"gi"),DIGITAL_ENTITY_TEST_RE=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function replaceEntityPattern(t,e){if(e.charCodeAt(0)===35&&DIGITAL_ENTITY_TEST_RE.test(e)){const n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return isValidEntityCode(n)?fromCodePoint(n):t}const i=decodeHTML(t);return i!==t?i:t}function unescapeMd(t){return t.indexOf("\\")<0?t:t.replace(UNESCAPE_MD_RE,"$1")}function unescapeAll(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(UNESCAPE_ALL_RE,function(e,i,n){return i||replaceEntityPattern(e,n)})}const HTML_ESCAPE_TEST_RE=/[&<>"]/,HTML_ESCAPE_REPLACE_RE=/[&<>"]/g,HTML_REPLACEMENTS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function replaceUnsafeChar(t){return HTML_REPLACEMENTS[t]}function escapeHtml(t){return HTML_ESCAPE_TEST_RE.test(t)?t.replace(HTML_ESCAPE_REPLACE_RE,replaceUnsafeChar):t}const REGEXP_ESCAPE_RE=/[.?*+^$[\]\\(){}|-]/g;function escapeRE$1(t){return t.replace(REGEXP_ESCAPE_RE,"\\$&")}function isSpace(t){switch(t){case 9:case 32:return!0}return!1}function isWhiteSpace(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function isPunctChar(t){return P.test(t)||regex.test(t)}function isMdAsciiPunct(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function normalizeReference(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const lib={mdurl,ucmicro},utils=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt,assign:assign$1,escapeHtml,escapeRE:escapeRE$1,fromCodePoint,has,isMdAsciiPunct,isPunctChar,isSpace,isString:isString$1,isValidEntityCode,isWhiteSpace,lib,normalizeReference,unescapeAll,unescapeMd},Symbol.toStringTag,{value:"Module"}));function parseLinkLabel(t,e,i){let n,r,l,s;const a=t.posMax,o=t.pos;for(t.pos=e+1,n=1;t.pos<a;){if(l=t.src.charCodeAt(t.pos),l===93&&(n--,n===0)){r=!0;break}if(s=t.pos,t.md.inline.skipToken(t),l===91){if(s===t.pos-1)n++;else if(i)return t.pos=o,-1}}let u=-1;return r&&(u=t.pos),t.pos=o,u}function parseLinkDestination(t,e,i){let n,r=e;const l={ok:!1,pos:0,str:""};if(t.charCodeAt(r)===60){for(r++;r<i;){if(n=t.charCodeAt(r),n===10||n===60)return l;if(n===62)return l.pos=r+1,l.str=unescapeAll(t.slice(e+1,r)),l.ok=!0,l;if(n===92&&r+1<i){r+=2;continue}r++}return l}let s=0;for(;r<i&&(n=t.charCodeAt(r),!(n===32||n<32||n===127));){if(n===92&&r+1<i){if(t.charCodeAt(r+1)===32)break;r+=2;continue}if(n===40&&(s++,s>32))return l;if(n===41){if(s===0)break;s--}r++}return e===r||s!==0||(l.str=unescapeAll(t.slice(e,r)),l.pos=r,l.ok=!0),l}function parseLinkTitle(t,e,i,n){let r,l=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)s.str=n.str,s.marker=n.marker;else{if(l>=i)return s;let a=t.charCodeAt(l);if(a!==34&&a!==39&&a!==40)return s;e++,l++,a===40&&(a=41),s.marker=a}for(;l<i;){if(r=t.charCodeAt(l),r===s.marker)return s.pos=l+1,s.str+=unescapeAll(t.slice(e,l)),s.ok=!0,s;if(r===40&&s.marker===41)return s;r===92&&l+1<i&&l++,l++}return s.can_continue=!0,s.str+=unescapeAll(t.slice(e,l)),s}const helpers=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination,parseLinkLabel,parseLinkTitle},Symbol.toStringTag,{value:"Module"})),default_rules={};default_rules.code_inline=function(t,e,i,n,r){const l=t[e];return"<code"+r.renderAttrs(l)+">"+escapeHtml(l.content)+"</code>"};default_rules.code_block=function(t,e,i,n,r){const l=t[e];return"<pre"+r.renderAttrs(l)+"><code>"+escapeHtml(t[e].content)+`</code></pre>
`};default_rules.fence=function(t,e,i,n,r){const l=t[e],s=l.info?unescapeAll(l.info).trim():"";let a="",o="";if(s){const d=s.split(/(\s+)/g);a=d[0],o=d.slice(2).join("")}let u;if(i.highlight?u=i.highlight(l.content,a,o)||escapeHtml(l.content):u=escapeHtml(l.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=l.attrIndex("class"),p=l.attrs?l.attrs.slice():[];d<0?p.push(["class",i.langPrefix+a]):(p[d]=p[d].slice(),p[d][1]+=" "+i.langPrefix+a);const c={attrs:p};return`<pre><code${r.renderAttrs(c)}>${u}</code></pre>
`}return`<pre><code${r.renderAttrs(l)}>${u}</code></pre>
`};default_rules.image=function(t,e,i,n,r){const l=t[e];return l.attrs[l.attrIndex("alt")][1]=r.renderInlineAsText(l.children,i,n),r.renderToken(t,e,i)};default_rules.hardbreak=function(t,e,i){return i.xhtmlOut?`<br />
`:`<br>
`};default_rules.softbreak=function(t,e,i){return i.breaks?i.xhtmlOut?`<br />
`:`<br>
`:`
`};default_rules.text=function(t,e){return escapeHtml(t[e].content)};default_rules.html_block=function(t,e){return t[e].content};default_rules.html_inline=function(t,e){return t[e].content};function Renderer(){this.rules=assign$1({},default_rules)}Renderer.prototype.renderAttrs=function t(e){let i,n,r;if(!e.attrs)return"";for(r="",i=0,n=e.attrs.length;i<n;i++)r+=" "+escapeHtml(e.attrs[i][0])+'="'+escapeHtml(e.attrs[i][1])+'"';return r};Renderer.prototype.renderToken=function t(e,i,n){const r=e[i];let l="";if(r.hidden)return"";r.block&&r.nesting!==-1&&i&&e[i-1].hidden&&(l+=`
`),l+=(r.nesting===-1?"</":"<")+r.tag,l+=this.renderAttrs(r),r.nesting===0&&n.xhtmlOut&&(l+=" /");let s=!1;if(r.block&&(s=!0,r.nesting===1&&i+1<e.length)){const a=e[i+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===r.tag)&&(s=!1)}return l+=s?`>
`:">",l};Renderer.prototype.renderInline=function(t,e,i){let n="";const r=this.rules;for(let l=0,s=t.length;l<s;l++){const a=t[l].type;typeof r[a]<"u"?n+=r[a](t,l,e,i,this):n+=this.renderToken(t,l,e)}return n};Renderer.prototype.renderInlineAsText=function(t,e,i){let n="";for(let r=0,l=t.length;r<l;r++)switch(t[r].type){case"text":n+=t[r].content;break;case"image":n+=this.renderInlineAsText(t[r].children,e,i);break;case"html_inline":case"html_block":n+=t[r].content;break;case"softbreak":case"hardbreak":n+=`
`;break}return n};Renderer.prototype.render=function(t,e,i){let n="";const r=this.rules;for(let l=0,s=t.length;l<s;l++){const a=t[l].type;a==="inline"?n+=this.renderInline(t[l].children,e,i):typeof r[a]<"u"?n+=r[a](t,l,e,i,this):n+=this.renderToken(t,l,e,i)}return n};function Ruler(){this.__rules__=[],this.__cache__=null}Ruler.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Ruler.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(i){i.enabled&&i.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(i){t.__cache__[i]=[],t.__rules__.forEach(function(n){n.enabled&&(i&&n.alt.indexOf(i)<0||t.__cache__[i].push(n.fn))})})};Ruler.prototype.at=function(t,e,i){const n=this.__find__(t),r=i||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=r.alt||[],this.__cache__=null};Ruler.prototype.before=function(t,e,i,n){const r=this.__find__(t),l=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(r,0,{name:e,enabled:!0,fn:i,alt:l.alt||[]}),this.__cache__=null};Ruler.prototype.after=function(t,e,i,n){const r=this.__find__(t),l=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(r+1,0,{name:e,enabled:!0,fn:i,alt:l.alt||[]}),this.__cache__=null};Ruler.prototype.push=function(t,e,i){const n=i||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Ruler.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const i=[];return t.forEach(function(n){const r=this.__find__(n);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[r].enabled=!0,i.push(n)},this),this.__cache__=null,i};Ruler.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(i){i.enabled=!1}),this.enable(t,e)};Ruler.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const i=[];return t.forEach(function(n){const r=this.__find__(n);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[r].enabled=!1,i.push(n)},this),this.__cache__=null,i};Ruler.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Token(t,e,i){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=i,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Token.prototype.attrIndex=function t(e){if(!this.attrs)return-1;const i=this.attrs;for(let n=0,r=i.length;n<r;n++)if(i[n][0]===e)return n;return-1};Token.prototype.attrPush=function t(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Token.prototype.attrSet=function t(e,i){const n=this.attrIndex(e),r=[e,i];n<0?this.attrPush(r):this.attrs[n]=r};Token.prototype.attrGet=function t(e){const i=this.attrIndex(e);let n=null;return i>=0&&(n=this.attrs[i][1]),n};Token.prototype.attrJoin=function t(e,i){const n=this.attrIndex(e);n<0?this.attrPush([e,i]):this.attrs[n][1]=this.attrs[n][1]+" "+i};function StateCore(t,e,i){this.src=t,this.env=i,this.tokens=[],this.inlineMode=!1,this.md=e}StateCore.prototype.Token=Token;const NEWLINES_RE=/\r\n?|\n/g,NULL_RE=/\0/g;function normalize(t){let e;e=t.src.replace(NEWLINES_RE,`
`),e=e.replace(NULL_RE,""),t.src=e}function block(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function inline(t){const e=t.tokens;for(let i=0,n=e.length;i<n;i++){const r=e[i];r.type==="inline"&&t.md.inline.parse(r.content,t.md,t.env,r.children)}}function isLinkOpen$1(t){return/^<a[>\s]/i.test(t)}function isLinkClose$1(t){return/^<\/a\s*>/i.test(t)}function linkify$1(t){const e=t.tokens;if(t.md.options.linkify)for(let i=0,n=e.length;i<n;i++){if(e[i].type!=="inline"||!t.md.linkify.pretest(e[i].content))continue;let r=e[i].children,l=0;for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.type==="link_close"){for(s--;r[s].level!==a.level&&r[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(isLinkOpen$1(a.content)&&l>0&&l--,isLinkClose$1(a.content)&&l++),!(l>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const o=a.content;let u=t.md.linkify.match(o);const d=[];let p=a.level,c=0;u.length>0&&u[0].index===0&&s>0&&r[s-1].type==="text_special"&&(u=u.slice(1));for(let g=0;g<u.length;g++){const x=u[g].url,C=t.md.normalizeLink(x);if(!t.md.validateLink(C))continue;let T=u[g].text;u[g].schema?u[g].schema==="mailto:"&&!/^mailto:/i.test(T)?T=t.md.normalizeLinkText("mailto:"+T).replace(/^mailto:/,""):T=t.md.normalizeLinkText(T):T=t.md.normalizeLinkText("http://"+T).replace(/^http:\/\//,"");const A=u[g].index;if(A>c){const H=new t.Token("text","",0);H.content=o.slice(c,A),H.level=p,d.push(H)}const R=new t.Token("link_open","a",1);R.attrs=[["href",C]],R.level=p++,R.markup="linkify",R.info="auto",d.push(R);const _=new t.Token("text","",0);_.content=T,_.level=p,d.push(_);const N=new t.Token("link_close","a",-1);N.level=--p,N.markup="linkify",N.info="auto",d.push(N),c=u[g].lastIndex}if(c<o.length){const g=new t.Token("text","",0);g.content=o.slice(c),g.level=p,d.push(g)}e[i].children=r=arrayReplaceAt(r,s,d)}}}}const RARE_RE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,SCOPED_ABBR_TEST_RE=/\((c|tm|r)\)/i,SCOPED_ABBR_RE=/\((c|tm|r)\)/ig,SCOPED_ABBR={c:"",r:"",tm:""};function replaceFn(t,e){return SCOPED_ABBR[e.toLowerCase()]}function replace_scoped(t){let e=0;for(let i=t.length-1;i>=0;i--){const n=t[i];n.type==="text"&&!e&&(n.content=n.content.replace(SCOPED_ABBR_RE,replaceFn)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function replace_rare(t){let e=0;for(let i=t.length-1;i>=0;i--){const n=t[i];n.type==="text"&&!e&&RARE_RE.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function replace$1(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(SCOPED_ABBR_TEST_RE.test(t.tokens[e].content)&&replace_scoped(t.tokens[e].children),RARE_RE.test(t.tokens[e].content)&&replace_rare(t.tokens[e].children))}const QUOTE_TEST_RE=/['"]/,QUOTE_RE=/['"]/g,APOSTROPHE="";function replaceAt(t,e,i){return t.slice(0,e)+i+t.slice(e+1)}function process_inlines(t,e){let i;const n=[];for(let r=0;r<t.length;r++){const l=t[r],s=t[r].level;for(i=n.length-1;i>=0&&!(n[i].level<=s);i--);if(n.length=i+1,l.type!=="text")continue;let a=l.content,o=0,u=a.length;t:for(;o<u;){QUOTE_RE.lastIndex=o;const d=QUOTE_RE.exec(a);if(!d)break;let p=!0,c=!0;o=d.index+1;const g=d[0]==="'";let x=32;if(d.index-1>=0)x=a.charCodeAt(d.index-1);else for(i=r-1;i>=0&&!(t[i].type==="softbreak"||t[i].type==="hardbreak");i--)if(t[i].content){x=t[i].content.charCodeAt(t[i].content.length-1);break}let C=32;if(o<u)C=a.charCodeAt(o);else for(i=r+1;i<t.length&&!(t[i].type==="softbreak"||t[i].type==="hardbreak");i++)if(t[i].content){C=t[i].content.charCodeAt(0);break}const T=isMdAsciiPunct(x)||isPunctChar(String.fromCharCode(x)),A=isMdAsciiPunct(C)||isPunctChar(String.fromCharCode(C)),R=isWhiteSpace(x),_=isWhiteSpace(C);if(_?p=!1:A&&(R||T||(p=!1)),R?c=!1:T&&(_||A||(c=!1)),C===34&&d[0]==='"'&&x>=48&&x<=57&&(c=p=!1),p&&c&&(p=T,c=A),!p&&!c){g&&(l.content=replaceAt(l.content,d.index,APOSTROPHE));continue}if(c)for(i=n.length-1;i>=0;i--){let N=n[i];if(n[i].level<s)break;if(N.single===g&&n[i].level===s){N=n[i];let H,k;g?(H=e.md.options.quotes[2],k=e.md.options.quotes[3]):(H=e.md.options.quotes[0],k=e.md.options.quotes[1]),l.content=replaceAt(l.content,d.index,k),t[N.token].content=replaceAt(t[N.token].content,N.pos,H),o+=k.length-1,N.token===r&&(o+=H.length-1),a=l.content,u=a.length,n.length=i;continue t}}p?n.push({token:r,pos:d.index,single:g,level:s}):c&&g&&(l.content=replaceAt(l.content,d.index,APOSTROPHE))}}}function smartquotes(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!QUOTE_TEST_RE.test(t.tokens[e].content)||process_inlines(t.tokens[e].children,t)}function text_join(t){let e,i;const n=t.tokens,r=n.length;for(let l=0;l<r;l++){if(n[l].type!=="inline")continue;const s=n[l].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=i=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==i&&(s[i]=s[e]),i++);e!==i&&(s.length=i)}}const _rules$2=[["normalize",normalize],["block",block],["inline",inline],["linkify",linkify$1],["replacements",replace$1],["smartquotes",smartquotes],["text_join",text_join]];function Core(){this.ruler=new Ruler;for(let t=0;t<_rules$2.length;t++)this.ruler.push(_rules$2[t][0],_rules$2[t][1])}Core.prototype.process=function(t){const e=this.ruler.getRules("");for(let i=0,n=e.length;i<n;i++)e[i](t)};Core.prototype.State=StateCore;function StateBlock(t,e,i,n){this.src=t,this.md=e,this.env=i,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const r=this.src;for(let l=0,s=0,a=0,o=0,u=r.length,d=!1;s<u;s++){const p=r.charCodeAt(s);if(!d)if(isSpace(p)){a++,p===9?o+=4-o%4:o++;continue}else d=!0;(p===10||s===u-1)&&(p!==10&&s++,this.bMarks.push(l),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(o),this.bsCount.push(0),d=!1,a=0,o=0,l=s+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}StateBlock.prototype.push=function(t,e,i){const n=new Token(t,e,i);return n.block=!0,i<0&&this.level--,n.level=this.level,i>0&&this.level++,this.tokens.push(n),n};StateBlock.prototype.isEmpty=function t(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};StateBlock.prototype.skipEmptyLines=function t(e){for(let i=this.lineMax;e<i&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};StateBlock.prototype.skipSpaces=function t(e){for(let i=this.src.length;e<i;e++){const n=this.src.charCodeAt(e);if(!isSpace(n))break}return e};StateBlock.prototype.skipSpacesBack=function t(e,i){if(e<=i)return e;for(;e>i;)if(!isSpace(this.src.charCodeAt(--e)))return e+1;return e};StateBlock.prototype.skipChars=function t(e,i){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===i;e++);return e};StateBlock.prototype.skipCharsBack=function t(e,i,n){if(e<=n)return e;for(;e>n;)if(i!==this.src.charCodeAt(--e))return e+1;return e};StateBlock.prototype.getLines=function t(e,i,n,r){if(e>=i)return"";const l=new Array(i-e);for(let s=0,a=e;a<i;a++,s++){let o=0;const u=this.bMarks[a];let d=u,p;for(a+1<i||r?p=this.eMarks[a]+1:p=this.eMarks[a];d<p&&o<n;){const c=this.src.charCodeAt(d);if(isSpace(c))c===9?o+=4-(o+this.bsCount[a])%4:o++;else if(d-u<this.tShift[a])o++;else break;d++}o>n?l[s]=new Array(o-n+1).join(" ")+this.src.slice(d,p):l[s]=this.src.slice(d,p)}return l.join("")};StateBlock.prototype.Token=Token;const MAX_AUTOCOMPLETED_CELLS=65536;function getLine(t,e){const i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(i,n)}function escapedSplit(t){const e=[],i=t.length;let n=0,r=t.charCodeAt(n),l=!1,s=0,a="";for(;n<i;)r===124&&(l?(a+=t.substring(s,n-1),s=n):(e.push(a+t.substring(s,n)),a="",s=n+1)),l=r===92,n++,r=t.charCodeAt(n);return e.push(a+t.substring(s)),e}function table(t,e,i,n){if(e+2>i)return!1;let r=e+1;if(t.sCount[r]<t.blkIndent||t.sCount[r]-t.blkIndent>=4)return!1;let l=t.bMarks[r]+t.tShift[r];if(l>=t.eMarks[r])return!1;const s=t.src.charCodeAt(l++);if(s!==124&&s!==45&&s!==58||l>=t.eMarks[r])return!1;const a=t.src.charCodeAt(l++);if(a!==124&&a!==45&&a!==58&&!isSpace(a)||s===45&&isSpace(a))return!1;for(;l<t.eMarks[r];){const N=t.src.charCodeAt(l);if(N!==124&&N!==45&&N!==58&&!isSpace(N))return!1;l++}let o=getLine(t,e+1),u=o.split("|");const d=[];for(let N=0;N<u.length;N++){const H=u[N].trim();if(!H){if(N===0||N===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(H))return!1;H.charCodeAt(H.length-1)===58?d.push(H.charCodeAt(0)===58?"center":"right"):H.charCodeAt(0)===58?d.push("left"):d.push("")}if(o=getLine(t,e).trim(),o.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=escapedSplit(o),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const p=u.length;if(p===0||p!==d.length)return!1;if(n)return!0;const c=t.parentType;t.parentType="table";const g=t.md.block.ruler.getRules("blockquote"),x=t.push("table_open","table",1),C=[e,0];x.map=C;const T=t.push("thead_open","thead",1);T.map=[e,e+1];const A=t.push("tr_open","tr",1);A.map=[e,e+1];for(let N=0;N<u.length;N++){const H=t.push("th_open","th",1);d[N]&&(H.attrs=[["style","text-align:"+d[N]]]);const k=t.push("inline","",0);k.content=u[N].trim(),k.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let R,_=0;for(r=e+2;r<i&&!(t.sCount[r]<t.blkIndent);r++){let N=!1;for(let k=0,K=g.length;k<K;k++)if(g[k](t,r,i,!0)){N=!0;break}if(N||(o=getLine(t,r).trim(),!o)||t.sCount[r]-t.blkIndent>=4||(u=escapedSplit(o),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),_+=p-u.length,_>MAX_AUTOCOMPLETED_CELLS))break;if(r===e+2){const k=t.push("tbody_open","tbody",1);k.map=R=[e+2,0]}const H=t.push("tr_open","tr",1);H.map=[r,r+1];for(let k=0;k<p;k++){const K=t.push("td_open","td",1);d[k]&&(K.attrs=[["style","text-align:"+d[k]]]);const Q=t.push("inline","",0);Q.content=u[k]?u[k].trim():"",Q.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return R&&(t.push("tbody_close","tbody",-1),R[1]=r),t.push("table_close","table",-1),C[1]=r,t.parentType=c,t.line=r,!0}function code(t,e,i){if(t.sCount[e]-t.blkIndent<4)return!1;let n=e+1,r=n;for(;n<i;){if(t.isEmpty(n)){n++;continue}if(t.sCount[n]-t.blkIndent>=4){n++,r=n;continue}break}t.line=r;const l=t.push("code_block","code",0);return l.content=t.getLines(e,r,4+t.blkIndent,!1)+`
`,l.map=[e,t.line],!0}function fence(t,e,i,n){let r=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||r+3>l)return!1;const s=t.src.charCodeAt(r);if(s!==126&&s!==96)return!1;let a=r;r=t.skipChars(r,s);let o=r-a;if(o<3)return!1;const u=t.src.slice(a,r),d=t.src.slice(r,l);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let p=e,c=!1;for(;p++,!(p>=i||(r=a=t.bMarks[p]+t.tShift[p],l=t.eMarks[p],r<l&&t.sCount[p]<t.blkIndent));)if(t.src.charCodeAt(r)===s&&!(t.sCount[p]-t.blkIndent>=4)&&(r=t.skipChars(r,s),!(r-a<o)&&(r=t.skipSpaces(r),!(r<l)))){c=!0;break}o=t.sCount[e],t.line=p+(c?1:0);const g=t.push("fence","code",0);return g.info=d,g.content=t.getLines(e+1,p,o,!0),g.markup=u,g.map=[e,t.line],!0}function blockquote(t,e,i,n){let r=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];const s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(r)!==62)return!1;if(n)return!0;const a=[],o=[],u=[],d=[],p=t.md.block.ruler.getRules("blockquote"),c=t.parentType;t.parentType="blockquote";let g=!1,x;for(x=e;x<i;x++){const _=t.sCount[x]<t.blkIndent;if(r=t.bMarks[x]+t.tShift[x],l=t.eMarks[x],r>=l)break;if(t.src.charCodeAt(r++)===62&&!_){let H=t.sCount[x]+1,k,K;t.src.charCodeAt(r)===32?(r++,H++,K=!1,k=!0):t.src.charCodeAt(r)===9?(k=!0,(t.bsCount[x]+H)%4===3?(r++,H++,K=!1):K=!0):k=!1;let Q=H;for(a.push(t.bMarks[x]),t.bMarks[x]=r;r<l;){const nt=t.src.charCodeAt(r);if(isSpace(nt))nt===9?Q+=4-(Q+t.bsCount[x]+(K?1:0))%4:Q++;else break;r++}g=r>=l,o.push(t.bsCount[x]),t.bsCount[x]=t.sCount[x]+1+(k?1:0),u.push(t.sCount[x]),t.sCount[x]=Q-H,d.push(t.tShift[x]),t.tShift[x]=r-t.bMarks[x];continue}if(g)break;let N=!1;for(let H=0,k=p.length;H<k;H++)if(p[H](t,x,i,!0)){N=!0;break}if(N){t.lineMax=x,t.blkIndent!==0&&(a.push(t.bMarks[x]),o.push(t.bsCount[x]),d.push(t.tShift[x]),u.push(t.sCount[x]),t.sCount[x]-=t.blkIndent);break}a.push(t.bMarks[x]),o.push(t.bsCount[x]),d.push(t.tShift[x]),u.push(t.sCount[x]),t.sCount[x]=-1}const C=t.blkIndent;t.blkIndent=0;const T=t.push("blockquote_open","blockquote",1);T.markup=">";const A=[e,0];T.map=A,t.md.block.tokenize(t,e,x);const R=t.push("blockquote_close","blockquote",-1);R.markup=">",t.lineMax=s,t.parentType=c,A[1]=t.line;for(let _=0;_<d.length;_++)t.bMarks[_+e]=a[_],t.tShift[_+e]=d[_],t.sCount[_+e]=u[_],t.bsCount[_+e]=o[_];return t.blkIndent=C,!0}function hr(t,e,i,n){const r=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let l=t.bMarks[e]+t.tShift[e];const s=t.src.charCodeAt(l++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;l<r;){const u=t.src.charCodeAt(l++);if(u!==s&&!isSpace(u))return!1;u===s&&a++}if(a<3)return!1;if(n)return!0;t.line=e+1;const o=t.push("hr","hr",0);return o.map=[e,t.line],o.markup=Array(a+1).join(String.fromCharCode(s)),!0}function skipBulletListMarker(t,e){const i=t.eMarks[e];let n=t.bMarks[e]+t.tShift[e];const r=t.src.charCodeAt(n++);if(r!==42&&r!==45&&r!==43)return-1;if(n<i){const l=t.src.charCodeAt(n);if(!isSpace(l))return-1}return n}function skipOrderedListMarker(t,e){const i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];let r=i;if(r+1>=n)return-1;let l=t.src.charCodeAt(r++);if(l<48||l>57)return-1;for(;;){if(r>=n)return-1;if(l=t.src.charCodeAt(r++),l>=48&&l<=57){if(r-i>=10)return-1;continue}if(l===41||l===46)break;return-1}return r<n&&(l=t.src.charCodeAt(r),!isSpace(l))?-1:r}function markTightParagraphs(t,e){const i=t.level+2;for(let n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===i&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}function list(t,e,i,n){let r,l,s,a,o=e,u=!0;if(t.sCount[o]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[o]-t.listIndent>=4&&t.sCount[o]<t.blkIndent)return!1;let d=!1;n&&t.parentType==="paragraph"&&t.sCount[o]>=t.blkIndent&&(d=!0);let p,c,g;if((g=skipOrderedListMarker(t,o))>=0){if(p=!0,s=t.bMarks[o]+t.tShift[o],c=Number(t.src.slice(s,g-1)),d&&c!==1)return!1}else if((g=skipBulletListMarker(t,o))>=0)p=!1;else return!1;if(d&&t.skipSpaces(g)>=t.eMarks[o])return!1;if(n)return!0;const x=t.src.charCodeAt(g-1),C=t.tokens.length;p?(a=t.push("ordered_list_open","ol",1),c!==1&&(a.attrs=[["start",c]])):a=t.push("bullet_list_open","ul",1);const T=[o,0];a.map=T,a.markup=String.fromCharCode(x);let A=!1;const R=t.md.block.ruler.getRules("list"),_=t.parentType;for(t.parentType="list";o<i;){l=g,r=t.eMarks[o];const N=t.sCount[o]+g-(t.bMarks[o]+t.tShift[o]);let H=N;for(;l<r;){const U=t.src.charCodeAt(l);if(U===9)H+=4-(H+t.bsCount[o])%4;else if(U===32)H++;else break;l++}const k=l;let K;k>=r?K=1:K=H-N,K>4&&(K=1);const Q=N+K;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(x);const nt=[o,0];a.map=nt,p&&(a.info=t.src.slice(s,g-1));const dt=t.tight,mt=t.tShift[o],xt=t.sCount[o],Y=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=Q,t.tight=!0,t.tShift[o]=k-t.bMarks[o],t.sCount[o]=H,k>=r&&t.isEmpty(o+1)?t.line=Math.min(t.line+2,i):t.md.block.tokenize(t,o,i,!0),(!t.tight||A)&&(u=!1),A=t.line-o>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=Y,t.tShift[o]=mt,t.sCount[o]=xt,t.tight=dt,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(x),o=t.line,nt[1]=o,o>=i||t.sCount[o]<t.blkIndent||t.sCount[o]-t.blkIndent>=4)break;let B=!1;for(let U=0,lt=R.length;U<lt;U++)if(R[U](t,o,i,!0)){B=!0;break}if(B)break;if(p){if(g=skipOrderedListMarker(t,o),g<0)break;s=t.bMarks[o]+t.tShift[o]}else if(g=skipBulletListMarker(t,o),g<0)break;if(x!==t.src.charCodeAt(g-1))break}return p?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(x),T[1]=o,t.line=o,t.parentType=_,u&&markTightParagraphs(t,C),!0}function reference(t,e,i,n){let r=t.bMarks[e]+t.tShift[e],l=t.eMarks[e],s=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(r)!==91)return!1;function a(R){const _=t.lineMax;if(R>=_||t.isEmpty(R))return null;let N=!1;if(t.sCount[R]-t.blkIndent>3&&(N=!0),t.sCount[R]<0&&(N=!0),!N){const K=t.md.block.ruler.getRules("reference"),Q=t.parentType;t.parentType="reference";let nt=!1;for(let dt=0,mt=K.length;dt<mt;dt++)if(K[dt](t,R,_,!0)){nt=!0;break}if(t.parentType=Q,nt)return null}const H=t.bMarks[R]+t.tShift[R],k=t.eMarks[R];return t.src.slice(H,k+1)}let o=t.src.slice(r,l+1);l=o.length;let u=-1;for(r=1;r<l;r++){const R=o.charCodeAt(r);if(R===91)return!1;if(R===93){u=r;break}else if(R===10){const _=a(s);_!==null&&(o+=_,l=o.length,s++)}else if(R===92&&(r++,r<l&&o.charCodeAt(r)===10)){const _=a(s);_!==null&&(o+=_,l=o.length,s++)}}if(u<0||o.charCodeAt(u+1)!==58)return!1;for(r=u+2;r<l;r++){const R=o.charCodeAt(r);if(R===10){const _=a(s);_!==null&&(o+=_,l=o.length,s++)}else if(!isSpace(R))break}const d=t.md.helpers.parseLinkDestination(o,r,l);if(!d.ok)return!1;const p=t.md.normalizeLink(d.str);if(!t.md.validateLink(p))return!1;r=d.pos;const c=r,g=s,x=r;for(;r<l;r++){const R=o.charCodeAt(r);if(R===10){const _=a(s);_!==null&&(o+=_,l=o.length,s++)}else if(!isSpace(R))break}let C=t.md.helpers.parseLinkTitle(o,r,l);for(;C.can_continue;){const R=a(s);if(R===null)break;o+=R,r=l,l=o.length,s++,C=t.md.helpers.parseLinkTitle(o,r,l,C)}let T;for(r<l&&x!==r&&C.ok?(T=C.str,r=C.pos):(T="",r=c,s=g);r<l;){const R=o.charCodeAt(r);if(!isSpace(R))break;r++}if(r<l&&o.charCodeAt(r)!==10&&T)for(T="",r=c,s=g;r<l;){const R=o.charCodeAt(r);if(!isSpace(R))break;r++}if(r<l&&o.charCodeAt(r)!==10)return!1;const A=normalizeReference(o.slice(1,u));return A?(n||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[A]>"u"&&(t.env.references[A]={title:T,href:p}),t.line=s),!0):!1}const block_names=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],attr_name="[a-zA-Z_:][a-zA-Z0-9:._-]*",unquoted="[^\"'=<>`\\x00-\\x20]+",single_quoted="'[^']*'",double_quoted='"[^"]*"',attr_value="(?:"+unquoted+"|"+single_quoted+"|"+double_quoted+")",attribute="(?:\\s+"+attr_name+"(?:\\s*=\\s*"+attr_value+")?)",open_tag="<[A-Za-z][A-Za-z0-9\\-]*"+attribute+"*\\s*\\/?>",close_tag="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",comment="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",processing="<[?][\\s\\S]*?[?]>",declaration="<![A-Za-z][^>]*>",cdata="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",HTML_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+"|"+comment+"|"+processing+"|"+declaration+"|"+cdata+")"),HTML_OPEN_CLOSE_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+")"),HTML_SEQUENCES=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+block_names.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(HTML_OPEN_CLOSE_TAG_RE.source+"\\s*$"),/^$/,!1]];function html_block(t,e,i,n){let r=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(r)!==60)return!1;let s=t.src.slice(r,l),a=0;for(;a<HTML_SEQUENCES.length&&!HTML_SEQUENCES[a][0].test(s);a++);if(a===HTML_SEQUENCES.length)return!1;if(n)return HTML_SEQUENCES[a][2];let o=e+1;if(!HTML_SEQUENCES[a][1].test(s)){for(;o<i&&!(t.sCount[o]<t.blkIndent);o++)if(r=t.bMarks[o]+t.tShift[o],l=t.eMarks[o],s=t.src.slice(r,l),HTML_SEQUENCES[a][1].test(s)){s.length!==0&&o++;break}}t.line=o;const u=t.push("html_block","",0);return u.map=[e,o],u.content=t.getLines(e,o,t.blkIndent,!0),!0}function heading(t,e,i,n){let r=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(r);if(s!==35||r>=l)return!1;let a=1;for(s=t.src.charCodeAt(++r);s===35&&r<l&&a<=6;)a++,s=t.src.charCodeAt(++r);if(a>6||r<l&&!isSpace(s))return!1;if(n)return!0;l=t.skipSpacesBack(l,r);const o=t.skipCharsBack(l,35,r);o>r&&isSpace(t.src.charCodeAt(o-1))&&(l=o),t.line=e+1;const u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];const d=t.push("inline","",0);d.content=t.src.slice(r,l).trim(),d.map=[e,t.line],d.children=[];const p=t.push("heading_close","h"+String(a),-1);return p.markup="########".slice(0,a),!0}function lheading(t,e,i){const n=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const r=t.parentType;t.parentType="paragraph";let l=0,s,a=e+1;for(;a<i&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let g=t.bMarks[a]+t.tShift[a];const x=t.eMarks[a];if(g<x&&(s=t.src.charCodeAt(g),(s===45||s===61)&&(g=t.skipChars(g,s),g=t.skipSpaces(g),g>=x))){l=s===61?1:2;break}}if(t.sCount[a]<0)continue;let c=!1;for(let g=0,x=n.length;g<x;g++)if(n[g](t,a,i,!0)){c=!0;break}if(c)break}if(!l)return!1;const o=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const u=t.push("heading_open","h"+String(l),1);u.markup=String.fromCharCode(s),u.map=[e,t.line];const d=t.push("inline","",0);d.content=o,d.map=[e,t.line-1],d.children=[];const p=t.push("heading_close","h"+String(l),-1);return p.markup=String.fromCharCode(s),t.parentType=r,!0}function paragraph(t,e,i){const n=t.md.block.ruler.getRules("paragraph"),r=t.parentType;let l=e+1;for(t.parentType="paragraph";l<i&&!t.isEmpty(l);l++){if(t.sCount[l]-t.blkIndent>3||t.sCount[l]<0)continue;let u=!1;for(let d=0,p=n.length;d<p;d++)if(n[d](t,l,i,!0)){u=!0;break}if(u)break}const s=t.getLines(e,l,t.blkIndent,!1).trim();t.line=l;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const o=t.push("inline","",0);return o.content=s,o.map=[e,t.line],o.children=[],t.push("paragraph_close","p",-1),t.parentType=r,!0}const _rules$1=[["table",table,["paragraph","reference"]],["code",code],["fence",fence,["paragraph","reference","blockquote","list"]],["blockquote",blockquote,["paragraph","reference","blockquote","list"]],["hr",hr,["paragraph","reference","blockquote","list"]],["list",list,["paragraph","reference","blockquote"]],["reference",reference],["html_block",html_block,["paragraph","reference","blockquote"]],["heading",heading,["paragraph","reference","blockquote"]],["lheading",lheading],["paragraph",paragraph]];function ParserBlock(){this.ruler=new Ruler;for(let t=0;t<_rules$1.length;t++)this.ruler.push(_rules$1[t][0],_rules$1[t][1],{alt:(_rules$1[t][2]||[]).slice()})}ParserBlock.prototype.tokenize=function(t,e,i){const n=this.ruler.getRules(""),r=n.length,l=t.md.options.maxNesting;let s=e,a=!1;for(;s<i&&(t.line=s=t.skipEmptyLines(s),!(s>=i||t.sCount[s]<t.blkIndent));){if(t.level>=l){t.line=i;break}const o=t.line;let u=!1;for(let d=0;d<r;d++)if(u=n[d](t,s,i,!1),u){if(o>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<i&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};ParserBlock.prototype.parse=function(t,e,i,n){if(!t)return;const r=new this.State(t,e,i,n);this.tokenize(r,r.line,r.lineMax)};ParserBlock.prototype.State=StateBlock;function StateInline(t,e,i,n){this.src=t,this.env=i,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}StateInline.prototype.pushPending=function(){const t=new Token("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};StateInline.prototype.push=function(t,e,i){this.pending&&this.pushPending();const n=new Token(t,e,i);let r=null;return i<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,i>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(r),n};StateInline.prototype.scanDelims=function(t,e){const i=this.posMax,n=this.src.charCodeAt(t),r=t>0?this.src.charCodeAt(t-1):32;let l=t;for(;l<i&&this.src.charCodeAt(l)===n;)l++;const s=l-t,a=l<i?this.src.charCodeAt(l):32,o=isMdAsciiPunct(r)||isPunctChar(String.fromCharCode(r)),u=isMdAsciiPunct(a)||isPunctChar(String.fromCharCode(a)),d=isWhiteSpace(r),p=isWhiteSpace(a),c=!p&&(!u||d||o),g=!d&&(!o||p||u);return{can_open:c&&(e||!g||o),can_close:g&&(e||!c||u),length:s}};StateInline.prototype.Token=Token;function isTerminatorChar(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function text$1(t,e){let i=t.pos;for(;i<t.posMax&&!isTerminatorChar(t.src.charCodeAt(i));)i++;return i===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,i)),t.pos=i,!0)}const SCHEME_RE=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function linkify(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const i=t.pos,n=t.posMax;if(i+3>n||t.src.charCodeAt(i)!==58||t.src.charCodeAt(i+1)!==47||t.src.charCodeAt(i+2)!==47)return!1;const r=t.pending.match(SCHEME_RE);if(!r)return!1;const l=r[1],s=t.md.linkify.matchAtStart(t.src.slice(i-l.length));if(!s)return!1;let a=s.url;if(a.length<=l.length)return!1;a=a.replace(/\*+$/,"");const o=t.md.normalizeLink(a);if(!t.md.validateLink(o))return!1;if(!e){t.pending=t.pending.slice(0,-l.length);const u=t.push("link_open","a",1);u.attrs=[["href",o]],u.markup="linkify",u.info="auto";const d=t.push("text","",0);d.content=t.md.normalizeLinkText(a);const p=t.push("link_close","a",-1);p.markup="linkify",p.info="auto"}return t.pos+=a.length-l.length,!0}function newline(t,e){let i=t.pos;if(t.src.charCodeAt(i)!==10)return!1;const n=t.pending.length-1,r=t.posMax;if(!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){let l=n-1;for(;l>=1&&t.pending.charCodeAt(l-1)===32;)l--;t.pending=t.pending.slice(0,l),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(i++;i<r&&isSpace(t.src.charCodeAt(i));)i++;return t.pos=i,!0}const ESCAPED=[];for(let t=0;t<256;t++)ESCAPED.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){ESCAPED[t.charCodeAt(0)]=1});function escape$1(t,e){let i=t.pos;const n=t.posMax;if(t.src.charCodeAt(i)!==92||(i++,i>=n))return!1;let r=t.src.charCodeAt(i);if(r===10){for(e||t.push("hardbreak","br",0),i++;i<n&&(r=t.src.charCodeAt(i),!!isSpace(r));)i++;return t.pos=i,!0}let l=t.src[i];if(r>=55296&&r<=56319&&i+1<n){const a=t.src.charCodeAt(i+1);a>=56320&&a<=57343&&(l+=t.src[i+1],i++)}const s="\\"+l;if(!e){const a=t.push("text_special","",0);r<256&&ESCAPED[r]!==0?a.content=l:a.content=s,a.markup=s,a.info="escape"}return t.pos=i+1,!0}function backtick(t,e){let i=t.pos;if(t.src.charCodeAt(i)!==96)return!1;const r=i;i++;const l=t.posMax;for(;i<l&&t.src.charCodeAt(i)===96;)i++;const s=t.src.slice(r,i),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=r)return e||(t.pending+=s),t.pos+=a,!0;let o=i,u;for(;(u=t.src.indexOf("`",o))!==-1;){for(o=u+1;o<l&&t.src.charCodeAt(o)===96;)o++;const d=o-u;if(d===a){if(!e){const p=t.push("code_inline","code",0);p.markup=s,p.content=t.src.slice(i,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=o,!0}t.backticks[d]=u}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function strikethrough_tokenize(t,e){const i=t.pos,n=t.src.charCodeAt(i);if(e||n!==126)return!1;const r=t.scanDelims(t.pos,!0);let l=r.length;const s=String.fromCharCode(n);if(l<2)return!1;let a;l%2&&(a=t.push("text","",0),a.content=s,l--);for(let o=0;o<l;o+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:n,length:0,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0}function postProcess$1(t,e){let i;const n=[],r=e.length;for(let l=0;l<r;l++){const s=e[l];if(s.marker!==126||s.end===-1)continue;const a=e[s.end];i=t.tokens[s.token],i.type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",i=t.tokens[a.token],i.type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){const l=n.pop();let s=l+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,l!==s&&(i=t.tokens[s],t.tokens[s]=t.tokens[l],t.tokens[l]=i)}}function strikethrough_postProcess(t){const e=t.tokens_meta,i=t.tokens_meta.length;postProcess$1(t,t.delimiters);for(let n=0;n<i;n++)e[n]&&e[n].delimiters&&postProcess$1(t,e[n].delimiters)}const r_strikethrough={tokenize:strikethrough_tokenize,postProcess:strikethrough_postProcess};function emphasis_tokenize(t,e){const i=t.pos,n=t.src.charCodeAt(i);if(e||n!==95&&n!==42)return!1;const r=t.scanDelims(t.pos,n===42);for(let l=0;l<r.length;l++){const s=t.push("text","",0);s.content=String.fromCharCode(n),t.delimiters.push({marker:n,length:r.length,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close})}return t.pos+=r.length,!0}function postProcess(t,e){const i=e.length;for(let n=i-1;n>=0;n--){const r=e[n];if(r.marker!==95&&r.marker!==42||r.end===-1)continue;const l=e[r.end],s=n>0&&e[n-1].end===r.end+1&&e[n-1].marker===r.marker&&e[n-1].token===r.token-1&&e[r.end+1].token===l.token+1,a=String.fromCharCode(r.marker),o=t.tokens[r.token];o.type=s?"strong_open":"em_open",o.tag=s?"strong":"em",o.nesting=1,o.markup=s?a+a:a,o.content="";const u=t.tokens[l.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--)}}function emphasis_post_process(t){const e=t.tokens_meta,i=t.tokens_meta.length;postProcess(t,t.delimiters);for(let n=0;n<i;n++)e[n]&&e[n].delimiters&&postProcess(t,e[n].delimiters)}const r_emphasis={tokenize:emphasis_tokenize,postProcess:emphasis_post_process};function link(t,e){let i,n,r,l,s="",a="",o=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const d=t.pos,p=t.posMax,c=t.pos+1,g=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(g<0)return!1;let x=g+1;if(x<p&&t.src.charCodeAt(x)===40){for(u=!1,x++;x<p&&(i=t.src.charCodeAt(x),!(!isSpace(i)&&i!==10));x++);if(x>=p)return!1;if(o=x,r=t.md.helpers.parseLinkDestination(t.src,x,t.posMax),r.ok){for(s=t.md.normalizeLink(r.str),t.md.validateLink(s)?x=r.pos:s="",o=x;x<p&&(i=t.src.charCodeAt(x),!(!isSpace(i)&&i!==10));x++);if(r=t.md.helpers.parseLinkTitle(t.src,x,t.posMax),x<p&&o!==x&&r.ok)for(a=r.str,x=r.pos;x<p&&(i=t.src.charCodeAt(x),!(!isSpace(i)&&i!==10));x++);}(x>=p||t.src.charCodeAt(x)!==41)&&(u=!0),x++}if(u){if(typeof t.env.references>"u")return!1;if(x<p&&t.src.charCodeAt(x)===91?(o=x+1,x=t.md.helpers.parseLinkLabel(t,x),x>=0?n=t.src.slice(o,x++):x=g+1):x=g+1,n||(n=t.src.slice(c,g)),l=t.env.references[normalizeReference(n)],!l)return t.pos=d,!1;s=l.href,a=l.title}if(!e){t.pos=c,t.posMax=g;const C=t.push("link_open","a",1),T=[["href",s]];C.attrs=T,a&&T.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=x,t.posMax=p,!0}function image(t,e){let i,n,r,l,s,a,o,u,d="";const p=t.pos,c=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const g=t.pos+2,x=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(x<0)return!1;if(l=x+1,l<c&&t.src.charCodeAt(l)===40){for(l++;l<c&&(i=t.src.charCodeAt(l),!(!isSpace(i)&&i!==10));l++);if(l>=c)return!1;for(u=l,a=t.md.helpers.parseLinkDestination(t.src,l,t.posMax),a.ok&&(d=t.md.normalizeLink(a.str),t.md.validateLink(d)?l=a.pos:d=""),u=l;l<c&&(i=t.src.charCodeAt(l),!(!isSpace(i)&&i!==10));l++);if(a=t.md.helpers.parseLinkTitle(t.src,l,t.posMax),l<c&&u!==l&&a.ok)for(o=a.str,l=a.pos;l<c&&(i=t.src.charCodeAt(l),!(!isSpace(i)&&i!==10));l++);else o="";if(l>=c||t.src.charCodeAt(l)!==41)return t.pos=p,!1;l++}else{if(typeof t.env.references>"u")return!1;if(l<c&&t.src.charCodeAt(l)===91?(u=l+1,l=t.md.helpers.parseLinkLabel(t,l),l>=0?r=t.src.slice(u,l++):l=x+1):l=x+1,r||(r=t.src.slice(g,x)),s=t.env.references[normalizeReference(r)],!s)return t.pos=p,!1;d=s.href,o=s.title}if(!e){n=t.src.slice(g,x);const C=[];t.md.inline.parse(n,t.md,t.env,C);const T=t.push("image","img",0),A=[["src",d],["alt",""]];T.attrs=A,T.children=C,T.content=n,o&&A.push(["title",o])}return t.pos=l,t.posMax=c,!0}const EMAIL_RE=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,AUTOLINK_RE=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function autolink(t,e){let i=t.pos;if(t.src.charCodeAt(i)!==60)return!1;const n=t.pos,r=t.posMax;for(;;){if(++i>=r)return!1;const s=t.src.charCodeAt(i);if(s===60)return!1;if(s===62)break}const l=t.src.slice(n+1,i);if(AUTOLINK_RE.test(l)){const s=t.md.normalizeLink(l);if(!t.md.validateLink(s))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const o=t.push("text","",0);o.content=t.md.normalizeLinkText(l);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=l.length+2,!0}if(EMAIL_RE.test(l)){const s=t.md.normalizeLink("mailto:"+l);if(!t.md.validateLink(s))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const o=t.push("text","",0);o.content=t.md.normalizeLinkText(l);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=l.length+2,!0}return!1}function isLinkOpen(t){return/^<a[>\s]/i.test(t)}function isLinkClose(t){return/^<\/a\s*>/i.test(t)}function isLetter(t){const e=t|32;return e>=97&&e<=122}function html_inline(t,e){if(!t.md.options.html)return!1;const i=t.posMax,n=t.pos;if(t.src.charCodeAt(n)!==60||n+2>=i)return!1;const r=t.src.charCodeAt(n+1);if(r!==33&&r!==63&&r!==47&&!isLetter(r))return!1;const l=t.src.slice(n).match(HTML_TAG_RE);if(!l)return!1;if(!e){const s=t.push("html_inline","",0);s.content=l[0],isLinkOpen(s.content)&&t.linkLevel++,isLinkClose(s.content)&&t.linkLevel--}return t.pos+=l[0].length,!0}const DIGITAL_RE=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,NAMED_RE=/^&([a-z][a-z0-9]{1,31});/i;function entity(t,e){const i=t.pos,n=t.posMax;if(t.src.charCodeAt(i)!==38||i+1>=n)return!1;if(t.src.charCodeAt(i+1)===35){const l=t.src.slice(i).match(DIGITAL_RE);if(l){if(!e){const s=l[1][0].toLowerCase()==="x"?parseInt(l[1].slice(1),16):parseInt(l[1],10),a=t.push("text_special","",0);a.content=isValidEntityCode(s)?fromCodePoint(s):fromCodePoint(65533),a.markup=l[0],a.info="entity"}return t.pos+=l[0].length,!0}}else{const l=t.src.slice(i).match(NAMED_RE);if(l){const s=decodeHTML(l[0]);if(s!==l[0]){if(!e){const a=t.push("text_special","",0);a.content=s,a.markup=l[0],a.info="entity"}return t.pos+=l[0].length,!0}}}return!1}function processDelimiters(t){const e={},i=t.length;if(!i)return;let n=0,r=-2;const l=[];for(let s=0;s<i;s++){const a=t[s];if(l.push(0),(t[n].marker!==a.marker||r!==a.token-1)&&(n=s),r=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const o=e[a.marker][(a.open?3:0)+a.length%3];let u=n-l[n]-1,d=u;for(;u>o;u-=l[u]+1){const p=t[u];if(p.marker===a.marker&&p.open&&p.end<0){let c=!1;if((p.close||a.open)&&(p.length+a.length)%3===0&&(p.length%3!==0||a.length%3!==0)&&(c=!0),!c){const g=u>0&&!t[u-1].open?l[u-1]+1:0;l[s]=s-u+g,l[u]=g,a.open=!1,p.end=s,p.close=!1,d=-1,r=-2;break}}}d!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=d)}}function link_pairs(t){const e=t.tokens_meta,i=t.tokens_meta.length;processDelimiters(t.delimiters);for(let n=0;n<i;n++)e[n]&&e[n].delimiters&&processDelimiters(e[n].delimiters)}function fragments_join(t){let e,i,n=0;const r=t.tokens,l=t.tokens.length;for(e=i=0;e<l;e++)r[e].nesting<0&&n--,r[e].level=n,r[e].nesting>0&&n++,r[e].type==="text"&&e+1<l&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==i&&(r[i]=r[e]),i++);e!==i&&(r.length=i)}const _rules=[["text",text$1],["linkify",linkify],["newline",newline],["escape",escape$1],["backticks",backtick],["strikethrough",r_strikethrough.tokenize],["emphasis",r_emphasis.tokenize],["link",link],["image",image],["autolink",autolink],["html_inline",html_inline],["entity",entity]],_rules2=[["balance_pairs",link_pairs],["strikethrough",r_strikethrough.postProcess],["emphasis",r_emphasis.postProcess],["fragments_join",fragments_join]];function ParserInline(){this.ruler=new Ruler;for(let t=0;t<_rules.length;t++)this.ruler.push(_rules[t][0],_rules[t][1]);this.ruler2=new Ruler;for(let t=0;t<_rules2.length;t++)this.ruler2.push(_rules2[t][0],_rules2[t][1])}ParserInline.prototype.skipToken=function(t){const e=t.pos,i=this.ruler.getRules(""),n=i.length,r=t.md.options.maxNesting,l=t.cache;if(typeof l[e]<"u"){t.pos=l[e];return}let s=!1;if(t.level<r){for(let a=0;a<n;a++)if(t.level++,s=i[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,l[e]=t.pos};ParserInline.prototype.tokenize=function(t){const e=this.ruler.getRules(""),i=e.length,n=t.posMax,r=t.md.options.maxNesting;for(;t.pos<n;){const l=t.pos;let s=!1;if(t.level<r){for(let a=0;a<i;a++)if(s=e[a](t,!1),s){if(l>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=n)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};ParserInline.prototype.parse=function(t,e,i,n){const r=new this.State(t,e,i,n);this.tokenize(r);const l=this.ruler2.getRules(""),s=l.length;for(let a=0;a<s;a++)l[a](r)};ParserInline.prototype.State=StateInline;function reFactory(t){const e={};t=t||{},e.src_Any=Any.source,e.src_Cc=Cc.source,e.src_Z=Z.source,e.src_P=P.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const i="[><]";return e.src_pseudo_letter="(?:(?!"+i+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+i+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+i+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+i+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function assign(t){return Array.prototype.slice.call(arguments,1).forEach(function(i){i&&Object.keys(i).forEach(function(n){t[n]=i[n]})}),t}function _class(t){return Object.prototype.toString.call(t)}function isString(t){return _class(t)==="[object String]"}function isObject(t){return _class(t)==="[object Object]"}function isRegExp(t){return _class(t)==="[object RegExp]"}function isFunction(t){return _class(t)==="[object Function]"}function escapeRE(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const defaultOptions={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function isOptionsObj(t){return Object.keys(t||{}).reduce(function(e,i){return e||defaultOptions.hasOwnProperty(i)},!1)}const defaultSchemas={"http:":{validate:function(t,e,i){const n=t.slice(e);return i.re.http||(i.re.http=new RegExp("^\\/\\/"+i.re.src_auth+i.re.src_host_port_strict+i.re.src_path,"i")),i.re.http.test(n)?n.match(i.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,i){const n=t.slice(e);return i.re.no_http||(i.re.no_http=new RegExp("^"+i.re.src_auth+"(?:localhost|(?:(?:"+i.re.src_domain+")\\.)+"+i.re.src_domain_root+")"+i.re.src_port+i.re.src_host_terminator+i.re.src_path,"i")),i.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(i.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,i){const n=t.slice(e);return i.re.mailto||(i.re.mailto=new RegExp("^"+i.re.src_email_name+"@"+i.re.src_host_strict,"i")),i.re.mailto.test(n)?n.match(i.re.mailto)[0].length:0}}},tlds_2ch_src_re="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tlds_default="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function resetScanCache(t){t.__index__=-1,t.__text_cache__=""}function createValidator(t){return function(e,i){const n=e.slice(i);return t.test(n)?n.match(t)[0].length:0}}function createNormalizer(){return function(t,e){e.normalize(t)}}function compile(t){const e=t.re=reFactory(t.__opts__),i=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||i.push(tlds_2ch_src_re),i.push(e.src_xn),e.src_tlds=i.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");const r=[];t.__compiled__={};function l(a,o){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+o)}Object.keys(t.__schemas__).forEach(function(a){const o=t.__schemas__[a];if(o===null)return;const u={validate:null,link:null};if(t.__compiled__[a]=u,isObject(o)){isRegExp(o.validate)?u.validate=createValidator(o.validate):isFunction(o.validate)?u.validate=o.validate:l(a,o),isFunction(o.normalize)?u.normalize=o.normalize:o.normalize?l(a,o):u.normalize=createNormalizer();return}if(isString(o)){r.push(a);return}l(a,o)}),r.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:createNormalizer()};const s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(escapeRE).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),resetScanCache(t)}function Match(t,e){const i=t.__index__,n=t.__last_index__,r=t.__text_cache__.slice(i,n);this.schema=t.__schema__.toLowerCase(),this.index=i+e,this.lastIndex=n+e,this.raw=r,this.text=r,this.url=r}function createMatch(t,e){const i=new Match(t,e);return t.__compiled__[i.schema].normalize(i,t),i}function LinkifyIt(t,e){if(!(this instanceof LinkifyIt))return new LinkifyIt(t,e);e||isOptionsObj(t)&&(e=t,t={}),this.__opts__=assign({},defaultOptions,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=assign({},defaultSchemas,t),this.__compiled__={},this.__tlds__=tlds_default,this.__tlds_replaced__=!1,this.re={},compile(this)}LinkifyIt.prototype.add=function t(e,i){return this.__schemas__[e]=i,compile(this),this};LinkifyIt.prototype.set=function t(e){return this.__opts__=assign(this.__opts__,e),this};LinkifyIt.prototype.test=function t(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let i,n,r,l,s,a,o,u,d;if(this.re.schema_test.test(e)){for(o=this.re.schema_search,o.lastIndex=0;(i=o.exec(e))!==null;)if(l=this.testSchemaAt(e,i[2],o.lastIndex),l){this.__schema__=i[2],this.__index__=i.index+i[1].length,this.__last_index__=i.index+i[0].length+l;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=e.indexOf("@"),d>=0&&(r=e.match(this.re.email_fuzzy))!==null&&(s=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};LinkifyIt.prototype.pretest=function t(e){return this.re.pretest.test(e)};LinkifyIt.prototype.testSchemaAt=function t(e,i,n){return this.__compiled__[i.toLowerCase()]?this.__compiled__[i.toLowerCase()].validate(e,n,this):0};LinkifyIt.prototype.match=function t(e){const i=[];let n=0;this.__index__>=0&&this.__text_cache__===e&&(i.push(createMatch(this,n)),n=this.__last_index__);let r=n?e.slice(n):e;for(;this.test(r);)i.push(createMatch(this,n)),r=r.slice(this.__last_index__),n+=this.__last_index__;return i.length?i:null};LinkifyIt.prototype.matchAtStart=function t(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const i=this.re.schema_at_start.exec(e);if(!i)return null;const n=this.testSchemaAt(e,i[2],i[0].length);return n?(this.__schema__=i[2],this.__index__=i.index+i[1].length,this.__last_index__=i.index+i[0].length+n,createMatch(this,0)):null};LinkifyIt.prototype.tlds=function t(e,i){return e=Array.isArray(e)?e:[e],i?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,r,l){return n!==l[r-1]}).reverse(),compile(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,compile(this),this)};LinkifyIt.prototype.normalize=function t(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};LinkifyIt.prototype.onCompile=function t(){};const maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\0-\x7F]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(t){throw new RangeError(errors[t])}function map(t,e){const i=[];let n=t.length;for(;n--;)i[n]=e(t[n]);return i}function mapDomain(t,e){const i=t.split("@");let n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(regexSeparators,".");const r=t.split("."),l=map(r,e).join(".");return n+l}function ucs2decode(t){const e=[];let i=0;const n=t.length;for(;i<n;){const r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){const l=t.charCodeAt(i++);(l&64512)==56320?e.push(((r&1023)<<10)+(l&1023)+65536):(e.push(r),i--)}else e.push(r)}return e}const ucs2encode=t=>String.fromCodePoint(...t),basicToDigit=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:base},digitToBasic=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},adapt=function(t,e,i){let n=0;for(t=i?floor(t/damp):t>>1,t+=floor(t/e);t>baseMinusTMin*tMax>>1;n+=base)t=floor(t/baseMinusTMin);return floor(n+(baseMinusTMin+1)*t/(t+skew))},decode=function(t){const e=[],i=t.length;let n=0,r=initialN,l=initialBias,s=t.lastIndexOf(delimiter);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&error("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<i;){const o=n;for(let d=1,p=base;;p+=base){a>=i&&error("invalid-input");const c=basicToDigit(t.charCodeAt(a++));c>=base&&error("invalid-input"),c>floor((maxInt-n)/d)&&error("overflow"),n+=c*d;const g=p<=l?tMin:p>=l+tMax?tMax:p-l;if(c<g)break;const x=base-g;d>floor(maxInt/x)&&error("overflow"),d*=x}const u=e.length+1;l=adapt(n-o,u,o==0),floor(n/u)>maxInt-r&&error("overflow"),r+=floor(n/u),n%=u,e.splice(n++,0,r)}return String.fromCodePoint(...e)},encode=function(t){const e=[];t=ucs2decode(t);const i=t.length;let n=initialN,r=0,l=initialBias;for(const o of t)o<128&&e.push(stringFromCharCode(o));const s=e.length;let a=s;for(s&&e.push(delimiter);a<i;){let o=maxInt;for(const d of t)d>=n&&d<o&&(o=d);const u=a+1;o-n>floor((maxInt-r)/u)&&error("overflow"),r+=(o-n)*u,n=o;for(const d of t)if(d<n&&++r>maxInt&&error("overflow"),d===n){let p=r;for(let c=base;;c+=base){const g=c<=l?tMin:c>=l+tMax?tMax:c-l;if(p<g)break;const x=p-g,C=base-g;e.push(stringFromCharCode(digitToBasic(g+x%C,0))),p=floor(x/C)}e.push(stringFromCharCode(digitToBasic(p,0))),l=adapt(r,u,a===s),r=0,++a}++r,++n}return e.join("")},toUnicode=function(t){return mapDomain(t,function(e){return regexPunycode.test(e)?decode(e.slice(4).toLowerCase()):e})},toASCII=function(t){return mapDomain(t,function(e){return regexNonASCII.test(e)?"xn--"+encode(e):e})},punycode={version:"2.3.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII,toUnicode},cfg_default={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},cfg_zero={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},cfg_commonmark={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},config={default:cfg_default,zero:cfg_zero,commonmark:cfg_commonmark},BAD_PROTO_RE=/^(vbscript|javascript|file|data):/,GOOD_DATA_RE=/^data:image\/(gif|png|jpeg|webp);/;function validateLink(t){const e=t.trim().toLowerCase();return BAD_PROTO_RE.test(e)?GOOD_DATA_RE.test(e):!0}const RECODE_HOSTNAME_FOR=["http:","https:","mailto:"];function normalizeLink(t){const e=urlParse(t,!0);if(e.hostname&&(!e.protocol||RECODE_HOSTNAME_FOR.indexOf(e.protocol)>=0))try{e.hostname=punycode.toASCII(e.hostname)}catch{}return encode$1(format(e))}function normalizeLinkText(t){const e=urlParse(t,!0);if(e.hostname&&(!e.protocol||RECODE_HOSTNAME_FOR.indexOf(e.protocol)>=0))try{e.hostname=punycode.toUnicode(e.hostname)}catch{}return decode$1(format(e),decode$1.defaultChars+"%")}function MarkdownIt(t,e){if(!(this instanceof MarkdownIt))return new MarkdownIt(t,e);e||isString$1(t)||(e=t||{},t="default"),this.inline=new ParserInline,this.block=new ParserBlock,this.core=new Core,this.renderer=new Renderer,this.linkify=new LinkifyIt,this.validateLink=validateLink,this.normalizeLink=normalizeLink,this.normalizeLinkText=normalizeLinkText,this.utils=utils,this.helpers=assign$1({},helpers),this.options={},this.configure(t),e&&this.set(e)}MarkdownIt.prototype.set=function(t){return assign$1(this.options,t),this};MarkdownIt.prototype.configure=function(t){const e=this;if(isString$1(t)){const i=t;if(t=config[i],!t)throw new Error('Wrong `markdown-it` preset "'+i+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(i){t.components[i].rules&&e[i].ruler.enableOnly(t.components[i].rules),t.components[i].rules2&&e[i].ruler2.enableOnly(t.components[i].rules2)}),this};MarkdownIt.prototype.enable=function(t,e){let i=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(r){i=i.concat(this[r].ruler.enable(t,!0))},this),i=i.concat(this.inline.ruler2.enable(t,!0));const n=t.filter(function(r){return i.indexOf(r)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};MarkdownIt.prototype.disable=function(t,e){let i=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(r){i=i.concat(this[r].ruler.disable(t,!0))},this),i=i.concat(this.inline.ruler2.disable(t,!0));const n=t.filter(function(r){return i.indexOf(r)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};MarkdownIt.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};MarkdownIt.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const i=new this.core.State(t,this,e);return this.core.process(i),i.tokens};MarkdownIt.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};MarkdownIt.prototype.parseInline=function(t,e){const i=new this.core.State(t,this,e);return i.inlineMode=!0,this.core.process(i),i.tokens};MarkdownIt.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};HighlightJS.registerLanguage("sql",sql);HighlightJS.registerLanguage("bash",bash);function replaceAttr(t,e){t.attrs.push(["onclick","window.dispatchEvent(new CustomEvent('open_link', {detail: {event: event}}))"])}const replace=(t,e)=>{t.core.ruler.after("inline","replace-link",function(i){return i.tokens.forEach(function(n){n.type==="inline"&&n.children&&n.children.forEach(function(r){r.type==="link_open"&&replaceAttr(r,i.env)})}),!1})},markdownRender=MarkdownIt({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,sourceMap:!0,highlight:function(t,e){if(e&&HighlightJS.getLanguage(e))try{return'<pre><code class="hljs">'+HighlightJS.highlight(t,{language:e,ignoreIllegals:!0}).value+"</code></pre>"}catch{}return'<pre><code class="hljs">'+markdownRender.utils.escapeHtml(t)+"</code></pre>"}}).use(replace);function mxCellRenderer(){}mxCellRenderer.defaultShapes=new Object;mxCellRenderer.prototype.defaultEdgeShape=mxConnector;mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape$1;mxCellRenderer.prototype.defaultTextShape=mxText$1;mxCellRenderer.prototype.legacyControlPosition=!0;mxCellRenderer.prototype.legacySpacing=!0;mxCellRenderer.prototype.antiAlias=!0;mxCellRenderer.prototype.minSvgStrokeWidth=1;mxCellRenderer.prototype.forceControlClickHandler=!1;mxCellRenderer.registerShape=function(t,e){mxCellRenderer.defaultShapes[t]=e};mxCellRenderer.registerShape(mxConstants$1.SHAPE_RECTANGLE,mxRectangleShape$1);mxCellRenderer.registerShape(mxConstants$1.SHAPE_ELLIPSE,mxEllipse);mxCellRenderer.registerShape(mxConstants$1.SHAPE_RHOMBUS,mxRhombus);mxCellRenderer.registerShape(mxConstants$1.SHAPE_CYLINDER,mxCylinder);mxCellRenderer.registerShape(mxConstants$1.SHAPE_CONNECTOR,mxConnector);mxCellRenderer.registerShape(mxConstants$1.SHAPE_ACTOR,mxActor);mxCellRenderer.registerShape(mxConstants$1.SHAPE_TRIANGLE,mxTriangle);mxCellRenderer.registerShape(mxConstants$1.SHAPE_HEXAGON,mxHexagon);mxCellRenderer.registerShape(mxConstants$1.SHAPE_CLOUD,mxCloud);mxCellRenderer.registerShape(mxConstants$1.SHAPE_LINE,mxLine);mxCellRenderer.registerShape(mxConstants$1.SHAPE_ARROW,mxArrow);mxCellRenderer.registerShape(mxConstants$1.SHAPE_ARROW_CONNECTOR,mxArrowConnector);mxCellRenderer.registerShape(mxConstants$1.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse);mxCellRenderer.registerShape(mxConstants$1.SHAPE_SWIMLANE,mxSwimlane);mxCellRenderer.registerShape(mxConstants$1.SHAPE_IMAGE,mxImageShape$1);mxCellRenderer.registerShape(mxConstants$1.SHAPE_LABEL,mxLabel$1);mxCellRenderer.prototype.initializeShape=function(t){t.shape.dialect=t.view.graph.dialect,this.configureShape(t),t.shape.init(t.view.getDrawPane())};mxCellRenderer.prototype.createShape=function(t){var e=null;if(t.style!=null){var i=t.style[mxConstants$1.STYLE_SHAPE],n=mxCellRenderer.defaultShapes[i]==null?mxStencilRegistry$1.getStencil(i):null;if(n!=null)e=new mxShape(n);else{var r=this.getShapeConstructor(t);e=new r}}return e};mxCellRenderer.prototype.createIndicatorShape=function(t){t.shape.indicatorShape=this.getShape(t.view.graph.getIndicatorShape(t))};mxCellRenderer.prototype.getShape=function(t){return t!=null?mxCellRenderer.defaultShapes[t]:null};mxCellRenderer.prototype.getShapeConstructor=function(t){var e=this.getShape(t.style[mxConstants$1.STYLE_SHAPE]);return e==null&&(e=t.view.graph.getModel().isEdge(t.cell)?this.defaultEdgeShape:this.defaultVertexShape),e};mxCellRenderer.prototype.configureShape=function(t){t.shape.apply(t),t.shape.image=t.view.graph.getImage(t),t.shape.indicatorColor=t.view.graph.getIndicatorColor(t),t.shape.indicatorStrokeColor=t.style[mxConstants$1.STYLE_INDICATOR_STROKECOLOR],t.shape.indicatorGradientColor=t.view.graph.getIndicatorGradientColor(t),t.shape.indicatorDirection=t.style[mxConstants$1.STYLE_INDICATOR_DIRECTION],t.shape.indicatorImage=t.view.graph.getIndicatorImage(t),this.postConfigureShape(t)};mxCellRenderer.prototype.postConfigureShape=function(t){t.shape!=null&&(this.resolveColor(t,"indicatorGradientColor",mxConstants$1.STYLE_GRADIENTCOLOR),this.resolveColor(t,"indicatorColor",mxConstants$1.STYLE_FILLCOLOR),this.resolveColor(t,"gradient",mxConstants$1.STYLE_GRADIENTCOLOR),this.resolveColor(t,"stroke",mxConstants$1.STYLE_STROKECOLOR),this.resolveColor(t,"fill",mxConstants$1.STYLE_FILLCOLOR))};mxCellRenderer.prototype.checkPlaceholderStyles=function(t){if(t.style!=null){for(var e=["inherit","swimlane","indicated"],i=[mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.STYLE_FONTCOLOR],n=0;n<i.length;n++)if(mxUtils$1.indexOf(e,t.style[i[n]])>=0)return!0}return!1};mxCellRenderer.prototype.resolveColor=function(t,e,i){var n=i==mxConstants$1.STYLE_FONTCOLOR?t.text:t.shape;if(n!=null){var r=t.view.graph,l=n[e],s=null;if(l=="inherit"?s=r.model.getParent(t.cell):l=="swimlane"?(n[e]=i==mxConstants$1.STYLE_STROKECOLOR||i==mxConstants$1.STYLE_FONTCOLOR?"#000000":"#ffffff",r.model.getTerminal(t.cell,!1)!=null?s=r.model.getTerminal(t.cell,!1):s=t.cell,s=r.getSwimlane(s),i=r.swimlaneIndicatorColorAttribute):l=="indicated"&&t.shape!=null?n[e]=t.shape.indicatorColor:i!=mxConstants$1.STYLE_FILLCOLOR&&l==mxConstants$1.STYLE_FILLCOLOR&&t.shape!=null?n[e]=t.style[mxConstants$1.STYLE_FILLCOLOR]:i!=mxConstants$1.STYLE_STROKECOLOR&&l==mxConstants$1.STYLE_STROKECOLOR&&t.shape!=null&&(n[e]=t.style[mxConstants$1.STYLE_STROKECOLOR]),s!=null){var a=r.getView().getState(s);if(n[e]=null,a!=null){var o=i==mxConstants$1.STYLE_FONTCOLOR?a.text:a.shape;o!=null&&e!="indicatorColor"?n[e]=o[e]:n[e]=a.style[i]}}}};mxCellRenderer.prototype.getLabelValue=function(t){return t.view.graph.getLabel(t.cell)};mxCellRenderer.prototype.createTextShape=function(t,e,i){var n=t.view.graph,r=new this.defaultTextShape(e,new mxRectangle$1,t.style[mxConstants$1.STYLE_ALIGN]||mxConstants$1.ALIGN_CENTER,n.getVerticalAlign(t),t.style[mxConstants$1.STYLE_FONTCOLOR],t.style[mxConstants$1.STYLE_FONTFAMILY],t.style[mxConstants$1.STYLE_FONTSIZE],t.style[mxConstants$1.STYLE_FONTSTYLE],t.style[mxConstants$1.STYLE_SPACING],t.style[mxConstants$1.STYLE_SPACING_TOP],t.style[mxConstants$1.STYLE_SPACING_RIGHT],t.style[mxConstants$1.STYLE_SPACING_BOTTOM],t.style[mxConstants$1.STYLE_SPACING_LEFT],t.style[mxConstants$1.STYLE_HORIZONTAL],t.style[mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR],t.style[mxConstants$1.STYLE_LABEL_BORDERCOLOR],n.isWrapping(t.cell)&&n.isHtmlLabel(t.cell),n.isLabelClipped(t.cell),t.style[mxConstants$1.STYLE_OVERFLOW],t.style[mxConstants$1.STYLE_LABEL_PADDING],mxUtils$1.getValue(t.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION));return r.opacity=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_TEXT_OPACITY,100),r.dialect=i,r.style=t.style,r.state=t,r.markdown=markdownRender.render(e),r};mxCellRenderer.prototype.createLabel=function(t,e){var i=t.view.graph;if(t.style[mxConstants$1.STYLE_FONTSIZE]>0||t.style[mxConstants$1.STYLE_FONTSIZE]==null){var n=i.isHtmlLabel(t.cell)||e!=null&&mxUtils$1.isNode(e),r=n?i.isMarkdown(t.cell)?mxConstants$1.DIALECT_MARKDOWN:mxConstants$1.DIALECT_STRICTHTML:t.view.graph.dialect;t.text=this.createTextShape(t,e,r),this.initializeLabel(t,t.text),this.configureShape(t);var l=!1,s=function(a){var o=t;if(mxClient$1.IS_TOUCH||l){var u=mxEvent$1.getClientX(a),d=mxEvent$1.getClientY(a),p=mxUtils$1.convertPoint(i.container,u,d);o=i.view.getState(i.getCellAt(p.x,p.y))}return o};mxEvent$1.addGestureListeners(t.text.node,mxUtils$1.bind(this,function(a){this.isLabelEvent(t,a)&&(i.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(a,t)),l=i.dialect!=mxConstants$1.DIALECT_SVG&&mxEvent$1.getSource(a).nodeName=="IMG")}),mxUtils$1.bind(this,function(a){this.isLabelEvent(t,a)&&i.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(a,s(a)))}),mxUtils$1.bind(this,function(a){this.isLabelEvent(t,a)&&(i.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(a,s(a))),l=!1)})),i.nativeDblClickEnabled&&mxEvent$1.addListener(t.text.node,"dblclick",mxUtils$1.bind(this,function(a){this.isLabelEvent(t,a)&&(i.dblClick(a,t.cell),mxEvent$1.consume(a))}))}};mxCellRenderer.prototype.initializeLabel=function(t,e){mxClient$1.IS_SVG&&mxClient$1.NO_FO&&e.dialect!=mxConstants$1.DIALECT_SVG?e.init(t.view.graph.container):e.init(t.view.getDrawPane())};mxCellRenderer.prototype.createCellOverlays=function(t){var e=t.view.graph,i=e.getCellOverlays(t.cell),n=null;if(i!=null){n=new mxDictionary;for(var r=0;r<i.length;r++){var l=t.overlays!=null?t.overlays.remove(i[r]):null;if(l==null){var s=new mxImageShape$1(new mxRectangle$1,i[r].image.src);s.dialect=t.view.graph.dialect,s.preserveImageAspect=!1,s.overlay=i[r],this.initializeOverlay(t,s),this.installCellOverlayListeners(t,i[r],s),i[r].cursor!=null&&(s.node.style.cursor=i[r].cursor),n.put(i[r],s)}else n.put(i[r],l)}}t.overlays!=null&&t.overlays.visit(function(a,o){o.destroy()}),t.overlays=n};mxCellRenderer.prototype.initializeOverlay=function(t,e){e.init(t.view.getOverlayPane())};mxCellRenderer.prototype.installCellOverlayListeners=function(t,e,i){var n=t.view.graph;mxEvent$1.addListener(i.node,"click",function(r){n.isEditing()&&n.stopEditing(!n.isInvokesStopCellEditing()),e.fireEvent(new mxEventObject(mxEvent$1.CLICK,"event",r,"cell",t.cell))}),mxEvent$1.addGestureListeners(i.node,function(r){mxEvent$1.consume(r)},function(r){n.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(r,t))}),mxClient$1.IS_TOUCH&&mxEvent$1.addListener(i.node,"touchend",function(r){e.fireEvent(new mxEventObject(mxEvent$1.CLICK,"event",r,"cell",t.cell))})};mxCellRenderer.prototype.createControl=function(t){var e=t.view.graph,i=e.getFoldingImage(t);if(e.foldingEnabled&&i!=null){if(t.control==null){var n=new mxRectangle$1(0,0,i.width,i.height);t.control=new mxImageShape$1(n,i.src),t.control.preserveImageAspect=!1,t.control.dialect=e.dialect,this.initControl(t,t.control,!0,this.createControlClickHandler(t))}}else t.control!=null&&(t.control.destroy(),t.control=null)};mxCellRenderer.prototype.createControlClickHandler=function(t){var e=t.view.graph;return mxUtils$1.bind(this,function(i){if(this.forceControlClickHandler||e.isEnabled()){var n=!e.isCellCollapsed(t.cell);e.foldCells(n,!1,[t.cell],null,i),mxEvent$1.consume(i)}})};mxCellRenderer.prototype.initControl=function(t,e,i,n){var r=t.view.graph,l=r.isHtmlLabel(t.cell)&&mxClient$1.NO_FO&&r.dialect==mxConstants$1.DIALECT_SVG;l?(e.dialect=mxConstants$1.DIALECT_PREFERHTML,e.init(r.container),e.node.style.zIndex=1):e.init(t.view.getOverlayPane());var s=e.innerNode||e.node;if(n!=null&&!mxClient$1.IS_IOS&&(r.isEnabled()&&(s.style.cursor="pointer"),mxEvent$1.addListener(s,"click",n)),i){var a=null;mxEvent$1.addGestureListeners(s,function(o){a=new mxPoint$1(mxEvent$1.getClientX(o),mxEvent$1.getClientY(o)),r.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(o,t)),mxEvent$1.consume(o)},function(o){r.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(o,t))},function(o){r.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(o,t)),mxEvent$1.consume(o)}),n!=null&&mxClient$1.IS_IOS&&s.addEventListener("touchend",function(o){if(a!=null){var u=r.tolerance;Math.abs(a.x-mxEvent$1.getClientX(o))<u&&Math.abs(a.y-mxEvent$1.getClientY(o))<u&&(n.call(n,o),mxEvent$1.consume(o))}},!0)}return s};mxCellRenderer.prototype.isShapeEvent=function(t,e){return!0};mxCellRenderer.prototype.isLabelEvent=function(t,e){return!0};mxCellRenderer.prototype.installListeners=function(t){var e=t.view.graph,i=function(n){var r=t;if(e.dialect!=mxConstants$1.DIALECT_SVG&&mxEvent$1.getSource(n).nodeName=="IMG"||mxClient$1.IS_TOUCH){var l=mxEvent$1.getClientX(n),s=mxEvent$1.getClientY(n),a=mxUtils$1.convertPoint(e.container,l,s);r=e.view.getState(e.getCellAt(a.x,a.y))}return r};mxEvent$1.addGestureListeners(t.shape.node,mxUtils$1.bind(this,function(n){this.isShapeEvent(t,n)&&e.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(n,t))}),mxUtils$1.bind(this,function(n){this.isShapeEvent(t,n)&&e.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(n,i(n)))}),mxUtils$1.bind(this,function(n){this.isShapeEvent(t,n)&&e.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(n,i(n)))})),e.nativeDblClickEnabled&&mxEvent$1.addListener(t.shape.node,"dblclick",mxUtils$1.bind(this,function(n){this.isShapeEvent(t,n)&&(e.dblClick(n,t.cell),mxEvent$1.consume(n))}))};mxCellRenderer.prototype.redrawLabel=function(t,e){var i=t.view.graph,n=this.getLabelValue(t),r=i.isWrapping(t.cell),l=i.isLabelClipped(t.cell),s=t.view.graph.isHtmlLabel(t.cell)||n!=null&&mxUtils$1.isNode(n),a=s?i.isMarkdown(t.cell)?mxConstants$1.DIALECT_MARKDOWN:mxConstants$1.DIALECT_STRICTHTML:t.view.graph.dialect,o=t.style[mxConstants$1.STYLE_OVERFLOW]||"visible";if(t.text!=null&&(t.text.wrap!=r||t.text.clipped!=l||t.text.overflow!=o||t.text.dialect!=a)&&(t.text.destroy(),t.text=null),t.text==null&&n!=null&&(mxUtils$1.isNode(n)||n.length>0)?this.createLabel(t,n):t.text!=null&&(n==null||n.length==0)&&(t.text.destroy(),t.text=null),t.text!=null){e&&(t.text.lastValue!=null&&this.isTextShapeInvalid(t,t.text)&&(t.text.lastValue=null),t.text.resetStyles(),t.text.apply(t),this.configureShape(t),t.text.valign=i.getVerticalAlign(t));var u=this.getLabelBounds(t),d=this.getTextScale(t);if(this.resolveColor(t,"color",mxConstants$1.STYLE_FONTCOLOR),e||t.text.value!=n||t.text.isWrapping!=r||t.text.overflow!=o||t.text.isClipping!=l||t.text.scale!=d||t.text.dialect!=a||t.text.bounds==null||!t.text.bounds.equals(u)){t.text.dialect=a,t.text.value=n,t.text.bounds=u,t.text.scale=d,t.text.wrap=r,t.text.clipped=l,t.text.overflow=o;var p=t.text.node.style.visibility;this.redrawLabelShape(t.text),t.text.node.style.visibility=p}}};mxCellRenderer.prototype.isTextShapeInvalid=function(t,e){function i(n,r,l){var s=!1;return r=="spacingTop"||r=="spacingRight"||r=="spacingBottom"||r=="spacingLeft"?s=parseFloat(e[n])-parseFloat(e.spacing)!=(t.style[r]||l):s=e[n]!=(t.style[r]!=null?t.style[r]:l),s}return i("fontStyle",mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.DEFAULT_FONTSTYLE)||i("family",mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY)||i("size",mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE)||i("color",mxConstants$1.STYLE_FONTCOLOR,"black")||i("align",mxConstants$1.STYLE_ALIGN,"")||i("valign",mxConstants$1.STYLE_VERTICAL_ALIGN,"")||i("spacing",mxConstants$1.STYLE_SPACING,2)||i("spacingTop",mxConstants$1.STYLE_SPACING_TOP,0)||i("spacingRight",mxConstants$1.STYLE_SPACING_RIGHT,0)||i("spacingBottom",mxConstants$1.STYLE_SPACING_BOTTOM,0)||i("spacingLeft",mxConstants$1.STYLE_SPACING_LEFT,0)||i("horizontal",mxConstants$1.STYLE_HORIZONTAL,!0)||i("background",mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR)||i("border",mxConstants$1.STYLE_LABEL_BORDERCOLOR)||i("opacity",mxConstants$1.STYLE_TEXT_OPACITY,100)||i("textDirection",mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION)};mxCellRenderer.prototype.redrawLabelShape=function(t){t.redraw()};mxCellRenderer.prototype.getTextScale=function(t){return t.view.scale};mxCellRenderer.prototype.getLabelBounds=function(t,e,i,n){e=e??t.text;var r=new mxRectangle$1(t.absoluteOffset.x,t.absoluteOffset.y),l=t.view.graph.getModel().isEdge(t.cell),s=t.view.scale;if(l){var a=e.getSpacing(null,i);r.x+=a.x*s,r.y+=a.y*s;var o=t.view.graph.getCellGeometry(t.cell);o!=null&&(r.width=Math.max(0,o.width*s),r.height=Math.max(0,o.height*s))}else{if(e.isPaintBoundsInverted()&&!n){var u=r.x;r.x=r.y,r.y=u}r.x+=t.x,r.y+=t.y,r.width=Math.max(1,t.width),r.height=Math.max(1,t.height)}if(e.isPaintBoundsInverted()&&!n){var d=(t.width-t.height)/2;r.x+=d,r.y-=d;var u=r.width;r.width=r.height,r.height=u}if(t.shape!=null){var p=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),c=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);p==mxConstants$1.ALIGN_CENTER&&c==mxConstants$1.ALIGN_MIDDLE&&(r=t.shape.getLabelBounds(r))}var g=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_WIDTH,null);return g!=null&&(r.width=parseFloat(g)*s),l||this.rotateLabelBounds(t,r,e,i,n),r};mxCellRenderer.prototype.rotateLabelBounds=function(t,e,i,n,r){var l=n??i.margin;if(e.y-=l.y*e.height,e.x-=l.x*e.width,!this.legacySpacing||t.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&t.style[mxConstants$1.STYLE_OVERFLOW]!="width"&&(t.style[mxConstants$1.STYLE_OVERFLOW]!="block"||t.style[mxConstants$1.STYLE_BLOCK_SPACING]=="1")){var s=t.view.scale,a=i.getSpacing(t.style[mxConstants$1.STYLE_BLOCK_SPACING]=="1",l);e.x+=a.x*s,e.y+=a.y*s;var o=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),u=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE),d=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_WIDTH,null);e.width=Math.max(0,e.width-(o==mxConstants$1.ALIGN_CENTER&&d==null?i.spacingLeft*s+i.spacingRight*s:0)),e.height=Math.max(0,e.height-(u==mxConstants$1.ALIGN_MIDDLE?i.spacingTop*s+i.spacingBottom*s:0))}var p=r?0:i.getTextRotation();if(p!=0&&t!=null&&t.view.graph.model.isVertex(t.cell)){var c=t.getCenterX(),g=t.getCenterY();if(e.x!=c||e.y!=g){var x=p*(Math.PI/180),C=mxUtils$1.getRotatedPoint(new mxPoint$1(e.x,e.y),Math.cos(x),Math.sin(x),new mxPoint$1(c,g));e.x=C.x,e.y=C.y}}};mxCellRenderer.prototype.redrawCellOverlays=function(t,e){if(this.createCellOverlays(t),t.overlays!=null){var i=mxUtils$1.mod(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION,0),90),n=mxUtils$1.toRadians(i),r=Math.cos(n),l=Math.sin(n);t.overlays.visit(function(s,a){var o=a.overlay.getBounds(t);if(!t.view.graph.getModel().isEdge(t.cell)&&t.shape!=null&&i!=0){var u=o.getCenterX(),d=o.getCenterY(),p=mxUtils$1.getRotatedPoint(new mxPoint$1(u,d),r,l,new mxPoint$1(t.getCenterX(),t.getCenterY()));u=p.x,d=p.y,o.x=Math.round(u-o.width/2),o.y=Math.round(d-o.height/2)}(e||a.bounds==null||a.scale!=t.view.scale||!a.bounds.equals(o))&&(a.bounds=o,a.scale=t.view.scale,a.redraw())})}};mxCellRenderer.prototype.redrawControl=function(t,e){var i=t.view.graph.getFoldingImage(t);if(t.control!=null&&i!=null){var n=this.getControlBounds(t,i.width,i.height),r=this.legacyControlPosition?mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION,0):t.shape.getTextRotation(),l=t.view.scale;(e||t.control.scale!=l||!t.control.bounds.equals(n)||t.control.rotation!=r)&&(t.control.rotation=r,t.control.bounds=n,t.control.scale=l,t.control.redraw())}};mxCellRenderer.prototype.getControlBounds=function(t,e,i){if(t.control!=null){var n=t.view.scale,r=t.getCenterX(),l=t.getCenterY();if(!t.view.graph.getModel().isEdge(t.cell)&&(r=t.x+e*n,l=t.y+i*n,t.shape!=null)){var s=t.shape.getShapeRotation();if(this.legacyControlPosition)s=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION,0);else if(t.shape.isPaintBoundsInverted()){var a=(t.width-t.height)/2;r+=a,l-=a}if(s!=0){var o=mxUtils$1.toRadians(s),u=Math.cos(o),d=Math.sin(o),p=mxUtils$1.getRotatedPoint(new mxPoint$1(r,l),u,d,new mxPoint$1(t.getCenterX(),t.getCenterY()));r=p.x,l=p.y}}return t.view.graph.getModel().isEdge(t.cell)?new mxRectangle$1(Math.round(r-e/2*n),Math.round(l-i/2*n),Math.round(e*n),Math.round(i*n)):new mxRectangle$1(Math.round(r-e/2*n),Math.round(l-i/2*n),Math.round(e*n),Math.round(i*n))}return null};mxCellRenderer.prototype.insertStateAfter=function(t,e,i){for(var n=this.getShapesForState(t),r=0;r<n.length;r++)if(n[r]!=null&&n[r].node!=null){var l=n[r].node.parentNode!=t.view.getDrawPane()&&n[r].node.parentNode!=t.view.getOverlayPane(),s=l?i:e;if(s!=null&&s.nextSibling!=n[r].node)s.nextSibling==null?s.parentNode.appendChild(n[r].node):s.parentNode.insertBefore(n[r].node,s.nextSibling);else if(s==null)if(n[r].node.parentNode==t.view.graph.container){for(var a=t.view.canvas;a!=null&&a.parentNode!=t.view.graph.container;)a=a.parentNode;a!=null&&a.nextSibling!=null?a.nextSibling!=n[r].node&&n[r].node.parentNode.insertBefore(n[r].node,a.nextSibling):n[r].node.parentNode.appendChild(n[r].node)}else n[r].node.parentNode!=null&&n[r].node.parentNode.firstChild!=null&&n[r].node.parentNode.firstChild!=n[r].node&&n[r].node.parentNode.insertBefore(n[r].node,n[r].node.parentNode.firstChild);l?i=n[r].node:e=n[r].node}return[e,i]};mxCellRenderer.prototype.getShapesForState=function(t){return[t.shape,t.text,t.control]};mxCellRenderer.prototype.redraw=function(t,e,i){var n=this.redrawShape(t,e,i);t.shape!=null&&(i==null||i)&&(this.redrawLabel(t,n),this.redrawCellOverlays(t,n),this.redrawControl(t,n))};mxCellRenderer.prototype.redrawShape=function(t,e,i){var n=t.view.graph.model,r=!1;return t.shape!=null&&t.shape.style!=null&&t.style!=null&&t.shape.style[mxConstants$1.STYLE_SHAPE]!=t.style[mxConstants$1.STYLE_SHAPE]&&(t.shape.destroy(),t.shape=null),t.shape==null&&t.view.graph.container!=null&&t.cell!=t.view.currentRoot&&(n.isVertex(t.cell)||n.isEdge(t.cell))?(t.shape=this.createShape(t),t.shape!=null&&(t.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,t.shape.antiAlias=this.antiAlias,this.createIndicatorShape(t),this.initializeShape(t),this.createCellOverlays(t),this.installListeners(t),t.view.graph.selectionCellsHandler.updateHandler(t))):!e&&t.shape!=null&&(!mxUtils$1.equalEntries(t.shape.style,t.style)||this.checkPlaceholderStyles(t))&&(t.shape.resetStyles(),this.configureShape(t),t.view.graph.selectionCellsHandler.updateHandler(t),e=!0),t.shape!=null&&t.shape.indicatorShape!=this.getShape(t.view.graph.getIndicatorShape(t))&&(t.shape.indicator!=null&&(t.shape.indicator.destroy(),t.shape.indicator=null),this.createIndicatorShape(t),t.shape.indicatorShape!=null&&(t.shape.indicator=new t.shape.indicatorShape,t.shape.indicator.dialect=t.shape.dialect,t.shape.indicator.init(t.node),e=!0)),t.shape!=null&&(this.createControl(t),(e||this.isShapeInvalid(t,t.shape))&&(t.absolutePoints!=null?(t.shape.points=t.absolutePoints.slice(),t.shape.bounds=null):(t.shape.points=null,t.shape.bounds=new mxRectangle$1(t.x,t.y,t.width,t.height)),t.shape.scale=t.view.scale,(i==null||i)&&this.doRedrawShape(t),r=!0)),r};mxCellRenderer.prototype.doRedrawShape=function(t){t.shape.redraw()};mxCellRenderer.prototype.isShapeInvalid=function(t,e){return e.bounds==null||e.scale!=t.view.scale||t.absolutePoints==null&&!e.bounds.equals(t)||t.absolutePoints!=null&&!mxUtils$1.equalPoints(e.points,t.absolutePoints)};mxCellRenderer.prototype.destroy=function(t){t.shape!=null&&(t.text!=null&&(t.text.destroy(),t.text=null),t.overlays!=null&&(t.overlays.visit(function(e,i){i.destroy()}),t.overlays=null),t.control!=null&&(t.control.destroy(),t.control=null),t.shape.destroy(),t.shape=null)};function mxCellState$1(t,e,i){this.view=t,this.cell=e,this.style=i??{},this.origin=new mxPoint$1,this.absoluteOffset=new mxPoint$1}mxCellState$1.prototype=new mxRectangle$1;mxCellState$1.prototype.constructor=mxCellState$1;mxCellState$1.prototype.view=null;mxCellState$1.prototype.cell=null;mxCellState$1.prototype.style=null;mxCellState$1.prototype.invalidStyle=!1;mxCellState$1.prototype.invalid=!0;mxCellState$1.prototype.origin=null;mxCellState$1.prototype.absolutePoints=null;mxCellState$1.prototype.absoluteOffset=null;mxCellState$1.prototype.visibleSourceState=null;mxCellState$1.prototype.visibleTargetState=null;mxCellState$1.prototype.terminalDistance=0;mxCellState$1.prototype.length=0;mxCellState$1.prototype.segments=null;mxCellState$1.prototype.shape=null;mxCellState$1.prototype.text=null;mxCellState$1.prototype.unscaledWidth=null;mxCellState$1.prototype.unscaledHeight=null;mxCellState$1.prototype.getPerimeterBounds=function(t,e){if(t=t||0,e=e??new mxRectangle$1(this.x,this.y,this.width,this.height),this.shape!=null&&this.shape.stencil!=null&&this.shape.stencil.aspect=="fixed"){var i=this.shape.stencil.computeAspect(this.style,e.x,e.y,e.width,e.height);e.x=i.x,e.y=i.y,e.width=this.shape.stencil.w0*i.width,e.height=this.shape.stencil.h0*i.height}return t!=0&&e.grow(t),e};mxCellState$1.prototype.setAbsoluteTerminalPoint=function(t,e){e?(this.absolutePoints==null&&(this.absolutePoints=[]),this.absolutePoints.length==0?this.absolutePoints.push(t):this.absolutePoints[0]=t):this.absolutePoints==null?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(t)):this.absolutePoints.length==1?this.absolutePoints.push(t):this.absolutePoints[this.absolutePoints.length-1]=t};mxCellState$1.prototype.setCursor=function(t){this.shape!=null&&this.shape.setCursor(t),this.text!=null&&this.text.setCursor(t)};mxCellState$1.prototype.isFloatingTerminalPoint=function(t){var e=this.getVisibleTerminalState(t);if(e==null)return!1;var i=this.view.graph.getConnectionConstraint(this,e,t);return i==null||i.point==null};mxCellState$1.prototype.getVisibleTerminal=function(t){var e=this.getVisibleTerminalState(t);return e!=null?e.cell:null};mxCellState$1.prototype.getVisibleTerminalState=function(t){return t?this.visibleSourceState:this.visibleTargetState};mxCellState$1.prototype.setVisibleTerminalState=function(t,e){e?this.visibleSourceState=t:this.visibleTargetState=t};mxCellState$1.prototype.getCellBounds=function(){return this.cellBounds};mxCellState$1.prototype.getPaintBounds=function(){return this.paintBounds};mxCellState$1.prototype.updateCachedBounds=function(){var t=this.view.translate,e=this.view.scale;this.cellBounds=new mxRectangle$1(this.x/e-t.x,this.y/e-t.y,this.width/e,this.height/e),this.paintBounds=mxRectangle$1.fromRectangle(this.cellBounds),this.shape!=null&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()};mxCellState$1.prototype.setState=function(t){this.view=t.view,this.cell=t.cell,this.style=t.style,this.absolutePoints=t.absolutePoints,this.origin=t.origin,this.absoluteOffset=t.absoluteOffset,this.boundingBox=t.boundingBox,this.terminalDistance=t.terminalDistance,this.segments=t.segments,this.length=t.length,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.unscaledWidth=t.unscaledWidth,this.unscaledHeight=t.unscaledHeight};mxCellState$1.prototype.clone=function(){var t=new mxCellState$1(this.view,this.cell,this.style!=null?mxUtils$1.clone(this.style):null);if(this.absolutePoints!=null){t.absolutePoints=[];for(var e=0;e<this.absolutePoints.length;e++)t.absolutePoints[e]=this.absolutePoints[e].clone()}return this.origin!=null&&(t.origin=this.origin.clone()),this.absoluteOffset!=null&&(t.absoluteOffset=this.absoluteOffset.clone()),this.boundingBox!=null&&(t.boundingBox=this.boundingBox.clone()),t.terminalDistance=this.terminalDistance,t.segments=this.segments,t.length=this.length,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.unscaledWidth=this.unscaledWidth,t.unscaledHeight=this.unscaledHeight,t};mxCellState$1.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)};var mxStyleRegistry$1={values:[],putValue:function(t,e){mxStyleRegistry$1.values[t]=e},getValue:function(t){return mxStyleRegistry$1.values[t]},getName:function(t){for(var e in mxStyleRegistry$1.values)if(mxStyleRegistry$1.values[e]==t)return e;return null}};mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_ELBOW,mxEdgeStyle$1.ElbowConnector);mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle$1.EntityRelation);mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_LOOP,mxEdgeStyle$1.Loop);mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_SIDETOSIDE,mxEdgeStyle$1.SideToSide);mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle$1.TopToBottom);mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_ORTHOGONAL,mxEdgeStyle$1.OrthConnector);mxStyleRegistry$1.putValue(mxConstants$1.EDGESTYLE_SEGMENT,mxEdgeStyle$1.SegmentConnector);mxStyleRegistry$1.putValue(mxConstants$1.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter);mxStyleRegistry$1.putValue(mxConstants$1.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter);mxStyleRegistry$1.putValue(mxConstants$1.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter);mxStyleRegistry$1.putValue(mxConstants$1.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter);mxStyleRegistry$1.putValue(mxConstants$1.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter);function mxGraphView(t){this.graph=t,this.translate=new mxPoint$1,this.graphBounds=new mxRectangle$1,this.states=new mxDictionary$1}mxGraphView.prototype=new mxEventSource;mxGraphView.prototype.constructor=mxGraphView;mxGraphView.prototype.EMPTY_POINT=new mxPoint$1;mxGraphView.prototype.doneResource=mxClient$1.language!="none"?"done":"";mxGraphView.prototype.updatingDocumentResource=mxClient$1.language!="none"?"updatingDocument":"";mxGraphView.prototype.allowEval=!1;mxGraphView.prototype.captureDocumentGesture=!0;mxGraphView.prototype.rendering=!0;mxGraphView.prototype.graph=null;mxGraphView.prototype.currentRoot=null;mxGraphView.prototype.graphBounds=null;mxGraphView.prototype.scale=1;mxGraphView.prototype.translate=null;mxGraphView.prototype.states=null;mxGraphView.prototype.updateStyle=!1;mxGraphView.prototype.lastNode=null;mxGraphView.prototype.lastHtmlNode=null;mxGraphView.prototype.lastForegroundNode=null;mxGraphView.prototype.lastForegroundHtmlNode=null;mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds};mxGraphView.prototype.setGraphBounds=function(t){this.graphBounds=t};mxGraphView.prototype.getBounds=function(t){var e=null;if(t!=null&&t.length>0){for(var i=this.graph.getModel(),n=0;n<t.length;n++)if(i.isVertex(t[n])||i.isEdge(t[n])){var r=this.getState(t[n]);r!=null&&(e==null?e=mxRectangle$1.fromRectangle(r):e.add(r))}}return e};mxGraphView.prototype.setCurrentRoot=function(t){if(this.currentRoot!=t){var e=new mxCurrentRootChange(this,t);e.execute();var i=new mxUndoableEdit(this,!0);i.add(e),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",i)),this.graph.sizeDidChange()}return t};mxGraphView.prototype.scaleAndTranslate=function(t,e,i){var n=this.scale,r=new mxPoint$1(this.translate.x,this.translate.y);(this.scale!=t||this.translate.x!=e||this.translate.y!=i)&&(this.scale=t,this.translate.x=e,this.translate.y=i,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.SCALE_AND_TRANSLATE,"scale",t,"previousScale",n,"translate",this.translate,"previousTranslate",r))};mxGraphView.prototype.getScale=function(){return this.scale};mxGraphView.prototype.setScale=function(t){var e=this.scale;this.scale!=t&&(this.scale=t,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.SCALE,"scale",t,"previousScale",e))};mxGraphView.prototype.getTranslate=function(){return this.translate};mxGraphView.prototype.setTranslate=function(t,e){var i=new mxPoint$1(this.translate.x,this.translate.y);(this.translate.x!=t||this.translate.y!=e)&&(this.translate.x=t,this.translate.y=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.TRANSLATE,"translate",this.translate,"previousTranslate",i))};mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()};mxGraphView.prototype.refresh=function(){this.currentRoot!=null&&this.clear(),this.revalidate()};mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()};mxGraphView.prototype.clear=function(t,e,i){var n=this.graph.getModel();if(t=t||n.getRoot(),e=e??!1,i=i??!0,this.removeState(t),i&&(e||t!=this.currentRoot))for(var r=n.getChildCount(t),l=0;l<r;l++)this.clear(n.getChildAt(t,l),e);else this.invalidate(t)};mxGraphView.prototype.invalidate=function(t,e,i){var n=this.graph.getModel();if(t=t||n.getRoot(),t!=null){e=e??!0,i=i??!0;var r=this.getState(t);if(r!=null&&(r.invalid=!0),!t.invalidating){if(t.invalidating=!0,e)for(var l=n.getChildCount(t),s=0;s<l;s++){var a=n.getChildAt(t,s);this.invalidate(a,e,i)}if(i)for(var o=n.getEdgeCount(t),s=0;s<o;s++)this.invalidate(n.getEdgeAt(t,s),e,i);delete t.invalidating}}};mxGraphView.prototype.validate=function(n){var e=mxLog$1.enter("mxGraphView.validate");window.status=mxResources$1.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var i=null;this.canvas!=null&&this.textDiv==null&&document.documentMode==8&&!mxClient$1.IS_EM&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),i=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display="inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var n=n??(this.currentRoot!=null?this.currentRoot:this.graph.getModel().getRoot()),r=this.validateCellState(this.validateCell(n)),l=this.getBoundingBox(r,!0,!0);this.setGraphBounds(l??this.getEmptyBounds()),this.validateBackground(),i!=null&&(this.canvas.style.display=i,this.textDiv.parentNode.removeChild(this.textDiv),this.placeholder!=null&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources$1.get(this.doneResource)||this.doneResource,mxLog$1.leave("mxGraphView.validate",e)};mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle$1(this.translate.x*this.scale,this.translate.y*this.scale)};mxGraphView.prototype.updateBoundingBox=function(t){t.shape!=null&&t.shape.updateBoundingBox(),t.text!=null&&t.text.updateBoundingBox()};mxGraphView.prototype.getBoundingBox=function(t,e,i){e=e??!0,i=i??!1;var n=null;if(t!=null){let d=function(c){return c!=null&&c.boundingBox!=null&&!isNaN(c.boundingBox.x)&&!isNaN(c.boundingBox.y)&&!isNaN(c.boundingBox.width)&&!isNaN(c.boundingBox.height)},p=function(c){d(c)&&(n==null?n=c.boundingBox.clone():n.add(c.boundingBox))};var o=d,u=p;if(i&&this.updateBoundingBox(t),p(t.shape),p(t.text),e)for(var r=this.graph.getModel(),l=r.getChildCount(t.cell),s=0;s<l;s++){var a=this.getBoundingBox(this.getState(r.getChildAt(t.cell,s)),e,i);a!=null&&(n==null?n=a:n.add(a))}}return n};mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"white","black")};mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()};mxGraphView.prototype.validateBackgroundImage=function(){var t=this.graph.getBackgroundImage();if(t!=null){if(this.backgroundImage==null||this.backgroundImage.image!=t.src){this.backgroundImage!=null&&this.backgroundImage.destroy();var e=new mxRectangle$1(0,0,1,1);this.backgroundImage=new mxImageShape(e,t.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw()}this.redrawBackgroundImage(this.backgroundImage,t)}else this.backgroundImage!=null&&(this.backgroundImage.destroy(),this.backgroundImage=null)};mxGraphView.prototype.validateBackgroundPage=function(){if(this.graph.pageVisible){var t=this.getBackgroundPageBounds();this.backgroundPageShape==null?(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent$1.addListener(this.backgroundPageShape.node,"dblclick",mxUtils$1.bind(this,function(e){this.graph.dblClick(e)})),mxEvent$1.addGestureListeners(this.backgroundPageShape.node,mxUtils$1.bind(this,function(e){this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(e))}),mxUtils$1.bind(this,function(e){this.graph.tooltipHandler!=null&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent$1.isConsumed(e)&&this.graph.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(e))}),mxUtils$1.bind(this,function(e){this.graph.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(e))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw())}else this.backgroundPageShape!=null&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)};mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.graph.pageFormat,e=this.scale*this.graph.pageScale,i=new mxRectangle$1(this.scale*this.translate.x,this.scale*this.translate.y,t.width*e,t.height*e);return i};mxGraphView.prototype.redrawBackgroundImage=function(t,e){var i=new mxRectangle$1(this.scale*(this.translate.x+e.x),this.scale*(this.translate.y+e.y),this.scale*e.width,this.scale*e.height);(t.scale!=this.scale||!i.equals(t.bounds))&&(t.scale=this.scale,t.bounds=i,t.node!=null&&t.node.nodeName=="g"&&(t.node.firstChild.nodeName=="image"||t.node.firstChild.nodeName=="svg")?(t.node.firstChild.setAttribute("x",i.x),t.node.firstChild.setAttribute("y",i.y),t.node.firstChild.setAttribute("width",i.width),t.node.firstChild.setAttribute("height",i.height)):t.redraw())};mxGraphView.prototype.validateCell=function(t,e){if(e=e??!0,t!=null){e=e&&this.graph.isCellVisible(t);var i=this.getState(t,e);if(i!=null&&!e)this.removeState(t);else for(var n=this.graph.getModel(),r=n.getChildCount(t),l=0;l<r;l++)this.validateCell(n.getChildAt(t,l),e&&(!this.isCellCollapsed(t)||t==this.currentRoot))}return t};mxGraphView.prototype.validateCellState=function(t,e){e=e??!0;var i=null;if(t!=null&&(i=this.getState(t),i!=null)){var n=this.graph.getModel();if(i.invalid&&(i.invalid=!1,(i.style==null||i.invalidStyle)&&(i.style=this.graph.getCellStyle(i.cell),i.invalidStyle=!1),t!=this.currentRoot&&this.validateCellState(n.getParent(t),!1),i.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!0),!1),!0),i.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!1),!1),!1),this.updateCellState(i),t!=this.currentRoot&&!i.invalid&&(this.graph.cellRenderer.redraw(i,!1,this.isRendering()),i.updateCachedBounds())),e&&!i.invalid){i.shape!=null&&this.stateValidated(i);for(var r=n.getChildCount(t),l=0;l<r;l++)this.validateCellState(n.getChildAt(t,l))}}return i};mxGraphView.prototype.updateCellState=function(t){if(t.absoluteOffset.x=0,t.absoluteOffset.y=0,t.origin.x=0,t.origin.y=0,t.length=0,t.cell!=this.currentRoot){var e=this.graph.getModel(),i=this.getState(e.getParent(t.cell));i!=null&&i.cell!=this.currentRoot&&(t.origin.x+=i.origin.x,t.origin.y+=i.origin.y);var n=this.graph.getChildOffsetForCell(t.cell);n!=null&&(t.origin.x+=n.x,t.origin.y+=n.y);var r=this.graph.getCellGeometry(t.cell);if(r!=null){if(!e.isEdge(t.cell))if(n=r.offset!=null?r.offset:this.EMPTY_POINT,r.relative&&i!=null)if(e.isEdge(i.cell)){var l=this.getPoint(i,r);l!=null&&(t.origin.x+=l.x/this.scale-i.origin.x-this.translate.x,t.origin.y+=l.y/this.scale-i.origin.y-this.translate.y)}else t.origin.x+=r.x*i.unscaledWidth+n.x,t.origin.y+=r.y*i.unscaledHeight+n.y;else t.absoluteOffset.x=this.scale*n.x,t.absoluteOffset.y=this.scale*n.y,t.origin.x+=r.x,t.origin.y+=r.y;t.x=this.scale*(this.translate.x+t.origin.x),t.y=this.scale*(this.translate.y+t.origin.y),t.width=this.scale*r.width,t.unscaledWidth=r.width,t.height=this.scale*r.height,t.unscaledHeight=r.height,e.isVertex(t.cell)&&this.updateVertexState(t,r),e.isEdge(t.cell)&&this.updateEdgeState(t,r)}}t.updateCachedBounds()};mxGraphView.prototype.isCellCollapsed=function(t){return this.graph.isCellCollapsed(t)};mxGraphView.prototype.updateVertexState=function(t,e){var i=this.graph.getModel(),n=this.getState(i.getParent(t.cell));if(e.relative&&n!=null&&!i.isEdge(n.cell)){var r=mxUtils$1.toRadians(n.style[mxConstants$1.STYLE_ROTATION]||"0");if(r!=0){var l=Math.cos(r),s=Math.sin(r),a=new mxPoint$1(t.getCenterX(),t.getCenterY()),o=new mxPoint$1(n.getCenterX(),n.getCenterY()),u=mxUtils$1.getRotatedPoint(a,l,s,o);t.x=u.x-t.width/2,t.y=u.y-t.height/2}}this.updateVertexLabelOffset(t)};mxGraphView.prototype.updateEdgeState=function(t,e){var i=t.getVisibleTerminalState(!0),n=t.getVisibleTerminalState(!1);if(this.graph.model.getTerminal(t.cell,!0)!=null&&i==null||i==null&&e.getTerminalPoint(!0)==null||this.graph.model.getTerminal(t.cell,!1)!=null&&n==null||n==null&&e.getTerminalPoint(!1)==null)this.clear(t.cell,!0);else{this.updateFixedTerminalPoints(t,i,n),this.updatePoints(t,e.points,i,n),this.updateFloatingTerminalPoints(t,i,n);var r=t.absolutePoints;t.cell!=this.currentRoot&&(r==null||r.length<2||r[0]==null||r[r.length-1]==null)?this.clear(t.cell,!0):(this.updateEdgeBounds(t),this.updateEdgeLabelOffset(t))}};mxGraphView.prototype.updateVertexLabelOffset=function(t){var e=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER);if(e==mxConstants$1.ALIGN_LEFT){var i=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_WIDTH,null);i!=null?i*=this.scale:i=t.width,t.absoluteOffset.x-=i}else if(e==mxConstants$1.ALIGN_RIGHT)t.absoluteOffset.x+=t.width;else if(e==mxConstants$1.ALIGN_CENTER){var i=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_WIDTH,null);if(i!=null){var n=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER),r=0;n==mxConstants$1.ALIGN_CENTER?r=.5:n==mxConstants$1.ALIGN_RIGHT&&(r=1),r!=0&&(t.absoluteOffset.x-=(i*this.scale-t.width)*r)}}var l=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);l==mxConstants$1.ALIGN_TOP?t.absoluteOffset.y-=t.height:l==mxConstants$1.ALIGN_BOTTOM&&(t.absoluteOffset.y+=t.height)};mxGraphView.prototype.resetValidationState=function(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null};mxGraphView.prototype.stateValidated=function(t){var e=this.graph.getModel().isEdge(t.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(t.cell)&&this.graph.keepEdgesInBackground,i=e?this.lastForegroundHtmlNode||this.lastHtmlNode:this.lastHtmlNode,n=e?this.lastForegroundNode||this.lastNode:this.lastNode,r=this.graph.cellRenderer.insertStateAfter(t,n,i);e?(this.lastForegroundHtmlNode=r[1],this.lastForegroundNode=r[0]):(this.lastHtmlNode=r[1],this.lastNode=r[0])};mxGraphView.prototype.updateFixedTerminalPoints=function(t,e,i){this.updateFixedTerminalPoint(t,e,!0,this.graph.getConnectionConstraint(t,e,!0)),this.updateFixedTerminalPoint(t,i,!1,this.graph.getConnectionConstraint(t,i,!1))};mxGraphView.prototype.updateFixedTerminalPoint=function(t,e,i,n){t.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(t,e,i,n),i)};mxGraphView.prototype.getFixedTerminalPoint=function(t,e,i,n){var r=null;if(n!=null&&(r=this.graph.getConnectionPoint(e,n,!1)),r==null&&e==null){var l=this.scale,s=this.translate,a=t.origin,o=this.graph.getCellGeometry(t.cell);r=o.getTerminalPoint(i),r!=null&&(r=new mxPoint$1(l*(s.x+r.x+a.x),l*(s.y+r.y+a.y)))}return r};mxGraphView.prototype.updateBoundsFromStencil=function(t){var e=null;if(t!=null&&t.shape!=null&&t.shape.stencil!=null&&t.shape.stencil.aspect=="fixed"){e=mxRectangle$1.fromRectangle(t);var i=t.shape.stencil.computeAspect(t.style,t.x,t.y,t.width,t.height);t.setRect(i.x,i.y,t.shape.stencil.w0*i.width,t.shape.stencil.h0*i.height)}return e};mxGraphView.prototype.updatePoints=function(t,e,i,n){if(t!=null){var r=[];r.push(t.absolutePoints[0]);var l=this.getEdgeStyle(t,e,i,n);if(l!=null){var s=this.getTerminalPort(t,i,!0),a=this.getTerminalPort(t,n,!1),o=this.updateBoundsFromStencil(s),u=this.updateBoundsFromStencil(a);l(t,s,a,e,r),o!=null&&s.setRect(o.x,o.y,o.width,o.height),u!=null&&a.setRect(u.x,u.y,u.width,u.height)}else if(e!=null){for(var d=0;d<e.length;d++)if(e[d]!=null){var p=mxUtils$1.clone(e[d]);r.push(this.transformControlPoint(t,p))}}var c=t.absolutePoints;r.push(c[c.length-1]),t.absolutePoints=r}};mxGraphView.prototype.transformControlPoint=function(t,e,i){if(t!=null&&e!=null){var n=t.origin,r=i?1:this.scale;return new mxPoint$1(r*(e.x+this.translate.x+n.x),r*(e.y+this.translate.y+n.y))}return null};mxGraphView.prototype.isLoopStyleEnabled=function(t,e,i,n){var r=this.graph.getConnectionConstraint(t,i,!0),l=this.graph.getConnectionConstraint(t,n,!1);return(e==null||e.length<2)&&(!mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ORTHOGONAL_LOOP,!1)||(r==null||r.point==null)&&(l==null||l.point==null))?i!=null&&i==n:!1};mxGraphView.prototype.getEdgeStyle=function(t,e,i,n){var r=this.isLoopStyleEnabled(t,e,i,n)?mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils$1.getValue(t.style,mxConstants$1.STYLE_NOEDGESTYLE,!1)?null:t.style[mxConstants$1.STYLE_EDGE];if(typeof r=="string"){var l=mxStyleRegistry$1.getValue(r);l==null&&this.isAllowEval()&&(l=mxUtils$1.eval(r)),r=l}return typeof r=="function"?r:null};mxGraphView.prototype.updateFloatingTerminalPoints=function(t,e,i){var n=t.absolutePoints,r=n[0],l=n[n.length-1];l==null&&i!=null&&this.updateFloatingTerminalPoint(t,i,e,!1),r==null&&e!=null&&this.updateFloatingTerminalPoint(t,e,i,!0)};mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,i,n){t.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,i,n),n)};mxGraphView.prototype.getFloatingTerminalPoint=function(t,e,i,n){e=this.getTerminalPort(t,e,n);var r=this.getNextPoint(t,i,n),l=this.graph.isOrthogonal(t),s=mxUtils$1.toRadians(Number(e.style[mxConstants$1.STYLE_ROTATION]||"0")),a=new mxPoint$1(e.getCenterX(),e.getCenterY());if(s!=0){var o=Math.cos(-s),u=Math.sin(-s);r=mxUtils$1.getRotatedPoint(r,o,u,a)}var d=parseFloat(t.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0);d+=parseFloat(t.style[n?mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING:mxConstants$1.STYLE_TARGET_PERIMETER_SPACING]||0);var p=this.getPerimeterPoint(e,r,s==0&&l,d);if(s!=0){var o=Math.cos(s),u=Math.sin(s);p=mxUtils$1.getRotatedPoint(p,o,u,a)}return p};mxGraphView.prototype.getTerminalPort=function(t,e,i){var n=i?mxConstants$1.STYLE_SOURCE_PORT:mxConstants$1.STYLE_TARGET_PORT,r=mxUtils$1.getValue(t.style,n);if(r!=null){var l=this.getState(this.graph.getModel().getCell(r));l!=null&&(e=l)}return e};mxGraphView.prototype.getPerimeterPoint=function(t,e,i,n){var r=null;if(t!=null){var l=this.getPerimeterFunction(t);if(l!=null&&e!=null){var s=this.getPerimeterBounds(t,n);if(s.width>0||s.height>0){r=new mxPoint$1(e.x,e.y);var a=!1,o=!1;this.graph.model.isVertex(t.cell)&&(a=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPH,0)==1,o=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPV,0)==1,t.shape!=null&&t.shape.stencil!=null&&(a=mxUtils$1.getValue(t.style,"stencilFlipH",0)==1||a,o=mxUtils$1.getValue(t.style,"stencilFlipV",0)==1||o),a&&(r.x=2*s.getCenterX()-r.x),o&&(r.y=2*s.getCenterY()-r.y)),r=l(s,t,r,i),r!=null&&(a&&(r.x=2*s.getCenterX()-r.x),o&&(r.y=2*s.getCenterY()-r.y))}}r==null&&(r=this.getPoint(t))}return r};mxGraphView.prototype.getRoutingCenterX=function(t){var e=t.style!=null&&parseFloat(t.style[mxConstants$1.STYLE_ROUTING_CENTER_X])||0;return t.getCenterX()+e*t.width};mxGraphView.prototype.getRoutingCenterY=function(t){var e=t.style!=null&&parseFloat(t.style[mxConstants$1.STYLE_ROUTING_CENTER_Y])||0;return t.getCenterY()+e*t.height};mxGraphView.prototype.getPerimeterBounds=function(t,e){return e=e??0,t!=null&&(e+=parseFloat(t.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0)),t.getPerimeterBounds(e*this.scale)};mxGraphView.prototype.getPerimeterFunction=function(t){var e=t.style[mxConstants$1.STYLE_PERIMETER];if(typeof e=="string"){var i=mxStyleRegistry$1.getValue(e);i==null&&this.isAllowEval()&&(i=mxUtils$1.eval(e)),e=i}return typeof e=="function"?e:null};mxGraphView.prototype.getNextPoint=function(t,e,i){var n=t.absolutePoints,r=null;if(n!=null&&n.length>=2){var l=n.length;r=n[i?Math.min(1,l-1):Math.max(0,l-2)]}return r==null&&e!=null&&(r=new mxPoint$1(e.getCenterX(),e.getCenterY())),r};mxGraphView.prototype.getVisibleTerminal=function(t,e){for(var i=this.graph.getModel(),n=i.getTerminal(t,e),r=n;n!=null&&n!=this.currentRoot;)(!this.graph.isCellVisible(r)||this.isCellCollapsed(n))&&(r=n),n=i.getParent(n);return r!=null&&(!i.contains(r)||i.getParent(r)==i.getRoot()||r==this.currentRoot)&&(r=null),r};mxGraphView.prototype.updateEdgeBounds=function(t){var e=t.absolutePoints,i=e[0],n=e[e.length-1];if(i.x!=n.x||i.y!=n.y){var r=n.x-i.x,l=n.y-i.y;t.terminalDistance=Math.sqrt(r*r+l*l)}else t.terminalDistance=0;var s=0,a=[],o=i;if(o!=null){for(var u=o.x,d=o.y,p=u,c=d,g=1;g<e.length;g++){var x=e[g];if(x!=null){var r=o.x-x.x,l=o.y-x.y,C=Math.sqrt(r*r+l*l);a.push(C),s+=C,o=x,u=Math.min(o.x,u),d=Math.min(o.y,d),p=Math.max(o.x,p),c=Math.max(o.y,c)}}t.length=s,t.segments=a;var T=1;t.x=u,t.y=d,t.width=Math.max(T,p-u),t.height=Math.max(T,c-d)}};mxGraphView.prototype.getPoint=function(t,e){var i=t.getCenterX(),n=t.getCenterY();if(t.segments!=null&&(e==null||e.relative)){for(var r=e!=null?e.x/2:0,l=t.absolutePoints.length,s=Math.round((r+.5)*t.length),a=t.segments[0],o=0,u=1;s>=Math.round(o+a)&&u<l-1;)o+=a,a=t.segments[u++];var d=a==0?0:(s-o)/a,p=t.absolutePoints[u-1],c=t.absolutePoints[u];if(p!=null&&c!=null){var g=0,x=0,C=0;if(e!=null){g=e.y;var T=e.offset;T!=null&&(x=T.x,C=T.y)}var A=c.x-p.x,R=c.y-p.y,_=a==0?0:R/a,N=a==0?0:A/a;i=p.x+A*d+(_*g+x)*this.scale,n=p.y+R*d-(N*g-C)*this.scale}}else if(e!=null){var T=e.offset;T!=null&&(i+=T.x,n+=T.y)}return new mxPoint$1(i,n)};mxGraphView.prototype.getRelativePoint=function(t,e,i){var n=this.graph.getModel(),r=n.getGeometry(t.cell);if(r!=null){var l=t.absolutePoints.length;if(r.relative&&l>1){for(var s=t.length,a=t.segments,o=t.absolutePoints[0],u=t.absolutePoints[1],d=mxUtils$1.ptSegDistSq(o.x,o.y,u.x,u.y,e,i),p=0,c=0,g=0,x=2;x<l;x++){o=u,u=t.absolutePoints[x];var C=mxUtils$1.ptSegDistSq(o.x,o.y,u.x,u.y,e,i);g+=a[x-2],C<=d&&(d=C,c=x-1,p=g)}var T=a[c];o=t.absolutePoints[c],u=t.absolutePoints[c+1];var A=o.x,R=o.y,_=u.x,N=u.y,H=e,k=i,K=A-_,Q=R-N;H-=_,k-=N;var nt=0;H=K-H,k=Q-k;var dt=H*K+k*Q;dt<=0?nt=0:nt=dt*dt/(K*K+Q*Q);var mt=Math.sqrt(nt);mt>T&&(mt=T);var xt=Math.sqrt(mxUtils$1.ptSegDistSq(o.x,o.y,u.x,u.y,e,i)),Y=mxUtils$1.relativeCcw(o.x,o.y,u.x,u.y,e,i);return Y==-1&&(xt=-xt),new mxPoint$1((s/2-p-mt)/s*-2,xt/this.scale)}}return new mxPoint$1};mxGraphView.prototype.updateEdgeLabelOffset=function(t){var e=t.absolutePoints;if(t.absoluteOffset.x=t.getCenterX(),t.absoluteOffset.y=t.getCenterY(),e!=null&&e.length>0&&t.segments!=null){var i=this.graph.getCellGeometry(t.cell);if(i.relative){var n=this.getPoint(t,i);n!=null&&(t.absoluteOffset=n)}else{var r=e[0],l=e[e.length-1];if(r!=null&&l!=null){var s=l.x-r.x,a=l.y-r.y,o=0,u=0,d=i.offset;d!=null&&(o=d.x,u=d.y);var p=r.x+s/2+o*this.scale,c=r.y+a/2+u*this.scale;t.absoluteOffset.x=p,t.absoluteOffset.y=c}}}};mxGraphView.prototype.getState=function(t,e){e=e||!1;var i=null;return t!=null&&(i=this.states.get(t),e&&(i==null||this.updateStyle)&&this.graph.isCellVisible(t)&&(i==null?(i=this.createState(t),this.states.put(t,i)):i.style=this.graph.getCellStyle(t))),i};mxGraphView.prototype.isRendering=function(){return this.rendering};mxGraphView.prototype.setRendering=function(t){this.rendering=t};mxGraphView.prototype.isAllowEval=function(){return this.allowEval};mxGraphView.prototype.setAllowEval=function(t){this.allowEval=t};mxGraphView.prototype.getStates=function(){return this.states};mxGraphView.prototype.setStates=function(t){this.states=t};mxGraphView.prototype.getCellStates=function(t){if(t==null)return this.states;for(var e=[],i=0;i<t.length;i++){var n=this.getState(t[i]);n!=null&&e.push(n)}return e};mxGraphView.prototype.removeState=function(t){var e=null;return t!=null&&(e=this.states.remove(t),e!=null&&(this.graph.cellRenderer.destroy(e),e.invalid=!0,e.destroy())),e};mxGraphView.prototype.createState=function(t){return new mxCellState$1(this,t,this.graph.getCellStyle(t))};mxGraphView.prototype.getCanvas=function(){return this.canvas};mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane};mxGraphView.prototype.getDrawPane=function(){return this.drawPane};mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane};mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane};mxGraphView.prototype.isContainerEvent=function(t){var e=mxEvent$1.getSource(t);return e==this.graph.container||this.backgroundPane.contains(e)||e==this.canvas.parentNode||e==this.canvas||e==this.drawPane||e==this.overlayPane||e==this.decoratorPane};mxGraphView.prototype.isScrollEvent=function(t){var e=mxUtils$1.getOffset(this.graph.container),i=new mxPoint$1(t.clientX-e.x,t.clientY-e.y),n=this.graph.container.offsetWidth,r=this.graph.container.clientWidth;if(n>r&&i.x>r+2&&i.x<=n)return!0;var l=this.graph.container.offsetHeight,s=this.graph.container.clientHeight;return l>s&&i.y>s+2&&i.y<=l};mxGraphView.prototype.init=function(){this.installListeners();var t=this.graph;t.dialect==mxConstants$1.DIALECT_SVG?this.createSvg():this.createHtml()};mxGraphView.prototype.installListeners=function(){var t=this.graph,e=t.container;if(e!=null){mxClient$1.IS_TOUCH&&(mxEvent$1.addListener(e,"gesturestart",mxUtils$1.bind(this,function(n){t.fireGestureEvent(n),mxEvent$1.consume(n)})),mxEvent$1.addListener(e,"gesturechange",mxUtils$1.bind(this,function(n){t.fireGestureEvent(n),mxEvent$1.consume(n)})),mxEvent$1.addListener(e,"gestureend",mxUtils$1.bind(this,function(n){t.fireGestureEvent(n),mxEvent$1.consume(n)}))),mxEvent$1.addGestureListeners(e,mxUtils$1.bind(this,function(n){this.isContainerEvent(n)&&(!mxClient$1.IS_IE&&!mxClient$1.IS_IE11&&!mxClient$1.IS_GC&&!mxClient$1.IS_OP&&!mxClient$1.IS_SF||!this.isScrollEvent(n))&&t.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent$1(n))}),mxUtils$1.bind(this,function(n){this.isContainerEvent(n)&&t.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(n))}),mxUtils$1.bind(this,function(n){this.isContainerEvent(n)&&t.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(n))})),mxEvent$1.addListener(e,"dblclick",mxUtils$1.bind(this,function(n){this.isContainerEvent(n)&&t.dblClick(n)}));var i=function(n){var r=null;if(mxClient$1.IS_TOUCH){var l=mxEvent$1.getClientX(n),s=mxEvent$1.getClientY(n),a=mxUtils$1.convertPoint(e,l,s);r=t.view.getState(t.getCellAt(a.x,a.y))}return r};t.addMouseListener({mouseDown:function(n,r){t.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils$1.bind(this,function(n){t.tooltipHandler!=null&&t.tooltipHandler.isHideOnHover()&&t.tooltipHandler.hide(),this.captureDocumentGesture&&t.isMouseDown&&t.container!=null&&!this.isContainerEvent(n)&&t.container.style.display!="none"&&t.container.style.visibility!="hidden"&&!mxEvent$1.isConsumed(n)&&t.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(n,i(n)))}),this.endHandler=mxUtils$1.bind(this,function(n){this.captureDocumentGesture&&t.isMouseDown&&t.container!=null&&!this.isContainerEvent(n)&&t.container.style.display!="none"&&t.container.style.visibility!="hidden"&&t.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(n))}),mxEvent$1.addGestureListeners(document,null,this.moveHandler,this.endHandler)}};mxGraphView.prototype.createHtml=function(){var t=this.graph.container;t!=null&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),t.appendChild(this.canvas),this.updateContainerStyle(t))};mxGraphView.prototype.updateHtmlCanvasSize=function(t,e){if(this.graph.container!=null){var i=this.graph.container.offsetWidth,n=this.graph.container.offsetHeight;i<t?this.canvas.style.width=t+"px":this.canvas.style.width="100%",n<e?this.canvas.style.height=e+"px":this.canvas.style.height="100%"}};mxGraphView.prototype.createHtmlPane=function(t,e){var i=document.createElement("DIV");return t!=null&&e!=null?(i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=t,i.style.height=e):i.style.position="relative",i};mxGraphView.prototype.createSvg=function(){var t=this.graph.container;this.canvas=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var e=document.createElementNS(mxConstants$1.NS_SVG,"svg");e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.display="block",e.appendChild(this.canvas),(mxClient$1.IS_IE||mxClient$1.IS_IE11)&&(e.style.overflow="hidden"),t!=null&&(t.appendChild(e),this.updateContainerStyle(t))};mxGraphView.prototype.updateContainerStyle=function(t){var e=mxUtils$1.getCurrentStyle(t);e!=null&&e.position=="static"&&(t.style.position="relative"),mxClient$1.IS_POINTER&&(t.style.touchAction="none")};mxGraphView.prototype.destroy=function(){var t=this.canvas!=null?this.canvas.ownerSVGElement:null;t==null&&(t=this.canvas),t!=null&&t.parentNode!=null&&(this.clear(this.currentRoot,!0),mxEvent$1.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent$1.release(this.graph.container),t.parentNode.removeChild(t),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)};function mxCurrentRootChange(t,e){if(this.view=t,this.root=e,this.previous=e,this.isUp=e==null,!this.isUp)for(var i=this.view.currentRoot,n=this.view.graph.getModel();i!=null;){if(i==e){this.isUp=!0;break}i=n.getParent(i)}}mxCurrentRootChange.prototype.execute=function(){var t=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=t;var e=this.view.graph.getTranslateForRoot(this.view.currentRoot);e!=null&&(this.view.translate=new mxPoint$1(-e.x,-e.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh();var i=this.isUp?mxEvent$1.UP:mxEvent$1.DOWN;this.view.fireEvent(new mxEventObject$1(i,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp};function mxCellEditor(t){this.graph=t,this.zoomHandler=mxUtils$1.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.container!=null&&mxEvent$1.addListener(this.graph.container,"scroll",this.zoomHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.zoomHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.zoomHandler),this.changeHandler=mxUtils$1.bind(this,function(e){if(this.editingCell!=null){var i=this.graph.getView().getState(this.editingCell);i==null?this.stopEditing(!0):this.updateTextAreaStyle(i)}}),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler)}mxCellEditor.prototype.graph=null;mxCellEditor.prototype.textarea=null;mxCellEditor.prototype.editingCell=null;mxCellEditor.prototype.trigger=null;mxCellEditor.prototype.modified=!1;mxCellEditor.prototype.autoSize=!0;mxCellEditor.prototype.selectText=!0;mxCellEditor.prototype.rotateText=!0;mxCellEditor.prototype.emptyLabelText=mxClient$1.IS_FF?"<br>":"";mxCellEditor.prototype.escapeCancelsEditing=!0;mxCellEditor.prototype.textNode=null;mxCellEditor.prototype.zIndex=1;mxCellEditor.prototype.minResize=new mxRectangle$1(0,20);mxCellEditor.prototype.blurEnabled=!1;mxCellEditor.prototype.initialValue=null;mxCellEditor.prototype.align=null;mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient$1.IS_GC&&(this.textarea.style.minHeight="1em"),this.installListeners(this.textarea)};mxCellEditor.prototype.applyValue=function(t,e){this.graph.labelChanged(t.cell,e,this.trigger)};mxCellEditor.prototype.setAlign=function(t){var e=this.graph.getView().getState(this.editingCell);if(this.textarea!=null&&e!=null){var i=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION);(i==null||i.substring(0,9)!="vertical-")&&(this.textarea.style.textAlign=t)}this.align=t,this.resize()};mxCellEditor.prototype.getInitialValue=function(t,e){var i=mxUtils$1.htmlEntities(this.graph.getEditingValue(t.cell,e),!1);return i=mxUtils$1.replaceTrailingNewlines(i,"<div><br></div>"),i.replace(/\n/g,"<br>")};mxCellEditor.prototype.getCurrentValue=function(t){return mxUtils$1.extractTextWithWhitespace(this.textarea.childNodes)};mxCellEditor.prototype.isCancelEditingKeyEvent=function(t){return this.escapeCancelsEditing||mxEvent$1.isShiftDown(t)||mxEvent$1.isControlDown(t)||mxEvent$1.isMetaDown(t)};mxCellEditor.prototype.installListeners=function(t){mxEvent$1.addListener(t,"dragstart",mxUtils$1.bind(this,function(a){this.graph.stopEditing(!1),mxEvent$1.consume(a)})),mxEvent$1.addListener(t,"blur",mxUtils$1.bind(this,function(a){this.blurEnabled&&this.focusLost(a)}));var e=this.graph.container.scrollTop,i=this.graph.container.scrollLeft;mxEvent$1.addListener(t,"keydown",mxUtils$1.bind(this,function(a){e=this.graph.container.scrollTop,i=this.graph.container.scrollLeft,mxEvent$1.isConsumed(a)||(this.isStopEditingEvent(a)?(this.graph.stopEditing(!1),mxEvent$1.consume(a)):a.keyCode==27&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(a)),mxEvent$1.consume(a)))}));var n=mxUtils$1.bind(this,function(a){this.editingCell!=null&&this.clearOnChange&&t.innerHTML==this.getEmptyLabelText()&&(!mxClient$1.IS_FF||a.keyCode!=8&&a.keyCode!=46)&&(this.clearOnChange=!1,t.innerText="")});mxEvent$1.addListener(t,"keypress",n),mxEvent$1.addListener(t,"paste",n);var r=mxUtils$1.bind(this,function(a){this.editingCell!=null&&(this.graph.container.scrollTop=e,this.graph.container.scrollLeft=i,t.scrollIntoView({block:"nearest",inline:"nearest"}),(this.textarea.innerHTML.length==0||this.textarea.innerHTML=="<br>")&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)});mxEvent$1.addListener(t,!mxClient$1.IS_IE11&&!mxClient$1.IS_IE?"input":"keyup",r),mxEvent$1.addListener(t,"cut",r),mxEvent$1.addListener(t,"paste",r);var l=!mxClient$1.IS_IE11&&!mxClient$1.IS_IE?"input":"keydown",s=mxUtils$1.bind(this,function(a){this.editingCell!=null&&this.autoSize&&!mxEvent$1.isConsumed(a)&&(this.resizeThread!=null&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils$1.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent$1.addListener(t,l,s),mxEvent$1.addListener(window,"resize",s),mxEvent$1.addListener(t,"cut",s),mxEvent$1.addListener(t,"paste",s)};mxCellEditor.prototype.isStopEditingEvent=function(t){return t.keyCode==113||this.graph.isEnterStopsCellEditing()&&t.keyCode==13&&!mxEvent$1.isControlDown(t)&&!mxEvent$1.isShiftDown(t)};mxCellEditor.prototype.isEventSource=function(t){return mxEvent$1.getSource(t)==this.textarea};mxCellEditor.prototype.resize=function(){var t=this.graph.getView().getState(this.editingCell);if(t==null)this.stopEditing(!0);else if(this.textarea!=null){var e=mxUtils$1.getAlignmentAsPoint(this.align!=null?this.align:this.textShape.align,this.textShape.valign);this.bounds=this.graph.cellRenderer.getLabelBounds(t,this.textShape,e,!this.rotateText);var i=this.rotateText?this.textShape.getTextRotation():0,n=this.graph.getView().scale;if(this.bounds.x+=e.x==-.5?0:e.x==0?-n:n,this.bounds.y+=e.y==-.5?0:e.y==0?-n:n,t.style.md==1){var r=t.height/n,l=t.width/n;this.textarea.style.width=`${l}px`,this.textarea.style.height=`${r}px`}if(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y))+"px",!this.autoSize||t.style[mxConstants$1.STYLE_OVERFLOW]=="fill")this.textarea.style.width=Math.round(this.bounds.width/n)+"px",this.textarea.style.height=Math.round(this.bounds.height/n)+"px",this.graph.isWrapping(t.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants$1.WORD_WRAP,this.textarea.style.whiteSpace="normal",t.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&(this.textarea.style.width=Math.round(this.bounds.width/n)+"px")):(this.textarea.style.whiteSpace="nowrap",t.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&(this.textarea.style.width=""));else if(this.graph.isWrapping(t.cell)&&(this.bounds.width>=2||this.bounds.height>=2)){var s=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION),a=s!=null&&s.substring(0,9)=="vertical-";this.textarea.style.wordWrap=mxConstants$1.WORD_WRAP,this.textarea.style.whiteSpace="normal",t.style[mxConstants$1.STYLE_OVERFLOW]=="block"||t.style[mxConstants$1.STYLE_OVERFLOW]=="width"?this.bounds.width-=2*n:t.view.graph.isHtmlLabel(t.cell)&&(this.bounds.width+=mxSvgCanvas2D$1.prototype.foreignObjectPadding*n),this.textarea.innerHTML!=this.getEmptyLabelText()?t.style[mxConstants$1.STYLE_OVERFLOW]=="block"||t.style[mxConstants$1.STYLE_OVERFLOW]=="width"?((e.y==-.5||t.style[mxConstants$1.STYLE_OVERFLOW]=="width")&&(this.textarea.style.maxHeight=Math.round(this.bounds.height/n)+"px"),this.textarea.style.width=Math.round(this.bounds.width/n)+"px"):a?this.textarea.style.maxHeight=Math.round(this.bounds.height/n)+"px":this.textarea.style.maxWidth=Math.round(this.bounds.width/n)+"px":this.textarea.style.maxWidth=Math.round(this.bounds.width/n)+"px"}else this.textarea.style.whiteSpace="nowrap",this.textarea.style.width="";mxUtils$1.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils$1.setPrefixedStyle(this.textarea.style,"transform",(i!=0?"rotate("+i+"deg) ":"")+"scale("+n+","+n+") translate("+e.x*100+"%,"+e.y*100+"%)")}};mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())};mxCellEditor.prototype.getBackgroundColor=function(t){return null};mxCellEditor.prototype.getBorderColor=function(t){return null};mxCellEditor.prototype.updateTextAreaStyle=function(t){var e=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE),i=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY),n=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTCOLOR,"black"),r=(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD,l=(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC,s=[];(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&s.push("underline"),(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&s.push("line-through"),this.textarea.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants$1.LINE_HEIGHT)+"px":mxConstants$1.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(t),this.textarea.style.textDecoration=s.join(" "),this.textarea.style.fontWeight=r?"bold":"normal",this.textarea.style.fontStyle=l?"italic":"",this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=mxUtils$1.parseCssFontFamily(i),this.textarea.style.writingMode="",this.textarea.style.color=n;var a=this.getBorderColor(t);a!=null?this.textarea.style.border="1px solid "+a:this.textarea.style.border="1px solid transparent";var o=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION),u=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT);if(this.textarea.removeAttribute("dir"),o==mxConstants$1.TEXT_DIRECTION_AUTO&&t!=null&&t.text!=null&&t.text.dialect!=mxConstants$1.DIALECT_STRICTHTML&&!mxUtils$1.isNode(t.text.value)&&(o=t.text.getAutoDirection()),o==mxConstants$1.TEXT_DIRECTION_LTR||o==mxConstants$1.TEXT_DIRECTION_RTL)this.textarea.setAttribute("dir",o);else if(o==mxConstants$1.TEXT_DIRECTION_VERTICAL_LR||o==mxConstants$1.TEXT_DIRECTION_VERTICAL_RL){var d=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE);u=d==mxConstants$1.ALIGN_TOP?"left":d==mxConstants$1.ALIGN_BOTTOM?"right":"center",this.textarea.style.writingMode=o}this.textarea.style.textAlign=u};mxCellEditor.prototype.startEditing=function(t,e,i){this.stopEditing(!0),this.align=null,this.textarea==null&&this.init(),this.graph.tooltipHandler!=null&&this.graph.tooltipHandler.hideTooltip();var n=this.graph.getView().getState(t);if(n!=null){this.updateTextAreaStyle(n),this.textarea.innerHTML=this.getInitialValue(n,e)||"",this.initialValue=this.textarea.innerHTML,this.textarea.innerHTML.length==0||this.textarea.innerHTML=="<br>"?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.textShape=n.text,this.editingCell=t,this.trigger=e,this.textShape==null&&(this.textShape=this.graph.cellRenderer.createTextShape(n,"",this.graph.dialect));var r=mxUtils$1.bind(this,function(){if(this.editingCell!=null)if(this.textShape!=null&&this.textShape.node!=null&&this.isHideLabel(n)&&(this.textNode=this.textShape.node,this.textNode.style.visibility="hidden"),this.resize(),this.graph.container.appendChild(this.textarea),mxClient$1.IS_IOS&&(this.graph.container.scrollTop=Math.max(this.graph.container.scrollTop,n.y+n.height-this.graph.container.clientHeight/3)),this.textarea.scrollIntoView({block:"nearest",inline:"nearest"}),this.textarea.focus(),i!=null){this.textarea.innerHTML=i;var l=document.createRange();l.selectNodeContents(this.textarea),l.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(l)}else this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||this.clearOnChange)});mxClient$1.IS_IOS?r():window.setTimeout(r,0)}};mxCellEditor.prototype.isSelectText=function(){return this.selectText};mxCellEditor.prototype.clearSelection=function(){var t=null;window.getSelection?t=window.getSelection():document.selection&&(t=document.selection),t!=null&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())};mxCellEditor.prototype.stopEditing=function(t){if(t=t||!1,this.editingCell!=null){this.textNode!=null&&(this.textNode.style.visibility="visible",this.textNode=null);var e=t?null:this.graph.view.getState(this.editingCell),i=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.textShape=null,this.trigger=null,this.bounds=null,this.textarea.blur(),this.clearSelection(),this.textarea.parentNode!=null&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerText="",this.clearOnChange=!1),e!=null&&(this.textarea.innerHTML!=i||this.align!=null)){this.prepareTextarea();var n=this.getCurrentValue(e);this.graph.getModel().beginUpdate();try{n!=null&&this.applyValue(e,n),this.align!=null&&this.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,this.align,[e.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent$1.release(this.textarea),this.textarea=null,this.align=null}};mxCellEditor.prototype.prepareTextarea=function(){this.textarea.lastChild!=null&&this.textarea.lastChild.nodeName=="BR"&&this.textarea.removeChild(this.textarea.lastChild)};mxCellEditor.prototype.isHideLabel=function(t){return!0};mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle$1(0,0,t.text==null?30:t.text.size*e+20,this.textarea.style.textAlign=="left"?120:40)};mxCellEditor.prototype.getEmptyLabelText=function(t){return this.emptyLabelText};mxCellEditor.prototype.getEditingCell=function(){return this.editingCell};mxCellEditor.prototype.destroy=function(){this.textarea!=null&&(mxEvent$1.release(this.textarea),this.textarea.parentNode!=null&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.container!=null&&mxEvent$1.removeListener(this.graph.container,"scroll",this.zoomHandler),this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)};const{mxLoadResources}=mxClient$1;function mxGraph(t,e,i,n,r){this.mouseListeners=null,this.renderHint=i,mxClient$1.IS_SVG?this.dialect=mxConstants$1.DIALECT_SVG:i==mxConstants$1.RENDERING_HINT_FASTEST?this.dialect=mxConstants$1.DIALECT_STRICTHTML:i==mxConstants$1.RENDERING_HINT_FASTER?this.dialect=mxConstants$1.DIALECT_PREFERHTML:this.dialect=mxConstants$1.DIALECT_MIXEDHTML,this.model=e??new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(n??this.createStylesheet()),this.view=this.createGraphView(),this.view.rendering=r??this.view.rendering,this.graphModelChangeListener=mxUtils$1.bind(this,function(l,s){this.graphModelChanged(s.getProperty("edit").changes)}),this.model.addListener(mxEvent$1.CHANGE,this.graphModelChangeListener),this.createHandlers(),t!=null&&this.init(t),this.view.rendering&&this.view.revalidate()}mxLoadResources?mxResources$1.add(mxClient$1.basePath+"/resources/graph"):mxClient$1.defaultBundles.push(mxClient$1.basePath+"/resources/graph");mxGraph.prototype=new mxEventSource;mxGraph.prototype.constructor=mxGraph;mxGraph.prototype.mouseListeners=null;mxGraph.prototype.isMouseDown=!1;mxGraph.prototype.model=null;mxGraph.prototype.view=null;mxGraph.prototype.stylesheet=null;mxGraph.prototype.selectionModel=null;mxGraph.prototype.cellEditor=null;mxGraph.prototype.cellRenderer=null;mxGraph.prototype.multiplicities=null;mxGraph.prototype.renderHint=null;mxGraph.prototype.dialect=null;mxGraph.prototype.gridSize=10;mxGraph.prototype.gridEnabled=!0;mxGraph.prototype.portsEnabled=!0;mxGraph.prototype.nativeDblClickEnabled=!0;mxGraph.prototype.doubleTapEnabled=!0;mxGraph.prototype.doubleTapTimeout=500;mxGraph.prototype.doubleTapTolerance=25;mxGraph.prototype.lastTouchY=0;mxGraph.prototype.lastTouchY=0;mxGraph.prototype.lastTouchTime=0;mxGraph.prototype.tapAndHoldEnabled=!0;mxGraph.prototype.tapAndHoldDelay=350;mxGraph.prototype.tapAndHoldInProgress=!1;mxGraph.prototype.tapAndHoldValid=!1;mxGraph.prototype.initialTouchX=0;mxGraph.prototype.initialTouchY=0;mxGraph.prototype.tolerance=4;mxGraph.prototype.defaultOverlap=.5;mxGraph.prototype.defaultParent=null;mxGraph.prototype.alternateEdgeStyle=null;mxGraph.prototype.backgroundImage=null;mxGraph.prototype.pageVisible=!1;mxGraph.prototype.pageBreaksVisible=!1;mxGraph.prototype.pageBreakColor="gray";mxGraph.prototype.pageBreakDashed=!0;mxGraph.prototype.minPageBreakDist=20;mxGraph.prototype.preferPageSize=!1;mxGraph.prototype.pageFormat=mxConstants$1.PAGE_FORMAT_A4_PORTRAIT;mxGraph.prototype.pageScale=1.5;mxGraph.prototype.enabled=!0;mxGraph.prototype.escapeEnabled=!0;mxGraph.prototype.invokesStopCellEditing=!0;mxGraph.prototype.enterStopsCellEditing=!1;mxGraph.prototype.useScrollbarsForPanning=!0;mxGraph.prototype.exportEnabled=!0;mxGraph.prototype.importEnabled=!0;mxGraph.prototype.cellsLocked=!1;mxGraph.prototype.cellsCloneable=!0;mxGraph.prototype.foldingEnabled=!0;mxGraph.prototype.cellsEditable=!0;mxGraph.prototype.cellsDeletable=!0;mxGraph.prototype.cellsMovable=!0;mxGraph.prototype.edgeLabelsMovable=!0;mxGraph.prototype.vertexLabelsMovable=!1;mxGraph.prototype.dropEnabled=!1;mxGraph.prototype.splitEnabled=!0;mxGraph.prototype.cellsResizable=!0;mxGraph.prototype.cellsBendable=!0;mxGraph.prototype.cellsSelectable=!0;mxGraph.prototype.cellsDisconnectable=!0;mxGraph.prototype.autoSizeCells=!1;mxGraph.prototype.autoSizeCellsOnAdd=!1;mxGraph.prototype.autoScroll=!0;mxGraph.prototype.ignoreScrollbars=!1;mxGraph.prototype.translateToScrollPosition=!1;mxGraph.prototype.timerAutoScroll=!1;mxGraph.prototype.allowAutoPanning=!1;mxGraph.prototype.autoExtend=!0;mxGraph.prototype.maximumGraphBounds=null;mxGraph.prototype.minimumGraphSize=null;mxGraph.prototype.minimumContainerSize=null;mxGraph.prototype.maximumContainerSize=null;mxGraph.prototype.resizeContainer=!1;mxGraph.prototype.border=0;mxGraph.prototype.keepEdgesInForeground=!1;mxGraph.prototype.keepEdgesInBackground=!1;mxGraph.prototype.allowNegativeCoordinates=!0;mxGraph.prototype.constrainChildren=!0;mxGraph.prototype.constrainRelativeChildren=!1;mxGraph.prototype.extendParents=!0;mxGraph.prototype.extendParentsOnAdd=!0;mxGraph.prototype.extendParentsOnMove=!1;mxGraph.prototype.recursiveResize=!1;mxGraph.prototype.collapseToPreferredSize=!0;mxGraph.prototype.zoomFactor=1.2;mxGraph.prototype.keepSelectionVisibleOnZoom=!1;mxGraph.prototype.centerZoom=!0;mxGraph.prototype.resetViewOnRootChange=!0;mxGraph.prototype.resetEdgesOnResize=!1;mxGraph.prototype.resetEdgesOnMove=!1;mxGraph.prototype.resetEdgesOnConnect=!0;mxGraph.prototype.allowLoops=!1;mxGraph.prototype.defaultLoopStyle=mxEdgeStyle$1.Loop;mxGraph.prototype.multigraph=!0;mxGraph.prototype.connectableEdges=!1;mxGraph.prototype.allowDanglingEdges=!0;mxGraph.prototype.cloneInvalidEdges=!1;mxGraph.prototype.disconnectOnMove=!0;mxGraph.prototype.labelsVisible=!0;mxGraph.prototype.htmlLabels=!1;mxGraph.prototype.swimlaneSelectionEnabled=!0;mxGraph.prototype.swimlaneNesting=!0;mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants$1.STYLE_FILLCOLOR;mxGraph.prototype.imageBundles=null;mxGraph.prototype.minFitScale=.1;mxGraph.prototype.maxFitScale=8;mxGraph.prototype.panDx=0;mxGraph.prototype.panDy=0;mxGraph.prototype.collapsedImage=new mxImage(mxClient$1.imageBasePath+"/collapsed.gif",9,9);mxGraph.prototype.expandedImage=new mxImage(mxClient$1.imageBasePath+"/expanded.gif",9,9);mxGraph.prototype.warningImage=new mxImage(mxClient$1.imageBasePath+"/warning"+(mxClient$1.IS_MAC?".png":".gif"),16,16);mxGraph.prototype.alreadyConnectedResource=mxClient$1.language!="none"?"alreadyConnected":"";mxGraph.prototype.containsValidationErrorsResource=mxClient$1.language!="none"?"containsValidationErrors":"";mxGraph.prototype.collapseExpandResource=mxClient$1.language!="none"?"collapse-expand":"";mxGraph.prototype.init=function(t){this.container=t,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent$1.addListener(t,"mouseleave",mxUtils$1.bind(this,function(e){this.tooltipHandler!=null&&this.tooltipHandler.div!=null&&this.tooltipHandler.div!=e.relatedTarget&&this.tooltipHandler.hide()})),mxClient$1.IS_IE&&(mxEvent$1.addListener(window,"unload",mxUtils$1.bind(this,function(){this.destroy()})),mxEvent$1.addListener(t,"selectstart",mxUtils$1.bind(this,function(e){return this.isEditing()||!this.isMouseDown&&!mxEvent$1.isShiftDown(e)})))};mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()};mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)};mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)};mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)};mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)};mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)};mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)};mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)};mxGraph.prototype.createStylesheet=function(){return new mxStylesheet};mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)};mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer};mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)};mxGraph.prototype.getModel=function(){return this.model};mxGraph.prototype.getView=function(){return this.view};mxGraph.prototype.getStylesheet=function(){return this.stylesheet};mxGraph.prototype.setStylesheet=function(t){this.stylesheet=t};mxGraph.prototype.getSelectionModel=function(){return this.selectionModel};mxGraph.prototype.setSelectionModel=function(t){this.selectionModel=t};mxGraph.prototype.getSelectionCellsForChanges=function(t,e){for(var i=new mxDictionary$1,n=[],r=mxUtils$1.bind(this,function(a){if(a!=null&&!i.get(a)&&this.model.contains(a)&&!this.model.isLayer(a))if(this.model.isEdge(a)||this.model.isVertex(a))i.put(a,!0),n.push(a);else for(var o=this.model.getChildCount(a),u=0;u<o;u++)r(this.model.getChildAt(a,u))}),l=0;l<t.length;l++){var s=t[l];s.constructor!=mxRootChange&&(e==null||!e(s))&&r(this.getCellForChange(s))}return n};mxGraph.prototype.getCellForChange=function(t){var e=null;return t instanceof mxChildChange$1?e=t.child:t.cell!=null&&t.cell instanceof mxCell$2&&(e=t.cell),e};mxGraph.prototype.graphModelChanged=function(t){for(var e=0;e<t.length;e++)this.processChange(t[e]);this.updateSelection(),this.view.validate(),this.sizeDidChange()};mxGraph.prototype.updateSelection=function(){for(var t=this.getSelectionCells(),e=[],i=0;i<t.length;i++)if(!this.model.contains(t[i])||!this.isCellVisible(t[i]))e.push(t[i]);else for(var n=this.model.getParent(t[i]);n!=null&&n!=this.view.currentRoot;){if(this.isCellCollapsed(n)||!this.isCellVisible(n)){e.push(t[i]);break}n=this.model.getParent(n)}this.removeSelectionCells(e)};mxGraph.prototype.processChange=function(t){if(t instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(t.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT));else if(t instanceof mxChildChange$1){var e=this.model.getParent(t.child);this.view.invalidate(t.child,!0,!0),(!this.model.contains(e)||this.isCellCollapsed(e))&&(this.view.invalidate(t.child,!0,!0),this.removeStateForCell(t.child),this.view.currentRoot==t.child&&this.home()),e!=t.previous&&(e!=null&&this.view.invalidate(e,!1,!1),t.previous!=null&&this.view.invalidate(t.previous,!1,!1))}else if(t instanceof mxTerminalChange$1||t instanceof mxGeometryChange$1)(t instanceof mxTerminalChange$1||t.previous==null&&t.geometry!=null||t.previous!=null&&!t.previous.equals(t.geometry))&&this.view.invalidate(t.cell);else if(t instanceof mxValueChange$1)this.view.invalidate(t.cell,!1,!1);else if(t instanceof mxStyleChange$1){this.view.invalidate(t.cell,!0,!0);var i=this.view.getState(t.cell);i!=null&&(i.invalidStyle=!0)}else t.cell!=null&&t.cell instanceof mxCell$2&&this.removeStateForCell(t.cell)};mxGraph.prototype.removeStateForCell=function(t){for(var e=this.model.getChildCount(t),i=0;i<e;i++)this.removeStateForCell(this.model.getChildAt(t,i));this.view.invalidate(t,!1,!0),this.view.removeState(t)};mxGraph.prototype.addCellOverlay=function(t,e){t.overlays==null&&(t.overlays=[]),t.overlays.push(e);var i=this.view.getState(t);return i!=null&&this.cellRenderer.redraw(i),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_OVERLAY,"cell",t,"overlay",e)),e};mxGraph.prototype.getCellOverlays=function(t){return t.overlays};mxGraph.prototype.removeCellOverlay=function(t,e){if(e==null)this.removeCellOverlays(t);else{var i=mxUtils$1.indexOf(t.overlays,e);if(i>=0){t.overlays.splice(i,1),t.overlays.length==0&&(t.overlays=null);var n=this.view.getState(t);n!=null&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_OVERLAY,"cell",t,"overlay",e))}else e=null}return e};mxGraph.prototype.removeCellOverlays=function(t){var e=t.overlays;if(e!=null){t.overlays=null;var i=this.view.getState(t);i!=null&&this.cellRenderer.redraw(i);for(var n=0;n<e.length;n++)this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_OVERLAY,"cell",t,"overlay",e[n]))}return e};mxGraph.prototype.clearCellOverlays=function(t){t=t??this.model.getRoot(),this.removeCellOverlays(t);for(var e=this.model.getChildCount(t),i=0;i<e;i++){var n=this.model.getChildAt(t,i);this.clearCellOverlays(n)}};mxGraph.prototype.setCellWarning=function(t,e,i,n){if(e!=null&&e.length>0){i=i??this.warningImage;var r=new mxCellOverlay(i,"<font color=red>"+e+"</font>");return n&&r.addListener(mxEvent$1.CLICK,mxUtils$1.bind(this,function(l,s){this.isEnabled()&&this.setSelectionCell(t)})),this.addCellOverlay(t,r)}else this.removeCellOverlays(t);return null};mxGraph.prototype.startEditing=function(t,e){this.startEditingAtCell(null,t,e)};mxGraph.prototype.startEditingAtCell=function(t,e,i){(e==null||!mxEvent$1.isMultiTouchEvent(e))&&(t==null&&(t=this.getSelectionCell(),t!=null&&!this.isCellEditable(t)&&(t=null)),t!=null&&(this.fireEvent(new mxEventObject$1(mxEvent$1.START_EDITING,"cell",t,"event",e)),this.cellEditor.startEditing(t,e,i),this.fireEvent(new mxEventObject$1(mxEvent$1.EDITING_STARTED,"cell",t,"event",e))))};mxGraph.prototype.getEditingValue=function(t,e){return this.convertValueToString(t)};mxGraph.prototype.stopEditing=function(t){this.cellEditor.stopEditing(t),this.fireEvent(new mxEventObject$1(mxEvent$1.EDITING_STOPPED,"cancel",t))};mxGraph.prototype.labelChanged=function(t,e,i){this.model.beginUpdate();try{var n=t.value;this.cellLabelChanged(t,e,this.isAutoSizeCell(t)),this.fireEvent(new mxEventObject$1(mxEvent$1.LABEL_CHANGED,"cell",t,"value",e,"old",n,"event",i))}finally{this.model.endUpdate()}return t};mxGraph.prototype.cellLabelChanged=function(t,e,i){this.model.beginUpdate();try{this.model.setValue(t,e),i&&this.cellSizeUpdated(t,!1)}finally{this.model.endUpdate()}};mxGraph.prototype.escape=function(t){this.fireEvent(new mxEventObject$1(mxEvent$1.ESCAPE,"event",t))};mxGraph.prototype.click=function(t){var e=t.getEvent(),i=t.getCell(),n=new mxEventObject$1(mxEvent$1.CLICK,"event",e,"cell",i);if(t.isConsumed()&&n.consume(),this.fireEvent(n),this.isEnabled()&&!mxEvent$1.isConsumed(e)&&!n.isConsumed()){if(i!=null){if(this.isTransparentClickEvent(e)){var r=!1,l=this.getCellAt(t.graphX,t.graphY,null,null,null,mxUtils$1.bind(this,function(d){var p=this.isCellSelected(d.cell);return r=r||p,!r||p||d.cell!=i&&this.model.isAncestor(d.cell,i)}));l!=null&&(i=l)}}else if(this.isSwimlaneSelectionEnabled()&&(i=this.getSwimlaneAt(t.getGraphX(),t.getGraphY()),i!=null&&(!this.isToggleEvent(e)||!mxEvent$1.isAltDown(e)))){for(var s=i,a=[];s!=null;){s=this.model.getParent(s);var o=this.view.getState(s);this.isSwimlane(s)&&o!=null&&a.push(s)}if(a.length>0){a=a.reverse(),a.splice(0,0,i),a.push(i);for(var u=0;u<a.length-1;u++)this.isCellSelected(a[u])&&(i=a[this.isToggleEvent(e)?u:u+1])}}i!=null?this.selectCellForEvent(i,e):this.isToggleEvent(e)||this.clearSelection()}};mxGraph.prototype.isSiblingSelected=function(t){for(var e=this.model,i=e.getParent(t),n=e.getChildCount(i),r=0;r<n;r++){var l=e.getChildAt(i,r);if(t!=l&&this.isCellSelected(l))return!0}return!1};mxGraph.prototype.dblClick=function(t,e){var i=new mxEventObject$1(mxEvent$1.DOUBLE_CLICK,"event",t,"cell",e);this.fireEvent(i),this.isEnabled()&&!mxEvent$1.isConsumed(t)&&!i.isConsumed()&&e!=null&&this.isCellEditable(e)&&!this.isEditing(e)&&(this.startEditingAtCell(e,t),mxEvent$1.consume(t))};mxGraph.prototype.tapAndHold=function(t){var e=t.getEvent(),i=new mxEventObject$1(mxEvent$1.TAP_AND_HOLD,"event",e,"cell",t.getCell());if(this.fireEvent(i),i.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent$1.isConsumed(e)&&!i.isConsumed()&&this.connectionHandler.isEnabled()){var n=this.view.getState(this.connectionHandler.marker.getCell(t));n!=null&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=n,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint$1(t.getGraphX(),t.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(t),this.connectionHandler.previous=n,this.connectionHandler.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.connectionHandler.previous)))}};mxGraph.prototype.scrollPointToVisible=function(t,e,i,n){if(!this.timerAutoScroll&&(this.ignoreScrollbars||mxUtils$1.hasScrollbars(this.container))){var r=this.container;if(n=n??20,t>=r.scrollLeft&&e>=r.scrollTop&&t<=r.scrollLeft+r.clientWidth&&e<=r.scrollTop+r.clientHeight){var l=r.scrollLeft+r.clientWidth-t;if(l<n){var s=r.scrollLeft;if(r.scrollLeft+=n-l,i&&s==r.scrollLeft){if(this.dialect==mxConstants$1.DIALECT_SVG){var a=this.view.getDrawPane().ownerSVGElement,o=this.container.scrollWidth+n-l;a.style.width=o+"px"}else{var o=Math.max(r.clientWidth,r.scrollWidth)+n-l,u=this.view.getCanvas();u.style.width=o+"px"}r.scrollLeft+=n-l}}else l=t-r.scrollLeft,l<n&&(r.scrollLeft-=n-l);var d=r.scrollTop+r.clientHeight-e;if(d<n){var s=r.scrollTop;if(r.scrollTop+=n-d,s==r.scrollTop&&i){if(this.dialect==mxConstants$1.DIALECT_SVG){var a=this.view.getDrawPane().ownerSVGElement,p=this.container.scrollHeight+n-d;a.style.height=p+"px"}else{var p=Math.max(r.clientHeight,r.scrollHeight)+n-d,u=this.view.getCanvas();u.style.height=p+"px"}r.scrollTop+=n-d}}else d=e-r.scrollTop,d<n&&(r.scrollTop-=n-d)}}else this.allowAutoPanning&&!this.panningHandler.isActive()&&(this.panningManager==null&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(t+this.panDx,e+this.panDy))};mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)};mxGraph.prototype.getBorderSizes=function(){var t=mxUtils$1.getCurrentStyle(this.container);return new mxRectangle$1(mxUtils$1.parseCssNumber(t.paddingLeft)+(t.borderLeftStyle!="none"?mxUtils$1.parseCssNumber(t.borderLeftWidth):0),mxUtils$1.parseCssNumber(t.paddingTop)+(t.borderTopStyle!="none"?mxUtils$1.parseCssNumber(t.borderTopWidth):0),mxUtils$1.parseCssNumber(t.paddingRight)+(t.borderRightStyle!="none"?mxUtils$1.parseCssNumber(t.borderRightWidth):0),mxUtils$1.parseCssNumber(t.paddingBottom)+(t.borderBottomStyle!="none"?mxUtils$1.parseCssNumber(t.borderBottomWidth):0))};mxGraph.prototype.getPreferredPageSize=function(t,e,i){this.view.scale;var n=this.view.translate,r=this.pageFormat,l=this.pageScale,s=new mxRectangle$1(0,0,Math.ceil(r.width*l),Math.ceil(r.height*l)),a=this.pageBreaksVisible?Math.ceil(e/s.width):1,o=this.pageBreaksVisible?Math.ceil(i/s.height):1;return new mxRectangle$1(0,0,a*s.width+2+n.x,o*s.height+2+n.y)};mxGraph.prototype.fit=function(t,e,i,n,r,l,s){if(this.container!=null){t=t??this.getBorder(),e=e??!1,i=i??0,n=n??!0,r=r??!1,l=l??!1;var a=this.getBorderSizes(),o=this.container.offsetWidth-a.x-a.width-1,u=s??this.container.offsetHeight-a.y-a.height-1,d=this.view.getGraphBounds();if(d.width>0&&d.height>0){e&&d.x!=null&&d.y!=null&&(d=d.clone(),d.width+=d.x,d.height+=d.y,d.x=0,d.y=0);var p=this.view.scale,c=d.width/p,g=d.height/p;this.backgroundImage!=null&&this.backgroundImage.width!=null&&this.backgroundImage.height!=null&&(c=Math.max(c,this.backgroundImage.width-d.x/p),g=Math.max(g,this.backgroundImage.height-d.y/p));var x=(e?t:2*t)+i+1;o-=x,u-=x;var C=r?u/g:l?o/c:Math.min(o/c,u/g);if(this.minFitScale!=null&&(C=Math.max(C,this.minFitScale)),this.maxFitScale!=null&&(C=Math.min(C,this.maxFitScale)),n)if(e)this.view.scale!=C&&this.view.setScale(C);else if(mxUtils$1.hasScrollbars(this.container)){this.view.setScale(C);var R=this.getGraphBounds();R.x!=null&&(this.container.scrollLeft=R.x),R.y!=null&&(this.container.scrollTop=R.y)}else{var T=d.x!=null?Math.floor(this.view.translate.x-d.x/p+t/C+i/2):t,A=d.y!=null?Math.floor(this.view.translate.y-d.y/p+t/C+i/2):t;this.view.scaleAndTranslate(C,T,A)}else return C}}return this.view.scale};mxGraph.prototype.sizeDidChange=function(){var t=this.getGraphBounds();if(this.container!=null){var e=this.getBorder(),i=Math.max(0,t.x)+t.width+2*e,n=Math.max(0,t.y)+t.height+2*e;if(this.minimumContainerSize!=null&&(i=Math.max(i,this.minimumContainerSize.width),n=Math.max(n,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(i,n),this.preferPageSize||!mxClient$1.IS_IE&&this.pageVisible){var r=this.getPreferredPageSize(t,Math.max(1,i),Math.max(1,n));r!=null&&(i=r.width*this.view.scale,n=r.height*this.view.scale)}if(this.minimumGraphSize!=null&&(i=Math.max(i,this.minimumGraphSize.width*this.view.scale),n=Math.max(n,this.minimumGraphSize.height*this.view.scale)),i=Math.ceil(i),n=Math.ceil(n),this.dialect==mxConstants$1.DIALECT_SVG){var l=this.view.getDrawPane().ownerSVGElement;l!=null&&(l.style.minWidth=Math.max(1,i)+"px",l.style.minHeight=Math.max(1,n)+"px",l.style.width="100%",l.style.height="100%")}else this.view.canvas.style.minWidth=Math.max(1,i)+"px",this.view.canvas.style.minHeight=Math.max(1,n)+"px";this.updatePageBreaks(this.pageBreaksVisible,i,n)}this.fireEvent(new mxEventObject$1(mxEvent$1.SIZE,"bounds",t))};mxGraph.prototype.doResizeContainer=function(t,e){this.maximumContainerSize!=null&&(t=Math.min(this.maximumContainerSize.width,t),e=Math.min(this.maximumContainerSize.height,e)),this.container.style.width=Math.ceil(t)+"px",this.container.style.height=Math.ceil(e)+"px"};mxGraph.prototype.updatePageBreaks=function(t,e,i){var n=this.view.scale,r=this.view.translate,l=this.pageFormat,s=n*this.pageScale,a=new mxRectangle$1(0,0,l.width*s,l.height*s),o=mxRectangle$1.fromRectangle(this.getGraphBounds());o.width=Math.max(1,o.width),o.height=Math.max(1,o.height),a.x=Math.floor((o.x-r.x*n)/a.width)*a.width+r.x*n,a.y=Math.floor((o.y-r.y*n)/a.height)*a.height+r.y*n,o.width=Math.ceil((o.width+(o.x-a.x))/a.width)*a.width,o.height=Math.ceil((o.height+(o.y-a.y))/a.height)*a.height,t=t&&Math.min(a.width,a.height)>this.minPageBreakDist;var u=t?Math.ceil(o.height/a.height)+1:0,d=t?Math.ceil(o.width/a.width)+1:0,p=(d-1)*a.width,c=(u-1)*a.height;this.horizontalPageBreaks==null&&u>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&d>0&&(this.verticalPageBreaks=[]);var g=mxUtils$1.bind(this,function(x){if(x!=null){for(var C=x==this.horizontalPageBreaks?u:d,T=0;T<=C;T++){var A=x==this.horizontalPageBreaks?[new mxPoint$1(Math.round(a.x),Math.round(a.y+T*a.height)),new mxPoint$1(Math.round(a.x+p),Math.round(a.y+T*a.height))]:[new mxPoint$1(Math.round(a.x+T*a.width),Math.round(a.y)),new mxPoint$1(Math.round(a.x+T*a.width),Math.round(a.y+c))];if(x[T]!=null)x[T].points=A,x[T].redraw();else{var R=new mxPolyline(A,this.pageBreakColor);R.dialect=this.dialect,R.pointerEvents=!1,R.isDashed=this.pageBreakDashed,R.init(this.view.backgroundPane),R.redraw(),x[T]=R}}for(var T=C;T<x.length;T++)x[T].destroy();x.splice(C,x.length-C)}});g(this.horizontalPageBreaks),g(this.verticalPageBreaks)};mxGraph.prototype.getCurrentCellStyle=function(t,e){var i=e?null:this.view.getState(t);return i!=null?i.style:this.getCellStyle(t)};mxGraph.prototype.getCellStyle=function(t,e){e=e??!0;var i=this.model.getStyle(t),n=null;return this.model.isEdge(t)?n=this.stylesheet.getDefaultEdgeStyle():n=this.stylesheet.getDefaultVertexStyle(),i!=null&&i.length>0?n=this.stylesheet.getCellStyle(i,n,e):n!=null&&(n=mxUtils$1.clone(n)),n==null?n=new Object:e&&(n=this.postProcessCellStyle(t,n)),n};mxGraph.prototype.postProcessCellStyle=function(t,e){if(e!=null){var i=e[mxConstants$1.STYLE_IMAGE],n=this.getImageFromBundles(i);if(n!=null?e[mxConstants$1.STYLE_IMAGE]=n:n=i,n!=null&&typeof n.substring=="function"&&n.substring(0,11)=="data:image/"){if(n.substring(0,20)=="data:image/svg+xml,<")n=n.substring(0,19)+encodeURIComponent(n.substring(19));else if(n.substring(0,22)!="data:image/svg+xml,%3C"){var r=n.indexOf(",");r>0&&n.substring(r-7,r+1)!=";base64,"&&(n=n.substring(0,r)+";base64,"+n.substring(r+1))}e[mxConstants$1.STYLE_IMAGE]=n}}return e};mxGraph.prototype.setCellStyle=function(t,e){if(e=e||this.getSelectionCells(),e!=null){this.model.beginUpdate();try{for(var i=0;i<e.length;i++)this.model.setStyle(e[i],t)}finally{this.model.endUpdate()}}};mxGraph.prototype.toggleCellStyle=function(t,e,i){return i=i||this.getSelectionCell(),this.toggleCellStyles(t,e,[i])};mxGraph.prototype.toggleCellStyles=function(t,e,i){e=e??!1,i=i||this.getEditableCells(this.getSelectionCells());var n=null;if(i!=null&&i.length>0){var r=this.getCurrentCellStyle(i[0]);n=mxUtils$1.getValue(r,t,e)?0:1,this.setCellStyles(t,n,i)}return n};mxGraph.prototype.setCellStyles=function(t,e,i){i=i||this.getEditableCells(this.getSelectionCells()),mxUtils$1.setCellStyles(this.model,i,t,e)};mxGraph.prototype.toggleCellStyleFlags=function(t,e,i){this.setCellStyleFlags(t,e,null,i)};mxGraph.prototype.setCellStyleFlags=function(t,e,i,n){if(n=n||this.getEditableCells(this.getSelectionCells()),n!=null&&n.length>0){if(i==null){var r=this.getCurrentCellStyle(n[0]),l=parseInt(r[t]||0);i=(l&e)!=e}mxUtils$1.setCellStyleFlags(this.model,n,t,e,i)}};mxGraph.prototype.getOriginForCell=function(t){for(var e=this.model.getParent(t),i=new mxPoint$1;e!=null;){var n=this.getCellGeometry(e);n!=null&&!n.relative&&(i.x+=n.x,i.y+=n.y),e=this.model.getParent(e)}return i};mxGraph.prototype.alignCells=function(t,e,i){if(e==null&&(e=this.getMovableCells(this.getSelectionCells())),e!=null&&e.length>1){if(i==null)for(var n=0;n<e.length;n++){var r=this.getOriginForCell(e[n]),l=this.getCellGeometry(e[n]);if(!this.model.isEdge(e[n])&&l!=null&&!l.relative)if(i==null)if(t==mxConstants$1.ALIGN_CENTER){i=r.x+l.x+l.width/2;break}else if(t==mxConstants$1.ALIGN_RIGHT)i=r.x+l.x+l.width;else if(t==mxConstants$1.ALIGN_TOP)i=r.y+l.y;else if(t==mxConstants$1.ALIGN_MIDDLE){i=r.y+l.y+l.height/2;break}else t==mxConstants$1.ALIGN_BOTTOM?i=r.y+l.y+l.height:i=r.x+l.x;else t==mxConstants$1.ALIGN_RIGHT?i=Math.max(i,r.x+l.x+l.width):t==mxConstants$1.ALIGN_TOP?i=Math.min(i,r.y+l.y):t==mxConstants$1.ALIGN_BOTTOM?i=Math.max(i,r.y+l.y+l.height):i=Math.min(i,r.x+l.x)}if(i!=null){e=mxUtils$1.sortCells(e),this.model.beginUpdate();try{for(var n=0;n<e.length;n++){var r=this.getOriginForCell(e[n]),l=this.getCellGeometry(e[n]);!this.model.isEdge(e[n])&&l!=null&&!l.relative&&(l=l.clone(),t==mxConstants$1.ALIGN_CENTER?l.x=i-r.x-l.width/2:t==mxConstants$1.ALIGN_RIGHT?l.x=i-r.x-l.width:t==mxConstants$1.ALIGN_TOP?l.y=i-r.y:t==mxConstants$1.ALIGN_MIDDLE?l.y=i-r.y-l.height/2:t==mxConstants$1.ALIGN_BOTTOM?l.y=i-r.y-l.height:l.x=i-r.x,this.resizeCell(e[n],l))}this.fireEvent(new mxEventObject$1(mxEvent$1.ALIGN_CELLS,"align",t,"cells",e))}finally{this.model.endUpdate()}}}return e};mxGraph.prototype.flipEdge=function(t){if(t!=null&&this.alternateEdgeStyle!=null){this.model.beginUpdate();try{var e=this.model.getStyle(t);e==null||e.length==0?this.model.setStyle(t,this.alternateEdgeStyle):this.model.setStyle(t,null),this.resetEdge(t),this.fireEvent(new mxEventObject$1(mxEvent$1.FLIP_EDGE,"edge",t))}finally{this.model.endUpdate()}}return t};mxGraph.prototype.addImageBundle=function(t){this.imageBundles.push(t)};mxGraph.prototype.removeImageBundle=function(t){for(var e=[],i=0;i<this.imageBundles.length;i++)this.imageBundles[i]!=t&&e.push(this.imageBundles[i]);this.imageBundles=e};mxGraph.prototype.getImageFromBundles=function(t){if(t!=null)for(var e=0;e<this.imageBundles.length;e++){var i=this.imageBundles[e].getImage(t);if(i!=null)return i}return null};mxGraph.prototype.orderCells=function(t,e,i){e==null&&(e=mxUtils$1.sortCells(this.getEditableCells(this.getSelectionCells()),!0)),this.model.beginUpdate();try{this.cellsOrdered(e,t,i),this.fireEvent(new mxEventObject$1(mxEvent$1.ORDER_CELLS,"back",t,"cells",e,"increment",i))}finally{this.model.endUpdate()}return e};mxGraph.prototype.cellsOrdered=function(t,e,i){if(t!=null){this.model.beginUpdate();try{for(var n=0;n<t.length;n++){var r=this.model.getParent(t[n]);e?i?this.model.add(r,t[n],Math.max(0,r.getIndex(t[n])-1)):this.model.add(r,t[n],n):i?this.model.add(r,t[n],Math.min(this.model.getChildCount(r)-1,r.getIndex(t[n])+1)):this.model.add(r,t[n],this.model.getChildCount(r)-1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ORDERED,"back",e,"cells",t,"increment",i))}finally{this.model.endUpdate()}}};mxGraph.prototype.groupCells=function(t,e,i){i==null&&(i=mxUtils$1.sortCells(this.getSelectionCells(),!0)),i=this.getCellsForGroup(i),t==null&&(t=this.createGroupCell(i));var n=this.getBoundsForGroup(t,i,e);if(i.length>1&&n!=null){var r=this.model.getParent(t);r==null&&(r=this.model.getParent(i[0])),this.model.beginUpdate();try{this.getCellGeometry(t)==null&&this.model.setGeometry(t,new mxGeometry$2),this.cellsResized([t],[n],!1);var l=this.model.getChildCount(r);this.cellsAdded([t],r,l,null,null,!1,!1,!1),l=this.model.getChildCount(t),this.cellsAdded(i,t,l,null,null,!1,!1,!1),this.cellsMoved(i,-n.x,-n.y,!1,!1,!1),this.fireEvent(new mxEventObject$1(mxEvent$1.GROUP_CELLS,"group",t,"border",e,"cells",i))}finally{this.model.endUpdate()}}return t};mxGraph.prototype.getCellsForGroup=function(t){var e=[];if(t!=null&&t.length>0){var i=this.model.getParent(t[0]);e.push(t[0]);for(var n=1;n<t.length;n++)this.model.getParent(t[n])==i&&e.push(t[n])}return e};mxGraph.prototype.getBoundsForGroup=function(t,e,i){var n=this.getBoundingBoxFromGeometry(e,!0);if(n!=null){if(this.isSwimlane(t)){var r=this.getStartSize(t);n.x-=r.width,n.y-=r.height,n.width+=r.width,n.height+=r.height}i!=null&&(n.x-=i,n.y-=i,n.width+=2*i,n.height+=2*i)}return n};mxGraph.prototype.createGroupCell=function(t){var e=new mxCell$2("");return e.setVertex(!0),e.setConnectable(!1),e};mxGraph.prototype.ungroupCells=function(t){var e=[];if(t==null&&(t=this.getCellsForUngroup()),t!=null&&t.length>0){this.model.beginUpdate();try{for(var i=0;i<t.length;i++){var n=this.model.getChildren(t[i]);if(n!=null&&n.length>0){n=n.slice();var r=this.model.getParent(t[i]),l=this.model.getChildCount(r);this.cellsAdded(n,r,l,null,null,!0),e=e.concat(n);for(var s=0;s<n.length;s++)if(this.model.isVertex(n[s])){var a=this.view.getState(n[s]),o=this.getCellGeometry(n[s]);a!=null&&o!=null&&o.relative&&(o=o.clone(),o.x=a.origin.x,o.y=a.origin.y,o.relative=!1,this.model.setGeometry(n[s],o))}}}this.removeCellsAfterUngroup(t),this.fireEvent(new mxEventObject$1(mxEvent$1.UNGROUP_CELLS,"cells",t))}finally{this.model.endUpdate()}}return e};mxGraph.prototype.getCellsForUngroup=function(){for(var t=this.getEditableCells(this.getSelectionCells()),e=[],i=0;i<t.length;i++)this.model.isVertex(t[i])&&this.model.getChildCount(t[i])>0&&e.push(t[i]);return e};mxGraph.prototype.removeCellsAfterUngroup=function(t){this.cellsRemoved(this.addAllEdges(t))};mxGraph.prototype.removeCellsFromParent=function(t){t==null&&(t=this.getSelectionCells()),this.model.beginUpdate();try{var e=this.getDefaultParent(),i=this.model.getChildCount(e);this.cellsAdded(t,e,i,null,null,!0),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_CELLS_FROM_PARENT,"cells",t))}finally{this.model.endUpdate()}return t};mxGraph.prototype.updateGroupBounds=function(t,e,i,n,r,l,s){t==null&&(t=this.getSelectionCells()),e=e??0,i=i??!1,n=n??0,r=r??0,l=l??0,s=s??0,this.model.beginUpdate();try{for(var a=t.length-1;a>=0;a--){var o=this.getCellGeometry(t[a]);if(o!=null){var u=this.getChildCells(t[a]);if(u!=null&&u.length>0){var d=this.getBoundingBoxFromGeometry(u,!0);if(d!=null&&d.width>0&&d.height>0){var p=this.isSwimlane(t[a])?this.getActualStartSize(t[a],!0):new mxRectangle$1;o=o.clone(),i&&(o.x=Math.round(o.x+d.x-e-p.x-s),o.y=Math.round(o.y+d.y-e-p.y-n)),o.width=Math.round(d.width+2*e+p.x+s+r+p.width),o.height=Math.round(d.height+2*e+p.y+n+l+p.height),this.model.setGeometry(t[a],o),this.moveCells(u,e+p.x-d.x+s,e+p.y-d.y+n)}}}}}finally{this.model.endUpdate()}return t};mxGraph.prototype.getBoundingBox=function(t){var e=null;if(t!=null&&t.length>0){for(var i=0;i<t.length;i++)if(this.model.isVertex(t[i])||this.model.isEdge(t[i])){var n=this.view.getBoundingBox(this.view.getState(t[i]),!0);n!=null&&(e==null?e=mxRectangle$1.fromRectangle(n):e.add(n))}}return e};mxGraph.prototype.cloneCell=function(t,e,i,n){return this.cloneCells([t],e,i,n)[0]};mxGraph.prototype.cloneCells=function(t,e,i,n){e=e??!0;var r=null;if(t!=null){for(var l=new mxDictionary$1,s=[],a=0;a<t.length;a++)l.put(t[a],!0),s.push(t[a]);if(s.length>0){var o=this.view.scale,u=this.view.translate;r=this.model.cloneCells(t,!0,i);for(var a=0;a<t.length;a++)if(!e&&this.model.isEdge(r[a])&&this.getEdgeValidationError(r[a],this.model.getTerminal(r[a],!0),this.model.getTerminal(r[a],!1))!=null)r[a]=null;else{var d=this.model.getGeometry(r[a]);if(d!=null){var p=this.view.getState(t[a]),c=this.view.getState(this.model.getParent(t[a]));if(p!=null&&c!=null){var g=c.origin.x,x=c.origin.y;if(this.model.isEdge(r[a])){var C=p.absolutePoints;if(C!=null){var T=this.model.getTerminal(t[a],!0);if(T!=null){for(;T!=null&&!l.get(T);)T=this.model.getParent(T);T==null&&C[0]!=null&&d.setTerminalPoint(new mxPoint$1(Math.round(C[0].x/o-u.x-g),Math.round(C[0].y/o-u.y-x)),!0)}if(!n){var A=d.getTerminalPoint(!0);A!=null&&(A.x+=g,A.y+=x)}var R=this.model.getTerminal(t[a],!1);if(R!=null){for(;R!=null&&!l.get(R);)R=this.model.getParent(R);var _=C.length-1;R==null&&C[_]!=null&&d.setTerminalPoint(new mxPoint$1(Math.round(C[_].x/o-u.x-g),Math.round(C[_].y/o-u.y-x)),!1)}if(!n){var A=d.getTerminalPoint(!1);A!=null&&(A.x+=g,A.y+=x)}var N=d.points;if(!n&&N!=null)for(var H=0;H<N.length;H++)N[H]!=null&&(N[H].x+=g,N[H].y+=x)}}else n||d.translate(g,x)}}}}else r=[]}return r};mxGraph.prototype.insertVertex=function(t,e,i,n,r,l,s,a,o){var u=this.createVertex(t,e,i,n,r,l,s,a,o);return this.addCell(u,t)};mxGraph.prototype.createVertex=function(t,e,i,n,r,l,s,a,o){var u=new mxGeometry$2(n,r,l,s);u.relative=o??!1;var d=new mxCell$2(i,u,a);return d.setId(e),d.setVertex(!0),d.setConnectable(!0),d};mxGraph.prototype.insertEdge=function(t,e,i,n,r,l){var s=this.createEdge(t,e,i,n,r,l);return this.addEdge(s,t,n,r)};mxGraph.prototype.createEdge=function(t,e,i,n,r,l){var s=new mxCell$2(i,new mxGeometry$2,l);return s.setId(e),s.setEdge(!0),s.geometry.relative=!0,s};mxGraph.prototype.addEdge=function(t,e,i,n,r){return this.addCell(t,e,r,i,n)};mxGraph.prototype.addCell=function(t,e,i,n,r){return this.addCells([t],e,i,n,r)[0]};mxGraph.prototype.addCells=function(t,e,i,n,r,l){e==null&&(e=this.getDefaultParent()),i==null&&(i=this.model.getChildCount(e)),this.model.beginUpdate();try{this.cellsAdded(t,e,i,n,r,l??!1,!0),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_CELLS,"cells",t,"parent",e,"index",i,"source",n,"target",r))}finally{this.model.endUpdate()}return t};mxGraph.prototype.cellsAdded=function(t,e,i,n,r,l,s,a){if(t!=null&&e!=null&&i!=null){this.model.beginUpdate();try{for(var o=l?this.view.getState(e):null,u=o!=null?o.origin:null,d=new mxPoint$1(0,0),p=0;p<t.length;p++)if(t[p]==null)i--;else{var c=this.model.getParent(t[p]);if(u!=null&&t[p]!=e&&e!=c){var g=this.view.getState(c),x=g!=null?g.origin:d,C=this.model.getGeometry(t[p]);if(C!=null){var T=x.x-u.x,A=x.y-u.y;C=C.clone(),C.translate(T,A),!C.relative&&this.model.isVertex(t[p])&&!this.isAllowNegativeCoordinates()&&(C.x=Math.max(0,C.x),C.y=Math.max(0,C.y)),this.model.setGeometry(t[p],C)}}e==c&&i+p>this.model.getChildCount(e)&&i--;var R=this.model.updateEdgeParent;this.model.updateEdgeParent=function(_,N){mxUtils$1.indexOf(t,_)<0&&R.apply(this,arguments)},this.model.add(e,t[p],i+p),this.model.updateEdgeParent=R,this.autoSizeCellsOnAdd&&this.autoSizeCell(t[p],!0),(a==null||a)&&this.isExtendParentsOnAdd(t[p])&&this.isExtendParent(t[p])&&this.extendParent(t[p]),(s==null||s)&&this.constrainChild(t[p]),n!=null&&this.cellConnected(t[p],n,!0),r!=null&&this.cellConnected(t[p],r,!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ADDED,"cells",t,"parent",e,"index",i,"source",n,"target",r,"absolute",l))}finally{this.model.endUpdate()}}};mxGraph.prototype.autoSizeCell=function(t,e){if(e=e??!0,e)for(var i=this.model.getChildCount(t),n=0;n<i;n++)this.autoSizeCell(this.model.getChildAt(t,n));this.getModel().isVertex(t)&&this.isAutoSizeCell(t)&&this.updateCellSize(t)};mxGraph.prototype.removeCells=function(t,e){if(e=e??!0,t==null&&(t=this.getDeletableCells(this.getSelectionCells())),e)t=this.getDeletableCells(this.addAllEdges(t));else{t=t.slice();for(var i=this.getDeletableCells(this.getAllEdges(t)),n=new mxDictionary$1,r=0;r<t.length;r++)n.put(t[r],!0);for(var r=0;r<i.length;r++)this.view.getState(i[r])==null&&!n.get(i[r])&&(n.put(i[r],!0),t.push(i[r]))}this.model.beginUpdate();try{this.cellsRemoved(t),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_CELLS,"cells",t,"includeEdges",e))}finally{this.model.endUpdate()}return t};mxGraph.prototype.cellsRemoved=function(t){if(t!=null&&t.length>0){var e=this.view.scale,i=this.view.translate;this.model.beginUpdate();try{for(var n=new mxDictionary$1,r=0;r<t.length;r++)n.put(t[r],!0);for(var r=0;r<t.length;r++){for(var l=this.getAllEdges([t[r]]),s=mxUtils$1.bind(this,function(u,d){var p=this.model.getGeometry(u);if(p!=null){for(var c=this.model.getTerminal(u,d),g=!1,x=c;x!=null;){if(t[r]==x){g=!0;break}x=this.model.getParent(x)}if(g){p=p.clone();var C=this.view.getState(u);if(C!=null&&C.absolutePoints!=null){var T=C.absolutePoints,A=d?0:T.length-1;p.setTerminalPoint(new mxPoint$1(T[A].x/e-i.x-C.origin.x,T[A].y/e-i.y-C.origin.y),d)}else{var R=this.view.getState(c);R!=null&&p.setTerminalPoint(new mxPoint$1(R.getCenterX()/e-i.x,R.getCenterY()/e-i.y),d)}this.model.setGeometry(u,p),this.model.setTerminal(u,null,d)}}}),a=0;a<l.length;a++)n.get(l[a])||(n.put(l[a],!0),s(l[a],!0),s(l[a],!1));this.model.remove(t[r])}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_REMOVED,"cells",t))}finally{this.model.endUpdate()}}};mxGraph.prototype.splitEdge=function(t,e,i,n,r,l,s,a){n=n||0,r=r||0,a=a??this.model.getParent(t);var o=this.model.getTerminal(t,!0);this.model.beginUpdate();try{if(i==null){i=this.cloneCell(t);var u=this.view.getState(t),d=this.getCellGeometry(i);if(d!=null&&d.points!=null&&u!=null){var p=this.view.translate,c=this.view.scale,g=mxUtils$1.findNearestSegment(u,(n+p.x)*c,(r+p.y)*c);d.points=d.points.slice(0,g),d=this.getCellGeometry(t),d!=null&&d.points!=null&&(d=d.clone(),d.points=d.points.slice(g),this.model.setGeometry(t,d))}}this.cellsMoved(e,n,r,!1,!1),this.cellsAdded([i],a,this.model.getChildCount(a),o,e[0],!1),this.cellsAdded(e,a,this.model.getChildCount(a),null,null,!0),this.cellConnected(t,e[0],!0),this.fireEvent(new mxEventObject$1(mxEvent$1.SPLIT_EDGE,"edge",t,"cells",e,"newEdge",i,"dx",n,"dy",r))}finally{this.model.endUpdate()}return i};mxGraph.prototype.toggleCells=function(t,e,i){e==null&&(e=this.getSelectionCells()),i&&(e=this.addAllEdges(e)),this.model.beginUpdate();try{this.cellsToggled(e,t),this.fireEvent(new mxEventObject$1(mxEvent$1.TOGGLE_CELLS,"show",t,"cells",e,"includeEdges",i))}finally{this.model.endUpdate()}return e};mxGraph.prototype.cellsToggled=function(t,e){if(t!=null&&t.length>0){this.model.beginUpdate();try{for(var i=0;i<t.length;i++)this.model.setVisible(t[i],e)}finally{this.model.endUpdate()}}};mxGraph.prototype.foldCells=function(t,e,i,n,r){e=e??!1,i==null&&(i=this.getFoldableCells(this.getSelectionCells(),t)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(i,t,e,n),this.fireEvent(new mxEventObject$1(mxEvent$1.FOLD_CELLS,"collapse",t,"recurse",e,"cells",i))}finally{this.model.endUpdate()}return i};mxGraph.prototype.cellsFolded=function(t,e,i,n){if(t!=null&&t.length>0){this.model.beginUpdate();try{for(var r=0;r<t.length;r++)if((!n||this.isCellFoldable(t[r],e))&&e!=this.isCellCollapsed(t[r])){if(this.model.setCollapsed(t[r],e),this.swapBounds(t[r],e),this.isExtendParent(t[r])&&this.extendParent(t[r]),i){var l=this.model.getChildren(t[r]);this.cellsFolded(l,e,i)}this.constrainChild(t[r])}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_FOLDED,"cells",t,"collapse",e,"recurse",i))}finally{this.model.endUpdate()}}};mxGraph.prototype.swapBounds=function(t,e){if(t!=null){var i=this.model.getGeometry(t);i!=null&&(i=i.clone(),this.updateAlternateBounds(t,i,e),i.swap(),this.model.setGeometry(t,i))}};mxGraph.prototype.updateAlternateBounds=function(t,e,i){if(t!=null&&e!=null){var n=this.getCurrentCellStyle(t);if(e.alternateBounds==null){var r=e;if(this.collapseToPreferredSize){var l=mxUtils$1.getValue(n,mxConstants$1.STYLE_AUTOSIZE_GRID,this.gridEnabled?"1":"0")=="1",s=this.getPreferredSizeForCell(t,null,l);if(s!=null){r=s;var a=mxUtils$1.getValue(n,mxConstants$1.STYLE_STARTSIZE);a>0&&(r.height=Math.max(r.height,a))}}e.alternateBounds=new mxRectangle$1(0,0,r.width,r.height)}if(e.alternateBounds!=null){e.alternateBounds.x=e.x,e.alternateBounds.y=e.y;var o=mxUtils$1.toRadians(n[mxConstants$1.STYLE_ROTATION]||0);if(o!=0){var u=e.alternateBounds.getCenterX()-e.getCenterX(),d=e.alternateBounds.getCenterY()-e.getCenterY(),p=Math.cos(o),c=Math.sin(o),g=p*u-c*d,x=c*u+p*d;e.alternateBounds.x+=g-u,e.alternateBounds.y+=x-d}}}};mxGraph.prototype.addAllEdges=function(t){var e=t.slice();return mxUtils$1.removeDuplicates(e.concat(this.getAllEdges(t)))};mxGraph.prototype.getAllEdges=function(t){var e=[];if(t!=null)for(var i=0;i<t.length;i++){for(var n=this.model.getEdgeCount(t[i]),r=0;r<n;r++)e.push(this.model.getEdgeAt(t[i],r));var l=this.model.getChildren(t[i]);e=e.concat(this.getAllEdges(l))}return e};mxGraph.prototype.updateCellSize=function(t,e){e=e??!1,this.model.beginUpdate();try{this.cellSizeUpdated(t,e),this.fireEvent(new mxEventObject$1(mxEvent$1.UPDATE_CELL_SIZE,"cell",t,"ignoreChildren",e))}finally{this.model.endUpdate()}return t};mxGraph.prototype.cellSizeUpdated=function(t,e){if(t!=null){this.model.beginUpdate();try{var i=this.getCellStyle(t),n=this.model.getGeometry(t);if(n!=null){var r=null,l=mxUtils$1.getValue(i,mxConstants$1.STYLE_FIXED_WIDTH,!1);l&&(r=n.width-2*parseFloat(mxUtils$1.getValue(i,mxConstants$1.STYLE_SPACING,2))-parseFloat(mxUtils$1.getValue(i,mxConstants$1.STYLE_SPACING_LEFT,0))-parseFloat(mxUtils$1.getValue(i,mxConstants$1.STYLE_SPACING_RIGHT,0)));var s=mxUtils$1.getValue(i,mxConstants$1.STYLE_AUTOSIZE_GRID,this.gridEnabled?"1":"0")=="1",a=this.getPreferredSizeForCell(t,r,s);if(a!=null){var o=this.isCellCollapsed(t);if(n=n.clone(),this.isSwimlane(t)){var u=this.model.getStyle(t);u==null&&(u=""),mxUtils$1.getValue(i,mxConstants$1.STYLE_HORIZONTAL,!0)?(u=mxUtils$1.setStyle(u,mxConstants$1.STYLE_STARTSIZE,a.height+8),o&&(n.height=a.height+8),l||(n.width=a.width)):(u=mxUtils$1.setStyle(u,mxConstants$1.STYLE_STARTSIZE,a.width+8),o&&!l&&(n.width=a.width+8),n.height=a.height),this.model.setStyle(t,u)}else{var d=this.view.createState(t),p=d.style[mxConstants$1.STYLE_ALIGN]||mxConstants$1.ALIGN_CENTER,c=this.getVerticalAlign(d);d.style[mxConstants$1.STYLE_ASPECT]=="fixed"&&(a.height=Math.round(n.height*a.width*100/n.width)/100),c==mxConstants$1.ALIGN_BOTTOM?n.y+=n.height-a.height:c==mxConstants$1.ALIGN_MIDDLE&&(n.y+=Math.round((n.height-a.height)/2)),n.height=a.height,l||(p==mxConstants$1.ALIGN_RIGHT?n.x+=n.width-a.width:p==mxConstants$1.ALIGN_CENTER&&(n.x+=Math.round((n.width-a.width)/2)),n.width=a.width)}if(!e&&!o){var g=this.view.getBounds(this.model.getChildren(t));if(g!=null){var x=this.view.translate,C=this.view.scale,T=(g.x+g.width)/C-n.x-x.x,A=(g.y+g.height)/C-n.y-x.y;n.height=Math.max(n.height,A),l||(n.width=Math.max(n.width,T))}}this.cellsResized([t],[n],!1)}}}finally{this.model.endUpdate()}}};mxGraph.prototype.getPreferredSizeForCell=function(t,e,i){i=i??this.gridEnabled;var n=null;if(t!=null){var r=this.view.createState(t),l=r.style;if(!this.model.isEdge(t)){var s=l[mxConstants$1.STYLE_FONTSIZE]||mxConstants$1.DEFAULT_FONTSIZE,a=0,o=0;(this.getImage(r)!=null||l[mxConstants$1.STYLE_IMAGE]!=null)&&l[mxConstants$1.STYLE_SHAPE]==mxConstants$1.SHAPE_LABEL&&(l[mxConstants$1.STYLE_VERTICAL_ALIGN]==mxConstants$1.ALIGN_MIDDLE&&(a+=parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_IMAGE_WIDTH,mxLabel.prototype.imageSize))),l[mxConstants$1.STYLE_ALIGN]!=mxConstants$1.ALIGN_CENTER&&(o+=parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_IMAGE_HEIGHT,mxLabel.prototype.imageSize)))),a+=2*parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_SPACING,2)),a+=parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_SPACING_LEFT,2)),a+=parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_SPACING_RIGHT,2)),o+=2*parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_SPACING,2)),o+=parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_SPACING_TOP,2)),o+=parseFloat(mxUtils$1.getValue(l,mxConstants$1.STYLE_SPACING_BOTTOM,2));var u=this.getFoldingImage(r);u!=null&&(a+=u.width+8);var d=this.cellRenderer.getLabelValue(r);if(d!=null&&d.length>0){this.isHtmlLabel(r.cell)?e!=null&&(e+=mxSvgCanvas2D$1.prototype.foreignObjectPadding):d=mxUtils$1.htmlEntities(d,!1),d=d.replace(/\n/g,"<br>");var p=mxUtils$1.getSizeForString(d,s,l[mxConstants$1.STYLE_FONTFAMILY],e,l[mxConstants$1.STYLE_FONTSTYLE]),c=p.width+a,g=p.height+o;if(!mxUtils$1.getValue(l,mxConstants$1.STYLE_HORIZONTAL,!0)){var x=g;g=c,c=x}i&&(c=this.snap(c+this.gridSize/2),g=this.snap(g+this.gridSize/2)),n=new mxRectangle$1(0,0,c,g)}else{var C=4*this.gridSize;n=new mxRectangle$1(0,0,C,C)}}}return n};mxGraph.prototype.resizeCell=function(t,e,i){return this.resizeCells([t],[e],i)[0]};mxGraph.prototype.resizeCells=function(t,e,i){i=i??this.isRecursiveResize(),this.model.beginUpdate();try{var n=this.cellsResized(t,e,i);this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_CELLS,"cells",t,"bounds",e,"previous",n))}finally{this.model.endUpdate()}return t};mxGraph.prototype.cellsResized=function(t,e,i){i=i??!1;var n=[];if(t!=null&&e!=null&&t.length==e.length){this.model.beginUpdate();try{for(var r=0;r<t.length;r++)n.push(this.cellResized(t[r],e[r],!1,i)),this.isExtendParent(t[r])&&this.extendParent(t[r]),this.constrainChild(t[r]);this.resetEdgesOnResize&&this.resetEdges(t),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_RESIZED,"cells",t,"bounds",e,"previous",n))}finally{this.model.endUpdate()}}return n};mxGraph.prototype.cellResized=function(t,e,i,n){var r=this.model.getGeometry(t);if(r!=null&&(r.x!=e.x||r.y!=e.y||r.width!=e.width||r.height!=e.height)){var l=r.clone();if(!i&&l.relative){var s=l.offset;s!=null&&(s.x+=e.x-l.x,s.y+=e.y-l.y)}else l.x=e.x,l.y=e.y;l.width=e.width,l.height=e.height,!l.relative&&this.model.isVertex(t)&&!this.isAllowNegativeCoordinates()&&(l.x=Math.max(0,l.x),l.y=Math.max(0,l.y)),this.model.beginUpdate();try{n&&this.resizeChildCells(t,l),this.model.setGeometry(t,l),this.isCellCollapsed(t)||this.constrainChildCells(t)}finally{this.model.endUpdate()}}return r};mxGraph.prototype.resizeChildCells=function(t,e){for(var i=this.model.getGeometry(t),n=i.width!=0?e.width/i.width:1,r=i.height!=0?e.height/i.height:1,l=this.model.getChildCount(t),s=0;s<l;s++)this.scaleCell(this.model.getChildAt(t,s),n,r,!0)};mxGraph.prototype.constrainChildCells=function(t){for(var e=this.model.getChildCount(t),i=0;i<e;i++)this.constrainChild(this.model.getChildAt(t,i))};mxGraph.prototype.scaleCell=function(t,e,i,n){var r=this.model.getGeometry(t);if(r!=null){var l=this.getCurrentCellStyle(t);r=r.clone();var s=r.x,a=r.y,o=r.width,u=r.height;r.scale(e,i,l[mxConstants$1.STYLE_ASPECT]=="fixed"),l[mxConstants$1.STYLE_RESIZE_WIDTH]=="1"?r.width=o*e:l[mxConstants$1.STYLE_RESIZE_WIDTH]=="0"&&(r.width=o),l[mxConstants$1.STYLE_RESIZE_HEIGHT]=="1"?r.height=u*i:l[mxConstants$1.STYLE_RESIZE_HEIGHT]=="0"&&(r.height=u),this.isCellMovable(t)||(r.x=s,r.y=a),this.isCellResizable(t)||(r.width=o,r.height=u),this.model.isVertex(t)?this.cellResized(t,r,!0,n):this.model.setGeometry(t,r)}};mxGraph.prototype.extendParent=function(t){if(t!=null){var e=this.model.getParent(t),i=this.getCellGeometry(e);if(e!=null&&i!=null&&!this.isCellCollapsed(e)){var n=this.getCellGeometry(t);n!=null&&!n.relative&&(i.width<n.x+n.width||i.height<n.y+n.height)&&(i=i.clone(),i.width=Math.max(i.width,n.x+n.width),i.height=Math.max(i.height,n.y+n.height),this.cellsResized([e],[i],!1))}}};mxGraph.prototype.importCells=function(t,e,i,n,r,l){return this.moveCells(t,e,i,!0,n,r,l)};mxGraph.prototype.moveCells=function(t,e,i,n,r,l,s){if(e=e??0,i=i??0,n=n??!1,t!=null&&(e!=0||i!=0||n||r!=null)){t=this.model.getTopmostCells(t);var a=t;this.model.beginUpdate();try{for(var o=new mxDictionary$1,u=0;u<t.length;u++)o.put(t[u],!0);for(var d=mxUtils$1.bind(this,function(T){for(;T!=null;){if(o.get(T))return!0;T=this.model.getParent(T)}return!1}),p=[],u=0;u<t.length;u++){var c=this.getCellGeometry(t[u]),g=this.model.getParent(t[u]);(c==null||!c.relative||!this.model.isEdge(g)||!d(this.model.getTerminal(g,!0))&&!d(this.model.getTerminal(g,!1)))&&p.push(t[u])}t=p,n&&(t=this.cloneCells(t,this.isCloneInvalidEdges(),s),r==null&&(r=this.getDefaultParent()));var x=this.isAllowNegativeCoordinates();if(r!=null&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(t,e,i,!n&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),r==null,this.isExtendParentsOnMove()&&r==null),this.setAllowNegativeCoordinates(x),r!=null){var C=this.model.getChildCount(r);if(this.cellsAdded(t,r,C,null,null,!0),n)for(var u=0;u<t.length;u++){var c=this.getCellGeometry(t[u]),g=this.model.getParent(a[u]);c!=null&&c.relative&&this.model.isEdge(g)&&this.model.contains(g)&&this.model.add(g,t[u])}}this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_CELLS,"cells",t,"dx",e,"dy",i,"clone",n,"target",r,"event",l))}finally{this.model.endUpdate()}}return t};mxGraph.prototype.cellsMoved=function(t,e,i,n,r,l){if(t!=null&&(e!=0||i!=0)){l=l??!1,this.model.beginUpdate();try{n&&this.disconnectGraph(t);for(var s=0;s<t.length;s++)this.translateCell(t[s],e,i),l&&this.isExtendParent(t[s])?this.extendParent(t[s]):r&&this.constrainChild(t[s]);this.resetEdgesOnMove&&this.resetEdges(t),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_MOVED,"cells",t,"dx",e,"dy",i,"disconnect",n))}finally{this.model.endUpdate()}}};mxGraph.prototype.translateCell=function(t,e,i){var n=this.model.getGeometry(t);if(n!=null){if(e=parseFloat(e),i=parseFloat(i),n=n.clone(),n.translate(e,i,this.model.isEdge(t)),!n.relative&&this.model.isVertex(t)&&!this.isAllowNegativeCoordinates()&&(n.x=Math.max(0,parseFloat(n.x)),n.y=Math.max(0,parseFloat(n.y))),n.relative&&!this.model.isEdge(t)){var r=this.model.getParent(t),l=0;if(this.model.isVertex(r)){var s=this.getCurrentCellStyle(r);l=mxUtils$1.getValue(s,mxConstants$1.STYLE_ROTATION,0)}if(l!=0){var a=mxUtils$1.toRadians(-l),o=Math.cos(a),u=Math.sin(a),d=mxUtils$1.getRotatedPoint(new mxPoint$1(e,i),o,u,new mxPoint$1(0,0));e=d.x,i=d.y}n.offset==null?n.offset=new mxPoint$1(Math.round(e),Math.round(i)):(n.offset.x=Math.round(parseFloat(n.offset.x+e)),n.offset.y=Math.round(parseFloat(n.offset.y+i)))}this.model.setGeometry(t,n)}};mxGraph.prototype.getCellContainmentArea=function(t){if(t!=null&&!this.model.isEdge(t)){var e=this.model.getParent(t);if(e!=null&&e!=this.getDefaultParent()){var i=this.model.getGeometry(e);if(i!=null){var n=0,r=0,l=i.width,s=i.height;if(this.isSwimlane(e)){var a=this.getStartSize(e),o=this.getCurrentCellStyle(e),u=mxUtils$1.getValue(o,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),d=mxUtils$1.getValue(o,mxConstants$1.STYLE_FLIPH,0)==1,p=mxUtils$1.getValue(o,mxConstants$1.STYLE_FLIPV,0)==1;if(u==mxConstants$1.DIRECTION_SOUTH||u==mxConstants$1.DIRECTION_NORTH){var c=a.width;a.width=a.height,a.height=c}(u==mxConstants$1.DIRECTION_EAST&&!p||u==mxConstants$1.DIRECTION_NORTH&&!d||u==mxConstants$1.DIRECTION_WEST&&p||u==mxConstants$1.DIRECTION_SOUTH&&d)&&(n=a.width,r=a.height),l-=a.width,s-=a.height}return new mxRectangle$1(n,r,l,s)}}}return null};mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds};mxGraph.prototype.constrainChild=function(t,e){if(t!=null){var i=this.getCellGeometry(t);if(i!=null&&(this.isConstrainRelativeChildren()||!i.relative)){var n=this.model.getParent(t);this.getCellGeometry(n);var r=this.getMaximumGraphBounds();if(r!=null){var l=this.getBoundingBoxFromGeometry([n],!1);l!=null&&(r=mxRectangle$1.fromRectangle(r),r.x-=l.x,r.y-=l.y)}if(this.isConstrainChild(t)){var s=this.getCellContainmentArea(t);if(s!=null){var a=this.getOverlap(t);a>0&&(s=mxRectangle$1.fromRectangle(s),s.x-=s.width*a,s.y-=s.height*a,s.width+=2*s.width*a,s.height+=2*s.height*a),r==null?r=s:(r=mxRectangle$1.fromRectangle(r),r.intersect(s))}}if(r!=null){var o=[t];if(!this.isCellCollapsed(t))for(var u=this.model.getDescendants(t),d=0;d<u.length;d++)this.isCellVisible(u[d])&&o.push(u[d]);var p=this.getBoundingBoxFromGeometry(o,!1);if(p!=null){i=i.clone();var c=0;i.width>r.width&&(c=i.width-r.width,i.width-=c),p.x+p.width>r.x+r.width&&(c-=p.x+p.width-r.x-r.width-c);var g=0;i.height>r.height&&(g=i.height-r.height,i.height-=g),p.y+p.height>r.y+r.height&&(g-=p.y+p.height-r.y-r.height-g),p.x<r.x&&(c-=p.x-r.x),p.y<r.y&&(g-=p.y-r.y),(c!=0||g!=0)&&(i.relative?(i.offset==null&&(i.offset=new mxPoint$1),i.offset.x+=c,i.offset.y+=g):(i.x+=c,i.y+=g)),this.model.setGeometry(t,i)}}}}};mxGraph.prototype.resetEdges=function(t){if(t!=null){for(var e=new mxDictionary$1,i=0;i<t.length;i++)e.put(t[i],!0);this.model.beginUpdate();try{for(var i=0;i<t.length;i++){var n=this.model.getEdges(t[i]);if(n!=null)for(var r=0;r<n.length;r++){var l=this.view.getState(n[r]),s=l!=null?l.getVisibleTerminal(!0):this.view.getVisibleTerminal(n[r],!0),a=l!=null?l.getVisibleTerminal(!1):this.view.getVisibleTerminal(n[r],!1);(!e.get(s)||!e.get(a))&&this.resetEdge(n[r])}this.resetEdges(this.model.getChildren(t[i]))}}finally{this.model.endUpdate()}}};mxGraph.prototype.resetEdge=function(t){var e=this.model.getGeometry(t);return e!=null&&e.points!=null&&e.points.length>0&&(e=e.clone(),e.points=[],this.model.setGeometry(t,e)),t};mxGraph.prototype.getOutlineConstraint=function(t,e,i){if(e.shape!=null){var n=this.view.getPerimeterBounds(e),r=e.style[mxConstants$1.STYLE_DIRECTION];if(r==mxConstants$1.DIRECTION_NORTH||r==mxConstants$1.DIRECTION_SOUTH){n.x+=n.width/2-n.height/2,n.y+=n.height/2-n.width/2;var l=n.width;n.width=n.height,n.height=l}var s=mxUtils$1.toRadians(e.shape.getShapeRotation());if(s!=0){var a=Math.cos(-s),o=Math.sin(-s),u=new mxPoint$1(n.getCenterX(),n.getCenterY());t=mxUtils$1.getRotatedPoint(t,a,o,u)}var d=1,p=1,c=0,g=0;if(this.getModel().isVertex(e.cell)){var x=e.style[mxConstants$1.STYLE_FLIPH],C=e.style[mxConstants$1.STYLE_FLIPV];if(e.shape!=null&&e.shape.stencil!=null&&(x=mxUtils$1.getValue(e.style,"stencilFlipH",0)==1||x,C=mxUtils$1.getValue(e.style,"stencilFlipV",0)==1||C),r==mxConstants$1.DIRECTION_NORTH||r==mxConstants$1.DIRECTION_SOUTH){var l=x;x=C,C=l}x&&(d=-1,c=-n.width),C&&(p=-1,g=-n.height)}t=new mxPoint$1((t.x-n.x)*d-c+n.x,(t.y-n.y)*p-g+n.y);var T=n.width==0?0:Math.round((t.x-n.x)*1e3/n.width)/1e3,A=n.height==0?0:Math.round((t.y-n.y)*1e3/n.height)/1e3;return new mxConnectionConstraint$1(new mxPoint$1(T,A),!1)}return null};mxGraph.prototype.getAllConnectionConstraints=function(t,e){return t!=null&&t.shape!=null&&t.shape.stencil!=null?t.shape.stencil.constraints:null};mxGraph.prototype.getConnectionConstraint=function(t,e,i){var n=null,r=t.style[i?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X];if(r!=null){var l=t.style[i?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y];l!=null&&(n=new mxPoint$1(parseFloat(r),parseFloat(l)))}var s=!1,a=0,o=0;return n!=null&&(s=mxUtils$1.getValue(t.style,i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,!0),a=parseFloat(t.style[i?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX]),o=parseFloat(t.style[i?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY]),a=isFinite(a)?a:0,o=isFinite(o)?o:0),new mxConnectionConstraint$1(n,s,null,a,o)};mxGraph.prototype.setConnectionConstraint=function(t,e,i,n){if(n!=null){this.model.beginUpdate();try{n==null||n.point==null?(this.setCellStyles(i?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X,null,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y,null,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX,null,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY,null,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,null,[t])):n.point!=null&&(this.setCellStyles(i?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X,n.point.x,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y,n.point.y,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX,n.dx,[t]),this.setCellStyles(i?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY,n.dy,[t]),n.perimeter?this.setCellStyles(i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,null,[t]):this.setCellStyles(i?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,"0",[t]))}finally{this.model.endUpdate()}}};mxGraph.prototype.getConnectionPoint=function(t,e,i){i=i??!0;var n=null;if(t!=null&&e.point!=null){var r=this.view.getPerimeterBounds(t),l=new mxPoint$1(r.getCenterX(),r.getCenterY()),s=t.style[mxConstants$1.STYLE_DIRECTION],a=0;s!=null&&mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ANCHOR_POINT_DIRECTION,1)==1&&(s==mxConstants$1.DIRECTION_NORTH?a+=270:s==mxConstants$1.DIRECTION_WEST?a+=180:s==mxConstants$1.DIRECTION_SOUTH&&(a+=90),(s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_SOUTH)&&r.rotate90());var o=this.view.scale;n=new mxPoint$1(r.x+e.point.x*r.width+e.dx*o,r.y+e.point.y*r.height+e.dy*o);var u=t.style[mxConstants$1.STYLE_ROTATION]||0;if(e.perimeter){if(a!=0){var d=0,p=0;a==90?p=1:a==180?d=-1:a==270&&(p=-1),n=mxUtils$1.getRotatedPoint(n,d,p,l)}n=this.view.getPerimeterPoint(t,n,!1)}else if(u+=a,this.getModel().isVertex(t.cell)){var c=t.style[mxConstants$1.STYLE_FLIPH]==1,g=t.style[mxConstants$1.STYLE_FLIPV]==1;if(t.shape!=null&&t.shape.stencil!=null&&(c=mxUtils$1.getValue(t.style,"stencilFlipH",0)==1||c,g=mxUtils$1.getValue(t.style,"stencilFlipV",0)==1||g),s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_SOUTH){var x=c;c=g,g=x}c&&(n.x=2*r.getCenterX()-n.x),g&&(n.y=2*r.getCenterY()-n.y)}if(u!=0&&n!=null){var C=mxUtils$1.toRadians(u),d=Math.cos(C),p=Math.sin(C);n=mxUtils$1.getRotatedPoint(n,d,p,l)}}return i&&n!=null&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),n};mxGraph.prototype.connectCell=function(t,e,i,n){this.model.beginUpdate();try{var r=this.model.getTerminal(t,i);this.cellConnected(t,e,i,n),this.fireEvent(new mxEventObject$1(mxEvent$1.CONNECT_CELL,"edge",t,"terminal",e,"source",i,"previous",r))}finally{this.model.endUpdate()}return t};mxGraph.prototype.cellConnected=function(t,e,i,n){if(t!=null){this.model.beginUpdate();try{var r=this.model.getTerminal(t,i);if(this.setConnectionConstraint(t,e,i,n),this.isPortsEnabled()){var l=null;this.isPort(e)&&(l=e.getId(),e=this.getTerminalForPort(e,i));var s=i?mxConstants$1.STYLE_SOURCE_PORT:mxConstants$1.STYLE_TARGET_PORT;this.setCellStyles(s,l,[t])}this.model.setTerminal(t,e,i),this.resetEdgesOnConnect&&this.resetEdge(t),this.fireEvent(new mxEventObject$1(mxEvent$1.CELL_CONNECTED,"edge",t,"terminal",e,"source",i,"previous",r))}finally{this.model.endUpdate()}}};mxGraph.prototype.disconnectGraph=function(t){if(t!=null){this.model.beginUpdate();try{for(var e=this.view.scale,i=this.view.translate,n=new mxDictionary$1,r=0;r<t.length;r++)n.put(t[r],!0);for(var r=0;r<t.length;r++)if(this.model.isEdge(t[r])){var l=this.model.getGeometry(t[r]);if(l!=null){var s=this.view.getState(t[r]),a=this.view.getState(this.model.getParent(t[r]));if(s!=null&&a!=null){l=l.clone();var o=-a.origin.x,u=-a.origin.y,d=s.absolutePoints,p=this.model.getTerminal(t[r],!0);if(p!=null&&this.isCellDisconnectable(t[r],p,!0)){for(;p!=null&&!n.get(p);)p=this.model.getParent(p);p==null&&(l.setTerminalPoint(new mxPoint$1(d[0].x/e-i.x+o,d[0].y/e-i.y+u),!0),this.model.setTerminal(t[r],null,!0))}var c=this.model.getTerminal(t[r],!1);if(c!=null&&this.isCellDisconnectable(t[r],c,!1)){for(;c!=null&&!n.get(c);)c=this.model.getParent(c);if(c==null){var g=d.length-1;l.setTerminalPoint(new mxPoint$1(d[g].x/e-i.x+o,d[g].y/e-i.y+u),!1),this.model.setTerminal(t[r],null,!1)}}this.model.setGeometry(t[r],l)}}}}finally{this.model.endUpdate()}}};mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot};mxGraph.prototype.getTranslateForRoot=function(t){return null};mxGraph.prototype.isPort=function(t){return!1};mxGraph.prototype.getTerminalForPort=function(t,e){return this.model.getParent(t)};mxGraph.prototype.getChildOffsetForCell=function(t){return null};mxGraph.prototype.enterGroup=function(t){if(t=t||this.getSelectionCell(),t!=null&&this.isValidRoot(t)){this.view.setCurrentRoot(t),this.clearSelection();var e=mxRectangle$1.fromRectangle(this.getGraphBounds());e.x-=this.view.translate.x,e.y-=this.view.translate.y,this.scrollRectToVisible(e)}};mxGraph.prototype.exitGroup=function(){var t=this.model.getRoot(),e=this.getCurrentRoot();if(e!=null){for(var i=this.model.getParent(e);i!=t&&!this.isValidRoot(i)&&this.model.getParent(i)!=t;)i=this.model.getParent(i);i==t||this.model.getParent(i)==t?this.view.setCurrentRoot(null):this.view.setCurrentRoot(i);var n=this.view.getState(e);n!=null&&(this.setSelectionCell(e),this.scrollCellToVisible(e))}};mxGraph.prototype.home=function(){var t=this.getCurrentRoot();if(t!=null){this.view.setCurrentRoot(null);var e=this.view.getState(t);e!=null&&this.setSelectionCell(t)}};mxGraph.prototype.isValidRoot=function(t){return t!=null};mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()};mxGraph.prototype.getCellBounds=function(t,e,i){var n=[t];e&&(n=n.concat(this.model.getEdges(t)));var r=this.view.getBounds(n);if(i)for(var l=this.model.getChildCount(t),s=0;s<l;s++){var a=this.getCellBounds(this.model.getChildAt(t,s),e,!0);r!=null?r.add(a):r=a}return r};mxGraph.prototype.getBoundingBoxFromGeometry=function(t,e,i,n){e=e??!1;var r=null;if(t!=null){for(var l=0;l<t.length;l++)if(e||this.model.isVertex(t[l])){var s=this.getCellGeometry(t[l]);if(s!=null){var a=this.model.getParent(t[l]),o=null;if(this.model.isEdge(t[l])){var u=function(T){T!=null&&(o==null?o=new mxRectangle$1(T.x,T.y,0,0):o.add(new mxRectangle$1(T.x,T.y,0,0)))};this.model.getTerminal(t[l],!0)==null&&u(s.getTerminalPoint(!0)),this.model.getTerminal(t[l],!1)==null&&u(s.getTerminalPoint(!1));var d=s.points;if(d!=null)for(var p=0;p<d.length;p++)u(d[p]);if(o!=null&&this.model.isVertex(a)&&mxUtils$1.indexOf(i??t,a)>=0){var c=this.getBoundingBoxFromGeometry([a],!1,i??t,n);c!=null&&(o.x+=c.x,o.y+=c.y)}}else{if(s.relative){if(this.model.isVertex(a)&&a!=this.view.currentRoot){var c=this.getBoundingBoxFromGeometry([a],!1,i??t,n);c!=null&&(o=new mxRectangle$1(s.x*c.width,s.y*c.height,s.width,s.height),mxUtils$1.indexOf(i??t,a)>=0&&(o.x+=c.x,o.y+=c.y))}}else if(o=mxRectangle$1.fromRectangle(s),this.model.isVertex(a)&&mxUtils$1.indexOf(i??t,a)>=0){var c=this.getBoundingBoxFromGeometry([a],!1,i??t,n);c!=null&&(o.x+=c.x,o.y+=c.y)}o!=null&&s.offset!=null&&(o.x+=s.offset.x,o.y+=s.offset.y);var g=this.getCurrentCellStyle(t[l]);if(o!=null){var x=mxUtils$1.getValue(g,mxConstants$1.STYLE_ROTATION,0);x!=0&&(o=mxUtils$1.getBoundingBox(o,x))}}if(o!=null){if(n){var g=this.getCurrentCellStyle(t[l],!0);if(g!=null){var C=mxUtils$1.getNumber(g,mxConstants$1.STYLE_STROKEWIDTH,1);o.grow(C/2)}}r==null?r=mxRectangle$1.fromRectangle(o):r.add(o)}}}}return r};mxGraph.prototype.refresh=function(t){this.view.clear(t,t==null),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject$1(mxEvent$1.REFRESH))};mxGraph.prototype.snap=function(t){return this.gridEnabled&&(t=Math.round(t/this.gridSize)*this.gridSize),t};mxGraph.prototype.snapDelta=function(t,e,i,n,r){var l=this.view.translate,s=this.view.scale;if(!i&&this.gridEnabled){var a=this.gridSize*s*.5;if(!n){var o=e.x-(this.snap(e.x/s-l.x)+l.x)*s;Math.abs(t.x-o)<a?t.x=0:t.x=this.snap(t.x/s)*s-o}if(!r){var u=e.y-(this.snap(e.y/s-l.y)+l.y)*s;Math.abs(t.y-u)<a?t.y=0:t.y=this.snap(t.y/s)*s-u}}else{var a=.5*s;if(!n){var o=e.x-(Math.round(e.x/s-l.x)+l.x)*s;Math.abs(t.x-o)<a?t.x=0:t.x=Math.round(t.x/s)*s-o}if(!r){var u=e.y-(Math.round(e.y/s-l.y)+l.y)*s;Math.abs(t.y-u)<a?t.y=0:t.y=Math.round(t.y/s)*s-u}}return t};mxGraph.prototype.panGraph=function(t,e){if(this.useScrollbarsForPanning&&mxUtils$1.hasScrollbars(this.container))this.container.scrollLeft=-t,this.container.scrollTop=-e;else{var i=this.view.getCanvas();if(this.dialect==mxConstants$1.DIALECT_SVG)if(t==0&&e==0){if(mxClient$1.IS_IE?i.setAttribute("transform","translate("+t+","+e+")"):i.removeAttribute("transform"),this.shiftPreview1!=null){for(var n=this.shiftPreview1.firstChild;n!=null;){var r=n.nextSibling;this.container.appendChild(n),n=r}for(this.shiftPreview1.parentNode!=null&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(i.parentNode),n=this.shiftPreview2.firstChild;n!=null;){var r=n.nextSibling;this.container.appendChild(n),n=r}this.shiftPreview2.parentNode!=null&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(i.setAttribute("transform","translate("+t+","+e+")"),this.shiftPreview1==null){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var l=this.shiftPreview1,n=this.container.firstChild;n!=null;){var r=n.nextSibling;n!=i.parentNode?l.appendChild(n):l=this.shiftPreview2,n=r}this.shiftPreview1.firstChild!=null&&(i.parentNode!=null&&i.parentNode.parentNode==this.container?this.container.insertBefore(this.shiftPreview1,i.parentNode):this.container.appendChild(this.shiftPreview1)),this.shiftPreview2.firstChild!=null&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=t+"px",this.shiftPreview1.style.top=e+"px",this.shiftPreview2.style.left=t+"px",this.shiftPreview2.style.top=e+"px"}else i.style.left=t+"px",i.style.top=e+"px";this.panDx=t,this.panDy=e,this.fireEvent(new mxEventObject$1(mxEvent$1.PAN))}};mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)};mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)};mxGraph.prototype.zoomActual=function(){this.view.scale==1?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))};mxGraph.prototype.zoomTo=function(t,e){this.zoom(t/this.view.scale,e)};mxGraph.prototype.center=function(t,e,i,n){t=t??!0,e=e??!0,i=i??.5,n=n??.5;var r=mxUtils$1.hasScrollbars(this.container),l=2*this.getBorder(),s=this.container.clientWidth-l,a=this.container.clientHeight-l,o=this.getGraphBounds(),u=this.view.translate,d=this.view.scale,p=t?s-o.width:0,c=e?a-o.height:0;if(!r)this.view.setTranslate(t?Math.floor(u.x-o.x/d+p*i/d):u.x,e?Math.floor(u.y-o.y/d+c*n/d):u.y);else{o.x-=u.x,o.y-=u.y;var g=this.container.scrollWidth,x=this.container.scrollHeight;g>s&&(p=0),x>a&&(c=0),this.view.setTranslate(Math.floor(p/2-o.x),Math.floor(c/2-o.y)),this.container.scrollLeft=(g-s)/2,this.container.scrollTop=(x-a)/2}};mxGraph.prototype.zoom=function(t,e,i){e=e??this.centerZoom;var n=Math.round(this.view.scale*t*100)/100;i!=null&&(n=Math.round(n*i)/i);var r=this.view.getState(this.getSelectionCell());if(t=n/this.view.scale,this.keepSelectionVisibleOnZoom&&r!=null){var l=new mxRectangle$1(r.x*t,r.y*t,r.width*t,r.height*t);this.view.scale=n,this.scrollRectToVisible(l)||(this.view.revalidate(),this.view.setScale(n))}else{var s=mxUtils$1.hasScrollbars(this.container);if(e&&!s){var a=this.container.offsetWidth,o=this.container.offsetHeight;if(t>1){var u=(t-1)/(n*2);a*=-u,o*=-u}else{var u=(1/t-1)/(this.view.scale*2);a*=u,o*=u}this.view.scaleAndTranslate(n,this.view.translate.x+a,this.view.translate.y+o)}else{var d=this.view.translate.x,p=this.view.translate.y,c=this.container.scrollLeft,g=this.container.scrollTop;if(this.view.setScale(n),s){var a=0,o=0;e&&(a=this.container.offsetWidth*(t-1)/2,o=this.container.offsetHeight*(t-1)/2),this.container.scrollLeft=(this.view.translate.x-d)*this.view.scale+Math.round(c*t+a),this.container.scrollTop=(this.view.translate.y-p)*this.view.scale+Math.round(g*t+o)}}}};mxGraph.prototype.zoomToRect=function(t){var e=this.container.clientWidth/t.width,i=this.container.clientHeight/t.height,n=e/i;t.x=Math.max(0,t.x),t.y=Math.max(0,t.y);var r=Math.min(this.container.scrollWidth,t.x+t.width),l=Math.min(this.container.scrollHeight,t.y+t.height);if(t.width=r-t.x,t.height=l-t.y,n<1){var s=t.height/n,a=(s-t.height)/2;t.height=s;var o=Math.min(t.y,a);t.y=t.y-o,l=Math.min(this.container.scrollHeight,t.y+t.height),t.height=l-t.y}else{var u=t.width*n,d=(u-t.width)/2;t.width=u;var p=Math.min(t.x,d);t.x=t.x-p,r=Math.min(this.container.scrollWidth,t.x+t.width),t.width=r-t.x}var c=this.container.clientWidth/t.width,g=this.view.scale*c;mxUtils$1.hasScrollbars(this.container)?(this.view.setScale(g),this.container.scrollLeft=Math.round(t.x*c),this.container.scrollTop=Math.round(t.y*c)):this.view.scaleAndTranslate(g,this.view.translate.x-t.x/this.view.scale,this.view.translate.y-t.y/this.view.scale)};mxGraph.prototype.scrollCellToVisible=function(t,e){var i=-this.view.translate.x,n=-this.view.translate.y,r=this.view.getState(t);if(r!=null){var l=new mxRectangle$1(i+r.x,n+r.y,r.width,r.height);if(e&&this.container!=null){var s=this.container.clientWidth,a=this.container.clientHeight;l.x=l.getCenterX()-s/2,l.width=s,l.y=l.getCenterY()-a/2,l.height=a}var o=new mxPoint$1(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(l)){var u=new mxPoint$1(this.view.translate.x,this.view.translate.y);this.view.translate.x=o.x,this.view.translate.y=o.y,this.view.setTranslate(u.x,u.y)}}};mxGraph.prototype.scrollRectToVisible=function(t){var e=!1;if(t!=null){var i=this.container.offsetWidth,n=this.container.offsetHeight,r=Math.min(i,t.width),l=Math.min(n,t.height);if(mxUtils$1.hasScrollbars(this.container)){var s=this.container;t.x+=this.view.translate.x,t.y+=this.view.translate.y;var a=s.scrollLeft-t.x,o=Math.max(a-s.scrollLeft,0);a>0?s.scrollLeft-=a+2:(a=t.x+r-s.scrollLeft-s.clientWidth,a>0&&(s.scrollLeft+=a+2));var u=s.scrollTop-t.y,d=Math.max(0,u-s.scrollTop);u>0?s.scrollTop-=u+2:(u=t.y+l-s.scrollTop-s.clientHeight,u>0&&(s.scrollTop+=u+2)),!this.useScrollbarsForPanning&&(o!=0||d!=0)&&this.view.setTranslate(o,d)}else{var p=-this.view.translate.x,c=-this.view.translate.y,g=this.view.scale;t.x+r>p+i&&(this.view.translate.x-=(t.x+r-i-p)/g,e=!0),t.y+l>c+n&&(this.view.translate.y-=(t.y+l-n-c)/g,e=!0),t.x<p&&(this.view.translate.x+=(p-t.x)/g,e=!0),t.y<c&&(this.view.translate.y+=(c-t.y)/g,e=!0),e&&(this.view.refresh(),this.selectionCellsHandler!=null&&this.selectionCellsHandler.refresh())}}return e};mxGraph.prototype.getCellGeometry=function(t){return this.model.getGeometry(t)};mxGraph.prototype.isCellVisible=function(t){return this.model.isVisible(t)};mxGraph.prototype.isCellCollapsed=function(t){return this.model.isCollapsed(t)};mxGraph.prototype.isCellConnectable=function(t){return this.model.isConnectable(t)};mxGraph.prototype.isOrthogonal=function(t){var e=t.style[mxConstants$1.STYLE_ORTHOGONAL];if(e!=null)return e;var i=this.view.getEdgeStyle(t);return i==mxEdgeStyle$1.SegmentConnector||i==mxEdgeStyle$1.ElbowConnector||i==mxEdgeStyle$1.SideToSide||i==mxEdgeStyle$1.TopToBottom||i==mxEdgeStyle$1.EntityRelation||i==mxEdgeStyle$1.OrthConnector};mxGraph.prototype.isLoop=function(t){var e=t.getVisibleTerminalState(!0),i=t.getVisibleTerminalState(!1);return e!=null&&e==i};mxGraph.prototype.isCloneEvent=function(t){return mxEvent$1.isControlDown(t)};mxGraph.prototype.isTransparentClickEvent=function(t){return!1};mxGraph.prototype.isToggleEvent=function(t){return mxClient$1.IS_MAC?mxEvent$1.isMetaDown(t):mxEvent$1.isControlDown(t)};mxGraph.prototype.isGridEnabledEvent=function(t){return t!=null&&!mxEvent$1.isAltDown(t)};mxGraph.prototype.isConstrainedEvent=function(t){return mxEvent$1.isShiftDown(t)&&!mxEvent$1.isAltDown(t)};mxGraph.prototype.isIgnoreTerminalEvent=function(t){return!1};mxGraph.prototype.validationAlert=function(t){mxUtils$1.alert(t)};mxGraph.prototype.isEdgeValid=function(t,e,i){return this.getEdgeValidationError(t,e,i)==null};mxGraph.prototype.getEdgeValidationError=function(t,e,i){if(t!=null&&!this.isAllowDanglingEdges()&&(e==null||i==null))return"";if(t!=null&&this.model.getTerminal(t,!0)==null&&this.model.getTerminal(t,!1)==null)return null;if(!this.allowLoops&&e==i&&e!=null||!this.isValidConnection(e,i))return"";if(e!=null&&i!=null){var n="";if(!this.multigraph){var r=this.model.getEdgesBetween(e,i,!0);(r.length>1||r.length==1&&r[0]!=t)&&(n+=(mxResources$1.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+`
`)}var l=this.model.getDirectedEdgeCount(e,!0,t),s=this.model.getDirectedEdgeCount(i,!1,t);if(this.multiplicities!=null)for(var a=0;a<this.multiplicities.length;a++){var o=this.multiplicities[a].check(this,t,e,i,l,s);o!=null&&(n+=o)}var o=this.validateEdge(t,e,i);return o!=null&&(n+=o),n.length>0?n:null}return this.allowDanglingEdges?null:""};mxGraph.prototype.validateEdge=function(t,e,i){return null};mxGraph.prototype.validateGraph=function(t,e){t=t??this.model.getRoot(),e=e??new Object;for(var i=!0,n=this.model.getChildCount(t),r=0;r<n;r++){var l=this.model.getChildAt(t,r),s=e;this.isValidRoot(l)&&(s=new Object);var a=this.validateGraph(l,s);a!=null?this.setCellWarning(l,a.replace(/\n/g,"<br>")):this.setCellWarning(l,null),i=i&&a==null}var o="";this.isCellCollapsed(t)&&!i&&(o+=(mxResources$1.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+`
`),this.model.isEdge(t)?o+=this.getEdgeValidationError(t,this.model.getTerminal(t,!0),this.model.getTerminal(t,!1))||"":o+=this.getCellValidationError(t)||"";var u=this.validateCell(t,e);return u!=null&&(o+=u),this.model.getParent(t)==null&&this.view.validate(),o.length>0||!i?o:null};mxGraph.prototype.getCellValidationError=function(t){var e=this.model.getDirectedEdgeCount(t,!0),i=this.model.getDirectedEdgeCount(t,!1),n=this.model.getValue(t),r="";if(this.multiplicities!=null)for(var l=0;l<this.multiplicities.length;l++){var s=this.multiplicities[l];(s.source&&mxUtils$1.isNode(n,s.type,s.attr,s.value)&&(e>s.max||e<s.min)||!s.source&&mxUtils$1.isNode(n,s.type,s.attr,s.value)&&(i>s.max||i<s.min))&&(r+=s.countError+`
`)}return r.length>0?r:null};mxGraph.prototype.validateCell=function(t,e){return null};mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage};mxGraph.prototype.setBackgroundImage=function(t){this.backgroundImage=t};mxGraph.prototype.getFoldingImage=function(t){if(t!=null&&this.foldingEnabled&&!this.getModel().isEdge(t.cell)){var e=this.isCellCollapsed(t.cell);if(this.isCellFoldable(t.cell,!e))return e?this.collapsedImage:this.expandedImage}return null};mxGraph.prototype.convertValueToString=function(t){var e=this.model.getValue(t);if(e!=null){if(mxUtils$1.isNode(e))return e.nodeName;if(typeof e.toString=="function")return e.toString()}return""};mxGraph.prototype.getLabel=function(t){var e="";if(this.labelsVisible&&t!=null){var i=this.getCurrentCellStyle(t);mxUtils$1.getValue(i,mxConstants$1.STYLE_NOLABEL,!1)||(e=this.convertValueToString(t))}return e};mxGraph.prototype.isHtmlLabel=function(t){return this.isHtmlLabels()};mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels};mxGraph.prototype.setHtmlLabels=function(t){this.htmlLabels=t};mxGraph.prototype.isWrapping=function(t){return this.getCurrentCellStyle(t)[mxConstants$1.STYLE_WHITE_SPACE]=="wrap"};mxGraph.prototype.isLabelClipped=function(t){return this.getCurrentCellStyle(t)[mxConstants$1.STYLE_OVERFLOW]=="hidden"};mxGraph.prototype.getTooltip=function(t,e,i,n){var r=null;if(t!=null){if(t.control!=null&&(e==t.control.node||e.parentNode==t.control.node)&&(r=this.collapseExpandResource,r=mxUtils$1.htmlEntities(mxResources$1.get(r)||r).replace(/\\n/g,"<br>")),r==null&&t.overlays!=null&&t.overlays.visit(function(s,a){r==null&&(e==a.node||e.parentNode==a.node)&&(r=mxUtils$1.htmlEntities(a.overlay.toString()).replace(/\\n/g,"<br>"))}),r==null){var l=this.selectionCellsHandler.getHandler(t.cell);l!=null&&typeof l.getTooltipForNode=="function"&&(r=l.getTooltipForNode(e))}r==null&&(r=this.getTooltipForCell(t.cell))}return r};mxGraph.prototype.getTooltipForCell=function(t){var e=null;return t!=null&&t.getTooltip!=null?e=t.getTooltip():e=this.convertValueToString(t),e};mxGraph.prototype.getLinkForCell=function(t){return null};mxGraph.prototype.getLinkTargetForCell=function(t){return null};mxGraph.prototype.getCursorForMouseEvent=function(t){return this.getCursorForCell(t.getCell())};mxGraph.prototype.getCursorForCell=function(t){return null};mxGraph.prototype.getStartSize=function(t,e){var i=new mxRectangle$1,n=this.getCurrentCellStyle(t,e),r=parseInt(mxUtils$1.getValue(n,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));return mxUtils$1.getValue(n,mxConstants$1.STYLE_HORIZONTAL,!0)?i.height=r:i.width=r,i};mxGraph.prototype.getSwimlaneDirection=function(t){var e=mxUtils$1.getValue(t,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),i=mxUtils$1.getValue(t,mxConstants$1.STYLE_FLIPH,0)==1,n=mxUtils$1.getValue(t,mxConstants$1.STYLE_FLIPV,0)==1,r=mxUtils$1.getValue(t,mxConstants$1.STYLE_HORIZONTAL,!0),l=r?0:3;e==mxConstants$1.DIRECTION_NORTH?l--:e==mxConstants$1.DIRECTION_WEST?l+=2:e==mxConstants$1.DIRECTION_SOUTH&&(l+=1);var s=mxUtils$1.mod(l,2);return i&&s==1&&(l+=2),n&&s==0&&(l+=2),[mxConstants$1.DIRECTION_NORTH,mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST][mxUtils$1.mod(l,4)]};mxGraph.prototype.getActualStartSize=function(t,e){var i=new mxRectangle$1;if(this.isSwimlane(t,e)){var n=this.getCurrentCellStyle(t,e),r=parseInt(mxUtils$1.getValue(n,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE)),l=this.getSwimlaneDirection(n);l==mxConstants$1.DIRECTION_NORTH?i.y=r:l==mxConstants$1.DIRECTION_WEST?i.x=r:l==mxConstants$1.DIRECTION_SOUTH?i.height=r:i.width=r}return i};mxGraph.prototype.getImage=function(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_IMAGE]:null};mxGraph.prototype.isTransparentState=function(t){var e=!1;if(t!=null){var i=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE),n=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE);e=i==mxConstants$1.NONE&&n==mxConstants$1.NONE&&this.getImage(t)==null}return e};mxGraph.prototype.getVerticalAlign=function(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_VERTICAL_ALIGN]||mxConstants$1.ALIGN_MIDDLE:null};mxGraph.prototype.getIndicatorColor=function(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_COLOR]:null};mxGraph.prototype.getIndicatorGradientColor=function(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_GRADIENTCOLOR]:null};mxGraph.prototype.getIndicatorShape=function(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_SHAPE]:null};mxGraph.prototype.getIndicatorImage=function(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_IMAGE]:null};mxGraph.prototype.getBorder=function(){return this.border};mxGraph.prototype.setBorder=function(t){this.border=t};mxGraph.prototype.isSwimlane=function(t,e){return t!=null&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)?this.getCurrentCellStyle(t,e)[mxConstants$1.STYLE_SHAPE]==mxConstants$1.SHAPE_SWIMLANE:!1};mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer};mxGraph.prototype.setResizeContainer=function(t){this.resizeContainer=t};mxGraph.prototype.isEnabled=function(){return this.enabled};mxGraph.prototype.setEnabled=function(t){this.enabled=t,this.fireEvent(new mxEventObject$1("enabledChanged","enabled",t))};mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled};mxGraph.prototype.setEscapeEnabled=function(t){this.escapeEnabled=t};mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing};mxGraph.prototype.setInvokesStopCellEditing=function(t){this.invokesStopCellEditing=t};mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing};mxGraph.prototype.setEnterStopsCellEditing=function(t){this.enterStopsCellEditing=t};mxGraph.prototype.isCellLocked=function(t){var e=this.model.getGeometry(t);return this.isCellsLocked()||e!=null&&this.model.isVertex(t)&&e.relative};mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked};mxGraph.prototype.setCellsLocked=function(t){this.cellsLocked=t};mxGraph.prototype.getCloneableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.isCellCloneable(e)}))};mxGraph.prototype.isCellCloneable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsCloneable()&&e[mxConstants$1.STYLE_CLONEABLE]!=0};mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable};mxGraph.prototype.setCellsCloneable=function(t){this.cellsCloneable=t};mxGraph.prototype.getExportableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.canExportCell(e)}))};mxGraph.prototype.canExportCell=function(t){return this.exportEnabled};mxGraph.prototype.getImportableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.canImportCell(e)}))};mxGraph.prototype.canImportCell=function(t){return this.importEnabled};mxGraph.prototype.isCellSelectable=function(t){return this.isCellsSelectable()};mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable};mxGraph.prototype.setCellsSelectable=function(t){this.cellsSelectable=t};mxGraph.prototype.getDeletableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.isCellDeletable(e)}))};mxGraph.prototype.isCellDeletable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsDeletable()&&e[mxConstants$1.STYLE_DELETABLE]!=0};mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable};mxGraph.prototype.setCellsDeletable=function(t){this.cellsDeletable=t};mxGraph.prototype.isLabelMovable=function(t){return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&this.vertexLabelsMovable)};mxGraph.prototype.getRotatableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.isCellRotatable(e)}))};mxGraph.prototype.isCellRotatable=function(t){var e=this.getCurrentCellStyle(t);return e[mxConstants$1.STYLE_ROTATABLE]!=0};mxGraph.prototype.getMovableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.isCellMovable(e)}))};mxGraph.prototype.isCellMovable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsMovable()&&!this.isCellLocked(t)&&e[mxConstants$1.STYLE_MOVABLE]!=0};mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable};mxGraph.prototype.setCellsMovable=function(t){this.cellsMovable=t};mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled};mxGraph.prototype.setGridEnabled=function(t){this.gridEnabled=t};mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled};mxGraph.prototype.setPortsEnabled=function(t){this.portsEnabled=t};mxGraph.prototype.getGridSize=function(){return this.gridSize};mxGraph.prototype.setGridSize=function(t){this.gridSize=t};mxGraph.prototype.getTolerance=function(){return this.tolerance};mxGraph.prototype.setTolerance=function(t){this.tolerance=t};mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable};mxGraph.prototype.setVertexLabelsMovable=function(t){this.vertexLabelsMovable=t};mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable};mxGraph.prototype.setEdgeLabelsMovable=function(t){this.edgeLabelsMovable=t};mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting};mxGraph.prototype.setSwimlaneNesting=function(t){this.swimlaneNesting=t};mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled};mxGraph.prototype.setSwimlaneSelectionEnabled=function(t){this.swimlaneSelectionEnabled=t};mxGraph.prototype.isMultigraph=function(){return this.multigraph};mxGraph.prototype.setMultigraph=function(t){this.multigraph=t};mxGraph.prototype.isAllowLoops=function(){return this.allowLoops};mxGraph.prototype.setAllowDanglingEdges=function(t){this.allowDanglingEdges=t};mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges};mxGraph.prototype.setConnectableEdges=function(t){this.connectableEdges=t};mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges};mxGraph.prototype.setCloneInvalidEdges=function(t){this.cloneInvalidEdges=t};mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges};mxGraph.prototype.setAllowLoops=function(t){this.allowLoops=t};mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove};mxGraph.prototype.setDisconnectOnMove=function(t){this.disconnectOnMove=t};mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled};mxGraph.prototype.setDropEnabled=function(t){this.dropEnabled=t};mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled};mxGraph.prototype.setSplitEnabled=function(t){this.splitEnabled=t};mxGraph.prototype.getResizableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.isCellResizable(e)}))};mxGraph.prototype.isCellResizable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsResizable()&&!this.isCellLocked(t)&&mxUtils$1.getValue(e,mxConstants$1.STYLE_RESIZABLE,"1")!="0"};mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable};mxGraph.prototype.setCellsResizable=function(t){this.cellsResizable=t};mxGraph.prototype.isTerminalPointMovable=function(t,e){return!0};mxGraph.prototype.isCellBendable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsBendable()&&!this.isCellLocked(t)&&e[mxConstants$1.STYLE_BENDABLE]!=0};mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable};mxGraph.prototype.setCellsBendable=function(t){this.cellsBendable=t};mxGraph.prototype.getEditableCells=function(t){return this.model.filterCells(t,mxUtils$1.bind(this,function(e){return this.isCellEditable(e)}))};mxGraph.prototype.isCellEditable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsEditable()&&!this.isCellLocked(t)&&e[mxConstants$1.STYLE_EDITABLE]!=0};mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable};mxGraph.prototype.setCellsEditable=function(t){this.cellsEditable=t};mxGraph.prototype.isCellDisconnectable=function(t,e,i){return this.isCellsDisconnectable()&&!this.isCellLocked(t)};mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable};mxGraph.prototype.setCellsDisconnectable=function(t){this.cellsDisconnectable=t};mxGraph.prototype.isValidSource=function(t){return t==null&&this.allowDanglingEdges||t!=null&&(!this.model.isEdge(t)||this.connectableEdges)&&this.isCellConnectable(t)};mxGraph.prototype.isValidTarget=function(t){return this.isValidSource(t)};mxGraph.prototype.isValidConnection=function(t,e){return this.isValidSource(t)&&this.isValidTarget(e)};mxGraph.prototype.setConnectable=function(t){this.connectionHandler.setEnabled(t)};mxGraph.prototype.isConnectable=function(){return this.connectionHandler.isEnabled()};mxGraph.prototype.setTooltips=function(t){this.tooltipHandler.setEnabled(t)};mxGraph.prototype.setPanning=function(t){this.panningHandler.panningEnabled=t};mxGraph.prototype.isEditing=function(t){if(this.cellEditor!=null){var e=this.cellEditor.getEditingCell();return t==null?e!=null:t==e}return!1};mxGraph.prototype.isAutoSizeCell=function(t){var e=this.getCurrentCellStyle(t);return this.isAutoSizeCells()||e[mxConstants$1.STYLE_AUTOSIZE]==1};mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells};mxGraph.prototype.setAutoSizeCells=function(t){this.autoSizeCells=t};mxGraph.prototype.isExtendParent=function(t){return!this.getModel().isEdge(t)&&this.isExtendParents()};mxGraph.prototype.isExtendParents=function(){return this.extendParents};mxGraph.prototype.setExtendParents=function(t){this.extendParents=t};mxGraph.prototype.isExtendParentsOnAdd=function(t){return this.extendParentsOnAdd};mxGraph.prototype.setExtendParentsOnAdd=function(t){this.extendParentsOnAdd=t};mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove};mxGraph.prototype.setExtendParentsOnMove=function(t){this.extendParentsOnMove=t};mxGraph.prototype.isRecursiveResize=function(t){return this.recursiveResize};mxGraph.prototype.setRecursiveResize=function(t){this.recursiveResize=t};mxGraph.prototype.isConstrainChild=function(t){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(t))};mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren};mxGraph.prototype.setConstrainChildren=function(t){this.constrainChildren=t};mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren};mxGraph.prototype.setConstrainRelativeChildren=function(t){this.constrainRelativeChildren=t};mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates};mxGraph.prototype.setAllowNegativeCoordinates=function(t){this.allowNegativeCoordinates=t};mxGraph.prototype.getOverlap=function(t){return this.isAllowOverlapParent(t)?this.defaultOverlap:0};mxGraph.prototype.isAllowOverlapParent=function(t){return!1};mxGraph.prototype.getFoldableCells=function(t,e){return this.model.filterCells(t,mxUtils$1.bind(this,function(i){return this.isCellFoldable(i,e)}))};mxGraph.prototype.isCellFoldable=function(t,e){var i=this.getCurrentCellStyle(t);return this.model.getChildCount(t)>0&&i[mxConstants$1.STYLE_FOLDABLE]!=0};mxGraph.prototype.isValidDropTarget=function(t,e,i){return t!=null&&!this.isCellLocked(t)&&(this.isSplitEnabled()&&this.isSplitTarget(t,e,i)||!this.model.isEdge(t)&&(this.isSwimlane(t)||this.model.getChildCount(t)>0&&!this.isCellCollapsed(t)))};mxGraph.prototype.isSplitTarget=function(t,e,i){if(this.model.isEdge(t)&&e!=null&&e.length==1&&this.isCellConnectable(e[0])&&this.getEdgeValidationError(t,this.model.getTerminal(t,!0),e[0])==null){var n=this.model.getTerminal(t,!0),r=this.model.getTerminal(t,!1);return!this.model.isAncestor(e[0],n)&&!this.model.isAncestor(e[0],r)}return!1};mxGraph.prototype.getDropTarget=function(t,e,i,n){if(!this.isSwimlaneNesting()){for(var r=0;r<t.length;r++)if(this.isSwimlane(t[r]))return null}var l=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e));l.x-=this.panDx,l.y-=this.panDy;var s=this.getSwimlaneAt(l.x,l.y);if(i==null)i=s;else if(s!=null){for(var a=this.model.getParent(s);a!=null&&this.isSwimlane(a)&&a!=i;)a=this.model.getParent(a);a==i&&(i=s)}for(;i!=null&&!this.isValidDropTarget(i,t,e)&&!this.model.isLayer(i);)i=this.model.getParent(i);if(n==null||!n)for(var o=i;o!=null&&mxUtils$1.indexOf(t,o)<0;)o=this.model.getParent(o);return!this.model.isLayer(i)&&o==null?i:null};mxGraph.prototype.getDefaultParent=function(){var t=this.getCurrentRoot();if(t==null&&(t=this.defaultParent,t==null)){var e=this.model.getRoot();t=this.model.getChildAt(e,0)}return t};mxGraph.prototype.setDefaultParent=function(t){this.defaultParent=t};mxGraph.prototype.getSwimlane=function(t){for(;t!=null&&!this.isSwimlane(t);)t=this.model.getParent(t);return t};mxGraph.prototype.getSwimlaneAt=function(t,e,i){if(i==null&&(i=this.getCurrentRoot(),i==null&&(i=this.model.getRoot())),i!=null)for(var n=this.model.getChildCount(i),r=0;r<n;r++){var l=this.model.getChildAt(i,r);if(l!=null){var s=this.getSwimlaneAt(t,e,l);if(s!=null)return s;if(this.isCellVisible(l)&&this.isSwimlane(l)){var a=this.view.getState(l);if(this.intersects(a,t,e))return l}}}return null};mxGraph.prototype.getCellAt=function(t,e,i,n,r,l){if(n=n??!0,r=r??!0,i==null&&(i=this.getCurrentRoot(),i==null&&(i=this.getModel().getRoot())),i!=null)for(var s=this.model.getChildCount(i),a=s-1;a>=0;a--){var o=this.model.getChildAt(i,a),u=this.getCellAt(t,e,o,n,r,l);if(u!=null)return u;if(this.isCellVisible(o)&&(r&&this.model.isEdge(o)||n&&this.model.isVertex(o))){var d=this.view.getState(o);if(d!=null&&(l==null||!l(d,t,e))&&this.intersects(d,t,e))return o}}return null};mxGraph.prototype.intersects=function(t,e,i){if(t!=null){var n=t.absolutePoints;if(n!=null)for(var r=this.tolerance*this.tolerance,l=n[0],s=1;s<n.length;s++){var a=n[s],o=mxUtils$1.ptSegDistSq(l.x,l.y,a.x,a.y,e,i);if(o<=r)return!0;l=a}else{var u=mxUtils$1.toRadians(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION)||0);if(u!=0){var d=Math.cos(-u),p=Math.sin(-u),c=new mxPoint$1(t.getCenterX(),t.getCenterY()),l=mxUtils$1.getRotatedPoint(new mxPoint$1(e,i),d,p,c);e=l.x,i=l.y}if(mxUtils$1.contains(t,e,i))return!0}}return!1};mxGraph.prototype.hitsSwimlaneContent=function(t,e,i){var n=this.getView().getState(t),r=this.getStartSize(t);if(n!=null){var l=this.getView().getScale();if(e-=n.x,i-=n.y,r.width>0&&e>0&&e>r.width*l)return!0;if(r.height>0&&i>0&&i>r.height*l)return!0}return!1};mxGraph.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)};mxGraph.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)};mxGraph.prototype.getChildCells=function(t,e,i){t=t??this.getDefaultParent(),e=e??!1,i=i??!1;for(var n=this.model.getChildCells(t,e,i),r=[],l=0;l<n.length;l++)this.isCellVisible(n[l])&&r.push(n[l]);return r};mxGraph.prototype.getConnections=function(t,e){return this.getEdges(t,e,!0,!0,!1)};mxGraph.prototype.getIncomingEdges=function(t,e){return this.getEdges(t,e,!0,!1,!1)};mxGraph.prototype.getOutgoingEdges=function(t,e){return this.getEdges(t,e,!1,!0,!1)};mxGraph.prototype.getEdges=function(t,e,i,n,r,l){i=i??!0,n=n??!0,r=r??!0,l=l??!1;for(var s=[],a=this.isCellCollapsed(t),o=this.model.getChildCount(t),u=0;u<o;u++){var d=this.model.getChildAt(t,u);(a||!this.isCellVisible(d))&&(s=s.concat(this.model.getEdges(d,i,n)))}s=s.concat(this.model.getEdges(t,i,n));for(var p=[],u=0;u<s.length;u++){var c=this.view.getState(s[u]),g=c!=null?c.getVisibleTerminal(!0):this.view.getVisibleTerminal(s[u],!0),x=c!=null?c.getVisibleTerminal(!1):this.view.getVisibleTerminal(s[u],!1);(r&&g==x||g!=x&&(i&&x==t&&(e==null||this.isValidAncestor(g,e,l))||n&&g==t&&(e==null||this.isValidAncestor(x,e,l))))&&p.push(s[u])}return p};mxGraph.prototype.isValidAncestor=function(t,e,i){return i?this.model.isAncestor(e,t):this.model.getParent(t)==e};mxGraph.prototype.getOpposites=function(t,e,i,n){i=i??!0,n=n??!0;var r=[],l=new mxDictionary$1;if(t!=null)for(var s=0;s<t.length;s++){var a=this.view.getState(t[s]),o=a!=null?a.getVisibleTerminal(!0):this.view.getVisibleTerminal(t[s],!0),u=a!=null?a.getVisibleTerminal(!1):this.view.getVisibleTerminal(t[s],!1);o==e&&u!=null&&u!=e&&n?l.get(u)||(l.put(u,!0),r.push(u)):u==e&&o!=null&&o!=e&&i&&(l.get(o)||(l.put(o,!0),r.push(o)))}return r};mxGraph.prototype.getEdgesBetween=function(t,e,i){i=i??!1;for(var n=this.getEdges(t),r=[],l=0;l<n.length;l++){var s=this.view.getState(n[l]),a=s!=null?s.getVisibleTerminal(!0):this.view.getVisibleTerminal(n[l],!0),o=s!=null?s.getVisibleTerminal(!1):this.view.getVisibleTerminal(n[l],!1);(a==t&&o==e||!i&&a==e&&o==t)&&r.push(n[l])}return r};mxGraph.prototype.getPointForEvent=function(t,e){var i=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(t),mxEvent$1.getClientY(t)),n=this.view.scale,r=this.view.translate,l=e!=!1?this.gridSize/2:0;return i.x=this.snap(i.x/n-r.x-l),i.y=this.snap(i.y/n-r.y-l),i};mxGraph.prototype.getCells=function(t,e,i,n,r,l,s,a,o){if(l=l??[],i>0||n>0||s!=null){var u=this.getModel(),d=t+i,p=e+n;if(r==null&&(r=this.getCurrentRoot(),r==null&&(r=u.getRoot())),r!=null)for(var c=u.getChildCount(r),g=0;g<c;g++){var x=u.getChildAt(r,g),C=this.view.getState(x);if(C!=null&&this.isCellVisible(x)&&(a==null||!a(C))){var T=mxUtils$1.getValue(C.style,mxConstants$1.STYLE_ROTATION)||0,A=C;T!=0&&(A=mxUtils$1.getBoundingBox(A,T));var R=s!=null&&u.isVertex(x)&&mxUtils$1.intersects(s,A)||s!=null&&u.isEdge(x)&&mxUtils$1.intersects(s,A)||s==null&&(u.isEdge(x)||u.isVertex(x))&&A.x>=t&&A.y+A.height<=p&&A.y>=e&&A.x+A.width<=d;R&&l.push(x),(!R||o)&&this.getCells(t,e,i,n,x,l,s,a,o)}}}return l};mxGraph.prototype.getCellsBeyond=function(t,e,i,n,r){var l=[];if((n||r)&&(i==null&&(i=this.getDefaultParent()),i!=null))for(var s=this.model.getChildCount(i),a=0;a<s;a++){var o=this.model.getChildAt(i,a),u=this.view.getState(o);this.isCellVisible(o)&&u!=null&&(!n||u.x>=t)&&(!r||u.y>=e)&&l.push(o)}return l};mxGraph.prototype.findTreeRoots=function(t,e,i){e=e??!1,i=i??!1;var n=[];if(t!=null){for(var r=this.getModel(),l=r.getChildCount(t),s=null,a=0,o=0;o<l;o++){var u=r.getChildAt(t,o);if(this.model.isVertex(u)&&this.isCellVisible(u)){for(var d=this.getConnections(u,e?t:null),p=0,c=0,g=0;g<d.length;g++){var x=this.view.getVisibleTerminal(d[g],!0);x==u?p++:c++}(i&&p==0&&c>0||!i&&c==0&&p>0)&&n.push(u);var C=i?c-p:p-c;C>a&&(a=C,s=u)}}n.length==0&&s!=null&&n.push(s)}return n};mxGraph.prototype.traverse=function(t,e,i,n,r,l){if(i!=null&&t!=null&&(e=e??!0,l=l??!1,r=r||new mxDictionary$1,n==null||!r.get(n))){r.put(n,!0);var s=i(t,n);if(s==null||s){var a=this.model.getEdgeCount(t);if(a>0)for(var o=0;o<a;o++){var u=this.model.getEdgeAt(t,o),d=this.model.getTerminal(u,!0)==t;if(!e||!l==d){var p=this.model.getTerminal(u,!d);this.traverse(p,e,i,u,r,l)}}}}};mxGraph.prototype.isCellSelected=function(t){return this.getSelectionModel().isSelected(t)};mxGraph.prototype.isAncestorSelected=function(t){for(var e=this.model.getParent(t);e!=null&&e!=this.getCurrentRoot();){if(this.isCellSelected(e))return!0;e=this.model.getParent(e)}return!1};mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()};mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()};mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length};mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]};mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()};mxGraph.prototype.setSelectionCell=function(t){this.getSelectionModel().setCell(t)};mxGraph.prototype.setSelectionCells=function(t){this.getSelectionModel().setCells(t)};mxGraph.prototype.addSelectionCell=function(t){this.getSelectionModel().addCell(t)};mxGraph.prototype.addSelectionCells=function(t){this.getSelectionModel().addCells(t)};mxGraph.prototype.removeSelectionCell=function(t){this.getSelectionModel().removeCell(t)};mxGraph.prototype.removeSelectionCells=function(t){this.getSelectionModel().removeCells(t)};mxGraph.prototype.selectRegion=function(t,e){var i=this.getCells(t.x,t.y,t.width,t.height);return this.selectCellsForEvent(i,e),i};mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)};mxGraph.prototype.selectPreviousCell=function(){this.selectCell()};mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)};mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)};mxGraph.prototype.selectCell=function(t,e,i){var n=this.selectionModel,r=n.cells.length>0?n.cells[0]:null;n.cells.length>1&&n.clear();var l=r!=null?this.model.getParent(r):this.getDefaultParent(),s=this.model.getChildCount(l);if(r==null&&s>0){var a=this.model.getChildAt(l,0);this.setSelectionCell(a)}else if((r==null||e)&&this.view.getState(l)!=null&&this.model.getGeometry(l)!=null)this.getCurrentRoot()!=l&&this.setSelectionCell(l);else if(r!=null&&i){var o=this.model.getChildCount(r);if(o>0){var a=this.model.getChildAt(r,0);this.setSelectionCell(a)}}else if(s>0){var u=l.getIndex(r);if(t){u++;var a=this.model.getChildAt(l,u%s);this.setSelectionCell(a)}else{u--;var d=u<0?s-1:u,a=this.model.getChildAt(l,d);this.setSelectionCell(a)}}};mxGraph.prototype.selectAll=function(t,e){t=t||this.getDefaultParent();var i=e?this.model.filterDescendants(mxUtils$1.bind(this,function(n){return n!=t&&this.view.getState(n)!=null}),t):this.model.getChildren(t);i!=null&&this.setSelectionCells(i)};mxGraph.prototype.selectVertices=function(t,e){this.selectCells(!0,!1,t,e)};mxGraph.prototype.selectEdges=function(t){this.selectCells(!1,!0,t)};mxGraph.prototype.selectCells=function(t,e,i,n){i=i||this.getDefaultParent();var r=mxUtils$1.bind(this,function(s){return this.view.getState(s)!=null&&((n||this.model.getChildCount(s)==0)&&this.model.isVertex(s)&&t&&!this.model.isEdge(this.model.getParent(s))||this.model.isEdge(s)&&e)}),l=this.model.filterDescendants(r,i);l!=null&&this.setSelectionCells(l)};mxGraph.prototype.selectCellForEvent=function(t,e){var i=this.isCellSelected(t);this.isToggleEvent(e)?i?this.removeSelectionCell(t):this.addSelectionCell(t):(!i||this.getSelectionCount()!=1)&&this.setSelectionCell(t)};mxGraph.prototype.selectCellsForEvent=function(t,e){this.isToggleEvent(e)?this.addSelectionCells(t):this.setSelectionCells(t)};mxGraph.prototype.createHandler=function(t){var e=null;if(t!=null)if(this.model.isEdge(t.cell)){var i=t.getVisibleTerminalState(!0),n=t.getVisibleTerminalState(!1),r=this.getCellGeometry(t.cell),l=this.view.getEdgeStyle(t,r!=null?r.points:null,i,n);e=this.createEdgeHandler(t,l)}else e=this.createVertexHandler(t);return e};mxGraph.prototype.createVertexHandler=function(t){return new mxVertexHandler$1(t)};mxGraph.prototype.createEdgeHandler=function(t,e){var i=null;return e==mxEdgeStyle$1.Loop||e==mxEdgeStyle$1.ElbowConnector||e==mxEdgeStyle$1.SideToSide||e==mxEdgeStyle$1.TopToBottom?i=this.createElbowEdgeHandler(t):e==mxEdgeStyle$1.SegmentConnector||e==mxEdgeStyle$1.OrthConnector?i=this.createEdgeSegmentHandler(t):i=new mxEdgeHandler$1(t),i};mxGraph.prototype.createEdgeSegmentHandler=function(t){return new mxEdgeSegmentHandler(t)};mxGraph.prototype.createElbowEdgeHandler=function(t){return new mxElbowEdgeHandler$1(t)};mxGraph.prototype.addMouseListener=function(t){this.mouseListeners==null&&(this.mouseListeners=[]),this.mouseListeners.push(t)};mxGraph.prototype.removeMouseListener=function(t){if(this.mouseListeners!=null){for(var e=0;e<this.mouseListeners.length;e++)if(this.mouseListeners[e]==t){this.mouseListeners.splice(e,1);break}}};mxGraph.prototype.updateMouseEvent=function(t,e){if(t.graphX==null||t.graphY==null){var i=mxUtils$1.convertPoint(this.container,t.getX(),t.getY());t.graphX=i.x-this.panDx,t.graphY=i.y-this.panDy,t.getCell()==null&&this.isMouseDown&&e==mxEvent$1.MOUSE_MOVE&&(t.state=this.view.getState(this.getCellAt(i.x,i.y,null,null,null,function(n){return n.shape==null||n.shape.paintBackground!=mxRectangleShape$1.prototype.paintBackground||mxUtils$1.getValue(n.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"||n.shape.fill!=null&&n.shape.fill!=mxConstants$1.NONE})))}return t};mxGraph.prototype.getStateForTouchEvent=function(t){var e=mxEvent$1.getClientX(t),i=mxEvent$1.getClientY(t),n=mxUtils$1.convertPoint(this.container,e,i);return this.view.getState(this.getCellAt(n.x,n.y))};mxGraph.prototype.isEventIgnored=function(t,e,i){var n=mxEvent$1.isMouseEvent(e.getEvent()),r=!1;if(e.getEvent()==this.lastEvent?r=!0:this.lastEvent=e.getEvent(),this.eventSource!=null&&t!=mxEvent$1.MOUSE_MOVE)mxEvent$1.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null;else if(!mxClient$1.IS_GC&&this.eventSource!=null&&e.getSource()!=this.eventSource)r=!0;else if(mxClient$1.IS_TOUCH&&t==mxEvent$1.MOUSE_DOWN&&!n&&!mxEvent$1.isPenEvent(e.getEvent())){this.eventSource=e.getSource();var l=null;(mxClient$1.IS_ANDROID||!mxClient$1.IS_LINUX||!mxClient$1.IS_GC)&&(l=e.getEvent().pointerId),this.mouseMoveRedirect=mxUtils$1.bind(this,function(s){(l==null||s.pointerId==l)&&this.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent$1(s,this.getStateForTouchEvent(s)))}),this.mouseUpRedirect=mxUtils$1.bind(this,function(s){this.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent$1(s,this.getStateForTouchEvent(s))),l=null}),mxEvent$1.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)}return this.isSyntheticEventIgnored(t,e,i)&&(r=!0),!mxEvent$1.isPopupTrigger(this.lastEvent)&&t!=mxEvent$1.MOUSE_MOVE&&this.lastEvent.detail==2?!0:(t==mxEvent$1.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:t==mxEvent$1.MOUSE_DOWN&&!this.isMouseDown?(this.isMouseDown=!0,this.isMouseTrigger=n):!r&&((!mxClient$1.IS_FF||t!=mxEvent$1.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=n||t==mxEvent$1.MOUSE_DOWN&&this.isMouseDown||t==mxEvent$1.MOUSE_UP&&!this.isMouseDown)&&(r=!0),!r&&t==mxEvent$1.MOUSE_DOWN&&(this.lastMouseX=e.getX(),this.lastMouseY=e.getY()),r)};mxGraph.prototype.isSyntheticEventIgnored=function(t,e,i){var n=!1,r=mxEvent$1.isMouseEvent(e.getEvent());return this.ignoreMouseEvents&&r&&t!=mxEvent$1.MOUSE_MOVE?(this.ignoreMouseEvents=t!=mxEvent$1.MOUSE_UP,n=!0):mxClient$1.IS_FF&&!r&&t==mxEvent$1.MOUSE_UP&&(this.ignoreMouseEvents=!0),n};mxGraph.prototype.isEventSourceIgnored=function(t,e){var i=e.getSource(),n=i.nodeName!=null?i.nodeName.toLowerCase():"",r=!mxEvent$1.isMouseEvent(e.getEvent())||mxEvent$1.isLeftMouseButton(e.getEvent());return t==mxEvent$1.MOUSE_DOWN&&r&&(n=="select"||n=="option"||n=="input"&&i.type!="checkbox"&&i.type!="radio"&&i.type!="button"&&i.type!="submit"&&i.type!="file")};mxGraph.prototype.getEventState=function(t){return t};mxGraph.prototype.isPointerEventIgnored=function(t,e){var i=!1;if(mxClient$1.IS_ANDROID||!mxClient$1.IS_LINUX||!mxClient$1.IS_GC){var n=e.getEvent().pointerId;t==mxEvent$1.MOUSE_DOWN?this.currentPointerId!=null&&this.currentPointerId!=n?i=!0:this.currentPointerId==null&&(this.currentPointerId=e.getEvent().pointerId):t==mxEvent$1.MOUSE_MOVE?this.currentPointerId!=null&&this.currentPointerId!=n&&(i=!0):t==mxEvent$1.MOUSE_UP&&(this.currentPointerId=null)}return i};mxGraph.prototype.fireMouseEvent=function(t,e,i){if(this.isEventSourceIgnored(t,e)){this.tooltipHandler!=null&&this.tooltipHandler.hide();return}if(this.isPointerEventIgnored(t,e)){this.tapAndHoldValid=!1;return}if(i==null&&(i=this),e=this.updateMouseEvent(e,t),!this.nativeDblClickEnabled&&!mxEvent$1.isPopupTrigger(e.getEvent())||this.doubleTapEnabled&&mxClient$1.IS_TOUCH&&(mxEvent$1.isTouchEvent(e.getEvent())||mxEvent$1.isPenEvent(e.getEvent()))){var n=new Date().getTime();if(t==mxEvent$1.MOUSE_DOWN)if(this.lastTouchEvent!=null&&this.lastTouchEvent!=e.getEvent()&&n-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var r=!1;if(t==mxEvent$1.MOUSE_UP){if(e.getCell()==this.lastTouchCell&&this.lastTouchCell!=null){this.lastTouchTime=0;var l=this.lastTouchCell;this.lastTouchCell=null,this.dblClick(e.getEvent(),l),r=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(r){mxEvent$1.consume(e.getEvent());return}}else(this.lastTouchEvent==null||this.lastTouchEvent!=e.getEvent())&&(this.lastTouchCell=e.getCell(),this.lastTouchX=e.getX(),this.lastTouchY=e.getY(),this.lastTouchTime=n,this.lastTouchEvent=e.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||t==mxEvent$1.MOUSE_UP)&&this.fireDoubleClick){this.fireDoubleClick=!1;var l=this.lastTouchCell;this.lastTouchCell=null,this.isMouseDown=!1;var s=l!=null||(mxEvent$1.isTouchEvent(e.getEvent())||mxEvent$1.isPenEvent(e.getEvent()))&&(mxClient$1.IS_GC||mxClient$1.IS_SF);s&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance?this.dblClick(e.getEvent(),l):mxEvent$1.consume(e.getEvent());return}}if(!this.isEventIgnored(t,e,i)){if(e.state=this.getEventState(e.getState()),this.fireEvent(new mxEventObject$1(mxEvent$1.FIRE_MOUSE_EVENT,"eventName",t,"event",e)),mxClient$1.IS_OP||mxClient$1.IS_SF||mxClient$1.IS_GC||mxClient$1.IS_IE11||mxClient$1.IS_IE&&mxClient$1.IS_SVG||e.getEvent().target!=this.container){if(t==mxEvent$1.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent$1.isMultiTouchEvent(e.getEvent))this.scrollPointToVisible(e.getGraphX(),e.getGraphY(),this.autoExtend);else if(t==mxEvent$1.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(this.container.scrollLeft!=0||this.container.scrollTop!=0)){var a=this.view.scale,o=this.view.translate;this.view.setTranslate(o.x-this.container.scrollLeft/a,o.y-this.container.scrollTop/a),this.container.scrollLeft=0,this.container.scrollTop=0}if(this.mouseListeners!=null){var u=[i,e];e.getEvent().preventDefault||(e.getEvent().returnValue=!0);for(var d=0;d<this.mouseListeners.length;d++){var p=this.mouseListeners[d];t==mxEvent$1.MOUSE_DOWN?p.mouseDown.apply(p,u):t==mxEvent$1.MOUSE_MOVE?p.mouseMove.apply(p,u):t==mxEvent$1.MOUSE_UP&&p.mouseUp.apply(p,u)}}t==mxEvent$1.MOUSE_UP&&this.click(e)}if((mxEvent$1.isTouchEvent(e.getEvent())||mxEvent$1.isPenEvent(e.getEvent()))&&t==mxEvent$1.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress){this.tapAndHoldInProgress=!0,this.initialTouchX=e.getGraphX(),this.initialTouchY=e.getGraphY();var c=function(){this.tapAndHoldValid&&this.tapAndHold(e),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1};this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils$1.bind(this,c),this.tapAndHoldDelay),this.tapAndHoldValid=!0}else t==mxEvent$1.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-e.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-e.getGraphY())<this.tolerance);t==mxEvent$1.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(e.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(t,e,i)}};mxGraph.prototype.consumeMouseEvent=function(t,e,i){this.fireEvent(new mxEventObject$1(mxEvent$1.CONSUME_MOUSE_EVENT,"eventName",t,"event",e)),t==mxEvent$1.MOUSE_DOWN&&mxEvent$1.isTouchEvent(e.getEvent())&&e.consume(!1)};mxGraph.prototype.fireGestureEvent=function(t,e){this.lastTouchTime=0,this.fireEvent(new mxEventObject$1(mxEvent$1.GESTURE,"event",t,"cell",e))};mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.tooltipHandler!=null&&this.tooltipHandler.destroy(),this.selectionCellsHandler!=null&&this.selectionCellsHandler.destroy(),this.panningHandler!=null&&this.panningHandler.destroy(),this.popupMenuHandler!=null&&this.popupMenuHandler.destroy(),this.connectionHandler!=null&&this.connectionHandler.destroy(),this.graphHandler!=null&&this.graphHandler.destroy(),this.cellEditor!=null&&this.cellEditor.destroy(),this.view!=null&&this.view.destroy(),this.model!=null&&this.graphModelChangeListener!=null&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)};mxCodecRegistry.register(function(){return new mxObjectCodec$1(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])}());mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxGraphView);return t.encode=function(e,i){return this.encodeCell(e,i,i.graph.getModel().getRoot())},t.encodeCell=function(e,i,n){var r=i.graph.getModel(),l=i.getState(n),s=r.getParent(n);if(s==null||l!=null){var a=r.getChildCount(n),o=i.graph.getCellGeometry(n),u=null;if(s==r.getRoot()?u="layer":s==null?u="graph":r.isEdge(n)?u="edge":a>0&&o!=null?u="group":r.isVertex(n)&&(u="vertex"),u!=null){var d=e.document.createElement(u),p=i.graph.getLabel(n);if(p!=null&&(d.setAttribute("label",i.graph.getLabel(n)),i.graph.isHtmlLabel(n)&&d.setAttribute("html",!0)),s==null){var c=i.getGraphBounds();c!=null&&(d.setAttribute("x",Math.round(c.x)),d.setAttribute("y",Math.round(c.y)),d.setAttribute("width",Math.round(c.width)),d.setAttribute("height",Math.round(c.height))),d.setAttribute("scale",i.scale)}else if(l!=null&&o!=null){for(var g in l.style){var x=l.style[g];typeof x=="function"&&typeof x=="object"&&(x=mxStyleRegistry.getName(x)),x!=null&&typeof x!="function"&&typeof x!="object"&&d.setAttribute(g,x)}var C=l.absolutePoints;if(C!=null&&C.length>0){for(var T=Math.round(C[0].x)+","+Math.round(C[0].y),g=1;g<C.length;g++)T+=" "+Math.round(C[g].x)+","+Math.round(C[g].y);d.setAttribute("points",T)}else d.setAttribute("x",Math.round(l.x)),d.setAttribute("y",Math.round(l.y)),d.setAttribute("width",Math.round(l.width)),d.setAttribute("height",Math.round(l.height));var A=l.absoluteOffset;A!=null&&(A.x!=0&&d.setAttribute("dx",Math.round(A.x)),A.y!=0&&d.setAttribute("dy",Math.round(A.y)))}for(var g=0;g<a;g++){var R=this.encodeCell(e,i,r.getChildAt(n,g));R!=null&&d.appendChild(R)}}}return d},t}());mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxGraphModel);return t.encodeObject=function(e,i,n){var r=e.document.createElement("root");e.encodeCell(i.getRoot(),r),n.appendChild(r)},t.decodeChild=function(e,i,n){i.nodeName=="root"?this.decodeRoot(e,i,n):mxObjectCodec$1.prototype.decodeChild.apply(this,arguments)},t.decodeRoot=function(e,i,n){for(var r=null,l=i.firstChild;l!=null;){var s=e.decodeCell(l);s!=null&&s.getParent()==null&&(r=s),l=l.nextSibling}r!=null&&n.setRoot(r)},t}());mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxRootChange,["model","previous","root"]);return t.afterEncode=function(e,i,n){return e.encodeCell(i.root,n),n},t.beforeDecode=function(e,i,n){if(i.firstChild!=null&&i.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT){i=i.cloneNode(!0);var r=i.firstChild;n.root=e.decodeCell(r,!1);var l=r.nextSibling;for(r.parentNode.removeChild(r),r=l;r!=null;)l=r.nextSibling,e.decodeCell(r),r.parentNode.removeChild(r),r=l}return i},t.afterDecode=function(e,i,n){return n.previous=n.root,n},t}());mxCodecRegistry.register(function(){var t=new mxObjectCodec$1(new mxTerminalChange$1,["model","previous"],["cell","terminal"]);return t.afterDecode=function(e,i,n){return n.previous=n.terminal,n},t}());function mxGraphLayout(t){this.graph=t}mxGraphLayout.prototype.graph=null;mxGraphLayout.prototype.useBoundingBox=!0;mxGraphLayout.prototype.parent=null;mxGraphLayout.prototype.moveCell=function(t,e,i){};mxGraphLayout.prototype.resizeCell=function(t,e){};mxGraphLayout.prototype.execute=function(t){};mxGraphLayout.prototype.getGraph=function(){return this.graph};mxGraphLayout.prototype.getConstraint=function(t,e,i,n){return this.graph.getCurrentCellStyle(e)[t]};mxGraphLayout.traverse=function(t,e,i,n,r){if(i!=null&&t!=null&&(e=e??!0,r=r||new mxDictionary$1,!r.get(t))){r.put(t,!0);var l=i(t,n);if(l==null||l){var s=this.graph.model.getEdgeCount(t);if(s>0)for(var a=0;a<s;a++){var o=this.graph.model.getEdgeAt(t,a),u=this.graph.model.getTerminal(o,!0)==t;if(!e||u){var d=this.graph.view.getVisibleTerminal(o,!u);this.traverse(d,e,i,o,r)}}}}};mxGraphLayout.prototype.isAncestor=function(t,e,i){if(!i)return this.graph.model.getParent(e)==t;if(e==t)return!1;for(;e!=null&&e!=t;)e=this.graph.model.getParent(e);return e==t};mxGraphLayout.prototype.isVertexMovable=function(t){return this.graph.isCellMovable(t)};mxGraphLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.getModel().isVisible(t)};mxGraphLayout.prototype.isEdgeIgnored=function(t){var e=this.graph.getModel();return!e.isEdge(t)||!this.graph.getModel().isVisible(t)||e.getTerminal(t,!0)==null||e.getTerminal(t,!1)==null};mxGraphLayout.prototype.setEdgeStyleEnabled=function(t,e){this.graph.setCellStyles(mxConstants$1.STYLE_NOEDGESTYLE,e?"0":"1",[t])};mxGraphLayout.prototype.setOrthogonalEdge=function(t,e){this.graph.setCellStyles(mxConstants$1.STYLE_ORTHOGONAL,e?"1":"0",[t])};mxGraphLayout.prototype.getParentOffset=function(t){var e=new mxPoint$1;if(t!=null&&t!=this.parent){var i=this.graph.getModel();if(i.isAncestor(this.parent,t))for(var n=i.getGeometry(t);t!=this.parent;)e.x=e.x+n.x,e.y=e.y+n.y,t=i.getParent(t),n=i.getGeometry(t)}return e};mxGraphLayout.prototype.setEdgePoints=function(t,e){if(t!=null){var i=this.graph.model,n=i.getGeometry(t);if(n==null?(n=new mxGeometry,n.setRelative(!0)):n=n.clone(),this.parent!=null&&e!=null)for(var r=i.getParent(t),l=this.getParentOffset(r),s=0;s<e.length;s++)e[s].x=e[s].x-l.x,e[s].y=e[s].y-l.y;n.points=e,i.setGeometry(t,n)}};mxGraphLayout.prototype.setVertexLocation=function(t,e,i){var n=this.graph.getModel(),r=n.getGeometry(t),l=null;if(r!=null){if(l=new mxRectangle$1(e,i,r.width,r.height),this.useBoundingBox){var s=this.graph.getView().getState(t);if(s!=null&&s.text!=null&&s.text.boundingBox!=null){var a=this.graph.getView().scale,o=s.text.boundingBox;s.text.boundingBox.x<s.x&&(e+=(s.x-o.x)/a,l.width=o.width),s.text.boundingBox.y<s.y&&(i+=(s.y-o.y)/a,l.height=o.height)}}if(this.parent!=null){var u=n.getParent(t);if(u!=null&&u!=this.parent){var d=this.getParentOffset(u);e=e-d.x,i=i-d.y}}(r.x!=e||r.y!=i)&&(r=r.clone(),r.x=e,r.y=i,n.setGeometry(t,r))}return l};mxGraphLayout.prototype.getVertexBounds=function(t){var e=this.graph.getModel().getGeometry(t);if(this.useBoundingBox){var i=this.graph.getView().getState(t);if(i!=null&&i.text!=null&&i.text.boundingBox!=null){var n=this.graph.getView().scale,r=i.text.boundingBox,l=Math.max(i.x-r.x,0)/n,s=Math.max(i.y-r.y,0)/n,a=Math.max(r.x+r.width-(i.x+i.width),0)/n,o=Math.max(r.y+r.height-(i.y+i.height),0)/n;e=new mxRectangle$1(e.x-l,e.y-s,e.width+l+a,e.height+s+o)}}if(this.parent!=null){var u=this.graph.getModel().getParent(t);if(e=e.clone(),u!=null&&u!=this.parent){var d=this.getParentOffset(u);e.x=e.x+d.x,e.y=e.y+d.y}}return new mxRectangle$1(e.x,e.y,e.width,e.height)};mxGraphLayout.prototype.arrangeGroups=function(t,e,i,n,r,l){return this.graph.updateGroupBounds(t,e,!0,i,n,r,l)};function WeightedCellSorter$1(t,e){this.cell=t,this.weightedValue=e}WeightedCellSorter$1.prototype.weightedValue=0;WeightedCellSorter$1.prototype.nudge=!1;WeightedCellSorter$1.prototype.visited=!1;WeightedCellSorter$1.prototype.rankIndex=null;WeightedCellSorter$1.prototype.cell=null;WeightedCellSorter$1.prototype.compare=function(t,e){return t!=null&&e!=null?e.weightedValue>t.weightedValue?-1:e.weightedValue<t.weightedValue?1:e.nudge?-1:1:0};function mxCircleLayout(t,e){mxGraphLayout.call(this,t),this.radius=e??100}mxCircleLayout.prototype=new mxGraphLayout;mxCircleLayout.prototype.constructor=mxCircleLayout;mxCircleLayout.prototype.radius=null;mxCircleLayout.prototype.moveCircle=!1;mxCircleLayout.prototype.x0=0;mxCircleLayout.prototype.y0=0;mxCircleLayout.prototype.resetEdges=!0;mxCircleLayout.prototype.disableEdgeStyle=!0;mxCircleLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var i=0,n=null,r=null,l=[],s=e.getChildCount(t),a=0;a<s;a++){var o=e.getChildAt(t,a);if(this.isVertexIgnored(o))this.isEdgeIgnored(o)||(this.resetEdges&&this.graph.resetEdge(o),this.disableEdgeStyle&&this.setEdgeStyleEnabled(o,!1));else{l.push(o);var u=this.getVertexBounds(o);n==null?n=u.y:n=Math.min(n,u.y),r==null?r=u.x:r=Math.min(r,u.x),i=Math.max(i,Math.max(u.width,u.height))}}var d=this.getRadius(l.length,i);this.moveCircle&&(r=this.x0,n=this.y0),this.circle(l,d,r,n)}finally{e.endUpdate()}};mxCircleLayout.prototype.getRadius=function(t,e){return Math.max(t*e/Math.PI,this.radius)};mxCircleLayout.prototype.circle=function(t,e,i,n){for(var r=t.length,l=2*Math.PI/r,s=0;s<r;s++)this.isVertexMovable(t[s])&&this.setVertexLocation(t[s],Math.round(i+e+e*Math.cos(s*l-Math.PI/2)),Math.round(n+e+e*Math.sin(s*l-Math.PI/2)))};function mxCompactTreeLayout(t,e,i){mxGraphLayout.call(this,t),this.horizontal=e??!0,this.invert=i??!1}mxCompactTreeLayout.prototype=new mxGraphLayout;mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout;mxCompactTreeLayout.prototype.horizontal=null;mxCompactTreeLayout.prototype.invert=null;mxCompactTreeLayout.prototype.resizeParent=!0;mxCompactTreeLayout.prototype.maintainParentLocation=!1;mxCompactTreeLayout.prototype.groupPadding=10;mxCompactTreeLayout.prototype.groupPaddingTop=0;mxCompactTreeLayout.prototype.groupPaddingRight=0;mxCompactTreeLayout.prototype.groupPaddingBottom=0;mxCompactTreeLayout.prototype.groupPaddingLeft=0;mxCompactTreeLayout.prototype.parentsChanged=null;mxCompactTreeLayout.prototype.moveTree=!1;mxCompactTreeLayout.prototype.visited=null;mxCompactTreeLayout.prototype.levelDistance=10;mxCompactTreeLayout.prototype.nodeDistance=20;mxCompactTreeLayout.prototype.resetEdges=!0;mxCompactTreeLayout.prototype.prefHozEdgeSep=5;mxCompactTreeLayout.prototype.prefVertEdgeOff=4;mxCompactTreeLayout.prototype.minEdgeJetty=8;mxCompactTreeLayout.prototype.channelBuffer=4;mxCompactTreeLayout.prototype.edgeRouting=!0;mxCompactTreeLayout.prototype.sortEdges=!1;mxCompactTreeLayout.prototype.alignRanks=!1;mxCompactTreeLayout.prototype.maxRankHeight=null;mxCompactTreeLayout.prototype.root=null;mxCompactTreeLayout.prototype.node=null;mxCompactTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||this.graph.getConnections(t).length==0};mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal};mxCompactTreeLayout.prototype.execute=function(t,e){this.parent=t;var i=this.graph.getModel();if(e==null)if(this.graph.getEdges(t,i.getParent(t),this.invert,!this.invert,!1).length>0)this.root=t;else{var n=this.graph.findTreeRoots(t,!0,this.invert);if(n.length>0){for(var r=0;r<n.length;r++)if(!this.isVertexIgnored(n[r])&&this.graph.getEdges(n[r],null,this.invert,!this.invert,!1).length>0){this.root=n[r];break}}}else this.root=e;if(this.root!=null){if(this.resizeParent?this.parentsChanged=new Object:this.parentsChanged=null,this.parentX=null,this.parentY=null,t!=this.root&&i.isVertex(t)!=null&&this.maintainParentLocation){var l=this.graph.getCellGeometry(t);l!=null&&(this.parentX=l.x,this.parentY=l.y)}i.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,t),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),this.node!=null){this.layout(this.node);var s=this.graph.gridSize,a=s;if(!this.moveTree){var o=this.getVertexBounds(this.root);o!=null&&(s=o.x,a=o.y)}var u=null;if(this.isHorizontal()?u=this.horizontalLayout(this.node,s,a):u=this.verticalLayout(this.node,null,s,a),u!=null){var d=0,p=0;u.x<0&&(d=Math.abs(s-u.x)),u.y<0&&(p=Math.abs(a-u.y)),(d!=0||p!=0)&&this.moveNode(this.node,d,p),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}if(this.parentX!=null&&this.parentY!=null){var l=this.graph.getCellGeometry(t);l!=null&&(l=l.clone(),l.x=this.parentX,l.y=this.parentY,i.setGeometry(t,l))}}}finally{i.endUpdate()}}};mxCompactTreeLayout.prototype.moveNode=function(t,e,i){t.x+=e,t.y+=i,this.apply(t);for(var n=t.child;n!=null;)this.moveNode(n,e,i),n=n.next};mxCompactTreeLayout.prototype.sortOutgoingEdges=function(t,e){var i=new mxDictionary$1;e.sort(function(n,r){var l=n.getTerminal(n.getTerminal(!1)==t),s=i.get(l);s==null&&(s=mxCellPath.create(l).split(mxCellPath.PATH_SEPARATOR),i.put(l,s));var a=r.getTerminal(r.getTerminal(!1)==t),o=i.get(a);return o==null&&(o=mxCellPath.create(a).split(mxCellPath.PATH_SEPARATOR),i.put(a,o)),mxCellPath.compare(s,o)})};mxCompactTreeLayout.prototype.findRankHeights=function(t,e){(this.maxRankHeight[e]==null||this.maxRankHeight[e]<t.height)&&(this.maxRankHeight[e]=t.height);for(var i=t.child;i!=null;)this.findRankHeights(i,e+1),i=i.next};mxCompactTreeLayout.prototype.setCellHeights=function(t,e){this.maxRankHeight[e]!=null&&this.maxRankHeight[e]>t.height&&(t.height=this.maxRankHeight[e]);for(var i=t.child;i!=null;)this.setCellHeights(i,e+1),i=i.next};mxCompactTreeLayout.prototype.dfs=function(t,e){var i=mxCellPath.create(t),n=null;if(t!=null&&this.visited[i]==null&&!this.isVertexIgnored(t)){this.visited[i]=t,n=this.createNode(t);var r=this.graph.getModel(),l=null,s=this.graph.getEdges(t,e,this.invert,!this.invert,!1,!0),a=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(t,s);for(var o=0;o<s.length;o++){var u=s[o];if(!this.isEdgeIgnored(u)){this.resetEdges&&this.setEdgePoints(u,null),this.edgeRouting&&(this.setEdgeStyleEnabled(u,!1),this.setEdgePoints(u,null));var d=a.getState(u),p=d!=null?d.getVisibleTerminal(this.invert):a.getVisibleTerminal(u,this.invert),c=this.dfs(p,e);c!=null&&r.getGeometry(p)!=null&&(l==null?n.child=c:l.next=c,l=c)}}}return n};mxCompactTreeLayout.prototype.layout=function(t){if(t!=null){for(var e=t.child;e!=null;)this.layout(e),e=e.next;t.child!=null?this.attachParent(t,this.join(t)):this.layoutLeaf(t)}};mxCompactTreeLayout.prototype.horizontalLayout=function(t,e,i,n){t.x+=e+t.offsetX,t.y+=i+t.offsetY,n=this.apply(t,n);var r=t.child;if(r!=null){n=this.horizontalLayout(r,t.x,t.y,n);for(var l=t.y+r.offsetY,s=r.next;s!=null;)n=this.horizontalLayout(s,t.x+r.offsetX,l,n),l+=s.offsetY,s=s.next}return n};mxCompactTreeLayout.prototype.verticalLayout=function(t,e,i,n,r){t.x+=i+t.offsetY,t.y+=n+t.offsetX,r=this.apply(t,r);var l=t.child;if(l!=null){r=this.verticalLayout(l,t,t.x,t.y,r);for(var s=t.x+l.offsetY,a=l.next;a!=null;)r=this.verticalLayout(a,t,s,t.y+l.offsetX,r),s+=a.offsetY,a=a.next}return r};mxCompactTreeLayout.prototype.attachParent=function(t,e){var i=this.nodeDistance+this.levelDistance,n=(e-t.width)/2-this.nodeDistance,r=n+t.width+2*this.nodeDistance-e;t.child.offsetX=i+t.height,t.child.offsetY=r,t.contour.upperHead=this.createLine(t.height,0,this.createLine(i,r,t.contour.upperHead)),t.contour.lowerHead=this.createLine(t.height,0,this.createLine(i,n,t.contour.lowerHead))};mxCompactTreeLayout.prototype.layoutLeaf=function(t){var e=2*this.nodeDistance;t.contour.upperTail=this.createLine(t.height+e,0),t.contour.upperHead=t.contour.upperTail,t.contour.lowerTail=this.createLine(0,-t.width-e),t.contour.lowerHead=this.createLine(t.height+e,0,t.contour.lowerTail)};mxCompactTreeLayout.prototype.join=function(t){var e=2*this.nodeDistance,i=t.child;t.contour=i.contour;var n=i.width+e,r=n;for(i=i.next;i!=null;){var l=this.merge(t.contour,i.contour);i.offsetY=l+n,i.offsetX=0,n=i.width+e,r+=l+n,i=i.next}return r};mxCompactTreeLayout.prototype.merge=function(t,e){for(var i=0,n=0,r=0,l=t.lowerHead,s=e.upperHead;s!=null&&l!=null;){var a=this.offset(i,n,s.dx,s.dy,l.dx,l.dy);n+=a,r+=a,i+s.dx<=l.dx?(i+=s.dx,n+=s.dy,s=s.next):(i-=l.dx,n-=l.dy,l=l.next)}if(s!=null){var o=this.bridge(t.upperTail,0,0,s,i,n);t.upperTail=o.next!=null?e.upperTail:o,t.lowerTail=e.lowerTail}else{var o=this.bridge(e.lowerTail,i,n,l,0,0);o.next==null&&(t.lowerTail=o)}return t.lowerHead=e.lowerHead,r};mxCompactTreeLayout.prototype.offset=function(t,e,i,n,r,l){var s=0;if(r<=t||t+i<=0)return 0;var a=r*n-i*l;if(a>0)if(t<0){var o=t*n;s=o/i-e}else if(t>0){var o=t*l;s=o/r-e}else s=-e;else if(r<t+i){var o=(r-t)*n;s=l-(e+o/i)}else if(r>t+i){var o=(i+t)*l;s=o/r-(e+n)}else s=l-(e+n);return s>0?s:0};mxCompactTreeLayout.prototype.bridge=function(t,e,i,n,r,l){var s=r+n.dx-e,a=0,o=0;n.dx==0?a=n.dy:(o=s*n.dy,a=o/n.dx);var u=this.createLine(s,a,n.next);return t.next=this.createLine(0,l+n.dy-a-i,u),u};mxCompactTreeLayout.prototype.createNode=function(t){var e=new Object;e.cell=t,e.x=0,e.y=0,e.width=0,e.height=0;var i=this.getVertexBounds(t);return i!=null&&(this.isHorizontal()?(e.width=i.height,e.height=i.width):(e.width=i.width,e.height=i.height)),e.offsetX=0,e.offsetY=0,e.contour=new Object,e};mxCompactTreeLayout.prototype.apply=function(t,e){var i=this.graph.getModel(),n=t.cell,r=i.getGeometry(n);if(n!=null&&r!=null){if(this.isVertexMovable(n)&&(r=this.setVertexLocation(n,t.x,t.y),this.resizeParent)){var l=i.getParent(n),s=mxCellPath.create(l);this.parentsChanged[s]==null&&(this.parentsChanged[s]=l)}e==null?e=new mxRectangle$1(r.x,r.y,r.width,r.height):e=new mxRectangle$1(Math.min(e.x,r.x),Math.min(e.y,r.y),Math.max(e.x+e.width,r.x+r.width),Math.max(e.y+e.height,r.y+r.height))}return e};mxCompactTreeLayout.prototype.createLine=function(t,e,i){var n=new Object;return n.dx=t,n.dy=e,n.next=i,n};mxCompactTreeLayout.prototype.adjustParents=function(){var t=[];for(var e in this.parentsChanged)t.push(this.parentsChanged[e]);this.arrangeGroups(mxUtils$1.sortCells(t,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)};mxCompactTreeLayout.prototype.localEdgeProcessing=function(t){this.processNodeOutgoing(t);for(var e=t.child;e!=null;)this.localEdgeProcessing(e),e=e.next};mxCompactTreeLayout.prototype.processNodeOutgoing=function(t){for(var e=t.child,i=t.cell,n=0,r=[];e!=null;){n++;var l=e.x;this.horizontal&&(l=e.y),r.push(new WeightedCellSorter(e,l)),e=e.next}r.sort(WeightedCellSorter.prototype.compare);var s=t.width,a=(n+1)*this.prefHozEdgeSep;s>a+2*this.prefHozEdgeSep&&(s-=2*this.prefHozEdgeSep);var o=s/n,u=o/2;s>a+2*this.prefHozEdgeSep&&(u+=this.prefHozEdgeSep);var d=this.minEdgeJetty-this.prefVertEdgeOff,p=this.getVertexBounds(i);e=t.child;for(var c=0;c<r.length;c++){for(var g=r[c].cell.cell,x=this.getVertexBounds(g),C=this.graph.getEdgesBetween(i,g,!1),T=[],A=0,R=0,_=0;_<C.length;_++)this.horizontal?(A=p.x+p.width,R=p.y+u,T.push(new mxPoint$1(A,R)),A=p.x+p.width+d,T.push(new mxPoint$1(A,R)),R=x.y+x.height/2,T.push(new mxPoint$1(A,R)),this.setEdgePoints(C[_],T)):(A=p.x+u,R=p.y+p.height,T.push(new mxPoint$1(A,R)),R=p.y+p.height+d,T.push(new mxPoint$1(A,R)),A=x.x+x.width/2,T.push(new mxPoint$1(A,R)),this.setEdgePoints(C[_],T));c<n/2?d+=this.prefVertEdgeOff:c>n/2&&(d-=this.prefVertEdgeOff),u+=o}};function mxCompositeLayout(t,e,i){mxGraphLayout.call(this,t),this.layouts=e,this.master=i}mxCompositeLayout.prototype=new mxGraphLayout;mxCompositeLayout.prototype.constructor=mxCompositeLayout;mxCompositeLayout.prototype.layouts=null;mxCompositeLayout.prototype.master=null;mxCompositeLayout.prototype.moveCell=function(t,e,i){this.master!=null?this.master.moveCell.apply(this.master,arguments):this.layouts[0].moveCell.apply(this.layouts[0],arguments)};mxCompositeLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var i=0;i<this.layouts.length;i++)this.layouts[i].execute.apply(this.layouts[i],arguments)}finally{e.endUpdate()}};function mxEdgeLabelLayout(t,e){mxGraphLayout.call(this,t)}mxEdgeLabelLayout.prototype=new mxGraphLayout;mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout;mxEdgeLabelLayout.prototype.execute=function(t){for(var e=this.graph.view,i=this.graph.getModel(),n=[],r=[],l=i.getChildCount(t),s=0;s<l;s++){var a=i.getChildAt(t,s),o=e.getState(a);o!=null&&(this.isVertexIgnored(a)?this.isEdgeIgnored(a)||n.push(o):r.push(o))}this.placeLabels(r,n)};mxEdgeLabelLayout.prototype.placeLabels=function(t,e){var i=this.graph.getModel();i.beginUpdate();try{for(var n=0;n<e.length;n++){var r=e[n];if(r!=null&&r.text!=null&&r.text.boundingBox!=null)for(var l=0;l<t.length;l++){var s=t[l];s!=null&&this.avoid(r,s)}}}finally{i.endUpdate()}};mxEdgeLabelLayout.prototype.avoid=function(t,e){var i=this.graph.getModel(),n=t.text.boundingBox;if(mxUtils$1.intersects(n,e)){var r=-n.y-n.height+e.y,l=-n.y+e.y+e.height,s=Math.abs(r)<Math.abs(l)?r:l,a=-n.x-n.width+e.x,o=-n.x+e.x+e.width,u=Math.abs(a)<Math.abs(o)?a:o;Math.abs(u)<Math.abs(s)?s=0:u=0;var d=i.getGeometry(t.cell);d!=null&&(d=d.clone(),d.offset!=null?(d.offset.x+=u,d.offset.y+=s):d.offset=new mxPoint$1(u,s),i.setGeometry(t.cell,d))}};function mxFastOrganicLayout(t){mxGraphLayout.call(this,t)}mxFastOrganicLayout.prototype=new mxGraphLayout;mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout;mxFastOrganicLayout.prototype.useInputOrigin=!0;mxFastOrganicLayout.prototype.resetEdges=!0;mxFastOrganicLayout.prototype.disableEdgeStyle=!0;mxFastOrganicLayout.prototype.forceConstant=50;mxFastOrganicLayout.prototype.forceConstantSquared=0;mxFastOrganicLayout.prototype.minDistanceLimit=2;mxFastOrganicLayout.prototype.maxDistanceLimit=500;mxFastOrganicLayout.prototype.minDistanceLimitSquared=4;mxFastOrganicLayout.prototype.initialTemp=200;mxFastOrganicLayout.prototype.temperature=0;mxFastOrganicLayout.prototype.maxIterations=0;mxFastOrganicLayout.prototype.iteration=0;mxFastOrganicLayout.prototype.vertexArray;mxFastOrganicLayout.prototype.dispX;mxFastOrganicLayout.prototype.dispY;mxFastOrganicLayout.prototype.cellLocation;mxFastOrganicLayout.prototype.radius;mxFastOrganicLayout.prototype.radiusSquared;mxFastOrganicLayout.prototype.isMoveable;mxFastOrganicLayout.prototype.neighbours;mxFastOrganicLayout.prototype.indices;mxFastOrganicLayout.prototype.allowedToRun=!0;mxFastOrganicLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||this.graph.getConnections(t).length==0};mxFastOrganicLayout.prototype.execute=function(t){var e=this.graph.getModel();this.vertexArray=[];for(var i=this.graph.getChildVertices(t),n=0;n<i.length;n++)this.isVertexIgnored(i[n])||this.vertexArray.push(i[n]);var r=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,l=this.vertexArray.length;this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant;for(var n=0;n<this.vertexArray.length;n++){var s=this.vertexArray[n];this.cellLocation[n]=[];var a=mxObjectIdentity$1.get(s);this.indices[a]=n;var o=this.getVertexBounds(s),u=o.width,d=o.height,p=o.x,c=o.y;this.cellLocation[n][0]=p+u/2,this.cellLocation[n][1]=c+d/2,this.radius[n]=Math.min(u,d),this.radiusSquared[n]=this.radius[n]*this.radius[n]}e.beginUpdate();try{for(var n=0;n<l;n++){this.dispX[n]=0,this.dispY[n]=0,this.isMoveable[n]=this.isVertexMovable(this.vertexArray[n]);var g=this.graph.getConnections(this.vertexArray[n],t),i=this.graph.getOpposites(g,this.vertexArray[n]);this.neighbours[n]=[];for(var x=0;x<i.length;x++){this.resetEdges&&this.graph.resetEdge(g[x]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(g[x],!1);var a=mxObjectIdentity$1.get(i[x]),C=this.indices[a];C!=null?this.neighbours[n][x]=C:this.neighbours[n][x]=n}}for(this.temperature=this.initialTemp,this.maxIterations==0&&(this.maxIterations=20*Math.sqrt(l)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(var T=null,A=null,n=0;n<this.vertexArray.length;n++){var s=this.vertexArray[n];if(this.isVertexMovable(s)){var o=this.getVertexBounds(s);if(o!=null){this.cellLocation[n][0]-=o.width/2,this.cellLocation[n][1]-=o.height/2;var p=this.graph.snap(Math.round(this.cellLocation[n][0])),c=this.graph.snap(Math.round(this.cellLocation[n][1]));this.setVertexLocation(s,p,c),T==null?T=p:T=Math.min(T,p),A==null?A=c:A=Math.min(A,c)}}}var R=-(T||0)+1,_=-(A||0)+1;r!=null&&(R+=r.x,_+=r.y),this.graph.moveCells(this.vertexArray,R,_)}finally{e.endUpdate()}};mxFastOrganicLayout.prototype.calcPositions=function(){for(var t=0;t<this.vertexArray.length;t++)if(this.isMoveable[t]){var e=Math.sqrt(this.dispX[t]*this.dispX[t]+this.dispY[t]*this.dispY[t]);e<.001&&(e=.001);var i=this.dispX[t]/e*Math.min(e,this.temperature),n=this.dispY[t]/e*Math.min(e,this.temperature);this.dispX[t]=0,this.dispY[t]=0,this.cellLocation[t][0]+=i,this.cellLocation[t][1]+=n}};mxFastOrganicLayout.prototype.calcAttraction=function(){for(var t=0;t<this.vertexArray.length;t++)for(var e=0;e<this.neighbours[t].length;e++){var i=this.neighbours[t][e];if(t!=i&&this.isMoveable[t]&&this.isMoveable[i]){var n=this.cellLocation[t][0]-this.cellLocation[i][0],r=this.cellLocation[t][1]-this.cellLocation[i][1],l=n*n+r*r-this.radiusSquared[t]-this.radiusSquared[i];l<this.minDistanceLimitSquared&&(l=this.minDistanceLimitSquared);var s=Math.sqrt(l),a=l/this.forceConstant,o=n/s*a,u=r/s*a;this.dispX[t]-=o,this.dispY[t]-=u,this.dispX[i]+=o,this.dispY[i]+=u}}};mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var t=this.vertexArray.length,e=0;e<t;e++)for(var i=e;i<t;i++){if(!this.allowedToRun)return;if(i!=e&&this.isMoveable[e]&&this.isMoveable[i]){var n=this.cellLocation[e][0]-this.cellLocation[i][0],r=this.cellLocation[e][1]-this.cellLocation[i][1];n==0&&(n=.01+Math.random()),r==0&&(r=.01+Math.random());var l=Math.sqrt(n*n+r*r),s=l-this.radius[e]-this.radius[i];if(s>this.maxDistanceLimit)continue;s<this.minDistanceLimit&&(s=this.minDistanceLimit);var a=this.forceConstantSquared/s,o=n/l*a,u=r/l*a;this.dispX[e]+=o,this.dispY[e]+=u,this.dispX[i]-=o,this.dispY[i]-=u}}};mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)};function mxParallelEdgeLayout(t){mxGraphLayout.call(this,t)}mxParallelEdgeLayout.prototype=new mxGraphLayout;mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout;mxParallelEdgeLayout.prototype.spacing=20;mxParallelEdgeLayout.prototype.checkOverlap=!1;mxParallelEdgeLayout.prototype.execute=function(t,e){var i=this.findParallels(t,e);this.graph.model.beginUpdate();try{for(var n in i){var r=i[n];r.length>1&&this.layout(r)}}finally{this.graph.model.endUpdate()}};mxParallelEdgeLayout.prototype.findParallels=function(t,e){var i=[],n=mxUtils$1.bind(this,function(a){if(!this.isEdgeIgnored(a)){var o=this.getEdgeId(a);o!=null&&(i[o]==null&&(i[o]=[]),i[o].push(a))}});if(e!=null)for(var r=0;r<e.length;r++)n(e[r]);else for(var l=this.graph.getModel(),s=l.getChildCount(t),r=0;r<s;r++)n(l.getChildAt(t,r));return i};mxParallelEdgeLayout.prototype.getEdgeId=function(t){var e=this.graph.getView(),i=e.getVisibleTerminal(t,!0),n=e.getVisibleTerminal(t,!1),r="";if(i!=null&&n!=null){if(i=mxObjectIdentity$1.get(i),n=mxObjectIdentity$1.get(n),this.checkOverlap){var l=this.graph.view.getState(t);if(l!=null&&l.absolutePoints!=null){for(var s=[],a=0;a<l.absolutePoints.length;a++){var o=l.absolutePoints[a];o!=null&&s.push(o.x,o.y)}r=s.join(",")}}return(i>n?n+"-"+i:i+"-"+n)+r}return null};mxParallelEdgeLayout.prototype.layout=function(t){var e=t[0],i=this.graph.view.getState(e);if(i!=null&&i.absolutePoints!=null){var n=i.absolutePoints[0],r=i.absolutePoints[i.absolutePoints.length-1];if(n!=null&&r!=null){var l=this.graph.getView(),s=this.graph.getModel(),a=s.getGeometry(l.getVisibleTerminal(e,!0)),o=s.getGeometry(l.getVisibleTerminal(e,!1));if(a==o)for(var u=a.x+a.width+this.spacing,d=a.y+a.height/2,p=0;p<t.length;p++)this.route(t[p],u,d),u+=this.spacing;else if(a!=null&&o!=null){var c=this.graph.view.scale,g=this.graph.view.translate;n.x=n.x/c-g.x,n.y=n.y/c-g.y,r.x=r.x/c-g.x,r.y=r.y/c-g.y;var x=r.x-n.x,C=r.y-n.y,T=Math.sqrt(x*x+C*C);if(T>0){var u=n.x+x/2,d=n.y+C/2,A=C*this.spacing/T,R=x*this.spacing/T;u+=A*(t.length-1)/2,d-=R*(t.length-1)/2;for(var p=0;p<t.length;p++)this.route(t[p],u,d),u-=A,d+=R}}}}};mxParallelEdgeLayout.prototype.route=function(t,e,i){this.graph.isCellMovable(t)&&this.setEdgePoints(t,[new mxPoint$1(Math.round(e),Math.round(i))])};function mxPartitionLayout(t,e,i,n){mxGraphLayout.call(this,t),this.horizontal=e??!0,this.spacing=i||0,this.border=n||0}mxPartitionLayout.prototype=new mxGraphLayout;mxPartitionLayout.prototype.constructor=mxPartitionLayout;mxPartitionLayout.prototype.horizontal=null;mxPartitionLayout.prototype.spacing=null;mxPartitionLayout.prototype.border=null;mxPartitionLayout.prototype.resizeVertices=!0;mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal};mxPartitionLayout.prototype.moveCell=function(t,e,i){var n=this.graph.getModel(),r=n.getParent(t);if(t!=null&&r!=null){var l=0,s=0,a=n.getChildCount(r);for(l=0;l<a;l++){var o=n.getChildAt(r,l),u=this.getVertexBounds(o);if(u!=null){var d=u.x+u.width/2;if(s<e&&d>e)break;s=d}}var p=r.getIndex(t);p=Math.max(0,l-(l>p?1:0)),n.add(r,t,p)}};mxPartitionLayout.prototype.execute=function(t){var e=this.isHorizontal(),i=this.graph.getModel(),n=i.getGeometry(t);if(this.graph.container!=null&&(n==null&&i.isLayer(t)||t==this.graph.getView().currentRoot)){var r=this.graph.container.offsetWidth-1,l=this.graph.container.offsetHeight-1;n=new mxRectangle$1(0,0,r,l)}if(n!=null){for(var s=[],a=i.getChildCount(t),o=0;o<a;o++){var u=i.getChildAt(t,o);!this.isVertexIgnored(u)&&this.isVertexMovable(u)&&s.push(u)}var d=s.length;if(d>0){var p=this.border,c=this.border,g=e?n.height:n.width;g-=2*this.border;var x=this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle$1;g-=e?x.height:x.width,p=p+x.width,c=c+x.height;var C=this.border+(d-1)*this.spacing,T=e?(n.width-p-C)/d:(n.height-c-C)/d;if(T>0){i.beginUpdate();try{for(var o=0;o<d;o++){var u=s[o],A=i.getGeometry(u);A!=null&&(A=A.clone(),A.x=p,A.y=c,e?(this.resizeVertices&&(A.width=T,A.height=g),p+=T+this.spacing):(this.resizeVertices&&(A.height=T,A.width=g),c+=T+this.spacing),i.setGeometry(u,A))}}finally{i.endUpdate()}}}}};function mxRadialTreeLayout(t){mxCompactTreeLayout.call(this,t,!1)}mxUtils$1.extend(mxRadialTreeLayout,mxCompactTreeLayout);mxRadialTreeLayout.prototype.angleOffset=.5;mxRadialTreeLayout.prototype.rootx=0;mxRadialTreeLayout.prototype.rooty=0;mxRadialTreeLayout.prototype.levelDistance=120;mxRadialTreeLayout.prototype.nodeDistance=10;mxRadialTreeLayout.prototype.autoRadius=!1;mxRadialTreeLayout.prototype.sortEdges=!1;mxRadialTreeLayout.prototype.rowMinX=[];mxRadialTreeLayout.prototype.rowMaxX=[];mxRadialTreeLayout.prototype.rowMinCenX=[];mxRadialTreeLayout.prototype.rowMaxCenX=[];mxRadialTreeLayout.prototype.rowRadi=[];mxRadialTreeLayout.prototype.row=[];mxRadialTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||this.graph.getConnections(t).length==0};mxRadialTreeLayout.prototype.execute=function(t,e){this.parent=t,this.useBoundingBox=!1,this.edgeRouting=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var i=null,n=this.getVertexBounds(this.root);this.centerX=n.x+n.width/2,this.centerY=n.y+n.height/2;for(var r in this.visited){var l=this.getVertexBounds(this.visited[r]);i=i??l.clone(),i.add(l)}this.calcRowDims([this.node],0);for(var s=0,a=0,o=0;o<this.row.length;o++){var u=(this.centerX-this.rowMinX[o]-this.nodeDistance)/this.rowRadi[o],d=(this.rowMaxX[o]-this.centerX-this.nodeDistance)/this.rowRadi[o];s=Math.max(s,u),a=Math.max(a,d)}for(var o=0;o<this.row.length;o++)for(var p=this.centerX-this.nodeDistance-s*this.rowRadi[o],c=this.centerX+this.nodeDistance+a*this.rowRadi[o],g=c-p,x=0;x<this.row[o].length;x++){var C=this.row[o],T=C[x],l=this.getVertexBounds(T.cell),A=(l.x+l.width/2-p)/g,R=2*Math.PI*A;T.theta=R}for(var o=this.row.length-2;o>=0;o--)for(var C=this.row[o],x=0;x<C.length;x++){for(var T=C[x],_=T.child,N=0,H=0;_!=null;)H+=_.theta,N++,_=_.next;if(N>0){var k=H/N;if(k>T.theta&&x<C.length-1){var K=C[x+1].theta;T.theta=Math.min(k,K-Math.PI/10)}else if(k<T.theta&&x>0){var Q=C[x-1].theta;T.theta=Math.max(k,Q+Math.PI/10)}}}for(var o=0;o<this.row.length;o++)for(var x=0;x<this.row[o].length;x++){var C=this.row[o],T=C[x],l=this.getVertexBounds(T.cell);this.setVertexLocation(T.cell,this.centerX-l.width/2+this.rowRadi[o]*Math.cos(T.theta),this.centerY-l.height/2+this.rowRadi[o]*Math.sin(T.theta))}};mxRadialTreeLayout.prototype.calcRowDims=function(t,e){if(!(t==null||t.length==0)){this.rowMinX[e]=this.centerX,this.rowMaxX[e]=this.centerX,this.rowMinCenX[e]=this.centerX,this.rowMaxCenX[e]=this.centerX,this.row[e]=[];for(var i=!1,n=0;n<t.length;n++)for(var r=t[n]!=null?t[n].child:null;r!=null;){var l=r.cell,s=this.getVertexBounds(l);this.rowMinX[e]=Math.min(s.x,this.rowMinX[e]),this.rowMaxX[e]=Math.max(s.x+s.width,this.rowMaxX[e]),this.rowMinCenX[e]=Math.min(s.x+s.width/2,this.rowMinCenX[e]),this.rowMaxCenX[e]=Math.max(s.x+s.width/2,this.rowMaxCenX[e]),this.rowRadi[e]=s.y-this.getVertexBounds(this.root).y,r.child!=null&&(i=!0),this.row[e].push(r),r=r.next}i&&this.calcRowDims(this.row[e],e+1)}};function mxStackLayout(t,e,i,n,r,l){mxGraphLayout.call(this,t),this.horizontal=e??!0,this.spacing=i??0,this.x0=n??0,this.y0=r??0,this.border=l??0}mxStackLayout.prototype=new mxGraphLayout;mxStackLayout.prototype.constructor=mxStackLayout;mxStackLayout.prototype.horizontal=null;mxStackLayout.prototype.spacing=null;mxStackLayout.prototype.x0=null;mxStackLayout.prototype.y0=null;mxStackLayout.prototype.border=0;mxStackLayout.prototype.marginTop=0;mxStackLayout.prototype.marginLeft=0;mxStackLayout.prototype.marginRight=0;mxStackLayout.prototype.marginBottom=0;mxStackLayout.prototype.keepFirstLocation=!1;mxStackLayout.prototype.fill=!1;mxStackLayout.prototype.resizeParent=!1;mxStackLayout.prototype.resizeParentMax=!1;mxStackLayout.prototype.resizeLast=!1;mxStackLayout.prototype.wrap=null;mxStackLayout.prototype.borderCollapse=!0;mxStackLayout.prototype.allowGaps=!1;mxStackLayout.prototype.gridSize=0;mxStackLayout.prototype.isHorizontal=function(){return this.horizontal};mxStackLayout.prototype.moveCell=function(t,e,i){var n=this.graph.getModel(),r=n.getParent(t),l=this.isHorizontal();if(t!=null&&r!=null){var s=0,a=0,o=n.getChildCount(r),u=l?e:i,d=this.graph.getView().getState(r);for(d!=null&&(u-=l?d.x:d.y),u/=this.graph.view.scale,s=0;s<o;s++){var p=n.getChildAt(r,s);if(p!=t){var c=n.getGeometry(p);if(c!=null){var g=l?c.x+c.width/2:c.y+c.height/2;if(a<=u&&g>u)break;a=g}}}var x=r.getIndex(t);x=Math.max(0,s-(s>x?1:0)),n.add(r,t,x)}};mxStackLayout.prototype.getParentSize=function(t){var e=this.graph.getModel(),i=e.getGeometry(t);if(this.graph.container!=null&&(i==null&&e.isLayer(t)||t==this.graph.getView().currentRoot)){var n=this.graph.container.offsetWidth-1,r=this.graph.container.offsetHeight-1;i=new mxRectangle$1(0,0,n,r)}return i};mxStackLayout.prototype.getLayoutCells=function(t){for(var e=this.graph.getModel(),i=e.getChildCount(t),n=[],r=0;r<i;r++){var l=e.getChildAt(t,r);!this.isVertexIgnored(l)&&this.isVertexMovable(l)&&n.push(l)}return this.allowGaps&&n.sort(mxUtils$1.bind(this,function(s,a){var o=this.graph.getCellGeometry(s),u=this.graph.getCellGeometry(a);return this.horizontal?o.x==u.x?0:o.x>u.x>0?1:-1:o.y==u.y?0:o.y>u.y>0?1:-1})),n};mxStackLayout.prototype.snap=function(t){if(this.gridSize!=null&&this.gridSize>0&&(t=Math.max(t,this.gridSize),t/this.gridSize>1)){var e=t%this.gridSize;t+=e>this.gridSize/2?this.gridSize-e:-e}return t};mxStackLayout.prototype.execute=function(t){if(t!=null){var e=this.getParentSize(t),i=this.isHorizontal(),n=this.graph.getModel(),r=null;e!=null&&(r=i?e.height-this.marginTop-this.marginBottom:e.width-this.marginLeft-this.marginRight),r-=2*this.border;var l=this.x0+this.border+this.marginLeft,s=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(t)){var a=this.graph.getCellStyle(t),o=mxUtils$1.getNumber(a,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE),u=mxUtils$1.getValue(a,mxConstants$1.STYLE_HORIZONTAL,!0)==1;e!=null&&(u?o=Math.min(o,e.height):o=Math.min(o,e.width)),i==u&&(r-=o),u?s+=o:l+=o}n.beginUpdate();try{for(var d=0,p=null,c=0,g=null,x=this.getLayoutCells(t),C=0;C<x.length;C++){var T=x[C],A=n.getGeometry(T);if(A!=null){A=A.clone(),this.wrap!=null&&p!=null&&(i&&p.x+p.width+A.width+2*this.spacing>this.wrap||!i&&p.y+p.height+A.height+2*this.spacing>this.wrap)&&(p=null,i?s+=d+this.spacing:l+=d+this.spacing,d=0),d=Math.max(d,i?A.height:A.width);var R=0;if(!this.borderCollapse){var _=this.graph.getCellStyle(T);R=mxUtils$1.getNumber(_,mxConstants$1.STYLE_STROKEWIDTH,1)}if(p!=null){var N=c+this.spacing+Math.floor(R/2);i?A.x=this.snap((this.allowGaps?Math.max(N,A.x):N)-this.marginLeft)+this.marginLeft:A.y=this.snap((this.allowGaps?Math.max(N,A.y):N)-this.marginTop)+this.marginTop}else this.keepFirstLocation||(i?A.x=this.allowGaps&&A.x>l?Math.max(this.snap(A.x-this.marginLeft)+this.marginLeft,l):l:A.y=this.allowGaps&&A.y>s?Math.max(this.snap(A.y-this.marginTop)+this.marginTop,s):s);i?A.y=s:A.x=l,this.fill&&r!=null&&(i?A.height=r:A.width=r),i?A.width=this.snap(A.width):A.height=this.snap(A.height),this.setChildGeometry(T,A),g=T,p=A,i?c=p.x+p.width+Math.floor(R/2):c=p.y+p.height+Math.floor(R/2)}}this.resizeParent&&e!=null&&p!=null&&!this.graph.isCellCollapsed(t)?this.updateParentGeometry(t,e,p):this.resizeLast&&e!=null&&p!=null&&g!=null&&(i?p.width=e.width-p.x-this.spacing-this.marginRight-this.marginLeft:p.height=e.height-p.y-this.spacing-this.marginBottom,this.setChildGeometry(g,p))}finally{n.endUpdate()}}};mxStackLayout.prototype.setChildGeometry=function(t,e){var i=this.graph.getCellGeometry(t);(i==null||e.x!=i.x||e.y!=i.y||e.width!=i.width||e.height!=i.height)&&this.graph.getModel().setGeometry(t,e)};mxStackLayout.prototype.updateParentGeometry=function(t,e,i){var n=this.isHorizontal(),r=this.graph.getModel(),l=e.clone();if(n){var s=i.x+i.width+this.marginRight+this.border;this.resizeParentMax?l.width=Math.max(l.width,s):l.width=s}else{var s=i.y+i.height+this.marginBottom+this.border;this.resizeParentMax?l.height=Math.max(l.height,s):l.height=s}(e.x!=l.x||e.y!=l.y||e.width!=l.width||e.height!=l.height)&&r.setGeometry(t,l)};function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}mxGraphAbstractHierarchyCell.prototype.maxRank=-1;mxGraphAbstractHierarchyCell.prototype.minRank=-1;mxGraphAbstractHierarchyCell.prototype.x=null;mxGraphAbstractHierarchyCell.prototype.y=null;mxGraphAbstractHierarchyCell.prototype.width=0;mxGraphAbstractHierarchyCell.prototype.height=0;mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null;mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null;mxGraphAbstractHierarchyCell.prototype.temp=null;mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(t){return null};mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(t){return null};mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1};mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1};mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(t){return null};mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(t,e){return null};mxGraphAbstractHierarchyCell.prototype.setX=function(t,e){this.isVertex()?this.x[0]=e:this.isEdge()&&(this.x[t-this.minRank-1]=e)};mxGraphAbstractHierarchyCell.prototype.getX=function(t){return this.isVertex()?this.x[0]:this.isEdge()?this.x[t-this.minRank-1]:0};mxGraphAbstractHierarchyCell.prototype.setY=function(t,e){this.isVertex()?this.y[0]=e:this.isEdge()&&(this.y[t-this.minRank-1]=e)};function mxGraphHierarchyNode(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=t,this.id=mxObjectIdentity$1.get(t),this.connectsAsTarget=[],this.connectsAsSource=[]}mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell;mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode;mxGraphHierarchyNode.prototype.cell=null;mxGraphHierarchyNode.prototype.id=null;mxGraphHierarchyNode.prototype.connectsAsTarget=null;mxGraphHierarchyNode.prototype.connectsAsSource=null;mxGraphHierarchyNode.prototype.hashCode=!1;mxGraphHierarchyNode.prototype.getRankValue=function(t){return this.maxRank};mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(t){if(this.nextLayerConnectedCells==null){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsTarget.length;e++){var i=this.connectsAsTarget[e];i.maxRank==-1||i.maxRank==t+1?this.nextLayerConnectedCells[0].push(i.source):this.nextLayerConnectedCells[0].push(i)}}return this.nextLayerConnectedCells[0]};mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(t){if(this.previousLayerConnectedCells==null){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsSource.length;e++){var i=this.connectsAsSource[e];i.minRank==-1||i.minRank==t-1?this.previousLayerConnectedCells[0].push(i.target):this.previousLayerConnectedCells[0].push(i)}}return this.previousLayerConnectedCells[0]};mxGraphHierarchyNode.prototype.isVertex=function(){return!0};mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(t){return this.temp[0]};mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(t,e){this.temp[0]=e};mxGraphHierarchyNode.prototype.isAncestor=function(t){if(t!=null&&this.hashCode!=null&&t.hashCode!=null&&this.hashCode.length<t.hashCode.length){if(this.hashCode==t.hashCode)return!0;if(this.hashCode==null||this.hashCode==null)return!1;for(var e=0;e<this.hashCode.length;e++)if(this.hashCode[e]!=t.hashCode[e])return!1;return!0}return!1};mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell};function mxGraphHierarchyEdge(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=t,this.ids=[];for(var e=0;e<t.length;e++)this.ids.push(mxObjectIdentity$1.get(t[e]))}mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell;mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge;mxGraphHierarchyEdge.prototype.edges=null;mxGraphHierarchyEdge.prototype.ids=null;mxGraphHierarchyEdge.prototype.source=null;mxGraphHierarchyEdge.prototype.target=null;mxGraphHierarchyEdge.prototype.isReversed=!1;mxGraphHierarchyEdge.prototype.invert=function(t){var e=this.source;this.source=this.target,this.target=e,this.isReversed=!this.isReversed};mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(t){if(this.nextLayerConnectedCells==null){this.nextLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.nextLayerConnectedCells[e]=[],e==this.temp.length-1?this.nextLayerConnectedCells[e].push(this.source):this.nextLayerConnectedCells[e].push(this)}return this.nextLayerConnectedCells[t-this.minRank-1]};mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(t){if(this.previousLayerConnectedCells==null){this.previousLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.previousLayerConnectedCells[e]=[],e==0?this.previousLayerConnectedCells[e].push(this.target):this.previousLayerConnectedCells[e].push(this)}return this.previousLayerConnectedCells[t-this.minRank-1]};mxGraphHierarchyEdge.prototype.isEdge=function(){return!0};mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(t){return this.temp[t-this.minRank-1]};mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(t,e){this.temp[t-this.minRank-1]=e};mxGraphHierarchyEdge.prototype.getCoreCell=function(){return this.edges!=null&&this.edges.length>0?this.edges[0]:null};function mxGraphHierarchyModel(t,e,i,n,r){t.getGraph(),this.tightenToSource=r,this.roots=i,this.parent=n,this.vertexMapper=new mxDictionary$1,this.edgeMapper=new mxDictionary$1,this.maxRank=0;var l=[];e==null&&(e=this.graph.getChildVertices(n)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,l);for(var s=0;s<e.length;s++){for(var a=l[s].connectsAsSource,o=0;o<a.length;o++){var u=a[o],d=u.edges;if(d!=null&&d.length>0){var p=d[0],c=t.getVisibleTerminal(p,!1),g=this.vertexMapper.get(c);l[s]==g&&(c=t.getVisibleTerminal(p,!0),g=this.vertexMapper.get(c)),g!=null&&l[s]!=g&&(u.target=g,g.connectsAsTarget.length==0&&(g.connectsAsTarget=[]),mxUtils$1.indexOf(g.connectsAsTarget,u)<0&&g.connectsAsTarget.push(u))}}l[s].temp[0]=1}}mxGraphHierarchyModel.prototype.maxRank=null;mxGraphHierarchyModel.prototype.vertexMapper=null;mxGraphHierarchyModel.prototype.edgeMapper=null;mxGraphHierarchyModel.prototype.ranks=null;mxGraphHierarchyModel.prototype.roots=null;mxGraphHierarchyModel.prototype.parent=null;mxGraphHierarchyModel.prototype.dfsCount=0;mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8;mxGraphHierarchyModel.prototype.tightenToSource=!1;mxGraphHierarchyModel.prototype.createInternalCells=function(t,e,i){for(var n=t.getGraph(),r=0;r<e.length;r++){i[r]=new mxGraphHierarchyNode(e[r]),this.vertexMapper.put(e[r],i[r]);var l=t.getEdges(e[r]);i[r].connectsAsSource=[];for(var s=0;s<l.length;s++){var a=t.getVisibleTerminal(l[s],!1);if(a!=e[r]&&t.graph.model.isVertex(a)&&!t.isVertexIgnored(a)){var o=t.getEdgesBetween(e[r],a,!1),u=t.getEdgesBetween(e[r],a,!0);if(o!=null&&o.length>0&&this.edgeMapper.get(o[0])==null&&u.length*2>=o.length){for(var d=new mxGraphHierarchyEdge(o),p=0;p<o.length;p++){var c=o[p];this.edgeMapper.put(c,d),n.resetEdge(c),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(c,!1),t.setOrthogonalEdge(c,!0))}d.source=i[r],mxUtils$1.indexOf(i[r].connectsAsSource,d)<0&&i[r].connectsAsSource.push(d)}}}i[r].temp[0]=0}};mxGraphHierarchyModel.prototype.initialRank=function(){var t=[];if(this.roots!=null)for(var e=0;e<this.roots.length;e++){var i=this.vertexMapper.get(this.roots[e]);i!=null&&t.push(i)}for(var n=this.vertexMapper.getValues(),e=0;e<n.length;e++)n[e].temp[0]=-1;for(var r=t.slice();t.length>0;){var i=t[0],l,s;l=i.connectsAsTarget,s=i.connectsAsSource;for(var a=!0,o=this.SOURCESCANSTARTRANK,e=0;e<l.length;e++){var u=l[e];if(u.temp[0]==5270620){var d=u.source;o=Math.min(o,d.temp[0]-1)}else{a=!1;break}}if(a){if(i.temp[0]=o,this.maxRank=Math.min(this.maxRank,o),s!=null)for(var e=0;e<s.length;e++){var u=s[e];u.temp[0]=5270620;var d=u.target;d.temp[0]==-1&&(t.push(d),d.temp[0]=-2)}t.shift()}else{var p=t.shift();if(t.push(i),p==i&&t.length==1)break}}for(var e=0;e<n.length;e++)n[e].temp[0]-=this.maxRank;for(var e=0;e<r.length;e++)for(var i=r[e],c=0,l=i.connectsAsSource,g=0;g<l.length;g++){var u=l[g],d=u.target;i.temp[0]=Math.max(c,d.temp[0]+1),c=i.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank};mxGraphHierarchyModel.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[e]=[],this.ranks[e]=t[e];var i=null;if(this.roots!=null){var n=this.roots;i=[];for(var e=0;e<n.length;e++){var r=n[e],l=this.vertexMapper.get(r);i[e]=l}}this.visit(function(s,a,o,u,d){if(d==0&&a.maxRank<0&&a.minRank<0&&(t[a.temp[0]].push(a),a.maxRank=a.temp[0],a.minRank=a.temp[0],a.temp[0]=t[a.maxRank].length-1),s!=null&&o!=null){var p=s.maxRank-a.maxRank;if(p>1){o.maxRank=s.maxRank,o.minRank=a.maxRank,o.temp=[],o.x=[],o.y=[];for(var c=o.minRank+1;c<o.maxRank;c++)t[c].push(o),o.setGeneralPurposeVariable(c,t[c].length-1)}}},i,!1,null)};mxGraphHierarchyModel.prototype.visit=function(t,e,i,n){if(e!=null){for(var r=0;r<e.length;r++){var l=e[r];l!=null&&(n==null&&(n=new Object),i?(l.hashCode=[],l.hashCode[0]=this.dfsCount,l.hashCode[1]=r,this.extendedDfs(null,l,null,t,n,l.hashCode,r,0)):this.dfs(null,l,null,t,n,0))}this.dfsCount++}};mxGraphHierarchyModel.prototype.dfs=function(t,e,i,n,r,l){if(e!=null){var s=e.id;if(r[s]==null){r[s]=e,n(t,e,i,l,0);for(var a=e.connectsAsSource.slice(),o=0;o<a.length;o++){var u=a[o],d=u.target;this.dfs(e,d,u,n,r,l+1)}}else n(t,e,i,l,1)}};mxGraphHierarchyModel.prototype.extendedDfs=function(t,e,i,n,r,l,s,a){if(e!=null){if(t!=null&&(e.hashCode==null||e.hashCode[0]!=t.hashCode[0])){var o=t.hashCode.length+1;e.hashCode=t.hashCode.slice(),e.hashCode[o-1]=s}var u=e.id;if(r[u]==null){r[u]=e,n(t,e,i,a,0);for(var d=e.connectsAsSource.slice(),p=0;p<d.length;p++){var c=d[p],g=c.target;this.extendedDfs(e,g,c,n,r,e.hashCode,p,a+1)}}else n(t,e,i,a,1)}};function mxHierarchicalLayoutStage(){}mxHierarchicalLayoutStage.prototype.execute=function(t){};function mxMinimumCycleRemover(t){this.layout=t}mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage;mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover;mxMinimumCycleRemover.prototype.layout=null;mxMinimumCycleRemover.prototype.execute=function(t){for(var e=this.layout.getModel(),i=new Object,n=e.vertexMapper.getValues(),r=new Object,l=0;l<n.length;l++)r[n[l].id]=n[l];var s=null;if(e.roots!=null){var a=e.roots;s=[];for(var l=0;l<a.length;l++)s[l]=e.vertexMapper.get(a[l])}e.visit(function(u,d,p,c,g){d.isAncestor(u)&&(p.invert(),mxUtils$1.remove(p,u.connectsAsSource),u.connectsAsTarget.push(p),mxUtils$1.remove(p,d.connectsAsTarget),d.connectsAsSource.push(p)),i[d.id]=d,delete r[d.id]},s,!0,null);var o=mxUtils$1.clone(i,null,!0);e.visit(function(u,d,p,c,g){d.isAncestor(u)&&(p.invert(),mxUtils$1.remove(p,u.connectsAsSource),d.connectsAsSource.push(p),u.connectsAsTarget.push(p),mxUtils$1.remove(p,d.connectsAsTarget)),i[d.id]=d,delete r[d.id]},r,!0,o)};function mxMedianHybridCrossingReduction$1(t){this.layout=t}mxMedianHybridCrossingReduction$1.prototype=new mxHierarchicalLayoutStage;mxMedianHybridCrossingReduction$1.prototype.constructor=mxMedianHybridCrossingReduction$1;mxMedianHybridCrossingReduction$1.prototype.layout=null;mxMedianHybridCrossingReduction$1.prototype.maxIterations=24;mxMedianHybridCrossingReduction$1.prototype.nestedBestRanks=null;mxMedianHybridCrossingReduction$1.prototype.currentBestCrossings=0;mxMedianHybridCrossingReduction$1.prototype.iterationsWithoutImprovement=0;mxMedianHybridCrossingReduction$1.prototype.maxNoImprovementIterations=2;mxMedianHybridCrossingReduction$1.prototype.execute=function(t){var e=this.layout.getModel();this.nestedBestRanks=[];for(var i=0;i<e.ranks.length;i++)this.nestedBestRanks[i]=e.ranks[i].slice();for(var n=0,r=this.calculateCrossings(e),i=0;i<this.maxIterations&&n<this.maxNoImprovementIterations;i++){this.weightedMedian(i,e),this.transpose(i,e);var l=this.calculateCrossings(e);if(l<r){r=l,n=0;for(var s=0;s<this.nestedBestRanks.length;s++)for(var a=e.ranks[s],o=0;o<a.length;o++){var u=a[o];this.nestedBestRanks[s][u.getGeneralPurposeVariable(s)]=u}}else{n++;for(var s=0;s<this.nestedBestRanks.length;s++)for(var a=e.ranks[s],o=0;o<a.length;o++){var u=a[o];u.setGeneralPurposeVariable(s,o)}}if(r==0)break}for(var d=[],p=[],i=0;i<e.maxRank+1;i++)p[i]=[],d[i]=p[i];for(var i=0;i<this.nestedBestRanks.length;i++)for(var s=0;s<this.nestedBestRanks[i].length;s++)p[i].push(this.nestedBestRanks[i][s]);e.ranks=d};mxMedianHybridCrossingReduction$1.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,i=0,n=1;n<e;n++)i+=this.calculateRankCrossing(n,t);return i};mxMedianHybridCrossingReduction$1.prototype.calculateRankCrossing=function(t,e){for(var i=0,n=e.ranks[t],r=e.ranks[t-1],l=[],s=0;s<n.length;s++){for(var a=n[s],o=a.getGeneralPurposeVariable(t),u=a.getPreviousLayerConnectedCells(t),d=[],p=0;p<u.length;p++){var c=u[p],g=c.getGeneralPurposeVariable(t-1);d.push(g)}d.sort(function(N,H){return N-H}),l[o]=d}for(var x=[],s=0;s<l.length;s++)x=x.concat(l[s]);for(var C=1;C<r.length;)C<<=1;var T=2*C-1;C-=1;for(var A=[],s=0;s<T;++s)A[s]=0;for(var s=0;s<x.length;s++){var R=x[s],_=R+C;for(++A[_];_>0;)_%2&&(i+=A[_+1]),_=_-1>>1,++A[_]}return i};mxMedianHybridCrossingReduction$1.prototype.transpose=function(t,e){for(var i=!0,n=0,r=10;i&&n++<r;){var l=t%2==1&&n%2==1;i=!1;for(var s=0;s<e.ranks.length;s++){for(var a=e.ranks[s],o=[],u=0;u<a.length;u++){var d=a[u],p=d.getGeneralPurposeVariable(s);p<0&&(p=u),o[p]=d}for(var c=null,g=null,x=null,C=null,T=null,A=null,R=null,_=null,N=null,H=null,u=0;u<a.length-1;u++){if(u==0){N=o[u],c=N.getNextLayerConnectedCells(s),g=N.getPreviousLayerConnectedCells(s),T=[],A=[];for(var k=0;k<c.length;k++)T[k]=c[k].getGeneralPurposeVariable(s+1);for(var k=0;k<g.length;k++)A[k]=g[k].getGeneralPurposeVariable(s-1)}else c=x,g=C,T=R,A=_,N=H;H=o[u+1],x=H.getNextLayerConnectedCells(s),C=H.getPreviousLayerConnectedCells(s),R=[],_=[];for(var k=0;k<x.length;k++)R[k]=x[k].getGeneralPurposeVariable(s+1);for(var k=0;k<C.length;k++)_[k]=C[k].getGeneralPurposeVariable(s-1);for(var K=0,Q=0,k=0;k<T.length;k++)for(var nt=0;nt<R.length;nt++)T[k]>R[nt]&&K++,T[k]<R[nt]&&Q++;for(var k=0;k<A.length;k++)for(var nt=0;nt<_.length;nt++)A[k]>_[nt]&&K++,A[k]<_[nt]&&Q++;if(Q<K||Q==K&&l){var dt=N.getGeneralPurposeVariable(s);N.setGeneralPurposeVariable(s,H.getGeneralPurposeVariable(s)),H.setGeneralPurposeVariable(s,dt),x=c,C=g,R=T,_=A,H=N,l||(i=!0)}}}}};mxMedianHybridCrossingReduction$1.prototype.weightedMedian=function(t,e){var i=t%2==0;if(i)for(var n=e.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(var n=1;n<e.maxRank;n++)this.medianRank(n,i)};mxMedianHybridCrossingReduction$1.prototype.medianRank=function(t,e){for(var i=this.nestedBestRanks[t].length,n=[],r=[],l=0;l<i;l++){var s=this.nestedBestRanks[t][l],a=new MedianCellSorter;a.cell=s;var o;e?o=s.getNextLayerConnectedCells(t):o=s.getPreviousLayerConnectedCells(t);var u;e?u=t+1:u=t-1,o!=null&&o.length!=0?(a.medianValue=this.medianValue(o,u),n.push(a)):r[s.getGeneralPurposeVariable(t)]=!0}n.sort(MedianCellSorter.prototype.compare);for(var l=0;l<i;l++)if(r[l]==null){var s=n.shift().cell;s.setGeneralPurposeVariable(t,l)}};mxMedianHybridCrossingReduction$1.prototype.medianValue=function(t,e){for(var i=[],n=0,r=0;r<t.length;r++){var l=t[r];i[n++]=l.getGeneralPurposeVariable(e)}if(i.sort(function(u,d){return u-d}),n%2==1)return i[Math.floor(n/2)];if(n==2)return(i[0]+i[1])/2;var s=n/2,a=i[s-1]-i[0],o=i[n-1]-i[s];return(i[s-1]*o+i[s]*a)/(a+o)};function MedianCellSorter(){}MedianCellSorter.prototype.medianValue=0;MedianCellSorter.prototype.cell=!1;MedianCellSorter.prototype.compare=function(t,e){return t!=null&&e!=null?e.medianValue>t.medianValue?-1:e.medianValue<t.medianValue?1:0:0};function mxCoordinateAssignment$1(t,e,i,n,r,l){this.layout=t,this.intraCellSpacing=e,this.interRankCellSpacing=i,this.orientation=n,this.initialX=r,this.parallelEdgeSpacing=l}mxCoordinateAssignment$1.prototype=new mxHierarchicalLayoutStage;mxCoordinateAssignment$1.prototype.constructor=mxCoordinateAssignment$1;mxCoordinateAssignment$1.prototype.layout=null;mxCoordinateAssignment$1.prototype.intraCellSpacing=30;mxCoordinateAssignment$1.prototype.interRankCellSpacing=100;mxCoordinateAssignment$1.prototype.parallelEdgeSpacing=10;mxCoordinateAssignment$1.prototype.maxIterations=8;mxCoordinateAssignment$1.prototype.prefHozEdgeSep=5;mxCoordinateAssignment$1.prototype.prefVertEdgeOff=2;mxCoordinateAssignment$1.prototype.minEdgeJetty=12;mxCoordinateAssignment$1.prototype.channelBuffer=4;mxCoordinateAssignment$1.prototype.jettyPositions=null;mxCoordinateAssignment$1.prototype.orientation=mxConstants$1.DIRECTION_NORTH;mxCoordinateAssignment$1.prototype.initialX=null;mxCoordinateAssignment$1.prototype.limitX=null;mxCoordinateAssignment$1.prototype.currentXDelta=null;mxCoordinateAssignment$1.prototype.widestRank=null;mxCoordinateAssignment$1.prototype.rankTopY=null;mxCoordinateAssignment$1.prototype.rankBottomY=null;mxCoordinateAssignment$1.prototype.widestRankValue=null;mxCoordinateAssignment$1.prototype.rankWidths=null;mxCoordinateAssignment$1.prototype.rankY=null;mxCoordinateAssignment$1.prototype.fineTuning=!0;mxCoordinateAssignment$1.prototype.nextLayerConnectedCache=null;mxCoordinateAssignment$1.prototype.previousLayerConnectedCache=null;mxCoordinateAssignment$1.prototype.groupPadding=10;mxCoordinateAssignment$1.prototype.printStatus=function(){var t=this.layout.getModel();mxLog$1.show(),mxLog$1.writeln("======Coord assignment debug=======");for(var e=0;e<t.ranks.length;e++){mxLog$1.write("Rank ",e," : ");for(var i=t.ranks[e],n=0;n<i.length;n++){var r=i[n];mxLog$1.write(r.getGeneralPurposeVariable(e),"  ")}mxLog$1.writeln()}mxLog$1.writeln("====================================")};mxCoordinateAssignment$1.prototype.execute=function(t){this.jettyPositions=Object();var e=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),e),this.fineTuning&&this.minNode(e);var i=1e8;if(this.fineTuning)for(var n=0;n<this.maxIterations;n++){if(n!=0&&(this.medianPos(n,e),this.minNode(e)),this.currentXDelta<i){for(var r=0;r<e.ranks.length;r++)for(var l=e.ranks[r],s=0;s<l.length;s++){var a=l[s];a.setX(r,a.getGeneralPurposeVariable(r))}i=this.currentXDelta}else for(var r=0;r<e.ranks.length;r++)for(var l=e.ranks[r],s=0;s<l.length;s++){var a=l[s];a.setGeneralPurposeVariable(r,a.getX(r))}this.minPath(this.layout.getGraph(),e),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),e)};mxCoordinateAssignment$1.prototype.minNode=function(t){for(var e=[],i=new mxDictionary$1,n=[],r=0;r<=t.maxRank;r++){n[r]=t.ranks[r];for(var l=0;l<n[r].length;l++){var s=n[r][l],a=new WeightedCellSorter$1(s,r);a.rankIndex=l,a.visited=!0,e.push(a),i.put(s,a)}}for(var o=e.length*10,u=0,d=1;e.length>0&&u<=o;){var p=e.shift(),c=p.cell,g=p.weightedValue,x=parseInt(p.rankIndex),C=c.getNextLayerConnectedCells(g),T=c.getPreviousLayerConnectedCells(g),A=C.length,R=T.length,_=this.medianXValue(C,g+1),N=this.medianXValue(T,g-1),H=A+R,k=c.getGeneralPurposeVariable(g),K=k;H>0&&(K=(_*A+N*R)/H);var Q=!1;if(K<k-d)if(x==0)c.setGeneralPurposeVariable(g,K),Q=!0;else{var nt=n[g][x-1],dt=nt.getGeneralPurposeVariable(g);dt=dt+nt.width/2+this.intraCellSpacing+c.width/2,dt<K?(c.setGeneralPurposeVariable(g,K),Q=!0):dt<c.getGeneralPurposeVariable(g)-d&&(c.setGeneralPurposeVariable(g,dt),Q=!0)}else if(K>k+d){var mt=n[g].length;if(x==mt-1)c.setGeneralPurposeVariable(g,K),Q=!0;else{var xt=n[g][x+1],Y=xt.getGeneralPurposeVariable(g);Y=Y-xt.width/2-this.intraCellSpacing-c.width/2,Y>K?(c.setGeneralPurposeVariable(g,K),Q=!0):Y>c.getGeneralPurposeVariable(g)+d&&(c.setGeneralPurposeVariable(g,Y),Q=!0)}}if(Q){for(var r=0;r<C.length;r++){var B=C[r],U=i.get(B);U!=null&&U.visited==!1&&(U.visited=!0,e.push(U))}for(var r=0;r<T.length;r++){var B=T[r],U=i.get(B);U!=null&&U.visited==!1&&(U.visited=!0,e.push(U))}}p.visited=!1,u++}};mxCoordinateAssignment$1.prototype.medianPos=function(t,e){var i=t%2==0;if(i)for(var n=e.maxRank;n>0;n--)this.rankMedianPosition(n-1,e,n);else for(var n=0;n<e.maxRank-1;n++)this.rankMedianPosition(n+1,e,n)};mxCoordinateAssignment$1.prototype.rankMedianPosition=function(t,e,i){for(var n=e.ranks[t],r=[],l=new Object,s=0;s<n.length;s++){var a=n[s];r[s]=new WeightedCellSorter$1,r[s].cell=a,r[s].rankIndex=s,l[a.id]=r[s];var o=null;i<t?o=a.getPreviousLayerConnectedCells(t):o=a.getNextLayerConnectedCells(t),r[s].weightedValue=this.calculatedWeightedValue(a,o)}r.sort(WeightedCellSorter$1.prototype.compare);for(var s=0;s<r.length;s++){var u=0,d=r[s].cell,o=null,p=0;i<t?o=d.getPreviousLayerConnectedCells(t).slice():o=d.getNextLayerConnectedCells(t).slice(),o!=null&&(u=o.length,u>0?p=this.medianXValue(o,i):p=d.getGeneralPurposeVariable(t));for(var c=0,g=-1e8,x=r[s].rankIndex-1;x>=0;){var C=l[n[x].id];if(C!=null){var T=C.cell;C.visited?(g=T.getGeneralPurposeVariable(t)+T.width/2+this.intraCellSpacing+c+d.width/2,x=-1):(c+=T.width+this.intraCellSpacing,x--)}}for(var A=0,R=1e8,x=r[s].rankIndex+1;x<r.length;){var C=l[n[x].id];if(C!=null){var _=C.cell;C.visited?(R=_.getGeneralPurposeVariable(t)-_.width/2-this.intraCellSpacing-A-d.width/2,x=r.length):(A+=_.width+this.intraCellSpacing,x++)}}p>=g&&p<=R?d.setGeneralPurposeVariable(t,p):p<g?(d.setGeneralPurposeVariable(t,g),this.currentXDelta+=g-p):p>R&&(d.setGeneralPurposeVariable(t,R),this.currentXDelta+=p-R),r[s].visited=!0}};mxCoordinateAssignment$1.prototype.calculatedWeightedValue=function(t,e){for(var i=0,n=0;n<e.length;n++){var r=e[n];t.isVertex()&&r.isVertex()?i++:t.isEdge()&&r.isEdge()?i+=8:i+=2}return i};mxCoordinateAssignment$1.prototype.medianXValue=function(t,e){if(t.length==0)return 0;for(var i=[],n=0;n<t.length;n++)i[n]=t[n].getGeneralPurposeVariable(e);if(i.sort(function(a,o){return a-o}),t.length%2==1)return i[Math.floor(t.length/2)];var r=t.length/2,l=i[r-1],s=i[r];return(l+s)/2};mxCoordinateAssignment$1.prototype.initialCoords=function(t,e){this.calculateWidestRank(t,e);for(var i=this.widestRank;i>=0;i--)i<e.maxRank&&this.rankCoordinates(i,t,e);for(var i=this.widestRank+1;i<=e.maxRank;i++)i>0&&this.rankCoordinates(i,t,e)};mxCoordinateAssignment$1.prototype.rankCoordinates=function(t,e,i){for(var n=i.ranks[t],r=0,l=this.initialX+(this.widestRankValue-this.rankWidths[t])/2,s=!1,a=0;a<n.length;a++){var o=n[a];if(o.isVertex()){var u=this.layout.getVertexBounds(o.cell);u!=null?this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(o.width=u.width,o.height=u.height):(o.width=u.height,o.height=u.width):s=!0,r=Math.max(r,o.height)}else if(o.isEdge()){var d=1;o.edges!=null?d=o.edges.length:mxLog$1.warn("edge.edges is null"),o.width=(d-1)*this.parallelEdgeSpacing}l+=o.width/2,o.setX(t,l),o.setGeneralPurposeVariable(t,l),l+=o.width/2,l+=this.intraCellSpacing}s==!0&&mxLog$1.warn("At least one cell has no bounds")};mxCoordinateAssignment$1.prototype.calculateWidestRank=function(t,e){var i=-this.interRankCellSpacing,n=0;this.rankWidths=[],this.rankY=[];for(var r=e.maxRank;r>=0;r--){for(var l=0,s=e.ranks[r],a=this.initialX,o=!1,u=0;u<s.length;u++){var d=s[u];if(d.isVertex()){var p=this.layout.getVertexBounds(d.cell);p!=null?this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(d.width=p.width,d.height=p.height):(d.width=p.height,d.height=p.width):o=!0,l=Math.max(l,d.height)}else if(d.isEdge()){var c=1;d.edges!=null?c=d.edges.length:mxLog$1.warn("edge.edges is null"),d.width=(c-1)*this.parallelEdgeSpacing}a+=d.width/2,d.setX(r,a),d.setGeneralPurposeVariable(r,a),a+=d.width/2,a+=this.intraCellSpacing,a>this.widestRankValue&&(this.widestRankValue=a,this.widestRank=r),this.rankWidths[r]=a}o==!0&&mxLog$1.warn("At least one cell has no bounds"),this.rankY[r]=i;var g=l/2+n/2+this.interRankCellSpacing;n=l,this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_WEST?i+=g:i-=g;for(var u=0;u<s.length;u++){var x=s[u];x.setY(r,i)}}};mxCoordinateAssignment$1.prototype.minPath=function(t,e){for(var i=e.edgeMapper.getValues(),n=0;n<i.length;n++){var r=i[n];if(!(r.maxRank-r.minRank-1<1)){for(var l=r.getGeneralPurposeVariable(r.minRank+1),s=!0,a=0,o=r.minRank+2;o<r.maxRank;o++){var u=r.getGeneralPurposeVariable(o);l!=u?(s=!1,l=u):a++}if(!s){for(var d=0,p=0,c=[],g=[],x=r.getGeneralPurposeVariable(r.minRank+1),o=r.minRank+1;o<r.maxRank-1;o++){var C=r.getX(o+1);x==C||this.repositionValid(e,r,o+1,x)?(c[o-r.minRank-1]=x,d++):(c[o-r.minRank-1]=C,x=C)}x=r.getX(o);for(var o=r.maxRank-1;o>r.minRank+1;o--){var C=r.getX(o-1);x==C||this.repositionValid(e,r,o-1,x)?(g[o-r.minRank-2]=x,p++):(g[o-r.minRank-2]=r.getX(o-1),x=C)}if(p>a||d>a){if(p>=d)for(var o=r.maxRank-2;o>r.minRank;o--)r.setX(o,g[o-r.minRank-1]);else if(d>p)for(var o=r.minRank+2;o<r.maxRank;o++)r.setX(o,c[o-r.minRank-2])}}}}};mxCoordinateAssignment$1.prototype.repositionValid=function(t,e,i,n){for(var r=t.ranks[i],l=-1,s=0;s<r.length;s++)if(e==r[s]){l=s;break}if(l<0)return!1;var a=e.getGeneralPurposeVariable(i);if(n<a){if(l==0)return!0;var o=r[l-1],u=o.getGeneralPurposeVariable(i);return u=u+o.width/2+this.intraCellSpacing+e.width/2,u<=n}else if(n>a){if(l==r.length-1)return!0;var d=r[l+1],p=d.getGeneralPurposeVariable(i);return p=p-d.width/2-this.intraCellSpacing-e.width/2,p>=n}return!0};mxCoordinateAssignment$1.prototype.setCellLocations=function(t,e){this.rankTopY=[],this.rankBottomY=[];for(var i=0;i<e.ranks.length;i++)this.rankTopY[i]=Number.MAX_VALUE,this.rankBottomY[i]=-Number.MAX_VALUE;for(var n=e.vertexMapper.getValues(),i=0;i<n.length;i++)this.setVertexLocation(n[i]);(this.layout.edgeStyle==mxHierarchicalEdgeStyle.ORTHOGONAL||this.layout.edgeStyle==mxHierarchicalEdgeStyle.POLYLINE||this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE)&&this.localEdgeProcessing(e);for(var r=e.edgeMapper.getValues(),i=0;i<r.length;i++)this.setEdgePosition(r[i])};mxCoordinateAssignment$1.prototype.localEdgeProcessing=function(t){for(var e=0;e<t.ranks.length;e++)for(var i=t.ranks[e],n=0;n<i.length;n++){var r=i[n];if(r.isVertex())for(var l=r.getPreviousLayerConnectedCells(e),s=e-1,a=0;a<2;a++){if(s>-1&&s<t.ranks.length&&l!=null&&l.length>0){for(var o=[],u=0;u<l.length;u++){var d=new WeightedCellSorter$1(l[u],l[u].getX(s));o.push(d)}o.sort(WeightedCellSorter$1.prototype.compare);for(var p=r.x[0]-r.width/2,c=p+r.width,g=0,x=[],u=0;u<o.length;u++){var C=o[u].cell,T;if(C.isVertex()){a==0?T=r.connectsAsSource:T=r.connectsAsTarget;for(var A=0;A<T.length;A++)(T[A].source==C||T[A].target==C)&&(g+=T[A].edges.length,x.push(T[A]))}else g+=C.edges.length,x.push(C)}var R=(g+1)*this.prefHozEdgeSep;r.width>R+2*this.prefHozEdgeSep&&(p+=this.prefHozEdgeSep,c-=this.prefHozEdgeSep);for(var _=c-p,N=_/g,H=p+N/2,k=this.minEdgeJetty-this.prefVertEdgeOff,u=0;u<x.length;u++){var K=x[u].edges.length,Q=this.jettyPositions[x[u].ids[0]];Q==null&&(Q=[],this.jettyPositions[x[u].ids[0]]=Q),u<g/2?k+=this.prefVertEdgeOff:u>g/2&&(k-=this.prefVertEdgeOff);for(var nt=0;nt<K;nt++)Q[nt*4+a*2]=H,H+=N,Q[nt*4+a*2+1]=k}}l=r.getNextLayerConnectedCells(e),s=e+1}}};mxCoordinateAssignment$1.prototype.setEdgePosition=function(t){var e=0;if(t.temp[0]!=101207){var i=t.maxRank,n=t.minRank;i==n&&(i=t.source.maxRank,n=t.target.minRank);for(var r=0,l=this.jettyPositions[t.ids[0]],s=t.isReversed?t.target.cell:t.source.cell,a=this.layout.graph,o=this.orientation==mxConstants$1.DIRECTION_EAST||this.orientation==mxConstants$1.DIRECTION_SOUTH,u=0;u<t.edges.length;u++){var d=t.edges[u],p=this.layout.getVisibleTerminal(d,!0),c=[],g=t.isReversed;if(p!=s&&(g=!g),l!=null){var x=g?2:0,C=g?o?this.rankBottomY[n]:this.rankTopY[n]:o?this.rankTopY[i]:this.rankBottomY[i],T=l[r*4+1+x];g!=o&&(T=-T),C+=T;var A=l[r*4+x],R=a.model.getTerminal(d,!0);if(this.layout.isPort(R)&&a.model.getParent(R)==p){var _=a.view.getState(R);_!=null?A=_.x:A=p.geometry.x+t.source.width*R.geometry.x}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(c.push(new mxPoint$1(A,C)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint$1(A,C+T))):(c.push(new mxPoint$1(C,A)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint$1(C+T,A)))}var N=t.x.length-1,H=-1,k=-1,K=t.maxRank-1;g&&(N=0,H=t.x.length,k=1,K=t.minRank+1);for(var Q=N;t.maxRank!=t.minRank&&Q!=H;Q+=k){var nt=t.x[Q]+e,dt=(this.rankTopY[K]+this.rankBottomY[K+1])/2,mt=(this.rankTopY[K-1]+this.rankBottomY[K])/2;if(g){var xt=dt;dt=mt,mt=xt}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(c.push(new mxPoint$1(nt,dt)),c.push(new mxPoint$1(nt,mt))):(c.push(new mxPoint$1(dt,nt)),c.push(new mxPoint$1(mt,nt))),this.limitX=Math.max(this.limitX,nt),K+=k}if(l!=null){var x=g?2:0,Y=g?o?this.rankTopY[i]:this.rankBottomY[i]:o?this.rankBottomY[n]:this.rankTopY[n],T=l[r*4+3-x];g!=o&&(T=-T);var C=Y-T,A=l[r*4+2-x],B=a.model.getTerminal(d,!1),U=this.layout.getVisibleTerminal(d,!1);if(this.layout.isPort(B)&&a.model.getParent(B)==U){var _=a.view.getState(B);_!=null?A=_.x:A=U.geometry.x+t.target.width*B.geometry.x}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint$1(A,C-T)),c.push(new mxPoint$1(A,C))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&c.push(new mxPoint$1(C-T,A)),c.push(new mxPoint$1(C,A)))}if(t.isReversed&&this.processReversedEdge(t,d),this.layout.setEdgePoints(d,c),this.layout.resetEdgeLabels&&d.geometry!=null){var lt=d.geometry.clone();lt.relative=!0,lt.x=0,lt.y=0,a.model.setGeometry(d,lt)}e==0?e=this.parallelEdgeSpacing:e>0?e=-e:e=-e+this.parallelEdgeSpacing,r++}t.temp[0]=101207}};mxCoordinateAssignment$1.prototype.setVertexLocation=function(t){var e=t.cell,i=t.x[0]-t.width/2,n=t.y[0]-t.height/2;this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],n),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],n+t.height),this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?this.layout.setVertexLocation(e,i,n):this.layout.setVertexLocation(e,n,i),this.limitX=Math.max(this.limitX,i+t.width)};mxCoordinateAssignment$1.prototype.processReversedEdge=function(t,e){};function mxHierarchicalLayout$1(t,e,i){mxGraphLayout.call(this,t),this.orientation=e??mxConstants$1.DIRECTION_NORTH,this.deterministic=i??!0}var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};mxHierarchicalLayout$1.prototype=new mxGraphLayout;mxHierarchicalLayout$1.prototype.constructor=mxHierarchicalLayout$1;mxHierarchicalLayout$1.prototype.roots=null;mxHierarchicalLayout$1.prototype.resizeParent=!1;mxHierarchicalLayout$1.prototype.maintainParentLocation=!1;mxHierarchicalLayout$1.prototype.moveParent=!1;mxHierarchicalLayout$1.prototype.parentBorder=0;mxHierarchicalLayout$1.prototype.intraCellSpacing=30;mxHierarchicalLayout$1.prototype.interRankCellSpacing=100;mxHierarchicalLayout$1.prototype.interHierarchySpacing=60;mxHierarchicalLayout$1.prototype.parallelEdgeSpacing=10;mxHierarchicalLayout$1.prototype.orientation=mxConstants$1.DIRECTION_NORTH;mxHierarchicalLayout$1.prototype.fineTuning=!0;mxHierarchicalLayout$1.prototype.tightenToSource=!0;mxHierarchicalLayout$1.prototype.disableEdgeStyle=!0;mxHierarchicalLayout$1.prototype.resetEdgeLabels=!0;mxHierarchicalLayout$1.prototype.traverseAncestors=!0;mxHierarchicalLayout$1.prototype.model=null;mxHierarchicalLayout$1.prototype.edgesCache=null;mxHierarchicalLayout$1.prototype.edgeSourceTermCache=null;mxHierarchicalLayout$1.prototype.edgesTargetTermCache=null;mxHierarchicalLayout$1.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE;mxHierarchicalLayout$1.prototype.getModel=function(){return this.model};mxHierarchicalLayout$1.prototype.execute=function(t,e){this.parent=t;var i=this.graph.model;if(this.edgesCache=new mxDictionary$1,this.edgeSourceTermCache=new mxDictionary$1,this.edgesTargetTermCache=new mxDictionary$1,e!=null&&!(e instanceof Array)&&(e=[e]),!(e==null&&t==null)){if(this.parentX=null,this.parentY=null,t!=this.root&&i.isVertex(t)!=null&&this.maintainParentLocation){var n=this.graph.getCellGeometry(t);n!=null&&(this.parentX=n.x,this.parentY=n.y)}if(e!=null){for(var r=[],l=0;l<e.length;l++){var s=t!=null?i.isAncestor(t,e[l]):!0;s&&i.isVertex(e[l])&&r.push(e[l])}this.roots=r}i.beginUpdate();try{if(this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),this.parentX!=null&&this.parentY!=null){var n=this.graph.getCellGeometry(t);n!=null&&(n=n.clone(),n.x=this.parentX,n.y=this.parentY,i.setGeometry(t,n))}}finally{i.endUpdate()}}};mxHierarchicalLayout$1.prototype.findRoots=function(t,e){var i=[];if(t!=null&&e!=null){var n=this.graph.model,r=null,l=-1e5;for(var s in e){var a=e[s];if(n.isVertex(a)&&this.graph.isCellVisible(a)){for(var o=this.getEdges(a),u=0,d=0,p=0;p<o.length;p++){var c=this.getVisibleTerminal(o[p],!0);c==a?u++:d++}d==0&&u>0&&i.push(a);var g=u-d;g>l&&(l=g,r=a)}}i.length==0&&r!=null&&i.push(r)}return i};mxHierarchicalLayout$1.prototype.getEdges=function(t){var e=this.edgesCache.get(t);if(e!=null)return e;for(var i=this.graph.model,n=[],r=this.graph.isCellCollapsed(t),l=i.getChildCount(t),s=0;s<l;s++){var a=i.getChildAt(t,s);(this.isPort(a)||r||!this.graph.isCellVisible(a))&&(n=n.concat(i.getEdges(a,!0,!0)))}n=n.concat(i.getEdges(t,!0,!0));for(var o=[],s=0;s<n.length;s++){var u=this.getVisibleTerminal(n[s],!0),d=this.getVisibleTerminal(n[s],!1);(u==d||u!=d&&(d==t&&(this.parent==null||this.isAncestor(this.parent,u,this.traverseAncestors))||u==t&&(this.parent==null||this.isAncestor(this.parent,d,this.traverseAncestors))))&&o.push(n[s])}return this.edgesCache.put(t,o),o};mxHierarchicalLayout$1.prototype.getVisibleTerminal=function(t,e){var i=this.edgesTargetTermCache;e&&(i=this.edgeSourceTermCache);var n=i.get(t);if(n!=null)return n;var r=this.graph.view.getState(t),l=r!=null?r.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e);return l==null&&(l=r!=null?r.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e)),l!=null&&(this.isPort(l)&&(l=this.graph.model.getParent(l)),i.put(t,l)),l};mxHierarchicalLayout$1.prototype.run=function(t){var e=[],i=[];if(this.roots==null&&t!=null){var n=Object();this.filterDescendants(t,n),this.roots=[];var r=!0;for(var l in n)if(n[l]!=null){r=!1;break}for(;!r;){for(var s=this.findRoots(t,n),a=0;a<s.length;a++){var o=Object();e.push(o),this.traverse(s[a],!0,null,i,o,e,n)}for(var a=0;a<s.length;a++)this.roots.push(s[a]);r=!0;for(var l in n)if(n[l]!=null){r=!1;break}}}else for(var a=0;a<this.roots.length;a++){var o=Object();e.push(o),this.traverse(this.roots[a],!0,null,i,o,e,null)}for(var u=0,a=0;a<e.length;a++){var o=e[a],d=[];for(var l in o)d.push(o[l]);this.model=new mxGraphHierarchyModel(this,d,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),u=this.placementStage(u,t)}};mxHierarchicalLayout$1.prototype.filterDescendants=function(t,e){var i=this.graph.model;if(i.isVertex(t)&&t!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity$1.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var n=i.getChildCount(t),r=0;r<n;r++){var l=i.getChildAt(t,r);this.isPort(l)||this.filterDescendants(l,e)}};mxHierarchicalLayout$1.prototype.isPort=function(t){return t!=null&&t.geometry!=null?t.geometry.relative:!1};mxHierarchicalLayout$1.prototype.getEdgesBetween=function(t,e,i){i=i??!1;for(var n=this.getEdges(t),r=[],l=0;l<n.length;l++){var s=this.getVisibleTerminal(n[l],!0),a=this.getVisibleTerminal(n[l],!1);(s==t&&a==e||!i&&s==e&&a==t)&&r.push(n[l])}return r};mxHierarchicalLayout$1.prototype.traverse=function(t,e,i,n,r,l,s){if(t!=null&&n!=null){var a=mxObjectIdentity$1.get(t);if(n[a]==null&&(s==null||s[a]!=null)){r[a]==null&&(r[a]=t),n[a]==null&&(n[a]=t),s!==null&&delete s[a];for(var o=this.getEdges(t),u=[],d=0;d<o.length;d++)u[d]=this.getVisibleTerminal(o[d],!0)==t;for(var d=0;d<o.length;d++)if(!e||u[d]){for(var p=this.getVisibleTerminal(o[d],!u[d]),c=1,g=0;g<o.length;g++)if(g!=d){var x=u[g],C=this.getVisibleTerminal(o[g],!x);C==p&&(x?c++:c--)}c>=0&&(r=this.traverse(p,e,o[d],n,r,l,s))}}else if(r[a]==null)for(var d=0;d<l.length;d++){var T=l[d];if(T[a]!=null){for(var A in T)r[A]=T[A];return l.splice(d,1),r}}}return r};mxHierarchicalLayout$1.prototype.cycleStage=function(t){var e=new mxMinimumCycleRemover(this);e.execute(t)};mxHierarchicalLayout$1.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()};mxHierarchicalLayout$1.prototype.crossingStage=function(t){var e=new mxMedianHybridCrossingReduction$1(this);e.execute(t)};mxHierarchicalLayout$1.prototype.placementStage=function(t,e){var i=new mxCoordinateAssignment$1(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return i.fineTuning=this.fineTuning,i.execute(e),i.limitX+this.interHierarchySpacing};function mxSwimlaneLayout(t,e,i){mxGraphLayout.call(this,t),this.orientation=e??mxConstants$1.DIRECTION_NORTH,this.deterministic=i??!0}mxSwimlaneLayout.prototype=new mxGraphLayout;mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout;mxSwimlaneLayout.prototype.roots=null;mxSwimlaneLayout.prototype.swimlanes=null;mxSwimlaneLayout.prototype.dummyVertexWidth=50;mxSwimlaneLayout.prototype.resizeParent=!1;mxSwimlaneLayout.prototype.maintainParentLocation=!1;mxSwimlaneLayout.prototype.moveParent=!1;mxSwimlaneLayout.prototype.parentBorder=30;mxSwimlaneLayout.prototype.intraCellSpacing=30;mxSwimlaneLayout.prototype.interRankCellSpacing=100;mxSwimlaneLayout.prototype.interHierarchySpacing=60;mxSwimlaneLayout.prototype.parallelEdgeSpacing=10;mxSwimlaneLayout.prototype.orientation=mxConstants$1.DIRECTION_NORTH;mxSwimlaneLayout.prototype.fineTuning=!0;mxSwimlaneLayout.prototype.tightenToSource=!0;mxSwimlaneLayout.prototype.disableEdgeStyle=!0;mxSwimlaneLayout.prototype.traverseAncestors=!0;mxSwimlaneLayout.prototype.model=null;mxSwimlaneLayout.prototype.edgesCache=null;mxHierarchicalLayout$1.prototype.edgeSourceTermCache=null;mxHierarchicalLayout$1.prototype.edgesTargetTermCache=null;mxHierarchicalLayout$1.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE;mxSwimlaneLayout.prototype.getModel=function(){return this.model};mxSwimlaneLayout.prototype.execute=function(t,e){this.parent=t;var i=this.graph.model;if(this.edgesCache=new mxDictionary$1,this.edgeSourceTermCache=new mxDictionary$1,this.edgesTargetTermCache=new mxDictionary$1,!(e==null||e.length<1)){if(t==null&&(t=i.getParent(e[0])),this.parentX=null,this.parentY=null,t!=this.root&&i.isVertex(t)!=null&&this.maintainParentLocation){var n=this.graph.getCellGeometry(t);n!=null&&(this.parentX=n.x,this.parentY=n.y)}this.swimlanes=e;for(var r=[],l=0;l<e.length;l++){var s=this.graph.getChildCells(e[l]);if(s==null||s.length==0){var a=this.graph.insertVertex(e[l],null,null,0,0,this.dummyVertexWidth,0);r.push(a)}}i.beginUpdate();try{if(this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),this.parentX!=null&&this.parentY!=null){var n=this.graph.getCellGeometry(t);n!=null&&(n=n.clone(),n.x=this.parentX,n.y=this.parentY,i.setGeometry(t,n))}this.graph.removeCells(r)}finally{i.endUpdate()}}};mxSwimlaneLayout.prototype.updateGroupBounds=function(){var t=[],e=this.model;for(var i in e.edgeMapper)for(var n=e.edgeMapper[i],r=0;r<n.edges.length;r++)t.push(n.edges[r]);for(var l=this.graph.getBoundingBoxFromGeometry(t,!0),s=[],r=0;r<this.swimlanes.length;r++){var a=this.swimlanes[r],o=this.graph.getCellGeometry(a);if(o!=null){var u=this.graph.getChildCells(a),d=this.graph.isSwimlane(a)?this.graph.getStartSize(a):new mxRectangle$1,p=this.graph.getBoundingBoxFromGeometry(u);s[r]=p;var c=p.y+o.y-d.height-this.parentBorder,g=p.y+o.y+p.height;if(l==null)l=new mxRectangle$1(0,c,0,g-c);else{l.y=Math.min(l.y,c);var x=Math.max(l.y+l.height,g);l.height=x-l.y}}}for(var r=0;r<this.swimlanes.length;r++){var a=this.swimlanes[r],o=this.graph.getCellGeometry(a);if(o!=null){var u=this.graph.getChildCells(a),d=this.graph.isSwimlane(a)?this.graph.getStartSize(a):new mxRectangle$1,C=o.clone(),T=r==0?this.parentBorder:this.interRankCellSpacing/2,A=d.width+T,R=s[r].x-A,_=l.y-this.parentBorder;C.x+=R,C.y=_,C.width=s[r].width+A+this.interRankCellSpacing/2,C.height=l.height+d.height+2*this.parentBorder,this.graph.model.setGeometry(a,C),this.graph.moveCells(u,-R,o.y-_)}}};mxSwimlaneLayout.prototype.findRoots=function(t,e){var i=[];if(t!=null&&e!=null){var n=this.graph.model,r=null,l=-1e5;for(var s in e){var a=e[s];if(a!=null&&n.isVertex(a)&&this.graph.isCellVisible(a)&&n.isAncestor(t,a)){for(var o=this.getEdges(a),u=0,d=0,p=0;p<o.length;p++){var c=this.getVisibleTerminal(o[p],!0);if(c==a){var g=this.getVisibleTerminal(o[p],!1);n.isAncestor(t,g)&&u++}else n.isAncestor(t,c)&&d++}d==0&&u>0&&i.push(a);var x=u-d;x>l&&(l=x,r=a)}}i.length==0&&r!=null&&i.push(r)}return i};mxSwimlaneLayout.prototype.getEdges=function(t){var e=this.edgesCache.get(t);if(e!=null)return e;for(var i=this.graph.model,n=[],r=this.graph.isCellCollapsed(t),l=i.getChildCount(t),s=0;s<l;s++){var a=i.getChildAt(t,s);(this.isPort(a)||r||!this.graph.isCellVisible(a))&&(n=n.concat(i.getEdges(a,!0,!0)))}n=n.concat(i.getEdges(t,!0,!0));for(var o=[],s=0;s<n.length;s++){var u=this.getVisibleTerminal(n[s],!0),d=this.getVisibleTerminal(n[s],!1);(u==d||u!=d&&(d==t&&(this.parent==null||this.graph.isValidAncestor(u,this.parent,this.traverseAncestors))||u==t&&(this.parent==null||this.graph.isValidAncestor(d,this.parent,this.traverseAncestors))))&&o.push(n[s])}return this.edgesCache.put(t,o),o};mxSwimlaneLayout.prototype.getVisibleTerminal=function(t,e){var i=this.edgesTargetTermCache;e&&(i=this.edgeSourceTermCache);var n=i.get(t);if(n!=null)return n;var r=this.graph.view.getState(t),l=r!=null?r.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e);return l==null&&(l=r!=null?r.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e)),l!=null&&(this.isPort(l)&&(l=this.graph.model.getParent(l)),i.put(t,l)),l};mxSwimlaneLayout.prototype.run=function(t){var e=[],i=Object();if(this.swimlanes!=null&&this.swimlanes.length>0&&t!=null){for(var n=Object(),r=0;r<this.swimlanes.length;r++)this.filterDescendants(this.swimlanes[r],n);this.roots=[];var l=!0;for(var s in n)if(n[s]!=null){l=!1;break}for(var a=0;!l&&a<this.swimlanes.length;){var o=this.findRoots(this.swimlanes[a],n);if(o.length==0){a++;continue}for(var r=0;r<o.length;r++){var u=Object();e.push(u),this.traverse(o[r],!0,null,i,u,e,n,a)}for(var r=0;r<o.length;r++)this.roots.push(o[r]);l=!0;for(var s in n)if(n[s]!=null){l=!1;break}}}else for(var r=0;r<this.roots.length;r++){var u=Object();e.push(u),this.traverse(this.roots[r],!0,null,i,u,e,null)}var d=[];for(var s in i)d.push(i[s]);this.model=new mxSwimlaneModel(this,d,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),this.placementStage(0,t)};mxSwimlaneLayout.prototype.filterDescendants=function(t,e){var i=this.graph.model;if(i.isVertex(t)&&t!=this.parent&&i.getParent(t)!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity$1.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var n=i.getChildCount(t),r=0;r<n;r++){var l=i.getChildAt(t,r);this.isPort(l)||this.filterDescendants(l,e)}};mxSwimlaneLayout.prototype.isPort=function(t){return!!t.geometry.relative};mxSwimlaneLayout.prototype.getEdgesBetween=function(t,e,i){i=i??!1;for(var n=this.getEdges(t),r=[],l=0;l<n.length;l++){var s=this.getVisibleTerminal(n[l],!0),a=this.getVisibleTerminal(n[l],!1);(s==t&&a==e||!i&&s==e&&a==t)&&r.push(n[l])}return r};mxSwimlaneLayout.prototype.traverse=function(t,e,i,n,r,l,s,a){if(t!=null&&n!=null){var o=mxObjectIdentity$1.get(t);if(n[o]==null&&(s==null||s[o]!=null)){r[o]==null&&(r[o]=t),n[o]==null&&(n[o]=t),s!==null&&delete s[o];for(var u=this.getEdges(t),d=this.graph.model,p=0;p<u.length;p++){var c=this.getVisibleTerminal(u[p],!0),g=c==t;g&&(c=this.getVisibleTerminal(u[p],!1));for(var x=0;x<this.swimlanes.length&&!d.isAncestor(this.swimlanes[x],c);)x++;x>=this.swimlanes.length||(x>a||(!e||g)&&x==a)&&(r=this.traverse(c,e,u[p],n,r,l,s,x))}}else if(r[o]==null)for(var p=0;p<l.length;p++){var C=l[p];if(C[o]!=null){for(var T in C)r[T]=C[T];return l.splice(p,1),r}}}return r};mxSwimlaneLayout.prototype.cycleStage=function(t){var e=new mxSwimlaneOrdering(this);e.execute(t)};mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()};mxSwimlaneLayout.prototype.crossingStage=function(t){var e=new mxMedianHybridCrossingReduction(this);e.execute(t)};mxSwimlaneLayout.prototype.placementStage=function(t,e){var i=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return i.fineTuning=this.fineTuning,i.execute(e),i.limitX+this.interHierarchySpacing};function mxStencil(t){this.desc=t,this.parseDescription(),this.parseConstraints()}mxUtils$1.extend(mxStencil,mxShape$1);mxStencil.defaultLocalized=!1;mxStencil.allowEval=!1;mxStencil.prototype.desc=null;mxStencil.prototype.constraints=null;mxStencil.prototype.aspect=null;mxStencil.prototype.w0=null;mxStencil.prototype.h0=null;mxStencil.prototype.bgNode=null;mxStencil.prototype.fgNode=null;mxStencil.prototype.strokewidth=null;mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var t=this.desc.getAttribute("aspect");this.aspect=t??"variable";var e=this.desc.getAttribute("strokewidth");this.strokewidth=e??"1"};mxStencil.prototype.parseConstraints=function(){var t=this.desc.getElementsByTagName("connections")[0];if(t!=null){var e=mxUtils$1.getChildNodes(t);if(e!=null&&e.length>0){this.constraints=[];for(var i=0;i<e.length;i++)this.constraints.push(this.parseConstraint(e[i]))}}};mxStencil.prototype.parseConstraint=function(t){var e=Number(t.getAttribute("x")),i=Number(t.getAttribute("y")),n=t.getAttribute("perimeter")=="1",r=t.getAttribute("name");return new mxConnectionConstraint(new mxPoint$1(e,i),n,r)};mxStencil.prototype.evaluateTextAttribute=function(t,e,i){var n=this.evaluateAttribute(t,e,i),r=t.getAttribute("localized");return(mxStencil.defaultLocalized&&r==null||r=="1")&&(n=mxResources$1.get(n)),n};mxStencil.prototype.evaluateAttribute=function(t,e,i){var n=t.getAttribute(e);if(n==null){var r=mxUtils$1.getTextContent(t);if(r!=null&&mxStencil.allowEval){var l=mxUtils$1.eval(r);typeof l=="function"&&(n=l(i))}}return n};mxStencil.prototype.drawShape=function(t,e,i,n,r,l){var s=t.states.slice(),a=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_DIRECTION,null),o=this.computeAspect(e.style,i,n,r,l,a),u=Math.min(o.width,o.height),d=this.strokewidth=="inherit"?Number(mxUtils$1.getNumber(e.style,mxConstants$1.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*u;t.setStrokeWidth(d),e.style!=null&&mxUtils$1.getValue(e.style,mxConstants$1.STYLE_POINTER_EVENTS,"0")=="1"&&(t.setStrokeColor(mxConstants$1.NONE),t.rect(i,n,r,l),t.stroke(),t.setStrokeColor(e.stroke)),this.drawChildren(t,e,i,n,r,l,this.bgNode,o,!1,!0),this.drawChildren(t,e,i,n,r,l,this.fgNode,o,!0,!e.outline||e.style==null||mxUtils$1.getValue(e.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0),t.states.length!=s.length&&(t.states=s)};mxStencil.prototype.drawChildren=function(t,e,i,n,r,l,s,a,o,u){if(s!=null&&r>0&&l>0)for(var d=s.firstChild;d!=null;)d.nodeType==mxConstants$1.NODETYPE_ELEMENT&&this.drawNode(t,e,d,a,o,u),d=d.nextSibling};mxStencil.prototype.computeAspect=function(t,e,i,n,r,l){var s=e,a=i,o=n/this.w0,u=r/this.h0,d=l==mxConstants$1.DIRECTION_NORTH||l==mxConstants$1.DIRECTION_SOUTH;if(d){u=n/this.h0,o=r/this.w0;var p=(n-r)/2;s+=p,a-=p}return this.aspect=="fixed"&&(u=Math.min(o,u),o=u,d?(s+=(r-this.w0*o)/2,a+=(n-this.h0*u)/2):(s+=(n-this.w0*o)/2,a+=(r-this.h0*u)/2)),new mxRectangle$1(s,a,o,u)};mxStencil.prototype.parseColor=function(t,e,i,n){return n=="stroke"?n=e.stroke:n=="fill"&&(n=e.fill),n};mxStencil.prototype.drawNode=function(t,e,i,n,r,l){var s=i.nodeName,a=n.x,o=n.y,u=n.width,d=n.height,p=Math.min(u,d);if(s=="save")t.save();else if(s=="restore")t.restore();else if(l){if(s=="path"){t.begin();var c=!0;if(i.getAttribute("rounded")=="1"){c=!1;for(var g=Number(i.getAttribute("arcSize")),x=0,C=[],T=i.firstChild;T!=null;){if(T.nodeType==mxConstants$1.NODETYPE_ELEMENT){var A=T.nodeName;if(A=="move"||A=="line")(A=="move"||C.length==0)&&C.push([]),C[C.length-1].push(new mxPoint$1(a+Number(T.getAttribute("x"))*u,o+Number(T.getAttribute("y"))*d)),x++;else{c=!0;break}}T=T.nextSibling}if(!c&&x>0)for(var R=0;R<C.length;R++){var _=!1,N=C[R][0],H=C[R][C[R].length-1];N.x==H.x&&N.y==H.y&&(C[R].pop(),_=!0),this.addPoints(t,C[R],!0,g,_)}else c=!0}if(c)for(var T=i.firstChild;T!=null;)T.nodeType==mxConstants$1.NODETYPE_ELEMENT&&this.drawNode(t,e,T,n,r,l),T=T.nextSibling}else if(s=="close")t.close();else if(s=="move")t.moveTo(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d);else if(s=="line")t.lineTo(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d);else if(s=="quad")t.quadTo(a+Number(i.getAttribute("x1"))*u,o+Number(i.getAttribute("y1"))*d,a+Number(i.getAttribute("x2"))*u,o+Number(i.getAttribute("y2"))*d);else if(s=="curve")t.curveTo(a+Number(i.getAttribute("x1"))*u,o+Number(i.getAttribute("y1"))*d,a+Number(i.getAttribute("x2"))*u,o+Number(i.getAttribute("y2"))*d,a+Number(i.getAttribute("x3"))*u,o+Number(i.getAttribute("y3"))*d);else if(s=="arc")t.arcTo(Number(i.getAttribute("rx"))*u,Number(i.getAttribute("ry"))*d,Number(i.getAttribute("x-axis-rotation")),Number(i.getAttribute("large-arc-flag")),Number(i.getAttribute("sweep-flag")),a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d);else if(s=="rect")t.rect(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d,Number(i.getAttribute("w"))*u,Number(i.getAttribute("h"))*d);else if(s=="roundrect"){var k=Number(i.getAttribute("arcsize"));k==0&&(k=mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100);var K=Number(i.getAttribute("w"))*u,Q=Number(i.getAttribute("h"))*d,nt=Number(k)/100,dt=Math.min(K*nt,Q*nt);t.roundrect(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d,K,Q,dt,dt)}else if(s=="ellipse")t.ellipse(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d,Number(i.getAttribute("w"))*u,Number(i.getAttribute("h"))*d);else if(s=="image"){if(!e.outline){var mt=this.evaluateAttribute(i,"src",e);t.image(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d,Number(i.getAttribute("w"))*u,Number(i.getAttribute("h"))*d,mt,!1,i.getAttribute("flipH")=="1",i.getAttribute("flipV")=="1")}}else if(s=="text"){if(!e.outline){var xt=this.evaluateTextAttribute(i,"str",e),Y=i.getAttribute("vertical")=="1"?-90:0;if(i.getAttribute("align-shape")=="0"){var B=e.rotation,U=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FLIPH,0)==1,lt=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FLIPV,0)==1;U&&lt?Y-=B:U||lt?Y+=B:Y-=B}Y-=i.getAttribute("rotation"),t.text(a+Number(i.getAttribute("x"))*u,o+Number(i.getAttribute("y"))*d,0,0,xt,i.getAttribute("align")||"left",i.getAttribute("valign")||"top",!1,"",null,!1,Y)}}else if(s=="include-shape"){var tt=mxStencilRegistry.getStencil(i.getAttribute("name"));if(tt!=null){var st=a+Number(i.getAttribute("x"))*u,ft=o+Number(i.getAttribute("y"))*d,K=Number(i.getAttribute("w"))*u,Q=Number(i.getAttribute("h"))*d;tt.drawShape(t,e,st,ft,K,Q)}}else if(s=="fillstroke")t.fillAndStroke();else if(s=="fill")t.fill();else if(s=="stroke")t.stroke();else if(s=="strokewidth"){var $t=i.getAttribute("fixed")=="1"?1:p;t.setStrokeWidth(Number(i.getAttribute("width"))*$t)}else if(s=="dashed")t.setDashed(i.getAttribute("dashed")=="1");else if(s=="dashpattern"){var Ct=i.getAttribute("pattern");if(Ct!=null){for(var pt=Ct.split(" "),ct=[],R=0;R<pt.length;R++)pt[R].length>0&&ct.push(Number(pt[R])*p);Ct=ct.join(" "),t.setDashPattern(Ct)}}else s=="strokecolor"?t.setStrokeColor(this.parseColor(t,e,i,i.getAttribute("color"))):s=="linecap"?t.setLineCap(i.getAttribute("cap")):s=="linejoin"?t.setLineJoin(i.getAttribute("join")):s=="miterlimit"?t.setMiterLimit(Number(i.getAttribute("limit"))):s=="fillcolor"?t.setFillColor(this.parseColor(t,e,i,i.getAttribute("color"))):s=="alpha"||s=="fillalpha"||s=="strokealpha"?t.setAlpha(i.getAttribute("alpha")):s=="fontcolor"?t.setFontColor(this.parseColor(t,e,i,i.getAttribute("color"))):s=="fontstyle"?t.setFontStyle(i.getAttribute("style")):s=="fontfamily"?t.setFontFamily(i.getAttribute("family")):s=="fontsize"&&t.setFontSize(Number(i.getAttribute("size"))*p);r&&(s=="fillstroke"||s=="fill"||s=="stroke")&&(r=!1,t.setShadow(!1))}};function mxAnimation(t){this.delay=t??20}mxAnimation.prototype=new mxEventSource;mxAnimation.prototype.constructor=mxAnimation;mxAnimation.prototype.delay=null;mxAnimation.prototype.thread=null;mxAnimation.prototype.isRunning=function(){return this.thread!=null};mxAnimation.prototype.startAnimation=function(){this.thread==null&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))};mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))};mxAnimation.prototype.stopAnimation=function(){this.thread!=null&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))};function mxAutoSaveManager(t){this.changeHandler=mxUtils.bind(this,function(e,i){this.isEnabled()&&this.graphModelChanged(i.getProperty("edit").changes)}),this.setGraph(t)}mxAutoSaveManager.prototype=new mxEventSource;mxAutoSaveManager.prototype.constructor=mxAutoSaveManager;mxAutoSaveManager.prototype.graph=null;mxAutoSaveManager.prototype.autoSaveDelay=10;mxAutoSaveManager.prototype.autoSaveThrottle=2;mxAutoSaveManager.prototype.autoSaveThreshold=5;mxAutoSaveManager.prototype.ignoredChanges=0;mxAutoSaveManager.prototype.lastSnapshot=0;mxAutoSaveManager.prototype.enabled=!0;mxAutoSaveManager.prototype.changeHandler=null;mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled};mxAutoSaveManager.prototype.setEnabled=function(t){this.enabled=t};mxAutoSaveManager.prototype.setGraph=function(t){this.graph!=null&&this.graph.getModel().removeListener(this.changeHandler),this.graph=t,this.graph!=null&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)};mxAutoSaveManager.prototype.save=function(){};mxAutoSaveManager.prototype.graphModelChanged=function(t){var e=new Date().getTime(),i=(e-this.lastSnapshot)/1e3;i>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&i>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++};mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=new Date().getTime(),this.ignoredChanges=0};mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)};var mxClipboard$1={STEPSIZE:10,insertCount:1,cells:null,setCells:function(t){mxClipboard$1.cells=t},getCells:function(){return mxClipboard$1.cells},isEmpty:function(){return mxClipboard$1.getCells()==null},cut:function(t,e){return e=mxClipboard$1.copy(t,e),mxClipboard$1.insertCount=0,mxClipboard$1.removeCells(t,e,!1),e},removeCells:function(t,e,i){t.removeCells(e,i)},copy:function(t,e){e=e||t.getSelectionCells();var i=t.getExportableCells(t.model.getTopmostCells(e));return mxClipboard$1.insertCount=1,mxClipboard$1.setCells(t.cloneCells(i)),i},paste:function(t){var e=null;if(!mxClipboard$1.isEmpty()){e=t.getImportableCells(mxClipboard$1.getCells());var i=mxClipboard$1.insertCount*mxClipboard$1.STEPSIZE,n=t.getDefaultParent();e=t.importCells(e,i,i,n),mxClipboard$1.insertCount++,t.setSelectionCells(e)}return e}};function mxDivResizer(t,e){if(t.nodeName.toLowerCase()=="div"){e==null&&(e=window),this.div=t;var i=mxUtils.getCurrentStyle(t);i!=null&&(this.resizeWidth=i.width=="auto",this.resizeHeight=i.height=="auto"),mxEvent.addListener(e,"resize",mxUtils.bind(this,function(n){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize()}}mxDivResizer.prototype.resizeWidth=!0;mxDivResizer.prototype.resizeHeight=!0;mxDivResizer.prototype.handlingResize=!1;mxDivResizer.prototype.resize=function(){var t=this.getDocumentWidth(),e=this.getDocumentHeight(),i=parseInt(this.div.style.left),n=parseInt(this.div.style.right),r=parseInt(this.div.style.top),l=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(i)&&!isNaN(n)&&i>=0&&n>=0&&t-n-i>0&&(this.div.style.width=t-n-i+"px"),this.resizeHeight&&!isNaN(r)&&!isNaN(l)&&r>=0&&l>=0&&e-r-l>0&&(this.div.style.height=e-r-l+"px")};mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth};mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight};function mxDragSource$1(t,e){this.element=t,this.dropHandler=e,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(i){this.mouseDown(i)})),mxEvent.addListener(t,"dragstart",function(i){mxEvent.consume(i)}),this.eventConsumer=function(i,n){var r=n.getProperty("eventName"),l=n.getProperty("event");r!=mxEvent.MOUSE_DOWN&&l.consume()}}mxDragSource$1.prototype.element=null;mxDragSource$1.prototype.dropHandler=null;mxDragSource$1.prototype.dragOffset=null;mxDragSource$1.prototype.dragElement=null;mxDragSource$1.prototype.previewElement=null;mxDragSource$1.prototype.previewOffset=null;mxDragSource$1.prototype.enabled=!0;mxDragSource$1.prototype.currentGraph=null;mxDragSource$1.prototype.currentDropTarget=null;mxDragSource$1.prototype.currentPoint=null;mxDragSource$1.prototype.currentGuide=null;mxDragSource$1.prototype.currentHighlight=null;mxDragSource$1.prototype.autoscroll=!0;mxDragSource$1.prototype.guidesEnabled=!0;mxDragSource$1.prototype.gridEnabled=!0;mxDragSource$1.prototype.highlightDropTargets=!0;mxDragSource$1.prototype.dragElementZIndex=100;mxDragSource$1.prototype.dragElementOpacity=70;mxDragSource$1.prototype.checkEventSource=!0;mxDragSource$1.prototype.isEnabled=function(){return this.enabled};mxDragSource$1.prototype.setEnabled=function(t){this.enabled=t};mxDragSource$1.prototype.isGuidesEnabled=function(){return this.guidesEnabled};mxDragSource$1.prototype.setGuidesEnabled=function(t){this.guidesEnabled=t};mxDragSource$1.prototype.isGridEnabled=function(){return this.gridEnabled};mxDragSource$1.prototype.setGridEnabled=function(t){this.gridEnabled=t};mxDragSource$1.prototype.getGraphForEvent=function(t){return null};mxDragSource$1.prototype.getDropTarget=function(t,e,i,n){return t.getCellAt(e,i)};mxDragSource$1.prototype.createDragElement=function(t){return this.element.cloneNode(!0)};mxDragSource$1.prototype.createPreviewElement=function(t){return null};mxDragSource$1.prototype.isActive=function(){return this.mouseMoveHandler!=null};mxDragSource$1.prototype.reset=function(){this.currentGraph!=null&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()};mxDragSource$1.prototype.mouseDown=function(t){this.enabled&&!mxEvent.isConsumed(t)&&this.mouseMoveHandler==null&&(this.startDrag(t),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(t)&&(this.eventSource=mxEvent.getSource(t),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))};mxDragSource$1.prototype.startDrag=function(t){this.dragElement=this.createDragElement(t),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")};mxDragSource$1.prototype.stopDrag=function(){this.removeDragElement()};mxDragSource$1.prototype.removeDragElement=function(){this.dragElement!=null&&(this.dragElement.parentNode!=null&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)};mxDragSource$1.prototype.getElementForEvent=function(t){return mxEvent.isTouchEvent(t)||mxEvent.isPenEvent(t)?document.elementFromPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)):mxEvent.getSource(t)};mxDragSource$1.prototype.graphContainsEvent=function(t,e){var i=mxEvent.getClientX(e),n=mxEvent.getClientY(e),r=mxUtils.getOffset(t.container),l=mxUtils.getScrollOrigin(),s=this.getElementForEvent(e);if(this.checkEventSource)for(;s!=null&&s!=t.container;)s=s.parentNode;return s!=null&&i>=r.x-l.x&&n>=r.y-l.y&&i<=r.x-l.x+t.container.offsetWidth&&n<=r.y-l.y+t.container.offsetHeight};mxDragSource$1.prototype.mouseMove=function(t){var e=this.getGraphForEvent(t);if(e!=null&&!this.graphContainsEvent(e,t)&&(e=null),e!=this.currentGraph&&(this.currentGraph!=null&&this.dragExit(this.currentGraph,t),this.currentGraph=e,this.currentGraph!=null&&this.dragEnter(this.currentGraph,t)),this.currentGraph!=null&&this.dragOver(this.currentGraph,t),this.dragElement!=null&&(this.previewElement==null||this.previewElement.style.visibility!="visible")){var i=mxEvent.getClientX(t),n=mxEvent.getClientY(t);this.dragElement.parentNode==null&&document.body.appendChild(this.dragElement),mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.dragOffset!=null&&(i+=this.dragOffset.x,n+=this.dragOffset.y);var r=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=i+r.x+"px",this.dragElement.style.top=n+r.y+"px"}else this.dragElement!=null&&mxUtils.setOpacity(this.dragElement,0);mxEvent.consume(t)};mxDragSource$1.prototype.mouseUp=function(t){if(this.currentGraph!=null){if(this.currentPoint!=null&&(this.previewElement==null||this.previewElement.style.visibility!="hidden")){var e=this.currentGraph.view.scale,i=this.currentGraph.view.translate,n=this.currentPoint.x/e-i.x,r=this.currentPoint.y/e-i.y;this.drop(this.currentGraph,t,this.currentDropTarget,n,r)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent.consume(t)};mxDragSource$1.prototype.removeListeners=function(){this.eventSource!=null&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null};mxDragSource$1.prototype.dragEnter=function(t,e){t.isMouseDown=!0,t.isMouseTrigger=mxEvent.isMouseEvent(e),this.previewElement=this.createPreviewElement(t),this.previewElement!=null&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&this.previewElement!=null&&(this.currentGuide=new mxGuide(t,t.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(t,mxConstants.DROP_TARGET_COLOR)),t.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)};mxDragSource$1.prototype.dragExit=function(t,e){this.currentDropTarget=null,this.currentPoint=null,t.isMouseDown=!1,t.removeListener(this.eventConsumer),this.previewElement!=null&&(this.previewElement.parentNode!=null&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),this.currentGuide!=null&&(this.currentGuide.destroy(),this.currentGuide=null),this.currentHighlight!=null&&(this.currentHighlight.destroy(),this.currentHighlight=null)};mxDragSource$1.prototype.dragOver=function(t,e){var i=mxUtils.getOffset(t.container),n=mxUtils.getScrollOrigin(t.container),r=mxEvent.getClientX(e)-i.x+n.x-t.panDx,l=mxEvent.getClientY(e)-i.y+n.y-t.panDy;if(t.autoScroll&&(this.autoscroll==null||this.autoscroll)&&t.scrollPointToVisible(r,l,t.autoExtend),this.currentHighlight!=null&&t.isDropEnabled()){this.currentDropTarget=this.getDropTarget(t,r,l,e);var s=t.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(s)}if(this.previewElement!=null){this.previewElement.parentNode==null&&(t.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var a=this.isGridEnabled()&&t.isGridEnabledEvent(e),o=!0;if(this.currentGuide!=null&&this.currentGuide.isEnabledForEvent(e)){var u=parseInt(this.previewElement.style.width),d=parseInt(this.previewElement.style.height),p=new mxRectangle(0,0,u,d),c=new mxPoint(r,l);c=this.currentGuide.move(p,c,a,!0),o=!1,r=c.x,l=c.y}else if(a){var g=t.view.scale,x=t.view.translate,C=t.gridSize/2;r=(t.snap(r/g-x.x-C)+x.x)*g,l=(t.snap(l/g-x.y-C)+x.y)*g}this.currentGuide!=null&&o&&this.currentGuide.hide(),this.previewOffset!=null&&(r+=this.previewOffset.x,l+=this.previewOffset.y),this.previewElement.style.left=Math.round(r)+"px",this.previewElement.style.top=Math.round(l)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(r,l)};mxDragSource$1.prototype.drop=function(t,e,i,n,r){this.dropHandler.apply(this,arguments),t.container.style.visibility!="hidden"&&t.container.focus()};var mxEffects$1={animateChanges:function(t,e,i){var n=10,r=0,l=function(){for(var a=!1,o=0;o<e.length;o++){var u=e[o];if(u instanceof mxGeometryChange||u instanceof mxTerminalChange||u instanceof mxValueChange||u instanceof mxChildChange||u instanceof mxStyleChange){var d=t.getView().getState(u.cell||u.child,!1);if(d!=null)if(a=!0,u.constructor!=mxGeometryChange||t.model.isEdge(u.cell))mxUtils.setOpacity(d.shape.node,100*r/n);else{var p=t.getView().scale,c=(u.geometry.x-u.previous.x)*p,g=(u.geometry.y-u.previous.y)*p,x=(u.geometry.width-u.previous.width)*p,C=(u.geometry.height-u.previous.height)*p;r==0?(d.x-=c,d.y-=g,d.width-=x,d.height-=C):(d.x+=c/n,d.y+=g/n,d.width+=x/n,d.height+=C/n),t.cellRenderer.redraw(d),mxEffects$1.cascadeOpacity(t,u.cell,100*r/n)}}}r<n&&a?(r++,window.setTimeout(l,s)):i!=null&&i()},s=30;l()},cascadeOpacity:function(t,e,i){for(var n=t.model.getChildCount(e),r=0;r<n;r++){var l=t.model.getChildAt(e,r),s=t.getView().getState(l);s!=null&&(mxUtils.setOpacity(s.shape.node,i),mxEffects$1.cascadeOpacity(t,l,i))}var a=t.model.getEdges(e);if(a!=null)for(var r=0;r<a.length;r++){var o=t.getView().getState(a[r]);o!=null&&mxUtils.setOpacity(o.shape.node,i)}},fadeOut:function(t,e,i,n,r,l){n=n||40,r=r||30;var s=e||100;if(mxUtils.setOpacity(t,s),l||l==null){var a=function(){s=Math.max(s-n,0),mxUtils.setOpacity(t,s),s>0?window.setTimeout(a,r):(t.style.visibility="hidden",i&&t.parentNode&&t.parentNode.removeChild(t))};window.setTimeout(a,r)}else t.style.visibility="hidden",i&&t.parentNode&&t.parentNode.removeChild(t)}};function mxForm(t){this.table=document.createElement("table"),this.table.className=t,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}mxForm.prototype.table=null;mxForm.prototype.body=!1;mxForm.prototype.getTable=function(){return this.table};mxForm.prototype.addButtons=function(t,e){var i=document.createElement("tr"),n=document.createElement("td");i.appendChild(n),n=document.createElement("td");var r=document.createElement("button");mxUtils.write(r,mxResources.get("ok")||"OK"),n.appendChild(r),mxEvent.addListener(r,"click",function(){t()}),r=document.createElement("button"),mxUtils.write(r,mxResources.get("cancel")||"Cancel"),n.appendChild(r),mxEvent.addListener(r,"click",function(){e()}),i.appendChild(n),this.body.appendChild(i)};mxForm.prototype.addText=function(t,e,i){var n=document.createElement("input");return n.setAttribute("type",i||"text"),n.value=e,this.addField(t,n)};mxForm.prototype.addCheckbox=function(t,e){var i=document.createElement("input");return i.setAttribute("type","checkbox"),this.addField(t,i),e&&(i.checked=!0),i};mxForm.prototype.addTextarea=function(t,e,i){var n=document.createElement("textarea");return mxClient.IS_NS&&i--,n.setAttribute("rows",i||2),n.value=e,this.addField(t,n)};mxForm.prototype.addCombo=function(t,e,i){var n=document.createElement("select");return i!=null&&n.setAttribute("size",i),e&&n.setAttribute("multiple","true"),this.addField(t,n)};mxForm.prototype.addOption=function(t,e,i,n){var r=document.createElement("option");mxUtils.writeln(r,e),r.setAttribute("value",i),n&&r.setAttribute("selected",n),t.appendChild(r)};mxForm.prototype.addField=function(t,e){var i=document.createElement("tr"),n=document.createElement("td");return mxUtils.write(n,t),i.appendChild(n),n=document.createElement("td"),n.appendChild(e),i.appendChild(n),this.body.appendChild(i),e};function mxImageBundle(t){this.images=[],this.alt=t??!1}mxImageBundle.prototype.images=null;mxImageBundle.prototype.alt=null;mxImageBundle.prototype.putImage=function(t,e,i){this.images[t]={value:e,fallback:i}};mxImageBundle.prototype.getImage=function(t){var e=null;if(t!=null){var i=this.images[t];i!=null&&(e=this.alt?i.fallback:i.value)}return e};function mxImageExport(){}mxImageExport.prototype.includeOverlays=!1;mxImageExport.prototype.drawState=function(t,e){t!=null&&(this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))};mxImageExport.prototype.visitStatesRecursive=function(t,e,i){if(t!=null){i(t,e);for(var n=t.view.graph,r=n.model.getChildCount(t.cell),l=0;l<r;l++){var s=n.view.getState(n.model.getChildAt(t.cell,l));this.visitStatesRecursive(s,e,i)}}};mxImageExport.prototype.getTitleForCellState=function(t,e){return null};mxImageExport.prototype.getLinkForCellState=function(t,e){return null};mxImageExport.prototype.getLinkTargetForCellState=function(t,e){return null};mxImageExport.prototype.drawCellState=function(t,e){var i=this.getLinkForCellState(t,e);i!=null&&e.setLink(i,this.getLinkTargetForCellState(t,e));var n=this.getTitleForCellState(t,e);n!=null&&e.setTitle(n),this.drawShape(t,e),this.drawText(t,e),n!=null&&e.setTitle(null),i!=null&&e.setLink(null)};mxImageExport.prototype.drawShape=function(t,e){t.shape instanceof mxShape&&this.doDrawShape(t.shape,e)};mxImageExport.prototype.drawText=function(t,e){this.doDrawShape(t.text,e)};mxImageExport.prototype.doDrawShape=function(t,e){if(t!=null&&t.checkBounds()){var i=e.root,n=t.node;e.root=t.createSvg(),i.appendChild(e.root),t.node=e.root,e.save(),t.beforePaint(e),t.paint(e),t.afterPaint(e),e.restore(),t.node=n,e.root=i}};mxImageExport.prototype.drawOverlays=function(t,e){t.overlays!=null&&t.overlays.visit(function(i,n){n instanceof mxShape&&n.paint(e)})};function mxMorphing$1(t,e,i,n){mxAnimation.call(this,n),this.graph=t,this.steps=e??6,this.ease=i??1.5}mxMorphing$1.prototype=new mxAnimation;mxMorphing$1.prototype.constructor=mxMorphing$1;mxMorphing$1.prototype.graph=null;mxMorphing$1.prototype.steps=null;mxMorphing$1.prototype.step=0;mxMorphing$1.prototype.ease=null;mxMorphing$1.prototype.cells=null;mxMorphing$1.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var t=new mxCellStatePreview(this.graph);if(this.cells!=null)for(var e=0;e<this.cells.length;e++)this.animateCell(this.cells[e],t,!1);else this.animateCell(this.graph.getModel().getRoot(),t,!0);this.show(t),(t.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()};mxMorphing$1.prototype.show=function(t){t.show()};mxMorphing$1.prototype.animateCell=function(t,e,i){var n=this.graph.getView().getState(t),r=null;if(n!=null&&(r=this.getDelta(n),this.graph.getModel().isVertex(t)&&(r.x!=0||r.y!=0))){var l=this.graph.view.getTranslate(),s=this.graph.view.getScale();r.x+=l.x*s,r.y+=l.y*s,e.moveState(n,-r.x/this.ease,-r.y/this.ease)}if(i&&!this.stopRecursion(n,r))for(var a=this.graph.getModel().getChildCount(t),o=0;o<a;o++)this.animateCell(this.graph.getModel().getChildAt(t,o),e,i)};mxMorphing$1.prototype.stopRecursion=function(t,e){return e!=null&&(e.x!=0||e.y!=0)};mxMorphing$1.prototype.getDelta=function(t){var e=this.getOriginForCell(t.cell),i=this.graph.getView().getTranslate(),n=this.graph.getView().getScale(),r=t.x/n-i.x,l=t.y/n-i.y;return new mxPoint((e.x-r)*n,(e.y-l)*n)};mxMorphing$1.prototype.getOriginForCell=function(t){var e=null;if(t!=null){var i=this.graph.getModel().getParent(t),n=this.graph.getCellGeometry(t);if(e=this.getOriginForCell(i),n!=null)if(n.relative){var r=this.graph.getCellGeometry(i);r!=null&&(e.x+=n.x*r.width,e.y+=n.y*r.height)}else e.x+=n.x,e.y+=n.y}if(e==null){var l=this.graph.view.getTranslate();e=new mxPoint(-l.x,-l.y)}return e};function mxToolbar(t){this.container=t}mxToolbar.prototype=new mxEventSource;mxToolbar.prototype.constructor=mxToolbar;mxToolbar.prototype.container=null;mxToolbar.prototype.enabled=!0;mxToolbar.prototype.noReset=!1;mxToolbar.prototype.updateDefaultMode=!0;mxToolbar.prototype.addItem=function(t,e,i,n,r,l){var s=document.createElement(e!=null?"img":"button"),a=r||(l!=null?"mxToolbarMode":"mxToolbarItem");s.className=a,s.setAttribute("src",e),t!=null&&(e!=null?s.setAttribute("title",t):mxUtils.write(s,t)),this.container.appendChild(s),i!=null&&(mxEvent.addListener(s,"click",i),mxClient.IS_TOUCH&&mxEvent.addListener(s,"touchend",i));var o=mxUtils.bind(this,function(u){n!=null?s.setAttribute("src",e):s.style.backgroundColor=""});return mxEvent.addGestureListeners(s,mxUtils.bind(this,function(u){if(n!=null?s.setAttribute("src",n):s.style.backgroundColor="gray",l!=null){this.menu==null&&(this.menu=new mxPopupMenu,this.menu.init());var d=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),d!=s){this.currentImg=s,this.menu.factoryMethod=l;var p=new mxPoint(s.offsetLeft,s.offsetTop+s.offsetHeight);this.menu.popup(p.x,p.y,null,u),this.menu.isMenuShowing()&&(s.className=a+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),s.className=a,this.currentImg=null})}}}),null,o),mxEvent.addListener(s,"mouseout",o),s};mxToolbar.prototype.addCombo=function(t){var e=document.createElement("div");e.style.display="inline",e.className="mxToolbarComboContainer";var i=document.createElement("select");return i.className=t||"mxToolbarCombo",e.appendChild(i),this.container.appendChild(e),i};mxToolbar.prototype.addActionCombo=function(t,e){var i=document.createElement("select");return i.className=e||"mxToolbarCombo",this.addOption(i,t,null),mxEvent.addListener(i,"change",function(n){var r=i.options[i.selectedIndex];i.selectedIndex=0,r.funct!=null&&r.funct(n)}),this.container.appendChild(i),i};mxToolbar.prototype.addOption=function(t,e,i){var n=document.createElement("option");return mxUtils.writeln(n,e),typeof i=="function"?n.funct=i:n.setAttribute("value",i),t.appendChild(n),n};mxToolbar.prototype.addSwitchMode=function(t,e,i,n,r){var l=document.createElement("img");return l.initialClassName=r||"mxToolbarMode",l.className=l.initialClassName,l.setAttribute("src",e),l.altIcon=n,t!=null&&l.setAttribute("title",t),mxEvent.addListener(l,"click",mxUtils.bind(this,function(s){var a=this.selectedMode.altIcon;a!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",a)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=l),this.selectedMode=l;var a=l.altIcon;a!=null?(l.altIcon=l.getAttribute("src"),l.setAttribute("src",a)):l.className=l.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),i()})),this.container.appendChild(l),this.defaultMode==null&&(this.defaultMode=l,this.selectMode(l),i()),l};mxToolbar.prototype.addMode=function(t,e,i,n,r,l){l=l??!0;var s=document.createElement(e!=null?"img":"button");return s.initialClassName=r||"mxToolbarMode",s.className=s.initialClassName,s.setAttribute("src",e),s.altIcon=n,t!=null&&s.setAttribute("title",t),this.enabled&&l&&(mxEvent.addListener(s,"click",mxUtils.bind(this,function(a){this.selectMode(s,i),this.noReset=!1})),mxEvent.addListener(s,"dblclick",mxUtils.bind(this,function(a){this.selectMode(s,i),this.noReset=!0})),this.defaultMode==null&&(this.defaultMode=s,this.defaultFunction=i,this.selectMode(s,i))),this.container.appendChild(s),s};mxToolbar.prototype.selectMode=function(t,e){if(this.selectedMode!=t){if(this.selectedMode!=null){var i=this.selectedMode.altIcon;i!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",i)):this.selectedMode.className=this.selectedMode.initialClassName}this.selectedMode=t;var i=this.selectedMode.altIcon;i!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",i)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",e))}};mxToolbar.prototype.resetMode=function(t){(t||!this.noReset)&&this.selectedMode!=this.defaultMode&&this.selectMode(this.defaultMode,this.defaultFunction)};mxToolbar.prototype.addSeparator=function(t){return this.addItem(null,t,null)};mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)};mxToolbar.prototype.addLine=function(){var t=document.createElement("hr");t.style.marginRight="6px",t.setAttribute("size","1"),this.container.appendChild(t)};mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,this.menu!=null&&this.menu.destroy()};function mxUndoManager(t){this.size=t??100,this.clear()}mxUndoManager.prototype=new mxEventSource;mxUndoManager.prototype.constructor=mxUndoManager;mxUndoManager.prototype.size=null;mxUndoManager.prototype.history=null;mxUndoManager.prototype.indexOfNextAdd=0;mxUndoManager.prototype.isEmpty=function(){return this.history.length==0};mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject$1(mxEvent$1.CLEAR))};mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0};mxUndoManager.prototype.undo=function(){for(;this.indexOfNextAdd>0;){var t=this.history[--this.indexOfNextAdd];if(t.undo(),t.isSignificant()){this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",t));break}}};mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length};mxUndoManager.prototype.redo=function(){for(var t=this.history.length;this.indexOfNextAdd<t;){var e=this.history[this.indexOfNextAdd++];if(e.redo(),e.isSignificant()){this.fireEvent(new mxEventObject$1(mxEvent$1.REDO,"edit",e));break}}};mxUndoManager.prototype.undoableEditHappened=function(t){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(t),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject$1(mxEvent$1.ADD,"edit",t))};mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var t=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),e=0;e<t.length;e++)t[e].die()};function mxWindow$1(t,e,i,n,r,l,s,a,o,u){e!=null&&(s=s??!0,this.content=e,this.init(i,n,r,l,u),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(s),this.setTitle(t),(a==null||a)&&this.installMoveHandler(),o!=null&&o.parentNode!=null?o.parentNode.replaceChild(this.div,o):document.body.appendChild(this.div))}mxWindow$1.prototype=new mxEventSource;mxWindow$1.prototype.constructor=mxWindow$1;mxWindow$1.prototype.closeImage=mxClient$1.imageBasePath+"/close.gif";mxWindow$1.prototype.minimizeImage=mxClient$1.imageBasePath+"/minimize.gif";mxWindow$1.prototype.normalizeImage=mxClient$1.imageBasePath+"/normalize.gif";mxWindow$1.prototype.maximizeImage=mxClient$1.imageBasePath+"/maximize.gif";mxWindow$1.prototype.resizeImage=mxClient$1.imageBasePath+"/resize.gif";mxWindow$1.prototype.visible=!1;mxWindow$1.prototype.minimumSize=new mxRectangle$1(0,0,50,40);mxWindow$1.prototype.destroyOnClose=!0;mxWindow$1.prototype.contentHeightCorrection=document.documentMode==8||document.documentMode==7?6:2;mxWindow$1.prototype.title=null;mxWindow$1.prototype.content=null;mxWindow$1.prototype.init=function(t,e,i,n,r){r=r??"mxWindow",this.div=document.createElement("div"),this.div.className=r,this.div.style.left=t+"px",this.div.style.top=e+"px",this.table=document.createElement("table"),this.table.className=r,mxClient$1.IS_POINTER&&(this.div.style.touchAction="none"),i!=null&&(this.div.style.width=i+"px",this.table.style.width=i+"px"),n!=null&&(this.div.style.height=n+"px",this.table.style.height=n+"px");var l=document.createElement("tbody"),s=document.createElement("tr");this.title=document.createElement("td"),this.title.className=r+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),s.appendChild(this.title),l.appendChild(s),s=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=r+"Pane",document.documentMode==7&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=r+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),this.content.nodeName.toUpperCase()!="DIV"&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),s.appendChild(this.td),l.appendChild(s),this.table.appendChild(l),this.div.appendChild(this.table);var a=mxUtils$1.bind(this,function(o){this.activate()});mxEvent$1.addGestureListeners(this.title,a),mxEvent$1.addGestureListeners(this.table,a),this.hide()};mxWindow$1.prototype.setTitle=function(t){for(var e=this.title.firstChild;e!=null;){var i=e.nextSibling;e.nodeType==mxConstants$1.NODETYPE_TEXT&&e.parentNode.removeChild(e),e=i}mxUtils$1.write(this.title,t||""),this.title.appendChild(this.buttons)};mxWindow$1.prototype.setScrollable=function(t){(navigator.userAgent==null||navigator.userAgent.indexOf("Presto/2.5")<0)&&(t?this.contentWrapper.style.overflow="auto":this.contentWrapper.style.overflow="hidden")};mxWindow$1.prototype.activate=function(){if(mxWindow$1.activeWindow!=this){var t=mxUtils$1.getCurrentStyle(this.getElement()),e=t!=null?t.zIndex:3;if(mxWindow$1.activeWindow){var i=mxWindow$1.activeWindow.getElement();i!=null&&i.style!=null&&(i.style.zIndex=e)}var n=mxWindow$1.activeWindow;this.getElement().style.zIndex=parseInt(e)+1,mxWindow$1.activeWindow=this,this.fireEvent(new mxEventObject$1(mxEvent$1.ACTIVATE,"previousWindow",n))}};mxWindow$1.prototype.getElement=function(){return this.div};mxWindow$1.prototype.fit=function(){mxUtils$1.fit(this.div)};mxWindow$1.prototype.isResizable=function(){return this.resize!=null?this.resize.style.display!="none":!1};mxWindow$1.prototype.setResizable=function(t){if(t)if(this.resize==null){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="0px",this.resize.style.right="0px",this.resize.style.zIndex="2",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nwse-resize";var e=null,i=null,n=null,r=null,l=mxUtils$1.bind(this,function(o){this.activate(),e=mxEvent$1.getClientX(o),i=mxEvent$1.getClientY(o),n=this.div.offsetWidth,r=this.div.offsetHeight,mxEvent$1.addGestureListeners(document,null,s,a),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_START,"event",o)),mxEvent$1.consume(o)}),s=mxUtils$1.bind(this,function(o){if(e!=null&&i!=null){var u=mxEvent$1.getClientX(o)-e,d=mxEvent$1.getClientY(o)-i;this.setSize(n+u,r+d),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE,"event",o)),mxEvent$1.consume(o)}}),a=mxUtils$1.bind(this,function(o){e!=null&&i!=null&&(e=null,i=null,mxEvent$1.removeGestureListeners(document,null,s,a),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_END,"event",o)),mxEvent$1.consume(o))});mxEvent$1.addGestureListeners(this.resize,l,s,a),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else this.resize!=null&&(this.resize.style.display="none")};mxWindow$1.prototype.setSize=function(t,e){t=Math.max(this.minimumSize.width,t),e=Math.max(this.minimumSize.height,e),this.div.style.width=t+"px",this.div.style.height=e+"px",this.table.style.width=t+"px",this.table.style.height=e+"px",this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"};mxWindow$1.prototype.setMinimizable=function(t){this.minimizeImg.style.display=t?"":"none"};mxWindow$1.prototype.getMinimumSize=function(){return new mxRectangle$1(0,0,0,this.title.offsetHeight)};mxWindow$1.prototype.toggleMinimized=function(t){if(this.activate(),this.minimized)this.minimized=!1,this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=this.maxDisplay,this.div.style.height=this.height,this.table.style.height=this.height,this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject$1(mxEvent$1.NORMALIZE,"event",t));else{this.minimized=!0,this.minimizeImg.setAttribute("src",this.normalizeImage),this.minimizeImg.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",this.maxDisplay=this.maximize.style.display,this.maximize.style.display="none",this.height=this.table.style.height;var e=this.getMinimumSize();e.height>0&&(this.div.style.height=e.height+"px",this.table.style.height=e.height+"px"),e.width>0&&(this.div.style.width=e.width+"px",this.table.style.width=e.width+"px"),this.resize!=null&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject$1(mxEvent$1.MINIMIZE,"event",t))}};mxWindow$1.prototype.installMinimizeHandler=function(){this.minimizeImg=document.createElement("img"),this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.minimizeImg.style.cursor="pointer",this.minimizeImg.style.marginLeft="2px",this.minimizeImg.style.display="none",this.buttons.appendChild(this.minimizeImg),this.minimized=!1,this.maxDisplay=null,this.height=null;var t=mxUtils$1.bind(this,function(e){this.toggleMinimized(e),mxEvent$1.consume(e)});mxEvent$1.addGestureListeners(this.minimizeImg,t)};mxWindow$1.prototype.setMaximizable=function(t){this.maximize.style.display=t?"":"none"};mxWindow$1.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var t=!1,e=null,i=null,n=null,r=null,l=null,s=mxUtils$1.bind(this,function(a){if(this.activate(),this.maximize.style.display!="none"){if(t){t=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimizeImg.style.display=l,this.div.style.left=e+"px",this.div.style.top=i+"px",this.div.style.height=n,this.div.style.width=r;var u=mxUtils$1.getCurrentStyle(this.contentWrapper);(u.overflow=="auto"||this.resize!=null)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.table.style.height=n,this.table.style.width=r,this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject$1(mxEvent$1.NORMALIZE,"event",a))}else{t=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",l=this.minimizeImg.style.display,this.minimizeImg.style.display="none",e=parseInt(this.div.style.left),i=parseInt(this.div.style.top),n=this.table.style.height,r=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var o=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=o-2+"px",this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=o-2+"px",this.resize!=null&&(this.resize.style.visibility="hidden");var u=mxUtils$1.getCurrentStyle(this.contentWrapper);(u.overflow=="auto"||this.resize!=null)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject$1(mxEvent$1.MAXIMIZE,"event",a))}mxEvent$1.consume(a)}});mxEvent$1.addGestureListeners(this.maximize,s),mxEvent$1.addListener(this.title,"dblclick",s)};mxWindow$1.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent$1.addGestureListeners(this.title,mxUtils$1.bind(this,function(t){var e=mxEvent$1.getClientX(t),i=mxEvent$1.getClientY(t),n=this.getX(),r=this.getY(),l=mxUtils$1.bind(this,function(a){var o=mxEvent$1.getClientX(a)-e,u=mxEvent$1.getClientY(a)-i;this.setLocation(n+o,r+u),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE,"event",a)),mxEvent$1.consume(a)}),s=mxUtils$1.bind(this,function(a){mxEvent$1.removeGestureListeners(document,null,l,s),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_END,"event",a)),mxEvent$1.consume(a)});mxEvent$1.addGestureListeners(document,null,l,s),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_START,"event",t)),mxEvent$1.consume(t)})),mxClient$1.IS_POINTER&&(this.title.style.touchAction="none")};mxWindow$1.prototype.setLocation=function(t,e){this.div.style.left=t+"px",this.div.style.top=e+"px"};mxWindow$1.prototype.getX=function(){return parseInt(this.div.style.left)};mxWindow$1.prototype.getY=function(){return parseInt(this.div.style.top)};mxWindow$1.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent$1.addGestureListeners(this.closeImg,mxUtils$1.bind(this,function(t){this.fireEvent(new mxEventObject$1(mxEvent$1.CLOSE,"event",t)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent$1.consume(t)}))};mxWindow$1.prototype.setImage=function(t){this.image=document.createElement("img"),this.image.setAttribute("src",t),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)};mxWindow$1.prototype.setClosable=function(t){this.closeImg.style.display=t?"":"none"};mxWindow$1.prototype.isVisible=function(){return this.div!=null?this.div.style.display!="none":!1};mxWindow$1.prototype.setVisible=function(t){this.div!=null&&(this.isVisible()!=t?t?this.show():this.hide():this.fireEvent(new mxEventObject$1(t?mxEvent$1.SHOW:mxEvent$1.HIDE)))};mxWindow$1.prototype.show=function(){this.div.style.display="",this.activate();var t=mxUtils$1.getCurrentStyle(this.contentWrapper);(t.overflow=="auto"||this.resize!=null)&&this.contentWrapper.style.display!="none"&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject$1(mxEvent$1.SHOW))};mxWindow$1.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject$1(mxEvent$1.HIDE))};mxWindow$1.prototype.destroy=function(){this.fireEvent(new mxEventObject$1(mxEvent$1.DESTROY)),this.div!=null&&(mxEvent$1.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null};function mxXmlCanvas2D(t){mxAbstractCanvas2D.call(this),this.root=t,this.writeDefaults()}mxUtils$1.extend(mxXmlCanvas2D,mxAbstractCanvas2D);mxXmlCanvas2D.prototype.textEnabled=!0;mxXmlCanvas2D.prototype.compressed=!0;mxXmlCanvas2D.prototype.writeDefaults=function(){var t;t=this.createElement("fontfamily"),t.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(t),t=this.createElement("fontsize"),t.setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(t),t=this.createElement("shadowcolor"),t.setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(t),t=this.createElement("shadowalpha"),t.setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(t),t=this.createElement("shadowoffset"),t.setAttribute("dx",mxConstants.SHADOW_OFFSET_X),t.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(t)};mxXmlCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))};mxXmlCanvas2D.prototype.createElement=function(t){return this.root.ownerDocument.createElement(t)};mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))};mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))};mxXmlCanvas2D.prototype.scale=function(t){var e=this.createElement("scale");e.setAttribute("scale",t),this.root.appendChild(e)};mxXmlCanvas2D.prototype.translate=function(t,e){var i=this.createElement("translate");i.setAttribute("dx",this.format(t)),i.setAttribute("dy",this.format(e)),this.root.appendChild(i)};mxXmlCanvas2D.prototype.rotate=function(t,e,i,n,r){var l=this.createElement("rotate");(t!=0||e||i)&&(l.setAttribute("theta",this.format(t)),l.setAttribute("flipH",e?"1":"0"),l.setAttribute("flipV",i?"1":"0"),l.setAttribute("cx",this.format(n)),l.setAttribute("cy",this.format(r)),this.root.appendChild(l))};mxXmlCanvas2D.prototype.setAlpha=function(t){if(this.compressed){if(this.state.alpha==t)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var e=this.createElement("alpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setFillAlpha=function(t){if(this.compressed){if(this.state.fillAlpha==t)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var e=this.createElement("fillalpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setStrokeAlpha=function(t){if(this.compressed){if(this.state.strokeAlpha==t)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var e=this.createElement("strokealpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setFillColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fillColor==t)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var e=this.createElement("fillcolor");e.setAttribute("color",t??mxConstants.NONE),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setGradient=function(t,e,i,n,r,l,s,a,o){if(t!=null&&e!=null){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var u=this.createElement("gradient");u.setAttribute("c1",t),u.setAttribute("c2",e),u.setAttribute("x",this.format(i)),u.setAttribute("y",this.format(n)),u.setAttribute("w",this.format(r)),u.setAttribute("h",this.format(l)),s!=null&&u.setAttribute("direction",s),a!=null&&u.setAttribute("alpha1",a),o!=null&&u.setAttribute("alpha2",o),this.root.appendChild(u)}};mxXmlCanvas2D.prototype.setStrokeColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.strokeColor==t)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var e=this.createElement("strokecolor");e.setAttribute("color",t??mxConstants.NONE),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setStrokeWidth=function(t){if(this.compressed){if(this.state.strokeWidth==t)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var e=this.createElement("strokewidth");e.setAttribute("width",this.format(t)),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setDashed=function(t,e){if(this.compressed){if(this.state.dashed==t)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var i=this.createElement("dashed");i.setAttribute("dashed",t?"1":"0"),e!=null&&i.setAttribute("fixDash",e?"1":"0"),this.root.appendChild(i)};mxXmlCanvas2D.prototype.setDashPattern=function(t){if(this.compressed){if(this.state.dashPattern==t)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var e=this.createElement("dashpattern");e.setAttribute("pattern",t),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setLineCap=function(t){if(this.compressed){if(this.state.lineCap==t)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var e=this.createElement("linecap");e.setAttribute("cap",t),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setLineJoin=function(t){if(this.compressed){if(this.state.lineJoin==t)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var e=this.createElement("linejoin");e.setAttribute("join",t),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setMiterLimit=function(t){if(this.compressed){if(this.state.miterLimit==t)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var e=this.createElement("miterlimit");e.setAttribute("limit",t),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setFontColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontColor==t)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var e=this.createElement("fontcolor");e.setAttribute("color",t??mxConstants.NONE),this.root.appendChild(e)}};mxXmlCanvas2D.prototype.setFontBackgroundColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBackgroundColor==t)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var e=this.createElement("fontbackgroundcolor");e.setAttribute("color",t??mxConstants.NONE),this.root.appendChild(e)}};mxXmlCanvas2D.prototype.setFontBorderColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBorderColor==t)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var e=this.createElement("fontbordercolor");e.setAttribute("color",t??mxConstants.NONE),this.root.appendChild(e)}};mxXmlCanvas2D.prototype.setFontSize=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==t)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var e=this.createElement("fontsize");e.setAttribute("size",t),this.root.appendChild(e)}};mxXmlCanvas2D.prototype.setFontFamily=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==t)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var e=this.createElement("fontfamily");e.setAttribute("family",t),this.root.appendChild(e)}};mxXmlCanvas2D.prototype.setFontStyle=function(t){if(this.textEnabled){if(t==null&&(t=0),this.compressed){if(this.state.fontStyle==t)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var e=this.createElement("fontstyle");e.setAttribute("style",t),this.root.appendChild(e)}};mxXmlCanvas2D.prototype.setShadow=function(t){if(this.compressed){if(this.state.shadow==t)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var e=this.createElement("shadow");e.setAttribute("enabled",t?"1":"0"),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setShadowColor=function(t){if(this.compressed){if(t==mxConstants.NONE&&(t=null),this.state.shadowColor==t)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var e=this.createElement("shadowcolor");e.setAttribute("color",t??mxConstants.NONE),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setShadowAlpha=function(t){if(this.compressed){if(this.state.shadowAlpha==t)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var e=this.createElement("shadowalpha");e.setAttribute("alpha",t),this.root.appendChild(e)};mxXmlCanvas2D.prototype.setShadowOffset=function(t,e){if(this.compressed){if(this.state.shadowDx==t&&this.state.shadowDy==e)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var i=this.createElement("shadowoffset");i.setAttribute("dx",t),i.setAttribute("dy",e),this.root.appendChild(i)};mxXmlCanvas2D.prototype.rect=function(t,e,i,n){var r=this.createElement("rect");r.setAttribute("x",this.format(t)),r.setAttribute("y",this.format(e)),r.setAttribute("w",this.format(i)),r.setAttribute("h",this.format(n)),this.root.appendChild(r)};mxXmlCanvas2D.prototype.roundrect=function(t,e,i,n,r,l){var s=this.createElement("roundrect");s.setAttribute("x",this.format(t)),s.setAttribute("y",this.format(e)),s.setAttribute("w",this.format(i)),s.setAttribute("h",this.format(n)),s.setAttribute("dx",this.format(r)),s.setAttribute("dy",this.format(l)),this.root.appendChild(s)};mxXmlCanvas2D.prototype.ellipse=function(t,e,i,n){var r=this.createElement("ellipse");r.setAttribute("x",this.format(t)),r.setAttribute("y",this.format(e)),r.setAttribute("w",this.format(i)),r.setAttribute("h",this.format(n)),this.root.appendChild(r)};mxXmlCanvas2D.prototype.image=function(t,e,i,n,r,l,s,a){r=this.converter.convert(r);var o=this.createElement("image");o.setAttribute("x",this.format(t)),o.setAttribute("y",this.format(e)),o.setAttribute("w",this.format(i)),o.setAttribute("h",this.format(n)),o.setAttribute("src",r),o.setAttribute("aspect",l?"1":"0"),o.setAttribute("flipH",s?"1":"0"),o.setAttribute("flipV",a?"1":"0"),this.root.appendChild(o)};mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastX=0,this.lastY=0};mxXmlCanvas2D.prototype.moveTo=function(t,e){var i=this.createElement("move");i.setAttribute("x",this.format(t)),i.setAttribute("y",this.format(e)),this.root.appendChild(i),this.lastX=t,this.lastY=e};mxXmlCanvas2D.prototype.lineTo=function(t,e){var i=this.createElement("line");i.setAttribute("x",this.format(t)),i.setAttribute("y",this.format(e)),this.root.appendChild(i),this.lastX=t,this.lastY=e};mxXmlCanvas2D.prototype.quadTo=function(t,e,i,n){var r=this.createElement("quad");r.setAttribute("x1",this.format(t)),r.setAttribute("y1",this.format(e)),r.setAttribute("x2",this.format(i)),r.setAttribute("y2",this.format(n)),this.root.appendChild(r),this.lastX=i,this.lastY=n};mxXmlCanvas2D.prototype.curveTo=function(t,e,i,n,r,l){var s=this.createElement("curve");s.setAttribute("x1",this.format(t)),s.setAttribute("y1",this.format(e)),s.setAttribute("x2",this.format(i)),s.setAttribute("y2",this.format(n)),s.setAttribute("x3",this.format(r)),s.setAttribute("y3",this.format(l)),this.root.appendChild(s),this.lastX=r,this.lastY=l};mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))};mxXmlCanvas2D.prototype.text=function(t,e,i,n,r,l,s,a,o,u,d,p,c){if(this.textEnabled&&r!=null){mxUtils$1.isNode(r)&&(r=mxUtils$1.getOuterHtml(r));var g=this.createElement("text");g.setAttribute("x",this.format(t)),g.setAttribute("y",this.format(e)),g.setAttribute("w",this.format(i)),g.setAttribute("h",this.format(n)),g.setAttribute("str",r),l!=null&&g.setAttribute("align",l),s!=null&&g.setAttribute("valign",s),g.setAttribute("wrap",a?"1":"0"),o==null&&(o=""),g.setAttribute("format",o),u!=null&&g.setAttribute("overflow",u),d!=null&&g.setAttribute("clip",d?"1":"0"),p!=null&&g.setAttribute("rotation",p),c!=null&&g.setAttribute("dir",c),this.root.appendChild(g)}};mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))};mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))};mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))};function mxXmlRequest$1(t,e,i,n,r,l){this.url=t,this.params=e,this.method=i||"POST",this.async=n??!0,this.username=r,this.password=l}mxXmlRequest$1.prototype.url=null;mxXmlRequest$1.prototype.params=null;mxXmlRequest$1.prototype.method=null;mxXmlRequest$1.prototype.async=null;mxXmlRequest$1.prototype.binary=!1;mxXmlRequest$1.prototype.withCredentials=!1;mxXmlRequest$1.prototype.username=null;mxXmlRequest$1.prototype.password=null;mxXmlRequest$1.prototype.request=null;mxXmlRequest$1.prototype.decodeSimulateValues=!1;mxXmlRequest$1.prototype.acceptResponse=!0;mxXmlRequest$1.prototype.isBinary=function(){return this.binary};mxXmlRequest$1.prototype.setBinary=function(t){this.binary=t};mxXmlRequest$1.prototype.getText=function(){return this.request.responseText};mxXmlRequest$1.prototype.isReady=function(){return this.request.readyState==4};mxXmlRequest$1.prototype.getDocumentElement=function(){var t=this.getXml();return t!=null?t.documentElement:null};mxXmlRequest$1.prototype.getXml=function(){var t=this.request.responseXML;return(document.documentMode>=9||t==null||t.documentElement==null)&&(t=mxUtils.parseXml(this.request.responseText)),t};mxXmlRequest$1.prototype.getStatus=function(){return this.request!=null?this.request.status:null};mxXmlRequest$1.prototype.create=function(){if(window.XMLHttpRequest)return function(){var t=new XMLHttpRequest;return this.isBinary()&&t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),t};if(typeof ActiveXObject<"u")return function(){return new ActiveXObject("Microsoft.XMLHTTP")}}();mxXmlRequest$1.prototype.send=function(t,e,i,n){this.request=this.create(),this.request!=null&&(t!=null&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&this.acceptResponse&&(this.acceptResponse=!1,t(this),this.request.onreadystatechange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),e!=null&&(this.request.onerror=mxUtils.bind(this,function(r){this.acceptResponse&&(this.acceptResponse=!1,e(this,r))})),(document.documentMode==null||document.documentMode>9)&&window.XMLHttpRequest&&i!=null&&n!=null&&(this.request.timeout=i,this.request.ontimeout=n),this.request.send(this.params))};mxXmlRequest$1.prototype.setRequestHeaders=function(t,e){e!=null&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")};mxXmlRequest$1.prototype.simulate=function(t,e){t=t||document;var i=null;t==document&&(i=window.onbeforeunload,window.onbeforeunload=null);var n=t.createElement("form");n.setAttribute("method",this.method),n.setAttribute("action",this.url),e!=null&&n.setAttribute("target",e),n.style.display="none",n.style.visibility="hidden";for(var r=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),l=0;l<r.length;l++){var s=r[l].indexOf("=");if(s>0){var a=r[l].substring(0,s),o=r[l].substring(s+1);this.decodeSimulateValues&&(o=decodeURIComponent(o));var u=t.createElement("textarea");u.setAttribute("wrap","off"),u.setAttribute("name",a),mxUtils.write(u,o),n.appendChild(u)}}t.body.appendChild(n),n.submit(),n.parentNode!=null&&n.parentNode.removeChild(n),i!=null&&(window.onbeforeunload=i)};function mxCellOverlay$1(t,e,i,n,r,l){this.image=t,this.tooltip=e,this.align=i??this.align,this.verticalAlign=n??this.verticalAlign,this.offset=r??new mxPoint,this.cursor=l??"help"}mxCellOverlay$1.prototype=new mxEventSource;mxCellOverlay$1.prototype.constructor=mxCellOverlay$1;mxCellOverlay$1.prototype.image=null;mxCellOverlay$1.prototype.tooltip=null;mxCellOverlay$1.prototype.align=mxConstants$1.ALIGN_RIGHT;mxCellOverlay$1.prototype.verticalAlign=mxConstants$1.ALIGN_BOTTOM;mxCellOverlay$1.prototype.offset=null;mxCellOverlay$1.prototype.cursor=null;mxCellOverlay$1.prototype.defaultOverlap=.5;mxCellOverlay$1.prototype.getBounds=function(t){var e=t.view.graph.getModel().isEdge(t.cell),i=t.view.scale,n=null,r=this.image.width,l=this.image.height;if(e){var s=t.absolutePoints;if(s.length%2==1)n=s[Math.floor(s.length/2)];else{var a=s.length/2,o=s[a-1],u=s[a];n=new mxPoint(o.x+(u.x-o.x)/2,o.y+(u.y-o.y)/2)}}else n=new mxPoint,this.align==mxConstants$1.ALIGN_LEFT?n.x=t.x:this.align==mxConstants$1.ALIGN_CENTER?n.x=t.x+t.width/2:n.x=t.x+t.width,this.verticalAlign==mxConstants$1.ALIGN_TOP?n.y=t.y:this.verticalAlign==mxConstants$1.ALIGN_MIDDLE?n.y=t.y+t.height/2:n.y=t.y+t.height;return new mxRectangle(Math.round(n.x-(r*this.defaultOverlap-this.offset.x)*i),Math.round(n.y-(l*this.defaultOverlap-this.offset.y)*i),r*i,l*i)};mxCellOverlay$1.prototype.toString=function(){return this.tooltip};function mxCellStatePreview$1(t){this.deltas=new mxDictionary$1,this.graph=t}mxCellStatePreview$1.prototype.graph=null;mxCellStatePreview$1.prototype.deltas=null;mxCellStatePreview$1.prototype.count=0;mxCellStatePreview$1.prototype.isEmpty=function(){return this.count==0};mxCellStatePreview$1.prototype.moveState=function(t,e,i,n,r){n=n??!0,r=r??!0;var l=this.deltas.get(t.cell);return l==null?(l={point:new mxPoint$1(e,i),state:t},this.deltas.put(t.cell,l),this.count++):n?(l.point.x+=e,l.point.y+=i):(l.point.x=e,l.point.y=i),r&&this.addEdges(t),l.point};mxCellStatePreview$1.prototype.show=function(t){this.deltas.visit(mxUtils$1.bind(this,function(e,i){this.translateState(i.state,i.point.x,i.point.y)})),this.deltas.visit(mxUtils$1.bind(this,function(e,i){this.revalidateState(i.state,i.point.x,i.point.y,t)}))};mxCellStatePreview$1.prototype.translateState=function(t,e,i){if(t!=null){var n=this.graph.getModel();if(n.isVertex(t.cell)){t.view.updateCellState(t);var r=n.getGeometry(t.cell);(e!=0||i!=0)&&r!=null&&(!r.relative||this.deltas.get(t.cell)!=null)&&(t.x+=e,t.y+=i)}for(var l=n.getChildCount(t.cell),s=0;s<l;s++)this.translateState(t.view.getState(n.getChildAt(t.cell,s)),e,i)}};mxCellStatePreview$1.prototype.revalidateState=function(t,e,i,n){if(t!=null){var r=this.graph.getModel();r.isEdge(t.cell)&&t.view.updateCellState(t);var l=this.graph.getCellGeometry(t.cell),s=t.view.getState(r.getParent(t.cell));(e!=0||i!=0)&&l!=null&&l.relative&&r.isVertex(t.cell)&&(s==null||r.isVertex(s.cell)||this.deltas.get(t.cell)!=null)&&(t.x+=e,t.y+=i),this.graph.cellRenderer.redraw(t),n!=null&&n(t);for(var a=r.getChildCount(t.cell),o=0;o<a;o++)this.revalidateState(this.graph.view.getState(r.getChildAt(t.cell,o)),e,i,n)}};mxCellStatePreview$1.prototype.addEdges=function(t){for(var e=this.graph.getModel(),i=e.getEdgeCount(t.cell),n=0;n<i;n++){var r=t.view.getState(e.getEdgeAt(t.cell,n));r!=null&&this.moveState(r,0,0)}};function mxLayoutManager(t){this.undoHandler=mxUtils$1.bind(this,function(e,i){this.isEnabled()&&this.beforeUndo(i.getProperty("edit"))}),this.moveHandler=mxUtils$1.bind(this,function(e,i){this.isEnabled()&&this.cellsMoved(i.getProperty("cells"),i.getProperty("event"))}),this.resizeHandler=mxUtils$1.bind(this,function(e,i){this.isEnabled()&&this.cellsResized(i.getProperty("cells"),i.getProperty("bounds"),i.getProperty("previous"))}),this.setGraph(t)}mxLayoutManager.prototype=new mxEventSource;mxLayoutManager.prototype.constructor=mxLayoutManager;mxLayoutManager.prototype.graph=null;mxLayoutManager.prototype.bubbling=!0;mxLayoutManager.prototype.enabled=!0;mxLayoutManager.prototype.undoHandler=null;mxLayoutManager.prototype.moveHandler=null;mxLayoutManager.prototype.resizeHandler=null;mxLayoutManager.prototype.isEnabled=function(){return this.enabled};mxLayoutManager.prototype.setEnabled=function(t){this.enabled=t};mxLayoutManager.prototype.isBubbling=function(){return this.bubbling};mxLayoutManager.prototype.setBubbling=function(t){this.bubbling=t};mxLayoutManager.prototype.getGraph=function(){return this.graph};mxLayoutManager.prototype.setGraph=function(t){if(this.graph!=null){var e=this.graph.getModel();e.removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)}if(this.graph=t,this.graph!=null){var e=this.graph.getModel();e.addListener(mxEvent$1.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent$1.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent$1.RESIZE_CELLS,this.resizeHandler)}};mxLayoutManager.prototype.hasLayout=function(t){return this.getLayout(t,mxEvent$1.LAYOUT_CELLS)!=null};mxLayoutManager.prototype.getLayout=function(t,e){return null};mxLayoutManager.prototype.beforeUndo=function(t){this.executeLayoutForCells(this.getCellsForChanges(t.changes))};mxLayoutManager.prototype.cellsMoved=function(t,e){if(t!=null&&e!=null)for(var i=mxUtils$1.convertPoint(this.getGraph().container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)),n=this.getGraph().getModel(),r=0;r<t.length;r++){var l=this.getLayout(n.getParent(t[r]),mxEvent$1.MOVE_CELLS);l!=null&&l.moveCell(t[r],i.x,i.y)}};mxLayoutManager.prototype.cellsResized=function(t,e,i){if(t!=null&&e!=null)for(var n=this.getGraph().getModel(),r=0;r<t.length;r++){var l=this.getLayout(n.getParent(t[r]),mxEvent$1.RESIZE_CELLS);l!=null&&l.resizeCell(t[r],e[r],i[r])}};mxLayoutManager.prototype.getCellsForChanges=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n instanceof mxRootChange)return[];e=e.concat(this.getCellsForChange(n))}return e};mxLayoutManager.prototype.getCellsForChange=function(t){return t instanceof mxChildChange$1?this.addCellsWithLayout(t.child,this.addCellsWithLayout(t.previous)):t instanceof mxValueChange$1||t instanceof mxTerminalChange$1||t instanceof mxGeometryChange$1||t instanceof mxVisibleChange||t instanceof mxStyleChange$1?this.addCellsWithLayout(t.cell):[]};mxLayoutManager.prototype.addCellsWithLayout=function(t,e){return this.addDescendantsWithLayout(t,this.addAncestorsWithLayout(t,e))};mxLayoutManager.prototype.addAncestorsWithLayout=function(t,e){if(e=e??[],t!=null&&(this.hasLayout(t)&&e.push(t),this.isBubbling())){var i=this.getGraph().getModel();this.addAncestorsWithLayout(i.getParent(t),e)}return e};mxLayoutManager.prototype.addDescendantsWithLayout=function(t,e){if(e=e??[],t!=null&&this.hasLayout(t))for(var i=this.getGraph().getModel(),n=0;n<i.getChildCount(t);n++){var r=i.getChildAt(t,n);this.hasLayout(r)&&(e.push(r),this.addDescendantsWithLayout(r,e))}return e};mxLayoutManager.prototype.executeLayoutForCells=function(t){var e=this.getGraph().getModel();e.beginUpdate();try{var i=mxUtils$1.sortCells(t,!1);this.layoutCells(i,!0),this.layoutCells(i.reverse(),!1)}finally{e.endUpdate()}};mxLayoutManager.prototype.layoutCells=function(t,e){if(t.length>0){var i=this.getGraph().getModel();i.beginUpdate();try{for(var n=null,r=0;r<t.length;r++)t[r]!=i.getRoot()&&t[r]!=n&&(this.executeLayout(t[r],e),n=t[r]);this.fireEvent(new mxEventObject$1(mxEvent$1.LAYOUT_CELLS,"cells",t))}finally{i.endUpdate()}}};mxLayoutManager.prototype.executeLayout=function(t,e){var i=this.getLayout(t,e?mxEvent$1.BEGIN_UPDATE:mxEvent$1.END_UPDATE);i!=null&&i.execute(t)};mxLayoutManager.prototype.destroy=function(){this.setGraph(null)};function mxMultiplicity(t,e,i,n,r,l,s,a,o,u){this.source=t,this.type=e,this.attr=i,this.value=n,this.min=r??0,this.max=l??"n",this.validNeighbors=s,this.countError=mxResources$1.get(a)||a,this.typeError=mxResources$1.get(o)||o,this.validNeighborsAllowed=u??!0}mxMultiplicity.prototype.type=null;mxMultiplicity.prototype.attr=null;mxMultiplicity.prototype.value=null;mxMultiplicity.prototype.source=null;mxMultiplicity.prototype.min=null;mxMultiplicity.prototype.max=null;mxMultiplicity.prototype.validNeighbors=null;mxMultiplicity.prototype.validNeighborsAllowed=!0;mxMultiplicity.prototype.countError=null;mxMultiplicity.prototype.typeError=null;mxMultiplicity.prototype.check=function(t,e,i,n,r,l){var s="";if((this.source&&this.checkTerminal(t,i,e)||!this.source&&this.checkTerminal(t,n,e))&&(this.countError!=null&&(this.source&&(this.max==0||r>=this.max)||!this.source&&(this.max==0||l>=this.max))&&(s+=this.countError+`
`),this.validNeighbors!=null&&this.typeError!=null&&this.validNeighbors.length>0)){var a=this.checkNeighbors(t,e,i,n);a||(s+=this.typeError+`
`)}return s.length>0?s:null};mxMultiplicity.prototype.checkNeighbors=function(t,e,i,n){for(var r=t.model.getValue(i),l=t.model.getValue(n),s=!this.validNeighborsAllowed,a=this.validNeighbors,o=0;o<a.length;o++)if(this.source&&this.checkType(t,l,a[o])){s=this.validNeighborsAllowed;break}else if(!this.source&&this.checkType(t,r,a[o])){s=this.validNeighborsAllowed;break}return s};mxMultiplicity.prototype.checkTerminal=function(t,e,i){var n=t.model.getValue(e);return this.checkType(t,n,this.type,this.attr,this.value)};mxMultiplicity.prototype.checkType=function(t,e,i,n,r){return e!=null?isNaN(e.nodeType)?e==i:mxUtils$1.isNode(e,i,n,r):!1};const svgDoctype='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',createSvgImage=function(t,e,i,n,r){var l=unescape(encodeURIComponent(svgDoctype+'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t+'px" height="'+e+'px" version="1.1">'+i+"</svg>"));return new mxImage("data:image/svg+xml;base64,"+btoa(l),t,e)},HoverIcons$2=function(t){mxEventSource.call(this),this.graph=t,this.init()};mxUtils$1.extend(HoverIcons$2,mxEventSource);HoverIcons$2.prototype.arrowSpacing=2;HoverIcons$2.prototype.updateDelay=500;HoverIcons$2.prototype.activationDelay=140;HoverIcons$2.prototype.currentState=null;HoverIcons$2.prototype.activeArrow=null;HoverIcons$2.prototype.inactiveOpacity=15;HoverIcons$2.prototype.cssCursor="copy";HoverIcons$2.prototype.checkCollisions=!0;HoverIcons$2.prototype.arrowFill="#29b6f2";HoverIcons$2.prototype.triangleUp=mxClient$1.IS_SVG?createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons$2.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14);HoverIcons$2.prototype.triangleRight=mxClient$1.IS_SVG?createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons$2.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26);HoverIcons$2.prototype.triangleDown=mxClient$1.IS_SVG?createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons$2.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14);HoverIcons$2.prototype.triangleLeft=mxClient$1.IS_SVG?createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons$2.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26);HoverIcons$2.prototype.roundDrop=mxClient$1.IS_SVG?createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons$2.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26);HoverIcons$2.prototype.refreshTarget=new mxImage(mxClient$1.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38);HoverIcons$2.prototype.tolerance=mxClient$1.IS_TOUCH?6:0;HoverIcons$2.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip"),mxConstants.DIRECTION_NORTH),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip"),mxConstants.DIRECTION_EAST),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip"),mxConstants.DIRECTION_SOUTH),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip"),mxConstants.DIRECTION_WEST),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils$1.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils$1.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,this.resetHandler),mxEvent.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils$1.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils$1.bind(this,function(i){i.relatedTarget!=null&&mxEvent.getSource(i)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent.START_EDITING,mxUtils$1.bind(this,function(i){this.reset()}));var t=this.graph.click;this.graph.click=mxUtils$1.bind(this,function(i){t.apply(this.graph,arguments),this.currentState!=null&&!this.graph.isCellSelected(this.currentState.cell)&&mxEvent.isTouchEvent(i.getEvent())&&!this.graph.model.isVertex(i.getCell())&&this.reset()});var e=!1;this.graph.addMouseListener({mouseDown:mxUtils$1.bind(this,function(i,n){e=!1;var r=n.getEvent();if(this.isResetEvent(r))this.reset();else if(!this.isActive()){var l=this.getState(n.getState());(l!=null||!mxEvent.isTouchEvent(r))&&this.update(l)}this.setDisplay("none")}),mouseMove:mxUtils$1.bind(this,function(i,n){var r=n.getEvent();this.isResetEvent(r)?this.reset():!this.graph.isMouseDown&&!mxEvent.isTouchEvent(r)&&this.update(this.getState(n.getState()),n.getGraphX(),n.getGraphY()),this.graph.connectionHandler!=null&&this.graph.connectionHandler.shape!=null&&(e=!0)}),mouseUp:mxUtils$1.bind(this,function(i,n){var r=n.getEvent();mxUtils$1.convertPoint(this.graph.container,mxEvent.getClientX(r),mxEvent.getClientY(r)),this.isResetEvent(r)?this.reset():this.isActive()&&!e&&this.mouseDownPoint!=null?this.click(this.currentState,this.getDirection(),n):this.isActive()?this.graph.getSelectionCount()!=1||!this.graph.model.isEdge(this.graph.getSelectionCell())?this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(n.getGraphX(),n.getGraphY())))):this.reset():mxEvent.isTouchEvent(r)||this.bbox!=null&&mxUtils$1.contains(this.bbox,n.getGraphX(),n.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(r)||this.reset(),e=!1,this.resetActiveArrow()})})};HoverIcons$2.prototype.isResetEvent=function(t,e){return mxEvent.isAltDown(t)||this.activeArrow==null&&mxEvent.isShiftDown(t)||mxEvent.isPopupTrigger(t)&&!this.graph.isCloneEvent(t)};HoverIcons$2.prototype.createArrow=function(t,e,i){var n=null;return n=mxUtils$1.createImage(t.src),n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.padding=this.tolerance+"px",e!=null&&n.setAttribute("title",e),n.style.position="absolute",n.style.cursor=this.cssCursor,mxEvent.addGestureListeners(n,mxUtils$1.bind(this,function(r){this.currentState!=null&&!this.isResetEvent(r)&&(this.mouseDownPoint=mxUtils$1.convertPoint(this.graph.container,mxEvent.getClientX(r),mxEvent.getClientY(r)),this.drag(r,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=n,this.setDisplay("none"),mxEvent.consume(r))})),mxEvent.redirectMouseEvents(n,this.graph,this.currentState),mxEvent.addListener(n,"mouseenter",mxUtils$1.bind(this,function(r){mxEvent.isMouseEvent(r)&&(this.activeArrow!=null&&this.activeArrow!=n&&mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils$1.setOpacity(n,100),this.activeArrow=n,this.fireEvent(new mxEventObject("focus","arrow",n,"direction",i,"event",r)))})),mxEvent.addListener(n,"mouseleave",mxUtils$1.bind(this,function(r){mxEvent.isMouseEvent(r)&&this.fireEvent(new mxEventObject("blur","arrow",n,"direction",i,"event",r)),this.graph.isMouseDown||this.resetActiveArrow()})),n};HoverIcons$2.prototype.resetActiveArrow=function(){this.activeArrow!=null&&(mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)};HoverIcons$2.prototype.getDirection=function(){var t=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?t=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?t=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(t=mxConstants.DIRECTION_WEST),t};HoverIcons$2.prototype.visitNodes=function(t){for(var e=0;e<this.elts.length;e++)this.elts[e]!=null&&t(this.elts[e])};HoverIcons$2.prototype.removeNodes=function(){this.visitNodes(function(t){t.parentNode!=null&&t.parentNode.removeChild(t)})};HoverIcons$2.prototype.setDisplay=function(t){this.visitNodes(function(e){e.style.display=t})};HoverIcons$2.prototype.isActive=function(){return this.activeArrow!=null&&this.currentState!=null};HoverIcons$2.prototype.drag=function(t,e,i){if(this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),this.currentState!=null){this.graph.connectionHandler.start(this.currentState,e,i),this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0;var n=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);n!=null&&n.setHandlesVisible(!1);var r=this.graph.connectionHandler.edgeState;if(t!=null&&mxEvent.isShiftDown(t)&&mxEvent.isControlDown(t)&&r!=null&&mxUtils$1.getValue(r.style,mxConstants.STYLE_EDGE,null)==="orthogonalEdgeStyle"){var l=this.getDirection();r.cell.style=mxUtils$1.setStyle(r.cell.style,"sourcePortConstraint",l),r.style.sourcePortConstraint=l}}};HoverIcons$2.prototype.getStateAt=function(t,e,i){return this.graph.view.getState(this.graph.getCellAt(e,i))};HoverIcons$2.prototype.click=function(t,e,i){var n=i.getEvent(),r=i.getGraphX(),l=i.getGraphY(),s=this.getStateAt(t,r,l);s!=null&&this.graph.model.isEdge(s.cell)&&!this.graph.isCloneEvent(n)&&(s.getVisibleTerminalState(!0)==t||s.getVisibleTerminalState(!1)==t)?(this.graph.setSelectionCell(s.cell),this.reset()):t!=null&&this.execute(t,e,i),i.consume()};HoverIcons$2.prototype.execute=function(t,e,i){var n=i.getEvent();this.graph.selectCellsForConnectVertex(this.graph.connectVertex(t.cell,e,this.graph.defaultEdgeLength,n,this.graph.isCloneEvent(n),this.graph.isCloneEvent(n)),n,this)};HoverIcons$2.prototype.reset=function(t){t=t??!0,t&&this.updateThread!=null&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null,this.fireEvent(new mxEventObject("reset"))};HoverIcons$2.prototype.repaint=function(){if(this.bbox=null,this.currentState!=null){if(this.currentState=this.getState(this.currentState),this.currentState!=null&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var t=mxRectangle.fromRectangle(this.currentState);this.currentState.shape!=null&&this.currentState.shape.boundingBox!=null&&(t=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)),t.grow(this.graph.tolerance),t.grow(this.arrowSpacing);var e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);this.graph.isTableRow(this.currentState.cell)&&(e=this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell)));var i=null;e!=null&&(t.x-=e.horizontalOffset/2,t.y-=e.verticalOffset/2,t.width+=e.horizontalOffset,t.height+=e.verticalOffset,e.rotationShape!=null&&e.rotationShape.node!=null&&e.rotationShape.node.style.visibility!="hidden"&&e.rotationShape.node.style.display!="none"&&e.rotationShape.boundingBox!=null&&(i=e.rotationShape.boundingBox));var n=mxUtils$1.bind(this,function(d,p,c){if(i!=null){var g=new mxRectangle(p,c,d.clientWidth,d.clientHeight);mxUtils$1.intersects(g,i)&&(d==this.arrowUp?c-=g.y+g.height-i.y:d==this.arrowRight?p+=i.x+i.width-g.x:d==this.arrowDown?c+=i.y+i.height-g.y:d==this.arrowLeft&&(p-=g.x+g.width-i.x))}d.style.left=p+"px",d.style.top=c+"px",mxUtils$1.setOpacity(d,this.inactiveOpacity)});if(n(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(t.y-this.triangleUp.height-this.tolerance)),n(this.arrowRight,Math.round(t.x+t.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),n(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(t.y+t.height-this.tolerance)),n(this.arrowLeft,Math.round(t.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions){var r=this.graph.getCellAt(t.x+t.width+this.triangleRight.width/2,this.currentState.getCenterY()),l=this.graph.getCellAt(t.x-this.triangleLeft.width/2,this.currentState.getCenterY()),s=this.graph.getCellAt(this.currentState.getCenterX(),t.y-this.triangleUp.height/2),a=this.graph.getCellAt(this.currentState.getCenterX(),t.y+t.height+this.triangleDown.height/2);r!=null&&r==l&&l==s&&s==a&&(r=null,l=null,s=null,a=null);var o=this.graph.getCellGeometry(this.currentState.cell),u=mxUtils$1.bind(this,function(d,p){var c=this.graph.model.isVertex(d)&&this.graph.getCellGeometry(d);d!=null&&!this.graph.model.isAncestor(d,this.currentState.cell)&&!this.graph.isSwimlane(d)&&(c==null||o==null||c.height<3*o.height&&c.width<3*o.width)?p.style.visibility="hidden":p.style.visibility="visible"});u(r,this.arrowRight),u(l,this.arrowLeft),u(s,this.arrowUp),u(a,this.arrowDown)}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();this.currentState!=null&&(this.bbox=this.computeBoundingBox(),this.bbox!=null&&this.bbox.grow(10))}};HoverIcons$2.prototype.computeBoundingBox=function(){var t=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(e){if(e.parentNode!=null){var i=new mxRectangle(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);t==null?t=i:t.add(i)}}),t};HoverIcons$2.prototype.getState=function(t){if(t!=null){var e=t.cell;if(!this.graph.getModel().contains(e))t=null;else{if(this.graph.getModel().isVertex(e)&&!this.graph.isCellConnectable(e)){var i=this.graph.getModel().getParent(e);this.graph.getModel().isVertex(i)&&this.graph.isCellConnectable(i)&&(e=i)}(this.graph.isCellLocked(e)||this.graph.model.isEdge(e))&&(e=null),t=this.graph.view.getState(e),t!=null&&t.style==null&&(t=null)}}return t};HoverIcons$2.prototype.update=function(t,e,i){if(!this.graph.connectionArrowsEnabled||this.graph.freehand!=null&&this.graph.freehand.isDrawing()||t!=null&&mxUtils$1.getValue(t.style,"allowArrows","1")=="0")this.reset();else{t!=null&&t.cell.geometry!=null&&t.cell.geometry.relative&&this.graph.model.isEdge(t.cell.parent)&&(t=null);var n=null;this.prev!=t||this.isActive()?(this.startTime=new Date().getTime(),this.prev=t,n=0,this.updateThread!=null&&window.clearTimeout(this.updateThread),t!=null&&(this.updateThread=window.setTimeout(mxUtils$1.bind(this,function(){!this.isActive()&&!this.graph.isMouseDown&&!this.graph.panningHandler.isActive()&&(this.prev=t,this.update(t,e,i))}),this.updateDelay+10))):this.startTime!=null&&(n=new Date().getTime()-this.startTime),this.setDisplay(""),this.currentState!=null&&this.currentState!=t&&n<this.activationDelay&&this.bbox!=null&&!mxUtils$1.contains(this.bbox,e,i)?this.reset(!1):(this.currentState!=null||n>this.activationDelay)&&this.currentState!=t&&(n>this.updateDelay&&t!=null||this.bbox==null||e==null||i==null||!mxUtils$1.contains(this.bbox,e,i))&&(t!=null&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(t),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=t&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}};HoverIcons$2.prototype.setCurrentState=function(t){t.style.portConstraint!="eastwest"&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=t};function mxOutline(t,e){this.source=t,e!=null&&this.init(e)}mxOutline.prototype.source=null;mxOutline.prototype.container=null;mxOutline.prototype.enabled=!0;mxOutline.prototype.suspended=!1;mxOutline.prototype.border=14;mxOutline.prototype.opacity=mxClient$1.IS_IE11?.9:.7;mxOutline.prototype.init=function(t){this.container=t,this.updateHandler=mxUtils$1.bind(this,function(i,n){this.update(!0)}),this.source.getModel().addListener(mxEvent$1.CHANGE,this.updateHandler),this.source.addListener(mxEvent$1.REFRESH,this.updateHandler);var e=this.source.getView();e.addListener(mxEvent$1.UP,this.updateHandler),e.addListener(mxEvent$1.DOWN,this.updateHandler),e.addListener(mxEvent$1.SCALE,this.updateHandler),e.addListener(mxEvent$1.TRANSLATE,this.updateHandler),e.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.updateHandler),this.scrollHandler=mxUtils$1.bind(this,function(i,n){this.update(!1)}),mxEvent$1.addListener(this.source.container,"scroll",this.scrollHandler),this.source.addListener(mxEvent$1.PAN,this.scrollHandler),this.update(!0)};mxOutline.prototype.isEnabled=function(){return this.enabled};mxOutline.prototype.setEnabled=function(t){this.enabled=t};mxOutline.prototype.isSuspended=function(){return this.suspended};mxOutline.prototype.setSuspended=function(t){this.suspended=t,this.update(!0)};mxOutline.prototype.isScrolling=function(){return this.source.useScrollbarsForPanning&&mxUtils$1.hasScrollbars(this.source.container)};mxOutline.prototype.createSvg=function(){var t=document.createElementNS(mxConstants$1.NS_SVG,"svg");return t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.display="block",t.style.padding=this.border+"px",t.style.boxSizing="border-box",t.style.overflow="visible",t.style.cursor="default",t.setAttribute("shape-rendering","optimizeSpeed"),t.setAttribute("image-rendering","optimizeSpeed"),t};mxOutline.prototype.addGestureListeners=function(t){var e=null,i=0,n=0,r=1,l=mxUtils$1.bind(this,function(o){if(this.isEnabled()){e=new mxPoint$1(mxEvent$1.getClientX(o),mxEvent$1.getClientY(o));var u=t.clientWidth-2*this.border,d=t.clientHeight-2*this.border,p=this.getViewBox();if(r=Math.max(p.width/u,p.height/d),mxEvent$1.getSource(o)!=this.viewport)if(this.isScrolling()){var c=u-p.width/r,g=d-p.height/r,x=this.svg.getBoundingClientRect();this.source.container.scrollLeft=p.x-c*r/2+(e.x-this.border-x.left)*r,this.source.container.scrollTop=p.y-g*r/2+(e.y-this.border-x.top)*r}else{var C=this.source.view.translate,T=this.viewport.getBoundingClientRect(),c=(mxEvent$1.getClientX(o)-T.left)*r/this.source.view.scale,g=(mxEvent$1.getClientY(o)-T.top)*r/this.source.view.scale;this.source.getView().setTranslate(C.x-c,C.y-g),this.source.panGraph(0,0)}mxEvent$1.addGestureListeners(document,null,s,a),i=this.source.container.scrollLeft,n=this.source.container.scrollTop,mxEvent$1.consume(o)}}),s=mxUtils$1.bind(this,function(o){this.isEnabled()&&e!=null&&(this.isScrolling()?(this.source.container.scrollLeft=i+(mxEvent$1.getClientX(o)-e.x)*r,this.source.container.scrollTop=n+(mxEvent$1.getClientY(o)-e.y)*r):this.source.panGraph((e.x-mxEvent$1.getClientX(o))*r,(e.y-mxEvent$1.getClientY(o))*r),mxEvent$1.consume(o))}),a=mxUtils$1.bind(this,function(o){if(this.isEnabled()&&e!=null){if(!this.isScrolling()){var u=(mxEvent$1.getClientX(o)-e.x)*r/this.source.view.scale,d=(mxEvent$1.getClientY(o)-e.y)*r/this.source.view.scale,p=this.source.view.translate;this.source.getView().setTranslate(p.x-u,p.y-d),this.source.panGraph(0,0)}mxEvent$1.removeGestureListeners(document,null,s,a),mxEvent$1.consume(o),e=null}});mxEvent$1.addGestureListeners(t,l,s,a)};mxOutline.prototype.getViewBox=function(){return this.source.getGraphBounds()};mxOutline.prototype.updateSvg=function(){this.svg==null&&(this.svg=this.createSvg(),this.addGestureListeners(this.svg),this.container.appendChild(this.svg));var t=this.getViewBox();this.svg.setAttribute("viewBox",Math.round(t.x)+" "+Math.round(t.y)+" "+Math.round(t.width)+" "+Math.round(t.height));var e=this.source.background;this.svg.style.backgroundColor=e==mxConstants$1.NONE?"":e,this.updateDrawPane()};mxOutline.prototype.updateDrawPane=function(){this.drawPane!=null&&this.drawPane.parentNode.removeChild(this.drawPane),this.drawPane=this.source.view.getDrawPane().cloneNode(!0),this.drawPane.style.opacity=this.opacity,this.processSvg(this.drawPane),this.viewport!=null?this.svg.insertBefore(this.drawPane,this.viewport):this.svg.appendChild(this.drawPane)};mxOutline.prototype.processSvg=function(t){var e=mxClient$1.IS_IE11?Math.max(1,this.source.view.scale):this.source.view.scale;Array.prototype.slice.call(t.getElementsByTagName("*")).forEach(mxUtils$1.bind(this,function(i){if(i.nodeName=="text"||i.nodeName=="foreignObject"||i.getAttribute("visibility")=="hidden"||!(i instanceof SVGElement))i.parentNode.removeChild(i);else{var n=parseInt(i.getAttribute("stroke-width")||1);isNaN(n)||i.setAttribute("stroke-width",Math.max(mxClient$1.IS_IE11?4:1,n/(5*e))),i.setAttribute("vector-effect","non-scaling-stroke"),i.style.cursor=""}}))};mxOutline.prototype.updateViewport=function(){if(this.svg!=null){this.viewport==null&&(this.viewport=this.createViewport(),this.svg.appendChild(this.viewport));var t=this.source.container,e=new mxRectangle$1(t.scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight);this.isScrolling()||(e.x=-this.source.panDx,e.y=-this.source.panDy),this.viewport.setAttribute("x",e.x),this.viewport.setAttribute("y",e.y),this.viewport.setAttribute("width",e.width),this.viewport.setAttribute("height",e.height)}};mxOutline.prototype.createViewport=function(){var t=this.svg.ownerDocument.createElementNS(mxConstants$1.NS_SVG,"rect");return t.setAttribute("stroke-width",mxClient$1.IS_IE11?"12":"3"),t.setAttribute("stroke",HoverIcons$2.prototype.arrowFill),t.setAttribute("fill",HoverIcons$2.prototype.arrowFill),t.setAttribute("vector-effect","non-scaling-stroke"),t.setAttribute("fill-opacity",.2),t.style.cursor="move",t};mxOutline.prototype.update=function(t){this.source!=null&&this.source.container!=null&&(this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null),this.fullUpdate=this.fullUpdate||t,this.thread=window.setTimeout(mxUtils$1.bind(this,function(){this.isSuspended()||(this.fullUpdate&&this.updateSvg(),this.updateViewport()),this.fullUpdate=null,this.thread=null}),this.isScrolling()?10:0))};mxOutline.prototype.destroy=function(){this.svg!=null&&(this.svg.parentNode.removeChild(this.svg),this.svg=null),this.source!=null&&(this.source.removeListener(this.scrollHandler),this.source.removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),this.source.getModel().removeListener(this.updateHandler),mxEvent$1.removeListener(this.source.container,"scroll",this.scrollHandler),this.source=null)};function mxPrintPreview(t,e,i,n,r,l,s,a,o){this.graph=t,this.scale=e??1/t.pageScale,this.border=n??0,this.pageFormat=mxRectangle$1.fromRectangle(i??t.pageFormat),this.title=a??"Printer-friendly version",this.x0=r??0,this.y0=l??0,this.borderColor=s,this.pageSelector=o??!0}mxPrintPreview.prototype.graph=null;mxPrintPreview.prototype.pageFormat=null;mxPrintPreview.prototype.addPageCss=!1;mxPrintPreview.prototype.pixelsPerInch=100;mxPrintPreview.prototype.pageMargin=27;mxPrintPreview.prototype.overflowClipMargin="1px";mxPrintPreview.prototype.gridSize=null;mxPrintPreview.prototype.gridSteps=null;mxPrintPreview.prototype.gridColor=null;mxPrintPreview.prototype.gridStrokeWidth=.5;mxPrintPreview.prototype.defaultCss=`g[style*="filter: drop-shadow("] {
  filter: none !important;
}
@media screen {
  body {
    background: gray;
    transform: scale(0.7);
    transform-origin: 0 0;
  }
  body > div {
    margin-bottom: 20px;
    box-sizing: border-box;
  }
  a, a * {
    pointer-events: none;
  }
}
@media print {
  body {
    margin: 0px;
  }
  * {
    -webkit-print-color-adjust: exact;
  }
}`;mxPrintPreview.prototype.scale=null;mxPrintPreview.prototype.border=0;mxPrintPreview.prototype.marginTop=0;mxPrintPreview.prototype.marginBottom=0;mxPrintPreview.prototype.x0=0;mxPrintPreview.prototype.y0=0;mxPrintPreview.prototype.autoOrigin=!0;mxPrintPreview.prototype.printOverlays=!1;mxPrintPreview.prototype.printControls=!1;mxPrintPreview.prototype.printBackgroundImage=!1;mxPrintPreview.prototype.backgroundColor="#ffffff";mxPrintPreview.prototype.borderColor=null;mxPrintPreview.prototype.title=null;mxPrintPreview.prototype.pageSelector=null;mxPrintPreview.prototype.wnd=null;mxPrintPreview.prototype.targetWindow=null;mxPrintPreview.prototype.pageCount=0;mxPrintPreview.prototype.clipping=!0;mxPrintPreview.prototype.getWindow=function(){return this.wnd};mxPrintPreview.prototype.getDoctype=function(){var t="";return document.documentMode==8?t='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(t='<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->'),t};mxPrintPreview.prototype.appendGraph=function(t,e,i,n,r,l,s,a,o){this.graph=t,this.scale=e??1/t.pageScale,this.x0=i,this.y0=n,this.open(null,null,r,l,s,a,o)};mxPrintPreview.prototype.getPageClassCss=function(t,e){var i=this.pageMargin,n=this.pixelsPerInch,r=(e.width/n).toFixed(2)+"in "+(e.height/n).toFixed(2)+"in",l="@page "+t+` {
  margin: 0;
  size: `+mxUtils$1.htmlEntities(r)+`;
}
.`+t+` {
  page: `+t+`;
`+(mxClient.IS_SF?"  padding: "+mxUtils$1.htmlEntities((i/n).toFixed(2))+`in;
`:"")+"  width: "+mxUtils$1.htmlEntities((e.width/n).toFixed(2))+`in;
  height: `+mxUtils$1.htmlEntities((e.height/n).toFixed(2))+`in;
}
`;return mxClient.IS_SF||(l+="."+t+` > svg {
  margin: `+mxUtils$1.htmlEntities((i/n).toFixed(2))+`in;
}
`),l};mxPrintPreview.prototype.open=function(t,e,i,n,r,l,s){var a=null;try{var o=this.graph.cellRenderer.initializeOverlay,u=l!=null;l=mxRectangle$1.fromRectangle(l??this.pageFormat);var d=l.width+1,p=l.height+1;this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(tt,st){st.init(tt.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(tt,st,ft,$t){st.dialect=tt.view.graph.dialect,st.init(tt.view.getDrawPane())}),this.wnd=e??this.wnd;var c=!1;this.wnd==null&&(c=!0,this.wnd=window.open());var g=this.wnd.document;if(c){var x=this.getDoctype();x!=null&&x.length>0&&g.writeln(x),document.compatMode==="CSS1Compat"&&g.writeln("<!DOCTYPE html>"),g.writeln("<html>"),g.writeln("<head>"),this.writeHead(g,t),g.writeln("</head>"),g.writeln("<body>")}var C=mxRectangle$1.fromRectangle(s!=null?this.graph.getBoundingBox(s):this.graph.getGraphBounds()),T=this.graph.getView().getScale(),A=T/this.scale,R=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=R.x*this.scale,this.y0-=R.y*this.scale,C.width+=C.x,C.height+=C.y,C.x=0,C.y=0,this.border=0);var _=d-this.border*2,N=p-this.border*2;p+=this.marginTop+this.marginBottom,C.width/=A,C.height/=A;var H=Math.max(1,Math.ceil((C.width+this.x0)/_)),k=Math.max(1,Math.ceil((C.height+this.y0)/N));this.pageCount=H*k;var K=null;u&&(this.pendingCss==null&&(this.pageFormatClass={},this.pendingCss=""),K=mxUtils$1.htmlEntities("gePageFormat-"+String(l.width).replaceAll(".","_")+"-"+String(l.height).replaceAll(".","_")),this.pageFormatClass[K]==null&&(this.pageFormatClass[K]=!0,this.pendingCss+=this.getPageClassCss(K,l)));var Q=mxUtils$1.bind(this,function(tt){this.borderColor!=null&&(tt.style.borderColor=this.borderColor,tt.style.borderStyle="solid",tt.style.borderWidth="1px"),tt.style.background=this.backgroundColor,K!=null?tt.classList.add(K):(tt.style.width=l.width+"px",tt.style.height=l.height+"px"),g.body.appendChild(tt)}),nt=this.getCoverPages(d,p);if(nt!=null)for(var dt=0;dt<nt.length;dt++)Q(nt[dt],!0);for(var mt=this.getAppendices(d,p),dt=0;dt<k;dt++)for(var xt=dt*N/this.scale-this.y0/this.scale+(C.y-R.y*T)/T-dt,Y=0;Y<H;Y++){if(this.wnd==null)return null;var B=Y*_/this.scale-this.x0/this.scale+(C.x-R.x*T)/T-Y,U=dt*H+Y+1;a=g.createElement("div"),a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center";var lt=new mxRectangle$1(B,xt,_,N);this.addGraphFragment(-B,-xt,this.scale,U,a,lt),r!=null&&dt==0&&Y==0&&a.setAttribute("id",r),Q(a,!0)}if(mt!=null)for(var dt=0;dt<mt.length;dt++)Q(mt[dt],dt<mt.length-1);c&&!n&&this.closeDocument(),this.wnd.focus()}catch(tt){a!=null&&a.parentNode!=null&&a.parentNode.removeChild(a),window.console!=null&&console.error(tt)}finally{this.graph.cellRenderer.initializeOverlay=o}return this.wnd};mxPrintPreview.prototype.addPendingCss=function(t){if(this.pendingCss!=null){var e=t.createElement("style");e.setAttribute("type","text/css"),e.appendChild(t.createTextNode(this.pendingCss));var i=t.getElementsByTagName("head")[0];i.appendChild(e),this.pendingCss=null}};mxPrintPreview.prototype.closeDocument=function(){try{if(this.wnd!=null&&this.wnd.document!=null){var t=this.wnd.document;this.writePostfix(t),t.writeln("</body>"),t.writeln("</html>"),t.close(),this.addPendingCss(t),mxEvent$1.release(t.body)}}catch{}};mxPrintPreview.prototype.writeHead=function(t,e){this.title!=null&&t.writeln("<title>"+mxUtils$1.htmlEntities(this.title)+"</title>"),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",t),t.writeln('<style type="text/css">'),t.writeln(this.defaultCss);var i=this.pageFormat;if(this.addPageCss&&i!=null){var n=(i.width/this.pixelsPerInch).toFixed(2)+"in "+(i.height/this.pixelsPerInch).toFixed(2)+"in";t.writeln("@page {"),t.writeln("  margin: "+mxUtils$1.htmlEntities((this.pageMargin/this.pixelsPerInch).toFixed(2))+"in;"),t.writeln("  size: "+mxUtils$1.htmlEntities(n)+";"),t.writeln("}")}e!=null&&t.writeln(mxUtils$1.htmlEntities(e,!1,!1,!1)),t.writeln("</style>")};mxPrintPreview.prototype.writePostfix=function(t){};mxPrintPreview.prototype.getRoot=function(){var t=this.graph.view.currentRoot;return t==null&&(t=this.graph.getModel().getRoot()),t};mxPrintPreview.prototype.useCssTransforms=function(){return!mxClient.NO_FO&&!mxClient.IS_SF};mxPrintPreview.prototype.isCellVisible=function(t){return!0};mxPrintPreview.prototype.drawBackgroundImage=function(t){t.redraw()};mxPrintPreview.prototype.addGraphFragment=function(t,e,i,n,r,l){var s=this.graph.getView(),a=this.graph.container;this.graph.container=r;var o=s.getCanvas(),u=s.getBackgroundPane(),d=s.getDrawPane(),p=s.getOverlayPane(),c=i;if(this.graph.dialect==mxConstants$1.DIALECT_SVG){if(s.createSvg(),this.useCssTransforms()){var g=s.getDrawPane().parentNode;g.setAttribute("transformOrigin","0 0"),g.setAttribute("transform","scale("+i+","+i+")translate("+t+","+e+")"),i=1,t=0,e=0}}else s.createHtml();var x=s.isEventsEnabled();s.setEventsEnabled(!1);var C=this.graph.isEnabled();this.graph.setEnabled(!1);var T=s.getTranslate();s.translate=new mxPoint$1(t,e);var A=this.graph.selectionCellsHandler.updateHandler;this.graph.selectionCellsHandler.updateHandler=function(){};var R=this.graph.cellRenderer.redraw,_=s.states,N=s.scale,H=null;if(this.printBackgroundImage){var k=this.getBackgroundImage();if(k!=null){var K=new mxRectangle$1(Math.round(t*N+k.x),Math.round(e*N+k.y),k.width-1,k.height-1),H=new mxImageShape(K,k.src);H.dialect=this.graph.dialect}}if(this.clipping){var Q=new mxRectangle$1((l.x+T.x+1.5)*N,(l.y+T.y+1.5)*N,(l.width-1.5)*N/c,(l.height-1.5)*N/c),nt=this;if(this.graph.cellRenderer.redraw=function(U,lt,tt){if(U!=null){var st=_.get(U.cell);if(st!=null){var ft=s.getBoundingBox(st,!1);if(ft!=null&&ft.width>0&&ft.height>0&&!mxUtils$1.intersects(Q,ft))return}if(!nt.isCellVisible(U.cell))return}R.apply(this,arguments)},H!=null){var dt=new mxRectangle$1(H.bounds.x*N+(T.x-t)*N,H.bounds.y*N+(T.y-e)*N,H.bounds.width*N,H.bounds.height*N);mxUtils$1.intersects(Q,dt)||(H=null)}}H!=null&&(H.init(s.backgroundPane),this.drawBackgroundImage(H));var dt=null;try{var mt=[this.getRoot()];dt=new mxTemporaryCellStates(s,i,mt,null,mxUtils$1.bind(this,function(U){return this.getLinkForCellState(U)}))}finally{for(var xt=r.firstChild;xt!=null;){var Y=xt.nextSibling,B=xt.nodeName.toLowerCase();B=="svg"?(xt.style.top="",xt.style.left="",xt.style.width="",xt.style.height="",xt.style.display="",xt.style.maxWidth="100%",xt.style.maxHeight="100%",xt.style.overflow=mxClient.IS_SF?"hidden":"clip",xt.style.overflowClipMargin=this.overflowClipMargin,xt.setAttribute("viewBox","0 0 "+(mxClient.IS_SF?l.width+1+" "+(l.height+1):l.width-1+" "+(l.height-1))),this.addGrid(xt,l),mxClient.IS_SF&&(l.width>l.height?xt.style.height="100%":xt.style.width="100%")):this.isTextLabel(xt)||xt.parentNode.removeChild(xt),xt=Y}s.overlayPane.parentNode.removeChild(s.overlayPane),this.graph.setEnabled(C),this.graph.container=a,this.graph.cellRenderer.redraw=R,this.graph.selectionCellsHandler.updateHandler=A,s.canvas=o,s.backgroundPane=u,s.drawPane=d,s.overlayPane=p,s.translate=T,dt.destroy(),s.setEventsEnabled(x)}};mxPrintPreview.prototype.addGrid=function(t,e){if(this.gridSize>0&&this.gridSteps>0&&this.gridColor!=null){var i=this.createSvgGrid(t,e),n=mxUtils$1.getSvgDefs(t);n.nextSibling!=null?n.parentNode.insertBefore(i,n.nextSibling):n.parentNode.appendChild(i)}};mxPrintPreview.prototype.createSvgGrid=function(t,e){var i=this.gridSize,n=t.ownerDocument,r=n.createElementNS!=null?n.createElementNS(mxConstants$1.NS_SVG,"g"):n.createElement("g"),l=mxUtils$1.mod(Math.ceil(Math.round(e.x)/i),this.gridSteps),s=mxUtils$1.mod(i-mxUtils$1.mod(Math.round(e.x),i),i),a=mxUtils$1.mod(Math.ceil(Math.round(e.y)/i),this.gridSteps),o=mxUtils$1.mod(i-mxUtils$1.mod(Math.round(e.y),i),i);s*=this.scale,o*=this.scale,i*=this.scale;for(var u=Math.ceil(e.height/i),d=0;d<u;d++){var p=n.createElementNS!=null?n.createElementNS(mxConstants$1.NS_SVG,"line"):n.createElement("line");p.setAttribute("x1",0),p.setAttribute("y1",d*i+o),p.setAttribute("x2",e.width),p.setAttribute("y2",d*i+o),p.setAttribute("stroke",this.gridColor),p.setAttribute("opacity",mxUtils$1.mod(d+a,this.gridSteps)==0?"1":"0.2"),p.setAttribute("stroke-width","0.5"),r.appendChild(p)}for(var c=Math.ceil(e.width/i),d=0;d<c;d++){var p=n.createElementNS!=null?n.createElementNS(mxConstants$1.NS_SVG,"line"):n.createElement("line");p.setAttribute("x1",d*i+s),p.setAttribute("y1",0),p.setAttribute("x2",d*i+s),p.setAttribute("y2",e.height),p.setAttribute("stroke",this.gridColor),p.setAttribute("opacity",mxUtils$1.mod(d+l,this.gridSteps)==0?"1":"0.2"),p.setAttribute("stroke-width","0.5"),r.appendChild(p)}return r};mxPrintPreview.prototype.isTextLabel=function(t){return tmp.style.cursor=="default"||t.nodeName.toLowerCase()=="div"};mxPrintPreview.prototype.getLinkForCellState=function(t){return this.graph.getLinkForCell(t.cell)};mxPrintPreview.prototype.getBackgroundImage=function(){return this.graph.backgroundImage};mxPrintPreview.prototype.getCoverPages=function(){return null};mxPrintPreview.prototype.getAppendices=function(){return null};mxPrintPreview.prototype.print=function(t){var e=this.open(t);e!=null&&e.print()};mxPrintPreview.prototype.close=function(){this.wnd!=null&&(this.wnd.close(),this.wnd=null)};function mxSwimlaneManager(t,e,i,n){this.horizontal=e??!0,this.addEnabled=i??!0,this.resizeEnabled=n??!0,this.addHandler=mxUtils$1.bind(this,function(r,l){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(l.getProperty("cells"))}),this.resizeHandler=mxUtils$1.bind(this,function(r,l){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(l.getProperty("cells"))}),this.setGraph(t)}mxSwimlaneManager.prototype=new mxEventSource;mxSwimlaneManager.prototype.constructor=mxSwimlaneManager;mxSwimlaneManager.prototype.graph=null;mxSwimlaneManager.prototype.enabled=!0;mxSwimlaneManager.prototype.horizontal=!0;mxSwimlaneManager.prototype.addEnabled=!0;mxSwimlaneManager.prototype.resizeEnabled=!0;mxSwimlaneManager.prototype.addHandler=null;mxSwimlaneManager.prototype.resizeHandler=null;mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled};mxSwimlaneManager.prototype.setEnabled=function(t){this.enabled=t};mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal};mxSwimlaneManager.prototype.setHorizontal=function(t){this.horizontal=t};mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled};mxSwimlaneManager.prototype.setAddEnabled=function(t){this.addEnabled=t};mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled};mxSwimlaneManager.prototype.setResizeEnabled=function(t){this.resizeEnabled=t};mxSwimlaneManager.prototype.getGraph=function(){return this.graph};mxSwimlaneManager.prototype.setGraph=function(t){this.graph!=null&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,this.graph!=null&&(this.graph.addListener(mxEvent$1.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent$1.CELLS_RESIZED,this.resizeHandler))};mxSwimlaneManager.prototype.isSwimlaneIgnored=function(t){return!this.getGraph().isSwimlane(t)};mxSwimlaneManager.prototype.isCellHorizontal=function(t){if(this.graph.isSwimlane(t)){var e=this.graph.getCellStyle(t);return mxUtils$1.getValue(e,mxConstants$1.STYLE_HORIZONTAL,1)==1}return!this.isHorizontal()};mxSwimlaneManager.prototype.cellsAdded=function(t){if(t!=null){var e=this.getGraph().getModel();e.beginUpdate();try{for(var i=0;i<t.length;i++)this.isSwimlaneIgnored(t[i])||this.swimlaneAdded(t[i])}finally{e.endUpdate()}}};mxSwimlaneManager.prototype.swimlaneAdded=function(t){for(var e=this.getGraph().getModel(),i=e.getParent(t),n=e.getChildCount(i),r=null,l=0;l<n;l++){var s=e.getChildAt(i,l);if(s!=t&&!this.isSwimlaneIgnored(s)&&(r=e.getGeometry(s),r!=null))break}if(r!=null){var a=i!=null?this.isCellHorizontal(i):this.horizontal;this.resizeSwimlane(t,r.width,r.height,a)}};mxSwimlaneManager.prototype.cellsResized=function(t){if(t!=null){var e=this.getGraph().getModel();e.beginUpdate();try{for(var i=0;i<t.length;i++)if(!this.isSwimlaneIgnored(t[i])){var n=e.getGeometry(t[i]);if(n!=null){for(var r=new mxRectangle$1(0,0,n.width,n.height),l=t[i],s=l;s!=null;){l=s,s=e.getParent(s);var a=this.graph.isSwimlane(s)?this.graph.getStartSize(s):new mxRectangle$1;r.width+=a.width,r.height+=a.height}var o=s!=null?this.isCellHorizontal(s):this.horizontal;this.resizeSwimlane(l,r.width,r.height,o)}}}finally{e.endUpdate()}}};mxSwimlaneManager.prototype.resizeSwimlane=function(t,e,i,n){var r=this.getGraph().getModel();r.beginUpdate();try{var l=this.isCellHorizontal(t);if(!this.isSwimlaneIgnored(t)){var s=r.getGeometry(t);s!=null&&(n&&s.height!=i||!n&&s.width!=e)&&(s=s.clone(),n?s.height=i:s.width=e,r.setGeometry(t,s))}var a=this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle$1;e-=a.width,i-=a.height;for(var o=r.getChildCount(t),u=0;u<o;u++){var d=r.getChildAt(t,u);this.resizeSwimlane(d,e,i,l)}}finally{r.endUpdate()}};mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)};function mxTemporaryCellStates$1(t,e,i,n,r,l){e=e??1,this.view=t,this.oldValidateCellState=t.validateCellState,this.oldBounds=t.getGraphBounds(),this.oldStates=t.getStates(),this.oldScale=t.getScale(),this.oldDoRedrawShape=t.graph.cellRenderer.doRedrawShape;var s=this;if(r!=null&&(t.graph.cellRenderer.doRedrawShape=function(d){var p=d.shape.paint;d.shape.paint=function(c){var g=r(d);g!=null&&c.setLink(g,l!=null?l(d):null),p.apply(this,arguments),g!=null&&c.setLink(null)},s.oldDoRedrawShape.apply(t.graph.cellRenderer,arguments),d.shape.paint=p}),t.validateCellState=function(d,p){return d==null||n==null||n(d)?s.oldValidateCellState.apply(t,arguments):null},t.setStates(new mxDictionary$1),t.setScale(e),i!=null){t.resetValidationState();for(var a=null,o=0;o<i.length;o++){var u=t.getBoundingBox(t.validateCellState(t.validateCell(i[o])));a==null?a=u:a.add(u)}t.setGraphBounds(a||new mxRectangle$1)}}mxTemporaryCellStates$1.prototype.view=null;mxTemporaryCellStates$1.prototype.oldStates=null;mxTemporaryCellStates$1.prototype.oldBounds=null;mxTemporaryCellStates$1.prototype.oldScale=null;mxTemporaryCellStates$1.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape};const urlParams$1={},uiTheme="default",STENCIL_PATH$1="default",DOM_PURIFY_CONFIG={ADD_TAGS:["use"],FORBID_TAGS:["form"],ALLOWED_URI_REGEXP:/^((?!javascript:).)*$/i,ADD_ATTR:["target","content"]};function Sidebar(t,e){this.editorUi=t,this.container=e,this.palettes=new Object,this.taglist=new Object,this.lastCreated=0,this.showTooltips=!0,this.graph=t.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.shapeBackgroundColor="transparent",this.graph.foldingEnabled=!1,this.initialDefaultVertexStyle=mxUtils$1.clone(t.editor.graph.defaultVertexStyle),this.initialDefaultEdgeStyle=mxUtils$1.clone(t.editor.graph.defaultEdgeStyle),this.ignoredStyles=["html","whiteSpace","aspect","points","verticalLabelPosition","labelPosition","outlineConnect"].concat(Graph$1.cellStyles)}Sidebar.prototype.init=function(){var t=STENCIL_PATH$1;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(t),this.setCurrentSearchEntryLibrary("arrows"),this.addStencilPalette("arrows",mxResources$1.get("arrows"),t+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.addUmlPalette(!1),this.setCurrentSearchEntryLibrary("flowchart"),this.addStencilPalette("flowchart","Flowchart",t+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.setCurrentSearchEntryLibrary("clipart"),this.addImagePalette("clipart",mxResources$1.get("clipart"),t+"/clipart/","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"}),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.collapsedImage=mxClient$1.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif";Sidebar.prototype.expandedImage=mxClient$1.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif";Sidebar.prototype.enableTooltips=!0;Sidebar.prototype.tooltipBorder=16;Sidebar.prototype.tooltipDelay=300;Sidebar.prototype.dropTargetDelay=200;Sidebar.prototype.gearImage=STENCIL_PATH$1+"/clipart/Gear_128x128.png";Sidebar.prototype.thumbWidth=42;Sidebar.prototype.thumbHeight=42;Sidebar.prototype.minThumbStrokeWidth=1;Sidebar.prototype.thumbAntiAlias=!1;Sidebar.prototype.thumbPadding=document.documentMode>=5?2:3;Sidebar.prototype.thumbBorder=2;Sidebar.prototype.moreShapesHeight=52;Sidebar.prototype.livePreview=!0;Sidebar.prototype.searchClosedLibraries=!0;Sidebar.prototype.closedLibraryOpacity=null;urlParams$1["sidebar-entries"]!="large"&&(Sidebar.prototype.thumbPadding=document.documentMode>=5?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0);Sidebar.prototype.sidebarTitleSize=8;Sidebar.prototype.sidebarTitles=!1;Sidebar.prototype.tooltipTitles=!0;Sidebar.prototype.maxTooltipWidth=400;Sidebar.prototype.maxTooltipHeight=400;Sidebar.prototype.addStencilsToIndex=!0;Sidebar.prototype.defaultImageWidth=80;Sidebar.prototype.defaultImageHeight=80;Sidebar.prototype.tooltipMouseDown=null;Sidebar.prototype.expandLibraries=!0;Sidebar.prototype.refresh=function(){var t=this.editorUi.editor.graph;this.graph.stylesheet.styles=mxUtils$1.clone(t.getDefaultStylesheet().styles);var e=this.wrapper.scrollTop;this.wrapper.innerText="";var i=this.palettes;this.palettes=new Object;var n=this.addPalette;this.addPalette=function(r,l,s,a){return s=this.wasPaletteExpanded(i,r,s),n.apply(this,arguments)},this.init(i),this.addPalette=n,window.setTimeout(mxUtils$1.bind(this,function(){this.wrapper.scrollTop=e}),0)};Sidebar.prototype.wasPaletteExpanded=function(t,e,i){var n=t!=null&&e!=null?t[e]:null,r=i;return n!=null&&n.length==2&&n[1].firstChild!=null&&(r=n[1].firstChild.style.display!="none"),r};Sidebar.prototype.getEntryContainer=function(){return this.wrapper};Sidebar.prototype.appendChild=function(t){this.wrapper.appendChild(t)};Sidebar.prototype.getTooltipOffset=function(t,e){if(mxUtils$1.isAncestorNode(this.container,t)){var i=document.body,n=document.documentElement,r=Math.max(i.clientHeight||0,n.clientHeight),l=e.height+2*this.tooltipBorder;return new mxPoint(this.container.offsetWidth+2+this.editorUi.container.offsetLeft,Math.min(r-l-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+t.offsetTop-this.wrapper.scrollTop-l/2+16)))}else{var s=t.getBoundingClientRect();return new mxPoint(s.x+s.width+this.tooltipBorder,s.y+s.height/2-e.height/2-6)}};Sidebar.prototype.createMoreShapes=function(){var t=this.editorUi.createDiv("geSidebarFooter");t.style.position="absolute",t.style.overflow="hidden",t.style.display="inline-flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.width="100%",t.style.marginTop="-1px",t.style.height=this.moreShapesHeight+"px";var e=document.createElement("button");e.className="geBtn gePrimaryBtn",e.style.display="inline-flex",e.style.alignItems="center",e.style.whiteSpace="nowrap",e.style.padding="8px",e.style.margin="0px",e.innerHTML="<span>+</span>";var i=e.getElementsByTagName("span")[0];return i.style.fontSize="18px",i.style.marginRight="5px",mxUtils$1.write(e,mxResources$1.get("moreShapes")),mxEvent$1.addListener(e,mxClient$1.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(n){n.preventDefault()})),mxEvent$1.addListener(e,"click",mxUtils$1.bind(this,function(n){this.editorUi.actions.get("shapes").funct(),mxEvent$1.consume(n)})),t.appendChild(e),t};Sidebar.prototype.createTooltip=function(t,e,i,n,r,l,s,a,o,u,d){d=d??!0,this.tooltipMouseDown=o;var p=this.editorUi.editor.graph;if(this.tooltip==null){if(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.userSelect="none",this.tooltip.style.zIndex=mxPopupMenu$1.prototype.zIndex-1,document.body.appendChild(this.tooltip),mxEvent$1.addMouseWheelListener(mxUtils$1.bind(this,function(mt){this.hideTooltip()}),this.tooltip),this.graph2=new Graph$1(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.shapeBackgroundColor="transparent",this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setPanning(!1),this.graph2.setEnabled(!1),this.graph2.dialect==mxConstants$1.DIALECT_SVG){var c=this.graph2.view.getDrawPane().ownerSVGElement;c!=null&&(c.style.overflow="visible")}else this.graph2.view.canvas.style.overflow="visible";this.graph2.openLink=mxUtils$1.bind(this,function(){this.hideTooltip()}),mxEvent$1.addGestureListeners(this.tooltip,mxUtils$1.bind(this,function(mt){this.tooltipMouseDown!=null&&this.tooltipMouseDown(mt),window.setTimeout(mxUtils$1.bind(this,function(){(this.tooltipCloseImage==null||this.tooltipCloseImage.style.display=="none")&&this.hideTooltip()}),0)}),null,mxUtils$1.bind(this,function(mt){this.hideTooltip()})),mxClient$1.IS_SVG||(this.graph2.view.canvas.style.position="relative");var g=document.createElement("img");g.setAttribute("src",Dialog.prototype.closeImage),g.setAttribute("title",mxResources$1.get("close")),g.style.position="absolute",g.style.cursor="default",g.style.padding="8px",g.style.right="2px",g.style.top="2px",this.tooltip.appendChild(g),this.tooltipCloseImage=g,mxEvent$1.addListener(g,"click",mxUtils$1.bind(this,function(mt){this.hideTooltip(),mxEvent$1.consume(mt)}))}this.tooltipCloseImage.style.display=u?"":"none",this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),!a&&(i>this.maxTooltipWidth||n>this.maxTooltipHeight)?this.graph2.view.scale=Math.round(Math.min(this.maxTooltipWidth/i,this.maxTooltipHeight/n)*100)/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=l==null||l;var x=mxClient$1.NO_FO;mxClient$1.NO_FO=Editor.prototype.originalNoForeignObject;var C=mxUtils$1.getCurrentStyle(this.tooltip);if(this.graph2.shapeBackgroundColor=C.backgroundColor,e!=null){var T=this.graph2.cloneCells(e);this.graph2.pasteCellStyles(p.includeDescendants(T),d?p.currentVertexStyle:p.defaultVertexStyle,d?p.currentEdgeStyle:p.defaultEdgeStyle,null,p.pasteEdgeStyle),this.graph2.addCells(T)}mxClient$1.NO_FO=x;var A=this.graph2.getGraphBounds();if(a&&i>0&&n>0&&(A.width>i||A.height>n)){var R=Math.round(Math.min(i/A.width,n/A.height)*100)/100;mxClient$1.NO_FO?(this.graph2.view.setScale(Math.round(Math.min(this.maxTooltipWidth/A.width,this.maxTooltipHeight/A.height)*100)/100),A=this.graph2.getGraphBounds()):(this.graph2.view.getDrawPane().ownerSVGElement.style.transform="scale("+R+")",this.graph2.view.getDrawPane().ownerSVGElement.style.transformOrigin="0 0",A.width*=R,A.height*=R)}else mxClient$1.NO_FO||(this.graph2.view.getDrawPane().ownerSVGElement.style.transform="");var _=A.width+2*this.tooltipBorder+4,N=A.height+2*this.tooltipBorder;this.tooltip.style.overflow="visible",this.tooltip.style.width=_+"px";var H=_;if(this.tooltipTitles&&r!=null&&r.length>0){this.tooltipTitle==null?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerText="",this.tooltipTitle.style.display="",mxUtils$1.write(this.tooltipTitle,r),this.tooltipTitle.setAttribute("title",r),H=Math.min(this.maxTooltipWidth,Math.max(_,this.tooltipTitle.scrollWidth+4));var k=this.tooltipTitle.offsetHeight+10;N+=k,mxClient$1.IS_SVG?this.tooltipTitle.style.marginTop=2-k+"px":(N-=6,this.tooltipTitle.style.top=N-k+"px")}else this.tooltipTitle!=null&&this.tooltipTitle.parentNode!=null&&(this.tooltipTitle.style.display="none");H>_&&(this.tooltip.style.width=H+"px"),this.tooltip.style.height=N+"px";var K=-Math.round(A.x-this.tooltipBorder)+(H>_?(H-_)/2:0),Q=-Math.round(A.y-this.tooltipBorder);s=s??this.getTooltipOffset(t,A);var nt=s.x,dt=s.y;mxClient$1.IS_SVG?K!=0||Q!=0?this.graph2.view.canvas.setAttribute("transform","translate("+K+","+Q+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=K+"px",this.graph2.view.drawPane.style.top=Q+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=nt+"px",this.tooltip.style.top=dt+"px",mxUtils$1.fit(this.tooltip,this.tooltipBorder),this.lastCreated=Date.now()};Sidebar.prototype.showTooltip=function(t,e,i,n,r,l){if(this.enableTooltips&&this.showTooltips&&this.currentElt!=t){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null);var s=mxUtils$1.bind(this,function(){this.createTooltip(t,e,i,n,r,l)});this.tooltip!=null&&this.tooltip.style.display!="none"?s():this.thread=window.setTimeout(s,this.tooltipDelay),this.currentElt=t}};Sidebar.prototype.hideTooltip=function(){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null),this.tooltip!=null&&(this.tooltip.style.display="none",this.currentElt=null),this.tooltipMouseDown=null};Sidebar.prototype.addDataEntry=function(t,e,i,n,r){return t==null&&(t=""),n!=null&&(t+=" "+n),this.addEntry(t,mxUtils$1.bind(this,function(){return this.createVertexTemplateFromData(r,e,i,n)}))};Sidebar.prototype.addEntries=function(t){for(var e=0;e<t.length;e++)mxUtils$1.bind(this,function(i){var n=i.data,r=i.title!=null?i.title:"";i.tags!=null&&(r+=" "+i.tags),n!=null&&r.length>0?this.addEntry(r,mxUtils$1.bind(this,function(){n=this.editorUi.convertDataUri(n);var l="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return i.aspect=="fixed"&&(l+="aspect=fixed;"),this.createVertexTemplate(l+"image="+n,i.w,i.h,"",i.title||"",!1,!1,!0)})):i.xml!=null&&r.length>0&&this.addEntry(r,mxUtils$1.bind(this,function(){var l=this.editorUi.stringToCells(i.xml.charAt(0)=="<"?i.xml:Graph$1.decompress(i.xml));return this.createVertexTemplateFromCells(l,i.w,i.h,i.title||"",!0,!1,!0)}))})(t[e])};Sidebar.prototype.setCurrentSearchEntryLibrary=function(t,e){this.currentSearchEntryLibrary=t!=null?{id:t,lib:e}:null};Sidebar.prototype.getKeyStyle=function(t){var e=[];if(t!=null)for(var i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split("=");r.length>1&&mxUtils$1.indexOf(this.ignoredStyles,r[0])<0&&e.push(r[0]+"="+r[1])}return e.join(";")};Sidebar.prototype.addLibForStyle=function(t,e){t!=""&&(this.styleToLibs==null&&(this.styleToLibs={}),this.styleToLibs[t]==null&&(this.styleToLibs[t]=[]),this.styleToLibs[t].push(e))};Sidebar.prototype.getLibsForStyle=function(t){return this.styleToLibs!=null?this.styleToLibs[t]:null};Sidebar.prototype.addEntry=function(t,e){if(this.currentSearchEntryLibrary!=null){var i=this,n=this.createVertexTemplateFromCells;this.createVertexTemplateFromCells=function(u,d,p,c,g){if(u!=null)for(var x=0;x<u.length;x++)i.addLibForStyle(i.getKeyStyle(u[x].style),this.currentSearchEntryLibrary)},e(),this.createVertexTemplateFromCells=n}if(this.taglist!=null&&t!=null&&t.length>0){this.currentSearchEntryLibrary!=null&&(e.parentLibraries=[this.currentSearchEntryLibrary]);for(var r=t.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),l=[],s={},a=0;a<r.length;a++){s[r[a]]==null&&(s[r[a]]=!0,l.push(r[a]));var o=Editor.soundex(r[a].replace(/\.*\d*$/,""));o!=r[a]&&s[o]==null&&(s[o]=!0,l.push(o))}for(var a=0;a<l.length;a++)this.addEntryForTag(l[a],e)}return e};Sidebar.prototype.addEntryForTag=function(t,e){if(t!=null&&t.length>1){var i=this.taglist[t];typeof i!="object"&&(i={entries:[]},this.taglist[t]=i),i.entries.push(e)}};Sidebar.prototype.isEntryIgnored=function(t,e){var i=!e;if(t.parentLibraries!=null&&i){for(var n=0;n<t.parentLibraries.length;n++)if(this.isEntryVisible(t.parentLibraries[n].id)){i=!1;break}}return i};Sidebar.prototype.searchEntries=function(t,e,i,n,r,l){if(this.taglist!=null&&t!=null){for(var s=t.toLowerCase().split(" "),a=new mxDictionary$1,o=(i+1)*e,u=[],d=0,p=0;p<s.length;p++){var c=Editor.soundex(s[p].replace(/\.*\d*$/,""));if(c.length>0){var g=this.taglist[s[p]],x=g!=null?g.entries.slice():[];g=this.taglist[c],x=g!=null?x.concat(g.entries):x;var C=new mxDictionary$1;if(x.length>0){u=[];for(var T=0;T<x.length;T++){var A=x[T];if(d==0==(a.get(A)==null)&&C.get(A)==null&&(C.put(A,A),!this.isEntryIgnored(A,l)&&(u.push(A),p==s.length-1&&u.length==o))){n(u.slice(i*e,o),o,!0,s);return}}}else u=[];a=C,d++}}var R=u.length;n(u.slice(i*e,(i+1)*e),R,!1,s)}else n([],null,null,s)};Sidebar.prototype.filterTags=function(t){if(t!=null){for(var e=t.split(" "),i=[],n={},r=0;r<e.length;r++)n[e[r]]==null&&(n[e[r]]="1",i.push(e[r]));return i.join(" ")}return null};Sidebar.prototype.cloneCell=function(t,e){var i=t.clone();return e!=null&&(i.value=e),i};Sidebar.prototype.showPopupMenuForEntry=function(t,e,i){};Sidebar.prototype.addSearchPalette=function(t){var e=document.createElement("div");e.style.visibility="hidden",this.appendChild(e);var i=document.createElement("div");i.className="geSidebar geSearchSidebar",t||(i.style.display="none");var n=document.createElement("div");n.style.whiteSpace="nowrap",n.style.textOverflow="clip",n.style.paddingBottom="8px",n.style.cursor="default";var r=document.createElement("input");r.setAttribute("placeholder",mxResources$1.get("searchShapes")),r.setAttribute("type","text"),n.appendChild(r);var l=document.createElement("img");l.setAttribute("src",Editor.magnifyImage),l.setAttribute("title",mxResources$1.get("search")),l.className="geAdaptiveAsset",l.style.position="relative",l.style.cursor="pointer",l.style.opacity="0.5",l.style.height="16px",l.style.left="-20px",l.style.top="4px",l.style.background="url('"+this.editorUi.editor.transparentImage+"')";var s;n.appendChild(l),i.appendChild(n);var a=document.createElement("center"),o=mxUtils$1.button(mxResources$1.get("moreResults"),function(){s()});o.style.display="none",o.style.lineHeight="normal",o.style.fontSize="12px",o.style.padding="6px 12px 6px 12px",o.style.marginTop="4px",o.style.marginBottom="8px",a.style.paddingTop="4px",a.style.paddingBottom="4px",a.appendChild(o),i.appendChild(a);var u="",d=!1,p=!1,c=0,g=new Object,x=12,C=mxUtils$1.bind(this,function(){d=!1,this.currentSearch=null;for(var _=i.firstChild;_!=null;){var N=_.nextSibling;_!=n&&_!=a&&_.parentNode.removeChild(_),_=N}});function T(){l.setAttribute("src",Editor.magnifyImage),l.setAttribute("title",mxResources$1.get("search")),o.style.display="none",r.value="",u="",C()}mxEvent$1.addListener(l,"click",function(){l.getAttribute("src")!=Editor.magnifyImage&&T(),r.focus()}),s=mxUtils$1.bind(this,function(){if(x=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),r.value!=""){if(a.parentNode!=null&&(u!=r.value&&(C(),u=r.value,g=new Object,p=!1,c=0),!d&&!p)){o.setAttribute("disabled","true"),o.style.display="",o.style.cursor="wait",o.innerHTML=mxResources$1.get("loading")+"...",d=!0;var _=new Object;this.currentSearch=_;try{this.searchEntries(u,x,c,mxUtils$1.bind(this,function(N,H,k,K){if(this.currentSearch==_){N=N??[],d=!1,c++,this.insertSearchHint(i,u,x,c,N,H,k,K),N.length==0&&c==1&&(u=""),a.parentNode!=null&&a.parentNode.removeChild(a);for(var Q=0;Q<N.length;Q++)mxUtils$1.bind(this,function(nt){try{var dt=nt();this.closedLibraryOpacity!=null&&this.searchClosedLibraries&&this.isEntryIgnored(nt,!1)&&(dt.style.opacity=this.closedLibraryOpacity),g[dt.innerHTML]==null?(g[dt.innerHTML]=nt.parentLibraries!=null?nt.parentLibraries.slice():[],i.appendChild(dt)):nt.parentLibraries!=null&&(g[dt.innerHTML]=g[dt.innerHTML].concat(nt.parentLibraries)),mxEvent$1.addGestureListeners(dt,null,null,mxUtils$1.bind(this,function(mt){var xt=g[dt.innerHTML];mxEvent$1.isPopupTrigger(mt)&&this.showPopupMenuForEntry(dt,xt,mt)})),mxEvent$1.disableContextMenu(dt)}catch(mt){urlParams$1.test=="1"&&(window.console!=null&&!EditorUi.isElectronApp?console.error(mt):(mxLog.show(),mxLog.debug(mt.stack)))}})(N[Q]);k?(o.removeAttribute("disabled"),o.innerHTML=mxResources$1.get("moreResults")):(o.innerHTML=mxResources$1.get("reset"),o.style.display="none",p=!0),o.style.cursor="",i.appendChild(a)}}),mxUtils$1.bind(this,function(){o.style.cursor=""}),this.searchClosedLibraries)}catch(N){this.editorUi.handleError(N)}}}else C(),r.value="",u="",g=new Object,o.style.display="none",p=!1,r.focus()}),this.searchShapes=function(_){r.value=_,s()},mxEvent$1.addListener(r,"keydown",mxUtils$1.bind(this,function(_){_.keyCode==13?(s(),mxEvent$1.consume(_)):_.keyCode==27&&T()}));var A=mxUtils$1.bind(this,function(){window.setTimeout(mxUtils$1.bind(this,function(){r.value==""?(l.setAttribute("src",Editor.magnifyImage),l.setAttribute("title",mxResources$1.get("search"))):(l.setAttribute("src",Editor.crossImage),l.setAttribute("title",mxResources$1.get("reset"))),r.value==""?(p=!0,o.style.display="none"):r.value!=u?(o.style.display="none",p=!1):d||(p?o.style.display="none":o.style.display="")}),0)});mxEvent$1.addListener(r,"keyup",A),mxEvent$1.addListener(r,"paste",A),mxEvent$1.addListener(r,"cut",A),mxEvent$1.addListener(r,"mousedown",function(_){_.stopPropagation&&_.stopPropagation(),_.cancelBubble=!0}),mxEvent$1.addListener(r,"selectstart",function(_){_.stopPropagation&&_.stopPropagation(),_.cancelBubble=!0});var R=document.createElement("div");R.appendChild(i),this.appendChild(R),this.palettes.search=[e,R]};Sidebar.prototype.insertSearchHint=function(t,e,i,n,r,l,s,a){if(r.length==0&&n==1){var o=document.createElement("div");o.className="geTitle",o.style.cssText="background-color:transparent;border-color:transparent;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important;font-size:11px;font-weight:normal;",mxUtils$1.write(o,mxResources$1.get("noResultsFor",[e])),t.appendChild(o)}};Sidebar.prototype.addGeneralPalette=function(t){var e="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","general");var i=this.editorUi.editor.graph,n=this,r=parseInt(this.initialDefaultVertexStyle.fontSize),l=isNaN(r)?"":"fontSize="+Math.min(16,r)+";",s=i.appendFontSize("edgeLabel;resizable=0;html=1;",i.edgeFontSize),a=new mxCell$2("List Item",new mxGeometry$2(0,0,80,30),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;"+l);a.vertex=!0;var o=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry(i.appendFontSize("text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",i.vertexFontSize),60,30,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;",180,120,'<h1 style="margin-top: 0px;">Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>',"Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage"),this.createVertexTemplateEntry("swimlane;startSize=0;",200,200,"","Container",null,null,"container swimlane lane pool group"),this.createVertexTemplateEntry("swimlane;whiteSpace=wrap;html=1;",200,200,"Vertical Container","Container",null,null,"container swimlane lane pool group"),this.createVertexTemplateEntry("swimlane;horizontal=0;whiteSpace=wrap;html=1;",200,200,"Horizontal Container","Horizontal Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var u=new mxCell$2("List",new mxGeometry$2(0,0,140,120),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;");return u.vertex=!0,u.insert(n.cloneCell(a,"Item 1")),u.insert(n.cloneCell(a,"Item 2")),u.insert(n.cloneCell(a,"Item 3")),n.createVertexTemplateFromCells([u],u.geometry.width,u.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return n.createVertexTemplateFromCells([n.cloneCell(a,"List Item")],a.geometry.width,a.geometry.height,"List Item")}),this.addEntry("curve",mxUtils$1.bind(this,function(){var u=new mxCell$2("",new mxGeometry$2(0,0,50,50),"curved=1;endArrow=classic;html=1;");return u.geometry.setTerminalPoint(new mxPoint(0,50),!0),u.geometry.setTerminalPoint(new mxPoint(50,0),!1),u.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],u.geometry.relative=!0,u.edge=!0,this.createEdgeTemplateFromCells([u],u.geometry.width,u.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",100,100,"","Bidirectional Arrow",null,e+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,e+"directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,e+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,e+"dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,e+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,e+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,e+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,e+"link"),this.addEntry(e+"edge title",mxUtils$1.bind(this,function(){var u=new mxCell$2("",new mxGeometry$2(0,0,0,0),"endArrow=classic;html=1;");u.geometry.setTerminalPoint(new mxPoint(0,0),!0),u.geometry.setTerminalPoint(new mxPoint(100,0),!1),u.geometry.relative=!0,u.edge=!0;var d=new mxCell$2("Label",new mxGeometry$2(0,0,0,0),s+";align=center;verticalAlign=middle;");return d.geometry.relative=!0,d.setConnectable(!1),d.vertex=!0,u.insert(d),this.createEdgeTemplateFromCells([u],100,0,"Connector with Label")})),this.addEntry(e+"edge title multiplicity",mxUtils$1.bind(this,function(){var u=new mxCell$2("",new mxGeometry$2(0,0,0,0),"endArrow=classic;html=1;");u.geometry.setTerminalPoint(new mxPoint(0,0),!0),u.geometry.setTerminalPoint(new mxPoint(160,0),!1),u.geometry.relative=!0,u.edge=!0;var d=new mxCell$2("Label",new mxGeometry$2(0,0,0,0),s+";align=center;verticalAlign=middle;");d.geometry.relative=!0,d.setConnectable(!1),d.vertex=!0,u.insert(d);var p=new mxCell$2("Source",new mxGeometry$2(-1,0,0,0),s+";align=left;verticalAlign=bottom;");return p.geometry.relative=!0,p.setConnectable(!1),p.vertex=!0,u.insert(p),this.createEdgeTemplateFromCells([u],160,0,"Connector with 2 Labels")})),this.addEntry(e+"edge title multiplicity",mxUtils$1.bind(this,function(){var u=new mxCell$2("",new mxGeometry$2(0,0,0,0),"endArrow=classic;html=1;");u.geometry.setTerminalPoint(new mxPoint(0,0),!0),u.geometry.setTerminalPoint(new mxPoint(160,0),!1),u.geometry.relative=!0,u.edge=!0;var d=new mxCell$2("Label",new mxGeometry$2(0,0,0,0),s+";align=center;verticalAlign=middle;");d.geometry.relative=!0,d.setConnectable(!1),d.vertex=!0,u.insert(d);var p=new mxCell$2("Source",new mxGeometry$2(-1,0,0,0),s+";align=left;verticalAlign=bottom;");p.geometry.relative=!0,p.setConnectable(!1),p.vertex=!0,u.insert(p);var c=new mxCell$2("Target",new mxGeometry$2(1,0,0,0),s+";align=right;verticalAlign=bottom;");return c.geometry.relative=!0,c.setConnectable(!1),c.vertex=!0,u.insert(c),this.createEdgeTemplateFromCells([u],160,0,"Connector with 3 Labels")})),this.addEntry(e+"edge shape symbol message mail email",mxUtils$1.bind(this,function(){var u=new mxCell$2("",new mxGeometry$2(0,0,0,0),"endArrow=classic;html=1;");u.geometry.setTerminalPoint(new mxPoint(0,0),!0),u.geometry.setTerminalPoint(new mxPoint(100,0),!1),u.geometry.relative=!0,u.edge=!0;var d=new mxCell$2("",new mxGeometry$2(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return d.geometry.relative=!0,d.vertex=!0,d.geometry.offset=new mxPoint(-10,-7),u.insert(d),this.createEdgeTemplateFromCells([u],100,0,"Connector with Symbol")}))];this.addPaletteFunctions("general",mxResources$1.get("general"),t??!0,o),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addMiscPalette=function(t){var e=this,i="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","misc");var n=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.createVertexTemplateEntry("shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fontSize=11;fillColor=none;strokeColor=none;",60,60,"","Vertical List"),this.addDataEntry("vertical list",60,60,"Vertical List","7VjbbqMwEP0aXldcQrp9hfSyUvel3R9wwwRba2xkJiX063eMnaRNgxR2V1EUIYHkGWYGzznjI0SQ5NXmwbCa/9QFyCC5C5LcaI1uVW1ykDKIQ1EEySKI45DuIL4feBr1T8OaGVB4SkLsEt6YXIPzOEeDnfSOhrPaLpG9WlfWIDP4It6tLyR7qRUyocCQHfW2lKxuRB/tIriQxRPr9Bq3dbZWtqJsXyyy2SshZa6lttWUVu6FRv+GA6ffNxiEzWDvvcs3/gC6AjQdhbSiQO4i5g6ekIMoOX72scbZ5S5zDyQtPJbHcU1G4vqsW2qKayPeLZzSI3eIddOKSjIFj8CKA1emi26X9REwoTgYYbFGXfsICSv0y1eNqCtvGI9CeJTHwuj6FzMlbEOOkFVrobAHLs3oIijz8FsapNRxTna0t+my4QZzrWjHNEK2LLAGW2gOR2N+KuXxX1Eepf9O+ewL5T8QKvJEg9TTxlEw+QxLZKrsTxfHSvqD1HKB8FKzpQ1tSSLcYVM2ek/KENmagFpJO1YLLooC1HG+xs1Ezy6YuzdwJEcHNBH0GZOipJctXL2soQaEKp9c9fRUHpP/zqMvtgd7dDUmqXfFkM7aWhXNl+HY7fOkeUknibgoieg+k34GxZgPKcbwJEyKMUhrevWKcTMpxiUqRhKeTTG+DylGMinGeMW4uXrFuJ0E4gIEYna+T4ooHFKI2aQQ4xXi9toUgsz9zyUX/vHf0x8="),this.addEntry("vertical list",mxUtils$1.bind(this,function(){var r=new mxCell$2("Link",new mxGeometry$2(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return r.vertex=!0,this.graph.setLinkForCell(r,"https://www.draw.io"),this.createVertexTemplateFromCells([r],r.geometry.width,r.geometry.height,"Vertical List")})),this.addDataEntry("table",180,120,"Table 1","7VnbcpswEP0aXjtcYsd9NUnTh/Yl6Q8o1trSVEiMWAeTr+8KhGlSe2xwJpMSZvCMdtmVteccwY4IkjTb3VmWi5+GgwqS2yBJrTHYjLJdCkoFcSh5kNwEcRzSL4i/Hbkb1XfDnFnQeE5C3CQ8MbWFxtM4CqyUdxSC5W6I7NG5lgUyiw/y2flCsldGI5MaLNlRbSvF8kLW0U2EkIr/YJXZYjtPay3XlO0ni+Zk+/WARdgdral2+YLuwGSAtqKQUnIUPmLR1B0KkBvRpnkwQlY0js0+t4OIBh6lw4glPRG7NyWVJYyVzw4o5TF5jWJRykwxDd+B8VeupeHVPsua35AaZRzaUguw0qGIJvcRCtboh48G0WTesB6G8CBD3Jr8F7MbaEPWUqn2b7TRjvfcSI01cLMlXQRlGn6ZBTOqOCU76my6XLjF1GhaMYnDTQuswBKKwaTHw0i/egPOr87nnFaMkql7WCHTm3rDCMyU3xulkAgPOVu50JJ2fbN/tIvu2DjGsiGE1srp6UZIzkEfJqqfGGpawd4+QcNuNJSf5CQ/8570+Mk6LHvPxhSVphnSHtpqXvzD+X6dZ8lgNslgsAx2L0kbkSrmkyouVcX+xTwiWVxPfcKH6hOql6S/R9uwmJ4Mp+m6Hn3b8HWSwWAZjLdtiMJJFpfKYox9QxRNjcNHbBwW79g4RD2O5T7vsyE6fQz43z8Mepw2TkL4RM3DdCJ5uS5G0D2Q2X0rasL//pT0Bw=="),this.addDataEntry("table",180,120,"Table 2","7ZlLc9owEMc/ja8dP3jlimnSQ3pJOr0reMGayFqPvNSQT9+VLUMCOEDbyaTYM2ZGWq9e/99K7MheFGfrOyPy9DsmoLzoqxfFBpHqUraOQSkv9GXiRTMvDH3+eeFty9ugeuvnwoCmcxqEdYNfQq2gttSGgjbKGYpU5LZI4smapillPM1ZwMUylQSPuZjb9yUvgm0FCUOP8sWafK7PUZOQGoxrM0elRF7IqrPaI5UquRcbXFEzTFOz3qtM33P7wnkbLF9XF9y9Gy0YVcMbfIYYFdoBE1iIlbIduXWCIVi3alWZnFB3gBmQ2bBLKRNKncek1tNPQS7TppkT2RdFbVhu2+6k54JT/ziJ6EISD1haGGjki1VYOT325S9KmSmh4RuIZM80xWTjTIS5KylYkCs+IRFmjexuuf5RhInB/IcwS2hcFlKpBoJGbeMmR6mpEmg45Ycli/0vQ2/IK4u5Huzq/Fh3QzFq5snRY7sFUVAJBZ2ELnUKRp4NPfwz6IN/wHxwwPxnVQz9oBU+T52kUA8wJ6GX5+xI3oHaeu9wHaFzWQQga7pQNgJnqUwS0HtQwr+FEp2EMrqQietsp9vFvQlFYLQg3jgrnRQHoLfzPIv9sJV9+8bvNPv1W1JXFAqj1lCI+lB4JxS2/7tXFAvjPg34VGnA5i30j8gKJq3HwaDjx8H46rOCm1b2w559t7KCwG+NhVEfCx1LC4Kgzws+Y14w+cC8IDi8rGsOhHHHD4Tg9M3df38CHF4QNvQnPf2u5QbtN4c3fTBceXLA1d0Hotr99fej3w=="),this.addDataEntry("table title",180,150,"Table with Title 1","7VnbbtswDP0avw6WXSfda5yue9he2v6AGjGRMFkyZKZO+vWjbOWyJVluQ9G6BmxApChaOudIIOQozYvFveOl/GkF6Ci9i9LcWYttq1jkoHWUxEpE6ThKkpjeKPl2oJc1vXHJHRg8ZUDSDnjheg6t54k/a2i9FS518FaSl76JTW86qpA7fFSv3pfG5JhYg1wZcORgja01LyvVhI+bCKm0+MGXdo6rRCuL0jn7C3KrrR8vYMrn2vunlDV8hQ3IDrMFh7A4uOLGFZZ7D7YAdEsKqZVAGSJuW1RiCWomV8Oy4ORV65itx24ApEbAcD+e6Q6e/4bywda0LGmdevUA6oDVNryNXatCcwPfgYu/XCMrlutR2ygqI8EpjyLaMkRomGJoPltEWwTDBRjivcwJZ8sn7mawCpkqrVefMdZ4QZRWGWyAy0b0EJR5/CWLMlpxTjbb2PT4cIe5NTRjEo1PC7zCGqqLSU/2k74MtARqj2ng5j9I4OZ0CdACUHH9ABPkZtZsLImFDluolgrhseQTH1rTEdFuM+OjN+QcIt0SYFPt5TWWSggw+3k7TxsNy+DuXqAlm11KV3p0jw7OpCck22B5djauaWmGI22puRHVDufreZ4kg6yXwcUyWPxJWodUMehVca0qWNI9WQz7suE9lg3DNywbbvuT4Thdw86XDV97GVwsg+6WDSzuZXGtLLpYNzDWFw7vsXBg7A0rB7Z7idcfDru3gsevBT/8aXDG7WMvhE9UPfRXktfrogPlA5mbP0tt+PaPp98="),this.addDataEntry("table title",180,120,"Table with Title 2","7VhNb6MwEP01XFd8NNnmGtLtHrKXptq7Gw9grbGRmZSkv34HbEJ3CdtklaYoqgSSZxgP+L1nPwkvivPtvWFF9kNzkF5050Wx0RrtKN/GIKUX+oJ70cILQ59uL/w28DRonvoFM6DwmAmhnfDM5AZs5pE9SbDZEnfSZcuMFfUQm6fRvERmcCVe6lzkU2KtFTKhwFAiaGIpWVGKpnzRVGRC8iXb6Q22jdponogt8AddlW620dWSmpVuakLNV+5j/ObtRv+CWEtdv45DwjYS2zr7UcGUYrc4MAjbQYCalEPnHnQOaHZUUgmOmau4tSD6GYg0a6c5ZH1W2kS6n9vhTQMH+WH4ox78/0aeIKJlZdqIlxpvucejY6OJK5FLpuA7MP5Xaq75zqVQF24kIUE3fNKIOneBccv1DxLKjS4emUmhLUmElC0pSqtaJ4UWChuAJnO6CLLY/zLxJrSymOKgi+mqyw3GWhG/pKW6LbASKyixR7pQGRjx36SHh0nfOVoctW9pIDqDBG56EggGNUArQMHkA6yRqbTZiBnm0m2aKhMIq4Kt69KKjhS7LVVd3bF2gKTThKAJ2kTWQlxkgnNQLc1g7p7Bsh2cm6/ozU16cyI/rlmH5cndmKQlK4a0pzaKlz3S9995lA4mPR38bIahP3I9MClS0sDC1s5LeqFQ6dLOnA4I5hLi2P5J5evNfF6xHNXuvGqZfhrHGI1jekHj+NqTwLAGRnFQvPs5ML16k7gdNImRc//xJjEgjms2idmnSYzRJGYXNInA72kgGvdJ8e4HwezqXSIIBm1i5OR/vE0MqOOKbILC7v+iLX/9+/E3"),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZnfbpswFMafhstN/EnS7nIhS3fRSlO2F3DhNFhzfJB90iR9+tlgkirgFUXtqjIkItmHY2O+84v1yQRJutnfKFYWd5iDCJJvQZIqRKpbm30KQgRxyPMgWQRxHJpfEC89d6PqblgyBZL6DIjrAY9MbKGOmIdr/Wm5lRlxlMwmLwXusoIpqpM1HYRL1gUrbZPYvQ3Ns4KL/JYdcEtNtOnNNZkZfvInmz8JbTIKwUrNq6ELG1GQbZXmj7ACXSfaKOxLJnPXeUDZTBLNTN+tHxTB3qtBFXIC3ABugNTBpOx4TkWdMQlrncIC+LqgsyDTdWB9HHuS1DScqt0KJy2Fv2aEyoSiv8u5wp15vwIVfzLvbApRC6B3fCOYhO/A8rPQHPODCxGWriXggZo8UvgbUhTm8cmCywIUt5W5RyLcNDVw72/bucLyF1NroOfqu/VWfS5EM59EaREokUuq9JrOzWUUTMPP02Bq3i81/ejUN5dNV5SiNEtjvCoXME070O9MTNxNzKEBox7xEkBR/AoATVoA/SiYhm6AHAm9OTkvqA+RDKWEzP3NfaV/x3ol3fXae+t1LE3vernZV1YGuRZwyXxMECjJyJRgK3PdwuC49F5kTL1kxCMZ/ciIZsNEY+ZFIxnR6IdGfD1MNK68hqRj1xgNyYcwJF3b2Ns5kusWQa+/p7T3Dh8sL+wp/7ZMV/+jD/ky8nAZD0N1H1E4EnEZEUM1HVHkdR0dhnR0HR/CdXTB+nauI2qfVY6bSiOw54Rz2L4jap+tjkT0I2KwzqN9Wjoi0Q+JgVgP0z19PqvTn39d+wM="),this.addDataEntry("table",280,160,"Table","7Zpdc6IwFIZ/DfcksSqX1X7sxe6NdvY+ylEyjYQJsWp//QZIrDXSIkUdcZ3pTDiSNHmfHF5yRo8MF+tnSZPojwiBe+TRI0MphCpai/UQOPewz0KPPHgY+/rPw08l36L8Wz+hEmJVpQMuOrxRvoQicp+moNIinKoNN+FpxHj4m27EMhtX0QkHezWQMF3KlL3BCFL2nnXwdTRVUrzCUHAh8yFI0J/M9AzJYMY434nf94ZBB2c9IhqKlQ5mN5mJgVSwLl1cHjIrewaxACU3+pYVC1VkFtgvBPAjYPPIduuaIE2LwHzb90Mr3TByHZaOOBrp+Sdg1RllKxlEQrJ3ESvKt6pQqcY7Kq3YgtMYfgEN90IDEW5MSInEtDjMlGlOhFJiYS6kWV3WDqVIXqicgw1MBec0SdmE2397GBmsExrbacz0tMdmcS5PFkcgmXJpzvJPVYC4HkBCfs6v42z9F6b0arGP3N0v4himOdcvBayo0XbHU87msY5NtSAg90RH5nqn41P+yfaVWvBjEoV8q3NAjpPZDDbKZInnuW5Hjka5XnNMld7oyzhMHXbbeVbCeVeKE98MzvVn8Xd5dBqlW2G0Zul2S+m6j+GW00X9nov3ypO35+D9b64nM9fNZ6Lfei3+udf2Hb5/8+apvfYj6iTvKmIKxgmdZuOt9At4jUTt1XPVLwStkZh7ozWbmEEpuNO66mXAHemf9TlWGK1ZjsgvBXlaA70oyMpWeUUZidAteyWq7pWP90/4gTTjld27il6Jfu6VyK3J2FTtnClVm8hM9H1t5mDyfKFgjVTcG63hVCSlpO5aQOpIN6wPrsJoDYNzaz8WXLc94Cq73zWlnFvmuSH3u9BJMehWdL8GqrLIrfTY1OydKTX3FT/Ji2uxkVtdkUVuVcei7N8CyvZWY1F5PSe4IbJtrMQit+JzQwZ7oeMlsnW2c5wvcXkpyFaJruPtN6jnoFf0tovdWs8W1bkK56dE1d4Tpn1qHiLnPlCvllwLjpj68uPnVsXtu7/G+gc="),this.addDataEntry("table",180,140,"Table","7ZhNc5swEIZ/DXc+HH9cTdv00F7sTu8yWoOmi8QIOUB+fSUjJXEwMbZzgcl4PKNdIVn7PlovkhfFef0oSZH9FhTQi757USyFUG0rr2NA9EKfUS/65oWhr79e+KOnNzj2+gWRwNWQAWE74IngAVpP6yhVg9aRZAzpL9KIg5lRkR2Cs9YSkoMs2RNsoGTPZoCvvWVGqKissWeIsUAhtc0FB9OvpPgHzumFUeybj+6xqwGpoO6N6Oiy4TyCyEHJRj9SMaoy+8SyjdrPgKWZGzazTlK2jvRl7KtAumE1Oq9XdFkvHX0BTqmN0WGdCcmeBVcEnUKKSLV9o1jFciQcfgKh71xrQRvrUqKwLYS9ss2dUErk1pA2XNOmUhR/iEzBORKBSIqS7dD97Hl8UBeEu2Xs9bK3NrgenIOghbdBmy3uZzbrMPt7bIZ+0N3sgnNIjug+1Oh0C1shzmhDkKVcm4kWArR/XWVMwbYgiZmp0nlvtofKzcYIhmoZXdRyfqWUdrKNCZ2nCNfPRlDHx4nS+/XAadnh87LOQcgeepGd+X8aMbL6VOAJEZz3EoymSDAIp4dw8VXa7iltzSmji5Vufn+lW/Ym3WycSbe4rdJ9IOUNSfZuts9NslUvsodJIbuy0o2IYOD3IpxPEeHgUjcmht2TwFetu77WraKBte4TTnVB9+rCpV33xWUUaRdcvtgY+ytl0L0/cdCW04I23ZNd0H+fspokwwmc7bT5eqfcPv72yvk/"),this.addDataEntry("table",180,140,"Table","7ZhLc5swEMc/DXcejh9X3CY9tBe707uM1qCpkBixDpBPX2GkvLBi7LgHmBw8s1okof3/tF4kL1rn9YMiRfZLUuBe9N2L1kpK7Ky8XgPnXugz6kXfvDD09c8L7x1Pg+NTvyAKBA4ZEHYDHgk/QOfpHCU23DiSjHH6kzTy0M6IZMfBtmIFyUGV7BE2ULKndoCvvWVGqKxMY884X0sulW4LKXSf2LwTFELtXPfRZRb9ADIHVI3uUjGKmemx7GLzM2BpZofNjJOUnSN9HvsigzaMEqdVic6romMswOqxaaONM6nYkxRIuNUBicLtK10qlnMi4AcQ+s4VS9oYF8rCWBz2aMydRJS5aSgTbmtTJYvfRKVgHYnknBQl23H72tOQoC6IsMvY62VvTXAOaCUq+Resk4kMFMOhMMPrYM4Wn2c567H8czRDP+hvdSkEJEekH2rn0uKEbISzVOhmorUA7Y+rjCFsC5K0k1U68dudg3m7Z4KhckZn5ZxfqKaZbNNGL1IOl89GuI5PENRb+SBo2UP0vM5B1O6c1E78QY2bWv1W4wlBnDshRhOFGITTo7j4qn3/o/Y1b9mdLYXzz5fCpTMfZ6PNx8V1pfADNa/Iv3ez3Tb/Vk5qd1OjdmEpHBHEwHdSnE+U4uBaOCaM/TPDVzG8XTFcRQOL4Q3OhUH/6sNmZP+LZywZGZy/NRn752jQv5yx3JaT4zbds2HgvpdZTRXjBE6HuvlyOd11f313/Q8="),this.createVertexTemplateEntry("text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;overflow=fill;",180,180,`<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1
Section 1.2
Section 1.3</td></tr><tr><td align="center">Section 2.1
Section 2.2
Section 2.3</td></tr></table>`,"HTML Table 4"),this.addEntry("link hyperlink",mxUtils$1.bind(this,function(){var r=new mxCell$2("Link",new mxGeometry$2(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return r.vertex=!0,this.graph.setLinkForCell(r,"https://www.draw.io"),this.createVertexTemplateFromCells([r],r.geometry.width,r.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils$1.bind(this,function(){var r=new mxCell$2("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry$2(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return r.vertex=!0,this.graph.setAttributeForCell(r,"placeholders","1"),this.createVertexTemplateFromCells([r],r.geometry.width,r.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils$1.bind(this,function(){var r=new mxCell$2("%name% Text",new mxGeometry$2(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return r.vertex=!0,this.graph.setAttributeForCell(r,"placeholders","1"),this.graph.setAttributeForCell(r,"name","Variable"),this.createVertexTemplateFromCells([r],r.geometry.width,r.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;fillColor=#1ba1e2;sketch=1;",120,60,"","Rectangle Sketch",!0,null,"rectangle rect box text sketch comic retro"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillColor=#990000;fillStyle=dots;sketch=1;",120,60,"","Ellipse Sketch",!0,null,"ellipse oval sketch comic retro"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=-1;hachureGap=8;fillStyle=cross-hatch;fillColor=#006600;sketch=1;",120,60,"","Diamond Sketch",!0,null,"diamond sketch comic retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;shape=isoCube2;backgroundOutline=1;isoAngle=15;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;",20,120,"","Left Curly Bracket"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;",20,120,"","Right Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Horizontal Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;direction=south;",20,120,"","Vertical Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",function(){var r=new mxCell$2("Label",new mxGeometry$2(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;");r.vertex=!0;var l=new mxCell$2("",new mxGeometry$2(20,20,20,30),"triangle;html=1;whiteSpace=wrap;");return l.vertex=!0,r.insert(l),e.createVertexTemplateFromCells([r],r.geometry.width,r.geometry.height,"Shape Group")}),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;top=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=waypoint;sketch=0;fillStyle=solid;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",20,20,"","Waypoint"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;",50,50,"","Manual Line",null,i+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;curved=0;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;html=1;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;",50,50,"","Horizontal Elbow",null,i+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;",50,50,"","Vertical Elbow",null,i+"elbow vertical")];this.addPaletteFunctions("misc",mxResources$1.get("misc"),t??!0,n),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addAdvancedPalette=function(t){this.setCurrentSearchEntryLibrary("general","advanced"),this.addPaletteFunctions("advanced",mxResources$1.get("advanced"),t??!1,this.createAdvancedShapes()),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources$1.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.createAdvancedShapes=function(){var t=this,e=new mxCell$2("List Item",new mxGeometry$2(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;");return e.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return t.createVertexTemplateFromData("1ZVNboMwEIVP42UlfkqabCFtNokUiRO4MAWrBiPbKZDTd2xMSJMgVaraKgskzxs/e+YbS5AwqbqNpE25EzlwEj6TMJFC6GFVdQlwTgKP5SRckyDw8CPBy0zWt1mvoRJq/R1DMBg+KD/AoOylyEApFGMqh6zSPXdZ1bKK0xqjOCsZz7e0Fwdzk9I0ex+juBSSHUWtKTa09lF4Y5wngguJcS2sf9qTGq/bKEGxI+zHBi6lHe1Q9U7qlirthExwThvFXm2tRlFaine4uNYWGguZgxF9b5TShmasLlB78IPxfDocZqqgnBU1rjOswljjRrBaK4Mlikm0RqUtmQZzjvG0OFPTpa5GBg41SA3d7Lis5Ga1AVGBlj1uaVmuSzey1WKwlcCKcrR5w5w9qgahOHmn6ePCPYDbjyG8egyphgYV//odlLQBO3YwXTYgGV5nkRppP8U4+g7yFGflMPwOt+A2t9Hg6PSuUdfpGdUTwHOq0dPPoT7OQQ3uHepq+W9Qozmo4b1D9ZeLv6KK4fSjsbkv/6FP",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var i=new mxCell$2("List",new mxGeometry$2(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;html=1;");return i.vertex=!0,i.insert(t.cloneCell(e,"Item 1")),i.insert(t.cloneCell(e,"Item 2")),i.insert(t.cloneCell(e,"Item 3")),t.createVertexTemplateFromCells([i],i.geometry.width,i.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return t.createVertexTemplateFromCells([t.cloneCell(e,"List Item")],e.geometry.width,e.geometry.height,"List Item")})]};Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources$1.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addUmlPalette=function(t){var e=this,i=new mxCell$2("+ field: type",new mxGeometry$2(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;");i.vertex=!0;var n=new mxCell$2("",new mxGeometry$2(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;");n.vertex=!0;var r='newEdgeStyle={"curved":0,"rounded":0};',l="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;"+r,s="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;"+r,a='<hr size="1" style="border-style:solid;"/>',o="uml static class ";this.setCurrentSearchEntryLibrary("uml");var u=[this.createVertexTemplateEntry("html=1;whiteSpace=wrap;",110,50,"Object","Object",null,null,o+"object instance"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,o+"interface object instance annotated annotation"),this.addEntry(o+"object instance",function(){var d=new mxCell$2("Classname",new mxGeometry$2(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;");return d.vertex=!0,d.insert(i.clone()),d.insert(n.clone()),d.insert(e.cloneCell(i,"+ method(type): type")),e.createVertexTemplateFromCells([d],d.geometry.width,d.geometry.height,"Class")}),this.addEntry(o+"section subsection",function(){var d=new mxCell$2("Classname",new mxGeometry$2(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;");return d.vertex=!0,d.insert(i.clone()),d.insert(i.clone()),d.insert(i.clone()),e.createVertexTemplateFromCells([d],d.geometry.width,d.geometry.height,"Class 2")}),this.addEntry(o+"item member method function variable field attribute label",function(){return e.createVertexTemplateFromCells([e.cloneCell(i,"+ item: attribute")],i.geometry.width,i.geometry.height,"Item 1")}),this.addEntry(o+"item member method function variable field attribute label",function(){var d=new mxCell$2("item: attribute",new mxGeometry$2(0,0,120,i.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;whiteSpace=wrap;html=1;image="+e.gearImage);return d.vertex=!0,e.createVertexTemplateFromCells([d],d.geometry.width,d.geometry.height,"Item 2")}),this.addEntry(o+"divider hline line separator",function(){return e.createVertexTemplateFromCells([n.clone()],n.geometry.width,n.geometry.height,"Divider")}),this.addEntry(o+"spacer space gap separator",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return d.vertex=!0,e.createVertexTemplateFromCells([d.clone()],d.geometry.width,d.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;html=1;",80,26,"Title","Title",null,null,o+"title label"),this.addEntry(o+"component",function(){var d=new mxCell$2("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry$2(0,0,180,90),"html=1;dropTarget=0;whiteSpace=wrap;");d.vertex=!0;var p=new mxCell$2("",new mxGeometry$2(1,0,20,20),"shape=module;jettyWidth=8;jettyHeight=4;");return p.vertex=!0,p.geometry.relative=!0,p.geometry.offset=new mxPoint(-27,7),d.insert(p),e.createVertexTemplateFromCells([d],d.geometry.width,d.geometry.height,"Component")}),this.addEntry(o+"component",function(){var d=new mxCell$2('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p>'+a+'<p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry$2(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;whiteSpace=wrap;");d.vertex=!0;var p=new mxCell$2("",new mxGeometry$2(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return p.vertex=!0,p.geometry.relative=!0,p.geometry.offset=new mxPoint(-24,4),d.insert(p),e.createVertexTemplateFromCells([d],d.geometry.width,d.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;whiteSpace=wrap;",180,120,"Block","Block",null,null,o+"block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;",100,50,"Module","Module",null,null,o+"module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;whiteSpace=wrap;",70,50,"package","Package",null,null,o+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p>'+a+'<p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,o+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(o+"object instance",function(){var d=new mxCell$2('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p>'+a+'<div style="height:2px;"></div>',new mxGeometry$2(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return d.vertex=!0,e.createVertexTemplateFromCells([d.clone()],d.geometry.width,d.geometry.height,"Class 3")}),this.addEntry(o+"object instance",function(){var d=new mxCell$2('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p>'+a+'<div style="height:2px;"></div>'+a+'<div style="height:2px;"></div>',new mxGeometry$2(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return d.vertex=!0,e.createVertexTemplateFromCells([d.clone()],d.geometry.width,d.geometry.height,"Class 4")}),this.addEntry(o+"object instance",function(){var d=new mxCell$2('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p>'+a+'<p style="margin:0px;margin-left:4px;">+ field: Type</p>'+a+'<p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry$2(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return d.vertex=!0,e.createVertexTemplateFromCells([d.clone()],d.geometry.width,d.geometry.height,"Class 5")}),this.addEntry(o+"object instance",function(){var d=new mxCell$2('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p>'+a+'<p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p>'+a+'<p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry$2(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;");return d.vertex=!0,e.createVertexTemplateFromCells([d.clone()],d.geometry.width,d.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;sketch=0;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;sketch=0;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addDataEntry("uml lollipop notation provided required interface",20,20,"Required Interface","jVNBbuMwDHyN7o6N9L5x2l66QIEe9qy1GUutIhoUHTt9/VKWNo7bBu0hgDicYeQZSlX1cXok3Zvf2IJT1b2qakLkdDpONTinysK2qtqrsizkp8qHG93N3C16TeD5J4IyCU7aDZCQBAQ+uwwQDr6FyC9UtUNigx167Z4QewE3Ar4C8/nFvkeFHhgFMnx0uQu+/UWEo5RGu0NtqYmzI/5gncuDpcoT7qQKTPgGf2zLJk8Jb8CNyeQDes7sTSl1M9BpvmJkpi+AtoOVKaypg2xK9dmnmZVNegQ8AtNZKAROsz2tR+mQyu7Cu0if0crEspiyv9ukOKdyu9YHHKiBLFlSksPVHRZozu7rHKvvcxSB7UM0fjSW4aXXTeyMsnvrvLSznZdzI94ARSD00ESbDnaKLu8OEluNDqW59+jhEtgHkCDYd/13vkGMrQey8lFxaJ7+vCA7QtZ8xdbO4ThvTvivj07N3m13aruP6ziws17+1/t0xWUBTkAM0813cSPvMa9cZKSnUxiwneE19tUGrOJbspJyec8p2uvn/g8="),this.addEntry("uml lollipop notation provided required interface",function(){return e.createVertexTemplateFromData("zZRNb9swDIZ/je6O3ey+OGsvG1Cgh55Vm7G0KqJB07HTXz/KUux4bbBdNvRgQHz5IYmPTFWUx/GBdGt+YA1OFd9UURIix9VxLME5lWe2VsVe5Xkmn8rvb3g3kzdrNYHnv0koYsJJux6iEoWOzy4JhL2vIcRnqtghscEGvXbfEVsRNyL+BObzk30LGbpnFMnw0SUv+PorEQ5iGu0OpaUq1A76vXUuFRYrVfgiVseEr/BsazapSvcKXJkUHA8JdQOre7OmBtK97963YopKfXgAPALTWUIInGZ7WpfSXTSbOW5OfUQrFfNsTBvFDmfnaG7X+R32VEFKWUDI4uoMizTh+RhV/n9RoWz0DtIKQroakJVbAD21urK+Sc6I4oZzYb35NDT/Nb67P+OTBNt24dcYjGUIPQueQabDGpN2tvGyrqQZQEHoWqhCXw52DPx3B2FWokNx7j16mH+p30SCzr7pl+kEAUV7ATZXf1yUHSFrvorWzuEwPZjukh86NfVuu1PbfXiFPTvrZV/v4xE3M/ETEMN4c3LdAHxJSKSGNCOClP5EA7YxvNY+egErmgs6MZcBHElfz+df",40,10,"Lollipop Notation")}),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");d.vertex=!0;var p=new mxCell$2("",new mxGeometry$2(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return p.geometry.setTerminalPoint(new mxPoint(15,90),!1),p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!0),e.createVertexTemplateFromCells([d,p],30,90,"Start")}),this.addEntry("uml activity state",function(){var d=new mxCell$2("Activity",new mxGeometry$2(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");d.vertex=!0;var p=new mxCell$2("",new mxGeometry$2(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return p.geometry.setTerminalPoint(new mxPoint(60,100),!1),p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!0),e.createVertexTemplateFromCells([d,p],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var d=new mxCell$2("Composite State",new mxGeometry$2(0,0,160,60),"swimlane;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;");d.vertex=!0;var p=new mxCell$2("Subtitle",new mxGeometry$2(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;");p.vertex=!0,d.insert(p);var c=new mxCell$2("",new mxGeometry$2(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return c.geometry.setTerminalPoint(new mxPoint(80,120),!1),c.geometry.relative=!0,c.edge=!0,d.insertEdge(c,!0),e.createVertexTemplateFromCells([d,c],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var d=new mxCell$2("Condition",new mxGeometry$2(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");d.vertex=!0;var p=new mxCell$2("no",new mxGeometry$2(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");p.geometry.setTerminalPoint(new mxPoint(180,20),!1),p.geometry.relative=!0,p.geometry.x=-1,p.edge=!0,d.insertEdge(p,!0);var c=new mxCell$2("yes",new mxGeometry$2(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");return c.geometry.setTerminalPoint(new mxPoint(40,100),!1),c.geometry.relative=!0,c.geometry.x=-1,c.edge=!0,d.insertEdge(c,!0),e.createVertexTemplateFromCells([d,p,c],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");d.vertex=!0;var p=new mxCell$2("",new mxGeometry$2(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return p.geometry.setTerminalPoint(new mxPoint(100,80),!1),p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!0),e.createVertexTemplateFromCells([d,p],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry(l,100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry(l+"participant=umlActor;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry(l+"participant=umlBoundary;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry(l+"participant=umlEntity;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry(l+"participant=umlControl;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;pointerEvents=0;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;targetShapes=umlLifeline;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.addEntry("uml sequence invoke invocation call activation bar",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,10,80),s);d.vertex=!0;var p=new mxCell$2("dispatch",new mxGeometry$2(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;curved=0;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=5;");return p.geometry.setTerminalPoint(new mxPoint(-70,5),!0),p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!1),e.createVertexTemplateFromCells([d,p],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation bar",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,10,80),s);d.vertex=!0;var p=new mxCell$2("dispatch",new mxGeometry$2(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=5;");p.geometry.setTerminalPoint(new mxPoint(-70,5),!0),p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!1);var c=new mxCell$2("return",new mxGeometry$2(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=-5;");return c.geometry.setTerminalPoint(new mxPoint(-70,75),!1),c.geometry.relative=!0,c.edge=!0,d.insertEdge(c,!0),e.createVertexTemplateFromCells([d,p,c],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation bar",function(){var d=new mxCell$2("",new mxGeometry$2(-5,20,10,40),s);d.vertex=!0;var p=new mxCell$2("self call",new mxGeometry$2(0,0,0,0),"html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;");return p.geometry.setTerminalPoint(new mxPoint(0,0),!0),p.geometry.points=[new mxPoint(30,30)],p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!1),e.createVertexTemplateFromCells([d,p],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation bar",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,10,80),s);d.vertex=!0;var p=new mxCell$2("callback",new mxGeometry$2(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=5;");p.geometry.setTerminalPoint(new mxPoint(80,5),!0),p.geometry.relative=!0,p.edge=!0,d.insertEdge(p,!1);var c=new mxCell$2("return",new mxGeometry$2(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=-5;");return c.geometry.setTerminalPoint(new mxPoint(80,75),!1),c.geometry.relative=!0,c.edge=!0,d.insertEdge(c,!0),e.createVertexTemplateFromCells([d,p,c],10,80,"Callback")}),this.createVertexTemplateEntry(s,10,80,"","Activation Bar",null,null,"uml sequence activation bar"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;curved=0;rounded=0;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;curved=0;rounded=0;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var d=new mxCell$2("return",new mxGeometry$2(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;");return d.geometry.setTerminalPoint(new mxPoint(80,0),!0),d.geometry.setTerminalPoint(new mxPoint(0,0),!1),d.geometry.relative=!0,d.edge=!0,e.createEdgeTemplateFromCells([d],80,0,"Return")}),this.addEntry("uml relation",function(){var d=new mxCell$2("name",new mxGeometry$2(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");d.geometry.setTerminalPoint(new mxPoint(0,0),!0),d.geometry.setTerminalPoint(new mxPoint(160,0),!1),d.geometry.relative=!0,d.geometry.x=-1,d.edge=!0;var p=new mxCell$2("1",new mxGeometry$2(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return p.geometry.relative=!0,p.setConnectable(!1),p.vertex=!0,d.insert(p),e.createEdgeTemplateFromCells([d],160,0,"Relation 1")}),this.addEntry("uml association",function(){var d=new mxCell$2("",new mxGeometry$2(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");d.geometry.setTerminalPoint(new mxPoint(0,0),!0),d.geometry.setTerminalPoint(new mxPoint(160,0),!1),d.geometry.relative=!0,d.edge=!0;var p=new mxCell$2("parent",new mxGeometry$2(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");p.geometry.relative=!0,p.setConnectable(!1),p.vertex=!0,d.insert(p);var c=new mxCell$2("child",new mxGeometry$2(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;");return c.geometry.relative=!0,c.setConnectable(!1),c.vertex=!0,d.insert(c),e.createEdgeTemplateFromCells([d],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var d=new mxCell$2("1",new mxGeometry$2(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return d.geometry.setTerminalPoint(new mxPoint(0,0),!0),d.geometry.setTerminalPoint(new mxPoint(160,0),!1),d.geometry.relative=!0,d.geometry.x=-1,d.geometry.y=3,d.edge=!0,e.createEdgeTemplateFromCells([d],160,0,"Aggregation 1")}),this.addEntry("uml composition",function(){var d=new mxCell$2("1",new mxGeometry$2(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return d.geometry.setTerminalPoint(new mxPoint(0,0),!0),d.geometry.setTerminalPoint(new mxPoint(160,0),!1),d.geometry.relative=!0,d.geometry.x=-1,d.geometry.y=3,d.edge=!0,e.createEdgeTemplateFromCells([d],160,0,"Composition 1")}),this.addEntry("uml relation",function(){var d=new mxCell$2("Relation",new mxGeometry$2(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");d.geometry.setTerminalPoint(new mxPoint(0,0),!0),d.geometry.setTerminalPoint(new mxPoint(160,0),!1),d.geometry.relative=!0,d.edge=!0;var p=new mxCell$2("0..n",new mxGeometry$2(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=top;");p.geometry.relative=!0,p.setConnectable(!1),p.vertex=!0,d.insert(p);var c=new mxCell$2("1",new mxGeometry$2(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=top;");return c.geometry.relative=!0,c.setConnectable(!1),c.vertex=!0,d.insert(c),e.createEdgeTemplateFromCells([d],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",mxResources$1.get("uml"),t||!1,u),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.createTitle=function(t){var e=document.createElement("a");e.setAttribute("title",mxResources$1.get("sidebarTooltip")),e.className="geTitle";var i=document.createElement("span");return mxUtils$1.write(i,t),e.appendChild(i),e};Sidebar.prototype.createThumb=function(t,e,i,n,r,l,s,a,o,u,d,p){this.graph.labelsVisible=l==null||l;var c=mxClient$1.NO_FO;mxClient$1.NO_FO=Editor.prototype.originalNoForeignObject,this.graph.shapeBackgroundColor=u??(Editor.isDarkMode()?"#2a252f":"#f1f3f4"),this.graph.view.scaleAndTranslate(p??1,0,0),this.graph.addCells(t);var g=this.graph.getGraphBounds();if(p==null){var x=Math.floor(Math.min((e-2*this.thumbBorder)/g.width,(i-2*this.thumbBorder)/g.height)*100)/100;this.graph.view.scaleAndTranslate(x,(e-g.width*x)/2/x-g.x,(i-g.height*x)/2/x-g.y)}var C=null;if(this.graph.dialect==mxConstants$1.DIALECT_SVG&&!mxClient$1.NO_FO&&this.graph.view.getCanvas().ownerSVGElement!=null?C=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0):(C=this.graph.container.cloneNode(!1),C.innerHTML=this.graph.container.innerHTML),this.graph.getModel().clear(),this.graph.view.scaleAndTranslate(1,0,0),this.graph.shapeBackgroundColor=Editor.isDarkMode()?"#2a252f":"#f1f3f4",mxClient$1.NO_FO=c,C.style.position="relative",C.style.overflow=p!=null?"visible":"hidden",C.style.left=(d??this.thumbBorder)+"px",C.style.top=C.style.left,C.style.width=e+"px",C.style.height=i+"px",C.style.visibility="",C.style.minWidth="",C.style.minHeight="",this.disablePointerEvents(C),n.appendChild(C),this.sidebarTitles&&r!=null&&s!=!1){var d=0;n.style.height=this.thumbHeight+d+this.sidebarTitleSize+8+"px";var T=document.createElement("div");T.style.color=Editor.isDarkMode()?"#A0A0A0":"#303030",T.style.fontSize=this.sidebarTitleSize+"px",T.style.textAlign="center",T.style.whiteSpace="nowrap",T.style.overflow="hidden",T.style.textOverflow="ellipsis",mxClient$1.IS_IE&&(T.style.height=this.sidebarTitleSize+12+"px"),T.style.paddingTop="4px",mxUtils$1.write(T,r),n.appendChild(T)}return g};Sidebar.prototype.createSection=function(t){return mxUtils$1.bind(this,function(){var e=document.createElement("div");return e.setAttribute("title",t),e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.style.textAlign="center",e.style.overflow="hidden",e.style.width="100%",e.style.padding="14px 0",mxUtils$1.write(e,t),e})};Sidebar.prototype.createItem=function(t,e,i,n,r,l,s,a,o,u,d,p,c,g){a=a??!0,u=u??this.thumbWidth,d=d??this.thumbHeight;var x=document.createElement("a");x.className="geItem",x.style.overflow="hidden";var C=2*this.thumbBorder;x.style.width=u+C+"px",x.style.height=d+C+"px",x.style.padding=this.thumbPadding+"px",mxEvent$1.addListener(x,"click",function(_){mxEvent$1.consume(_)});var T=new mxRectangle$1(0,0,r,l);if(t!=null&&t.length>0){var A=t;if(t=this.graph.cloneCells(t),this.graph.pasteCellStyles(this.graph.includeDescendants(A),this.initialDefaultVertexStyle,this.initialDefaultEdgeStyle),p!=null?(x.style.backgroundImage="url("+p+")",x.style.backgroundRepeat="no-repeat",x.style.backgroundPosition="center",x.style.backgroundSize="24px 24px"):this.createThumb(A,u,d,x,e,i,n,r,l),t.length>1||t[0].vertex){var R=this.createDragSource(x,this.createDropHandler(t,!0,s,T,c,g),this.createDragPreview(r,l),t,T,c);this.addClickHandler(x,R,t,o,c),R.isGuidesEnabled=mxUtils$1.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})}else if(t[0]!=null&&t[0].edge){var R=this.createDragSource(x,this.createDropHandler(t,!1,s,T,c,g),this.createDragPreview(r,l),t,T,c);this.addClickHandler(x,R,t,o)}!mxClient$1.IS_IOS&&a&&mxEvent$1.addGestureListeners(x,null,mxUtils$1.bind(this,function(_){mxEvent$1.isMouseEvent(_)&&this.showTooltip(x,t,T.width,T.height,e,i)}))}else x.style.backgroundImage="url("+Editor.svgBrokenImage.src+")",x.setAttribute("title",e);return x};Sidebar.prototype.createDropHandler=function(t,e,i,n,r,l){return i=i??!0,mxUtils$1.bind(this,function(s,a,o,u,d,p){for(var c=p?null:mxEvent$1.isTouchEvent(a)||mxEvent$1.isPenEvent(a)?document.elementFromPoint(mxEvent$1.getClientX(a),mxEvent$1.getClientY(a)):mxEvent$1.getSource(a);c!=null&&c!=this.container;)c=c.parentNode;if(c==null&&s.isEnabled()){if(t=s.getImportableCells(t),t.length>0){s.stopEditing();var g=o!=null&&!mxEvent$1.isAltDown(a)?s.isValidDropTarget(o,t,a):!1,x=null;if(o!=null&&!g&&(o=null),!s.isCellLocked(o||s.getDefaultParent())){s.model.beginUpdate();try{if(u=Math.round(u),d=Math.round(d),e&&s.isSplitTarget(o,t,a)){var C=s.view.scale,T=s.view.translate,A=(u+T.x)*C,R=(d+T.y)*C,_=s.cloneCells(t);s.splitEdge(o,_,null,u-n.width/2,d-n.height/2,A,R),x=_}else if(t.length>0&&(x=s.importCells(t,u,d,o),s.model.isVertex(l)&&x.length==1&&s.model.isVertex(x[0]))){var N=s.insertEdge(s.model.getParent(l),null,"",l,x[0],s.createCurrentEdgeStyle());s.applyNewEdgeStyle(l,[N]),x.push(N),s.connectionHandler.insertBeforeSource&&s.insertEdgeBeforeCell(N,l)}if(s.layoutManager!=null){var H=s.layoutManager.getLayout(o);if(H!=null)for(var C=s.view.scale,T=s.view.translate,A=(u+T.x)*C,R=(d+T.y)*C,k=0;k<x.length;k++)H.moveCell(x[k],A,R)}i&&(a==null||!mxEvent$1.isShiftDown(a))&&s.fireEvent(new mxEventObject$1("cellsInserted","cells",x));for(var k=0;k<x.length;k++)s.model.isVertex(x[k])&&s.isAutoSizeCell(x[k])&&s.updateCellSize(x[k])}catch(K){this.editorUi.handleError(K)}finally{s.model.endUpdate()}x!=null&&x.length>0&&(s.scrollCellToVisible(x[0]),s.setSelectionCells(x)),(r||s.editAfterInsert&&a!=null&&mxEvent$1.isMouseEvent(a)&&x!=null&&x.length==1)&&window.setTimeout(function(){s.startEditing(x[0])},0)}}mxEvent$1.consume(a)}})};Sidebar.prototype.createDragPreview=function(t,e){var i=document.createElement("div");return i.className="geDragPreview",i.style.width=t+"px",i.style.height=e+"px",i};Sidebar.prototype.dropAndConnect=function(t,e,i,n,r,l,s){var a=this.editorUi.editor.graph,o=a.model.isEdge(t)||l!=null?l:s,u=this.getDropAndConnectGeometry(t,e[o],i,e),d=[];if(u!=null){var p=null;a.model.beginUpdate();try{var c=a.getCellGeometry(t),g=a.getCellGeometry(e[n]),x=a.model.getParent(t),C=!0;if(a.layoutManager!=null){var T=a.layoutManager.getLayout(x);T!=null&&T.constructor==mxStackLayout&&(C=!1)}var d=a.model.isEdge(t)?null:a.view.getState(x),A=0,R=0;if(d!=null){var _=d.origin;A=_.x,R=_.y}var N=!a.isTableRow(t)&&!a.isTableCell(t)&&(a.model.isEdge(t)||c!=null&&!c.relative&&C),H=a.getCellAt((u.x+A+a.view.translate.x)*a.view.scale,(u.y+R+a.view.translate.y)*a.view.scale,null,null,null,function(Y,B,U){return!a.isContainer(Y.cell)});if(H!=null&&H!=x){if(d=a.view.getState(H),d!=null){var _=d.origin;x=H,N=!0,a.model.isEdge(t)||(u.x-=_.x-A,u.y-=_.y-R)}}else(!C||a.isTableRow(t)||a.isTableCell(t))&&(u.x+=A,u.y+=R);if(A=g.x,R=g.y,a.model.isEdge(e[n])&&(A=0,R=0),e=a.importCells(e,u.x-(N?A:0),u.y-(N?R:0),N?x:null),d=e,a.model.isEdge(t))a.model.setTerminal(t,e[n],i==mxConstants$1.DIRECTION_NORTH),s!=null&&l!=null&&(a.model.remove(e[s]),a.updateShapes(e[s],[t]));else if(a.model.isEdge(e[n])&&l==null){a.model.setTerminal(e[n],t,!0);var k=a.getCellGeometry(e[n]),K=k!=null?k.getTerminalPoint(!0):null;if(k.points=null,K!=null){for(var Q=0;Q<e.length;Q++)if(a.model.isEdge(e[Q])&&Q!=n){var nt=a.getCellGeometry(e[Q]),dt=nt!=null?nt.getTerminalPoint(!0):null;dt!=null&&dt.x==K.x&&dt.y==K.y&&a.model.setTerminal(e[Q],t,!0)}}if(k.getTerminalPoint(!1)!=null)k.setTerminalPoint(u.getTerminalPoint(!1),!1);else if(N&&a.model.isVertex(x)){var mt=a.view.getState(x),_=mt.cell!=a.view.currentRoot?mt.origin:new mxPoint(0,0);a.cellsMoved(e,_.x,_.y,null,null,!0)}}else l!=null&&(g=a.getCellGeometry(e[l]),A=u.x-Math.round(g.x),R=u.y-Math.round(g.y),u.x=Math.round(g.x),u.y=Math.round(g.y),a.model.setGeometry(e[n],u),a.cellsMoved(e,A,R,null,null,!0),d=e.slice(),p=d.length==1?d[0]:null,s!=null?a.model.setTerminal(e[s],t,!0):e.push(a.insertEdge(null,null,"",t,e[n],a.createCurrentEdgeStyle())));(r==null||!mxEvent$1.isShiftDown(r))&&a.fireEvent(new mxEventObject$1("cellsInserted","cells",e))}catch(xt){this.editorUi.handleError(xt)}finally{a.model.endUpdate()}a.editAfterInsert&&r!=null&&mxEvent$1.isMouseEvent(r)&&p!=null&&window.setTimeout(function(){a.startEditing(p)},0)}return s!=null&&d.length>1&&d.splice(s,1),d};Sidebar.prototype.getDropAndConnectGeometry=function(t,e,i,n){var r=this.editorUi.editor.graph,l=r.view,s=n.length>1,a=r.view.getState(t),o=r.getCellGeometry(t),u=r.getCellGeometry(e);if(a!=null&&o!=null&&u!=null)if(u=u.clone(),r.model.isEdge(t)){var d=a.absolutePoints,p=d[0],c=d[d.length-1];i==mxConstants$1.DIRECTION_NORTH?(u.x=p.x/l.scale-l.translate.x-u.width/2,u.y=p.y/l.scale-l.translate.y-u.height/2):(u.x=c.x/l.scale-l.translate.x-u.width/2,u.y=c.y/l.scale-l.translate.y-u.height/2)}else{o.relative&&(o=o.clone(),o.x=(a.x-l.translate.x)/l.scale,o.y=(a.y-l.translate.y)/l.scale);var g=r.defaultEdgeLength;if(r.model.isEdge(e)&&u.getTerminalPoint(!0)!=null&&u.getTerminalPoint(!1)!=null){var p=u.getTerminalPoint(!0),c=u.getTerminalPoint(!1),x=c.x-p.x,C=c.y-p.y;g=Math.sqrt(x*x+C*C),u.x=o.getCenterX(),u.y=o.getCenterY(),u.width=1,u.height=1,i==mxConstants$1.DIRECTION_NORTH?(u.height=g,u.y=o.y-g,u.setTerminalPoint(new mxPoint(u.x,u.y),!1)):i==mxConstants$1.DIRECTION_EAST?(u.width=g,u.x=o.x+o.width,u.setTerminalPoint(new mxPoint(u.x+u.width,u.y),!1)):i==mxConstants$1.DIRECTION_SOUTH?(u.height=g,u.y=o.y+o.height,u.setTerminalPoint(new mxPoint(u.x,u.y+u.height),!1)):i==mxConstants$1.DIRECTION_WEST&&(u.width=g,u.x=o.x-g,u.setTerminalPoint(new mxPoint(u.x,u.y),!1))}else if(!s&&u.width>45&&u.height>45&&o.width>45&&o.height>45&&(u.width=u.width*(o.height/u.height),u.height=o.height),u.x=o.x+o.width/2-u.width/2,u.y=o.y+o.height/2-u.height/2,i==mxConstants$1.DIRECTION_NORTH?u.y=u.y-o.height/2-u.height/2-g:i==mxConstants$1.DIRECTION_EAST?u.x=u.x+o.width/2+u.width/2+g:i==mxConstants$1.DIRECTION_SOUTH?u.y=u.y+o.height/2+u.height/2+g:i==mxConstants$1.DIRECTION_WEST&&(u.x=u.x-o.width/2-u.width/2-g),r.model.isEdge(e)&&u.getTerminalPoint(!0)!=null&&e.getTerminal(!1)!=null){var T=r.getCellGeometry(e.getTerminal(!1));T!=null&&(i==mxConstants$1.DIRECTION_NORTH?(u.x-=T.getCenterX(),u.y-=T.getCenterY()+T.height/2):i==mxConstants$1.DIRECTION_EAST?(u.x-=T.getCenterX()-T.width/2,u.y-=T.getCenterY()):i==mxConstants$1.DIRECTION_SOUTH?(u.x-=T.getCenterX(),u.y-=T.getCenterY()-T.height/2):i==mxConstants$1.DIRECTION_WEST&&(u.x-=T.getCenterX()+T.width/2,u.y-=T.getCenterY()))}}return u};Sidebar.prototype.isDropStyleEnabled=function(t,e){var i=!0;if(e!=null&&t.length==1){var n=this.graph.getCellStyle(t[e]);n!=null&&(i=mxUtils$1.getValue(n,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(n,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE)}return i};Sidebar.prototype.isDropStyleTargetIgnored=function(t){return this.graph.isSwimlane(t.cell)||this.graph.isTableCell(t.cell)||this.graph.isTableRow(t.cell)||this.graph.isTable(t.cell)};Sidebar.prototype.disablePointerEvents=function(t){mxUtils$1.visitNodes(t,mxUtils$1.bind(this,function(e){e.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(e.style.pointerEvents="none",e.removeAttribute("pointer-events"))}))};Sidebar.prototype.createDragSource=function(t,e,i,n,r,l){for(var s=this,a=this.editorUi,o=a.editor.graph,u=null,d=null,p=this,c=0,g=this.livePreview,x=0;x<n.length&&g;x++)c+=o.model.getDescendants(n[x]).length,g=c<o.graphHandler.maxLivePreview;for(var x=0;x<n.length&&(d==null&&o.model.isVertex(n[x])?d=x:u==null&&o.model.isEdge(n[x])&&o.model.getTerminal(n[x],!0)==null&&(u=x),!(d!=null&&u!=null));x++);var C=this.isDropStyleEnabled(n,d),T=mxUtils$1.makeDraggable(t,o,mxUtils$1.bind(this,function(gt,Tt,vt,Pt,Dt){if(this.updateThread!=null&&window.clearTimeout(this.updateThread),n!=null&&H!=null&&lt==mt){var zt=gt.isCellSelected(H.cell)?gt.getSelectionCells():[H.cell];gt.updateShapes(gt.model.isEdge(H.cell)?n[0]:n[d],zt,!0),gt.setSelectionCells(zt)}else if(n!=null&&lt!=null&&_!=null&&lt!=mt){var Rt=gt.model.isEdge(_.cell)||u==null?d:u;gt.setSelectionCells(this.dropAndConnect(_.cell,n,U,Rt,Tt,d,u))}else e.apply(this,arguments);this.editorUi.hoverIcons!=null&&this.editorUi.hoverIcons.update(gt.view.getState(gt.getSelectionCell()))}),i,0,0,o.autoscroll,!0,!0);g&&(T.createDragElement=mxUtils$1.bind(this,function(){return T.createPreviewElement(this.graph)}),T.createPreviewElement=mxUtils$1.bind(this,function(gt){var Tt=document.createElement("a");Tt.className="geItem",Tt.style.overflow="visible";var vt=gt.view.scale;Tt.style.width=vt*Math.max(1,r.width)+"px",Tt.style.height=vt*Math.max(1,r.height)+"px",mxUtils$1.setOpacity(Tt,50);var Pt=o.cloneCells(n);return this.graph.pasteCellStyles(o.includeDescendants(Pt),o.currentVertexStyle,o.currentEdgeStyle,null,o.pasteEdgeStyle),p.createThumb(Pt,vt*Math.max(1,r.width),vt*Math.max(1,r.height),Tt,null,null,null,null,null,o.shapeBackgroundColor,0,vt),Tt}));var A=T.mouseDown;T.mouseDown=function(gt){!mxEvent$1.isPopupTrigger(gt)&&!mxEvent$1.isMultiTouchEvent(gt)&&!o.isCellLocked(o.getDefaultParent())&&(o.stopEditing(),A.apply(this,arguments))};function R(gt,Tt){var vt=null;return vt=mxUtils$1.createImage(gt.src),vt.style.width=gt.width+"px",vt.style.height=gt.height+"px",Tt!=null&&vt.setAttribute("title",Tt),mxUtils$1.setOpacity(vt,gt==s.refreshTarget?30:20),vt.style.position="absolute",vt.style.cursor="crosshair",vt}var _=null,N=null,H=null,k=!1,K=R(this.triangleUp,mxResources$1.get("connect")),Q=R(this.triangleRight,mxResources$1.get("connect")),nt=R(this.triangleDown,mxResources$1.get("connect")),dt=R(this.triangleLeft,mxResources$1.get("connect")),mt=R(this.refreshTarget,mxResources$1.get("replace")),xt=null,Y=R(this.roundDrop),B=R(this.roundDrop),U=mxConstants$1.DIRECTION_NORTH,lt=null;function tt(gt,Tt,vt,Pt){return Pt.parentNode!=null&&(mxUtils$1.contains(vt,gt,Tt)?(mxUtils$1.setOpacity(Pt,100),lt=Pt):mxUtils$1.setOpacity(Pt,Pt==mt?30:20)),vt}var st=T.createPreviewElement;T.createPreviewElement=function(gt){var Tt=st.apply(this,arguments);return mxClient$1.IS_SVG&&(Tt.style.pointerEvents="none"),this.previewElementWidth=Tt.style.width,this.previewElementHeight=Tt.style.height,Tt};var ft=T.dragEnter;T.dragEnter=function(gt,Tt){a.hoverIcons!=null&&a.hoverIcons.setDisplay("none"),ft.apply(this,arguments)};var $t=T.dragExit;T.dragExit=function(gt,Tt){a.hoverIcons!=null&&a.hoverIcons.setDisplay(""),$t.apply(this,arguments)},T.dragOver=function(gt,Tt){if(mxDragSource$1.prototype.dragOver.apply(this,arguments),this.currentGuide!=null&&lt!=null&&this.currentGuide.hide(),this.previewElement!=null){a.hideShapePicker();var vt=gt.view;if(H!=null&&lt==mt)this.previewElement.style.display="none";else if(_!=null&&lt!=null){T.currentHighlight!=null&&T.currentHighlight.state!=null&&T.currentHighlight.hide();var Pt=gt.model.isEdge(_.cell)||d!=null?d:u,Dt=p.getDropAndConnectGeometry(_.cell,n[Pt],U,n),zt=gt.model.isEdge(_.cell)?null:gt.getCellGeometry(_.cell),Rt=gt.getCellGeometry(n[Pt]),Nt=gt.model.getParent(_.cell),Bt=vt.translate.x*vt.scale,kt=vt.translate.y*vt.scale;if(zt!=null&&!zt.relative&&gt.model.isVertex(Nt)&&Nt!=vt.currentRoot){var Xt=vt.getState(Nt);Bt=Xt.x,kt=Xt.y}var ie=Rt.x,At=Rt.y;gt.model.isEdge(n[Pt])&&(ie=0,At=0),this.previewElement.style.left=(Dt.x-ie)*vt.scale+Bt+"px",this.previewElement.style.top=(Dt.y-At)*vt.scale+kt+"px",n.length==1&&(this.previewElement.style.width=Dt.width*vt.scale+"px",this.previewElement.style.height=Dt.height*vt.scale+"px",this.previewElement.firstChild!=null&&(this.previewElement.firstChild.style.display="none",this.previewElement.className="geDragPreview",mxUtils$1.setOpacity(this.previewElement,100))),this.previewElement.style.display=""}else T.currentHighlight!=null&&T.currentHighlight.state!=null&&gt.model.isEdge(T.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-r.width*vt.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-r.height*vt.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display="",this.previewElement.firstChild!=null&&(this.previewElement.firstChild.style.display="",mxUtils$1.setOpacity(this.previewElement,50),this.previewElement.className=""))}};var Ct=new Date().getTime(),pt=0,ct=null,Mt=this.editorUi.editor.graph.getCellStyle(n[0]);T.getDropTarget=mxUtils$1.bind(this,function(gt,Tt,vt,Pt){var Dt=!mxEvent$1.isAltDown(Pt)&&n!=null?gt.getCellAt(Tt,vt,null,null,null,function(se,S,I){return gt.isContainer(se.cell)&&mxUtils$1.getValue(se.style,"dropTarget","1")!="0"}):null;if(Dt!=null&&!this.graph.isCellConnectable(Dt)&&!this.graph.model.isEdge(Dt)){var zt=this.graph.getModel().getParent(Dt);this.graph.getModel().isVertex(zt)&&this.graph.isCellConnectable(zt)&&(Dt=zt)}gt.isCellLocked(Dt)&&(Dt=null);var Rt=gt.view.getState(Dt);lt=null;var Nt=null;if(ct!=Rt?(Ct=new Date().getTime(),pt=0,ct=Rt,this.updateThread!=null&&window.clearTimeout(this.updateThread),Rt!=null&&(this.updateThread=window.setTimeout(function(){lt==null&&(ct=Rt,T.getDropTarget(gt,Tt,vt,Pt))},this.dropTargetDelay+10))):pt=new Date().getTime()-Ct,C&&pt<2500&&Rt!=null&&!mxEvent$1.isShiftDown(Pt)&&(mxUtils$1.getValue(Rt.style,mxConstants$1.STYLE_SHAPE)!=mxUtils$1.getValue(Mt,mxConstants$1.STYLE_SHAPE)&&(mxUtils$1.getValue(Rt.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(Rt.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(Rt.style,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE)||mxUtils$1.getValue(Mt,mxConstants$1.STYLE_SHAPE)=="image"||pt>1500||gt.model.isEdge(Rt.cell))&&pt>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(Rt)&&(gt.model.isVertex(Rt.cell)&&d!=null||gt.model.isEdge(Rt.cell)&&gt.model.isEdge(n[0]))){if(gt.isCellEditable(Rt.cell)){H=Rt;var Bt=gt.model.isEdge(Rt.cell)?gt.view.getPoint(Rt):new mxPoint(Rt.getCenterX(),Rt.getCenterY());Bt=new mxRectangle$1(Bt.x-this.refreshTarget.width/2,Bt.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),mt.style.left=Math.floor(Bt.x)+"px",mt.style.top=Math.floor(Bt.y)+"px",xt==null&&(gt.container.appendChild(mt),xt=mt.parentNode),tt(Tt,vt,Bt,mt)}}else if(H==null||!mxUtils$1.contains(H,Tt,vt)||pt>1500&&!mxEvent$1.isShiftDown(Pt))H=null,xt!=null&&(mt.parentNode.removeChild(mt),xt=null);else if(H!=null&&xt!=null){var Bt=gt.model.isEdge(H.cell)?gt.view.getPoint(H):new mxPoint(H.getCenterX(),H.getCenterY());Bt=new mxRectangle$1(Bt.x-this.refreshTarget.width/2,Bt.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),tt(Tt,vt,Bt,mt)}if(k&&_!=null&&!mxEvent$1.isAltDown(Pt)&&lt==null){if(Nt=mxRectangle$1.fromRectangle(_),gt.model.isEdge(_.cell)){var kt=_.absolutePoints;if(Y.parentNode!=null){var Xt=kt[0];Nt.add(tt(Tt,vt,new mxRectangle$1(Xt.x-this.roundDrop.width/2,Xt.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),Y))}if(B.parentNode!=null){var ie=kt[kt.length-1];Nt.add(tt(Tt,vt,new mxRectangle$1(ie.x-this.roundDrop.width/2,ie.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),B))}}else{var At=mxRectangle$1.fromRectangle(_);_.shape!=null&&_.shape.boundingBox!=null&&(At=mxRectangle$1.fromRectangle(_.shape.boundingBox)),At.grow(this.graph.tolerance),At.grow(HoverIcons.prototype.arrowSpacing);var Jt=this.graph.selectionCellsHandler.getHandler(_.cell);Jt!=null&&(At.x-=Jt.horizontalOffset/2,At.y-=Jt.verticalOffset/2,At.width+=Jt.horizontalOffset,At.height+=Jt.verticalOffset,Jt.rotationShape!=null&&Jt.rotationShape.node!=null&&Jt.rotationShape.node.style.visibility!="hidden"&&Jt.rotationShape.node.style.display!="none"&&Jt.rotationShape.boundingBox!=null&&At.add(Jt.rotationShape.boundingBox)),Nt.add(tt(Tt,vt,new mxRectangle$1(_.getCenterX()-this.triangleUp.width/2,At.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),K)),Nt.add(tt(Tt,vt,new mxRectangle$1(At.x+At.width,_.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),Q)),Nt.add(tt(Tt,vt,new mxRectangle$1(_.getCenterX()-this.triangleDown.width/2,At.y+At.height,this.triangleDown.width,this.triangleDown.height),nt)),Nt.add(tt(Tt,vt,new mxRectangle$1(At.x-this.triangleLeft.width,_.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),dt))}Nt!=null&&Nt.grow(10)}U=mxConstants$1.DIRECTION_NORTH,lt==Q?U=mxConstants$1.DIRECTION_EAST:lt==nt||lt==B?U=mxConstants$1.DIRECTION_SOUTH:lt==dt&&(U=mxConstants$1.DIRECTION_WEST),H!=null&&lt==mt&&(Rt=H);var ne=(d==null||gt.isCellConnectable(n[d]))&&(gt.model.isEdge(Dt)&&d!=null||gt.model.isVertex(Dt)&&gt.isCellConnectable(Dt));if(_!=null&&pt>=5e3||_!=Rt&&(Nt==null||!mxUtils$1.contains(Nt,Tt,vt)||pt>500&&lt==null&&ne))if(k=!1,_=pt<5e3&&pt>this.dropTargetDelay||gt.model.isEdge(Dt)?Rt:null,_!=null&&ne){for(var Wt=[Y,B,K,Q,nt,dt],re=0;re<Wt.length;re++)Wt[re].parentNode!=null&&Wt[re].parentNode.removeChild(Wt[re]);if(gt.model.isEdge(Dt)){var kt=Rt.absolutePoints;if(kt!=null){var Xt=kt[0],ie=kt[kt.length-1];Y.style.left=Math.floor(Xt.x-this.roundDrop.width/2)+"px",Y.style.top=Math.floor(Xt.y-this.roundDrop.height/2)+"px",B.style.left=Math.floor(ie.x-this.roundDrop.width/2)+"px",B.style.top=Math.floor(ie.y-this.roundDrop.height/2)+"px",gt.model.getTerminal(Dt,!0)==null&&gt.container.appendChild(Y),gt.model.getTerminal(Dt,!1)==null&&gt.container.appendChild(B)}}else{var At=mxRectangle$1.fromRectangle(Rt);Rt.shape!=null&&Rt.shape.boundingBox!=null&&(At=mxRectangle$1.fromRectangle(Rt.shape.boundingBox)),At.grow(this.graph.tolerance),At.grow(HoverIcons.prototype.arrowSpacing);var Jt=this.graph.selectionCellsHandler.getHandler(Rt.cell);Jt!=null&&(At.x-=Jt.horizontalOffset/2,At.y-=Jt.verticalOffset/2,At.width+=Jt.horizontalOffset,At.height+=Jt.verticalOffset,Jt.rotationShape!=null&&Jt.rotationShape.node!=null&&Jt.rotationShape.node.style.visibility!="hidden"&&Jt.rotationShape.node.style.display!="none"&&Jt.rotationShape.boundingBox!=null&&At.add(Jt.rotationShape.boundingBox)),K.style.left=Math.floor(Rt.getCenterX()-this.triangleUp.width/2)+"px",K.style.top=Math.floor(At.y-this.triangleUp.height)+"px",Q.style.left=Math.floor(At.x+At.width)+"px",Q.style.top=Math.floor(Rt.getCenterY()-this.triangleRight.height/2)+"px",nt.style.left=K.style.left,nt.style.top=Math.floor(At.y+At.height)+"px",dt.style.left=Math.floor(At.x-this.triangleLeft.width)+"px",dt.style.top=Q.style.top,Rt.style.portConstraint!="eastwest"&&(gt.container.appendChild(K),gt.container.appendChild(nt)),gt.container.appendChild(Q),gt.container.appendChild(dt)}Rt!=null&&(N=gt.selectionCellsHandler.getHandler(Rt.cell),N!=null&&N.setHandlesVisible!=null&&N.setHandlesVisible(!1)),k=!0}else for(var Wt=[Y,B,K,Q,nt,dt],re=0;re<Wt.length;re++)Wt[re].parentNode!=null&&Wt[re].parentNode.removeChild(Wt[re]);!k&&N!=null&&N.setHandlesVisible(!0);var te=(!mxEvent$1.isAltDown(Pt)||mxEvent$1.isShiftDown(Pt))&&!(H!=null&&lt==mt)?mxDragSource$1.prototype.getDropTarget.apply(this,arguments):null;return te!=null&&(lt!=null||!gt.isSplitTarget(te,n,Pt))&&(te=gt.getDropTarget(n,Pt,te,!0)),te});var bt=T.startDrag;T.startDrag=function(gt){p.activeDragSource=this,bt.apply(this,arguments)};var Ot=T.stopDrag;return T.stopDrag=function(){Ot.apply(this,arguments);for(var gt=[Y,B,mt,K,Q,nt,dt],Tt=0;Tt<gt.length;Tt++)gt[Tt].parentNode!=null&&gt[Tt].parentNode.removeChild(gt[Tt]);_!=null&&N!=null&&N.reset(),p.activeDragSource=null,N=null,_=null,H=null,xt=null,lt=null},T};Sidebar.prototype.itemClicked=function(t,e,i,n){var r=this.editorUi.editor.graph;if(r.container.focus(),mxEvent$1.isAltDown(i)&&r.getSelectionCount()==1&&r.model.isVertex(r.getSelectionCell())){for(var l=null,s=0;s<t.length&&l==null;s++)r.model.isVertex(t[s])&&(l=s);l!=null&&(r.setSelectionCells(this.dropAndConnect(r.getSelectionCell(),t,mxEvent$1.isMetaDown(i)||mxEvent$1.isControlDown(i)?mxEvent$1.isShiftDown(i)?mxConstants$1.DIRECTION_WEST:mxConstants$1.DIRECTION_NORTH:mxEvent$1.isShiftDown(i)?mxConstants$1.DIRECTION_EAST:mxConstants$1.DIRECTION_SOUTH,l,i)),r.scrollCellToVisible(r.getSelectionCell()))}else if(mxEvent$1.isShiftDown(i)&&!r.isSelectionEmpty()){var a=r.getEditableCells(r.getSelectionCells());r.updateShapes(t[0],a,!0),r.scrollCellToVisible(a)}else{var o=mxEvent$1.isAltDown(i)?r.getFreeInsertPoint():r.getCenterInsertPoint(r.getBoundingBoxFromGeometry(t,!0));e.drop(r,i,null,o.x,o.y,!0)}};Sidebar.prototype.addClickHandler=function(t,e,i,n){var r=this.editorUi.editor.graph,l=e.getGraphForEvent,s=e.mouseDown,a=e.mouseMove,o=e.mouseUp,u=r.tolerance,d=!1,p=null,c=this,g=null;e.getGraphForEvent=function(x){return d?l.apply(this,arguments):null},e.mouseDown=function(x){s.apply(this,arguments),p=new mxPoint(mxEvent$1.getClientX(x),mxEvent$1.getClientY(x)),g=t.style.opacity,d=!1,g==""&&(g="1"),this.dragElement!=null&&(this.dragElement.style.display="none",mxUtils$1.setOpacity(t,50))},e.mouseMove=function(x){d=p!=null&&(Math.abs(p.x-mxEvent$1.getClientX(x))>u||Math.abs(p.y-mxEvent$1.getClientY(x))>u),d&&this.dragElement!=null&&this.dragElement.style.display=="none"&&(this.dragElement.style.display="",mxUtils$1.setOpacity(t,g*100)),a.apply(this,arguments)},e.mouseUp=function(x){try{!mxEvent$1.isPopupTrigger(x)&&this.currentGraph==null&&this.dragElement!=null&&this.dragElement.style.display=="none"&&(n!=null&&n(x),mxEvent$1.isConsumed(x)||c.itemClicked(i,e,x,t)),o.apply(e,arguments),mxUtils$1.setOpacity(t,g*100),p=null,c.currentElt=t}catch(C){e.reset(),c.editorUi.handleError(C)}}};Sidebar.prototype.createVertexTemplateEntry=function(t,e,i,n,r,l,s,a){return a!=null&&r!=null&&(a+=" "+r),a=a!=null&&a.length>0?a:r!=null?r.toLowerCase():"",this.addEntry(a,mxUtils$1.bind(this,function(){return this.createVertexTemplate(t,e,i,n,r,l,s)}))};Sidebar.prototype.createVertexTemplate=function(t,e,i,n,r,l,s,a,o,u,d,p,c,g){var x=[new mxCell$2(n??"",new mxGeometry$2(0,0,e,i),t)];return x[0].vertex=!0,this.createVertexTemplateFromCells(x,e,i,r,l,s,a,o,u,d,p,c,g)};Sidebar.prototype.createVertexTemplateFromData=function(t,e,i,n,r,l,s,a){var o=null;try{var u=mxUtils$1.parseXml(Graph$1.decompress(t)),d=new mxCodec$1(u),p=new mxGraphModel;d.decode(u.documentElement,p),o=this.graph.cloneCells(p.root.getChildAt(0).children)}catch(c){n=mxResources$1.get("error")+": "+c.message}return this.createVertexTemplateFromCells(o,e,i,n,r,l,s,a)};Sidebar.prototype.createVertexTemplateFromCells=function(t,e,i,n,r,l,s,a,o,u,d,p,c,g){return this.createItem(t,n,r,l,e,i,s,a,o,u,d,p,c,g)};Sidebar.prototype.createEdgeTemplateEntry=function(t,e,i,n,r,l,s,a,o){return s=s!=null&&s.length>0?s:r.toLowerCase(),this.addEntry(s,mxUtils$1.bind(this,function(){return this.createEdgeTemplate(t,e,i,n,r,l,a,o)}))};Sidebar.prototype.createEdgeTemplate=function(t,e,i,n,r,l,s,a){var o=new mxCell$2(n??"",new mxGeometry$2(0,0,e,i),t);return o.geometry.setTerminalPoint(new mxPoint(0,i),!0),o.geometry.setTerminalPoint(new mxPoint(e,0),!1),o.geometry.relative=!0,o.edge=!0,this.createEdgeTemplateFromCells([o],e,i,r,l,s,a)};Sidebar.prototype.createEdgeTemplateFromCells=function(t,e,i,n,r,l,s,a,o,u,d,p){return this.createItem(t,n,r,a??!0,e,i,l,s,o,u,d,p)};Sidebar.prototype.addPaletteFunctions=function(t,e,i,n){this.addPalette(t,e,i,mxUtils$1.bind(this,function(r){for(var l=0;l<n.length;l++)r.appendChild(n[l](r))}))};Sidebar.prototype.addPalette=function(t,e,i,n){var r=this.createTitle(e);this.appendChild(r);var l=document.createElement("div");l.className="geSidebar",mxClient$1.IS_POINTER&&(l.style.touchAction="none"),i&&this.expandLibraries?(n(l),n=null):l.style.display="none",this.addFoldingHandler(r,l,n);var s=document.createElement("div");return s.appendChild(l),this.appendChild(s),t!=null&&(this.palettes[t]=[r,s]),l};Sidebar.prototype.addFoldingHandler=function(t,e,i){var n=!1;(!mxClient$1.IS_IE||document.documentMode>=8)&&(t.style.backgroundImage=e.style.display=="none"?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="4px 50%",mxEvent$1.addListener(t,"click",mxUtils$1.bind(this,function(r){if(t.contains(mxEvent$1.getSource(r))){if(e.style.display=="none"){if(n)this.setContentVisible(e,!0);else if(n=!0,i!=null){t.style.cursor="wait";for(var l=[],s=0;s<t.children.length;s++)l.push(t.children[s]);t.innerHTML=mxResources$1.get("loading")+"...",window.setTimeout(mxUtils$1.bind(this,function(){this.setContentVisible(e,!0),t.style.cursor="",t.innerHTML="";for(var a=0;a<l.length;a++)t.appendChild(l[a]);var o=mxClient$1.NO_FO;mxClient$1.NO_FO=Editor.prototype.originalNoForeignObject,i(e,t),mxClient$1.NO_FO=o}),mxClient$1.IS_FF?20:0)}else this.setContentVisible(e,!0);t.style.backgroundImage="url('"+this.expandedImage+"')"}else t.style.backgroundImage="url('"+this.collapsedImage+"')",this.setContentVisible(e,!1);mxEvent$1.consume(r)}})),mxEvent$1.addListener(t,mxClient$1.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(r){r.preventDefault()}))};Sidebar.prototype.setContentVisible=function(t,e){mxUtils$1.setPrefixedStyle(t.style,"transition","all 0.2s linear"),mxUtils$1.setPrefixedStyle(t.style,"transform-origin","top left"),e?(mxUtils$1.setPrefixedStyle(t.style,"transform","scaleY(0)"),t.style.display="block",window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setPrefixedStyle(t.style,"transform","scaleY(1)"),window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setPrefixedStyle(t.style,"transform",null),mxUtils$1.setPrefixedStyle(t.style,"transition",null)}),200)}),0)):(mxUtils$1.setPrefixedStyle(t.style,"transform","scaleY(0)"),window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setPrefixedStyle(t.style,"transform",null),mxUtils$1.setPrefixedStyle(t.style,"transition",null),t.style.display="none"}),200))};Sidebar.prototype.removePalette=function(t){var e=this.palettes[t];if(e!=null){this.palettes[t]=null;for(var i=0;i<e.length;i++)this.container.removeChild(e[i]);return!0}return!1};Sidebar.prototype.addImagePalette=function(t,e,i,n,r,l,s){for(var a=[],o=0;o<r.length;o++)mxUtils$1.bind(this,function(u,d,p){if(p==null&&(i==null||i.substring(0,17)!="img/lib/clip_art/")){var c=u.lastIndexOf("/"),g=u.lastIndexOf(".");p=u.substring(c>=0?c+1:0,g>=0?g:u.length).replace(/[-_]/g," ")}a.push(this.createVertexTemplateEntry("image;html=1;image="+i+u+n,this.defaultImageWidth,this.defaultImageHeight,"",d,d!=null,null,this.filterTags(p)))})(r[o],l!=null?l[o]:null,s!=null?s[r[o]]:null);this.addPaletteFunctions(t,e,!1,a)};Sidebar.prototype.getTagsForStencil=function(t,e,i){for(var n=t.split("."),r=1;r<n.length;r++)n[r]=n[r].replace(/_/g," ");return n.push(e.replace(/_/g," ")),i!=null&&n.push(i),n.slice(1,n.length)};Sidebar.prototype.addStencilPalette=function(t,e,i,n,r,l,s,a,o,u){if(s=s??1,this.addStencilsToIndex){var d=[];if(o!=null)for(var p=0;p<o.length;p++)d.push(o[p]);mxStencilRegistry$1.loadStencilSet(i,mxUtils$1.bind(this,function(c,g,x,C,T){if(r==null||mxUtils$1.indexOf(r,g)<0){var A=this.getTagsForStencil(c,g),R=a!=null?a[g]:null;R!=null&&A.push(R),d.push(this.createVertexTemplateEntry("shape="+c+g.toLowerCase()+n,Math.round(C*s),Math.round(T*s),"",g.replace(/_/g," "),null,null,this.filterTags(A.join(" "))))}}),!0,!0),this.addPaletteFunctions(t,e,!1,d)}else this.addPalette(t,e,!1,mxUtils$1.bind(this,function(c){if(n==null&&(n=""),l!=null&&l.call(this,c),o!=null)for(var g=0;g<o.length;g++)o[g](c);mxStencilRegistry$1.loadStencilSet(i,mxUtils$1.bind(this,function(x,C,T,A,R){(r==null||mxUtils$1.indexOf(r,C)<0)&&c.appendChild(this.createVertexTemplate("shape="+x+C.toLowerCase()+n,Math.round(A*s),Math.round(R*s),"",C.replace(/_/g," "),!0))}),!0)}))};Sidebar.prototype.destroy=function(){this.graph!=null&&(this.graph.container!=null&&this.graph.container.parentNode!=null&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),this.escapeListener!=null&&(this.editorUi.editor.graph.removeListener(this.escapeListener),this.escapeListener=null),this.pointerUpHandler!=null&&(mxEvent$1.removeListener(document,mxClient$1.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),this.pointerDownHandler!=null&&(mxEvent$1.removeListener(document,mxClient$1.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),this.pointerMoveHandler!=null&&(mxEvent$1.removeListener(document,mxClient$1.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),this.pointerOutHandler!=null&&(mxEvent$1.removeListener(document,mxClient$1.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)};/*! @license DOMPurify 3.2.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.0/LICENSE */const{entries,setPrototypeOf,isFrozen,getPrototypeOf,getOwnPropertyDescriptor}=Object;let{freeze,seal,create}=Object,{apply,construct}=typeof Reflect<"u"&&Reflect;freeze||(freeze=function(e){return e});seal||(seal=function(e){return e});apply||(apply=function(e,i,n){return e.apply(i,n)});construct||(construct=function(e,i){return new e(...i)});const arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),objectHasOwnProperty=unapply(Object.prototype.hasOwnProperty),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return apply(t,e,n)}}function unconstruct(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return construct(t,i)}}function addToSet(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:stringToLowerCase;setPrototypeOf&&setPrototypeOf(t,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const l=i(r);l!==r&&(isFrozen(e)||(e[n]=l),r=l)}t[r]=!0}return t}function cleanArray(t){for(let e=0;e<t.length;e++)objectHasOwnProperty(t,e)||(t[e]=null);return t}function clone(t){const e=create(null);for(const[i,n]of entries(t))objectHasOwnProperty(t,i)&&(Array.isArray(n)?e[i]=cleanArray(n):n&&typeof n=="object"&&n.constructor===Object?e[i]=clone(n):e[i]=n);return e}function lookupGetter(t,e){for(;t!==null;){const n=getOwnPropertyDescriptor(t,e);if(n){if(n.get)return unapply(n.get);if(typeof n.value=="function")return unapply(n.value)}t=getPrototypeOf(t)}function i(){return null}return i}const html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),CUSTOM_ELEMENT=seal(/^[a-z][.\w]*(-[.\w]+)+$/i);var EXPRESSIONS=Object.freeze({__proto__:null,ARIA_ATTR,ATTR_WHITESPACE,CUSTOM_ELEMENT,DATA_ATTR,DOCTYPE_NAME,ERB_EXPR,IS_ALLOWED_URI,IS_SCRIPT_OR_DATA,MUSTACHE_EXPR,TMPLIT_EXPR});const NODE_TYPE={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},getGlobal=function t(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function t(e,i){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";i&&i.hasAttribute(r)&&(n=i.getAttribute(r));const l="dompurify"+(n?"#"+n:"");try{return e.createPolicy(l,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function createDOMPurify(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal();const e=Ft=>createDOMPurify(Ft);if(e.version="3.2.0",e.removed=[],!t||!t.document||t.document.nodeType!==NODE_TYPE.document)return e.isSupported=!1,e;let{document:i}=t;const n=i,r=n.currentScript,{DocumentFragment:l,HTMLTemplateElement:s,Node:a,Element:o,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:c,trustedTypes:g}=t,x=o.prototype,C=lookupGetter(x,"cloneNode"),T=lookupGetter(x,"remove"),A=lookupGetter(x,"nextSibling"),R=lookupGetter(x,"childNodes"),_=lookupGetter(x,"parentNode");if(typeof s=="function"){const Ft=i.createElement("template");Ft.content&&Ft.content.ownerDocument&&(i=Ft.content.ownerDocument)}let N,H="";const{implementation:k,createNodeIterator:K,createDocumentFragment:Q,getElementsByTagName:nt}=i,{importNode:dt}=n;let mt={};e.isSupported=typeof entries=="function"&&typeof _=="function"&&k&&k.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:xt,ERB_EXPR:Y,TMPLIT_EXPR:B,DATA_ATTR:U,ARIA_ATTR:lt,IS_SCRIPT_OR_DATA:tt,ATTR_WHITESPACE:st,CUSTOM_ELEMENT:ft}=EXPRESSIONS;let{IS_ALLOWED_URI:$t}=EXPRESSIONS,Ct=null;const pt=addToSet({},[...html$1,...svg$1,...svgFilters,...mathMl$1,...text]);let ct=null;const Mt=addToSet({},[...html,...svg,...mathMl,...xml]);let bt=Object.seal(create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ot=null,gt=null,Tt=!0,vt=!0,Pt=!1,Dt=!0,zt=!1,Rt=!0,Nt=!1,Bt=!1,kt=!1,Xt=!1,ie=!1,At=!1,Jt=!0,ne=!1;const Wt="user-content-";let re=!0,te=!1,se={},S=null;const I=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let L=null;const D=addToSet({},["audio","video","img","source","image","track"]);let O=null;const V=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),j="http://www.w3.org/1998/Math/MathML",at="http://www.w3.org/2000/svg",ot="http://www.w3.org/1999/xhtml";let yt=ot,Lt=!1,It=null;const Gt=addToSet({},[j,at,ot],stringToString);let Yt=addToSet({},["mi","mo","mn","ms","mtext"]),ee=addToSet({},["annotation-xml"]);const le=addToSet({},["title","style","font","a","script"]);let jt=null;const Zt=["application/xhtml+xml","text/html"],Qt="text/html";let qt=null,Vt=null;const Kt=i.createElement("form"),xe=function(ht){return ht instanceof RegExp||ht instanceof Function},he=function(){let ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Vt&&Vt===ht)){if((!ht||typeof ht!="object")&&(ht={}),ht=clone(ht),jt=Zt.indexOf(ht.PARSER_MEDIA_TYPE)===-1?Qt:ht.PARSER_MEDIA_TYPE,qt=jt==="application/xhtml+xml"?stringToString:stringToLowerCase,Ct=objectHasOwnProperty(ht,"ALLOWED_TAGS")?addToSet({},ht.ALLOWED_TAGS,qt):pt,ct=objectHasOwnProperty(ht,"ALLOWED_ATTR")?addToSet({},ht.ALLOWED_ATTR,qt):Mt,It=objectHasOwnProperty(ht,"ALLOWED_NAMESPACES")?addToSet({},ht.ALLOWED_NAMESPACES,stringToString):Gt,O=objectHasOwnProperty(ht,"ADD_URI_SAFE_ATTR")?addToSet(clone(V),ht.ADD_URI_SAFE_ATTR,qt):V,L=objectHasOwnProperty(ht,"ADD_DATA_URI_TAGS")?addToSet(clone(D),ht.ADD_DATA_URI_TAGS,qt):D,S=objectHasOwnProperty(ht,"FORBID_CONTENTS")?addToSet({},ht.FORBID_CONTENTS,qt):I,Ot=objectHasOwnProperty(ht,"FORBID_TAGS")?addToSet({},ht.FORBID_TAGS,qt):{},gt=objectHasOwnProperty(ht,"FORBID_ATTR")?addToSet({},ht.FORBID_ATTR,qt):{},se=objectHasOwnProperty(ht,"USE_PROFILES")?ht.USE_PROFILES:!1,Tt=ht.ALLOW_ARIA_ATTR!==!1,vt=ht.ALLOW_DATA_ATTR!==!1,Pt=ht.ALLOW_UNKNOWN_PROTOCOLS||!1,Dt=ht.ALLOW_SELF_CLOSE_IN_ATTR!==!1,zt=ht.SAFE_FOR_TEMPLATES||!1,Rt=ht.SAFE_FOR_XML!==!1,Nt=ht.WHOLE_DOCUMENT||!1,Xt=ht.RETURN_DOM||!1,ie=ht.RETURN_DOM_FRAGMENT||!1,At=ht.RETURN_TRUSTED_TYPE||!1,kt=ht.FORCE_BODY||!1,Jt=ht.SANITIZE_DOM!==!1,ne=ht.SANITIZE_NAMED_PROPS||!1,re=ht.KEEP_CONTENT!==!1,te=ht.IN_PLACE||!1,$t=ht.ALLOWED_URI_REGEXP||IS_ALLOWED_URI,yt=ht.NAMESPACE||ot,Yt=ht.MATHML_TEXT_INTEGRATION_POINTS||Yt,ee=ht.HTML_INTEGRATION_POINTS||ee,bt=ht.CUSTOM_ELEMENT_HANDLING||{},ht.CUSTOM_ELEMENT_HANDLING&&xe(ht.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=ht.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ht.CUSTOM_ELEMENT_HANDLING&&xe(ht.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=ht.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ht.CUSTOM_ELEMENT_HANDLING&&typeof ht.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(bt.allowCustomizedBuiltInElements=ht.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),zt&&(vt=!1),ie&&(Xt=!0),se&&(Ct=addToSet({},text),ct=[],se.html===!0&&(addToSet(Ct,html$1),addToSet(ct,html)),se.svg===!0&&(addToSet(Ct,svg$1),addToSet(ct,svg),addToSet(ct,xml)),se.svgFilters===!0&&(addToSet(Ct,svgFilters),addToSet(ct,svg),addToSet(ct,xml)),se.mathMl===!0&&(addToSet(Ct,mathMl$1),addToSet(ct,mathMl),addToSet(ct,xml))),ht.ADD_TAGS&&(Ct===pt&&(Ct=clone(Ct)),addToSet(Ct,ht.ADD_TAGS,qt)),ht.ADD_ATTR&&(ct===Mt&&(ct=clone(ct)),addToSet(ct,ht.ADD_ATTR,qt)),ht.ADD_URI_SAFE_ATTR&&addToSet(O,ht.ADD_URI_SAFE_ATTR,qt),ht.FORBID_CONTENTS&&(S===I&&(S=clone(S)),addToSet(S,ht.FORBID_CONTENTS,qt)),re&&(Ct["#text"]=!0),Nt&&addToSet(Ct,["html","head","body"]),Ct.table&&(addToSet(Ct,["tbody"]),delete Ot.tbody),ht.TRUSTED_TYPES_POLICY){if(typeof ht.TRUSTED_TYPES_POLICY.createHTML!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ht.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=ht.TRUSTED_TYPES_POLICY,H=N.createHTML("")}else N===void 0&&(N=_createTrustedTypesPolicy(g,r)),N!==null&&typeof H=="string"&&(H=N.createHTML(""));freeze&&freeze(ht),Vt=ht}},ve=addToSet({},[...svg$1,...svgFilters,...svgDisallowed]),ae=addToSet({},[...mathMl$1,...mathMlDisallowed]),pe=function(ht){let Ht=_(ht);(!Ht||!Ht.tagName)&&(Ht={namespaceURI:yt,tagName:"template"});const Ut=stringToLowerCase(ht.tagName),oe=stringToLowerCase(Ht.tagName);return It[ht.namespaceURI]?ht.namespaceURI===at?Ht.namespaceURI===ot?Ut==="svg":Ht.namespaceURI===j?Ut==="svg"&&(oe==="annotation-xml"||Yt[oe]):!!ve[Ut]:ht.namespaceURI===j?Ht.namespaceURI===ot?Ut==="math":Ht.namespaceURI===at?Ut==="math"&&ee[oe]:!!ae[Ut]:ht.namespaceURI===ot?Ht.namespaceURI===at&&!ee[oe]||Ht.namespaceURI===j&&!Yt[oe]?!1:!ae[Ut]&&(le[Ut]||!ve[Ut]):!!(jt==="application/xhtml+xml"&&It[ht.namespaceURI]):!1},me=function(ht){arrayPush(e.removed,{element:ht});try{_(ht).removeChild(ht)}catch{T(ht)}},ge=function(ht,Ht){try{arrayPush(e.removed,{attribute:Ht.getAttributeNode(ht),from:Ht})}catch{arrayPush(e.removed,{attribute:null,from:Ht})}if(Ht.removeAttribute(ht),ht==="is"&&!ct[ht])if(Xt||ie)try{me(Ht)}catch{}else try{Ht.setAttribute(ht,"")}catch{}},Ce=function(ht){let Ht=null,Ut=null;if(kt)ht="<remove></remove>"+ht;else{const de=stringMatch(ht,/^[\r\n\t ]+/);Ut=de&&de[0]}jt==="application/xhtml+xml"&&yt===ot&&(ht='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ht+"</body></html>");const oe=N?N.createHTML(ht):ht;if(yt===ot)try{Ht=new c().parseFromString(oe,jt)}catch{}if(!Ht||!Ht.documentElement){Ht=k.createDocument(yt,"template",null);try{Ht.documentElement.innerHTML=Lt?H:oe}catch{}}const ue=Ht.body||Ht.documentElement;return ht&&Ut&&ue.insertBefore(i.createTextNode(Ut),ue.childNodes[0]||null),yt===ot?nt.call(Ht,Nt?"html":"body")[0]:Nt?Ht.documentElement:ue},Se=function(ht){return K.call(ht.ownerDocument||ht,ht,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},$e=function(ht){return ht instanceof p&&(typeof ht.nodeName!="string"||typeof ht.textContent!="string"||typeof ht.removeChild!="function"||!(ht.attributes instanceof d)||typeof ht.removeAttribute!="function"||typeof ht.setAttribute!="function"||typeof ht.namespaceURI!="string"||typeof ht.insertBefore!="function"||typeof ht.hasChildNodes!="function")},Me=function(ht){return typeof a=="function"&&ht instanceof a};function ce(Ft,ht,Ht){mt[Ft]&&arrayForEach(mt[Ft],Ut=>{Ut.call(e,ht,Ht,Vt)})}const Ae=function(ht){let Ht=null;if(ce("beforeSanitizeElements",ht,null),$e(ht))return me(ht),!0;const Ut=qt(ht.nodeName);if(ce("uponSanitizeElement",ht,{tagName:Ut,allowedTags:Ct}),ht.hasChildNodes()&&!Me(ht.firstElementChild)&&regExpTest(/<[/\w]/g,ht.innerHTML)&&regExpTest(/<[/\w]/g,ht.textContent)||ht.nodeType===NODE_TYPE.progressingInstruction||Rt&&ht.nodeType===NODE_TYPE.comment&&regExpTest(/<[/\w]/g,ht.data))return me(ht),!0;if(!Ct[Ut]||Ot[Ut]){if(!Ot[Ut]&&Te(Ut)&&(bt.tagNameCheck instanceof RegExp&&regExpTest(bt.tagNameCheck,Ut)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(Ut)))return!1;if(re&&!S[Ut]){const oe=_(ht)||ht.parentNode,ue=R(ht)||ht.childNodes;if(ue&&oe){const de=ue.length;for(let m=de-1;m>=0;--m){const E=C(ue[m],!0);E.__removalCount=(ht.__removalCount||0)+1,oe.insertBefore(E,A(ht))}}}return me(ht),!0}return ht instanceof o&&!pe(ht)||(Ut==="noscript"||Ut==="noembed"||Ut==="noframes")&&regExpTest(/<\/no(script|embed|frames)/i,ht.innerHTML)?(me(ht),!0):(zt&&ht.nodeType===NODE_TYPE.text&&(Ht=ht.textContent,arrayForEach([xt,Y,B],oe=>{Ht=stringReplace(Ht,oe," ")}),ht.textContent!==Ht&&(arrayPush(e.removed,{element:ht.cloneNode()}),ht.textContent=Ht)),ce("afterSanitizeElements",ht,null),!1)},Le=function(ht,Ht,Ut){if(Jt&&(Ht==="id"||Ht==="name")&&(Ut in i||Ut in Kt))return!1;if(!(vt&&!gt[Ht]&&regExpTest(U,Ht))){if(!(Tt&&regExpTest(lt,Ht))){if(!ct[Ht]||gt[Ht]){if(!(Te(ht)&&(bt.tagNameCheck instanceof RegExp&&regExpTest(bt.tagNameCheck,ht)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(ht))&&(bt.attributeNameCheck instanceof RegExp&&regExpTest(bt.attributeNameCheck,Ht)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(Ht))||Ht==="is"&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&regExpTest(bt.tagNameCheck,Ut)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(Ut))))return!1}else if(!O[Ht]){if(!regExpTest($t,stringReplace(Ut,st,""))){if(!((Ht==="src"||Ht==="xlink:href"||Ht==="href")&&ht!=="script"&&stringIndexOf(Ut,"data:")===0&&L[ht])){if(!(Pt&&!regExpTest(tt,stringReplace(Ut,st,"")))){if(Ut)return!1}}}}}}return!0},Te=function(ht){return ht!=="annotation-xml"&&stringMatch(ht,ft)},Pe=function(ht){ce("beforeSanitizeAttributes",ht,null);const{attributes:Ht}=ht;if(!Ht)return;const Ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ct,forceKeepAttr:void 0};let oe=Ht.length;for(;oe--;){const ue=Ht[oe],{name:de,namespaceURI:m,value:E}=ue,$=qt(de);let f=de==="value"?E:stringTrim(E);if(Ut.attrName=$,Ut.attrValue=f,Ut.keepAttr=!0,Ut.forceKeepAttr=void 0,ce("uponSanitizeAttribute",ht,Ut),f=Ut.attrValue,ne&&($==="id"||$==="name")&&(ge(de,ht),f=Wt+f),Rt&&regExpTest(/((--!?|])>)|<\/(style|title)/i,f)){ge(de,ht);continue}if(Ut.forceKeepAttr||(ge(de,ht),!Ut.keepAttr))continue;if(!Dt&&regExpTest(/\/>/i,f)){ge(de,ht);continue}zt&&arrayForEach([xt,Y,B],b=>{f=stringReplace(f,b," ")});const v=qt(ht.nodeName);if(Le(v,$,f)){if(N&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!m)switch(g.getAttributeType(v,$)){case"TrustedHTML":{f=N.createHTML(f);break}case"TrustedScriptURL":{f=N.createScriptURL(f);break}}try{m?ht.setAttributeNS(m,de,f):ht.setAttribute(de,f),$e(ht)?me(ht):arrayPop(e.removed)}catch{}}}ce("afterSanitizeAttributes",ht,null)},De=function Ft(ht){let Ht=null;const Ut=Se(ht);for(ce("beforeSanitizeShadowDOM",ht,null);Ht=Ut.nextNode();)ce("uponSanitizeShadowNode",Ht,null),!Ae(Ht)&&(Ht.content instanceof l&&Ft(Ht.content),Pe(Ht));ce("afterSanitizeShadowDOM",ht,null)};return e.sanitize=function(Ft){let ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=null,Ut=null,oe=null,ue=null;if(Lt=!Ft,Lt&&(Ft="<!-->"),typeof Ft!="string"&&!Me(Ft))if(typeof Ft.toString=="function"){if(Ft=Ft.toString(),typeof Ft!="string")throw typeErrorCreate("dirty is not a string, aborting")}else throw typeErrorCreate("toString is not a function");if(!e.isSupported)return Ft;if(Bt||he(ht),e.removed=[],typeof Ft=="string"&&(te=!1),te){if(Ft.nodeName){const E=qt(Ft.nodeName);if(!Ct[E]||Ot[E])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Ft instanceof a)Ht=Ce("<!---->"),Ut=Ht.ownerDocument.importNode(Ft,!0),Ut.nodeType===NODE_TYPE.element&&Ut.nodeName==="BODY"||Ut.nodeName==="HTML"?Ht=Ut:Ht.appendChild(Ut);else{if(!Xt&&!zt&&!Nt&&Ft.indexOf("<")===-1)return N&&At?N.createHTML(Ft):Ft;if(Ht=Ce(Ft),!Ht)return Xt?null:At?H:""}Ht&&kt&&me(Ht.firstChild);const de=Se(te?Ft:Ht);for(;oe=de.nextNode();)Ae(oe)||(oe.content instanceof l&&De(oe.content),Pe(oe));if(te)return Ft;if(Xt){if(ie)for(ue=Q.call(Ht.ownerDocument);Ht.firstChild;)ue.appendChild(Ht.firstChild);else ue=Ht;return(ct.shadowroot||ct.shadowrootmode)&&(ue=dt.call(n,ue,!0)),ue}let m=Nt?Ht.outerHTML:Ht.innerHTML;return Nt&&Ct["!doctype"]&&Ht.ownerDocument&&Ht.ownerDocument.doctype&&Ht.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,Ht.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+Ht.ownerDocument.doctype.name+`>
`+m),zt&&arrayForEach([xt,Y,B],E=>{m=stringReplace(m,E," ")}),N&&At?N.createHTML(m):m},e.setConfig=function(){let Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he(Ft),Bt=!0},e.clearConfig=function(){Vt=null,Bt=!1},e.isValidAttribute=function(Ft,ht,Ht){Vt||he({});const Ut=qt(Ft),oe=qt(ht);return Le(Ut,oe,Ht)},e.addHook=function(Ft,ht){typeof ht=="function"&&(mt[Ft]=mt[Ft]||[],arrayPush(mt[Ft],ht))},e.removeHook=function(Ft){if(mt[Ft])return arrayPop(mt[Ft])},e.removeHooks=function(Ft){mt[Ft]&&(mt[Ft]=[])},e.removeAllHooks=function(){mt={}},e}var purify=createDOMPurify();const graphLayouts={mxCircleLayout,mxCompactTreeLayout,mxCompositeLayout,mxEdgeLabelLayout,mxFastOrganicLayout,mxParallelEdgeLayout,mxPartitionLayout,mxRadialTreeLayout,mxStackLayout};(function(){var t=[["nbsp","160"],["shy","173"]],e=mxUtils$1.parseXml;mxUtils$1.parseXml=function(n){for(var r=0;r<t.length;r++)n=n.replace(new RegExp("&"+t[r][0]+";","g"),"&#"+t[r][1]+";");return e(n)};var i=mxUtils$1.getSizeForString;mxUtils$1.getSizeForString=function(n,r,l,s){return i(Graph$1.sanitizeHtml(n),r,l,s)}})();Date.prototype.toISOString||function(){function t(e){var i=String(e);return i.length===1&&(i="0"+i),i}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();Date.now||(Date.now=function(){return new Date().getTime()});Uint8Array.from||(Uint8Array.from=function(){var t=Object.prototype.toString,e=function(l){return typeof l=="function"||t.call(l)==="[object Function]"},i=function(l){var s=Number(l);return isNaN(s)?0:s===0||!isFinite(s)?s:(s>0?1:-1)*Math.floor(Math.abs(s))},n=Math.pow(2,53)-1,r=function(l){var s=i(l);return Math.min(Math.max(s,0),n)};return function(s){var a=this,o=Object(s);if(s==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");var u=arguments.length>1?arguments[1]:void 0,d;if(typeof u<"u"){if(!e(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(d=arguments[2])}for(var p=r(o.length),c=e(a)?Object(new a(p)):new Array(p),g=0,x;g<p;)x=o[g],u?c[g]=typeof d>"u"?u(x,g):u.call(d,x,g):c[g]=x,g+=1;return c.length=p,c}}());mxConstants$1.SHADOW_OPACITY=.25;mxConstants$1.SHADOWCOLOR="#000000";mxConstants$1.VML_SHADOWCOLOR="#d0d0d0";mxCodec$1.allowlist=["mxStylesheet","Array","mxGraphModel","mxCell","mxGeometry","mxRectangle","mxPoint","mxChildChange","mxRootChange","mxTerminalChange","mxValueChange","mxStyleChange","mxGeometryChange","mxCollapseChange","mxVisibleChange","mxCellAttributeChange"];mxGraph.prototype.pageBreakColor="#c0c0c0";mxGraph.prototype.pageScale=1;(function(){try{if(navigator!=null&&navigator.language!=null){var t=navigator.language.toLowerCase();mxGraph.prototype.pageFormat=t==="en-us"||t==="en-ca"||t==="es-mx"?mxConstants$1.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants$1.PAGE_FORMAT_A4_PORTRAIT}}catch{}})();mxText$1.prototype.baseSpacingTop=5;mxText$1.prototype.baseSpacingBottom=1;mxGraphModel.prototype.ignoreRelativeEdgeParent=!1;mxGraphView.prototype.gridImage=mxClient$1.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif";mxGraphView.prototype.gridSteps=4;mxGraphView.prototype.minGridSize=4;mxGraphView.prototype.defaultGridColor="#d0d0d0";mxGraphView.prototype.defaultDarkGridColor="#424242";mxGraphView.prototype.gridColor=mxGraphView.prototype.defaultGridColor;mxGraphView.prototype.unit=mxConstants$1.POINTS;mxGraphView.prototype.setUnit=function(t){this.unit!=t&&(this.unit=t,this.fireEvent(new mxEventObject$1("unitChanged","unit",t)))};mxSvgCanvas2D$1.prototype.foAltText="[Not supported by viewer]";mxShape$1.prototype.getConstraints=function(t,e,i){return null};mxImageShape$1.prototype.getImageDataUri=function(){var t=String(this.image);return t.substring(0,26)=="data:image/svg+xml;base64,"&&this.style!=null&&mxUtils$1.getValue(this.style,"clipSvg","0")=="1"&&((this.clippedSvg==null||this.clippedImage!=t)&&(this.clippedSvg=Graph$1.clipSvgDataUri(t,!0),this.clippedImage=t),t=this.clippedSvg),t};(function(){var t=mxResources$1.get;mxResources$1.get=function(e,i,n){return n==null&&(n=e),t.apply(this,[e,i,n])}})();const Graph$1=function(t,e,i,n,r,l){mxGraph.call(this,t,e,i,n),this.themes=r||this.defaultThemes,this.currentEdgeStyle=mxUtils$1.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils$1.clone(this.defaultVertexStyle),this.standalone=l??!1;var s=this.baseUrl,a=s.indexOf("//");if(this.domainUrl="",this.domainPathUrl="",a>0){var o=s.indexOf("/",a+2);o>0&&(this.domainUrl=s.substring(0,o)),o=s.lastIndexOf("/"),o>0&&(this.domainPathUrl=s.substring(0,o+1))}if(this.isHtmlLabel=function(Y){var B=this.getCurrentCellStyle(Y);return B!=null?B.html=="1"||B[mxConstants$1.STYLE_WHITE_SPACE]=="wrap":!1},this.immediateHandling){var u={point:null,event:null,state:null,handle:null,selected:!1},d=!1;this.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(Y,B){if(B.getProperty("eventName")=="mouseDown"&&this.isEnabled()){var U=B.getProperty("event"),lt=U.getState(),tt=this.view.scale;if(!mxEvent$1.isAltDown(U.getEvent())&&lt!=null&&(d=this.isCellSelected(lt.cell),!this.panningHandler.isActive()&&!mxEvent$1.isControlDown(U.getEvent()))){var st=this.selectionCellsHandler.getHandler(lt.cell);if(st==null||st.getHandleForEvent(U)==null){var ft=new mxRectangle$1(U.getGraphX()-1,U.getGraphY()-1),$t=mxEvent$1.isTouchEvent(U.getEvent())?mxShape$1.prototype.svgStrokeTolerance-1:(mxShape$1.prototype.svgStrokeTolerance+2)/2,Ct=$t+2;if(ft.grow($t),this.isTableCell(lt.cell)&&this.isCellMovable(lt.cell)&&!this.isCellSelected(lt.cell)&&(!mxUtils$1.contains(lt,U.getGraphX()-Ct,U.getGraphY()-Ct)||!mxUtils$1.contains(lt,U.getGraphX()-Ct,U.getGraphY()+Ct)||!mxUtils$1.contains(lt,U.getGraphX()+Ct,U.getGraphY()+Ct)||!mxUtils$1.contains(lt,U.getGraphX()+Ct,U.getGraphY()-Ct))){var pt=this.model.getParent(lt.cell),ct=this.model.getParent(pt);if(!this.isCellSelected(ct)){var Mt=$t*tt,bt=2*Mt;if(this.model.getChildAt(ct,0)!=pt&&mxUtils$1.intersects(ft,new mxRectangle$1(lt.x,lt.y-Mt,lt.width,bt))||this.model.getChildAt(pt,0)!=lt.cell&&mxUtils$1.intersects(ft,new mxRectangle$1(lt.x-Mt,lt.y,bt,lt.height))||mxUtils$1.intersects(ft,new mxRectangle$1(lt.x,lt.y+lt.height-Mt,lt.width,bt))||mxUtils$1.intersects(ft,new mxRectangle$1(lt.x+lt.width-Mt,lt.y,bt,lt.height))){var Ot=this.selectionCellsHandler.isHandled(ct);if(this.selectCellForEvent(ct,U.getEvent()),st=this.selectionCellsHandler.getHandler(ct),st!=null){var gt=st.getHandleForEvent(U);gt!=null&&(st.start(U.getGraphX(),U.getGraphY(),gt),st.blockDelayedSelection=!Ot,U.consume())}}}}for(var Tt=lt;!U.isConsumed()&&Tt!=null&&(this.isTableCell(Tt.cell)||this.isTableRow(Tt.cell)||this.isTable(Tt.cell));){if(this.isSwimlane(Tt.cell)&&this.isCellMovable(Tt.cell)){var vt=this.getActualStartSize(Tt.cell);if(((vt.x>0||vt.width>0)&&mxUtils$1.intersects(ft,new mxRectangle$1(Tt.x+(vt.x-vt.width-1)*tt+(vt.x==0?Tt.width:0),Tt.y,1,Tt.height))||(vt.y>0||vt.height>0)&&mxUtils$1.intersects(ft,new mxRectangle$1(Tt.x,Tt.y+(vt.y-vt.height-1)*tt+(vt.y==0?Tt.height:0),Tt.width,1)))&&(this.selectCellForEvent(Tt.cell,U.getEvent()),st=this.selectionCellsHandler.getHandler(Tt.cell),st!=null&&st.customHandles!=null)){var gt=mxEvent$1.CUSTOM_HANDLE-st.customHandles.length+1;st.start(U.getGraphX(),U.getGraphY(),gt),U.consume()}}Tt=this.view.getState(this.model.getParent(Tt.cell))}}}}})),this.addListener(mxEvent$1.CONSUME_MOUSE_EVENT,mxUtils$1.bind(this,function(Y,B){if(B.getProperty("eventName")=="mouseDown"&&this.isEnabled()){var U=B.getProperty("event"),lt=U.getState();if(!mxEvent$1.isAltDown(U.getEvent())&&!mxEvent$1.isControlDown(B)&&!mxEvent$1.isShiftDown(B)&&!d&&lt!=null&&this.model.isEdge(lt.cell))if(u.point=new mxPoint$1(U.getGraphX(),U.getGraphY()),u.selected=this.isCellSelected(lt.cell),u.state=lt,u.event=U,lt.text!=null&&lt.text.boundingBox!=null&&mxUtils$1.contains(lt.text.boundingBox,U.getGraphX(),U.getGraphY()))u.handle=mxEvent$1.LABEL_HANDLE;else{var tt=this.selectionCellsHandler.getHandler(lt.cell);tt!=null&&tt.bends!=null&&tt.bends.length>0&&(u.handle=tt.getHandleForEvent(U))}}})),this.addMouseListener({mouseDown:function(Y,B){},mouseMove:mxUtils$1.bind(this,function(Y,B){var U=this.selectionCellsHandler.handlers.map;for(var lt in U)if(U[lt].index!=null)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent$1.isAltDown(B.getEvent())){var tt=this.tolerance;if(u.point!=null&&u.state!=null&&u.event!=null){var st=u.state;if(u.handle!=null||Math.abs(u.point.x-B.getGraphX())>tt||Math.abs(u.point.y-B.getGraphY())>tt){var ft=null;if(mxEvent$1.isShiftDown(B.getEvent())||(ft=this.selectionCellsHandler.getHandler(st.cell)),ft!=null&&ft.bends!=null&&ft.bends.length>0){ft.redrawHandles();var $t=u.handle!=null?u.handle:ft.getHandleForEvent(u.event),Ct=this.view.getEdgeStyle(st),pt=Ct==mxEdgeStyle$1.EntityRelation,ct=st.absolutePoints;if(u.selected||($t=u.handle),$t!=mxEvent$1.LABEL_HANDLE&&ct!=null){if($t=u.handle,$t==null){var Mt=new mxRectangle$1(u.point.x,u.point.y);if(Mt.grow(mxEdgeHandler$1.prototype.handleImage.width/2),mxUtils$1.contains(Mt,ct[0].x,ct[0].y))$t=0;else if(mxUtils$1.contains(Mt,ct[ct.length-1].x,ct[ct.length-1].y))$t=ft.bends.length-1;else if(ct!=null&&(Ct==null&&$t==null||Ct==mxEdgeStyle$1.SegmentConnector||Ct==mxEdgeStyle$1.OrthConnector)){var bt=Ct!=null&&(ct.length==2||ct.length==3&&(Math.round(ct[0].x-ct[1].x)==0&&Math.round(ct[1].x-ct[2].x)==0||Math.round(ct[0].y-ct[1].y)==0&&Math.round(ct[1].y-ct[2].y)==0));bt?$t=2:($t=mxUtils$1.findNearestSegment(st,u.point.x,u.point.y),Ct==null?$t=mxEvent$1.VIRTUAL_HANDLE-$t:$t+=1)}}$t==null&&($t=mxEvent$1.VIRTUAL_HANDLE)}var Ot=!pt&&(st.visibleSourceState!=null||st.visibleTargetState!=null),gt=$t==mxEvent$1.LABEL_HANDLE||$t==0||$t==ft.bends.length-1;(Ot||gt)&&(ft.start(B.getGraphX(),B.getGraphX(),$t),B.consume(),this.graphHandler.reset())}ft!=null&&(this.selectionCellsHandler.isHandlerActive(ft)?this.isCellSelected(st.cell)||(this.selectionCellsHandler.handlers.put(st.cell,ft),this.selectCellForEvent(st.cell,B.getEvent())):this.isCellSelected(st.cell)||ft.destroy()),u.selected=!1,u.handle=null,u.state=null,u.event=null,u.point=null}}else{var st=B.getState();if(st!=null&&this.isCellEditable(st.cell)){var Tt=this.model.getParent(st.cell),vt=null;if(this.model.isEdge(st.cell)&&!this.isCellSelected(st.cell)&&!mxEvent$1.isAltDown(B.getEvent())&&!mxEvent$1.isShiftDown(B.getEvent())&&!this.isAncestorSelected(st.cell)&&(this.isSwimlane(Tt)||this.model.isLayer(Tt)||this.getCurrentRoot()==Tt)){var Mt=new mxRectangle$1(B.getGraphX(),B.getGraphY());Mt.grow(mxEdgeHandler$1.prototype.handleImage.width/2);var ct=st.absolutePoints;if(ct!=null)if(st.text!=null&&st.text.boundingBox!=null&&mxUtils$1.contains(st.text.boundingBox,B.getGraphX(),B.getGraphY()))vt="move";else if(mxUtils$1.contains(Mt,ct[0].x,ct[0].y)||mxUtils$1.contains(Mt,ct[ct.length-1].x,ct[ct.length-1].y))vt="pointer";else{var Ct=this.view.getEdgeStyle(st);if(Ct!=mxEdgeStyle$1.EntityRelation&&(st.visibleSourceState!=null||st.visibleTargetState!=null)&&(vt="crosshair",Ct==mxEdgeStyle$1.SegmentConnector||Ct==mxEdgeStyle$1.OrthConnector)){var Pt=mxUtils$1.findNearestSegment(st,B.getGraphX(),B.getGraphY());Pt<ct.length-1&&Pt>=0&&(vt=Math.round(ct[Pt].x-ct[Pt+1].x)==0?"col-resize":"row-resize")}}}else if(!mxEvent$1.isControlDown(B.getEvent())){var tt=mxShape$1.prototype.svgStrokeTolerance/2,Mt=new mxRectangle$1(B.getGraphX(),B.getGraphY());if(Mt.grow(tt),this.isTableCell(st.cell)&&this.isCellMovable(st.cell)){var Dt=this.model.getParent(st.cell),zt=this.model.getParent(Dt);this.isCellSelected(zt)||(mxUtils$1.intersects(Mt,new mxRectangle$1(st.x,st.y-2,st.width,4))&&this.model.getChildAt(zt,0)!=Dt||mxUtils$1.intersects(Mt,new mxRectangle$1(st.x,st.y+st.height-2,st.width,4))?vt="row-resize":(mxUtils$1.intersects(Mt,new mxRectangle$1(st.x-2,st.y,4,st.height))&&this.model.getChildAt(Dt,0)!=st.cell||mxUtils$1.intersects(Mt,new mxRectangle$1(st.x+st.width-2,st.y,4,st.height)))&&(vt="col-resize"))}for(var Rt=st;vt==null&&Rt!=null&&(this.isTableCell(Rt.cell)||this.isTableRow(Rt.cell)||this.isTable(Rt.cell));){if(this.isSwimlane(Rt.cell)&&this.isCellMovable(Rt.cell)){var Nt=this.getActualStartSize(Rt.cell),Bt=this.view.scale;(Nt.x>0||Nt.width>0)&&mxUtils$1.intersects(Mt,new mxRectangle$1(Rt.x+(Nt.x-Nt.width-1)*Bt+(Nt.x==0?Rt.width*Bt:0),Rt.y,1,Rt.height))?vt="col-resize":(Nt.y>0||Nt.height>0)&&mxUtils$1.intersects(Mt,new mxRectangle$1(Rt.x,Rt.y+(Nt.y-Nt.height-1)*Bt+(Nt.y==0?Rt.height:0),Rt.width,1))&&(vt="row-resize")}Rt=this.view.getState(this.model.getParent(Rt.cell))}}vt!=null&&st.setCursor(vt)}}}}),mouseUp:mxUtils$1.bind(this,function(Y,B){u.state=null,u.event=null,u.point=null,u.handle=null})})}if(this.cellRenderer.minSvgStrokeWidth=.1,this.cellRenderer.getLabelValue=function(Y){var B=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return Y.view.graph.isHtmlLabel(Y.cell)&&(Y.style.html!=1?B=mxUtils$1.htmlEntities(B,!1):(Y.lastLabelValue!=B&&(Y.lastLabelValue=B,Y.lastSanitizedLabelValue=Graph$1.sanitizeHtml(B)),B=Y.lastSanitizedLabelValue)),B},typeof mxVertexHandler$1<"u"){this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.resetEdgesOnConnect=!1,this.constrainChildren=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(Y,B){return!1},this.alternateEdgeStyle="vertical",n==null&&this.loadStylesheet();var p=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var Y=p.apply(this,arguments);if(this.graph.pageVisible){for(var B=[],U=this.graph.pageFormat,lt=this.graph.pageScale,tt=U.width*lt,st=U.height*lt,ft=this.graph.view.translate,$t=this.graph.view.scale,Ct=this.graph.getPageLayout(),pt=0;pt<Ct.width;pt++)B.push(new mxRectangle$1(((Ct.x+pt)*tt+ft.x)*$t,(Ct.y*st+ft.y)*$t,tt*$t,st*$t));for(var ct=1;ct<Ct.height;ct++)B.push(new mxRectangle$1((Ct.x*tt+ft.x)*$t,((Ct.y+ct)*st+ft.y)*$t,tt*$t,st*$t));Y=B.concat(Y)}return Y},mxDragSource$1.prototype.dragElementZIndex=mxPopupMenu$1.prototype.zIndex,mxGuide$1.prototype.getGuideColor=function(Y,B){return Y.cell==null?"#ffa500":mxConstants$1.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(Y){return this.previewColor=this.graph.background=="#000000"?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)};var c=this.graphHandler.getCells;this.graphHandler.getCells=function(Y){for(var B=c.apply(this,arguments),U=new mxDictionary$1,lt=[],tt=0;tt<B.length;tt++){var st=this.graph.isTableCell(Y)&&this.graph.isTableCell(B[tt])&&this.graph.isCellSelected(B[tt])?this.graph.model.getParent(B[tt]):this.graph.isTableRow(Y)&&this.graph.isTableRow(B[tt])&&this.graph.isCellSelected(B[tt])?B[tt]:this.graph.getCompositeParent(B[tt]);st!=null&&!U.get(st)&&(U.put(st,!0),lt.push(st))}return lt};var g=this.graphHandler.start;this.graphHandler.start=function(Y,B,U,lt){var tt=!1;this.graph.isTableCell(Y)&&(this.graph.isCellSelected(Y)?tt=!0:Y=this.graph.model.getParent(Y)),!tt&&(!this.graph.isTableRow(Y)||!this.graph.isCellSelected(Y))&&(Y=this.graph.getCompositeParent(Y)),g.apply(this,arguments)},this.connectionHandler.createTargetVertex=function(Y,B){return B=this.graph.getCompositeParent(B),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)},this.connectionHandler.insertEdge=function(Y,B,U,lt,tt,st){var ft=mxConnectionHandler.prototype.insertEdge.apply(this,arguments);return lt!=null&&this.graph.applyNewEdgeStyle(lt,[ft]),ft};var x=new mxRubberband(this);this.getRubberband=function(){return x};var C=new Date().getTime(),T=0,A=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var Y=this.currentState;A.apply(this,arguments),Y!=this.currentState?(C=new Date().getTime(),T=0):T=new Date().getTime()-C};var R=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(Y){return mxEvent$1.isShiftDown(Y.getEvent())&&mxEvent$1.isAltDown(Y.getEvent())?!1:this.currentState!=null&&Y.getState()==this.currentState&&T>2e3||(this.currentState==null||mxUtils$1.getValue(this.currentState.style,"outlineConnect","1")!="0")&&R.apply(this,arguments)};var _=this.isToggleEvent;this.isToggleEvent=function(Y){return _.apply(this,arguments)||!mxClient$1.IS_CHROMEOS&&mxEvent$1.isShiftDown(Y)};var N=x.isForceRubberbandEvent;x.isForceRubberbandEvent=function(Y){return N.apply(this,arguments)||mxClient$1.IS_CHROMEOS&&mxEvent$1.isShiftDown(Y.getEvent())||mxUtils$1.hasScrollbars(this.graph.container)&&mxClient$1.IS_FF&&mxClient$1.IS_WIN&&Y.getState()==null&&mxEvent$1.isTouchEvent(Y.getEvent())};var H=null;this.panningHandler.addListener(mxEvent$1.PAN_START,mxUtils$1.bind(this,function(){this.isEnabled()&&(H=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent$1.PAN_END,mxUtils$1.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=H)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(Y){return mxEvent$1.isMouseEvent(Y.getEvent())};var k=this.click;this.click=function(Y){var B=Y.state==null&&Y.sourceState!=null&&this.isCellLocked(this.getLayerForCell(Y.sourceState.cell));if((!this.isEnabled()||B)&&!Y.isConsumed()){var U=B?Y.sourceState.cell:Y.getCell();if(U!=null){var lt=this.getClickableLinkForCell(U);lt!=null?this.isCustomLink(lt)?this.customLinkClicked(lt,U):this.openLink(lt):B&&this.clearSelection()}}else return k.apply(this,arguments)},this.tooltipHandler.getStateForEvent=function(Y){return Y.sourceState};var K=this.tooltipHandler.show;this.tooltipHandler.show=function(){if(K.apply(this,arguments),this.div!=null)for(var Y=this.div.getElementsByTagName("a"),B=0;B<Y.length;B++)Y[B].getAttribute("href")!=null&&Y[B].getAttribute("target")==null&&Y[B].setAttribute("target","_blank")},this.tooltipHandler.getStateForEvent=function(Y){return Y.sourceState},this.getCursorForMouseEvent=function(Y){var B=Y.state==null&&Y.sourceState!=null&&this.isCellLocked(Y.sourceState.cell);return this.getCursorForCell(B?Y.sourceState.cell:Y.getCell())};var Q=this.getCursorForCell;this.getCursorForCell=function(Y){if(!this.isEnabled()||this.isCellLocked(Y)){var B=this.getClickableLinkForCell(Y);if(B!=null)return"pointer";if(this.isCellLocked(Y))return"default"}return Q.apply(this,arguments)},this.selectRegion=function(Y,B){var U=mxEvent$1.isAltDown(B)?Y:null,lt=this.getCells(Y.x,Y.y,Y.width,Y.height,null,null,U,null,!0);if(this.isToggleEvent(B))for(var tt=0;tt<lt.length;tt++)this.selectCellForEvent(lt[tt],B);else this.selectCellsForEvent(lt,B);return lt};var nt=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(Y,B,U){return this.graph.isCellSelected(Y)?!1:nt.apply(this,arguments)};var dt=this.updateMouseEvent;this.updateMouseEvent=function(Y){return Y=dt.apply(this,arguments),Y.state!=null&&this.isCellLocked(this.getLayerForCell(Y.getCell()))&&(this.getLinkForCell(Y.getCell())==null?Y.state=this.view.getState(this.getCellAt(Y.getGraphX(),Y.getGraphY(),null,null,null,mxUtils$1.bind(this,function(B,U,lt){return Y.state==B||this.isCellLocked(this.getLayerForCell(B.cell))&&this.getLinkForCell(B.cell)==null}))):Y.state=null),Y};var mt=this.isCellSelectable;this.isCellSelectable=function(Y){return mt.apply(this,arguments)&&!this.isCellLocked(this.getLayerForCell(Y))},this.isCellLocked=function(Y){for(;Y!=null;){if(mxUtils$1.getValue(this.getCurrentCellStyle(Y),"locked","0")=="1")return!0;Y=this.model.getParent(Y)}return!1};var xt=null;this.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(Y,B){if(B.getProperty("eventName")=="mouseDown"){var U=B.getProperty("event"),lt=U.getState();lt!=null&&!this.isSelectionEmpty()&&!this.isCellSelected(lt.cell)?xt=this.getSelectionCells():xt=null}})),this.addListener(mxEvent$1.TAP_AND_HOLD,mxUtils$1.bind(this,function(Y,B){if(!mxEvent$1.isMultiTouchEvent(B)){var U=B.getProperty("event"),lt=B.getProperty("cell");if(lt==null){var tt=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(U),mxEvent$1.getClientY(U));x.start(tt.x,tt.y)}else xt!=null?this.addSelectionCells(xt):this.getSelectionCount()>1&&this.isCellSelected(lt)&&this.removeSelectionCell(lt);xt=null,B.consume()}})),this.connectionHandler.selectCells=function(Y,B){this.graph.setSelectionCell(B||Y)},this.connectionHandler.constraintHandler.isStateIgnored=function(Y,B){var U=Y.view.graph;return B&&(U.isCellSelected(Y.cell)||U.isTableRow(Y.cell)&&U.selectionCellsHandler.isHandled(U.model.getParent(Y.cell)))},this.selectionModel.addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){var Y=this.connectionHandler.constraintHandler;Y.currentFocus!=null&&Y.isStateIgnored(Y.currentFocus,!0)&&(Y.currentFocus=null,Y.constraints=null,Y.destroyIcons()),Y.destroyFocusHighlight()})),Graph$1.touchStyle&&this.initTouch()}this.currentTranslate=new mxPoint$1(0,0)};Graph$1.touchStyle=mxClient$1.IS_TOUCH||mxClient$1.IS_FF&&mxClient$1.IS_WIN||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.urlParams==null||urlParams$1.touch=="1";Graph$1.fileSupport=window.File!=null&&window.FileReader!=null&&window.FileList!=null&&(window.urlParams==null||urlParams$1.filesupport!="0");Graph$1.translateDiagram=urlParams$1["translate-diagram"]=="1";Graph$1.diagramLanguage=urlParams$1["diagram-language"]!=null?urlParams$1["diagram-language"]:mxClient$1.language;Graph$1.lineJumpsEnabled=!0;Graph$1.defaultJumpSize=6;Graph$1.zoomWheel=!1;Graph$1.selectParentLayer=!1;Graph$1.minTableColumnWidth=20;Graph$1.minTableRowHeight=20;Graph$1.foreignObjectWarningText="Text is not SVG - cannot display";Graph$1.foreignObjectWarningLink="https://www.drawio.com/doc/faq/svg-export-text-problems";Graph$1.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>';Graph$1.svgDoctype='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';Graph$1.svgFileComment="<!-- Do not edit this file with editors other than draw.io -->";Graph$1.textStyles=["fontFamily","fontSource","fontSize","fontColor","fontStyle","textOpacity","labelBorderColor","labelBackgroundColor","autosize","resizable"];Graph$1.edgeStyles=["edgeStyle","elbow","jumpStyle","jumpSize","startArrow","startFill","startSize","endArrow","endFill","endSize","flowAnimation","flowAnimationDirection","flowAnimationTimingFunction","flowAnimationDuration","sourcePerimeterSpacing","targetPerimeterSpacing","curved"];Graph$1.cellStyleGroups=[["startArrow","startFill","endArrow","endFill"],["startSize","endSize"],["sourcePerimeterSpacing","targetPerimeterSpacing"],["fillColor","gradientColor","gradientDirection"]];Graph$1.cellStyles=mxUtils$1.addItems(mxUtils$1.addItems(mxUtils$1.addItems(["rounded","shadow","glass","dashed","dashPattern","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle","pointerEvents","opacity","strokeColor","strokeWidth","align","verticalAlign","spacingLeft","spacingRight","spacingTop","spacingBottom","spacing","arcSize","comicStyle","swimlaneFillColor","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity"],Graph$1.textStyles),Graph$1.edgeStyles),Graph$1.cellStyleGroups);Graph$1.layoutNames=["mxHierarchicalLayout","mxCircleLayout","mxCompactTreeLayout","mxEdgeLabelLayout","mxFastOrganicLayout","mxParallelEdgeLayout","mxPartitionLayout","mxRadialTreeLayout","mxStackLayout"];Graph$1.createOffscreenGraph=function(t){var e=new Graph$1(document.createElement("div"));return e.stylesheet.styles=mxUtils$1.clone(t.styles),e.resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e};Graph$1.createSvgImage=function(t,e,i,n,r){var l=unescape(encodeURIComponent(Graph$1.svgDoctype+'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t+'px" height="'+e+'px" '+(n!=null&&r!=null?'viewBox="0 0 '+n+" "+r+'" ':"")+'version="1.1">'+i+"</svg>"));return new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(l):Base64.encode(l,!0)),t,e)};Graph$1.createSvgDarkModeCss=function(t){return t=t!=null?"."+t:"","svg"+t+`:not(mjx-container > svg) { filter: invert(100%) hue-rotate(180deg); }
svg`+t+` foreignObject img,
svg`+t+" image:not(svg"+t+` switch image),
svg`+t+` svg:not(mjx-container > svg)
{ filter: invert(100%) hue-rotate(180deg) }`};Graph$1.createSvgDarkModeStyle=function(t,e,i,n){var r=mxUtils$1.createElementNs(t,mxConstants$1.NS_SVG,"style");t.setAttributeNS!=null?r.setAttributeNS("type","text/css"):r.setAttribute("type","text/css");var l=Graph$1.createSvgDarkModeCss(i);return e=="auto"&&(i=i!=null?"."+i:"",l=`@media (prefers-color-scheme: dark) {
`+l+`
`,n!=null&&(l+="svg"+i+" { background-color: "+Graph$1.invertColor(n)+` !important; }
`),l+="}"),r.appendChild(t.createTextNode(l)),r};Graph$1.invertColor=function(t,e){if(e==null){var i=document.createElement("canvas");i.width=1,i.height=1;var e=i.getContext("2d");e.filter="invert(100%) hue-rotate(180deg)"}e.fillStyle=t,e.fillRect(0,0,1,1);var n=e.getImageData(0,0,1,1),r=n.data[0],l=n.data[1],s=n.data[2],a=s|l<<8|r<<16;return"#"+(16777216|a).toString(16).substring(1)};Graph$1.getSvgFromDataUri=function(t){return t!=null&&t.substring(0,14)=="data:image/svg"?Graph$1.xmlDeclaration+`
`+Graph$1.svgDoctype+`
`+decodeURIComponent(escape(atob(t.substring(t.indexOf(",")+1)))):null};Graph$1.createSvgNode=function(t,e,i,n,r){var l=mxUtils$1.createXmlDocument(),s=l.createElementNS!=null?l.createElementNS(mxConstants$1.NS_SVG,"svg"):l.createElement("svg");return r!=null&&(s.style!=null?s.style.backgroundColor=r:s.setAttribute("style","background-color:"+r)),l.createElementNS==null?(s.setAttribute("xmlns",mxConstants$1.NS_SVG),s.setAttribute("xmlns:xlink",mxConstants$1.NS_XLINK)):s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants$1.NS_XLINK),s.setAttribute("version","1.1"),s.setAttribute("width",i+"px"),s.setAttribute("height",n+"px"),s.setAttribute("viewBox",t+" "+e+" "+i+" "+n),l.appendChild(s),s};Graph$1.htmlToPng=function(t,e,i,n,r,l){r=r??"",l=l??Editor$2.htmlRasterScale;var s=document.createElement("canvas");s.width=e*l,s.height=i*l;var a=document.createElement("img");a.onload=mxUtils$1.bind(this,function(){try{var c=s.getContext("2d");c.scale(l,l),c.drawImage(a,0,0),n(s.toDataURL())}catch{n(null)}});var o=mxUtils$1.createXmlDocument(),u=o.createElementNS!=null?o.createElementNS(mxConstants$1.NS_SVG,"svg"):o.createElement("svg"),d=new mxSvgCanvas2D$1(u);t=d.convertHtml(t);var p='<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'">'+(r!=""?'<defs xmlns="http://www.w3.org/2000/svg"><style type="text/css">'+r+"</style></defs>":"")+'<foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">'+t+"</div></foreignObject></svg>";a.onerror=function(c){n(null)},a.src="data:image/svg+xml,"+encodeURIComponent(p)};Graph$1.zapGremlins=function(t){return mxUtils$1.zapGremlins(t)};Graph$1.stringToBytes=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e};Graph$1.bytesToString=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=String.fromCharCode(t[i]);return e.join("")};Graph$1.base64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,i){return String.fromCharCode(parseInt(i,16))}))};Graph$1.base64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))};Graph$1.compressNode=function(t,e){var i=mxUtils$1.getXml(t);return Graph$1.compress(e?i:Graph$1.zapGremlins(i))};Graph$1.arrayBufferToString=function(t){for(var e="",i=new Uint8Array(t),n=i.byteLength,r=0;r<n;r++)e+=String.fromCharCode(i[r]);return e};Graph$1.stringToArrayBuffer=function(t){return Uint8Array.from(t,function(e){return e.charCodeAt(0)})};Graph$1.arrayBufferIndexOfString=function(t,e,i){for(var n=e.charCodeAt(0),r=1,l=-1,s=i||0;s<t.byteLength;s++)if(t[s]==n){l=s;break}for(var s=l+1;l>-1&&s<t.byteLength&&s<l+e.length-1;s++){if(t[s]!=e.charCodeAt(r))return Graph$1.arrayBufferIndexOfString(t,e,l+1);r++}return r==e.length-1?l:-1};Graph$1.compress=function(t,e){if(t==null||t.length==0||typeof pako>"u")return t;var i=e?pako.deflate(encodeURIComponent(t)):pako.deflateRaw(encodeURIComponent(t));return btoa(Graph$1.arrayBufferToString(new Uint8Array(i)))};Graph$1.decompress=function(t,e,i){if(t==null||t.length==0||typeof pako>"u")return t;var n=Graph$1.stringToArrayBuffer(atob(t)),r=decodeURIComponent(e?pako.inflate(n,{to:"string"}):pako.inflateRaw(n,{to:"string"}));return i?r:Graph$1.zapGremlins(r)};Graph$1.fadeNodes=function(t,e,i,n,r){r=r??1e3,Graph$1.setTransitionForNodes(t,null),Graph$1.setOpacityForNodes(t,e),window.setTimeout(function(){Graph$1.setTransitionForNodes(t,"all "+r+"ms ease-in-out"),Graph$1.setOpacityForNodes(t,i),window.setTimeout(function(){Graph$1.setTransitionForNodes(t,null),n!=null&&n()},r)},0)};Graph$1.exploreFromCell=function(t,e,i){pageSize=i!=null&&i.pageSize!=null?i.pageSize:8,minSize=i!=null&&i.minSize!=null?i.minSize:180;function n(r,l){var s=document.createElement("div");s.style.position="absolute",s.style.display="block",s.style.background=Editor$2.isDarkMode()?Editor$2.darkColor:"#ffffff",s.style.width="100%",s.style.height="100%",s.style.left="0px",s.style.top="0px",s.style.zIndex=2;var a=document.createElement("img");a.setAttribute("src",Editor$2.closeBlackImage),a.style.position="absolute",a.style.cursor="pointer",a.style.right="10px",a.style.top="10px",s.appendChild(a);var o=document.createElement("div");o.style.position="absolute",o.style.cursor="pointer",o.style.right="38px",o.style.top="14px",o.style.textAlign="right",o.style.verticalAlign="top",mxUtils$1.write(o,mxResources$1.get("close")),s.appendChild(o),document.body.appendChild(s);var u=function(g){g.keyCode==27&&a.click()};mxEvent$1.addListener(document,"keydown",u);function d(g){if(!mxClient$1.isBrowserSupported())mxUtils$1.error("Browser is not supported!",200,!1);else{var x=new Graph$1(g);x.keepEdgesInBackground=!0,x.isCellResizable=function(){return!1},x.isCellRotatable=function(){return!1},x.getCursorForCell=function(H){return this.model.isVertex(H)?"pointer":null},x.getFoldingImage=function(){return null};var C=function(){mxEvent$1.removeListener(document,"keydown",u),g.parentNode.removeChild(g),r.scrollCellToVisible(l)};mxEvent$1.addListener(a,"click",C),mxEvent$1.addListener(o,"click",C),x.setEnabled(!1);var T=x.click;x.click=function(H){var k=H.getCell(),K=k!=null?k.referenceCell!=null?k.referenceCell:k:null;k!=null&&x.rootCell!=k&&x.getEdges(K).length>0?p(x,k):T.apply(this,arguments)};var A=x.container.scrollWidth/2,R=x.container.scrollHeight/3;x.model.beginUpdate();var _=x.importCells([l])[0];_.sourceCellId=l.id,_.geometry.x=A-_.geometry.width/2,_.geometry.y=R-_.geometry.height/2,x.model.endUpdate();var N=!1;x.getModel().addListener(mxEvent$1.CHANGE,function(H,k){if(!N){var K=k.getProperty("edit").changes;mxText$1.prototype.enableBoundingBox=!1,x.labelsVisible=!1,N=!0,mxEffects$1.animateChanges(x,K,function(){var Q=new mxParallelEdgeLayout(x);Q.spacing=60;var nt=Q.layout;Q.layout=function(dt){Q.spacing=Math.min(60,Math.max(30,60-dt.length*5)),nt.apply(this,arguments)},Q.execute(x.getDefaultParent()),mxText$1.prototype.enableBoundingBox=!0,x.labelsVisible=!0,x.tooltipHandler.hide(),x.refresh(),N=!1})}}),p(x,_)}}function p(g,x){if(g.getModel().isVertex(x)){var C=g.container.scrollWidth/2,T=g.container.scrollHeight/2;g.rootCell=x.referenceCell||x,g.getModel().beginUpdate();try{var A=c(g,x);for(var R in g.getModel().cells){var _=g.getModel().getCell(R);_!=g.rootCell&&!g.getModel().isAncestor(g.rootCell,_)&&g.getModel().isVertex(_)&&g.removeCells([_])}g.addCells(A);var N=g.getModel().getGeometry(g.rootCell);N!=null&&(N=N.clone(),N.x=C-N.width/2,N.y=T-N.height/3,g.getModel().setGeometry(g.rootCell,N));var H=[];for(var R in g.getModel().cells){var _=g.getModel().getCell(R);if(_!=g.rootCell&&g.getModel().isVertex(_)&&g.getModel().getParent(_)==g.getDefaultParent()){H.push(_);var N=g.getModel().getGeometry(_);N!=null&&(N.x=C-N.width/2,N.y=T-N.height/2)}}for(var k=H.length,K=2*Math.PI/k,Q=Math.max(minSize,Math.min(g.container.scrollWidth/2.5-80,g.container.scrollHeight/2.5-80)),nt=0;nt<k;nt++){var N=g.getModel().getGeometry(H[nt]);N!=null&&(N=N.clone(),N.x+=Q*Math.sin(nt*K),N.y+=Q*Math.cos(nt*K),g.getModel().setGeometry(H[nt],N))}}finally{g.getModel().endUpdate()}}}function c(g,x){for(var C=x.referenceCell||x,T=r.model.getCell(C.sourceCellId),A=r.getEdges(T,null,!0,!0,!1,!0),R=[],_=0;_<A.length;_++)A[_].getTerminal(!0)!=null&&A[_].getTerminal(!1)!=null&&r.isCellVisible(A[_])&&!r.isEdgeIgnored(A[_])&&r.isCellVisible(A[_].getTerminal(!0))&&r.isCellVisible(A[_].getTerminal(!1))&&r.isCellVisible(r.getLayerForCell(A[_]))&&R.push(A[_]);A=R;var N=A;if(x.startIndex!=null||pageSize>0&&A.length>pageSize){var H=x.startIndex||0;N=A.slice(Math.max(0,H),Math.min(A.length,H+pageSize))}N=r.getOpposites(N,T).concat(N);for(var k=g.cloneCells(N),K=";curved=1;noEdgeStyle=1;entryX=none;entryY=none;exitX=none;exitY=none;labelBackgroundColor=#ffffffc0;textOpacity=100;",Q="fillColor=green;fontColor=white;strokeColor=green;rounded=1;",_=0;_<N.length;_++)if(k[_].sourceCellId=N[_].id,g.model.isEdge(k[_])){k[_].geometry.x=0,k[_].geometry.y=0,k[_].geometry.points=null,k[_].setStyle(k[_].getStyle()+K),k[_].setTerminal(C,k[_].getTerminal(!0)==null);for(var nt=0;nt<k[_].getChildCount();nt++){var dt=k[_].getChildAt(nt);dt.geometry!=null&&dt.geometry.relative&&(dt.setStyle(dt.getStyle()+";labelBackgroundColor=#ffffffc0;textOpacity=100;"),dt.geometry.offset=new mxPoint$1(0,0),dt.geometry.y=0,dt.geometry.x<.5?dt.geometry.x=-.8:dt.geometry.x>.5?dt.geometry.x=.8:dt.geometry.x=0)}}if(x.startIndex>0){var mt=g.createVertex(null,null,mxResources$1.get("previousPage")+" ("+Math.ceil((x.startIndex||0)/pageSize)+"/"+Math.ceil(A.length/pageSize)+")",0,0,120,30,Q);mt.referenceCell=C,mt.startIndex=Math.max(0,(x.startIndex||0)-pageSize),k.splice(0,0,mt)}if(A.length>(x.startIndex||0)+pageSize){var xt=g.createVertex(null,null,mxResources$1.get("nextPage")+" ("+(Math.ceil((x.startIndex||0)/pageSize)+2)+"/"+Math.ceil(A.length/pageSize)+")",0,0,120,30,Q);xt.referenceCell=C,xt.startIndex=(x.startIndex||0)+pageSize,k.splice(0,0,xt)}return k}d(s)}n(t,e)};Graph$1.removeKeys=function(t,e){for(var i in t)e(i)&&delete t[i]};Graph$1.setTransitionForNodes=function(t,e){for(var i=0;i<t.length;i++)mxUtils$1.setPrefixedStyle(t[i].style,"transition",e)};Graph$1.setOpacityForNodes=function(t,e){for(var i=0;i<t.length;i++)t[i].style.opacity=e};Graph$1.removePasteFormatting=function(t,e){for(;t!=null;){t.firstChild!=null&&Graph$1.removePasteFormatting(t.firstChild,!0);var i=t.nextSibling;if(t.nodeType==mxConstants$1.NODETYPE_ELEMENT&&t.style!=null){if(t.style.color=="#000000"&&(t.style.color=""),t.nodeName=="SPAN"&&t.className=="Apple-tab-span"){var n=Graph$1.createTabNode(4);t.parentNode.replaceChild(n,t),t=n}if(t.nodeName=="P"&&t.className=="p1"){for(;t.firstChild!=null;)t.parentNode.insertBefore(t.firstChild,t);i!=null&&i.nodeName=="P"&&i.className=="p1"&&t.parentNode.insertBefore(t.ownerDocument.createElement("br"),t),t.parentNode.removeChild(t)}if(!e&&t.innerHTML!=null&&t.innerHTML.indexOf("	")>=0){var r=Graph$1.createTabNode(4);t.innerHTML=t.innerHTML.replace(/\t/g,r.outerHTML)}}t=i}};Graph$1.createTabNode=function(t){var e="	";if(t!=null)for(e="";t>0;)e+="",t--;var i=document.createElement("span");return i.style.whiteSpace="pre",i.appendChild(document.createTextNode(e)),i};Graph$1.sanitizeHtml=function(t,e){return Graph$1.domPurify(t,!1)};Graph$1.sanitizeLink=function(t){if(t==null)return null;var e=document.createElement("a");return e.setAttribute("href",t),Graph$1.sanitizeNode(e),e.getAttribute("href")};Graph$1.sanitizeNode=function(t){return Graph$1.domPurify(t,!0)};purify.addHook("afterSanitizeAttributes",function(t){t.nodeName=="use"&&(t.getAttribute("xlink:href")!=null&&!t.getAttribute("xlink:href").startsWith("#")||t.getAttribute("href")!=null&&!t.getAttribute("href").startsWith("#"))&&t.remove()});Graph$1.domPurify=function(t,e){return DOM_PURIFY_CONFIG.IN_PLACE=e,purify.sanitize(t,DOM_PURIFY_CONFIG)};Graph$1.clipSvgDataUri=function(t,e){if(!mxClient$1.IS_IE&&!mxClient$1.IS_IE11&&t!=null&&t.substring(0,26)=="data:image/svg+xml;base64,")try{var i=document.createElement("div");i.style.position="absolute",i.style.visibility="hidden";var n=decodeURIComponent(escape(atob(t.substring(26)))),r=n.indexOf("<svg");if(r>=0){i.innerHTML=Graph$1.sanitizeHtml(n.substring(r));var l=i.getElementsByTagName("svg");if(l.length>0){if(e||l[0].getAttribute("preserveAspectRatio")!=null){document.body.appendChild(i);try{var s=1,a=1,o=l[0].getAttribute("width"),u=l[0].getAttribute("height");o!=null&&o.charAt(o.length-1)!="%"?o=parseFloat(o):o=NaN,u!=null&&u.charAt(u.length-1)!="%"?u=parseFloat(u):u=NaN;var d=l[0].getAttribute("viewBox"),p=null;if(d!=null&&!isNaN(o)&&!isNaN(u)){var c=d.split(" ");d.length>=4&&(s=parseFloat(c[2])/o,a=parseFloat(c[3])/u,p=new mxRectangle$1(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])))}var g=l[0].getBBox();g.width>0&&g.height>0&&(p==null||g.width*g.height<p.width*p.height*.7)&&(i.getElementsByTagName("svg")[0].setAttribute("viewBox",g.x+" "+g.y+" "+g.width+" "+g.height),i.getElementsByTagName("svg")[0].setAttribute("width",g.width/s),i.getElementsByTagName("svg")[0].setAttribute("height",g.height/a))}catch{}finally{document.body.removeChild(i)}}t=Editor$2.createSvgDataUri(mxUtils$1.getXml(l[0]))}}}catch{}return t};Graph$1.createRemoveIcon=function(t,e){var i=document.createElement("img");return i.setAttribute("src",Dialog.prototype.clearImage),i.setAttribute("title",t),i.setAttribute("width","13"),i.setAttribute("height","10"),i.style.marginLeft="4px",i.style.marginBottom="-1px",i.style.cursor="pointer",mxEvent$1.addListener(i,"click",e),i};Graph$1.isPageLink=function(t){return t!=null&&t.substring(0,13)=="data:page/id,"};Graph$1.rewritePageLinks=function(t,e){var i=t.getElementsByTagName("a");function n(l,s){var a=l.getAttribute(s);if(a!=null){Graph$1.isPageLink(a)&&(a="#"+a.substring(a.indexOf(":")+1));var o=s;e&&s=="xlink:href"&&(l.removeAttribute(s),o="href"),l.setAttribute(o,a)}}if(i!=null)for(var r=0;r<i.length;r++)n(i[r],"href"),n(i[r],"xlink:href")};Graph$1.isLink=function(t){return t!=null&&t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)};mxUtils$1.extend(Graph$1,mxGraph);Graph$1.prototype.minFitScale=null;Graph$1.prototype.maxFitScale=null;Graph$1.prototype.linkPolicy=urlParams$1.target=="frame"?"blank":urlParams$1.target||"auto";Graph$1.prototype.linkTarget=urlParams$1.target=="frame"?"_self":"_blank";Graph$1.prototype.linkRelation="nofollow noopener noreferrer";Graph$1.prototype.defaultScrollbars=!0;Graph$1.prototype.defaultPageVisible=!1;Graph$1.prototype.defaultGridEnabled=urlParams$1.grid!="0";Graph$1.prototype.lightbox=!1;Graph$1.prototype.defaultPageBackgroundColor="#ffffff";Graph$1.prototype.diagramBackgroundColor="#f0f0f0";Graph$1.prototype.enableDiagramBackground=!1;Graph$1.prototype.defaultPageBorderColor="#ffffff";Graph$1.prototype.shapeForegroundColor="#000000";Graph$1.prototype.shapeBackgroundColor="#ffffff";Graph$1.prototype.scrollTileSize=new mxRectangle$1(0,0,400,400);Graph$1.prototype.transparentBackground=!0;Graph$1.prototype.selectParentAfterDelete=!1;Graph$1.prototype.defaultEdgeLength=80;Graph$1.prototype.immediateHandling=!0;Graph$1.prototype.connectionArrowsEnabled=!0;Graph$1.prototype.placeholderPattern=new RegExp(`%(date{.*}|[^%^{^}^ ^"^ '^=^;]+)%`,"g");Graph$1.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i");Graph$1.prototype.defaultThemeName="default";Graph$1.prototype.defaultThemes={};Graph$1.prototype.baseUrl=urlParams$1.base!=null?mxUtils$1.removeJavascriptProtocol(decodeURIComponent(urlParams$1.base)):(window!=window.top?document.referrer:document.location.toString()).split("#")[0];Graph$1.prototype.editAfterInsert=!1;Graph$1.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"];Graph$1.prototype.standalone=!1;Graph$1.prototype.enableFlowAnimation=!1;Graph$1.prototype.roundableShapes=["label","rectangle","internalStorage","corner","parallelogram","swimlane","triangle","trapezoid","ext","step","tee","process","link","rhombus","offPageConnector","loopLimit","hexagon","manualInput","card","curlyBracket","singleArrow","callout","doubleArrow","flexArrow","umlLifeline"];Graph$1.prototype.vertexFontSize=null;Graph$1.prototype.edgeFontSize=null;Graph$1.prototype.init=function(t){if(mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(i,n){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var r=i.view.graph.tolerance,l=!0,s=null,a=mxUtils$1.bind(this,function(d){l=!0,s=new mxPoint$1(mxEvent$1.getClientX(d),mxEvent$1.getClientY(d))}),o=mxUtils$1.bind(this,function(d){l=l&&s!=null&&Math.abs(s.x-mxEvent$1.getClientX(d))<r&&Math.abs(s.y-mxEvent$1.getClientY(d))<r}),u=mxUtils$1.bind(this,function(d){if(l)for(var p=mxEvent$1.getSource(d);p!=null&&p!=n.node;){if(p.nodeName.toLowerCase()=="a"){i.view.graph.labelLinkClicked(i,p,d);break}p=p.parentNode}});mxEvent$1.addGestureListeners(n.node,a,o,u),mxEvent$1.addListener(n.node,"click",function(d){mxEvent$1.consume(d)})},this.tooltipHandler!=null){var e=this.tooltipHandler.init;this.tooltipHandler.init=function(){e.apply(this,arguments),this.div!=null&&mxEvent$1.addListener(this.div,"click",mxUtils$1.bind(this,function(i){var n=mxEvent$1.getSource(i);if(n.nodeName=="A"){var r=n.getAttribute("href");r!=null&&this.graph.isCustomLink(r)&&(mxEvent$1.isTouchEvent(i)||!mxEvent$1.isPopupTrigger(i))&&this.graph.customLinkClicked(r)&&mxEvent$1.consume(i)}}))}}this.initLayoutManager()};(function(){Graph$1.prototype.useCssTransforms=!1,Graph$1.prototype.currentScale=1,Graph$1.prototype.currentTranslate=new mxPoint$1(0,0),Graph$1.prototype.pasteEdgeStyle=!1,Graph$1.prototype.isFillState=function(s){return!this.isSpecialColor(s.style[mxConstants$1.STYLE_FILLCOLOR])&&mxUtils$1.getValue(s.style,"lineShape",null)!="1"&&(this.model.isVertex(s.cell)||mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null)=="arrow"||mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null)=="wire"||mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null)=="filledEdge"||mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null)=="flexArrow"||mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null)=="mxgraph.arrows2.wedgeArrow")},Graph$1.prototype.isGradientState=function(s){return this.isFillState(s)&&mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null)!="wire"},Graph$1.prototype.isStrokeState=function(s){return!0},Graph$1.prototype.isSpecialColor=function(s){return mxUtils$1.indexOf([mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_FILLCOLOR,"inherit","swimlane","indicated"],s)>=0},Graph$1.prototype.isGlassState=function(s){var a=mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null);return a=="label"||a=="rectangle"||a=="internalStorage"||a=="ext"||a=="umlLifeline"||a=="swimlane"||a=="process"},Graph$1.prototype.isRoundedState=function(s){return s.shape!=null?s.shape.isRoundable():mxUtils$1.indexOf(this.roundableShapes,mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null))>=0},Graph$1.prototype.isLineJumpState=function(s){var a=mxUtils$1.getValue(s.style,mxConstants$1.STYLE_SHAPE,null),o=mxUtils$1.getValue(s.style,mxConstants$1.STYLE_CURVED,!1);return!o&&(a=="connector"||a=="filledEdge"||a=="wire")},Graph$1.prototype.isAutoSizeState=function(s){return mxUtils$1.getValue(s.style,mxConstants$1.STYLE_AUTOSIZE,null)=="1"},Graph$1.prototype.isImageState=function(s){return mxUtils$1.getValue(s.style,mxConstants$1.STYLE_IMAGE,null)!=null},Graph$1.prototype.isShadowState=function(s){return!0},Graph$1.prototype.getVerticesAndEdges=function(s,a){s=s??!0,a=a??!0;var o=this.model;return o.filterDescendants(function(u){return s&&o.isVertex(u)||a&&o.isEdge(u)},o.getRoot())},Graph$1.prototype.applyNewEdgeStyle=function(s,a,o){var u=this.getCellStyle(s),d=u.newEdgeStyle;if(d!=null){this.model.beginUpdate();try{var p=JSON.parse(d);for(var c in p)this.setCellStyles(c,p[c],a),c=="edgeStyle"&&p[c]=="elbowEdgeStyle"&&o!=null&&this.setCellStyles("elbow",o==mxConstants$1.DIRECTION_SOUTH||o==mxConstants$1.DIRECTION_NOTH?"vertical":"horizontal",a)}finally{this.model.endUpdate()}}},Graph$1.prototype.getCommonStyle=function(s){for(var a={},o=0;o<s.length;o++){var u=this.view.getState(s[o]);u!=null&&this.mergeStyle(u.style,a,o==0)}return a},Graph$1.prototype.mergeStyle=function(s,a,o){if(s!=null){var u={};for(var d in s){var p=s[d];p!=null&&(u[d]=!0,a[d]==null&&o?a[d]=p:a[d]!=p&&delete a[d])}for(var d in a)u[d]||delete a[d]}},Graph$1.prototype.getStartEditingCell=function(s,a){var o=this.getCellStyle(s),u=parseInt(mxUtils$1.getValue(o,mxConstants$1.STYLE_STARTSIZE,0));if(this.isTable(s)&&(!this.isSwimlane(s)||u==0)&&this.getLabel(s)==""&&this.model.getChildCount(s)>0&&(s=this.model.getChildAt(s,0),o=this.getCellStyle(s),u=parseInt(mxUtils$1.getValue(o,mxConstants$1.STYLE_STARTSIZE,0))),this.isTableRow(s)&&(!this.isSwimlane(s)||u==0)&&this.getLabel(s)==""&&this.model.getChildCount(s)>0)for(var d=0;d<this.model.getChildCount(s);d++){var p=this.model.getChildAt(s,d);if(this.isCellEditable(p)){s=p;break}}return s},Graph$1.prototype.copyStyle=function(s){return this.getCellStyle(s,!1)},Graph$1.prototype.pasteStyle=function(s,a,o,u){s!=null&&(u||(o=o??Graph$1.cellStyles,Graph$1.removeKeys(s,function(d){return mxUtils$1.indexOf(o,d)<0})),this.updateCellStyles(s,a))},Graph$1.prototype.copyCellStyles=function(s,a,o,u,d,p,c){var g=!1,x=!1;if(s.length>0)for(var C=0;C<s.length&&(g=this.getModel().isVertex(s[C])||g,x=this.getModel().isEdge(s[C])||x,!(x&&g));C++);else g=!0,x=!0;g=g&&!p,x=x&&!c;for(var C=0;C<a.length;C++){var T=mxUtils$1.indexOf(Graph$1.textStyles,a[C])>=0;(a[C]!="strokeColor"||o[C]!=null&&o[C]!="none")&&(mxUtils$1.indexOf(Graph$1.cellStyles,a[C])>=0||a[C]=="shape")&&(a[C]!="shape"&&(g||T)&&(o[C]==null?delete u[a[C]]:u[a[C]]=o[C]),(x||T)&&(o[C]==null?delete d[a[C]]:d[a[C]]=o[C]))}},Graph$1.prototype.includeDescendants=function(s){for(var a=[],o=0;o<s.length;o++)a=a.concat(this.model.getDescendants(s[o]));return a},Graph$1.prototype.pasteCellStyles=function(s,a,o,u,d){a=a??this.currentVertexStyle,o=o??this.currentEdgeStyle,d=d??this.pasteEdgeStyle,this.model.beginUpdate();try{for(var p=0;p<s.length;p++){var c=s[p],g=this.model.getStyle(c),x=!1,C;if(c.style!=null){let Y=c.style.split(";");x=x||mxUtils$1.indexOf(Y,"text")>=0}if(x)C=Graph$1.textStyles;else if(C=Graph$1.cellStyles.slice(),!u)for(var T=g!=null?g.split(";"):[],A=0;A<T.length;A++){var R=T[A],_=R.indexOf("=");if(_>=0){var N=R.substring(0,_),H=mxUtils$1.indexOf(C,N);H>=0&&C.splice(H,1);for(var k=0;k<Graph$1.cellStyleGroups.length;k++){var K=Graph$1.cellStyleGroups[k];if(mxUtils$1.indexOf(K,N)>=0)for(var Q=0;Q<K.length;Q++){var nt=mxUtils$1.indexOf(C,K[Q]);nt>=0&&C.splice(nt,1)}}}}for(var dt=this.model.isEdge(c),mt=dt?o:a,A=0;A<C.length;A++){var N=C[A],xt=mt[N];xt!=null&&(N!="edgeStyle"||d)&&(dt||!dt&&mxUtils$1.indexOf(Graph$1.edgeStyles,N)<0)&&(g=mxUtils$1.setStyle(g,N,xt),N=="fontFamily"&&mt.fontSource==null&&(g=mxUtils$1.setStyle(g,"fontSource",null)),dt&&N=="rounded"&&xt=="1"&&mt.curved==null&&(g=mxUtils$1.setStyle(g,"curved",null)))}Editor$2.simpleLabels&&(g=mxUtils$1.setStyle(mxUtils$1.setStyle(g,"html",null),"whiteSpace",null)),this.model.setStyle(c,g)}}finally{this.model.endUpdate()}return s},Graph$1.prototype.updateCellStyles=function(s,a){this.model.beginUpdate();try{for(var o=0;o<a.length;o++)if(this.model.isVertex(a[o])||this.model.isEdge(a[o])){var u=this.getCellStyle(a[o],!1),d=u[mxConstants$1.STYLE_PERIMETER],p=!1;for(var c in s){var g=s[c];u[c]!=g&&(c==mxConstants$1.STYLE_SHAPE&&u[c]=="umlLifeline"&&g!="umlLifeline"&&(p=!0,c="participant"),this.setCellStyles(c,g,[a[o]]))}p&&this.setCellStyles(mxConstants$1.STYLE_PERIMETER,d,[a[o]])}}finally{this.model.endUpdate()}},Graph$1.prototype.isFastZoomEnabled=function(){return urlParams$1.zoom!="nocss"&&!mxClient$1.NO_FO&&!mxClient$1.IS_EDGE&&!this.useCssTransforms&&(this.isCssTransformsSupported()||mxClient$1.IS_IOS)},Graph$1.prototype.isCssTransformsSupported=function(){return this.dialect==mxConstants$1.DIALECT_SVG&&!mxClient$1.NO_FO&&(!this.lightbox||!mxClient$1.IS_SF)},Graph$1.prototype.getCellAt=function(s,a,o,u,d,p){return this.useCssTransforms&&(s=s/this.currentScale-this.currentTranslate.x,a=a/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph$1.prototype.getScaledCellAt=function(s,a,o,u,d,p){if(u=u??!0,d=d??!0,o==null&&(o=this.getCurrentRoot(),o==null&&(o=this.getModel().getRoot())),o!=null)for(var c=this.model.getChildCount(o),g=c-1;g>=0;g--){var x=this.model.getChildAt(o,g),C=this.getScaledCellAt(s,a,x,u,d,p);if(C!=null)return C;if(this.isCellVisible(x)&&(d&&this.model.isEdge(x)||u&&this.model.isVertex(x))){var T=this.view.getState(x);if(T!=null&&(p==null||!p(T,s,a))&&this.intersects(T,s,a))return x}}return null},Graph$1.prototype.isRecursiveVertexResize=function(s){return!this.isSwimlane(s.cell)&&this.model.getChildCount(s.cell)>0&&!this.isCellCollapsed(s.cell)&&mxUtils$1.getValue(s.style,"recursiveResize","1")=="1"&&mxUtils$1.getValue(s.style,"childLayout",null)==null},Graph$1.prototype.getAbsoluteParent=function(s){for(var a=s,o=this.getCellGeometry(a);o!=null&&o.relative;)a=this.getModel().getParent(a),o=this.getCellGeometry(a);return a},Graph$1.prototype.isPart=function(s){return mxUtils$1.getValue(this.getCurrentCellStyle(s),"part","0")=="1"||this.isTableCell(s)||this.isTableRow(s)},Graph$1.prototype.getCompositeParents=function(s){for(var a=new mxDictionary$1,o=[],u=0;u<s.length;u++){var d=this.getCompositeParent(s[u]);this.isTableCell(d)&&(d=this.graph.model.getParent(d)),this.isTableRow(d)&&(d=this.graph.model.getParent(d)),d!=null&&!a.get(d)&&(a.put(d,!0),o.push(d))}return o},Graph$1.prototype.getReferenceTerminal=function(s){if(s!=null){var a=this.getCellGeometry(s);a!=null&&a.relative&&(s=this.model.getParent(s))}return s!=null&&this.model.isEdge(s)&&(s=this.model.getParent(s)),s!=null&&(s=this.getCompositeParent(s)),s},Graph$1.prototype.getCompositeParent=function(s){for(;this.isPart(s);){var a=this.model.getParent(s);if(!this.model.isVertex(a))break;s=a}return s},Graph$1.prototype.filterSelectionCells=function(s){var a=this.getSelectionCells();if(s!=null){for(var o=[],u=0;u<a.length;u++)s(a[u])||o.push(a[u]);a=o}return a};var t=mxGraph.prototype.scrollRectToVisible;Graph$1.prototype.scrollRectToVisible=function(s){if(this.useCssTransforms){var a=this.currentScale,o=this.currentTranslate;s=new mxRectangle$1((s.x+2*o.x)*a-o.x,(s.y+2*o.y)*a-o.y,s.width*a,s.height*a)}t.apply(this,arguments)},mxCellHighlight$1.prototype.getStrokeWidth=function(s){var a=this.strokeWidth;return this.graph.useCssTransforms&&(a/=this.graph.currentScale),a},mxGraphView.prototype.getGraphBounds=function(){var s=this.graphBounds;if(this.graph.useCssTransforms){var a=this.graph.currentTranslate,o=this.graph.currentScale;s=new mxRectangle$1((s.x+a.x)*o,(s.y+a.y)*o,s.width*o,s.height*o)}return s},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?(this.validate(),this.graph.sizeDidChange()):(this.revalidate(),this.graph.sizeDidChange())};var e=mxGraphView.prototype.validate;mxGraphView.prototype.validate=function(s){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),e.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)};var i=mxGraph.prototype.getCellsForGroup;Graph$1.prototype.getCellsForGroup=function(s){s=i.apply(this,arguments);for(var a=[],o=0;o<s.length;o++)!this.isTableRow(s[o])&&!this.isTableCell(s[o])&&a.push(s[o]);return a};var n=mxGraph.prototype.getCellsForUngroup;Graph$1.prototype.getCellsForUngroup=function(s){s=n.apply(this,arguments);for(var a=[],o=0;o<s.length;o++)!this.isTable(s[o])&&!this.isTableRow(s[o])&&!this.isTableCell(s[o])&&a.push(s[o]);return a},Graph$1.prototype.updateCssTransform=function(){var s=this.view.getDrawPane();if(s!=null){var a=s.parentNode;if(!this.useCssTransforms)a.removeAttribute("transformOrigin"),a.removeAttribute("transform");else{var o=a.getAttribute("transform");a.setAttribute("transformOrigin","0 0");var u=Math.round(this.currentScale*100)/100,d=Math.round(this.currentTranslate.x*100)/100,p=Math.round(this.currentTranslate.y*100)/100;a.setAttribute("transform","scale("+u+","+u+")translate("+d+","+p+")"),o!=a.getAttribute("transform")&&this.fireEvent(new mxEventObject$1("cssTransformChanged"),"transform",a.getAttribute("transform"))}}};var r=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){var s=this.graph.useCssTransforms,a=this.scale,o=this.translate;s&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),r.apply(this,arguments),s&&(this.scale=a,this.translate=o)};var l=mxGraph.prototype.updatePageBreaks;mxGraph.prototype.updatePageBreaks=function(s,a,o){var u=this.useCssTransforms,d=this.view.scale,p=this.view.translate;u&&(this.view.scale=1,this.view.translate=new mxPoint$1(0,0),this.useCssTransforms=!1),l.apply(this,arguments),u&&(this.view.scale=d,this.view.translate=p,this.useCssTransforms=!0)}})();Graph$1.prototype.isLightboxView=function(){return this.lightbox};Graph$1.prototype.isViewer=function(){return!1};Graph$1.prototype.labelLinkClicked=function(t,e,i){var n=e.getAttribute("href");if(n!=Graph$1.sanitizeLink(n)&&Graph$1.sanitizeNode(e),n!=null&&!this.isCustomLink(n)&&(mxEvent$1.isLeftMouseButton(i)&&!mxEvent$1.isPopupTrigger(i)||mxEvent$1.isTouchEvent(i))){if(!this.isEnabled()||this.isCellLocked(t.cell)){var r=this.isBlankLink(n)?this.linkTarget:"_top";this.openLink(this.getAbsoluteUrl(n),r)}mxEvent$1.consume(i)}};Graph$1.prototype.openLink=function(t,e,i){var n=window;try{if(t=Graph$1.sanitizeLink(t),t!=null)if(e=="_self"&&window!=window.top)window.location.href=t;else if(t.substring(0,this.baseUrl.length)==this.baseUrl&&t.charAt(this.baseUrl.length)=="#"&&e=="_top"&&window==window.top){var r=t.split("#")[1];window.location.hash=="#"+r&&(window.location.hash=""),window.location.hash=r}else n=window.open(t,e??"_blank",i?null:"noopener,noreferrer"),n!=null&&!i&&(n.opener=null)}catch{}return n};Graph$1.prototype.getLinkTitle=function(t){return t.substring(t.lastIndexOf("/")+1)};Graph$1.prototype.isCustomLink=function(t){return t.substring(0,5)=="data:"};Graph$1.prototype.customLinkClicked=function(t,e){return!1};Graph$1.prototype.isExternalProtocol=function(t){return t.substring(0,7)==="mailto:"};Graph$1.prototype.isBlankLink=function(t){return!this.isExternalProtocol(t)&&(this.linkPolicy==="blank"||this.linkPolicy!=="self"&&!this.isRelativeUrl(t)&&t.substring(0,this.domainUrl.length)!==this.domainUrl)};Graph$1.prototype.isRelativeUrl=function(t){return t!=null&&!this.absoluteUrlPattern.test(t)&&t.substring(0,5)!=="data:"&&!this.isExternalProtocol(t)};Graph$1.prototype.getAbsoluteUrl=function(t){return t!=null&&this.isRelativeUrl(t)&&(t.charAt(0)=="#"?t=this.baseUrl+t:t.charAt(0)=="/"?t=this.domainUrl+t:t=this.domainPathUrl+t),t};Graph$1.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.hasLayout=function(t){return this.graph.getCellStyle(t).childLayout!=null},this.layoutManager.getLayout=function(t,e){var i=this.graph.model.getParent(t);if(!this.graph.isCellCollapsed(t)&&(e!=mxEvent$1.BEGIN_UPDATE||this.hasLayout(i,e))){var n=this.graph.getCellStyle(t);if(n.childLayout=="stackLayout"){var r=new mxStackLayout(this.graph,!0);return r.resizeParentMax=mxUtils$1.getValue(n,"resizeParentMax","1")=="1",r.horizontal=mxUtils$1.getValue(n,"horizontalStack","1")=="1",r.resizeParent=mxUtils$1.getValue(n,"resizeParent","1")=="1",r.resizeLast=mxUtils$1.getValue(n,"resizeLast","0")=="1",r.spacing=n.stackSpacing||r.spacing,r.border=n.stackBorder||r.border,r.marginLeft=n.marginLeft||0,r.marginRight=n.marginRight||0,r.marginTop=n.marginTop||0,r.marginBottom=n.marginBottom||0,r.allowGaps=n.allowGaps||0,r.fill=!0,r.allowGaps&&(r.gridSize=parseFloat(mxUtils$1.getValue(n,"stackUnitSize",20))),r}else if(n.childLayout=="treeLayout"){var l=new mxCompactTreeLayout(this.graph);return l.horizontal=mxUtils$1.getValue(n,"horizontalTree","1")=="1",l.resizeParent=mxUtils$1.getValue(n,"resizeParent","1")=="1",l.sortEdges=mxUtils$1.getValue(n,"sortEdges","0")=="1",l.groupPadding=mxUtils$1.getValue(n,"parentPadding",20),l.levelDistance=mxUtils$1.getValue(n,"treeLevelDistance",30),l.maintainParentLocation=!0,l.edgeRouting=!1,l.resetEdges=!1,l}else if(n.childLayout=="flowLayout"){var s=new mxHierarchicalLayout(this.graph,mxUtils$1.getValue(n,"flowOrientation",mxConstants$1.DIRECTION_EAST));return s.resizeParent=mxUtils$1.getValue(n,"resizeParent","1")=="1",s.parentBorder=mxUtils$1.getValue(n,"parentPadding",20),s.maintainParentLocation=!0,s.intraCellSpacing=mxUtils$1.getValue(n,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),s.interRankCellSpacing=mxUtils$1.getValue(n,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),s.interHierarchySpacing=mxUtils$1.getValue(n,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),s.parallelEdgeSpacing=mxUtils$1.getValue(n,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),s}else{if(n.childLayout=="circleLayout")return new mxCircleLayout(this.graph);if(n.childLayout=="organicLayout")return new mxFastOrganicLayout(this.graph);if(n.childLayout=="tableLayout")return new TableLayout(this.graph);if(n.childLayout!=null&&String(n.childLayout).charAt(0)=="[")try{return new mxCompositeLayout(this.graph,this.graph.createLayouts(JSON.parse(n.childLayout)))}catch(a){window.console!=null&&console.error(a)}}}return null}};Graph$1.prototype.createLayouts=function(t){for(var e=[],i=0;i<t.length;i++)if(mxUtils$1.indexOf(Graph$1.layoutNames,t[i].layout)>=0){var n=t[i].layout=="mxOrgChartLayout"&&t[i].config!=null?new graphLayouts[t[i].layout](this,t[i].config.branchOptimizer):new graphLayouts[t[i].layout](this);if(t[i].config!=null)for(var r in t[i].config)(t[i].layout!="mxOrgChartLayout"||r!="branchOptimizer")&&(n[r]=t[i].config[r]);e.push(n)}else throw Error(mxResources$1.get("invalidCallFnNotFound",[t[i].layout]));return e};Graph$1.prototype.getDataForCells=function(t,e){for(var i=[],n=0;n<t.length;n++){var r={};r.id=t[n].id;var l=t[n].value!=null?t[n].value.attributes:null;if(this.isReplacePlaceholders(t[n])&&e&&(r.value=this.getLabel(t[n])),l!=null)for(var s=0;s<l.length;s++)r[l[s].nodeName]=l[s].nodeValue;else r.label=this.convertValueToString(t[n]);i.push(r)}return i};Graph$1.prototype.getNodesForCells=function(t){for(var e=[],i=0;i<t.length;i++){var n=this.view.getState(t[i]);if(n!=null){for(var r=this.cellRenderer.getShapesForState(n),l=0;l<r.length;l++)r[l]!=null&&r[l].node!=null&&e.push(r[l].node);n.control!=null&&n.control.node!=null&&e.push(n.control.node)}}return e};Graph$1.prototype.createWipeAnimations=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=this.view.getState(t[n]);r!=null&&r.shape!=null&&(this.model.isEdge(r.cell)&&r.absolutePoints!=null&&r.absolutePoints.length>1?i.push(this.createEdgeWipeAnimation(r,e)):this.model.isVertex(r.cell)&&r.shape.bounds!=null&&i.push(this.createVertexWipeAnimation(r,e)))}return i};Graph$1.prototype.createEdgeWipeAnimation=function(t,e){var i=t.absolutePoints.slice(),n=t.segments,r=t.length,l=i.length;return{execute:mxUtils$1.bind(this,function(s,a){if(t.shape!=null){var o=[i[0]],u=s/a;e||(u=1-u);for(var d=r*u,p=1;p<l;p++)if(d<=n[p-1]){o.push(new mxPoint$1(i[p-1].x+(i[p].x-i[p-1].x)*d/n[p-1],i[p-1].y+(i[p].y-i[p-1].y)*d/n[p-1]));break}else d-=n[p-1],o.push(i[p]);t.shape.points=o,t.shape.redraw(),s==0&&Graph$1.setOpacityForNodes(this.getNodesForCells([t.cell]),1),t.text!=null&&t.text.node!=null&&(t.text.node.style.opacity=u)}}),stop:mxUtils$1.bind(this,function(){t.shape!=null&&(t.shape.points=i,t.shape.redraw(),t.text!=null&&t.text.node!=null&&(t.text.node.style.opacity=""),Graph$1.setOpacityForNodes(this.getNodesForCells([t.cell]),e?1:0))})}};Graph$1.prototype.createVertexWipeAnimation=function(t,e){var i=new mxRectangle$1.fromRectangle(t.shape.bounds);return{execute:mxUtils$1.bind(this,function(n,r){if(t.shape!=null){var l=n/r;e||(l=1-l),t.shape.bounds=new mxRectangle$1(i.x,i.y,i.width*l,i.height),t.shape.redraw(),n==0&&Graph$1.setOpacityForNodes(this.getNodesForCells([t.cell]),1),t.text!=null&&t.text.node!=null&&(t.text.node.style.opacity=l)}}),stop:mxUtils$1.bind(this,function(){t.shape!=null&&(t.shape.bounds=i,t.shape.redraw(),t.text!=null&&t.text.node!=null&&(t.text.node.style.opacity=""),Graph$1.setOpacityForNodes(this.getNodesForCells([t.cell]),e?1:0))})}};Graph$1.prototype.executeAnimations=function(t,e,i,n){i=i??30,n=n??30;var r=null,l=0,s=mxUtils$1.bind(this,function(){if(l==i||this.stoppingCustomActions){window.clearInterval(r);for(var a=0;a<t.length;a++)t[a].stop();e!=null&&e()}else for(var a=0;a<t.length;a++)t[a].execute(l,i);l++});r=window.setInterval(s,n),s()};Graph$1.prototype.getPageSize=function(){return this.pageVisible&&this.pageFormat!=null?new mxRectangle$1(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize};Graph$1.prototype.getPageLayout=function(t,e,i){t=t??this.getGraphBounds(),e=e??this.view.translate,i=i??this.view.scale;var n=this.getPageSize();if(t.width==0||t.height==0)return new mxRectangle$1(0,0,1,1);var r=Math.floor(Math.ceil(t.x/i-e.x)/n.width),l=Math.floor(Math.ceil(t.y/i-e.y)/n.height),s=Math.ceil((Math.floor((t.x+t.width)/i)-e.x)/n.width)-r,a=Math.ceil((Math.floor((t.y+t.height)/i)-e.y)/n.height)-l;return new mxRectangle$1(r,l,s,a)};Graph$1.prototype.getDefaultTranslate=function(t){var e=this.getPagePadding(),i=this.getPageSize();return new mxPoint$1(e.x-t.x*i.width,e.y-t.y*i.height)};Graph$1.prototype.updateMinimumSize=function(){var t=this.getPageLayout(),e=this.getPagePadding(),i=this.getPageSize(),n=Math.ceil(2*e.x+t.width*i.width),r=Math.ceil(2*e.y+t.height*i.height);(this.minimumGraphSize==null||this.minimumGraphSize.width!=n||this.minimumGraphSize.height!=r)&&(this.minimumGraphSize=new mxRectangle$1(0,0,n,r))};Graph$1.prototype.sanitizeHtml=function(t,e){return Graph$1.sanitizeHtml(t,e)};Graph$1.prototype.updatePlaceholders=function(){var t=!1;for(var e in this.model.cells){var i=this.model.cells[e];this.isReplacePlaceholders(i)&&(this.view.invalidate(i,!1,!1),t=!0)}t&&this.view.validate()};Graph$1.prototype.isReplacePlaceholders=function(t){return t.value!=null&&typeof t.value=="object"&&t.value.getAttribute("placeholders")=="1"};Graph$1.prototype.isZoomWheelEvent=function(t){return Graph$1.zoomWheel&&!mxEvent$1.isShiftDown(t)&&!mxEvent$1.isMetaDown(t)&&!mxEvent$1.isAltDown(t)&&(!mxEvent$1.isControlDown(t)||mxClient$1.IS_MAC)||!Graph$1.zoomWheel&&(mxEvent$1.isAltDown(t)||mxEvent$1.isControlDown(t))};Graph$1.prototype.isScrollWheelEvent=function(t){return!this.isZoomWheelEvent(t)};Graph$1.prototype.isTransparentClickEvent=function(t){return mxEvent$1.isAltDown(t)||mxClient$1.IS_CHROMEOS&&mxEvent$1.isShiftDown(t)};Graph$1.prototype.isIgnoreTerminalEvent=function(t){return mxEvent$1.isAltDown(t)&&!mxEvent$1.isShiftDown(t)&&!mxEvent$1.isControlDown(t)&&!mxEvent$1.isMetaDown(t)};Graph$1.prototype.isEdgeIgnored=function(t){var e=!1;if(t!=null){var i=this.getCurrentCellStyle(t);e=mxUtils$1.getValue(i,"ignoreEdge","0")=="1"}return e};Graph$1.prototype.isSplitTarget=function(t,e,i){return!this.model.isEdge(e[0])&&!mxEvent$1.isAltDown(i)&&!mxEvent$1.isShiftDown(i)&&!this.isCellLocked(this.getLayerForCell(t))&&mxGraph.prototype.isSplitTarget.apply(this,arguments)};Graph$1.prototype.getLabel=function(t){var e=mxGraph.prototype.getLabel.apply(this,arguments);return e!=null&&this.isReplacePlaceholders(t)&&t.getAttribute("placeholder")==null&&(e=this.replacePlaceholders(t,e)),e};Graph$1.prototype.isLabelMovable=function(t){var e=this.getCurrentCellStyle(t);return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&(this.vertexLabelsMovable||mxUtils$1.getValue(e,"labelMovable","0")=="1"))};Graph$1.prototype.setGridSize=function(t){this.gridSize=t,this.fireEvent(new mxEventObject$1("gridSizeChanged"))};Graph$1.prototype.setDefaultParent=function(t){this.defaultParent=t,this.fireEvent(new mxEventObject$1("defaultParentChanged"))};Graph$1.prototype.getClickableLinkForCell=function(t){do{var e=this.getLinkForCell(t);if(e!=null)return e;t=this.model.getParent(t)}while(t!=null);return null};Graph$1.prototype.getGlobalVariable=function(t){var e=null;if(t=="date")e=new Date().toLocaleDateString();else if(t=="time")e=new Date().toLocaleTimeString();else if(t=="timestamp")e=new Date().toLocaleString();else if(t.substring(0,5)=="date{"){var i=t.substring(5,t.length-1);e=this.formatDate(new Date,i)}return e};Graph$1.prototype.formatDate=function(t,e,i){this.dateFormatCache==null&&(this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var n=this.dateFormatCache,r=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g,a=function(_,N){for(_=String(_),N=N||2;_.length<N;)_="0"+_;return _};if(arguments.length==1&&Object.prototype.toString.call(t)=="[object String]"&&!/\d/.test(t)&&(e=t,t=void 0),t=t?new Date(t):new Date,isNaN(t))throw SyntaxError("invalid date");e=String(n.masks[e]||e||n.masks.default),e.slice(0,4)=="UTC:"&&(e=e.slice(4),i=!0);var o=i?"getUTC":"get",u=t[o+"Date"](),d=t[o+"Day"](),p=t[o+"Month"](),c=t[o+"FullYear"](),g=t[o+"Hours"](),x=t[o+"Minutes"](),C=t[o+"Seconds"](),T=t[o+"Milliseconds"](),A=i?0:t.getTimezoneOffset(),R={d:u,dd:a(u),ddd:n.i18n.dayNames[d],dddd:n.i18n.dayNames[d+7],m:p+1,mm:a(p+1),mmm:n.i18n.monthNames[p],mmmm:n.i18n.monthNames[p+12],yy:String(c).slice(2),yyyy:c,h:g%12||12,hh:a(g%12||12),H:g,HH:a(g),M:x,MM:a(x),s:C,ss:a(C),l:a(T,3),L:a(T>99?Math.round(T/10):T),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:i?"UTC":(String(t).match(l)||[""]).pop().replace(s,""),o:(A>0?"-":"+")+a(Math.floor(Math.abs(A)/60)*100+Math.abs(A)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return e.replace(r,function(_){return _ in R?R[_]:_.slice(1,_.length-1)})};Graph$1.prototype.getLayerForCell=function(t){for(;t!=null&&!this.model.isLayer(t);)t=this.model.getParent(t);return t};Graph$1.prototype.getLayerForCells=function(t){var e=null;if(t.length>0){e=this.getLayerForCell(t[0]);for(var i=1;i<t.length;i++)if(!this.model.isAncestor(e,t[i])){e=null;break}}return e};Graph$1.prototype.createLayersDialog=function(t,e){var i=document.createElement("div");i.style.position="absolute";for(var n=this.getModel(),r=n.getChildCount(n.root),l=0;l<r;l++)mxUtils$1.bind(this,function(s){var a=this.convertValueToString(s)||mxResources$1.get("background")||"Background",o=document.createElement("div");o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.style.padding="2px",o.style.whiteSpace="nowrap",o.style.cursor="pointer",o.setAttribute("title",mxResources$1.get(n.isVisible(s)?"hideIt":"show",[a]));var u=document.createElement("img");u.setAttribute("draggable","false"),u.setAttribute("align","absmiddle"),u.setAttribute("border","0"),u.style.position="relative",u.style.width="16px",u.style.padding="0px 6px 0 4px",e&&(u.style.filter="invert(100%)",u.style.top="-2px"),o.appendChild(u),mxUtils$1.write(o,a),i.appendChild(o);function d(){n.isVisible(s)?(u.setAttribute("src",Editor$2.visibleImage),mxUtils$1.setOpacity(o,75)):(u.setAttribute("src",Editor$2.hiddenImage),mxUtils$1.setOpacity(o,25))}mxEvent$1.addListener(o,"click",function(){n.setVisible(s,!n.isVisible(s)),d(),t!=null&&t(s)}),d()})(n.getChildAt(n.root,l));return i};Graph$1.prototype.replacePlaceholders=function(t,e,i,n){var r=[];if(e!=null){for(var l=0;match=this.placeholderPattern.exec(e);){var s=match[0];if(s.length>2&&s!="%label%"&&s!="%tooltip%"){var a=null;if(match.index>l&&e.charAt(match.index-1)=="%")a=s.substring(1);else{var o=s.substring(1,s.length-1);if(o=="id")a=t.id;else if(o=="width"&&this.model.isVertex(t)){var u=this.getCellGeometry(t);u!=null&&(a=u.width)}else if(o=="height"&&this.model.isVertex(t)){var u=this.getCellGeometry(t);u!=null&&(a=u.height)}else if(o=="length"){for(var d=t;d!=null&&!this.model.isEdge(d);)d=this.model.getParent(d);var p=this.view.getState(d);p!=null&&(a=Math.round(p.length/this.view.scale))}else if(o.indexOf("{")<0)for(var c=t;a==null&&c!=null;)c.value!=null&&typeof c.value=="object"&&(Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(a=c.getAttribute(o+"_"+Graph$1.diagramLanguage)),a==null&&(a=c.hasAttribute(o)?c.getAttribute(o)!=null?c.getAttribute(o):"":null)),c=this.model.getParent(c);a==null&&(a=this.getGlobalVariable(o)),a==null&&i!=null&&(a=i[o])}r.push(e.substring(l,match.index)+(a??s)),l=match.index+s.length}}r.push(e.substring(l))}return r.join("")};Graph$1.prototype.restoreSelection=function(t){if(t!=null&&t.length>0){for(var e=[],i=0;i<t.length;i++){var n=this.model.getCell(t[i].id);n!=null&&e.push(n)}this.setSelectionCells(e)}else this.clearSelection()};Graph$1.prototype.selectCellForEvent=function(t,e){(!mxEvent$1.isShiftDown(e)||this.isSelectionEmpty()||!this.selectTableRange(this.getSelectionCell(),t))&&mxGraph.prototype.selectCellForEvent.apply(this,arguments)};Graph$1.prototype.selectTableRange=function(t,e){var i=!1;if(this.isTableCell(t)&&this.isTableCell(e)){var n=this.model.getParent(t),r=this.model.getParent(n),l=this.model.getParent(e);if(r==this.model.getParent(l)){for(var s=n.getIndex(t),a=r.getIndex(n),o=l.getIndex(e),u=r.getIndex(l),d=Math.min(a,u),p=Math.max(a,u),c=Math.min(s,o),g=Math.max(s,o),x=[],C=d;C<=p;C++)for(var T=this.model.getChildAt(r,C),A=c;A<=g;A++)x.push(this.model.getChildAt(T,A));x.length>0&&(x.length>1||this.getSelectionCount()>1||!this.isCellSelected(x[0]))&&(this.setSelectionCells(x),i=!0)}}return i};Graph$1.prototype.snapCellsToGrid=function(t,e){this.getModel().beginUpdate();try{for(var i=0;i<t.length;i++){var n=t[i],r=this.getCellGeometry(n);if(r!=null){if(r=r.clone(),this.getModel().isVertex(n))r.x=Math.round(r.x/e)*e,r.y=Math.round(r.y/e)*e,r.width=Math.round(r.width/e)*e,r.height=Math.round(r.height/e)*e;else if(this.getModel().isEdge(n)&&r.points!=null)for(var l=0;l<r.points.length;l++)r.points[l].x=Math.round(r.points[l].x/e)*e,r.points[l].y=Math.round(r.points[l].y/e)*e;this.getModel().setGeometry(n,r)}}}finally{this.getModel().endUpdate()}};Graph$1.prototype.removeChildCells=function(t){this.model.beginUpdate();try{for(var e=this.model.getChildCount(t),i=e;i>=0;i--)this.model.remove(this.model.getChildAt(t,i))}finally{this.model.endUpdate()}};Graph$1.prototype.updateShapes=function(t,e,i){this.model.beginUpdate();try{var n=this.model.getStyle(t),r=i?this.stylesheet.getCellStyle(n,{},!1):null;r!=null&&r[mxConstants$1.STYLE_SHAPE]==null&&(this.model.isVertex(t)?r[mxConstants$1.STYLE_SHAPE]=this.stylesheet.getDefaultVertexStyle()[mxConstants$1.STYLE_SHAPE]:this.model.isEdge(t)&&(r[mxConstants$1.STYLE_SHAPE]=this.stylesheet.getDefaultEdgeStyle()[mxConstants$1.STYLE_SHAPE]));for(var l=0;l<e.length;l++){if(this.model.isVertex(t)&&this.model.isVertex(e[l])||this.model.isEdge(t)&&this.model.isEdge(e[l]))if(i){var s=this.model.getStyle(e[l]);if(s!=null){var a=s.split(";");a.length>0&&a[0].indexOf("=")<0&&(a=a.slice(1)),this.model.setStyle(e[l],a.join(";"))}this.setCellStyles(mxConstants$1.STYLE_PERIMETER,null,[e[l]]),this.setCellStyles("points",null,[e[l]]),this.pasteStyle(r,[e[l]],null,!0)}else r=this.copyStyle(e[l]),this.model.setStyle(e[l],n),this.pasteStyle(r,[e[l]]);mxUtils$1.getValue(this.getCellStyle(e[l],!1),"composite","0")=="1"&&this.removeChildCells(e[l])}}finally{this.model.endUpdate()}};Graph$1.prototype.selectCellsForConnectVertex=function(t,e,i){t.length==2&&this.model.isVertex(t[1])?(this.setSelectionCell(t[1]),this.scrollCellToVisible(t[1]),i!=null&&(mxEvent$1.isTouchEvent(e)?i.update(i.getState(this.view.getState(t[1]))):i.reset())):this.setSelectionCells(t)};Graph$1.prototype.isCloneConnectSource=function(t){var e=null;return this.layoutManager!=null&&(e=this.layoutManager.getLayout(this.model.getParent(t))),this.isTableRow(t)||this.isTableCell(t)||e!=null&&e.constructor==mxStackLayout};Graph$1.prototype.insertEdgeBeforeCell=function(t,e){for(var i=null,n=e;n.parent!=null&&n.geometry!=null&&n.geometry.relative&&n.parent!=t.parent;)n=this.model.getParent(n);if(n!=null&&n.parent!=null&&n.parent==t.parent){var i=n.parent.getIndex(n);this.model.add(n.parent,t,i)}};Graph$1.prototype.connectVertex=function(t,e,i,n,r,l,s,a){if(l=l||!1,t.geometry.relative&&this.model.isEdge(t.parent))return[];for(;t.geometry.relative&&this.model.isVertex(t.parent);)t=t.parent;var o=this.isCloneConnectSource(t),u=o?t:this.getCompositeParent(t),d=t.geometry.relative&&t.parent.geometry!=null?new mxPoint$1(t.parent.geometry.width*t.geometry.x,t.parent.geometry.height*t.geometry.y):new mxPoint$1(u.geometry.x,u.geometry.y);e==mxConstants$1.DIRECTION_NORTH?(d.x+=u.geometry.width/2,d.y-=i):e==mxConstants$1.DIRECTION_SOUTH?(d.x+=u.geometry.width/2,d.y+=u.geometry.height+i):e==mxConstants$1.DIRECTION_WEST?(d.x-=i,d.y+=u.geometry.height/2):(d.x+=u.geometry.width+i,d.y+=u.geometry.height/2);var p=this.view.getState(this.model.getParent(t)),c=this.view.scale,g=this.view.translate,x=g.x*c,C=g.y*c;p!=null&&this.model.isVertex(p.cell)&&(x=p.x,C=p.y),this.model.isVertex(t.parent)&&t.geometry.relative&&(d.x+=t.parent.geometry.x,d.y+=t.parent.geometry.y);var T=l?null:new mxRectangle$1(x+d.x*c,C+d.y*c).grow(40*c),A=T!=null?this.getCells(0,0,0,0,null,null,T,null,!0):null,R=this.view.getState(t),_=null,N=null;if(A!=null){A=A.reverse();for(var H=0;H<A.length;H++)if(!this.isCellLocked(A[H])&&!this.model.isEdge(A[H])&&A[H]!=t){if(!this.model.isAncestor(t,A[H])&&this.isContainer(A[H])&&(_==null||A[H]==this.model.getParent(t)))_=A[H];else if(N==null&&this.isCellConnectable(A[H])&&!this.model.isAncestor(A[H],t)&&!this.isSwimlane(A[H])){var k=this.view.getState(A[H]);R!=null&&k!=null&&!mxUtils$1.intersects(R,k)&&(N=A[H])}}}var K=!mxEvent$1.isShiftDown(n)||mxEvent$1.isControlDown(n)||r;K&&(urlParams$1.sketch!="1"||r)&&(e==mxConstants$1.DIRECTION_NORTH?d.y-=t.geometry.height/2:e==mxConstants$1.DIRECTION_SOUTH?d.y+=t.geometry.height/2:e==mxConstants$1.DIRECTION_WEST?d.x-=t.geometry.width/2:d.x+=t.geometry.width/2);var Q=[],nt=N;N=_;var dt=mxUtils$1.bind(this,function(mt){if(s==null||mt!=null||N==null&&o){this.model.beginUpdate();try{if(nt==null&&K){var xt=this.getAbsoluteParent(mt??t);xt=o?t:this.getCompositeParent(xt),nt=mt??this.duplicateCells([xt],!1)[0],mt!=null&&this.addCells([nt],this.model.getParent(t),null,null,null,!0);var Y=this.getCellGeometry(nt);Y!=null&&(mt!=null&&urlParams$1.sketch=="1"&&(e==mxConstants$1.DIRECTION_NORTH?d.y-=Y.height/2:e==mxConstants$1.DIRECTION_SOUTH?d.y+=Y.height/2:e==mxConstants$1.DIRECTION_WEST?d.x-=Y.width/2:d.x+=Y.width/2),Y.x=d.x-Y.width/2,Y.y=d.y-Y.height/2),_!=null?(this.addCells([nt],_,null,null,null,!0),N=null):K&&!o&&this.addCells([nt],this.getDefaultParent(),null,null,null,!0)}var B=mxEvent$1.isControlDown(n)&&mxEvent$1.isShiftDown(n)&&K||N==null&&o?null:this.insertEdge(this.model.getParent(t),null,"",t,nt,this.createCurrentEdgeStyle());if(B!=null&&(Q.push(B),this.applyNewEdgeStyle(t,[B],e),this.connectionHandler.insertBeforeSource&&this.insertEdgeBeforeCell(B,t)),N==null&&nt!=null&&t.parent!=null&&o&&e==mxConstants$1.DIRECTION_WEST){var U=t.parent.getIndex(t);this.model.add(t.parent,nt,U)}N==null&&nt!=null&&Q.push(nt),nt==null&&B!=null&&B.geometry.setTerminalPoint(d,!1),B!=null&&this.fireEvent(new mxEventObject$1("cellsInserted","cells",[B]))}finally{this.model.endUpdate()}}if(a!=null)a(Q);else return Q});if(s!=null&&nt==null&&K&&(N!=null||!o))s(x+d.x*c,C+d.y*c,dt);else return dt(nt)};Graph$1.prototype.getIndexableText=function(t){t=t??this.model.getDescendants(this.model.root);for(var e=document.createElement("div"),i=[],n="",r=0;r<t.length;r++){var l=t[r];(this.model.isVertex(l)||this.model.isEdge(l))&&(this.isHtmlLabel(l)?(e.innerHTML=Graph$1.sanitizeHtml(this.getLabel(l)),n=mxUtils$1.extractTextWithWhitespace([e])):n=this.getLabel(l),n=mxUtils$1.trim(n.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")),n.length>0&&i.push(n))}return i.join(" ")};Graph$1.prototype.convertValueToString=function(t){var e=this.model.getValue(t);if(e!=null&&typeof e=="object"){var i=null;if(this.isReplacePlaceholders(t)&&t.getAttribute("placeholder")!=null)for(var n=t.getAttribute("placeholder"),r=t;i==null&&r!=null;)r.value!=null&&typeof r.value=="object"&&(i=r.hasAttribute(n)?r.getAttribute(n)!=null?r.getAttribute(n):"":null),r=this.model.getParent(r);else{var i=null;Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(i=e.getAttribute("label_"+Graph$1.diagramLanguage)),i==null&&(i=e.getAttribute("label")||"")}return i||""}return mxGraph.prototype.convertValueToString.apply(this,arguments)};Graph$1.prototype.getLinksForState=function(t){return t!=null&&t.text!=null&&t.text.node!=null?t.text.node.getElementsByTagName("a"):null};Graph$1.prototype.getLinkForCell=function(t,e){if(t.value!=null&&typeof t.value=="object"){var i=t.value.getAttribute("link");return e||(i=mxUtils$1.removeJavascriptProtocol(i)),i}else return null};Graph$1.prototype.getLinkTargetForCell=function(t){return t.value!=null&&typeof t.value=="object"?t.value.getAttribute("linkTarget"):null};Graph$1.prototype.postProcessCellStyle=function(t,e){return this.updateHorizontalStyle(t,this.replaceDefaultColors(t,mxGraph.prototype.postProcessCellStyle.apply(this,arguments)))};Graph$1.prototype.updateHorizontalStyle=function(t,e){if(t!=null&&e!=null&&this.layoutManager!=null){var i=this.model.getParent(t);if(this.model.isVertex(i)&&this.isCellCollapsed(t)){var n=this.layoutManager.getLayout(i);n!=null&&n.constructor==mxStackLayout&&(e[mxConstants$1.STYLE_HORIZONTAL]=!n.horizontal)}}return e};Graph$1.prototype.replaceDefaultColors=function(t,e){if(e!=null){var i=mxUtils$1.hex2rgb(this.shapeBackgroundColor),n=mxUtils$1.hex2rgb(this.shapeForegroundColor);this.replaceDefaultColor(e,mxConstants$1.STYLE_FONTCOLOR,n,i),this.replaceDefaultColor(e,mxConstants$1.STYLE_FILLCOLOR,i,n),this.replaceDefaultColor(e,mxConstants$1.STYLE_GRADIENTCOLOR,n,i),this.replaceDefaultColor(e,mxConstants$1.STYLE_STROKECOLOR,n,i),this.replaceDefaultColor(e,mxConstants$1.STYLE_IMAGE_BORDER,n,i),this.replaceDefaultColor(e,mxConstants$1.STYLE_IMAGE_BACKGROUND,i,n),this.replaceDefaultColor(e,mxConstants$1.STYLE_LABEL_BORDERCOLOR,n,i),this.replaceDefaultColor(e,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,i,n),this.replaceDefaultColor(e,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,i,n)}return e};Graph$1.prototype.replaceDefaultColor=function(t,e,i,n){t!=null&&t[e]=="default"&&i!=null&&(t[e]=this.getDefaultColor(t,e,i,n))};Graph$1.prototype.getDefaultColor=function(t,e,i,n){var r="default"+e.charAt(0).toUpperCase()+e.substring(1);return t[r]=="invert"&&(i=n),i};Graph$1.prototype.updateAlternateBounds=function(t,e,i){if(t!=null&&e!=null&&this.layoutManager!=null&&e.alternateBounds!=null){var n=this.layoutManager.getLayout(this.model.getParent(t));n!=null&&n.constructor==mxStackLayout&&(n.horizontal?e.alternateBounds.height=0:e.alternateBounds.width=0)}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)};Graph$1.prototype.isMoveCellsEvent=function(t,e){return mxEvent$1.isShiftDown(t)||mxUtils$1.getValue(e.style,"moveCells","0")=="1"};Graph$1.prototype.foldCells=function(t,e,i,n,r){if(e=e??!1,i==null&&(i=this.getFoldableCells(this.getSelectionCells(),t)),i!=null){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),this.layoutManager!=null)for(var l=0;l<i.length;l++){var s=this.view.getState(i[l]),a=this.getCellGeometry(i[l]);if(s!=null&&a!=null){var o=0,u=0;if(a.alternateBounds)o=a.width-a.alternateBounds.width,u=a.height-a.alternateBounds.height;else{var d=this.useCssTransforms?1:this.view.scale;o=Math.round(a.width-s.width/d),u=Math.round(a.height-s.height/d)}if(u!=0||o!=0){var p=this.model.getParent(i[l]),c=this.layoutManager.getLayout(p);c==null?r!=null&&this.isMoveCellsEvent(r,s)&&this.moveSiblings(s,p,o,u):(r==null||!mxEvent$1.isAltDown(r))&&c.constructor==mxStackLayout&&!c.resizeLast&&this.resizeParentStacks(p,c,o,u)}}}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(i)}};Graph$1.prototype.moveSiblings=function(t,e,i,n){this.model.beginUpdate();try{for(var r=this.getCellsBeyond(t.x,t.y,e,!0,!0),l=0;l<r.length;l++)if(r[l]!=t.cell){var s=this.view.getState(r[l]),a=this.getCellGeometry(r[l]);s!=null&&a!=null&&(a=a.clone(),a.translate(Math.round(i*Math.max(0,Math.min(1,(s.x-t.x)/t.width))),Math.round(n*Math.max(0,Math.min(1,(s.y-t.y)/t.height)))),this.model.setGeometry(r[l],a))}}finally{this.model.endUpdate()}};Graph$1.prototype.resizeParentStacks=function(t,e,i,n){if(this.layoutManager!=null&&e!=null&&e.constructor==mxStackLayout&&!e.resizeLast){this.model.beginUpdate();try{for(var r=e.horizontal;t!=null&&e!=null&&e.constructor==mxStackLayout&&e.horizontal==r&&!e.resizeLast;){var l=this.getCellGeometry(t),s=this.view.getState(t);s!=null&&l!=null&&(l=l.clone(),e.horizontal?l.width+=i+Math.min(0,s.width/this.view.scale-l.width):l.height+=n+Math.min(0,s.height/this.view.scale-l.height),this.model.setGeometry(t,l)),t=this.model.getParent(t),e=this.layoutManager.getLayout(t)}}finally{this.model.endUpdate()}}};Graph$1.prototype.isContainer=function(t){var e=this.getCurrentCellStyle(t);return this.isSwimlane(t)?e.container!="0":e.container=="1"};Graph$1.prototype.isCellConnectable=function(t){var e=this.getCurrentCellStyle(t);return!this.isCellLocked(this.getLayerForCell(t))&&(e.connectable!=null?e.connectable!="0":mxGraph.prototype.isCellConnectable.apply(this,arguments))};Graph$1.prototype.isLabelMovable=function(t){var e=this.getCurrentCellStyle(t);return e.movableLabel!=null?e.movableLabel!="0":mxGraph.prototype.isLabelMovable.apply(this,arguments)};Graph$1.prototype.selectAll=function(t){t=t||this.getDefaultParent(),this.isCellLocked(t)||mxGraph.prototype.selectAll.apply(this,arguments)};Graph$1.prototype.selectCells=function(t,e,i){i=i||this.getDefaultParent(),this.isCellLocked(i)||mxGraph.prototype.selectCells.apply(this,arguments)};Graph$1.prototype.getSwimlaneAt=function(t,e,i){var n=mxGraph.prototype.getSwimlaneAt.apply(this,arguments);return this.isCellLocked(n)&&(n=null),n};Graph$1.prototype.isCellFoldable=function(t){var e=this.getCurrentCellStyle(t);return this.foldingEnabled&&mxUtils$1.getValue(e,mxConstants$1.STYLE_RESIZABLE,"1")!="0"&&(e.treeFolding=="1"||!this.isCellLocked(t)&&(this.isContainer(t)&&e.collapsible!="0"||!this.isContainer(t)&&e.collapsible=="1"))};Graph$1.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()};Graph$1.prototype.zoom=function(t,e){t=Math.max(.01,Math.min(this.view.scale*t,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)};Graph$1.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)};Graph$1.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(this.view.scale*(1/this.zoomFactor)*20)/20/this.view.scale)};Graph$1.prototype.fitPages=function(t,e){var i=1;if(t==null){var n=this.getPageLayout();t=n.width,i=n.height}var r=this.pageScale,l=this.pageFormat,s=this.container.clientWidth-10,a=this.container.clientHeight-10,o=s/(t*l.width)/r,u=Math.floor(20*(e?o:Math.min(o,a/(i*l.height)/r)))/20;if(this.zoomTo(u),mxUtils$1.hasScrollbars(this.container)){var d=this.getPagePadding();this.container.scrollLeft=Math.min(d.x*this.view.scale,(this.container.scrollWidth-this.container.clientWidth)/2)-1,e||(t>=2?this.container.scrollTop=Math.min(d.y,(this.container.scrollHeight-this.container.clientHeight)/2):this.container.scrollTop=d.y*this.view.scale-1)}};Graph$1.prototype.fitWindow=function(t,e){e=e??10;var i=this.container.clientWidth-e,n=this.container.clientHeight-e,r=Math.floor(20*Math.min(i/t.width,n/t.height))/20;this.zoomTo(r),mxUtils$1.hasScrollbars(this.container)&&window.setTimeout(mxUtils$1.bind(this,function(){var l=this.view.translate;this.container.scrollLeft=(t.x+l.x)*this.view.scale-Math.max((i-t.width*this.view.scale)/2+e/2,0),this.container.scrollTop=(t.y+l.y)*this.view.scale-Math.max((n-t.height*this.view.scale)/2+e/2,0)}),0)};Graph$1.prototype.convertValueToTooltip=function(t){var e=null;return mxUtils$1.isNode(t.value)&&(Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(e=t.value.getAttribute("tooltip_"+Graph$1.diagramLanguage)),e==null&&(e=t.value.getAttribute("tooltip")),e!=null&&(e!=null&&this.isReplacePlaceholders(t)&&(e=this.replacePlaceholders(t,e)),e=Graph$1.sanitizeHtml(e))),e};Graph$1.prototype.getTooltipForCell=function(t){var e="";if(mxUtils$1.isNode(t.value)&&(e=this.convertValueToTooltip(t),e==null)){var i=this.builtInProperties,n=t.value.attributes,r=[];e="",this.isEnabled()&&(i.push("linkTarget"),i.push("link"));for(var l=0;l<n.length;l++)(Graph$1.translateDiagram&&n[l].nodeName=="label"||mxUtils$1.indexOf(i,n[l].nodeName)<0)&&n[l].nodeValue.length>0&&r.push({name:n[l].nodeName,value:n[l].nodeValue});r.sort(function(s,a){return s.name<a.name?-1:s.name>a.name?1:0});for(var l=0;l<r.length;l++)(r[l].name!="link"||!this.isCustomLink(r[l].value))&&(e+=(r[l].name!="link"?"<b>"+mxUtils$1.htmlEntities(r[l].name)+":</b> ":"")+mxUtils$1.htmlEntities(r[l].value)+`
`);e.length>0&&(e=e.substring(0,e.length-1),mxClient$1.IS_SVG&&(e='<div style="max-width:360px;text-overflow:ellipsis;overflow:hidden;">'+e+"</div>"))}return e};Graph$1.prototype.addFlowAnimationToNode=function(t,e,i,n){if(t!=null&&n!=null){var r=t.getAttribute("stroke-dasharray"),l=[];if(r==""||r==null){l=String(mxUtils$1.getValue(e,mxConstants$1.STYLE_DASH_PATTERN,"8")).split(" ");var s=mxUtils$1.getValue(e,mxConstants$1.STYLE_FIX_DASH,!1)==1||e.dashPattern==null?1:mxUtils$1.getNumber(e,mxConstants$1.STYLE_STROKEWIDTH,1);if(l.length>0)for(var a=0;a<l.length;a++)l[a]=Math.round(Number(l[a])*i*s*100)/100;t.setAttribute("stroke-dasharray",l.join(" "))}else l=r.split(" ");if(l.length>0){for(var o=0,a=0;a<l.length;a++){var u=parseFloat(l[a]);isNaN(u)||(o+=parseFloat(l[a]))}l.length%2!=0&&(o*=2);var d=Math.round(o/i/16*parseInt(mxUtils$1.getValue(e,"flowAnimationDuration",500))),p=mxUtils$1.getValue(e,"flowAnimationTimingFunction","linear"),c=mxUtils$1.getValue(e,"flowAnimationDirection","normal");t.style.animation=n+" "+d+"ms "+mxUtils$1.htmlEntities(p)+" infinite "+mxUtils$1.htmlEntities(c),t.style.strokeDashoffset=o}}};Graph$1.prototype.addFlowAnimationStyle=function(){var t=document.getElementsByTagName("head")[0];if(t!=null&&this.flowAnimationId==null){this.flowAnimationId="ge-flow-animation-"+Editor$2.guid();var e=document.createElement("style");e.innerHTML=this.createFlowAnimationCss(this.flowAnimationId),t.appendChild(e)}return this.flowAnimationId};Graph$1.prototype.createFlowAnimationCss=function(t){return"@keyframes "+t+` {
  to {
    stroke-dashoffset: 0;
  }
}`};Graph$1.prototype.stringToBytes=function(t){return Graph$1.stringToBytes(t)};Graph$1.prototype.bytesToString=function(t){return Graph$1.bytesToString(t)};Graph$1.prototype.compressNode=function(t){return Graph$1.compressNode(t)};Graph$1.prototype.compress=function(t,e){return Graph$1.compress(t,e)};Graph$1.prototype.decompress=function(t,e){return Graph$1.decompress(t,e)};Graph$1.prototype.zapGremlins=function(t){return Graph$1.zapGremlins(t)};const HoverIcons$1=function(t){mxEventSource.call(this),this.graph=t,this.init()};mxUtils$1.extend(HoverIcons$1,mxEventSource);HoverIcons$1.prototype.arrowSpacing=2;HoverIcons$1.prototype.updateDelay=500;HoverIcons$1.prototype.activationDelay=140;HoverIcons$1.prototype.currentState=null;HoverIcons$1.prototype.activeArrow=null;HoverIcons$1.prototype.inactiveOpacity=15;HoverIcons$1.prototype.cssCursor="copy";HoverIcons$1.prototype.checkCollisions=!0;HoverIcons$1.prototype.arrowFill="#29b6f2";HoverIcons$1.prototype.triangleUp=mxClient$1.IS_SVG?Graph$1.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14);HoverIcons$1.prototype.triangleRight=mxClient$1.IS_SVG?Graph$1.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26);HoverIcons$1.prototype.triangleDown=mxClient$1.IS_SVG?Graph$1.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14);HoverIcons$1.prototype.triangleLeft=mxClient$1.IS_SVG?Graph$1.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26);HoverIcons$1.prototype.roundDrop=mxClient$1.IS_SVG?Graph$1.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26);HoverIcons$1.prototype.refreshTarget=new mxImage(mxClient$1.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38);HoverIcons$1.prototype.tolerance=mxClient$1.IS_TOUCH?6:0;HoverIcons$1.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources$1.get("plusTooltip"),mxConstants$1.DIRECTION_NORTH),this.arrowRight=this.createArrow(this.triangleRight,mxResources$1.get("plusTooltip"),mxConstants$1.DIRECTION_EAST),this.arrowDown=this.createArrow(this.triangleDown,mxResources$1.get("plusTooltip"),mxConstants$1.DIRECTION_SOUTH),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources$1.get("plusTooltip"),mxConstants$1.DIRECTION_WEST),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils$1.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils$1.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent$1.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent$1.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent$1.UP,this.repaintHandler),this.graph.addListener(mxEvent$1.ROOT,this.repaintHandler),this.graph.addListener(mxEvent$1.ESCAPE,this.resetHandler),mxEvent$1.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){this.mouseDownPoint=null})),mxEvent$1.addListener(this.graph.container,"mouseleave",mxUtils$1.bind(this,function(i){i.relatedTarget!=null&&mxEvent$1.getSource(i)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent$1.START_EDITING,mxUtils$1.bind(this,function(i){this.reset()}));var t=this.graph.click;this.graph.click=mxUtils$1.bind(this,function(i){t.apply(this.graph,arguments),this.currentState!=null&&!this.graph.isCellSelected(this.currentState.cell)&&mxEvent$1.isTouchEvent(i.getEvent())&&!this.graph.model.isVertex(i.getCell())&&this.reset()});var e=!1;this.graph.addMouseListener({mouseDown:mxUtils$1.bind(this,function(i,n){e=!1;var r=n.getEvent();if(this.isResetEvent(r))this.reset();else if(!this.isActive()){var l=this.getState(n.getState());(l!=null||!mxEvent$1.isTouchEvent(r))&&this.update(l)}this.setDisplay("none")}),mouseMove:mxUtils$1.bind(this,function(i,n){var r=n.getEvent();this.isResetEvent(r)?this.reset():!this.graph.isMouseDown&&!mxEvent$1.isTouchEvent(r)&&this.update(this.getState(n.getState()),n.getGraphX(),n.getGraphY()),this.graph.connectionHandler!=null&&this.graph.connectionHandler.shape!=null&&(e=!0)}),mouseUp:mxUtils$1.bind(this,function(i,n){var r=n.getEvent();mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(r),mxEvent$1.getClientY(r)),this.isResetEvent(r)?this.reset():this.isActive()&&!e&&this.mouseDownPoint!=null?this.click(this.currentState,this.getDirection(),n):this.isActive()?this.graph.getSelectionCount()!=1||!this.graph.model.isEdge(this.graph.getSelectionCell())?this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(n.getGraphX(),n.getGraphY())))):this.reset():mxEvent$1.isTouchEvent(r)||this.bbox!=null&&mxUtils$1.contains(this.bbox,n.getGraphX(),n.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent$1.isTouchEvent(r)||this.reset(),e=!1,this.resetActiveArrow()})})};HoverIcons$1.prototype.isResetEvent=function(t,e){return mxEvent$1.isAltDown(t)||this.activeArrow==null&&mxEvent$1.isShiftDown(t)||mxEvent$1.isPopupTrigger(t)&&!this.graph.isCloneEvent(t)};HoverIcons$1.prototype.createArrow=function(t,e,i){var n=null;return n=mxUtils$1.createImage(t.src),n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.padding=this.tolerance+"px",e!=null&&n.setAttribute("title",e),n.style.position="absolute",n.style.cursor=this.cssCursor,mxEvent$1.addGestureListeners(n,mxUtils$1.bind(this,function(r){this.currentState!=null&&!this.isResetEvent(r)&&(this.mouseDownPoint=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(r),mxEvent$1.getClientY(r)),this.drag(r,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=n,this.setDisplay("none"),mxEvent$1.consume(r))})),mxEvent$1.redirectMouseEvents(n,this.graph,this.currentState),mxEvent$1.addListener(n,"mouseenter",mxUtils$1.bind(this,function(r){mxEvent$1.isMouseEvent(r)&&(this.activeArrow!=null&&this.activeArrow!=n&&mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils$1.setOpacity(n,100),this.activeArrow=n,this.fireEvent(new mxEventObject$1("focus","arrow",n,"direction",i,"event",r)))})),mxEvent$1.addListener(n,"mouseleave",mxUtils$1.bind(this,function(r){mxEvent$1.isMouseEvent(r)&&this.fireEvent(new mxEventObject$1("blur","arrow",n,"direction",i,"event",r)),this.graph.isMouseDown||this.resetActiveArrow()})),n};HoverIcons$1.prototype.resetActiveArrow=function(){this.activeArrow!=null&&(mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)};HoverIcons$1.prototype.getDirection=function(){var t=mxConstants$1.DIRECTION_EAST;return this.activeArrow==this.arrowUp?t=mxConstants$1.DIRECTION_NORTH:this.activeArrow==this.arrowDown?t=mxConstants$1.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(t=mxConstants$1.DIRECTION_WEST),t};HoverIcons$1.prototype.visitNodes=function(t){for(var e=0;e<this.elts.length;e++)this.elts[e]!=null&&t(this.elts[e])};HoverIcons$1.prototype.removeNodes=function(){this.visitNodes(function(t){t.parentNode!=null&&t.parentNode.removeChild(t)})};HoverIcons$1.prototype.setDisplay=function(t){this.visitNodes(function(e){e.style.display=t})};HoverIcons$1.prototype.isActive=function(){return this.activeArrow!=null&&this.currentState!=null};HoverIcons$1.prototype.drag=function(t,e,i){if(this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),this.currentState!=null){this.graph.connectionHandler.start(this.currentState,e,i),this.graph.isMouseTrigger=mxEvent$1.isMouseEvent(t),this.graph.isMouseDown=!0;var n=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);n!=null&&n.setHandlesVisible(!1);var r=this.graph.connectionHandler.edgeState;if(t!=null&&mxEvent$1.isShiftDown(t)&&mxEvent$1.isControlDown(t)&&r!=null&&mxUtils$1.getValue(r.style,mxConstants$1.STYLE_EDGE,null)==="orthogonalEdgeStyle"){var l=this.getDirection();r.cell.style=mxUtils$1.setStyle(r.cell.style,"sourcePortConstraint",l),r.style.sourcePortConstraint=l}}};HoverIcons$1.prototype.getStateAt=function(t,e,i){return this.graph.view.getState(this.graph.getCellAt(e,i))};HoverIcons$1.prototype.click=function(t,e,i){var n=i.getEvent(),r=i.getGraphX(),l=i.getGraphY(),s=this.getStateAt(t,r,l);s!=null&&this.graph.model.isEdge(s.cell)&&!this.graph.isCloneEvent(n)&&(s.getVisibleTerminalState(!0)==t||s.getVisibleTerminalState(!1)==t)?(this.graph.setSelectionCell(s.cell),this.reset()):t!=null&&this.execute(t,e,i),i.consume()};HoverIcons$1.prototype.execute=function(t,e,i){var n=i.getEvent();this.graph.selectCellsForConnectVertex(this.graph.connectVertex(t.cell,e,this.graph.defaultEdgeLength,n,this.graph.isCloneEvent(n),this.graph.isCloneEvent(n)),n,this)};HoverIcons$1.prototype.reset=function(t){t=t??!0,t&&this.updateThread!=null&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null,this.fireEvent(new mxEventObject$1("reset"))};HoverIcons$1.prototype.repaint=function(){if(this.bbox=null,this.currentState!=null){if(this.currentState=this.getState(this.currentState),this.currentState!=null&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var t=mxRectangle$1.fromRectangle(this.currentState);this.currentState.shape!=null&&this.currentState.shape.boundingBox!=null&&(t=mxRectangle$1.fromRectangle(this.currentState.shape.boundingBox)),t.grow(this.graph.tolerance),t.grow(this.arrowSpacing);var e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);this.graph.isTableRow(this.currentState.cell)&&(e=this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell)));var i=null;e!=null&&(t.x-=e.horizontalOffset/2,t.y-=e.verticalOffset/2,t.width+=e.horizontalOffset,t.height+=e.verticalOffset,e.rotationShape!=null&&e.rotationShape.node!=null&&e.rotationShape.node.style.visibility!="hidden"&&e.rotationShape.node.style.display!="none"&&e.rotationShape.boundingBox!=null&&(i=e.rotationShape.boundingBox));var n=mxUtils$1.bind(this,function(d,p,c){if(i!=null){var g=new mxRectangle$1(p,c,d.clientWidth,d.clientHeight);mxUtils$1.intersects(g,i)&&(d==this.arrowUp?c-=g.y+g.height-i.y:d==this.arrowRight?p+=i.x+i.width-g.x:d==this.arrowDown?c+=i.y+i.height-g.y:d==this.arrowLeft&&(p-=g.x+g.width-i.x))}d.style.left=p+"px",d.style.top=c+"px",mxUtils$1.setOpacity(d,this.inactiveOpacity)});if(n(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(t.y-this.triangleUp.height-this.tolerance)),n(this.arrowRight,Math.round(t.x+t.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),n(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(t.y+t.height-this.tolerance)),n(this.arrowLeft,Math.round(t.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions){var r=this.graph.getCellAt(t.x+t.width+this.triangleRight.width/2,this.currentState.getCenterY()),l=this.graph.getCellAt(t.x-this.triangleLeft.width/2,this.currentState.getCenterY()),s=this.graph.getCellAt(this.currentState.getCenterX(),t.y-this.triangleUp.height/2),a=this.graph.getCellAt(this.currentState.getCenterX(),t.y+t.height+this.triangleDown.height/2);r!=null&&r==l&&l==s&&s==a&&(r=null,l=null,s=null,a=null);var o=this.graph.getCellGeometry(this.currentState.cell),u=mxUtils$1.bind(this,function(d,p){var c=this.graph.model.isVertex(d)&&this.graph.getCellGeometry(d);d!=null&&!this.graph.model.isAncestor(d,this.currentState.cell)&&!this.graph.isSwimlane(d)&&(c==null||o==null||c.height<3*o.height&&c.width<3*o.width)?p.style.visibility="hidden":p.style.visibility="visible"});u(r,this.arrowRight),u(l,this.arrowLeft),u(s,this.arrowUp),u(a,this.arrowDown)}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources$1.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();this.currentState!=null&&(this.bbox=this.computeBoundingBox(),this.bbox!=null&&this.bbox.grow(10))}};HoverIcons$1.prototype.computeBoundingBox=function(){var t=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle$1.fromRectangle(this.currentState);return this.visitNodes(function(e){if(e.parentNode!=null){var i=new mxRectangle$1(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);t==null?t=i:t.add(i)}}),t};HoverIcons$1.prototype.getState=function(t){if(t!=null){var e=t.cell;if(!this.graph.getModel().contains(e))t=null;else{if(this.graph.getModel().isVertex(e)&&!this.graph.isCellConnectable(e)){var i=this.graph.getModel().getParent(e);this.graph.getModel().isVertex(i)&&this.graph.isCellConnectable(i)&&(e=i)}(this.graph.isCellLocked(e)||this.graph.model.isEdge(e))&&(e=null),t=this.graph.view.getState(e),t!=null&&t.style==null&&(t=null)}}return t};HoverIcons$1.prototype.update=function(t,e,i){if(!this.graph.connectionArrowsEnabled||this.graph.freehand!=null&&this.graph.freehand.isDrawing()||t!=null&&mxUtils$1.getValue(t.style,"allowArrows","1")=="0")this.reset();else{t!=null&&t.cell.geometry!=null&&t.cell.geometry.relative&&this.graph.model.isEdge(t.cell.parent)&&(t=null);var n=null;this.prev!=t||this.isActive()?(this.startTime=new Date().getTime(),this.prev=t,n=0,this.updateThread!=null&&window.clearTimeout(this.updateThread),t!=null&&(this.updateThread=window.setTimeout(mxUtils$1.bind(this,function(){!this.isActive()&&!this.graph.isMouseDown&&!this.graph.panningHandler.isActive()&&(this.prev=t,this.update(t,e,i))}),this.updateDelay+10))):this.startTime!=null&&(n=new Date().getTime()-this.startTime),this.setDisplay(""),this.currentState!=null&&this.currentState!=t&&n<this.activationDelay&&this.bbox!=null&&!mxUtils$1.contains(this.bbox,e,i)?this.reset(!1):(this.currentState!=null||n>this.activationDelay)&&this.currentState!=t&&(n>this.updateDelay&&t!=null||this.bbox==null||e==null||i==null||!mxUtils$1.contains(this.bbox,e,i))&&(t!=null&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(t),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=t&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}};HoverIcons$1.prototype.setCurrentState=function(t){t.style.portConstraint!="eastwest"&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=t};Graph$1.prototype.removeTextStyleForCell=function(t,e){var i=this.getCurrentCellStyle(t),n=!1;this.getModel().beginUpdate();try{if(mxUtils$1.getValue(i,"html","0")=="1"){var r=this.convertValueToString(t);mxUtils$1.getValue(i,"nl2Br","1")!="0"&&(r=r.replace(/\n/g,"").replace(/<br\s*.?>/g,`
`)),r=Editor$2.convertHtmlToText(r),this.cellLabelChanged(t,r),n=!0}e&&(this.setCellStyles("fontSource",null,[t]),this.setCellStyles(mxConstants$1.STYLE_FONTFAMILY,null,[t]),this.setCellStyles(mxConstants$1.STYLE_FONTSIZE,null,[t]),this.setCellStyles(mxConstants$1.STYLE_FONTSTYLE,null,[t]),this.setCellStyles(mxConstants$1.STYLE_FONTCOLOR,null,[t]),this.setCellStyles(mxConstants$1.STYLE_LABEL_BORDERCOLOR,null,[t]),this.setCellStyles(mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,null,[t]))}finally{this.getModel().endUpdate()}return n};Graph$1.prototype.createParent=function(t,e,i,n,r){t=this.cloneCell(t);for(var l=0;l<i;l++){var s=this.cloneCell(e),a=this.getCellGeometry(s);a!=null&&(a.x+=l*n,a.y+=l*r),t.insert(s)}return t};Graph$1.prototype.createTable=function(t,e,i,n,r,l,s,a,o){return i=i??60,n=n??40,l=l??30,s=s??"shape=table;startSize="+(r!=null?l:"0")+";container=1;collapsible=0;childLayout=tableLayout;",a=a??"shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",o=o??"shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;",this.createParent(this.createVertex(null,null,r??"",0,0,e*i,t*n+(r!=null?l:0),s),this.createParent(this.createVertex(null,null,"",0,0,e*i,n,a),this.createVertex(null,null,"",0,0,i,n,o),e,i,0),t,0,n)};Graph$1.prototype.setTableValues=function(t,e,i){for(var n=this.model.getChildCells(t,!0),r=0;r<n.length;r++)if(i!=null&&(n[r].value=i[r]),e!=null)for(var l=this.model.getChildCells(n[r],!0),s=0;s<l.length;s++)e[r][s]!=null&&(l[s].value=e[r][s]);return t};Graph$1.prototype.createCrossFunctionalSwimlane=function(t,e,i,n,r,l,s,a,o){i=i??120,n=n??120;var u="collapsible=0;recursiveResize=0;expand=0;";l=l??"shape=table;childLayout=tableLayout;"+(r==null?"startSize=0;fillColor=none;":"startSize=40;")+u,s=s??"shape=tableRow;horizontal=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;strokeColor=inherit;bottom=0;right=0;dropTarget=0;fontStyle=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;startSize=40;"+u,a=a??"swimlane;swimlaneHead=0;swimlaneBody=0;fontStyle=0;strokeColor=inherit;connectable=0;fillColor=none;startSize=40;"+u,o=o??"swimlane;swimlaneHead=0;swimlaneBody=0;fontStyle=0;connectable=0;strokeColor=inherit;fillColor=none;startSize=0;"+u;var d=this.createVertex(null,null,r??"",0,0,e*i,t*n,l),p=mxUtils$1.getValue(this.getCellStyle(d),mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE);d.geometry.width+=p,d.geometry.height+=p;var c=this.createVertex(null,null,"",0,p,e*i+p,n,s);return d.insert(this.createParent(c,this.createVertex(null,null,"",p,0,i,n,a),e,i,0)),t>1?(c.geometry.y=n+p,this.createParent(d,this.createParent(c,this.createVertex(null,null,"",p,0,i,n,o),e,i,0),t-1,0,n)):d};Graph$1.prototype.visitTableCells=function(t,e){for(var i=null,n=this.model.getChildCells(t,!0),r=this.getActualStartSize(t,!0),l=0;l<n.length;l++){for(var s=this.getActualStartSize(n[l],!0),a=this.model.getChildCells(n[l],!0),o=this.getCellStyle(n[l],!0),u=null,d=[],p=0;p<a.length;p++){var c=this.getCellGeometry(a[p]),g={cell:a[p],rospan:1,colspan:1,row:l,col:p,geo:c};if(c=c.alternateBounds!=null?c.alternateBounds:c,g.point=new mxPoint$1(c.width+(u!=null?u.point.x:r.x+s.x),c.height+(i!=null&&i[0]!=null?i[0].point.y:r.y+s.y)),g.actual=g,i!=null&&i[p]!=null&&i[p].rowspan>1)g.rowspan=i[p].rowspan-1,g.colspan=i[p].colspan,g.actual=i[p].actual;else if(u!=null&&u.colspan>1)g.rowspan=u.rowspan,g.colspan=u.colspan-1,g.actual=u.actual;else{var x=this.getCurrentCellStyle(a[p],!0);x!=null&&(g.rowspan=parseInt(x.rowspan||1),g.colspan=parseInt(x.colspan||1))}var C=mxUtils$1.getValue(o,mxConstants$1.STYLE_SWIMLANE_HEAD,1)==1&&mxUtils$1.getValue(o,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE;e(g,a.length,n.length,r.x+(C?s.x:0),r.y+(C?s.y:0)),d.push(g),u=g}i=d}};Graph$1.prototype.getTableLines=function(t,e,i){var n=[],r=[];return(e||i)&&this.visitTableCells(t,mxUtils$1.bind(this,function(l,s,a,o,u){e&&l.row<a-1&&(n[l.row]==null&&(n[l.row]=[new mxPoint$1(o,l.point.y)]),l.rowspan>1&&n[l.row].push(null),n[l.row].push(l.point)),i&&l.col<s-1&&(r[l.col]==null&&(r[l.col]=[new mxPoint$1(l.point.x,u)]),l.colspan>1&&r[l.col].push(null),r[l.col].push(l.point))})),n.concat(r)};Graph$1.prototype.isTableCell=function(t){return this.model.isVertex(t)&&this.isTableRow(this.model.getParent(t))};Graph$1.prototype.isTableRow=function(t){return this.model.isVertex(t)&&this.isTable(this.model.getParent(t))};Graph$1.prototype.isTable=function(t){var e=this.getCellStyle(t);return e!=null&&e.childLayout=="tableLayout"};Graph$1.prototype.isStack=function(t){var e=this.getCellStyle(t);return e!=null&&e.childLayout=="stackLayout"};Graph$1.prototype.isStackChild=function(t){return this.model.isVertex(t)&&this.isStack(this.model.getParent(t))};Graph$1.prototype.setTableRowHeight=function(t,e,i){i=i??!0;var n=this.getModel();n.beginUpdate();try{var r=this.getCellGeometry(t);if(r!=null){r=r.clone(),r.height+=e,n.setGeometry(t,r);var l=n.getParent(t),s=n.getChildCells(l,!0);if(!i){var a=mxUtils$1.indexOf(s,t);if(a<s.length-1){var o=s[a+1],u=this.getCellGeometry(o);u!=null&&(u=u.clone(),u.y+=e,u.height-=e,n.setGeometry(o,u))}}var d=this.getCellGeometry(l);d!=null&&(i||(i=t==s[s.length-1]),i&&(d=d.clone(),d.height+=e,n.setGeometry(l,d)))}}finally{n.endUpdate()}};Graph$1.prototype.setTableColumnWidth=function(t,e,i){i=i??!1;var n=this.getModel(),r=n.getParent(t),l=n.getParent(r),s=n.getChildCells(r,!0),a=mxUtils$1.indexOf(s,t),o=a==s.length-1;n.beginUpdate();try{for(var u=n.getChildCells(l,!0),d=0;d<u.length;d++){r=u[d],s=n.getChildCells(r,!0);var p=s[a],c=this.getCellGeometry(p);if(c!=null&&(c=c.clone(),c.width+=e,c.alternateBounds!=null&&(c.alternateBounds.width+=e),n.setGeometry(p,c)),a<s.length-1){p=s[a+1];var c=this.getCellGeometry(p);c!=null&&(c=c.clone(),c.x+=e,i||(c.width-=e,c.alternateBounds!=null&&(c.alternateBounds.width-=e)),n.setGeometry(p,c))}}if(o||i){var g=this.getCellGeometry(l);g!=null&&(g=g.clone(),g.width+=e,n.setGeometry(l,g))}this.layoutManager!=null&&this.layoutManager.executeLayout(l)}finally{n.endUpdate()}};function TableLayout(t){mxGraphLayout.call(this,t)}TableLayout.prototype=new mxStackLayout;TableLayout.prototype.constructor=TableLayout;TableLayout.prototype.isHorizontal=function(){return!1};TableLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.isCellVisible(t)};TableLayout.prototype.getSize=function(t,e){for(var i=0,n=0;n<t.length;n++)if(!this.isVertexIgnored(t[n])){var r=this.graph.getCellGeometry(t[n]);r!=null&&(i+=e?r.width:r.height)}return i};TableLayout.prototype.getRowLayout=function(t,e){for(var i=this.graph.model.getChildCells(t,!0),n=this.graph.getActualStartSize(t,!0),r=this.getSize(i,!0),l=e-n.x-n.width,s=[],a=n.x,o=0;o<i.length;o++){var u=this.graph.getCellGeometry(i[o]);u!=null&&(a+=(u.alternateBounds!=null?u.alternateBounds.width:u.width)*l/r,s.push(Math.round(a)))}return s};TableLayout.prototype.layoutRow=function(t,e,i,n){var r=this.graph.getModel(),l=r.getChildCells(t,!0),s=this.graph.getActualStartSize(t,!0),a=s.x,o=0;e!=null&&(e=e.slice(),e.splice(0,0,s.x));for(var u=0;u<l.length;u++){var d=this.graph.getCellGeometry(l[u]);d!=null&&(d=d.clone(),d.y=s.y,d.height=i-s.y-s.height,e!=null?(d.x=e[u],d.width=e[u+1]-d.x,u==l.length-1&&u<e.length-2&&(d.width=n-d.x-s.x-s.width)):(d.x=a,a+=d.width,u==l.length-1?d.width=n-s.x-s.width-o:o+=d.width),d.alternateBounds=new mxRectangle$1(0,0,d.width,d.height),r.setGeometry(l[u],d))}return o};TableLayout.prototype.execute=function(t){if(t!=null){var e=this.graph.getActualStartSize(t,!0),i=this.graph.getCellGeometry(t),n=this.graph.getCellStyle(t),r=mxUtils$1.getValue(n,"resizeLastRow","0")=="1",l=mxUtils$1.getValue(n,"resizeLast","0")=="1",s=mxUtils$1.getValue(n,"fixedRows","0")=="1",a=this.graph.getModel(),o=0;a.beginUpdate();try{for(var u=i.height-e.y-e.height,d=i.width-e.x-e.width,p=a.getChildCells(t,!0),c=0;c<p.length;c++)a.setVisible(p[c],!0);var g=this.getSize(p,!1);if(u>0&&d>0&&p.length>0&&g>0){if(r){var x=this.graph.getCellGeometry(p[p.length-1]);x!=null&&(x=x.clone(),x.height=u-g+x.height,a.setGeometry(p[p.length-1],x))}for(var C=l?null:this.getRowLayout(p[0],d),T=[],A=e.y,c=0;c<p.length;c++){var x=this.graph.getCellGeometry(p[c]);x!=null&&(x=x.clone(),x.x=e.x,x.width=d,x.y=Math.round(A),r||s?A+=x.height:A+=x.height/g*u,x.height=Math.round(A)-x.y,a.setGeometry(p[c],x)),o=Math.max(o,this.layoutRow(p[c],C,x.height,d,T))}s&&u<g&&(i=i.clone(),i.height=A+e.height,a.setGeometry(t,i)),l&&d<o+Graph$1.minTableColumnWidth&&(i=i.clone(),i.width=o+e.width+e.x+Graph$1.minTableColumnWidth,a.setGeometry(t,i)),this.graph.visitTableCells(t,mxUtils$1.bind(this,function(R){if(a.setVisible(R.cell,R.actual.cell==R.cell),R.actual.cell!=R.cell){if(R.actual.row==R.row){var _=R.geo.alternateBounds!=null?R.geo.alternateBounds:R.geo;R.actual.geo.width+=_.width}if(R.actual.col==R.col){var _=R.geo.alternateBounds!=null?R.geo.alternateBounds:R.geo;R.actual.geo.height+=_.height}}}))}else for(var c=0;c<p.length;c++)a.setVisible(p[c],!1)}finally{a.endUpdate()}}};(function(){var t=mxGraphView.prototype.resetValidationState;mxGraphView.prototype.resetValidationState=function(){t.apply(this,arguments),this.validEdges=[]};var e=mxGraphView.prototype.validateCellState;mxGraphView.prototype.validateCellState=function(d,p){p=p??!0;var c=this.getState(d);return c!=null&&p&&this.graph.model.isEdge(c.cell)&&c.style!=null&&c.style[mxConstants$1.STYLE_CURVED]!=1&&!c.invalid&&this.updateLineJumps(c)&&this.graph.cellRenderer.redraw(c,!1,this.isRendering()),c=e.apply(this,arguments),c!=null&&p&&this.graph.model.isEdge(c.cell)&&c.style!=null&&c.style[mxConstants$1.STYLE_CURVED]!=1&&this.validEdges.push(c),c};var i=mxShape$1.prototype.paint;mxShape$1.prototype.isFlowAnimationEnabled=function(){return this.state!=null&&this.state.view.graph.enableFlowAnimation&&this.state.view.graph.model.isEdge(this.state.cell)&&mxUtils$1.getValue(this.state.style,"flowAnimation","0")=="1"},mxShape$1.prototype.getFlowAnimationPath=function(){var d=this.node!=null?this.node.getElementsByTagName("path"):null;if(d!=null){for(var p=0;p<d.length;p++)if(d[p].getAttribute("visibility")!="hidden")return d[p]}return null},mxShape$1.prototype.addFlowAnimationToShape=function(){this.state!=null&&this.state.view.graph.addFlowAnimationToNode(this.getFlowAnimationPath(),this.state.style,this.state.view.scale,this.state.view.graph.addFlowAnimationStyle())},mxShape$1.prototype.paint=function(d){i.apply(this,arguments),this.isFlowAnimationEnabled()&&this.addFlowAnimationToShape()};var n=mxCellRenderer.prototype.isShapeInvalid;mxCellRenderer.prototype.isShapeInvalid=function(d,p){return n.apply(this,arguments)||d.routedPoints!=null&&p.routedPoints!=null&&!mxUtils$1.equalPoints(p.routedPoints,d.routedPoints)};var r=mxGraphView.prototype.updateCellState;mxGraphView.prototype.updateCellState=function(d){r.apply(this,arguments),this.graph.model.isEdge(d.cell)&&d.style[mxConstants$1.STYLE_CURVED]!=1&&this.updateLineJumps(d)},mxGraphView.prototype.updateLineJumps=function(d){var p=d.absolutePoints;if(Graph$1.lineJumpsEnabled){var c=d.routedPoints!=null,g=null;if(p!=null&&this.validEdges!=null&&mxUtils$1.getValue(d.style,"jumpStyle","none")!=="none"){let tt=function(st,ft,$t){var Ct=new mxPoint$1(ft,$t);Ct.type=st,g.push(Ct);var pt=d.routedPoints!=null?d.routedPoints[g.length-1]:null;return pt==null||pt.type!=st||pt.x!=ft||pt.y!=$t};var lt=tt,x=.5*this.scale;c=!1,g=[];for(var C=0;C<p.length-1;C++){for(var T=p[C+1],A=p[C],R=[],_=p[C+2];C<p.length-2&&mxUtils$1.ptSegDistSq(A.x,A.y,_.x,_.y,T.x,T.y)<1*this.scale*this.scale;)T=_,C++,_=p[C+2];c=tt(0,A.x,A.y)||c;for(var N=0;N<this.validEdges.length;N++){var H=this.validEdges[N],k=H.absolutePoints;if(k!=null&&mxUtils$1.intersects(d,H)&&H.style.noJump!="1")for(var K=null,Q=0;Q<k.length-1;Q++){var nt=k[Q+1],dt=k[Q];for(_=k[Q+2];Q<k.length-2&&mxUtils$1.ptSegDistSq(dt.x,dt.y,_.x,_.y,nt.x,nt.y)<1*this.scale*this.scale;)nt=_,Q++,_=k[Q+2];var U=mxUtils$1.intersection(A.x,A.y,T.x,T.y,dt.x,dt.y,nt.x,nt.y);if(U!=null&&(Math.abs(U.x-A.x)>x||Math.abs(U.y-A.y)>x)&&(Math.abs(U.x-T.x)>x||Math.abs(U.y-T.y)>x)&&(K==null||mxUtils$1.ptLineDist(A.x,A.y,T.x,T.y,K.x,K.y)>x||mxUtils$1.ptLineDist(A.x,A.y,T.x,T.y,dt.x,dt.y)>x)&&(_==null||mxUtils$1.ptLineDist(A.x,A.y,T.x,T.y,_.x,_.y)>x||mxUtils$1.ptLineDist(A.x,A.y,T.x,T.y,nt.x,nt.y)>x)){for(var mt=U.x-A.x,xt=U.y-A.y,Y={distSq:mt*mt+xt*xt,x:U.x,y:U.y},B=0;B<R.length;B++)if(R[B].distSq>Y.distSq){R.splice(B,0,Y),Y=null;break}Y!=null&&(R.length==0||R[R.length-1].x!==Y.x||R[R.length-1].y!==Y.y)&&R.push(Y)}K=dt}}for(var Q=0;Q<R.length;Q++)c=tt(1,R[Q].x,R[Q].y)||c}var U=p[p.length-1];c=tt(0,U.x,U.y)||c}return d.routedPoints=g,c}else return!1};var l=mxConnector.prototype.paintLine;mxConnector.prototype.paintLine=function(d,p,c){if(this.routedPoints=this.state!=null?this.state.routedPoints:null,this.outline||this.state==null||this.style==null||this.state.routedPoints==null||this.state.routedPoints.length==0)l.apply(this,arguments);else{var g=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2,x=(parseInt(mxUtils$1.getValue(this.style,"jumpSize",Graph$1.defaultJumpSize))-2)/2+this.strokewidth,C=mxUtils$1.getValue(this.style,"jumpStyle","none"),T=!0,A=null,R=null,_=[],N=null;d.begin();for(var H=0;H<this.state.routedPoints.length;H++){var k=this.state.routedPoints[H],K=new mxPoint$1(k.x/this.scale,k.y/this.scale);H==0?K=p[0]:H==this.state.routedPoints.length-1&&(K=p[p.length-1]);var Q=!1;if(A!=null&&k.type==1){var nt=this.state.routedPoints[H+1],dt=nt.x/this.scale-K.x,mt=nt.y/this.scale-K.y,xt=dt*dt+mt*mt;if(N==null&&(N=new mxPoint$1(K.x-A.x,K.y-A.y),R=Math.sqrt(N.x*N.x+N.y*N.y),R>0?(N.x=N.x*x/R,N.y=N.y*x/R):N=null),xt>x*x&&R>0){var dt=A.x-K.x,mt=A.y-K.y,xt=dt*dt+mt*mt;if(xt>x*x){var Y=new mxPoint$1(K.x-N.x,K.y-N.y),B=new mxPoint$1(K.x+N.x,K.y+N.y);_.push(Y),this.addPoints(d,_,c,g,!1,null,T);var U=Math.round(N.x)<0||Math.round(N.x)==0&&Math.round(N.y)<=0?1:-1;T=!1,C=="sharp"?(d.lineTo(Y.x-N.y*U,Y.y+N.x*U),d.lineTo(B.x-N.y*U,B.y+N.x*U),d.lineTo(B.x,B.y)):C=="line"?(d.moveTo(Y.x+N.y*U,Y.y-N.x*U),d.lineTo(Y.x-N.y*U,Y.y+N.x*U),d.moveTo(B.x-N.y*U,B.y+N.x*U),d.lineTo(B.x+N.y*U,B.y-N.x*U),d.moveTo(B.x,B.y)):C=="arc"?(U*=1.3,d.curveTo(Y.x-N.y*U,Y.y+N.x*U,B.x-N.y*U,B.y+N.x*U,B.x,B.y)):(d.moveTo(B.x,B.y),T=!0),_=[B],Q=!0}}}else N=null;Q||(_.push(K),A=K)}this.addPoints(d,_,c,g,!1,null,T),d.stroke()}};var s=mxGraphView.prototype.getFixedTerminalPoint;mxGraphView.prototype.getFixedTerminalPoint=function(d,p,c,g){return p!=null&&p.style[mxConstants$1.STYLE_PERIMETER]=="centerPerimeter"?new mxPoint$1(p.getCenterX(),p.getCenterY()):s.apply(this,arguments)};var a=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(d,p,c,g){if(p!=null&&d!=null&&(p.style.snapToPoint=="1"||d.style.snapToPoint=="1")){p=this.getTerminalPort(d,p,g);var x=this.getNextPoint(d,c,g),C=this.graph.isOrthogonal(d),T=mxUtils$1.toRadians(Number(p.style[mxConstants$1.STYLE_ROTATION]||"0")),A=new mxPoint$1(p.getCenterX(),p.getCenterY());if(T!=0){var R=Math.cos(-T),_=Math.sin(-T);x=mxUtils$1.getRotatedPoint(x,R,_,A)}var N=parseFloat(d.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0);N+=parseFloat(d.style[g?mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING:mxConstants$1.STYLE_TARGET_PERIMETER_SPACING]||0);var H=this.getPerimeterPoint(p,x,T==0&&C,N);if(T!=0){var R=Math.cos(T),_=Math.sin(T);H=mxUtils$1.getRotatedPoint(H,R,_,A)}d.setAbsoluteTerminalPoint(this.snapToAnchorPoint(d,p,c,g,H),g)}else a.apply(this,arguments)},mxGraphView.prototype.snapToAnchorPoint=function(d,p,c,g,x){if(p!=null&&d!=null){var C=this.graph.getAllConnectionConstraints(p),T=null,A=null;if(C!=null)for(var R=0;R<C.length;R++){var _=this.graph.getConnectionPoint(p,C[R]);if(_!=null){var N=(_.x-x.x)*(_.x-x.x)+(_.y-x.y)*(_.y-x.y);(A==null||N<A)&&(T=_,A=N)}}T!=null&&(x=T)}return x};var o=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(d,p,c){var g=o.apply(this,arguments),x=d.getAttribute("placeholders");return x=="1"&&c.state!=null&&(g=c.state.view.graph.replacePlaceholders(c.state.cell,g)),g};var u=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(d){if(d.style!=null&&typeof pako<"u"){var p=mxUtils$1.getValue(d.style,mxConstants$1.STYLE_SHAPE,null);if(p!=null&&typeof p=="string"&&p.substring(0,8)=="stencil(")try{var c=p.substring(8,p.length-1),g=mxUtils$1.parseXml(Graph$1.decompress(c));return new mxShape$1(new mxStencil(g.documentElement))}catch(x){window.console!=null&&console.log("Error in shape: "+x)}}return u.apply(this,arguments)}})();mxStencilRegistry$1.libraries={};mxStencilRegistry$1.dynamicLoading=!0;mxStencilRegistry$1.allowEval=!0;mxStencilRegistry$1.packages=[];mxStencilRegistry$1.filesLoaded={};mxStencilRegistry$1.isFileLoaded=function(t){return!mxClient$1.IS_FF&&mxStencilRegistry$1.filesLoaded[t]};mxStencilRegistry$1.setFileLoaded=function(t){mxStencilRegistry$1.filesLoaded[t]=!0};mxStencilRegistry$1.getStencil=function(t){var e=mxStencilRegistry$1.stencils[t];if(e==null&&mxCellRenderer.defaultShapes[t]==null&&mxStencilRegistry$1.dynamicLoading){var i=mxStencilRegistry$1.getBasenameForStencil(t);if(i!=null){var n=mxStencilRegistry$1.libraries[i];if(n!=null){if(mxStencilRegistry$1.packages[i]==null){for(var r=0;r<n.length;r++){var l=n[r];if(!mxStencilRegistry$1.isFileLoaded(l)){if(mxStencilRegistry$1.setFileLoaded(l),l.toLowerCase().substring(l.length-4,l.length)==".xml")mxStencilRegistry$1.loadStencilSet(l,null);else if(l.toLowerCase().substring(l.length-3,l.length)==".js")try{if(mxStencilRegistry$1.allowEval){var s=mxUtils$1.load(l);s!=null&&s.getStatus()>=200&&s.getStatus()<=299&&eval.call(window,s.getText())}}catch(a){window.console!=null&&console.log("error in getStencil:",t,i,n,l,a)}}}mxStencilRegistry$1.packages[i]=1}}else i=i.replace("_-_","_"),mxStencilRegistry$1.loadStencilSet(STENCIL_PATH+"/"+i+".xml",null);e=mxStencilRegistry$1.stencils[t]}}return e};mxStencilRegistry$1.getBasenameForStencil=function(t){var e=null;if(t!=null&&typeof t=="string"){var i=t.split(".");if(i.length>0&&i[0]=="mxgraph"){e=i[1];for(var n=2;n<i.length-1;n++)e+="/"+i[n]}}return e};mxStencilRegistry$1.loadStencilSet=function(t,e,i,n){i=i??!1;var r=mxStencilRegistry$1.packages[t];if(i||r==null){var l=!1;if(r==null)try{if(n){mxStencilRegistry$1.loadStencil(t,mxUtils$1.bind(this,function(s){s!=null&&s.documentElement!=null&&(mxStencilRegistry$1.packages[t]=s,l=!0,mxStencilRegistry$1.parseStencilSet(s.documentElement,e,l))}));return}else r=mxStencilRegistry$1.loadStencil(t),mxStencilRegistry$1.packages[t]=r,l=!0}catch(s){window.console!=null&&console.log("error in loadStencilSet:",t,s)}r!=null&&r.documentElement!=null&&mxStencilRegistry$1.parseStencilSet(r.documentElement,e,l)}};mxStencilRegistry$1.loadStencil=function(t,e){if(e!=null)mxUtils$1.get(t,mxUtils$1.bind(this,function(i){e(i.getStatus()>=200&&i.getStatus()<=299?i.getXml():null)}),mxUtils$1.bind(this,function(i){e(null)}));else return mxUtils$1.load(t).getXml()};mxStencilRegistry$1.parseStencilSets=function(t){for(var e=0;e<t.length;e++)mxStencilRegistry$1.parseStencilSet(mxUtils$1.parseXml(t[e]).documentElement)};mxStencilRegistry$1.parseStencilSet=function(t,e,i){if(t.nodeName=="stencils")for(var n=t.firstChild;n!=null;)n.nodeName=="shapes"&&mxStencilRegistry$1.parseStencilSet(n,e,i),n=n.nextSibling;else{i=i??!0;var r=t.firstChild,l="",s=t.getAttribute("name");for(s!=null&&(l=s+".");r!=null;){if(r.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(s=r.getAttribute("name"),s!=null)){l=l.toLowerCase();var a=s.replace(/ /g,"_");if(i&&mxStencilRegistry$1.addStencil(l+a.toLowerCase(),new mxStencil(r)),e!=null){var o=r.getAttribute("w"),u=r.getAttribute("h");o=o==null?80:parseInt(o,10),u=u==null?80:parseInt(u,10),e(l,a,s,o,u)}}r=r.nextSibling}}};typeof mxVertexHandler$1<"u"&&function(){mxConstants$1.HANDLE_FILLCOLOR="#29b6f2",mxConstants$1.HANDLE_STROKECOLOR="#0088cf",mxConstants$1.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants$1.OUTLINE_COLOR="#00a8ff",mxConstants$1.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants$1.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants$1.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants$1.EDGE_SELECTION_COLOR="#00a8ff",mxConstants$1.DEFAULT_VALID_COLOR="#00a8ff",mxConstants$1.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants$1.GUIDE_COLOR="#0088cf",mxConstants$1.HIGHLIGHT_STROKEWIDTH=5,mxConstants$1.HIGHLIGHT_OPACITY=50,mxConstants$1.HIGHLIGHT_SIZE=5,mxWindow$1.prototype.closeImage=Graph$1.createSvgImage(18,10,'<path d="M 5 1 L 13 9 M 13 1 L 5 9" stroke="#707070" stroke-width="2"/>').src,mxWindow$1.prototype.minimizeImage=Graph$1.createSvgImage(14,10,'<path d="M 3 7 L 7 3 L 11 7" stroke="#707070" stroke-width="2" fill="none"/>').src,mxWindow$1.prototype.normalizeImage=Graph$1.createSvgImage(14,10,'<path d="M 3 3 L 7 7 L 11 3" stroke="#707070" stroke-width="2" fill="none"/>').src,mxWindow$1.prototype.resizeImage=Graph$1.createSvgImage(10,10,'<path d="Z" stroke="#C0C0C0" stroke-width="1" fill="none"/>').src,mxEdgeHandler$1.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGraphHandler.prototype.removeEmptyParents=!0,mxRubberband.prototype.fadeOut=!0,mxGuide$1.prototype.isEnabledForEvent=function(S){return!mxEvent$1.isAltDown(S)||mxEvent$1.isShiftDown(S)};var t=mxGraphLayout.prototype.isVertexIgnored;mxGraphLayout.prototype.isVertexIgnored=function(S){return t.apply(this,arguments)||this.graph.isTableRow(S)||this.graph.isTableCell(S)};var e=mxGraphLayout.prototype.isEdgeIgnored;mxGraphLayout.prototype.isEdgeIgnored=function(S){return e.apply(this,arguments)||this.graph.isEdgeIgnored(S)};var i=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(S){return this.graph.isCloneEvent(S)!=i.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var S=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return S.opacity=mxConstants$1.HIGHLIGHT_OPACITY,S},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(S){var I=this.graph.createCurrentEdgeStyle(),L=this.graph.createEdge(null,null,null,null,null,I),D=new mxCellState$1(this.graph.view,L,this.graph.getCellStyle(L));for(var O in this.graph.currentEdgeStyle)D.style[O]=this.graph.currentEdgeStyle[O];if(this.previous!=null){var V=this.previous.style.newEdgeStyle;if(V!=null)try{var j=JSON.parse(V);for(var O in j)D.style[O]=j[O]}catch{}}return D.style=this.graph.postProcessCellStyle(D.cell,D.style),D};var n=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var S=n.apply(this,arguments);return S.isDashed=this.graph.currentEdgeStyle[mxConstants$1.STYLE_DASHED]=="1",S},mxConnectionHandler.prototype.updatePreview=function(S){};var r=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var S=r.apply(this,arguments),I=S.getCell;return S.getCell=mxUtils$1.bind(this,function(L){var D=I.apply(this,arguments);return this.error=null,D}),S},Graph$1.prototype.defaultVertexStyle={},Graph$1.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph$1.prototype.createCurrentEdgeStyle=function(){for(var S="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";",I=["shape","curved","rounded","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","comicStyle","jumpStyle","jumpSize"],L=0;L<I.length;L++)this.currentEdgeStyle[I[L]]!=null&&(S+=I[L]+"="+this.currentEdgeStyle[I[L]]+";");return this.currentEdgeStyle.orthogonalLoop!=null?S+="orthogonalLoop="+this.currentEdgeStyle.orthogonalLoop+";":Graph$1.prototype.defaultEdgeStyle.orthogonalLoop!=null&&(S+="orthogonalLoop="+Graph$1.prototype.defaultEdgeStyle.orthogonalLoop+";"),this.currentEdgeStyle.jettySize!=null?S+="jettySize="+this.currentEdgeStyle.jettySize+";":Graph$1.prototype.defaultEdgeStyle.jettySize!=null&&(S+="jettySize="+Graph$1.prototype.defaultEdgeStyle.jettySize+";"),this.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"&&this.currentEdgeStyle.elbow!=null&&(S+="elbow="+this.currentEdgeStyle.elbow+";"),this.currentEdgeStyle.html!=null?S+="html="+this.currentEdgeStyle.html+";":S+="html=1;",S},Graph$1.prototype.getPagePadding=function(){return new mxPoint$1(0,0)},Graph$1.prototype.loadStylesheet=function(){var S=this.themes!=null?this.themes[this.defaultThemeName]:mxStyleRegistry$1.dynamicLoading?mxUtils$1.load(STYLE_PATH+"/default.xml").getDocumentElement():null;if(S!=null){var I=new mxCodec$1(S.ownerDocument);I.decode(S,this.getStylesheet())}},Graph$1.prototype.createCellLookup=function(S,I){I=I??new Object;for(var L=0;L<S.length;L++){var D=S[L];I[mxObjectIdentity$1.get(D)]=D.getId();for(var O=this.model.getChildCount(D),V=0;V<O;V++)this.createCellLookup([this.model.getChildAt(D,V)],I)}return I},Graph$1.prototype.createCellMapping=function(S,I,L){L=L??new Object;for(var D in S){var O=I[D];L[O]==null&&(L[O]=S[D].getId()||"")}return L},Graph$1.prototype.importGraphModel=function(S,I,L,D){I=I??0,L=L??0;var O=new mxCodec$1(S.ownerDocument),V=new mxGraphModel;O.decode(S,V);var j=[],at=new Object,ot=new Object,yt=V.getChildren(this.cloneCell(V.root,this.isCloneInvalidEdges(),at));if(yt!=null){var Lt=this.createCellLookup([V.root]);yt=yt.slice(),this.model.beginUpdate();try{if(yt.length==1&&!this.isCellLocked(this.getDefaultParent())){var It=V.getChildren(yt[0]);It!=null&&(j=this.moveCells(It,I,L,!1,this.getDefaultParent()),ot[V.getChildAt(V.root,0).getId()]=this.getDefaultParent().getId())}else for(var Gt=0;Gt<yt.length;Gt++){var It=this.model.getChildren(this.moveCells([yt[Gt]],I,L,!1,this.model.getRoot())[0]);It!=null&&(j=j.concat(It))}if(j!=null&&(this.createCellMapping(at,Lt,ot),this.updateCustomLinks(ot,j),D)){this.isGridEnabled()&&(I=this.snap(I),L=this.snap(L));var Yt=this.getBoundingBoxFromGeometry(j,!0);Yt!=null&&this.moveCells(j,I-Yt.x,L-Yt.y)}}finally{this.model.endUpdate()}}return j},Graph$1.prototype.encodeCells=function(S){for(var I=new Object,L=this.cloneCells(S,null,I),D=new mxDictionary$1,O=0;O<S.length;O++)D.put(S[O],!0);for(var V=new mxCodec$1,j=new mxGraphModel,at=j.getChildAt(j.getRoot(),0),O=0;O<L.length;O++){j.add(at,L[O]);var ot=this.view.getState(S[O]);if(ot!=null){var yt=this.getCellGeometry(L[O]);yt!=null&&yt.relative&&!this.model.isEdge(S[O])&&D.get(this.model.getParent(S[O]))==null&&(yt.offset=null,yt.relative=!1,yt.x=ot.x/ot.view.scale-ot.view.translate.x,yt.y=ot.y/ot.view.scale-ot.view.translate.y)}}return this.updateCustomLinks(this.createCellMapping(I,this.createCellLookup(S)),L),V.encode(j)},Graph$1.prototype.isSwimlane=function(S,I){var L=null;if(S!=null&&!this.model.isEdge(S)&&this.model.getParent(S)!=this.model.getRoot()){var D=this.getCurrentCellStyle(S,I);L=D[mxConstants$1.STYLE_SHAPE]}return L==mxConstants$1.SHAPE_SWIMLANE||L=="table"||L=="tableRow"};var l=Graph$1.prototype.isCellEditable;Graph$1.prototype.isCellEditable=function(S){return S==null||!l.apply(this,arguments)?!1:this.isTableCell(S)||this.isTableRow(S)?this.isCellEditable(this.model.getParent(S)):!0};var s=Graph$1.prototype.isCellMovable;Graph$1.prototype.isCellMovable=function(S){return S==null||!s.apply(this,arguments)?!1:this.isTableCell(S)||this.isTableRow(S)?this.isCellMovable(this.model.getParent(S)):!0};var a=Graph$1.prototype.isExtendParent;Graph$1.prototype.isExtendParent=function(S){var I=this.model.getParent(S);if(I!=null){var L=this.getCurrentCellStyle(I);if(L.expand!=null)return L.expand!="0"}return a.apply(this,arguments)&&(I==null||!this.isTable(I))};var o=Graph$1.prototype.splitEdge;Graph$1.prototype.splitEdge=function(S,I,ot,D,O,V,j,at){at==null&&(at=this.model.getParent(S),(this.isTable(at)||this.isTableRow(at))&&(at=this.getCellAt(V,j,null,!0,!1)));var ot=null;this.model.beginUpdate();try{var ot=o.apply(this,[S,I,ot,D,O,V,j,at]);this.model.setValue(ot,"");for(var yt=this.getChildCells(ot,!0),Lt=0;Lt<yt.length;Lt++){var It=this.getCellGeometry(yt[Lt]);It!=null&&It.relative&&It.x>0&&this.model.remove(yt[Lt])}for(var Gt=this.getChildCells(S,!0),Lt=0;Lt<Gt.length;Lt++){var It=this.getCellGeometry(Gt[Lt]);It!=null&&It.relative&&It.x<=0&&this.model.remove(Gt[Lt])}var Yt=this.model.getTerminal(ot,!1);if(Yt!=null){var ee=this.getCurrentCellStyle(Yt);ee!=null&&ee.snapToPoint=="1"&&(this.setCellStyles(mxConstants$1.STYLE_EXIT_X,null,[S]),this.setCellStyles(mxConstants$1.STYLE_EXIT_Y,null,[S]),this.setCellStyles(mxConstants$1.STYLE_ENTRY_X,null,[ot]),this.setCellStyles(mxConstants$1.STYLE_ENTRY_Y,null,[ot]))}}finally{this.model.endUpdate()}return ot};var u=Graph$1.prototype.selectCell;Graph$1.prototype.selectCell=function(S,I,L){if(I||L)u.apply(this,arguments);else{var D=this.getSelectionCell(),O=null,V=[],j=mxUtils$1.bind(this,function(at){if(this.view.getState(at)!=null&&(this.model.isVertex(at)||this.model.isEdge(at))){if(V.push(at),at==D)O=V.length-1;else if(S&&D==null&&V.length>0||O!=null&&S&&V.length>O||!S&&O>0)return}for(var ot=0;ot<this.model.getChildCount(at);ot++)j(this.model.getChildAt(at,ot))});j(this.model.root),V.length>0&&(O!=null?O=mxUtils$1.mod(O+(S?1:-1),V.length):O=0,this.setSelectionCell(V[O]))}},Graph$1.prototype.swapShapes=function(S,I){if(this.model.isVertex(S)&&this.model.isVertex(I)&&this.getMovableCells([S,I]).length==2){var L=this.getCellGeometry(S),D=this.getCellGeometry(I);if(L!=null&&D!=null){var O=L.clone(),V=D.clone();this.model.beginUpdate();try{O.x=D.getCenterX()-L.width/2,O.y=D.getCenterY()-L.height/2,V.x=L.getCenterX()-D.width/2,V.y=L.getCenterY()-D.height/2,this.model.setGeometry(S,O),this.model.setGeometry(I,V)}finally{this.model.endUpdate()}}}};var d=Graph$1.prototype.moveCells;Graph$1.prototype.moveCells=function(S,I,L,D,O,V,j){if(j=j??new Object,this.isTable(O)){for(var at=[],ot=0;ot<S.length;ot++)this.isTable(S[ot])?at=at.concat(this.model.getChildCells(S[ot],!0).reverse()):at.push(S[ot]);S=at}this.model.beginUpdate();try{for(var yt=[],ot=0;ot<S.length;ot++)if(O!=null&&this.isTableRow(S[ot])){var Lt=this.model.getParent(S[ot]),It=this.getCellGeometry(S[ot]);if(this.isTable(Lt)&&yt.push(Lt),Lt!=null&&It!=null&&this.isTable(Lt)&&this.isTable(O)&&(D||Lt!=O)){if(!D){var Gt=this.getCellGeometry(Lt);Gt!=null&&(Gt=Gt.clone(),Gt.height-=It.height,this.model.setGeometry(Lt,Gt))}var Gt=this.getCellGeometry(O);Gt!=null&&(Gt=Gt.clone(),Gt.height+=It.height,this.model.setGeometry(O,Gt));var Yt=this.model.getChildCells(O,!0);if(Yt.length>0){S[ot]=D?this.cloneCell(S[ot]):S[ot];var ee=this.model.getChildCells(S[ot],!0),le=this.model.getChildCells(Yt[0],!0),jt=le.length-ee.length;if(jt>0)for(var Zt=0;Zt<jt;Zt++){var Qt=this.cloneCell(ee[ee.length-1]);Qt!=null&&(Qt.value="",this.model.add(S[ot],Qt))}else if(jt<0)for(var Zt=0;Zt>jt;Zt--)this.model.remove(ee[ee.length+Zt-1]);ee=this.model.getChildCells(S[ot],!0);for(var Zt=0;Zt<le.length;Zt++){var qt=this.getCellGeometry(le[Zt]),Vt=this.getCellGeometry(ee[Zt]);qt!=null&&Vt!=null&&(Vt=Vt.clone(),Vt.width=qt.width,this.model.setGeometry(ee[Zt],Vt))}}}}for(var Kt=d.apply(this,arguments),ot=0;ot<yt.length;ot++)!D&&this.model.contains(yt[ot])&&this.model.getChildCount(yt[ot])==0&&this.model.remove(yt[ot]);D&&this.updateCustomLinks(this.createCellMapping(j,this.createCellLookup(S)),Kt)}finally{this.model.endUpdate()}return Kt};var p=Graph$1.prototype.removeCells;Graph$1.prototype.removeCells=function(S,I){var L=[];this.model.beginUpdate();try{for(var D=0;D<S.length;D++)if(this.isTableCell(S[D])){var O=this.model.getParent(S[D]),V=this.model.getParent(O);this.model.getChildCount(O)==1&&this.model.getChildCount(V)==1?mxUtils$1.indexOf(S,V)<0&&mxUtils$1.indexOf(L,V)<0&&L.push(V):this.labelChanged(S[D],"")}else{if(this.isTableRow(S[D])){var V=this.model.getParent(S[D]);if(mxUtils$1.indexOf(S,V)<0&&mxUtils$1.indexOf(L,V)<0){for(var j=this.model.getChildCells(V,!0),at=0,ot=0;ot<j.length;ot++)mxUtils$1.indexOf(S,j[ot])>=0&&at++;at==j.length&&L.push(V)}}L.push(S[D])}L=p.apply(this,[L,I])}finally{this.model.endUpdate()}return L},Graph$1.prototype.updateCustomLinks=function(S,I,L){L=L??new Graph$1;for(var D=0;D<I.length;D++)I[D]!=null&&L.updateCustomLinksForCell(S,I[D],L)},Graph$1.prototype.updateCustomLinksForCell=function(S,I){this.doUpdateCustomLinksForCell(S,I);for(var L=this.model.getChildCount(I),D=0;D<L;D++)this.updateCustomLinksForCell(S,this.model.getChildAt(I,D))},Graph$1.prototype.doUpdateCustomLinksForCell=function(S,I){},Graph$1.prototype.getAllConnectionConstraints=function(S,I){if(S!=null){var L=mxUtils$1.getValue(S.style,"points",null);if(L!=null){var D=[];try{for(var O=JSON.parse(L),V=0;V<O.length;V++){var j=O[V];D.push(new mxConnectionConstraint$1(new mxPoint$1(j[0],j[1]),j.length>2?j[2]!="0":!0,null,j.length>3?j[3]:0,j.length>4?j[4]:0))}}catch{}return D}else if(S.shape!=null&&S.shape.bounds!=null){var at=S.shape.direction,ot=S.shape.bounds,yt=S.shape.scale,Lt=ot.width/yt,It=ot.height/yt;if(at==mxConstants$1.DIRECTION_NORTH||at==mxConstants$1.DIRECTION_SOUTH){var j=Lt;Lt=It,It=j}if(L=S.shape.getConstraints(S.style,Lt,It),L!=null)return L;if(S.shape.stencil!=null&&S.shape.stencil.constraints!=null)return S.shape.stencil.constraints;if(S.shape.constraints!=null)return S.shape.constraints}}return null},Graph$1.prototype.flipEdge=function(S){if(S!=null){var I=this.getCurrentCellStyle(S),L=mxUtils$1.getValue(I,mxConstants$1.STYLE_ELBOW,mxConstants$1.ELBOW_HORIZONTAL),D=L==mxConstants$1.ELBOW_HORIZONTAL?mxConstants$1.ELBOW_VERTICAL:mxConstants$1.ELBOW_HORIZONTAL;this.setCellStyles(mxConstants$1.STYLE_ELBOW,D,[S])}},Graph$1.prototype.isValidRoot=function(S){for(var I=this.model.getChildCount(S),L=0,D=0;D<I;D++){var O=this.model.getChildAt(S,D);if(this.model.isVertex(O)){var V=this.getCellGeometry(O);V!=null&&!V.relative&&L++}}return L>0||this.isContainer(S)},Graph$1.prototype.isValidDropTarget=function(S,I,L){for(var D=this.getCurrentCellStyle(S),O=!0,V=!0,j=0;j<I.length&&V;j++)O=O&&this.isTable(I[j]),V=V&&this.isTableRow(I[j]);return!this.isCellLocked(S)&&(this.isTargetShape(S,I,L)||(mxUtils$1.getValue(D,"part","0")!="1"||this.isContainer(S))&&mxUtils$1.getValue(D,"dropTarget","1")!="0"&&(mxGraph.prototype.isValidDropTarget.apply(this,arguments)||this.isContainer(S))&&!this.isTableRow(S)&&(!this.isTable(S)||V||O))},Graph$1.prototype.createGroupCell=function(){var S=mxGraph.prototype.createGroupCell.apply(this,arguments);return S.setStyle("group"),S},Graph$1.prototype.isExtendParentsOnAdd=function(S){var I=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if(I&&S!=null&&this.layoutManager!=null){var L=this.model.getParent(S);if(L!=null){var D=this.layoutManager.getLayout(L);D!=null&&D.constructor==mxStackLayout&&(I=!1)}}return I},Graph$1.prototype.getPreferredSizeForCell=function(S,I,L){L=L??this.gridEnabled;var D=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return D!=null&&(D.width+=10,D.height+=4,L&&(D.width=this.snap(D.width),D.height=this.snap(D.height))),D},Graph$1.prototype.turnShapes=function(S,I){var L=this.getModel(),D=[];L.beginUpdate();try{for(var O=0;O<S.length;O++){var V=S[O];if(L.isEdge(V)){var j=L.getTerminal(V,!0),at=L.getTerminal(V,!1);L.setTerminal(V,at,!0),L.setTerminal(V,j,!1);var ot=L.getGeometry(V);if(ot!=null){ot=ot.clone(),ot.points!=null&&ot.points.reverse();var yt=ot.getTerminalPoint(!0),Lt=ot.getTerminalPoint(!1);ot.setTerminalPoint(yt,!1),ot.setTerminalPoint(Lt,!0),L.setGeometry(V,ot);var It=this.view.getState(V),Gt=this.view.getState(j),Yt=this.view.getState(at);if(It!=null){var ee=Gt!=null?this.getConnectionConstraint(It,Gt,!0):null,le=Yt!=null?this.getConnectionConstraint(It,Yt,!1):null;this.setConnectionConstraint(V,j,!0,le),this.setConnectionConstraint(V,at,!1,ee);var jt=mxUtils$1.getValue(It.style,mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING);this.setCellStyles(mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING,mxUtils$1.getValue(It.style,mxConstants$1.STYLE_TARGET_PERIMETER_SPACING),[V]),this.setCellStyles(mxConstants$1.STYLE_TARGET_PERIMETER_SPACING,jt,[V])}D.push(V)}}else if(L.isVertex(V)){var ot=this.getCellGeometry(V);if(ot!=null){if(!this.isTable(V)&&!this.isTableRow(V)&&!this.isTableCell(V)&&!this.isSwimlane(V)){ot=ot.clone(),ot.x+=ot.width/2-ot.height/2,ot.y+=ot.height/2-ot.width/2;var Zt=ot.width;ot.width=ot.height,ot.height=Zt,L.setGeometry(V,ot)}var Qt=this.view.getState(V);if(Qt!=null){var qt=[mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST,mxConstants$1.DIRECTION_NORTH],Vt=mxUtils$1.getValue(Qt.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST);this.setCellStyles(mxConstants$1.STYLE_DIRECTION,qt[mxUtils$1.mod(mxUtils$1.indexOf(qt,Vt)+(I?-1:1),qt.length)],[V])}D.push(V)}}}}finally{L.endUpdate()}return D},Graph$1.prototype.stencilHasPlaceholders=function(S){if(S!=null&&S.fgNode!=null)for(var I=S.fgNode.firstChild;I!=null;){if(I.nodeName=="text"&&I.getAttribute("placeholders")=="1")return!0;I=I.nextSibling}return!1};var c=Graph$1.prototype.processChange;Graph$1.prototype.processChange=function(S){if(S instanceof mxGeometryChange$1&&(this.isTableCell(S.cell)||this.isTableRow(S.cell))&&(S.previous==null&&S.geometry!=null||S.previous!=null&&!S.previous.equals(S.geometry))){var I=S.cell;this.isTableCell(I)&&(I=this.model.getParent(I)),this.isTableRow(I)&&(I=this.model.getParent(I));var L=this.view.getState(I);L!=null&&L.shape!=null&&(this.view.invalidate(I),L.shape.bounds=null)}c.apply(this,arguments),S instanceof mxValueChange$1&&S.cell!=null&&S.cell.value!=null&&typeof S.cell.value=="object"&&this.invalidateDescendantsWithPlaceholders(S.cell)},Graph$1.prototype.invalidateDescendantsWithPlaceholders=function(S){var I=this.model.getDescendants(S);if(I.length>0)for(var L=0;L<I.length;L++){var D=this.view.getState(I[L]);D!=null&&D.shape!=null&&D.shape.stencil!=null&&this.stencilHasPlaceholders(D.shape.stencil)?this.removeStateForCell(I[L]):this.isReplacePlaceholders(I[L])&&this.view.invalidate(I[L],!1,!1)}},Graph$1.prototype.replaceElement=function(S,I){for(var L=S.ownerDocument.createElement(I??"span"),D=Array.prototype.slice.call(S.attributes);attr=D.pop();)L.setAttribute(attr.nodeName,attr.nodeValue);L.innerHTML=S.innerHTML,S.parentNode.replaceChild(L,S)},Graph$1.prototype.processElements=function(S,I){if(S!=null)for(var L=S.getElementsByTagName("*"),D=0;D<L.length;D++)L[D]!=null&&I(L[D])},Graph$1.prototype.updateLabelElements=function(S,I,L){S=S??this.getSelectionCells();for(var D=document.createElement("div"),O=0;O<S.length;O++){var V=this.getCurrentCellStyle(S[O]);if(V!=null&&V.html=="1"){var j=this.convertValueToString(S[O]);if(j!=null&&j.length>0){D.innerHTML=Graph$1.sanitizeHtml(j);for(var at=D.getElementsByTagName(L??"*"),ot=0;ot<at.length;ot++)I(at[ot]);D.innerHTML!=j&&this.cellLabelChanged(S[O],D.innerHTML)}}}},Graph$1.prototype.cellLabelChanged=function(S,I,L){I=Graph$1.zapGremlins(I),this.model.beginUpdate();try{if(S.value!=null&&typeof S.value=="object"){if(this.isReplacePlaceholders(S)&&S.getAttribute("placeholder")!=null)for(var D=S.getAttribute("placeholder"),O=S;O!=null;){if(O==this.model.getRoot()||O.value!=null&&typeof O.value=="object"&&O.hasAttribute(D)){this.setAttributeForCell(O,D,I);break}O=this.model.getParent(O)}var V=S.value.cloneNode(!0);Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&V.hasAttribute("label_"+Graph$1.diagramLanguage)?V.setAttribute("label_"+Graph$1.diagramLanguage,I):V.setAttribute("label",I),I=V}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph$1.prototype.cellsRemoved=function(S){if(S!=null){for(var I=new mxDictionary$1,L=0;L<S.length;L++)I.put(S[L],!0);for(var D=[],L=0;L<S.length;L++){var O=this.model.getParent(S[L]);O!=null&&!I.get(O)&&(I.put(O,!0),D.push(O))}for(var L=0;L<D.length;L++){var V=this.view.getState(D[L]);if(V!=null&&(this.model.isEdge(V.cell)||this.model.isVertex(V.cell))&&this.isCellDeletable(V.cell)&&this.isTransparentState(V)){for(var j=!0,at=0;at<this.model.getChildCount(V.cell)&&j;at++)I.get(this.model.getChildAt(V.cell,at))||(j=!1);j&&S.push(V.cell)}}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph$1.prototype.removeCellsAfterUngroup=function(S){for(var I=[],L=0;L<S.length;L++)this.isCellDeletable(S[L])&&this.isTransparentState(this.view.getState(S[L]))&&I.push(S[L]);S=I,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph$1.prototype.setLinkForCell=function(S,I){this.setAttributeForCell(S,"link",I)},Graph$1.prototype.setTooltipForCell=function(S,I){var L="tooltip";Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&mxUtils$1.isNode(S.value)&&S.value.hasAttribute("tooltip_"+Graph$1.diagramLanguage)&&(L="tooltip_"+Graph$1.diagramLanguage),this.setAttributeForCell(S,L,I)},Graph$1.prototype.getAttributeForCell=function(S,I,L){var D=S.value!=null&&typeof S.value=="object"?S.value.getAttribute(I):null;return D??L},Graph$1.prototype.setAttributeForCell=function(S,I,L){var D=null;if(S.value!=null&&typeof S.value=="object")D=S.value.cloneNode(!0);else{var O=mxUtils$1.createXmlDocument();D=O.createElement("UserObject"),D.setAttribute("label",S.value||"")}L!=null?D.setAttribute(I,L):D.removeAttribute(I),this.model.setValue(S,D)},Graph$1.prototype.isTargetShape=function(S,I,L){for(var D=mxUtils$1.getValue(this.getCurrentCellStyle(S),mxConstants$1.STYLE_SHAPE,""),O=0;O<I.length;O++){var V=mxUtils$1.getValue(this.getCurrentCellStyle(I[O]),"targetShapes","").split(",");if(mxUtils$1.indexOf(V,D)>=0)return!0}return!1};var g=Graph$1.prototype.getDropTarget;Graph$1.prototype.getDropTarget=function(S,I,L,D){if(mxEvent$1.isAltDown(I))return null;for(var O=0;O<S.length;O++){var V=this.model.getParent(S[O]);if(this.model.isEdge(V)&&mxUtils$1.indexOf(S,V)<0)return null}for(var j=g.apply(this,arguments),at=!0,O=0;O<S.length&&at;O++)at=at&&this.isTableRow(S[O]);return at&&(this.isTableCell(j)&&(j=this.model.getParent(j)),this.isTableRow(j)&&(j=this.model.getParent(j)),this.isTable(j)||(j=null)),j},Graph$1.prototype.click=function(S){mxGraph.prototype.click.call(this,S),this.firstClickState=S.getState(),this.firstClickSource=S.getSource()},Graph$1.prototype.dblClick=function(S,I){this.isEnabled()&&(I=this.insertTextForEvent(S,I),mxGraph.prototype.dblClick.call(this,S,I))},Graph$1.prototype.insertTextForEvent=function(S,I){var L=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(S),mxEvent$1.getClientY(S));if(S!=null&&!this.model.isVertex(I)){var D=this.model.isEdge(I)?this.view.getState(I):null,O=mxEvent$1.getSource(S);this.firstClickState==D&&this.firstClickSource==O&&(D==null||D.text==null||D.text.node==null||D.text.boundingBox==null||!mxUtils$1.contains(D.text.boundingBox,L.x,L.y)&&!mxUtils$1.isAncestorNode(D.text.node,mxEvent$1.getSource(S)))&&(D==null&&!this.isCellLocked(this.getDefaultParent())||D!=null&&!this.isCellLocked(D.cell))&&(D!=null||mxClient$1.IS_SVG&&O==this.view.getCanvas().ownerSVGElement)&&(D==null&&(D=this.view.getState(this.getCellAt(L.x,L.y))),I=this.addText(L.x,L.y,D))}return I},Graph$1.prototype.getInsertPoint=function(){var S=this.getGridSize(),I=this.container.scrollLeft/this.view.scale-this.view.translate.x,L=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible){var D=this.getPageLayout(),O=this.getPageSize();I=Math.max(I,D.x*O.width),L=Math.max(L,D.y*O.height)}return new mxPoint$1(this.snap(I+S),this.snap(L+S))},Graph$1.prototype.getFreeInsertPoint=function(){var S=this.view,I=this.getGraphBounds(),L=this.getInsertPoint(),D=this.snap(Math.round(Math.max(L.x,I.x/S.scale-S.translate.x+(I.width==0?2*this.gridSize:0)))),O=this.snap(Math.round(Math.max(L.y,(I.y+I.height)/S.scale-S.translate.y+2*this.gridSize)));return new mxPoint$1(D,O)},Graph$1.prototype.getCenterInsertPoint=function(S){return S=S??new mxRectangle$1,mxUtils$1.hasScrollbars(this.container)?new mxPoint$1(this.snap(Math.round((this.container.scrollLeft+this.container.clientWidth/2)/this.view.scale-this.view.translate.x-S.width/2)),this.snap(Math.round((this.container.scrollTop+this.container.clientHeight/2)/this.view.scale-this.view.translate.y-S.height/2))):new mxPoint$1(this.snap(Math.round(this.container.clientWidth/2/this.view.scale-this.view.translate.x-S.width/2)),this.snap(Math.round(this.container.clientHeight/2/this.view.scale-this.view.translate.y-S.height/2)))},Graph$1.prototype.isMouseInsertPoint=function(){return!1},Graph$1.prototype.appendFontSize=function(S,I){return S=S??"",I!=null&&(S.length>0&&S.charAt(S.length-1)!=";"&&(S+=";"),S+="fontSize="+I+";"),S},Graph$1.prototype.addText=function(S,I,L){var D=new mxCell$2;D.value="Text",D.geometry=new mxGeometry$2(0,0,0,0),D.vertex=!0;var O="html=1;align=center;verticalAlign=middle;resizable=0;points=[];";if(L!=null&&this.model.isEdge(L.cell)){D.style="edgeLabel;"+this.appendFontSize(O,this.edgeFontSize),D.geometry.relative=!0,D.connectable=!1;var V=this.view.getRelativePoint(L,S,I);D.geometry.x=Math.round(V.x*1e4)/1e4,D.geometry.y=Math.round(V.y),D.geometry.offset=new mxPoint$1(0,0),V=this.view.getPoint(L,D.geometry);var j=this.view.scale;D.geometry.offset=new mxPoint$1(Math.round((S-V.x)/j),Math.round((I-V.y)/j))}else{var at=this.view.translate;D.style="text;"+this.appendFontSize(O,this.vertexFontSize),D.geometry.width=40,D.geometry.height=20,D.geometry.x=Math.round(S/this.view.scale)-at.x-(L!=null?L.origin.x:0),D.geometry.y=Math.round(I/this.view.scale)-at.y-(L!=null?L.origin.y:0),D.style+="autosize=1;"}this.getModel().beginUpdate();try{this.addCells([D],L!=null?L.cell:null),this.fireEvent(new mxEventObject$1("textInserted","cells",[D])),this.autoSizeCell(D)}finally{this.getModel().endUpdate()}return D},Graph$1.prototype.addClickHandler=function(S,I,L){var D=mxUtils$1.bind(this,function(){var ot=this.container.getElementsByTagName("a");if(ot!=null)for(var yt=0;yt<ot.length;yt++){var Lt=this.getAbsoluteUrl(ot[yt].getAttribute("href"));Lt!=null&&(ot[yt].setAttribute("rel",this.linkRelation),ot[yt].setAttribute("href",Lt),I!=null&&mxEvent$1.addGestureListeners(ot[yt],null,null,I))}});this.model.addListener(mxEvent$1.CHANGE,D),D();var O=this.container.style.cursor,V=this.getTolerance(),j=this,at={currentState:null,currentLink:null,currentTarget:null,highlight:S!=null&&S!=""&&S!=mxConstants$1.NONE?new mxCellHighlight$1(j,S,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(ot){var yt=ot.sourceState;if(yt==null||j.getLinkForCell(yt.cell)==null){var Lt=j.getCellAt(ot.getGraphX(),ot.getGraphY(),null,null,null,function(It,Gt,Yt){return j.getLinkForCell(It.cell)==null});yt=yt!=null&&!j.model.isAncestor(Lt,yt.cell)?null:j.view.getState(Lt)}yt!=this.currentState&&(this.currentState!=null&&this.clear(),this.currentState=yt,this.currentState!=null&&this.activate(this.currentState))},mouseDown:function(ot,yt){this.startX=yt.getGraphX(),this.startY=yt.getGraphY(),this.scrollLeft=j.container.scrollLeft,this.scrollTop=j.container.scrollTop,this.currentLink==null&&j.container.style.overflow=="auto"&&(j.container.style.cursor="move"),this.updateCurrentState(yt)},mouseMove:function(ot,yt){if(j.isMouseDown){if(this.currentLink!=null){var Lt=Math.abs(this.startX-yt.getGraphX()),It=Math.abs(this.startY-yt.getGraphY());(Lt>V||It>V)&&this.clear()}}else{for(var Gt=yt.getSource();Gt!=null&&Gt.nodeName.toLowerCase()!="a";)Gt=Gt.parentNode;if(Gt!=null)this.clear();else{if(j.tooltipHandler!=null&&this.currentLink!=null&&this.currentState!=null&&j.tooltipHandler.reset(yt,!0,this.currentState),this.currentState!=null&&(yt.getState()==this.currentState||yt.sourceState==null)&&j.intersects(this.currentState,yt.getGraphX(),yt.getGraphY()))return;this.updateCurrentState(yt)}}},mouseUp:function(ot,yt){for(var Lt=yt.getSource(),It=yt.getEvent(),Gt=Lt;Gt!=null&&Gt.nodeName.toLowerCase()!="a";)Gt=Gt.parentNode;if(Gt==null&&Math.abs(this.scrollLeft-j.container.scrollLeft)<V&&Math.abs(this.scrollTop-j.container.scrollTop)<V&&(yt.sourceState==null||!yt.isSource(yt.sourceState.control))&&((mxEvent$1.isLeftMouseButton(It)||mxEvent$1.isMiddleMouseButton(It))&&!mxEvent$1.isPopupTrigger(It)||mxEvent$1.isTouchEvent(It)))if(this.currentLink!=null){var Yt=j.isBlankLink(this.currentLink);if((this.currentLink.substring(0,5)==="data:"||!Yt)&&I!=null&&I(It,this.currentLink,this.currentState!=null?this.currentState.cell:null),!mxEvent$1.isConsumed(It)){var ee=this.currentTarget!=null?this.currentTarget:mxEvent$1.isMiddleMouseButton(It)?"_blank":Yt?j.linkTarget:"_top";j.openLink(this.currentLink,ee),yt.consume()}}else L!=null&&!yt.isConsumed()&&Math.abs(this.scrollLeft-j.container.scrollLeft)<V&&Math.abs(this.scrollTop-j.container.scrollTop)<V&&Math.abs(this.startX-yt.getGraphX())<V&&Math.abs(this.startY-yt.getGraphY())<V&&L(yt.getEvent());this.clear()},activate:function(ot){this.currentLink=j.getAbsoluteUrl(j.getLinkForCell(ot.cell)),this.currentLink!=null&&(this.currentTarget=j.getLinkTargetForCell(ot.cell),j.container.style.cursor="pointer",this.highlight!=null&&this.highlight.highlight(ot))},clear:function(){j.container!=null&&(j.container.style.cursor=O),this.currentTarget=null,this.currentState=null,this.currentLink=null,this.highlight!=null&&this.highlight.hide(),j.tooltipHandler!=null&&j.tooltipHandler.hide()}};j.click=function(ot){},j.addMouseListener(at),mxEvent$1.addListener(document,"mouseleave",function(ot){at.clear()})},Graph$1.prototype.duplicateCells=function(S,I){S=S??this.getSelectionCells(),I=I??!0;for(var L=0;L<S.length;L++)this.isTableCell(S[L])&&(S[L]=this.model.getParent(S[L]));S=this.model.getTopmostCells(S);var D=this.getModel(),O=this.gridSize,V=[];D.beginUpdate();try{for(var j=new Object,at=this.createCellLookup(S),ot=this.cloneCells(S,!1,j,!0),L=0;L<S.length;L++){var yt=D.getParent(S[L]);if(yt!=null){var Lt=this.moveCells([ot[L]],O,O,!1)[0];if(V.push(Lt),I)D.add(yt,ot[L]);else{var It=yt.getIndex(S[L]);D.add(yt,ot[L],It+1)}if(this.isTable(yt)){var Gt=this.getCellGeometry(ot[L]),Yt=this.getCellGeometry(yt);Gt!=null&&Yt!=null&&(Yt=Yt.clone(),Yt.height+=Gt.height,D.setGeometry(yt,Yt))}}else V.push(ot[L])}this.updateCustomLinks(this.createCellMapping(j,at),ot,this),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ADDED,"cells",ot))}finally{D.endUpdate()}return V},Graph$1.prototype.insertImage=function(S,I,L){if(S!=null&&this.cellEditor.textarea!=null){for(var D=this.cellEditor.textarea.getElementsByTagName("img"),O=[],V=0;V<D.length;V++)O.push(D[V]);document.execCommand("insertimage",!1,S);var j=this.cellEditor.textarea.getElementsByTagName("img");if(j.length==O.length+1){for(var V=j.length-1;V>=0;V--)if(V==0||j[V]!=O[V-1]){j[V].setAttribute("width",I),j[V].setAttribute("height",L);break}}}},Graph$1.prototype.insertLink=function(S){if(this.cellEditor.textarea!=null)if(S.length==0)document.execCommand("unlink",!1);else if(mxClient$1.IS_FF){for(var I=this.cellEditor.textarea.getElementsByTagName("a"),L=[],D=0;D<I.length;D++)L.push(I[D]);document.execCommand("createlink",!1,mxUtils$1.trim(S));var O=this.cellEditor.textarea.getElementsByTagName("a");if(O.length==L.length+1){for(var D=O.length-1;D>=0;D--)if(O[D]!=L[D-1]){for(var I=O[D].getElementsByTagName("a");I.length>0;){for(var V=I[0].parentNode;I[0].firstChild!=null;)V.insertBefore(I[0].firstChild,I[0]);V.removeChild(I[0])}break}}}else document.execCommand("createlink",!1,mxUtils$1.trim(S))},Graph$1.prototype.isCellResizable=function(S){var I=mxGraph.prototype.isCellResizable.apply(this,arguments),L=this.getCurrentCellStyle(S);return!this.isTableCell(S)&&!this.isTableRow(S)&&(I||mxUtils$1.getValue(L,mxConstants$1.STYLE_RESIZABLE,"1")!="0"&&L[mxConstants$1.STYLE_WHITE_SPACE]=="wrap")},Graph$1.prototype.distributeCells=function(S,I,L){if(I==null&&(I=this.getSelectionCells()),I!=null&&I.length>1){for(var D=[],O=null,V=null,j=0,at=0;at<I.length;at++)if(this.getModel().isVertex(I[at])){var ot=this.view.getState(I[at]);if(ot!=null){var yt=S?ot.getCenterX():ot.getCenterY();O=O!=null?Math.max(O,yt):yt,V=V!=null?Math.min(V,yt):yt,L&&(j+=S?ot.width:ot.height),D.push(ot)}}if(D.length>2){D.sort(function(jt,Zt){return S?jt.x-Zt.x:jt.y-Zt.y}),L&&(j-=S?D[0].width/2+D[D.length-1].width/2:D[0].height/2+D[D.length-1].height/2);var Lt=this.view.translate,It=this.view.scale;V=V/It-(S?Lt.x:Lt.y),O=O/It-(S?Lt.x:Lt.y),this.getModel().beginUpdate();try{for(var Gt=(O-V-j)/(D.length-1),Yt=V+(L?S?D[0].width/2:D[0].height/2:0),at=1;at<D.length-1;at++){var ee=this.view.getState(this.model.getParent(D[at].cell)),le=this.getCellGeometry(D[at].cell);Yt+=Gt,le!=null&&ee!=null&&(le=le.clone(),S?le.x=Math.round(Yt-(L?0:le.width/2))-ee.origin.x:le.y=Math.round(Yt-(L?0:le.height/2))-ee.origin.y,this.getModel().setGeometry(D[at].cell,le)),L&&(Yt+=S?D[at].width:D[at].height)}}finally{this.getModel().endUpdate()}}}return I},Graph$1.prototype.isCloneEvent=function(S){return mxClient$1.IS_MAC&&mxEvent$1.isMetaDown(S)||mxEvent$1.isControlDown(S)},Graph$1.prototype.createSvgImageExport=function(){var S=new mxImageExport;S.addCellData=function(L,D,O){if(D.setAttribute("data-cell-id",L.id),O)if(mxUtils$1.isNode(L.value))for(var V=0;V<L.value.attributes.length;V++){var j=L.value.attributes[V];D.setAttribute("data-cell-"+j.name,j.value)}else if(typeof L.value=="object")for(var at in L.value)D.setAttribute("data-cell-"+at,L.value[at]);else L.value!=null&&D.setAttribute("data-cell-value",L.value);return D};var I=S.visitStatesRecursive;return S.visitStatesRecursive=function(L,D,O){if(L!=null){var V=D.root,j=D.root.ownerDocument;D.root=this.addCellData(L.cell,j.createElementNS!=null?j.createElementNS(mxConstants$1.NS_SVG,"g"):j.createElement("g"),Editor$2.addSvgMetadata),V.appendChild(D.root),I.apply(this,arguments),D.root=V}},S.getLinkForCellState=mxUtils$1.bind(this,function(L,D){return this.getLinkForCell(L.cell)}),S.getTitleForCellState=mxUtils$1.bind(this,function(L,D){return Editor$2.convertHtmlToText(this.convertValueToTooltip(L.cell))}),S},Graph$1.prototype.parseBackgroundImage=function(S){var I=null;if(S!=null&&S.length>0){var L=JSON.parse(S);I=new mxImage(L.src,L.width,L.height)}return I},Graph$1.prototype.getBackgroundImageObject=function(S){return S},Graph$1.prototype.getSvg=function(S,I,L,D,O,V,j,at,ot,yt,Lt,It,Gt,Yt,ee,le){var jt=null;if(Yt!=null){jt=new mxDictionary$1;for(var Zt=0;Zt<Yt.length;Zt++)jt.put(Yt[Zt],!0)}var Qt=this.useCssTransforms,qt=this.enableFlowAnimation;this.enableFlowAnimation=!1,Qt&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{I=I??1,L=L??0,O=O??!0,V=V??!0,j=j??!0,yt=yt??!1;var Vt=Gt=="page"?this.view.getBackgroundPageBounds():V&&jt==null||D||Gt=="diagram"?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells()),Kt=this.backgroundImage,xe=this.view.translate,he=this.view.scale;if(Gt=="diagram"&&Kt!=null&&Kt.width!=null&&Kt.height!=null&&(Vt=mxRectangle$1.fromRectangle(Vt),Vt.add(new mxRectangle$1((xe.x+Kt.x)*he,(xe.y+Kt.y)*he,Kt.width*he,Kt.height*he))),Vt==null)throw Error(mxResources$1.get("drawingEmpty"));var ve=S;ve!=null&&It=="dark"&&Editor$2.enableCssDarkMode&&(ve=Graph$1.invertColor(S));var ae=I/he,pe=Math.max(1,Math.ceil(Vt.width*ae)+2*L)+(yt&&L==0?5:0),me=Math.max(1,Math.ceil(Vt.height*ae)+2*L)+(yt&&L==0?5:0),ge=O?-.5:0,Ce=Graph$1.createSvgNode(ge,ge,pe,me,ve),Se=Ce.ownerDocument;if(S!=null){var $e=mxUtils$1.createElementNs(Se,mxConstants$1.NS_SVG,"rect");$e.setAttribute("fill",S),$e.setAttribute("width","100%"),$e.setAttribute("height","100%"),$e.setAttribute("x","0"),$e.setAttribute("y","0"),Ce.appendChild($e)}var Me=mxUtils$1.createElementNs(Se,mxConstants$1.NS_SVG,"g");Ce.appendChild(Me);var ce=this.createSvgCanvas(Me);ce.foOffset=O?-.5:0,ce.textOffset=O?-.5:0,ce.imageOffset=O?-.5:0,ce.translate(Math.floor(L/I-Vt.x/he),Math.floor(L/I-Vt.y/he));var Ae=document.createElement("div"),Le=ce.getAlternateText;if(ce.getAlternateText=function(Ut,oe,ue,de,m,E,$,f,v,b,y,G,M){if(E!=null&&this.state.fontSize>0)try{mxUtils$1.isNode(E)?E=E.innerText:(Ae.innerHTML=E,E=mxUtils$1.extractTextWithWhitespace(Ae.childNodes));for(var rt=Math.ceil(2*de/this.state.fontSize),F=[],z=0,J=0;(rt==0||z<rt)&&J<E.length;){var W=E.charCodeAt(J);if(W==10||W==13){if(z>0)break}else F.push(E.charAt(J)),W<255&&z++;J++}return F.length<E.length&&E.length-F.length>1&&(E=mxUtils$1.trim(F.join(""))+"..."),E}catch{return Le.apply(this,arguments)}else return Le.apply(this,arguments)},Kt!=null&&Kt.width!=null&&Kt.height!=null){var Te=he/I,ge=new mxRectangle$1((Kt.x+xe.x)*Te,(Kt.y+xe.y)*Te,Kt.width*Te,Kt.height*Te);mxUtils$1.intersects(Vt,ge)&&ce.image(Kt.x+xe.x,Kt.y+xe.y,Kt.width,Kt.height,Kt.src,!0)}ce.scale(ae),ce.textEnabled=j,at=at??this.createSvgImageExport();var Pe=at.getLinkForCellState;at.getLinkForCellState=function(Ut,oe){var ue=Ut.view.graph.getAbsoluteUrl(Pe.apply(this,arguments));return ue!=null&&!Ut.view.graph.isCustomLink(ue)?ue:null},at.getLinkTargetForCellState=function(Ut,oe){return Ut.view.graph.getLinkTargetForCell(Ut.cell)};var De=at.drawCellState,Ft=null,ht=mxUtils$1.bind(this,function(){if(Ft==null){Ft="ge-flow-animation-"+Editor$2.guid();var Ut=Se.createElementNS!=null?Se.createElementNS(mxConstants$1.NS_SVG,"style"):Se.createElement("style");Ut.innerHTML=this.createFlowAnimationCss(Ft),Se.getElementsByTagName("defs")[0].appendChild(Ut)}return Ft});at.drawCellState=function(Ut,oe){for(var ue=Ut.view.graph,de=jt!=null?jt.get(Ut.cell):ue.isCellSelected(Ut.cell),m=ue.model.getParent(Ut.cell);(!V||jt!=null)&&!de&&m!=null;)de=jt!=null?jt.get(m):ue.isCellSelected(m),m=ue.model.getParent(m);if(Ut.shape!=null)try{var E=Ut.shape.isFlowAnimationEnabled,$=Ut.shape.addFlowAnimationToShape;Ut.shape.isFlowAnimationEnabled=function(){return qt&&ue.model.isEdge(Ut.cell)&&mxUtils$1.getValue(Ut.style,"flowAnimation","0")=="1"},Ut.shape.addFlowAnimationToShape=function(){ue.addFlowAnimationToNode(this.getFlowAnimationPath(),Ut.style,I,ht())},(V&&jt==null||de)&&(ue.view.redrawEnumerationState(Ut),De.apply(this,arguments),this.doDrawShape(Ut.secondLabel,oe))}finally{Ut.shape.isFlowAnimationEnabled=E,Ut.shape.addFlowAnimationToShape=$}};var Ht=this.view.currentRoot!=null?this.view.currentRoot:this.model.root;return at.drawState(this.getView().getState(Ht),ce),this.addForeignObjectWarning(ce,Ce),le?this.disableSvgLinks(Ce):this.updateSvgLinks(Ce,ot,!0),Ce}finally{this.enableFlowAnimation=qt,Qt&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph$1.prototype.addForeignObjectWarning=function(S,I){if(urlParams$1["svg-warning"]!="0"&&I.getElementsByTagName("foreignObject").length>0){var L=S.createElement("switch"),D=S.createElement("g");D.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var O=S.createElement("a");O.setAttribute("transform","translate(0,-5)"),O.setAttributeNS==null||I.ownerDocument!=document&&document.documentMode==null?(O.setAttribute("xlink:href",Graph$1.foreignObjectWarningLink),O.setAttribute("target","_blank")):(O.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",Graph$1.foreignObjectWarningLink),O.setAttributeNS(mxConstants$1.NS_XLINK,"target","_blank"));var V=S.createElement("text");V.setAttribute("text-anchor","middle"),V.setAttribute("font-size","10px"),V.setAttribute("x","50%"),V.setAttribute("y","100%"),mxUtils$1.write(V,Graph$1.foreignObjectWarningText),L.appendChild(D),O.appendChild(V),L.appendChild(O),I.appendChild(L)}},Graph$1.prototype.disableSvgLinks=function(S,I){for(var L=S.getElementsByTagName("a"),D=0;D<L.length;D++){var O=L[D].getAttribute("href");O==null&&(O=L[D].getAttribute("xlink:href")),O!=null&&(L[D].style.pointerEvents="none",L[D].setAttribute("href","")),I&&I(L[D])}},Graph$1.prototype.updateSvgLinks=function(S,I,L){for(var D=S.getElementsByTagName("a"),O=0;O<D.length;O++)if(D[O].getAttribute("target")==null){var V=D[O].getAttribute("href");V==null&&(V=D[O].getAttribute("xlink:href")),V!=null&&(I!=null&&/^https?:\/\//.test(V)?D[O].setAttribute("target",I):L&&this.isCustomLink(V)&&D[O].setAttribute("href","javascript:void(0);"))}},Graph$1.prototype.createSvgCanvas=function(S){var I=new mxSvgCanvas2D$1(S);return I.minStrokeWidth=this.cellRenderer.minSvgStrokeWidth,I.pointerEvents=!0,I},Graph$1.prototype.getSelectedTextBlocks=function(){function S(at){if(at.firstChild)return at.firstChild;for(;at;){if(at.nextSibling)return at.nextSibling;at=at.parentNode}}function I(at){var ot=at.startContainer,yt=at.endContainer,Lt=at.commonAncestorContainer,It=[],Gt;for(Gt=ot.parentNode;Gt&&(It.push(Gt),Gt!=Lt);Gt=Gt.parentNode);for(It.reverse(),Gt=ot;Gt&&(It.push(Gt),Gt!=yt);Gt=S(Gt));return It}var L=[this.getSelectedElement()];if(window.getSelection){var D=window.getSelection();D.getRangeAt&&D.rangeCount&&(L=I(D.getRangeAt(0)))}for(var O=[],V=0;V<L.length;V++)for(var j=L[V];this.cellEditor.textarea!=null&&this.cellEditor.textarea.contains(j)&&j!=this.cellEditor.textarea&&j.parentNode!=null;)if(j.nodeType==mxConstants$1.NODETYPE_ELEMENT&&mxUtils$1.getCurrentStyle(j).display=="block"){mxUtils$1.indexOf(O,j)<0&&O.push(j);break}else j=j.parentNode;return O},Graph$1.prototype.getSelectedElement=function(){var S=null;if(window.getSelection){var I=window.getSelection();if(I.getRangeAt&&I.rangeCount){var L=I.getRangeAt(0);S=L.commonAncestorContainer}}else document.selection&&(S=document.selection.createRange().parentElement());return S},Graph$1.prototype.getSelectedEditingElement=function(){for(var S=this.getSelectedElement();S!=null&&S.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)S=S.parentNode;return S!=null&&S==this.cellEditor.textarea&&this.cellEditor.textarea.children.length==1&&this.cellEditor.textarea.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(S=this.cellEditor.textarea.firstChild),S},Graph$1.prototype.getParentByName=function(S,I,L){for(;S!=null;){if(S.nodeName==I)return S;if(S==L)return null;S=S.parentNode}return S},Graph$1.prototype.getParentByNames=function(S,I,L){for(;S!=null;){if(mxUtils$1.indexOf(I,S.nodeName)>=0)return S;if(S==L)return null;S=S.parentNode}return S},Graph$1.prototype.selectNode=function(S){var I=null;if(window.getSelection){if(I=window.getSelection(),I.getRangeAt&&I.rangeCount){var L=document.createRange();L.selectNode(S),I.removeAllRanges(),I.addRange(L)}}else if((I=document.selection)&&I.type!="Control"){var D=I.createRange();D.collapse(!0);var L=I.createRange();L.setEndPoint("StartToStart",D),L.select()}},Graph$1.prototype.flipEdgePoints=function(S,I,L){var D=this.getCellGeometry(S);if(D!=null){if(D=D.clone(),D.points!=null)for(var O=0;O<D.points.length;O++)I?D.points[O].x=L+(L-D.points[O].x):D.points[O].y=L+(L-D.points[O].y);var V=function(j){j!=null&&(I?j.x=L+(L-j.x):j.y=L+(L-j.y))};V(D.getTerminalPoint(!0)),V(D.getTerminalPoint(!1)),this.model.setGeometry(S,D)}},Graph$1.prototype.flipChildren=function(S,I,L){this.model.beginUpdate();try{for(var D=this.model.getChildCount(S),O=0;O<D;O++){var V=this.model.getChildAt(S,O);if(this.model.isEdge(V))this.flipEdgePoints(V,I,L);else{var j=this.getCellGeometry(V);j!=null&&(j=j.clone(),I?j.x=L+(L-j.x-j.width):j.y=L+(L-j.y-j.height),this.model.setGeometry(V,j))}}}finally{this.model.endUpdate()}},Graph$1.prototype.flipCells=function(S,I){this.model.beginUpdate();try{S=this.model.getTopmostCells(S);for(var L=[],D=0;D<S.length;D++)if(this.model.isEdge(S[D])){var O=this.view.getState(S[D]);O!=null&&this.flipEdgePoints(S[D],I,(I?O.getCenterX():O.getCenterY())/this.view.scale-(I?O.origin.x:O.origin.y)-(I?this.view.translate.x:this.view.translate.y))}else{var V=this.getCellGeometry(S[D]);V!=null&&this.flipChildren(S[D],I,I?V.getCenterX()-V.x:V.getCenterY()-V.y),L.push(S[D])}this.toggleCellStyles(I?mxConstants$1.STYLE_FLIPH:mxConstants$1.STYLE_FLIPV,!1,L)}finally{this.model.endUpdate()}},Graph$1.prototype.deleteCells=function(S,I){var L=null;if(S!=null&&S.length>0){this.model.beginUpdate();try{for(var D=0;D<S.length;D++){var O=this.model.getParent(S[D]);if(this.isTable(O)){var V=this.getCellGeometry(S[D]),j=this.getCellGeometry(O);V!=null&&j!=null&&(j=j.clone(),j.height-=V.height,this.model.setGeometry(O,j))}}var at=this.selectParentAfterDelete?this.model.getParents(S):null;this.removeCells(S,I)}finally{this.model.endUpdate()}if(at!=null){L=[];for(var D=0;D<at.length;D++)this.model.contains(at[D])&&(this.model.isVertex(at[D])||this.model.isEdge(at[D]))&&L.push(at[D])}}return L},Graph$1.prototype.insertTableColumn=function(S,I){var L=this.getModel();L.beginUpdate();try{var D=S,O=0;if(this.isTableCell(S)){var V=L.getParent(S);D=L.getParent(V),O=mxUtils$1.indexOf(L.getChildCells(V,!0),S)}else this.isTableRow(S)?D=L.getParent(S):S=L.getChildCells(D,!0)[0],I||(O=L.getChildCells(S,!0).length-1);for(var j=L.getChildCells(D,!0),at=Graph$1.minTableColumnWidth,ot=0;ot<j.length;ot++){var yt=L.getChildCells(j[ot],!0)[O],Lt=L.cloneCell(yt,!1);Lt==null&&(Lt=this.createVertex());var It=this.getCellGeometry(Lt);if(Lt.value=null,Lt.style=mxUtils$1.setStyle(mxUtils$1.setStyle(Lt.style,"rowspan",null),"colspan",null),It!=null){It.alternateBounds!=null&&(It.width=It.alternateBounds.width,It.height=It.alternateBounds.height,It.alternateBounds=null),at=It.width;var Gt=this.getCellGeometry(j[ot]);Gt!=null&&(It.height=Gt.height)}L.add(j[ot],Lt,O+(I?0:1))}var Yt=this.getCellGeometry(D);Yt!=null&&(Yt=Yt.clone(),Yt.width+=at,L.setGeometry(D,Yt))}finally{L.endUpdate()}},Graph$1.prototype.deleteLane=function(S){var I=this.getModel();I.beginUpdate();try{var L=null,D=S,O=this.getCurrentCellStyle(D);O.childLayout=="stackLayout"?L=D:L=I.getParent(D);var V=I.getChildCells(L,!0);V.length==0?I.remove(L):(L==D&&(D=V[V.length-1]),I.remove(D))}finally{I.endUpdate()}},Graph$1.prototype.insertLane=function(S,I){var L=this.getModel();L.beginUpdate();try{var D=null,O=S,V=this.getCurrentCellStyle(O);if(V.childLayout=="stackLayout"){D=O;var j=L.getChildCells(D,!0);O=j[I?0:j.length-1]}else D=L.getParent(O);var at=D.getIndex(O);O=L.cloneCell(O,!1),O.value=null,L.add(D,O,at+(I?0:1))}finally{L.endUpdate()}},Graph$1.prototype.insertTableRow=function(S,I){var L=this.getModel();L.beginUpdate();try{var D=S,O=S;if(this.isTableCell(S))O=L.getParent(S),D=L.getParent(O);else if(this.isTableRow(S))D=L.getParent(S);else{var V=L.getChildCells(D,!0);O=V[I?0:V.length-1]}var j=L.getChildCells(O,!0),at=D.getIndex(O);O=L.cloneCell(O,!1),O.value=null;var ot=this.getCellGeometry(O);if(ot!=null){for(var yt=0;yt<j.length;yt++){var S=L.cloneCell(j[yt],!1);S.value=null,S.style=mxUtils$1.setStyle(mxUtils$1.setStyle(S.style,"rowspan",null),"colspan",null);var Lt=this.getCellGeometry(S);Lt!=null&&(Lt.alternateBounds!=null&&(Lt.width=Lt.alternateBounds.width,Lt.height=Lt.alternateBounds.height,Lt.alternateBounds=null),Lt.height=ot.height),O.insert(S)}L.add(D,O,at+(I?0:1));var It=this.getCellGeometry(D);It!=null&&(It=It.clone(),It.height+=ot.height,L.setGeometry(D,It))}}finally{L.endUpdate()}},Graph$1.prototype.deleteTableColumn=function(S){var I=this.getModel();I.beginUpdate();try{var L=S,D=S;this.isTableCell(S)&&(D=I.getParent(S)),this.isTableRow(D)&&(L=I.getParent(D));var O=I.getChildCells(L,!0);if(O.length==0)I.remove(L);else{this.isTableRow(D)||(D=O[0]);var V=I.getChildCells(D,!0);if(V.length<=1)I.remove(L);else{var j=V.length-1;this.isTableCell(S)&&(j=mxUtils$1.indexOf(V,S));for(var at=0,ot=0;ot<O.length;ot++){var yt=I.getChildCells(O[ot],!0)[j];I.remove(yt);var Lt=this.getCellGeometry(yt);Lt!=null&&(at=Math.max(at,Lt.width))}var It=this.getCellGeometry(L);It!=null&&(It=It.clone(),It.width-=at,I.setGeometry(L,It))}}}finally{I.endUpdate()}},Graph$1.prototype.deleteTableRow=function(S){var I=this.getModel();I.beginUpdate();try{var L=S,D=S;this.isTableCell(S)&&(D=I.getParent(S),S=D),this.isTableRow(S)&&(L=I.getParent(D));var O=I.getChildCells(L,!0);if(O.length<=1)I.remove(L);else{this.isTableRow(D)||(D=O[O.length-1]),I.remove(D);var V=0,j=this.getCellGeometry(D);j!=null&&(V=j.height);var at=this.getCellGeometry(L);at!=null&&(at=at.clone(),at.height-=V,I.setGeometry(L,at))}}finally{I.endUpdate()}},Graph$1.prototype.insertRow=function(S,I){for(var L=S.tBodies[0],D=L.rows[0].cells,O=0,V=0;V<D.length;V++){var j=D[V].getAttribute("colspan");O+=j!=null?parseInt(j):1}for(var at=L.insertRow(I),V=0;V<O;V++)mxUtils$1.br(at.insertCell(-1));return at.cells[0]},Graph$1.prototype.deleteRow=function(S,I){S.tBodies[0].deleteRow(I)},Graph$1.prototype.insertColumn=function(S,I){var L=S.tHead;if(L!=null)for(var D=0;D<L.rows.length;D++){var O=document.createElement("th");L.rows[D].appendChild(O),mxUtils$1.br(O)}for(var V=S.tBodies[0],j=0;j<V.rows.length;j++){var at=V.rows[j].insertCell(I);mxUtils$1.br(at)}return V.rows[0].cells[I>=0?I:V.rows[0].cells.length-1]},Graph$1.prototype.deleteColumn=function(S,I){if(I>=0)for(var L=S.tBodies[0],D=L.rows,O=0;O<D.length;O++)D[O].cells.length>I&&D[O].deleteCell(I)},Graph$1.prototype.pasteHtmlAtCaret=function(S){var I,L;if(window.getSelection){if(I=window.getSelection(),I.getRangeAt&&I.rangeCount){L=I.getRangeAt(0),L.deleteContents();var D=document.createElement("div");D.innerHTML=S;for(var O=document.createDocumentFragment(),V;V=D.firstChild;)lastNode=O.appendChild(V);L.insertNode(O)}}else(I=document.selection)&&I.type!="Control"&&I.createRange().pasteHTML(S)},Graph$1.prototype.createLinkForHint=function(S,I,L){S=S??"javascript:void(0);",(I==null||I.length==0)&&(this.isCustomLink(S)?I=this.getLinkTitle(S):I=S);function D(V,j){return V.length>j&&(V=V.substring(0,Math.round(j/2))+"..."+V.substring(V.length-Math.round(j/4))),V}var O=document.createElement("a");return O.setAttribute("rel",this.linkRelation),O.setAttribute("href",this.getAbsoluteUrl(S)),O.setAttribute("title",D(this.isCustomLink(S)?this.getLinkTitle(S):S,80)),this.linkTarget!=null&&O.setAttribute("target",this.linkTarget),mxUtils$1.write(O,D(I,40)),this.isCustomLink(S)&&mxEvent$1.addListener(O,"click",mxUtils$1.bind(this,function(V){this.customLinkClicked(S,L),mxEvent$1.consume(V)})),O},Graph$1.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return this.graph.connectionHandler.first!=null},this.addListener(mxEvent$1.START_EDITING,function(V,j){this.popupMenuHandler.hideMenu()});var S=this.updateMouseEvent;this.updateMouseEvent=function(V){if(V=S.apply(this,arguments),mxEvent$1.isTouchEvent(V.getEvent())&&V.getState()==null){var j=this.getCellAt(V.graphX,V.graphY);j!=null&&this.isSwimlane(j)&&this.hitsSwimlaneContent(j,V.graphX,V.graphY)?j=null:(V.state=this.view.getState(j),V.state!=null&&V.state.shape!=null&&(this.container.style.cursor=V.state.shape.node.style.cursor))}return V.getState()==null&&this.isEnabled()&&(this.container.style.cursor="default"),V};var I=!1,L=!1,D=!1,O=this.fireMouseEvent;this.fireMouseEvent=function(V,j,at){V==mxEvent$1.MOUSE_DOWN&&(j=this.updateMouseEvent(j),I=this.isCellSelected(j.getCell()),L=this.isSelectionEmpty(),D=this.popupMenuHandler.isMenuShowing()),O.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils$1.bind(this,function(V,j){if(this.freehand!=null&&!this.freehand.isDrawing()){var at=mxEvent$1.isMouseEvent(j.getEvent());this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(j.getState()==null||!j.isSource(j.getState().control))&&(this.popupMenuHandler.popupTrigger||!D&&!at&&(L&&j.getCell()==null&&this.isSelectionEmpty()||I&&this.isCellSelected(j.getCell())));var ot=!I||at?null:mxUtils$1.bind(this,function(yt){window.setTimeout(mxUtils$1.bind(this,function(){if(!this.isEditing()){var Lt=mxUtils$1.getScrollOrigin();this.popupMenuHandler.popup(j.getX()+Lt.x+1,j.getY()+Lt.y+1,yt,j.getEvent())}}),300)});mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,[V,j,ot])}})},mxCellEditor.prototype.isContentEditing=function(){var S=this.graph.view.getState(this.editingCell);return S!=null&&S.style.html==1},mxCellEditor.prototype.isTableSelected=function(){return this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)!=null},mxCellEditor.prototype.isTextSelected=function(){var S="";return window.getSelection?S=window.getSelection():document.getSelection?S=document.getSelection():document.selection&&(S=document.selection.createRange().text),S!=""},mxCellEditor.prototype.insertTab=function(S){var I=this.textarea,L=I.ownerDocument.defaultView,D=L.getSelection(),O=D.getRangeAt(0),V=Graph$1.createTabNode(S);O.insertNode(V),O.setStartAfter(V),O.setEndAfter(V),D.removeAllRanges(),D.addRange(O)},mxCellEditor.prototype.alignText=function(S,I){var L=this.graph.getView().getState(this.editingCell);if(L!=null){var D=mxUtils$1.getValue(L.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION),O=D!=null&&D.substring(0,9)=="vertical-",V=I!=null&&mxEvent$1.isShiftDown(I);if(V||window.getSelection!=null&&window.getSelection().containsNode!=null){var j=!0;this.graph.processElements(this.textarea,function(at){V||O||window.getSelection().containsNode(at,!0)?(at.removeAttribute("align"),at.style.textAlign=null):j=!1}),(j||O)&&this.graph.cellEditor.setAlign(S)}O||document.execCommand("justify"+S.toLowerCase(),!1,null)}},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var S=window.getSelection();if(S.getRangeAt&&S.rangeCount){for(var I=[],L=0,D=S.rangeCount;L<D;++L)I.push(S.getRangeAt(L));return I}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(S){try{if(S)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var I=0,L=S.length;I<L;++I)sel.addRange(S[I])}else document.selection&&S.select&&S.select()}catch{}};var x=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(S){S.text!=null&&(S.text.replaceLinefeeds=mxUtils$1.getValue(S.style,"nl2Br","1")!="0"),x.apply(this,arguments)};var C=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(S,I){this.isKeepFocusEvent(S)||!mxEvent$1.isAltDown(S.getEvent())?C.apply(this,arguments):this.reset()},mxGuide$1.prototype.createGuideShape=function(S){var I=new mxPolyline$1([],mxConstants$1.GUIDE_COLOR,mxConstants$1.GUIDE_STROKEWIDTH);return I},mxCellEditor.prototype.escapeCancelsEditing=!1;var T=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(S,I){S=this.graph.getStartEditingCell(S,I),T.apply(this,arguments);var L=this.graph.view.getState(S);L!=null&&L.style.html==1?L.style.md==1?this.textarea.className="mxCellEditor geContentEditable markdown-body":this.textarea.className="mxCellEditor geContentEditable":this.textarea.className="mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(S)},mxCellEditor.prototype.toggleViewMode=function(){var S=this.graph.view.getState(this.editingCell);if(S!=null){var I=S!=null&&mxUtils$1.getValue(S.style,"nl2Br","1")!="0",L=this.saveSelection();if(this.codeViewMode){var D=mxUtils$1.extractTextWithWhitespace(this.textarea.childNodes);D.length>0&&D.charAt(D.length-1)==`
`&&(D=D.substring(0,D.length-1)),D=Graph$1.sanitizeHtml(I?D.replace(/\n/g,"<br/>"):D,!0),this.textarea.className="mxCellEditor geContentEditable";var O=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE),V=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY),j=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT),at=(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD,ot=(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC,yt=[];(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&yt.push("underline"),(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&yt.push("line-through"),this.textarea.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?Math.round(O*mxConstants$1.LINE_HEIGHT)+"px":mxConstants$1.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(O)+"px",this.textarea.style.textDecoration=yt.join(" "),this.textarea.style.fontWeight=at?"bold":"normal",this.textarea.style.fontStyle=ot?"italic":"",this.textarea.style.fontFamily=V,this.textarea.style.textAlign=j,this.textarea.style.padding="0px",this.textarea.innerHTML!=D&&(this.textarea.innerHTML=D,this.textarea.innerHTML.length==0&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0)),this.codeViewMode=!1}else{this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerText="");var D=mxUtils$1.htmlEntities(this.textarea.innerHTML);document.documentMode!=8&&(D=mxUtils$1.replaceTrailingNewlines(D,"<div><br></div>")),D=Graph$1.sanitizeHtml(I?D.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):D,!0),this.textarea.className="mxCellEditor mxPlainTextEditor";var O=mxConstants$1.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=mxConstants$1.ABSOLUTE_LINE_HEIGHT?Math.round(O*mxConstants$1.LINE_HEIGHT)+"px":mxConstants$1.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(O)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants$1.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.width="",this.textarea.style.padding="2px",this.textarea.innerHTML!=D&&(this.textarea.innerHTML=D),this.codeViewMode=!0}this.textarea.focus(),this.switchSelectionState!=null&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=L,this.resize()}};var A=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(S,I){if(this.textarea!=null){var S=this.graph.getView().getState(this.editingCell);if(this.codeViewMode&&S!=null){var L=S.view.scale;if(this.bounds=mxRectangle$1.fromRectangle(S),this.bounds.width==0&&this.bounds.height==0){this.bounds.width=160*L,this.bounds.height=60*L;var D=S.text!=null?S.text.margin:null;D==null&&(D=mxUtils$1.getAlignmentAsPoint(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER),mxUtils$1.getValue(S.style,mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE))),this.bounds.x+=D.x*this.bounds.width,this.bounds.y+=D.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/L)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/L)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/L)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*L),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/L)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*L),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxUtils$1.setPrefixedStyle(this.textarea.style,"transform","scale("+L+","+L+")")}else this.textarea.style.height="",this.textarea.style.overflow="",A.apply(this,arguments)}};const R=mxCellEditor.prototype.getInitialValue;mxCellEditor.prototype.getInitialValue=function(S,I){if(mxUtils$1.getValue(S.style,"html","0")=="0")return R.apply(this,arguments);if(mxUtils$1.getValue(S.style,"md","0")=="1")return S.text.markdown;var L=this.graph.getEditingValue(S.cell,I);return mxUtils$1.getValue(S.style,"nl2Br","1")=="1"&&(L=L.replace(/\n/g,"<br/>")),L=Graph$1.sanitizeHtml(L,!0),L};const _=mxCellEditor.prototype.getCurrentValue;mxCellEditor.prototype.getCurrentValue=function(S){if(mxUtils$1.getValue(S.style,"html","0")=="0")return _.apply(this,arguments);var I=Graph$1.sanitizeHtml(this.textarea.innerHTML,!0);return mxUtils$1.getValue(S.style,"nl2Br","1")=="1"?(I=I.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"),I.length>0&&(I.substring(I.length-5)=="<br/>"||I.substring(I.length-4)=="<br>")&&(I=I.substring(0,I.lastIndexOf("<br"))+"<div><br/></div>")):I=I.replace(/\r\n/g,"").replace(/\n/g,""),I};var N=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(S){this.codeViewMode&&this.toggleViewMode(),N.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch{}};var H=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(S,I){this.graph.getModel().beginUpdate();try{H.apply(this,arguments),I==""&&this.graph.isCellDeletable(S.cell)&&this.graph.model.getChildCount(S.cell)==0&&this.graph.isTransparentState(S)&&this.graph.removeCells([S.cell],!1)}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(S){var I=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,null);return I==mxConstants$1.NONE&&(I=null),I},mxCellEditor.prototype.getBorderColor=function(S){var I=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_LABEL_BORDERCOLOR,null);return I==mxConstants$1.NONE&&(I=null),I},mxCellEditor.prototype.getMinimumSize=function(S){var I=this.graph.getView().scale;return new mxRectangle$1(0,0,S.text==null?30:S.text.size*I+20,30)};const k=mxGraphHandler.prototype.isValidDropTarget;mxGraphHandler.prototype.isValidDropTarget=function(S,I){return k.apply(this,arguments)&&!mxEvent$1.isAltDown(I.getEvent)};function K(){var S=document.createElement("div");return S.className="geHint",S.style.whiteSpace="nowrap",S.style.position="absolute",S}function Q(S,I){switch(I){case mxConstants$1.POINTS:return S;case mxConstants$1.MILLIMETERS:return(S/mxConstants$1.PIXELS_PER_MM).toFixed(1);case mxConstants$1.METERS:return(S/(mxConstants$1.PIXELS_PER_MM*1e3)).toFixed(4);case mxConstants$1.INCHES:return(S/mxConstants$1.PIXELS_PER_INCH).toFixed(3)}}mxGraphView.prototype.formatUnitText=function(S){return S&&Q(S,this.unit)},mxGraphHandler.prototype.updateHint=function(S){if(this.pBounds!=null&&(this.shape!=null||this.livePreviewActive)){this.hint==null&&(this.hint=K(),this.graph.container.appendChild(this.hint));var I=this.graph.view.translate,L=this.graph.view.scale,D=this.roundLength((this.bounds.x+this.currentDx)/L-I.x),O=this.roundLength((this.bounds.y+this.currentDy)/L-I.y),V=this.graph.view.unit;this.hint.innerHTML=Q(D,V)+", "+Q(O,V),this.hint.style.left=this.pBounds.x+this.currentDx+Math.round((this.pBounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.pBounds.y+this.currentDy+this.pBounds.height+Editor$2.hintOffset+"px"}},mxGraphHandler.prototype.removeHint=function(){this.hint!=null&&(this.hint.parentNode!=null&&this.hint.parentNode.removeChild(this.hint),this.hint=null)};var nt=mxStackLayout.prototype.resizeCell;mxStackLayout.prototype.resizeCell=function(S,I){nt.apply(this,arguments);var L=this.graph.getCellStyle(S);if(L.childLayout==null){var D=this.graph.model.getParent(S),O=D!=null?this.graph.getCellGeometry(D):null;if(O!=null&&(L=this.graph.getCellStyle(D),L.childLayout=="stackLayout")){var V=parseFloat(mxUtils$1.getValue(L,"stackBorder",mxStackLayout.prototype.border)),j=mxUtils$1.getValue(L,"horizontalStack","1")=="1",at=this.graph.getActualStartSize(D);O=O.clone(),j?O.height=I.height+at.y+at.height+2*V:O.width=I.width+at.x+at.width+2*V,this.graph.model.setGeometry(D,O)}}};var dt=mxSelectionCellsHandler.prototype.getHandledSelectionCells;mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){var S=dt.apply(this,arguments),I=new mxDictionary$1,L=this.graph.model,D=[];function O(at){I.get(at)||(I.put(at,!0),D.push(at))}for(var V=0;V<S.length;V++){var j=S[V];this.graph.isTableCell(j)?O(L.getParent(L.getParent(j))):this.graph.isTableRow(j)&&O(L.getParent(j)),O(j)}return D};var mt=mxConnectionHandler.prototype.isStartEvent;mxConnectionHandler.prototype.isStartEvent=function(S){return mt.apply(this,arguments)&&!mxEvent$1.isControlDown(S.getEvent())&&!mxEvent$1.isShiftDown(S.getEvent())};var xt=mxVertexHandler$1.prototype.isGhostPreview;mxVertexHandler$1.prototype.isGhostPreview=function(){return xt.apply(this,arguments)&&!this.graph.isTable(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isSwimlane(this.state.cell)};var Y=mxVertexHandler$1.prototype.createParentHighlightShape;mxVertexHandler$1.prototype.createParentHighlightShape=function(S){var I=Y.apply(this,arguments);return I.stroke="#C0C0C0",I.strokewidth=1,I};var B=mxEdgeHandler$1.prototype.createParentHighlightShape;mxEdgeHandler$1.prototype.createParentHighlightShape=function(S){var I=B.apply(this,arguments);return I.stroke="#C0C0C0",I.strokewidth=1,I},mxVertexHandler$1.prototype.rotationHandleVSpacing=-12,mxVertexHandler$1.prototype.getRotationHandlePosition=function(){var S=this.getHandlePadding();return new mxPoint$1(this.bounds.x+this.bounds.width-this.rotationHandleVSpacing+S.x/2,this.bounds.y+this.rotationHandleVSpacing-S.y/2)},mxVertexHandler$1.prototype.isRecursiveResize=function(S,I){return this.graph.isRecursiveVertexResize(S)&&!mxEvent$1.isAltDown(I.getEvent())},mxVertexHandler$1.prototype.isCenteredEvent=function(S,I){return mxEvent$1.isControlDown(I.getEvent())||mxEvent$1.isMetaDown(I.getEvent())};var U=mxVertexHandler$1.prototype.isRotationHandleVisible;mxVertexHandler$1.prototype.isRotationHandleVisible=function(){return U.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTable(this.state.cell)},mxVertexHandler$1.prototype.getSizerBounds=function(){return this.graph.isTableCell(this.state.cell)?this.graph.view.getState(this.graph.model.getParent(this.graph.model.getParent(this.state.cell))):this.bounds};var lt=mxVertexHandler$1.prototype.isParentHighlightVisible;mxVertexHandler$1.prototype.isParentHighlightVisible=function(){return lt.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)};var tt=mxVertexHandler$1.prototype.isCustomHandleVisible;mxVertexHandler$1.prototype.isCustomHandleVisible=function(S){return S.tableHandle||tt.apply(this,arguments)&&(!this.graph.isTable(this.state.cell)||this.graph.isCellSelected(this.state.cell))},mxVertexHandler$1.prototype.getSelectionBorderInset=function(){var S=0;return this.graph.isTableRow(this.state.cell)?S=1:this.graph.isTableCell(this.state.cell)&&(S=2),S};var st=mxVertexHandler$1.prototype.getSelectionBorderBounds;mxVertexHandler$1.prototype.getSelectionBorderBounds=function(){return st.apply(this,arguments).grow(-this.getSelectionBorderInset())};var ft=null,$t=mxVertexHandler$1.prototype.createCustomHandles;mxVertexHandler$1.prototype.createCustomHandles=function(){ft==null&&(ft=mxCellRenderer.defaultShapes.tableLine);var S=$t.apply(this,arguments);if(this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell)){let le=function(jt,Zt,Qt){for(var qt=[],Vt=0;Vt<jt.length;Vt++){var Kt=jt[Vt];qt.push(Kt==null?null:new mxPoint$1((at+Kt.x+Zt)*O,(ot+Kt.y+Qt)*O))}return qt};var ee=le,I=this,L=this.graph,D=L.model,O=L.view.scale,V=this.state,j=this.selectionBorder,at=this.state.origin.x+L.view.translate.x,ot=this.state.origin.y+L.view.translate.y;S==null&&(S=[]);var yt=L.view.getCellStates(D.getChildCells(this.state.cell,!0));if(yt.length>0){for(var Lt=D.getChildCells(yt[0].cell,!0),It=L.getTableLines(this.state.cell,!1,!0),Gt=L.getTableLines(this.state.cell,!0,!1),Yt=0;Yt<yt.length;Yt++)mxUtils$1.bind(this,function(jt){var Zt=yt[jt],Qt=null;if(L.isCellMovable(Zt.cell)){var qt=jt<yt.length-1?yt[jt+1]:null,Vt=qt!=null?L.getCellGeometry(qt.cell):null,Kt=Vt!=null&&Vt.alternateBounds!=null?Vt.alternateBounds:Vt,xe=Gt[jt]!=null?new ft(Gt[jt],mxConstants$1.NONE,1):new mxLine(new mxRectangle$1,mxConstants$1.NONE,1,!1);xe.isDashed=j.isDashed,xe.svgStrokeTolerance++,Qt=new mxHandle$1(Zt,"row-resize",null,xe),Qt.tableHandle=!0;var he=0;Qt.shape.node.parentNode.insertBefore(Qt.shape.node,Qt.shape.node.parentNode.firstChild),Qt.redraw=function(){if(this.shape!=null){if(this.shape.stroke=he==0?mxConstants$1.NONE:j.stroke,this.shape.constructor==ft)this.shape.line=le(Gt[jt],0,he),this.shape.updateBoundsFromLine();else{var ae=L.getActualStartSize(V.cell,!0);this.shape.bounds.height=1,this.shape.bounds.y=this.state.y+this.state.height+he*O,this.shape.bounds.x=V.x+(jt==yt.length-1?0:ae.x*O),this.shape.bounds.width=V.width-(jt==yt.length-1?0:ae.width+ae.x+O)}this.shape.redraw()}};var ve=!1;Qt.setPosition=function(ae,pe,me){he=Math.max(Graph$1.minTableRowHeight-ae.height,pe.y-ae.y-ae.height),ve=mxEvent$1.isShiftDown(me.getEvent()),Kt!=null&&ve&&(he=Math.min(he,Kt.height-Graph$1.minTableRowHeight))},Qt.execute=function(ae){if(he!=0)L.setTableRowHeight(this.state.cell,he,!ve);else if(!I.blockDelayedSelection){var pe=L.getCellAt(ae.getGraphX(),ae.getGraphY())||V.cell;L.graphHandler.selectCellForEvent(pe,ae)}he=0},Qt.reset=function(){he=0}}S.push(Qt)})(Yt);for(var Yt=0;Yt<Lt.length;Yt++)mxUtils$1.bind(this,function(Zt){var Qt=L.view.getState(Lt[Zt]),qt=L.getCellGeometry(Lt[Zt]),Vt=qt.alternateBounds!=null?qt.alternateBounds:qt;Qt==null&&(Qt=new mxCellState$1(L.view,Lt[Zt],L.getCellStyle(Lt[Zt])),Qt.x=V.x+qt.x*O,Qt.y=V.y+qt.y*O,Qt.width=Vt.width*O,Qt.height=Vt.height*O,Qt.updateCachedBounds());var Kt=Zt<Lt.length-1?Lt[Zt+1]:null,xe=Kt!=null?L.getCellGeometry(Kt):null,he=xe!=null&&xe.alternateBounds!=null?xe.alternateBounds:xe,ve=It[Zt]!=null?new ft(It[Zt],mxConstants$1.NONE,1):new mxLine(new mxRectangle$1,mxConstants$1.NONE,1,!0);ve.isDashed=j.isDashed,ve.svgStrokeTolerance++;var ae=new mxHandle$1(Qt,"col-resize",null,ve);ae.tableHandle=!0;var pe=0;ae.shape.node.parentNode.insertBefore(ae.shape.node,ae.shape.node.parentNode.firstChild),ae.redraw=function(){if(this.shape!=null){if(this.shape.stroke=pe==0?mxConstants$1.NONE:j.stroke,this.shape.constructor==ft)this.shape.line=le(It[Zt],pe,0),this.shape.updateBoundsFromLine();else{var ge=L.getActualStartSize(V.cell,!0);this.shape.bounds.width=1,this.shape.bounds.x=this.state.x+(Vt.width+pe)*O,this.shape.bounds.y=V.y+(Zt==Lt.length-1?0:ge.y*O),this.shape.bounds.height=V.height-(Zt==Lt.length-1?0:(ge.height+ge.y)*O)}this.shape.redraw()}};var me=!1;ae.setPosition=function(ge,Ce,Se){pe=Math.max(Graph$1.minTableColumnWidth-Vt.width,Ce.x-ge.x-Vt.width),me=mxEvent$1.isShiftDown(Se.getEvent()),he!=null&&!me&&(pe=Math.min(pe,he.width-Graph$1.minTableColumnWidth))},ae.execute=function(ge){if(pe!=0)L.setTableColumnWidth(this.state.cell,pe,me);else if(!I.blockDelayedSelection){var Ce=L.getCellAt(ge.getGraphX(),ge.getGraphY())||V.cell;L.graphHandler.selectCellForEvent(Ce,ge)}pe=0},ae.positionChanged=function(){},ae.reset=function(){pe=0},S.push(ae)})(Yt)}}return S!=null?S.reverse():null};var Ct=mxVertexHandler$1.prototype.setHandlesVisible;mxVertexHandler$1.prototype.setHandlesVisible=function(S){if(Ct.apply(this,arguments),this.moveHandles!=null)for(var I=0;I<this.moveHandles.length;I++)this.moveHandles[I]!=null&&(this.moveHandles[I].node.style.visibility=S?"":"hidden");if(this.cornerHandles!=null)for(var I=0;I<this.cornerHandles.length;I++)this.cornerHandles[I].node.style.visibility=S?"":"hidden"},mxVertexHandler$1.prototype.isMoveHandlesVisible=function(){return this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell)},mxVertexHandler$1.prototype.refreshMoveHandles=function(){var S=this.isMoveHandlesVisible();if(S&&this.moveHandles==null?this.moveHandles=this.createMoveHandles():!S&&this.moveHandles!=null&&this.destroyMoveHandles(),S&&this.moveHandles==null){for(var I=0;I<this.moveHandles.length;I++)this.moveHandles[I]!=null&&this.moveHandles[I].parentNode.removeChild(this.moveHandles[I]);this.moveHandles=null}},mxVertexHandler$1.prototype.createMoveHandles=function(){for(var S=this.graph,I=S.model,L=[],D=0;D<I.getChildCount(this.state.cell);D++)mxUtils$1.bind(this,function(O){if(O!=null&&I.isVertex(O.cell)&&S.isCellMovable(O.cell)){var V=new mxRectangle$1(0,0,this.rowHandleImage.width,this.rowHandleImage.height),j=new mxImageShape$1(V,this.rowHandleImage.src);j.rowState=O,j.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,j.init(this.graph.getView().getOverlayPane()),j.node.style.cursor="move",mxEvent$1.addGestureListeners(j.node,mxUtils$1.bind(this,function(at){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),(this.graph.isToggleEvent(at)||!this.graph.isCellSelected(O.cell))&&this.graph.selectCellForEvent(O.cell,at),mxEvent$1.isPopupTrigger(at)||(this.graph.graphHandler.start(this.state.cell,mxEvent$1.getClientX(at),mxEvent$1.getClientY(at),this.graph.getSelectionCells()),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent$1.isMouseEvent(at),this.graph.isMouseDown=!0),mxEvent$1.consume(at)}),null,mxUtils$1.bind(this,function(at){mxEvent$1.isPopupTrigger(at)&&(this.graph.popupMenuHandler.popup(mxEvent$1.getClientX(at),mxEvent$1.getClientY(at),O.cell,at),mxEvent$1.consume(at))})),L.push(j)}else L.push(null)})(this.graph.view.getState(I.getChildAt(this.state.cell,D)));return L},mxVertexHandler$1.prototype.destroyMoveHandles=function(){if(this.moveHandles!=null){for(var S=0;S<this.moveHandles.length;S++)this.moveHandles[S]!=null&&this.moveHandles[S].destroy();this.moveHandles=null}},mxVertexHandler$1.prototype.destroyCornerHandles=function(){if(this.cornerHandles!=null){for(var S=0;S<this.cornerHandles.length;S++)this.cornerHandles[S]!=null&&this.cornerHandles[S].node!=null&&this.cornerHandles[S].node.parentNode!=null&&this.cornerHandles[S].node.parentNode.removeChild(this.cornerHandles[S].node);this.cornerHandles=null}};var pt=mxVertexHandler$1.prototype.refresh;mxVertexHandler$1.prototype.refresh=function(){if(pt.apply(this,arguments),this.destroyMoveHandles(),this.destroyCornerHandles(),this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell))this.refreshMoveHandles();else if(this.graph.getSelectionCount()==1&&this.graph.isCellMovable(this.state.cell)&&(this.graph.isTableCell(this.state.cell)||this.graph.isTableRow(this.state.cell))){this.cornerHandles=[];for(var S=0;S<4;S++){var I=new mxRectangleShape$1(new mxRectangle$1(0,0,6,6),"#ffffff",mxConstants$1.HANDLE_STROKECOLOR);I.dialect=mxConstants$1.DIALECT_SVG,I.init(this.graph.view.getOverlayPane()),this.cornerHandles.push(I)}}this.graph.isTable(this.state.cell)&&this.graph.isCellMovable(this.state.cell)&&this.refreshMoveHandles();var L=this.graph.getLinkForCell(this.state.cell),D=this.graph.getLinksForState(this.state);this.updateLinkHint(L,D)};var ct=mxVertexHandler$1.prototype.getHandlePadding;mxVertexHandler$1.prototype.getHandlePadding=function(){var S=new mxPoint$1(0,0),I=this.tolerance,L=this.state.style.shape;mxCellRenderer.defaultShapes[L]==null&&mxStencilRegistry$1.getStencil(L)==null&&(L=mxConstants$1.SHAPE_RECTANGLE);var D=this.graph.isTable(this.state.cell)||this.graph.cellEditor.getEditingCell()==this.state.cell;if(!D&&this.customHandles!=null){for(var O=0;O<this.customHandles.length;O++)if(this.customHandles[O]!=null&&this.customHandles[O].shape!=null&&this.customHandles[O].shape.bounds!=null){var V=this.customHandles[O].shape.bounds,j=V.getCenterX(),at=V.getCenterY();if(Math.abs(this.state.x-j)<V.width/2||Math.abs(this.state.y-at)<V.height/2||Math.abs(this.state.x+this.state.width-j)<V.width/2||Math.abs(this.state.y+this.state.height-at)<V.height/2){D=!0;break}}}return D&&this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null?(I/=2,this.graph.isTable(this.state.cell)&&(I+=7),S.x=this.sizers[0].bounds.width+I,S.y=this.sizers[0].bounds.height+I):S=ct.apply(this,arguments),S},mxVertexHandler$1.prototype.updateHint=function(S){if(this.index!=mxEvent$1.LABEL_HANDLE){if(this.hint==null&&(this.hint=K(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent$1.ROTATION_HANDLE)this.hint.innerHTML=this.currentAlpha+"&deg;";else{var I=this.state.view.scale,L=this.state.view.unit;this.hint.innerHTML=Q(this.roundLength(this.bounds.width/I),L)+" x "+Q(this.roundLength(this.bounds.height/I),L)}var D=this.currentAlpha!=null?this.currentAlpha:this.state.style[mxConstants$1.STYLE_ROTATION]||"0",O=mxUtils$1.getBoundingBox(this.bounds,D);O==null&&(O=this.bounds),this.hint.style.left=O.x+Math.round((O.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=O.y+O.height+Editor$2.hintOffset+"px",this.linkHint!=null&&(this.linkHint.style.display="none")}},mxVertexHandler$1.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),this.linkHint!=null&&(this.linkHint.style.display="")};var Mt=mxEdgeHandler$1.prototype.refresh;mxEdgeHandler$1.prototype.refresh=function(){Mt.apply(this,arguments);var S=this.graph.getLinkForCell(this.state.cell),I=this.graph.getLinksForState(this.state);this.updateLinkHint(S,I)};var bt=mxEdgeHandler$1.prototype.mouseMove;mxEdgeHandler$1.prototype.mouseMove=function(S,I){bt.apply(this,arguments),this.linkHint!=null&&this.linkHint.style.display!="none"&&this.graph.graphHandler!=null&&this.graph.graphHandler.first!=null&&(this.linkHint.style.display="none")};var Ot=mxEdgeHandler$1.prototype.mouseUp;mxEdgeHandler$1.prototype.mouseUp=function(S,I){Ot.apply(this,arguments),this.linkHint!=null&&this.linkHint.style.display=="none"&&this.graph.getSelectionCount()==1&&(this.linkHint.style.display="")},mxEdgeHandler$1.prototype.updateHint=function(S,I,L){this.hint==null&&(this.hint=K(),this.state.view.graph.container.appendChild(this.hint));var D=this.graph.view.translate,O=this.graph.view.scale,V=this.roundLength(I.x/O-D.x),j=this.roundLength(I.y/O-D.y),at=this.graph.view.unit;if(this.hint.innerHTML=Q(V,at)+", "+Q(j,at),this.hint.style.visibility="visible",L!=null&&(L.view.updateEdgeBounds(L),this.hint.innerHTML+=" ("+(at==mxConstants$1.POINTS?Math.round(L.length/O):Q(L.length/O,at))+")"),this.isSource||this.isTarget)if(this.constraintHandler!=null&&this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null){var ot=this.constraintHandler.currentConstraint.point;this.hint.innerHTML="["+Math.round(ot.x*100)+"%, "+Math.round(ot.y*100)+"%]"}else this.marker.hasValidState()&&(this.hint.style.visibility="hidden");this.hint.style.left=Math.round(S.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(S.getGraphY(),I.y)+Editor$2.hintOffset+"px",this.linkHint!=null&&(this.linkHint.style.display="none")},Graph$1.prototype.expandedImage=Graph$1.createSvgImage(9,9,'<defs><linearGradient id="grad1" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="30%" style="stop-color:#f0f0f0;" /><stop offset="100%" style="stop-color:#AFB0B6;" /></linearGradient></defs><rect x="0" y="0" width="9" height="9" stroke="#8A94A5" fill="url(#grad1)" stroke-width="2"/><path d="M 2 4.5 L 7 4.5 z" stroke="#000"/>'),Graph$1.prototype.collapsedImage=Graph$1.createSvgImage(9,9,'<defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="30%" style="stop-color:#f0f0f0;" /><stop offset="100%" style="stop-color:#AFB0B6;" /></linearGradient></defs><rect x="0" y="0" width="9" height="9" stroke="#8A94A5" fill="url(#grad1)" stroke-width="2"/><path d="M 4.5 2 L 4.5 7 M 2 4.5 L 7 4.5 z" stroke="#000"/>'),mxEdgeHandler$1.prototype.removeHint=mxVertexHandler$1.prototype.removeHint,HoverIcons$1.prototype.mainHandle=Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'),HoverIcons$1.prototype.endMainHandle=Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="6" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'),HoverIcons$1.prototype.secondaryHandle=Graph$1.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'),HoverIcons$1.prototype.fixedHandle=Graph$1.createSvgImage(22,22,'<circle cx="11" cy="11" r="6" stroke="#fff" fill="#01bd22"/><path d="m 8 8 L 14 14M 8 14 L 14 8" stroke="#fff"/>'),HoverIcons$1.prototype.endFixedHandle=Graph$1.createSvgImage(22,22,'<circle cx="11" cy="11" r="7" stroke="#fff" fill="#01bd22"/><path d="m 8 8 L 14 14M 8 14 L 14 8" stroke="#fff"/>'),HoverIcons$1.prototype.terminalHandle=Graph$1.createSvgImage(22,22,'<circle cx="11" cy="11" r="6" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/><circle cx="11" cy="11" r="3" stroke="#fff" fill="transparent"/>'),HoverIcons$1.prototype.endTerminalHandle=Graph$1.createSvgImage(22,22,'<circle cx="11" cy="11" r="7" stroke="#fff" fill="'+HoverIcons$1.prototype.arrowFill+'"/><circle cx="11" cy="11" r="3" stroke="#fff" fill="transparent"/>'),HoverIcons$1.prototype.rotationHandle=Graph$1.createSvgImage(16,16,'<path stroke="'+HoverIcons$1.prototype.arrowFill+'" fill="'+HoverIcons$1.prototype.arrowFill+'" d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/>',24,24),mxConstraintHandler.prototype.pointImage=Graph$1.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke-width="2" style="stroke-opacity:0.4" stroke="#ffffff"/><path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons$1.prototype.arrowFill+'"/>'),mxVertexHandler$1.TABLE_HANDLE_COLOR="#fca000",mxVertexHandler$1.prototype.handleImage=HoverIcons$1.prototype.mainHandle,mxVertexHandler$1.prototype.secondaryHandleImage=HoverIcons$1.prototype.secondaryHandle,mxVertexHandler$1.prototype.rowHandleImage=Graph$1.createSvgImage(14,12,'<rect x="2" y="2" width="10" height="3" stroke-width="1" stroke="#ffffff" fill="'+HoverIcons$1.prototype.arrowFill+'"/><rect x="2" y="7" width="10" height="3" stroke-width="1" stroke="#ffffff" fill="'+HoverIcons$1.prototype.arrowFill+'"/>'),mxEdgeHandler$1.prototype.handleImage=HoverIcons$1.prototype.mainHandle,mxEdgeHandler$1.prototype.endHandleImage=HoverIcons$1.prototype.endMainHandle,mxEdgeHandler$1.prototype.terminalHandleImage=HoverIcons$1.prototype.terminalHandle,mxEdgeHandler$1.prototype.endTerminalHandleImage=HoverIcons$1.prototype.endTerminalHandle,mxEdgeHandler$1.prototype.fixedHandleImage=HoverIcons$1.prototype.fixedHandle,mxEdgeHandler$1.prototype.endFixedHandleImage=HoverIcons$1.prototype.endFixedHandle,mxEdgeHandler$1.prototype.labelHandleImage=HoverIcons$1.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons$1.prototype.mainHandle,Sidebar!=null&&(Sidebar.prototype.triangleUp=HoverIcons$1.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons$1.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons$1.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons$1.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons$1.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons$1.prototype.roundDrop),mxVertexHandler$1.prototype.rotationEnabled=!0,mxVertexHandler$1.prototype.manageSizers=!0,mxVertexHandler$1.prototype.livePreview=!0,mxGraphHandler.prototype.maxLivePreview=16,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight$1.prototype.keepOnTop=!0,mxVertexHandler$1.prototype.parentHighlightEnabled=!0,mxEdgeHandler$1.prototype.parentHighlightEnabled=!0,mxEdgeHandler$1.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler$1.prototype.straightRemoveEnabled=!0,mxEdgeHandler$1.prototype.virtualBendsEnabled=!0,mxEdgeHandler$1.prototype.mergeRemoveEnabled=!0,mxEdgeHandler$1.prototype.manageLabelHandle=!0,mxEdgeHandler$1.prototype.outlineConnect=!0,mxEdgeHandler$1.prototype.isAddVirtualBendEvent=function(S){return!mxEvent$1.isShiftDown(S.getEvent())},mxEdgeHandler$1.prototype.isCustomHandleEvent=function(S){return!mxEvent$1.isShiftDown(S.getEvent())},Graph$1.touchStyle?((mxClient$1.IS_TOUCH||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(mxShape$1.prototype.svgStrokeTolerance=18,mxVertexHandler$1.prototype.tolerance=12,mxEdgeHandler$1.prototype.tolerance=12,Graph$1.prototype.tolerance=12,mxVertexHandler$1.prototype.rotationHandleVSpacing=-16,mxConstraintHandler.prototype.getTolerance=function(S){return mxEvent$1.isMouseEvent(S.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(S){var I=S.getEvent();return S.getState()==null&&!mxEvent$1.isMouseEvent(I)||mxEvent$1.isPopupTrigger(I)&&(S.getState()==null||mxEvent$1.isControlDown(I)||mxEvent$1.isShiftDown(I))}):mxPanningHandler.prototype.isPanningTrigger=function(S){var I=S.getEvent();return mxEvent$1.isLeftMouseButton(I)&&(this.useLeftButtonForPanning&&S.getState()==null||mxEvent$1.isControlDown(I)&&!mxEvent$1.isShiftDown(I))||this.usePopupTrigger&&mxEvent$1.isPopupTrigger(I)},mxRubberband.prototype.isSpaceEvent=function(S){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&(mxEvent$1.isControlDown(S.getEvent())||mxEvent$1.isMetaDown(S.getEvent()))&&mxEvent$1.isShiftDown(S.getEvent())&&mxEvent$1.isAltDown(S.getEvent())},mxRubberband.prototype.cancelled=!1,mxRubberband.prototype.cancel=function(){this.isActive()&&(this.cancelled=!0,this.reset())},mxRubberband.prototype.mouseUp=function(S,I){if(this.cancelled)this.cancelled=!1,I.consume();else{var L=this.div!=null&&this.div.style.display!="none",D=null,O=null,V=null,j=null;if(this.first!=null&&this.currentX!=null&&this.currentY!=null&&(D=this.first.x,O=this.first.y,V=(this.currentX-D)/this.graph.view.scale,j=(this.currentY-O)/this.graph.view.scale,mxEvent$1.isAltDown(I.getEvent())||(V=this.graph.snap(V),j=this.graph.snap(j),this.graph.isGridEnabled()||(Math.abs(V)<this.graph.tolerance&&(V=0),Math.abs(j)<this.graph.tolerance&&(j=0)))),this.reset(),L){if(this.isSpaceEvent(I)){this.graph.model.beginUpdate();try{for(var at=this.graph.getCellsBeyond(D,O,this.graph.getDefaultParent(),!0,!0),ot=0;ot<at.length;ot++)if(this.graph.isCellMovable(at[ot])){var yt=this.graph.view.getState(at[ot]),Lt=this.graph.getCellGeometry(at[ot]);yt!=null&&Lt!=null&&(Lt=Lt.clone(),Lt.translate(V,j),this.graph.model.setGeometry(at[ot],Lt))}}finally{this.graph.model.endUpdate()}}else{var It=new mxRectangle$1(this.x,this.y,this.width,this.height);this.graph.selectRegion(It,I.getEvent())}I.consume()}}},mxRubberband.prototype.mouseMove=function(S,I){if(!I.isConsumed()&&this.first!=null){var L=mxUtils$1.getScrollOrigin(this.graph.container),D=mxUtils$1.getOffset(this.graph.container);L.x-=D.x,L.y-=D.y;var O=I.getX()+L.x,V=I.getY()+L.y,j=this.first.x-O,at=this.first.y-V,ot=this.graph.tolerance;if(this.div!=null||Math.abs(j)>ot||Math.abs(at)>ot){if(this.div==null&&(this.div=this.createShape()),mxUtils$1.clearSelection(),this.update(O,V),this.isSpaceEvent(I)){var yt=this.x+this.width,Lt=this.y+this.height,It=this.graph.view.scale;mxEvent$1.isAltDown(I.getEvent())||(this.width=this.graph.snap(this.width/It)*It,this.height=this.graph.snap(this.height/It)*It,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=yt-this.width),this.y<this.first.y&&(this.y=Lt-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",this.secondDiv==null&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"}else this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",this.secondDiv!=null&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null);I.consume()}}};var gt=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){this.secondDiv!=null&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),gt.apply(this,arguments)};var Tt=new Date().getTime(),vt=0,Pt=mxEdgeHandler$1.prototype.updatePreviewState;mxEdgeHandler$1.prototype.updatePreviewState=function(S,I,L,D){Pt.apply(this,arguments),L!=this.currentTerminalState?(Tt=new Date().getTime(),vt=0):vt=new Date().getTime()-Tt,this.currentTerminalState=L};var Dt=mxEdgeHandler$1.prototype.isOutlineConnectEvent;mxEdgeHandler$1.prototype.isOutlineConnectEvent=function(S){return mxEvent$1.isShiftDown(S.getEvent())&&mxEvent$1.isAltDown(S.getEvent())?!1:this.currentTerminalState!=null&&S.getState()==this.currentTerminalState&&vt>2e3||(this.currentTerminalState==null||mxUtils$1.getValue(this.currentTerminalState.style,"outlineConnect","1")!="0")&&Dt.apply(this,arguments)},mxEdgeHandler$1.prototype.createHandleShape=function(S,I,L){var D=S!=null&&S==0,O=this.state.getVisibleTerminalState(D),V=S!=null&&(S==0||S>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler$1&&S==2)?this.graph.getConnectionConstraint(this.state,O,D):null,j=V!=null?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(D),V):null,at=j!=null?L?this.endFixedHandleImage:this.fixedHandleImage:V!=null&&O!=null?L?this.endTerminalHandleImage:this.terminalHandleImage:L?this.endHandleImage:this.handleImage;if(at!=null){var ot=new mxImageShape$1(new mxRectangle$1(0,0,at.width,at.height),at.src);return ot.preserveImageAspect=!1,ot}else{var yt=mxConstants$1.HANDLE_SIZE;return this.preferHtml&&(yt-=1),new mxRectangleShape$1(new mxRectangle$1(0,0,yt,yt),mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}};var zt=mxVertexHandler$1.prototype.createSizerShape;mxVertexHandler$1.prototype.createSizerShape=function(S,I,L,D){return D=I==mxEvent$1.ROTATION_HANDLE?HoverIcons$1.prototype.rotationHandle:I==mxEvent$1.LABEL_HANDLE?this.secondaryHandleImage:D,zt.apply(this,arguments)};var Rt=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(S){if(S!=null&&S.length==1){var I=this.graph.getModel(),L=I.getParent(S[0]),D=this.graph.getCellGeometry(S[0]);if(I.isEdge(L)&&D!=null&&D.relative){var O=this.graph.view.getState(S[0]);if(O!=null&&O.width<2&&O.height<2&&O.text!=null&&O.text.boundingBox!=null)return mxRectangle$1.fromRectangle(O.text.boundingBox)}}return Rt.apply(this,arguments)};var Nt=mxGraphHandler.prototype.getGuideStates;mxGraphHandler.prototype.getGuideStates=function(){for(var S=Nt.apply(this,arguments),I=[],L=0;L<S.length;L++)mxUtils$1.getValue(S[L].style,"part","0")!="1"&&I.push(S[L]);return I};var Bt=mxVertexHandler$1.prototype.getSelectionBounds;mxVertexHandler$1.prototype.getSelectionBounds=function(S){var I=this.graph.getModel(),L=I.getParent(S.cell),D=this.graph.getCellGeometry(S.cell);if(I.isEdge(L)&&D!=null&&D.relative&&S.width<2&&S.height<2&&S.text!=null&&S.text.boundingBox!=null){var O=S.text.unrotatedBoundingBox||S.text.boundingBox;return new mxRectangle$1(Math.round(O.x),Math.round(O.y),Math.round(O.width),Math.round(O.height))}else return Bt.apply(this,arguments)};var kt=mxVertexHandler$1.prototype.mouseDown;mxVertexHandler$1.prototype.mouseDown=function(S,I){var L=this.graph.getModel(),D=L.getParent(this.state.cell),O=this.graph.getCellGeometry(this.state.cell),V=this.getHandleForEvent(I);(V==mxEvent$1.ROTATION_HANDLE||!L.isEdge(D)||O==null||!O.relative||this.state==null||this.state.width>=2||this.state.height>=2)&&kt.apply(this,arguments)},mxVertexHandler$1.prototype.rotateClick=function(){var S=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE),I=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE);if(this.state.view.graph.model.isVertex(this.state.cell)&&S==mxConstants$1.NONE&&I==mxConstants$1.NONE){var L=mxUtils$1.mod(mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_ROTATION,0)+90,360);this.state.view.graph.setCellStyles(mxConstants$1.STYLE_ROTATION,L,[this.state.cell])}else this.state.view.graph.turnShapes([this.state.cell])};var Xt=mxVertexHandler$1.prototype.mouseMove;mxVertexHandler$1.prototype.mouseMove=function(S,I){Xt.apply(this,arguments),this.graph.graphHandler.first!=null&&(this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display="none"),this.linkHint!=null&&this.linkHint.style.display!="none"&&(this.linkHint.style.display="none"))};var ie=mxVertexHandler$1.prototype.mouseUp;mxVertexHandler$1.prototype.mouseUp=function(S,I){ie.apply(this,arguments),this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display=this.graph.getSelectionCount()==1?"":"none"),this.linkHint!=null&&this.linkHint.style.display=="none"&&this.graph.getSelectionCount()==1&&(this.linkHint.style.display=""),this.blockDelayedSelection=null},mxVertexHandler$1.prototype.updateLinkHint=function(S,I){try{if(S==null&&(I==null||I.length==0))this.linkHint!=null&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(S!=null||I!=null&&I.length>0){var L=document.createElement("img");L.className="geAdaptiveAsset",L.setAttribute("src",Editor$2.editImage),L.setAttribute("title",mxResources$1.get("editLink")),L.setAttribute("width","14"),L.setAttribute("height","14"),L.style.paddingLeft="8px",L.style.marginLeft="auto",L.style.marginBottom="-1px",L.style.cursor="pointer";var D=L.cloneNode(!0);if(D.setAttribute("src",Editor$2.trashImage),D.setAttribute("title",mxResources$1.get("removeIt",[mxResources$1.get("link")])),D.style.paddingLeft="4px",D.style.marginLeft="0",this.linkHint==null&&(this.linkHint=K(),mxUtils$1.setPrefixedStyle(this.linkHint.style,"transform","translate(-50%,0)"),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint),mxEvent$1.addListener(this.linkHint,"mouseenter",mxUtils$1.bind(this,function(){this.graph.tooltipHandler.hide()}))),this.linkHint.innerText="",S!=null){var O=document.createElement("div");if(O.style.display="flex",O.style.alignItems="center",O.appendChild(this.graph.createLinkForHint(S,null,this.state.cell)),this.linkHint.appendChild(O),this.graph.isEnabled()&&typeof this.graph.editLink=="function"&&!this.graph.isCellLocked(this.state.cell)){var V=L.cloneNode(!0);O.appendChild(V),mxEvent$1.addListener(V,"click",mxUtils$1.bind(this,function(ot){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent$1.consume(ot)}));var j=D.cloneNode(!0);O.appendChild(j),mxEvent$1.addListener(j,"click",mxUtils$1.bind(this,function(ot){this.graph.setLinkForCell(this.state.cell,null),mxEvent$1.consume(ot)}))}}if(I!=null)for(var at=0;at<I.length;at++)mxUtils$1.bind(this,function(ot,yt){var Lt=document.createElement("div");Lt.style.display="flex",Lt.style.alignItems="center",Lt.style.marginTop=S!=null||yt>0?"6px":"0px",Lt.appendChild(this.graph.createLinkForHint(ot.getAttribute("href"),mxUtils$1.getTextContent(ot),this.state.cell));var It=L.cloneNode(!0);Lt.appendChild(It);var Gt=mxUtils$1.bind(this,function(ee){var le=document.createElement("div");le.innerHTML=Graph$1.sanitizeHtml(this.graph.getLabel(this.state.cell));var jt=le.getElementsByTagName("a")[yt];if(jt!=null){if(ee==null||ee==""){for(var Zt=jt.cloneNode(!0).firstChild;Zt!=null;)jt.parentNode.insertBefore(Zt.cloneNode(!0),jt),Zt=Zt.nextSibling;jt.parentNode.removeChild(jt)}else jt.setAttribute("href",ee);this.graph.labelChanged(this.state.cell,le.innerHTML)}});mxEvent$1.addListener(It,"click",mxUtils$1.bind(this,function(ee){this.graph.showLinkDialog(ot.getAttribute("href")||"",mxResources$1.get("ok"),Gt),mxEvent$1.consume(ee)}));var Yt=D.cloneNode(!0);Lt.appendChild(Yt),mxEvent$1.addListener(Yt,"click",mxUtils$1.bind(this,function(ee){Gt(),mxEvent$1.consume(ee)})),this.linkHint.appendChild(Lt)})(I[at],at)}this.linkHint!=null&&Graph$1.sanitizeNode(this.linkHint)}catch{}},mxEdgeHandler$1.prototype.updateLinkHint=mxVertexHandler$1.prototype.updateLinkHint;var At=mxEdgeHandler$1.prototype.createConstraintHandler;mxEdgeHandler$1.prototype.createConstraintHandler=function(){var S=At.apply(this,arguments);return S.isEnabled=mxUtils$1.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()}),S};var Jt=mxConnectionHandler.prototype.init;mxConnectionHandler.prototype.init=function(){Jt.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils$1.bind(this,function(){return this.graph.connectionHandler.isEnabled()})};var ne=mxVertexHandler$1.prototype.redrawHandles;mxVertexHandler$1.prototype.redrawHandles=function(){if(this.moveHandles!=null)for(var S=0;S<this.moveHandles.length;S++)this.moveHandles[S]!=null&&(this.moveHandles[S].bounds.x=Math.round(this.moveHandles[S].rowState.x+this.moveHandles[S].rowState.width-this.moveHandles[S].bounds.width/2),this.moveHandles[S].bounds.y=Math.round(this.moveHandles[S].rowState.y+(this.moveHandles[S].rowState.height-this.moveHandles[S].bounds.height)/2),this.moveHandles[S].redraw());if(this.cornerHandles!=null){var I=this.getSelectionBorderInset(),L=this.cornerHandles,D=L[0].bounds.width/2,O=L[0].bounds.height/2;L[0].bounds.x=this.state.x-D+I,L[0].bounds.y=this.state.y-O+I,L[0].redraw(),L[1].bounds.x=L[0].bounds.x+this.state.width-2*I,L[1].bounds.y=L[0].bounds.y,L[1].redraw(),L[2].bounds.x=L[0].bounds.x,L[2].bounds.y=this.state.y+this.state.height-2*I,L[2].redraw(),L[3].bounds.x=L[1].bounds.x,L[3].bounds.y=L[2].bounds.y,L[3].redraw();for(var S=0;S<this.cornerHandles.length;S++)this.cornerHandles[S].node.style.display=this.graph.getSelectionCount()==1?"":"none"}if(this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.setAttribute("title",mxResources$1.get("rotateTooltip")),this.rotationShape.node.style.display=this.moveHandles==null&&this.graph.getSelectionCount()==1&&(this.index==null||this.index==mxEvent$1.ROTATION_HANDLE)?"":"none"),ne.apply(this),this.state!=null&&this.linkHint!=null){var V=new mxPoint$1(this.state.getCenterX(),this.state.getCenterY()),j=new mxRectangle$1(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),at=mxUtils$1.getBoundingBox(j,this.state.style[mxConstants$1.STYLE_ROTATION]||"0",V),ot=at!=null?mxUtils$1.getBoundingBox(this.state,this.state.style[mxConstants$1.STYLE_ROTATION]||"0"):this.state,yt=this.state.text!=null?this.state.text.boundingBox:null;at==null&&(at=this.state);var Lt=at.y+at.height;yt!=null&&(Lt=Math.max(Lt,yt.y+yt.height)),this.linkHint.style.left=ot.x+ot.width/2+"px",this.linkHint.style.top=Math.round(Lt+this.verticalOffset/2+Editor$2.hintOffset)+"px",this.linkHint.style.display=this.graph.getSelectionCount()>1?"none":""}};var Wt=mxVertexHandler$1.prototype.destroy;mxVertexHandler$1.prototype.destroy=function(){Wt.apply(this,arguments),this.destroyMoveHandles(),this.destroyCornerHandles(),this.linkHint!=null&&(this.linkHint.parentNode!=null&&this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),this.changeHandler!=null&&(this.graph.getSelectionModel().removeListener(this.changeHandler),this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.editingHandler!=null&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var re=mxEdgeHandler$1.prototype.redrawHandles;mxEdgeHandler$1.prototype.redrawHandles=function(){if(this.marker!=null&&(re.apply(this),this.state!=null&&this.linkHint!=null)){var S=this.state;this.state.text!=null&&this.state.text.bounds!=null&&(S=new mxRectangle$1(S.x,S.y,S.width,S.height),S.add(this.state.text.bounds)),this.linkHint.style.left=S.x+S.width/2+"px",this.linkHint.style.top=Math.round(S.y+S.height+Editor$2.hintOffset)+"px",this.linkHint.style.display=this.graph.getSelectionCount()>1?"none":""}};var te=mxEdgeHandler$1.prototype.reset;mxEdgeHandler$1.prototype.reset=function(){te.apply(this,arguments),this.linkHint!=null&&(this.linkHint.style.visibility="")};var se=mxEdgeHandler$1.prototype.destroy;mxEdgeHandler$1.prototype.destroy=function(){se.apply(this,arguments),this.linkHint!=null&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getSelectionModel().removeListener(this.changeHandler),this.changeHandler=null)}}();Graph$1.prototype.transparentBackground=!1;Graph$1.prototype.grid=!0;Graph$1.prototype.defaultThemes["default-style2"]=mxUtils$1.parseXml('<mxStylesheet><add as="defaultVertex"><add as="shape" value="label"/><add as="perimeter" value="rectanglePerimeter"/><add as="fontSize" value="12"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="fillColor" value="default"/><add as="strokeColor" value="default"/><add as="fontColor" value="default"/></add><add as="defaultEdge"><add as="shape" value="connector"/><add as="labelBackgroundColor" value="default"/><add as="endArrow" value="classic"/><add as="fontSize" value="11"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="rounded" value="1"/><add as="strokeColor" value="default"/><add as="fontColor" value="default"/></add><add as="text"><add as="fillColor" value="none"/><add as="gradientColor" value="none"/><add as="strokeColor" value="none"/><add as="align" value="left"/><add as="verticalAlign" value="top"/></add><add as="edgeLabel" extend="text"><add as="labelBackgroundColor" value="default"/><add as="fontSize" value="11"/></add><add as="label"><add as="fontStyle" value="1"/><add as="align" value="left"/><add as="verticalAlign" value="middle"/><add as="spacing" value="2"/><add as="spacingLeft" value="52"/><add as="imageWidth" value="42"/><add as="imageHeight" value="42"/><add as="rounded" value="1"/></add><add as="icon" extend="label"><add as="align" value="center"/><add as="imageAlign" value="center"/><add as="verticalLabelPosition" value="bottom"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="4"/><add as="labelBackgroundColor" value="default"/><add as="spacing" value="0"/><add as="spacingLeft" value="0"/><add as="spacingTop" value="6"/><add as="fontStyle" value="0"/><add as="imageWidth" value="48"/><add as="imageHeight" value="48"/></add><add as="swimlane"><add as="shape" value="swimlane"/><add as="fontSize" value="12"/><add as="fontStyle" value="1"/><add as="startSize" value="23"/></add><add as="group"><add as="verticalAlign" value="top"/><add as="fillColor" value="none"/><add as="strokeColor" value="none"/><add as="gradientColor" value="none"/><add as="pointerEvents" value="0"/></add><add as="ellipse"><add as="shape" value="ellipse"/><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombus"><add as="shape" value="rhombus"/><add as="perimeter" value="rhombusPerimeter"/></add><add as="triangle"><add as="shape" value="triangle"/><add as="perimeter" value="trianglePerimeter"/></add><add as="line"><add as="shape" value="line"/><add as="strokeWidth" value="4"/><add as="labelBackgroundColor" value="default"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="8"/></add><add as="image"><add as="shape" value="image"/><add as="labelBackgroundColor" value="default"/><add as="verticalAlign" value="top"/><add as="verticalLabelPosition" value="bottom"/></add><add as="roundImage" extend="image"><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombusImage" extend="image"><add as="perimeter" value="rhombusPerimeter"/></add><add as="arrow"><add as="shape" value="arrow"/><add as="edgeStyle" value="none"/><add as="fillColor" value="default"/></add><add as="fancy"><add as="shadow" value="1"/><add as="glass" value="1"/></add><add as="gray" extend="fancy"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="blue" extend="fancy"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="green" extend="fancy"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="turquoise" extend="fancy"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="yellow" extend="fancy"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="orange" extend="fancy"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="red" extend="fancy"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="pink" extend="fancy"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="purple" extend="fancy"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add><add as="plain-gray"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="plain-blue"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="plain-green"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="plain-turquoise"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="plain-yellow"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="plain-orange"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="plain-red"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="plain-pink"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="plain-purple"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add></mxStylesheet>').documentElement;Graph$1.prototype.defaultThemeName="default-style2";Graph$1.prototype.getFormatValue=function(t){return this.format.getFormatValue(t)};Graph$1.prototype.isMarkdown=function(t){var e=this.getCurrentCellStyle(t);return e!=null&&e.md=="1"};const Editor$2=function(t,e,i,n,r){mxEventSource.call(this),this.chromeless=t??this.chromeless,this.initStencilRegistry(),this.graph=n||this.createGraph(e,i),this.editable=r??!t,this.undoManager=this.createUndoManager(),this.status="",this.getOrCreateFilename=function(){return this.filename||mxResources$1.get("drawing",[Editor$2.pageCounter])+".xml"},this.getFilename=function(){return this.filename},this.setStatus=function(l,s){this.status=l,this.statusFunction=s,this.fireEvent(new mxEventObject$1("statusChanged"))},this.getStatus=function(){return this.status},this.graphChangeListener=function(l,s){var a=s!=null?s.getProperty("edit"):null;(a==null||!a.ignoreEdit)&&this.setModified(!0)},this.graph.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()};mxConstants$1.POINTS=1;mxConstants$1.MILLIMETERS=2;mxConstants$1.INCHES=3;mxConstants$1.METERS=4;mxConstants$1.PIXELS_PER_MM=3.937;mxConstants$1.PIXELS_PER_INCH=100;Editor$2.pageCounter=0;(function(){try{for(var t=window;t.opener!=null&&typeof t.opener.Editor<"u"&&!isNaN(t.opener.Editor.pageCounter)&&t.opener!=t;)t=t.opener;t!=null&&(t.Editor.pageCounter++,Editor$2.pageCounter=t.Editor.pageCounter)}catch{}})();Editor$2.defaultHtmlFont='-apple-system, BlinkMacSystemFont, "Segoe UI Variable", "Segoe UI", system-ui, ui-sans-serif, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"';Editor$2.useLocalStorage=typeof Storage<"u"&&mxClient$1.IS_IOS;Editor$2.smallScreenWidth=1024;Editor$2.lightCheckmarkImage="data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=";Editor$2.darkCheckmarkImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAARVBMVEUAAACZmZkICAgEBASNjY2Dg4MYGBiTk5N5eXl1dXVmZmZQUFBCQkI3NzceHh4MDAykpKSJiYl+fn5sbGxaWlo/Pz8SEhK96uPlAAAAAXRSTlMAQObYZgAAAE5JREFUGNPFzTcSgDAQQ1HJGUfy/Y9K7V1qeOUfzQifCQZai1XHaz11LFysbDbzgDSSWMZiETz3+b8yNUc/MMsktxuC8XQBSncdLwz+8gCCggGXzBcozAAAAABJRU5ErkJggg==";Editor$2.helpImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+";Editor$2.menuImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTMgMThoMTh2LTJIM3Yyem0wLTVoMTh2LTJIM3Yyem0wLTd2MmgxOFY2SDN6Ii8+PC9zdmc+";Editor$2.moveImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=";Editor$2.zoomInImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHptMi41LTRoLTJ2Mkg5di0ySDdWOWgyVjdoMXYyaDJ2MXoiLz48L3N2Zz4=";Editor$2.zoomOutImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHpNNyA5aDV2MUg3eiIvPjwvc3ZnPg==";Editor$2.fullscreenImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyA1djRoMlY1aDRWM0g1Yy0xLjEgMC0yIC45LTIgMnptMiAxMEgzdjRjMCAxLjEuOSAyIDIgMmg0di0ySDV2LTR6bTE0IDRoLTR2Mmg0YzEuMSAwIDItLjkgMi0ydi00aC0ydjR6bTAtMTZoLTR2Mmg0djRoMlY1YzAtMS4xLS45LTItMi0yeiIvPjwvc3ZnPg==";Editor$2.fullscreenExitImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTUgMTZoM3YzaDJ2LTVINXYyem0zLThINXYyaDVWNUg4djN6bTYgMTFoMnYtM2gzdi0yaC01djV6bTItMTFWNWgtMnY1aDVWOGgtM3oiLz48L3N2Zz4=";Editor$2.zoomFitImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTUgMTVIM3Y0YzAgMS4xLjkgMiAyIDJoNHYtMkg1di00ek01IDVoNFYzSDVjLTEuMSAwLTIgLjktMiAydjRoMlY1em03IDNjLTIuMjEgMC00IDEuNzktNCA0czEuNzkgNCA0IDQgNC0xLjc5IDQtNC0xLjc5LTQtNC00em0wIDZjLTEuMSAwLTItLjktMi0ycy45LTIgMi0yIDIgLjkgMiAyLS45IDItMiAyem03LTExaC00djJoNHY0aDJWNWMwLTEuMS0uOS0yLTItMnptMCAxNmgtNHYyaDRjMS4xIDAgMi0uOSAyLTJ2LTRoLTJ2NHoiLz48L3N2Zz4=";Editor$2.layersImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTExLjk5IDE4LjU0bC03LjM3LTUuNzNMMyAxNC4wN2w5IDcgOS03LTEuNjMtMS4yN3pNMTIgMTZsNy4zNi01LjczTDIxIDlsLTktNy05IDcgMS42MyAxLjI3TDEyIDE2em0wLTExLjQ3TDE3Ljc0IDkgMTIgMTMuNDcgNi4yNiA5IDEyIDQuNTN6Ii8+PC9zdmc+";Editor$2.previousImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1LjQxIDcuNDFMMTQgNmwtNiA2IDYgNiAxLjQxLTEuNDFMMTAuODMgMTJsNC41OC00LjU5eiIvPjwvc3ZnPg==";Editor$2.nextImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwIDZMOC41OSA3LjQxIDEzLjE3IDEybC00LjU4IDQuNTlMMTAgMThsNi02LTYtNnoiLz48L3N2Zz4=";Editor$2.editImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE0LjA2IDkuMDJsLjkyLjkyTDUuOTIgMTlINXYtLjkybDkuMDYtOS4wNk0xNy42NiAzYy0uMjUgMC0uNTEuMS0uNy4yOWwtMS44MyAxLjgzIDMuNzUgMy43NSAxLjgzLTEuODNjLjM5LS4zOS4zOS0xLjAyIDAtMS40MWwtMi4zNC0yLjM0Yy0uMi0uMi0uNDUtLjI5LS43MS0uMjl6bS0zLjYgMy4xOUwzIDE3LjI1VjIxaDMuNzVMMTcuODEgOS45NGwtMy43NS0zLjc1eiIvPjwvc3ZnPg==";Editor$2.duplicateImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE2IDFINGMtMS4xIDAtMiAuOS0yIDJ2MTRoMlYzaDEyVjF6bTMgNEg4Yy0xLjEgMC0yIC45LTIgMnYxNGMwIDEuMS45IDIgMiAyaDExYzEuMSAwIDItLjkgMi0yVjdjMC0xLjEtLjktMi0yLTJ6bTAgMTZIOFY3aDExdjE0eiIvPjwvc3ZnPg==";Editor$2.addImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz48L3N2Zz4=";Editor$2.crossImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMiAxOSA2LjQxeiIvPjwvc3ZnPg==";Editor$2.verticalDotsImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDhjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeiIvPjwvc3ZnPg==";Editor$2.trashImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE2IDl2MTBIOFY5aDhtLTEuNS02aC01bC0xIDFINXYyaDE0VjRoLTMuNWwtMS0xek0xOCA3SDZ2MTJjMCAxLjEuOSAyIDIgMmg4YzEuMSAwIDItLjkgMi0yVjd6Ii8+PC9zdmc+";Editor$2.hiddenImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6bTAgMGgyNHYyNEgwVjB6bTAgMGgyNHYyNEgwVjB6bTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDZjMy43OSAwIDcuMTcgMi4xMyA4LjgyIDUuNS0uNTkgMS4yMi0xLjQyIDIuMjctMi40MSAzLjEybDEuNDEgMS40MWMxLjM5LTEuMjMgMi40OS0yLjc3IDMuMTgtNC41M0MyMS4yNyA3LjExIDE3IDQgMTIgNGMtMS4yNyAwLTIuNDkuMi0zLjY0LjU3bDEuNjUgMS42NUMxMC42NiA2LjA5IDExLjMyIDYgMTIgNnptLTEuMDcgMS4xNEwxMyA5LjIxYy41Ny4yNSAxLjAzLjcxIDEuMjggMS4yOGwyLjA3IDIuMDdjLjA4LS4zNC4xNC0uNy4xNC0xLjA3QzE2LjUgOS4wMSAxNC40OCA3IDEyIDdjLS4zNyAwLS43Mi4wNS0xLjA3LjE0ek0yLjAxIDMuODdsMi42OCAyLjY4QzMuMDYgNy44MyAxLjc3IDkuNTMgMSAxMS41IDIuNzMgMTUuODkgNyAxOSAxMiAxOWMxLjUyIDAgMi45OC0uMjkgNC4zMi0uODJsMy40MiAzLjQyIDEuNDEtMS40MUwzLjQyIDIuNDUgMi4wMSAzLjg3em03LjUgNy41bDIuNjEgMi42MWMtLjA0LjAxLS4wOC4wMi0uMTIuMDItMS4zOCAwLTIuNS0xLjEyLTIuNS0yLjUgMC0uMDUuMDEtLjA4LjAxLS4xM3ptLTMuNC0zLjRsMS43NSAxLjc1Yy0uMjMuNTUtLjM2IDEuMTUtLjM2IDEuNzggMCAyLjQ4IDIuMDIgNC41IDQuNSA0LjUuNjMgMCAxLjIzLS4xMyAxLjc3LS4zNmwuOTguOThjLS44OC4yNC0xLjguMzgtMi43NS4zOC0zLjc5IDAtNy4xNy0yLjEzLTguODItNS41LjctMS40MyAxLjcyLTIuNjEgMi45My0zLjUzeiIvPjwvc3ZnPg==";Editor$2.visibleImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDZjMy43OSAwIDcuMTcgMi4xMyA4LjgyIDUuNUMxOS4xNyAxNC44NyAxNS43OSAxNyAxMiAxN3MtNy4xNy0yLjEzLTguODItNS41QzQuODMgOC4xMyA4LjIxIDYgMTIgNm0wLTJDNyA0IDIuNzMgNy4xMSAxIDExLjUgMi43MyAxNS44OSA3IDE5IDEyIDE5czkuMjctMy4xMSAxMS03LjVDMjEuMjcgNy4xMSAxNyA0IDEyIDR6bTAgNWMxLjM4IDAgMi41IDEuMTIgMi41IDIuNVMxMy4zOCAxNCAxMiAxNHMtMi41LTEuMTItMi41LTIuNVMxMC42MiA5IDEyIDltMC0yYy0yLjQ4IDAtNC41IDIuMDItNC41IDQuNVM5LjUyIDE2IDEyIDE2czQuNS0yLjAyIDQuNS00LjVTMTQuNDggNyAxMiA3eiIvPjwvc3ZnPg==";Editor$2.lockedImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBvcGFjaXR5PSIuODciLz48L2c+PHBhdGggZD0iTTE4IDhoLTFWNmMwLTIuNzYtMi4yNC01LTUtNVM3IDMuMjQgNyA2djJINmMtMS4xIDAtMiAuOS0yIDJ2MTBjMCAxLjEuOSAyIDIgMmgxMmMxLjEgMCAyLS45IDItMlYxMGMwLTEuMS0uOS0yLTItMnpNOSA2YzAtMS42NiAxLjM0LTMgMy0zczMgMS4zNCAzIDN2Mkg5VjZ6bTkgMTRINlYxMGgxMnYxMHptLTYtM2MxLjEgMCAyLS45IDItMnMtLjktMi0yLTItMiAuOS0yIDIgLjkgMiAyIDJ6Ii8+PC9zdmc+";Editor$2.unlockedImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4IDhoLTFWNmMwLTIuNzYtMi4yNC01LTUtNVM3IDMuMjQgNyA2aDJjMC0xLjY2IDEuMzQtMyAzLTNzMyAxLjM0IDMgM3YySDZjLTEuMSAwLTIgLjktMiAydjEwYzAgMS4xLjkgMiAyIDJoMTJjMS4xIDAgMi0uOSAyLTJWMTBjMC0xLjEtLjktMi0yLTJ6bTAgMTJINlYxMGgxMnYxMHptLTYtM2MxLjEgMCAyLS45IDItMnMtLjktMi0yLTItMiAuOS0yIDIgLjkgMiAyIDJ6Ii8+PC9zdmc+";Editor$2.printImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDhoLTFWM0g2djVINWMtMS42NiAwLTMgMS4zNC0zIDN2Nmg0djRoMTJ2LTRoNHYtNmMwLTEuNjYtMS4zNC0zLTMtM3pNOCA1aDh2M0g4VjV6bTggMTJ2Mkg4di00aDh2MnptMi0ydi0ySDZ2Mkg0di00YzAtLjU1LjQ1LTEgMS0xaDE0Yy41NSAwIDEgLjQ1IDEgMXY0aC0yeiIvPjxjaXJjbGUgY3g9IjE4IiBjeT0iMTEuNSIgcj0iMSIvPjwvc3ZnPg==";Editor$2.refreshImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE3LjY1IDYuMzVDMTYuMiA0LjkgMTQuMjEgNCAxMiA0Yy00LjQyIDAtNy45OSAzLjU4LTcuOTkgOHMzLjU3IDggNy45OSA4YzMuNzMgMCA2Ljg0LTIuNTUgNy43My02aC0yLjA4Yy0uODIgMi4zMy0zLjA0IDQtNS42NSA0LTMuMzEgMC02LTIuNjktNi02czIuNjktNiA2LTZjMS42NiAwIDMuMTQuNjkgNC4yMiAxLjc4TDEzIDExaDdWNGwtMi4zNSAyLjM1eiIvPjwvc3ZnPg==";Editor$2.backImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuODciLz48cGF0aCBkPSJNMTcuNTEgMy44N0wxNS43MyAyLjEgNS44NCAxMmw5LjkgOS45IDEuNzctMS43N0w5LjM4IDEybDguMTMtOC4xM3oiLz48L3N2Zz4=";Editor$2.closeImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIiBvcGFjaXR5PSIuODciLz48cGF0aCBkPSJNMTIgMkM2LjQ3IDIgMiA2LjQ3IDIgMTJzNC40NyAxMCAxMCAxMCAxMC00LjQ3IDEwLTEwUzE3LjUzIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTMuNTktMTNMMTIgMTAuNTkgOC40MSA3IDcgOC40MSAxMC41OSAxMiA3IDE1LjU5IDguNDEgMTcgMTIgMTMuNDEgMTUuNTkgMTcgMTcgMTUuNTkgMTMuNDEgMTIgMTcgOC40MXoiLz48L3N2Zz4=";Editor$2.closeBlackImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjZweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjZweCI+PGVsbGlwc2UgY3g9IjEyIiBjeT0iMTIiIHJ4PSI5IiByeT0iOSIgc3Ryb2tlPSJub25lIiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE0LjU5IDhMMTIgMTAuNTkgOS40MSA4IDggOS40MSAxMC41OSAxMiA4IDE0LjU5IDkuNDEgMTYgMTIgMTMuNDEgMTQuNTkgMTYgMTYgMTQuNTkgMTMuNDEgMTIgMTYgOS40MSAxNC41OSA4ek0xMiAyQzYuNDcgMiAyIDYuNDcgMiAxMnM0LjQ3IDEwIDEwIDEwIDEwLTQuNDcgMTAtMTBTMTcuNTMgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHoiLz48L3N2Zz4=";Editor$2.minusImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTEwIDI1LjV2LTNoMjh2M1oiLz48L3N2Zz4=";Editor$2.plusImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIvPjwvc3ZnPg==";Editor$2.addBoxImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTExIDE3aDJ2LTRoNHYtMmgtNFY3aC0ydjRIN3YyaDRabS02IDRxLS44MjUgMC0xLjQxMy0uNTg3UTMgMTkuODI1IDMgMTlWNXEwLS44MjUuNTg3LTEuNDEzUTQuMTc1IDMgNSAzaDE0cS44MjUgMCAxLjQxMy41ODdRMjEgNC4xNzUgMjEgNXYxNHEwIC44MjUtLjU4NyAxLjQxM1ExOS44MjUgMjEgMTkgMjFabTAtMmgxNFY1SDV2MTRaTTUgNXYxNFY1WiIvPjwvc3ZnPg==";Editor$2.shapesImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTE1IDE1Wm0tNyAyLjk1cS4yNS4wMjUuNDg4LjAzOFE4LjcyNSAxOCA5IDE4dC41MTItLjAxMnEuMjM4LS4wMTMuNDg4LS4wMzhWMjBoMTBWMTBoLTIuMDVxLjAyNS0uMjUuMDM4LS40ODhRMTggOS4yNzUgMTggOXQtLjAxMi0uNTEyUTE3Ljk3NSA4LjI1IDE3Ljk1IDhIMjBxLjgyNSAwIDEuNDEzLjU4N1EyMiA5LjE3NSAyMiAxMHYxMHEwIC44MjUtLjU4NyAxLjQxM1EyMC44MjUgMjIgMjAgMjJIMTBxLS44MjUgMC0xLjQxMi0uNTg3UTggMjAuODI1IDggMjBaTTkgMTZxLTIuOTI1IDAtNC45NjMtMi4wMzhRMiAxMS45MjUgMiA5dDIuMDM3LTQuOTYzUTYuMDc1IDIgOSAycTIuOTI1IDAgNC45NjMgMi4wMzdRMTYgNi4wNzUgMTYgOXEwIDIuOTI1LTIuMDM3IDQuOTYyUTExLjkyNSAxNiA5IDE2Wm0wLTJxMi4wNzUgMCAzLjUzOC0xLjQ2M1ExNCAxMS4wNzUgMTQgOXQtMS40NjItMy41MzdRMTEuMDc1IDQgOSA0IDYuOTI1IDQgNS40NjMgNS40NjMgNCA2LjkyNSA0IDl0MS40NjMgMy41MzdRNi45MjUgMTQgOSAxNFptMC01WiIvPjwvc3ZnPg==";Editor$2.formatImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTExIDIycS0uODI1IDAtMS40MTItLjU4N1E5IDIwLjgyNSA5IDIwdi00SDZxLS44MjUgMC0xLjQxMi0uNTg4UTQgMTQuODI1IDQgMTRWN3EwLTEuNjUgMS4xNzUtMi44MjVRNi4zNSAzIDggM2gxMnYxMXEwIC44MjUtLjU4NyAxLjQxMlExOC44MjUgMTYgMTggMTZoLTN2NHEwIC44MjUtLjU4NyAxLjQxM1ExMy44MjUgMjIgMTMgMjJaTTYgMTBoMTJWNWgtMXY0aC0yVjVoLTF2MmgtMlY1SDhxLS44MjUgMC0xLjQxMi41ODhRNiA2LjE3NSA2IDdabTAgNGgxMnYtMkg2djJabTAtMnYyWiIvPjwvc3ZnPg==";Editor$2.freehandImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyNCIgd2lkdGg9IjI0Ii8+PHBhdGggZD0iTTQuNSw4YzEuMDQsMCwyLjM0LTEuNSw0LjI1LTEuNWMxLjUyLDAsMi43NSwxLjIzLDIuNzUsMi43NWMwLDIuMDQtMS45OSwzLjE1LTMuOTEsNC4yMkM1LjQyLDE0LjY3LDQsMTUuNTcsNCwxNyBjMCwxLjEsMC45LDIsMiwydjJjLTIuMjEsMC00LTEuNzktNC00YzAtMi43MSwyLjU2LTQuMTQsNC42Mi01LjI4YzEuNDItMC43OSwyLjg4LTEuNiwyLjg4LTIuNDdjMC0wLjQxLTAuMzQtMC43NS0wLjc1LTAuNzUgQzcuNSw4LjUsNi4yNSwxMCw0LjUsMTBDMy4xMiwxMCwyLDguODgsMiw3LjVDMiw1LjQ1LDQuMTcsMi44Myw1LDJsMS40MSwxLjQxQzUuNDEsNC40Miw0LDYuNDMsNCw3LjVDNCw3Ljc4LDQuMjIsOCw0LjUsOHogTTgsMjEgbDMuNzUsMGw4LjA2LTguMDZsLTMuNzUtMy43NUw4LDE3LjI1TDgsMjF6IE0xMCwxOC4wOGw2LjA2LTYuMDZsMC45MiwwLjkyTDEwLjkyLDE5TDEwLDE5TDEwLDE4LjA4eiBNMjAuMzcsNi4yOSBjLTAuMzktMC4zOS0xLjAyLTAuMzktMS40MSwwbC0xLjgzLDEuODNsMy43NSwzLjc1bDEuODMtMS44M2MwLjM5LTAuMzksMC4zOS0xLjAyLDAtMS40MUwyMC4zNyw2LjI5eiIvPjwvc3ZnPg==";Editor$2.undoImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIuNSA4Yy0yLjY1IDAtNS4wNS45OS02LjkgMi42TDIgN3Y5aDlsLTMuNjItMy42MmMxLjM5LTEuMTYgMy4xNi0xLjg4IDUuMTItMS44OCAzLjU0IDAgNi41NSAyLjMxIDcuNiA1LjVsMi4zNy0uNzhDMjEuMDggMTEuMDMgMTcuMTUgOCAxMi41IDh6Ii8+PC9zdmc+";Editor$2.redoImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTguNCAxMC42QzE2LjU1IDguOTkgMTQuMTUgOCAxMS41IDhjLTQuNjUgMC04LjU4IDMuMDMtOS45NiA3LjIyTDMuOSAxNmMxLjA1LTMuMTkgNC4wNS01LjUgNy42LTUuNSAxLjk1IDAgMy43My43MiA1LjEyIDEuODhMMTMgMTZoOVY3bC0zLjYgMy42eiIvPjwvc3ZnPg==";Editor$2.outlineImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTE1IDIxLTYtMi4xLTQuNjUgMS44cS0uNS4yLS45MjUtLjExM1EzIDIwLjI3NSAzIDE5Ljc1di0xNHEwLS4zMjUuMTg4LS41NzUuMTg3LS4yNS41MTItLjM3NUw5IDNsNiAyLjEgNC42NS0xLjhxLjUtLjIuOTI1LjExMi40MjUuMzEzLjQyNS44Mzh2MTRxMCAuMzI1LS4xODguNTc1LS4xODcuMjUtLjUxMi4zNzVabS0xLTIuNDVWNi44NWwtNC0xLjR2MTEuN1ptMiAwIDMtMVY1LjdsLTMgMS4xNVpNNSAxOC4zbDMtMS4xNVY1LjQ1bC0zIDFaTTE2IDYuODV2MTEuN1ptLTgtMS40djExLjdaIi8+PC9zdmc+";Editor$2.saveImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMThweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE5IDEydjdINXYtN0gzdjdjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnptLTYgLjY3bDIuNTktMi41OEwxNyAxMS41bC01IDUtNS01IDEuNDEtMS40MUwxMSAxMi42N1YzaDJ2OS42N3oiLz48L3N2Zz4=";Editor$2.compareImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0ibTE1Ljg1IDQwLTIuMS0yLjEgNi4wNS02LjA1SDR2LTNoMTUuOGwtNi4wNS02LjA1IDIuMS0yLjEgOS42NSA5LjY1Wm0xNi4zLTEyLjctOS42NS05LjY1TDMyLjE1IDhsMi4xIDIuMS02LjA1IDYuMDVINDR2M0gyOC4ybDYuMDUgNi4wNVoiLz48L3N2Zz4=";Editor$2.expandMoreImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTEyIDE1LjM3NS02LTYgMS40LTEuNCA0LjYgNC42IDQuNi00LjYgMS40IDEuNFoiLz48L3N2Zz4=";Editor$2.expandLessImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTcuNCAxNS4zNzUtMS40LTEuNCA2LTYgNiA2LTEuNCAxLjQtNC42LTQuNloiLz48L3N2Zz4=";Editor$2.gearImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTkuMjUgMjItLjQtMy4ycS0uMzI1LS4xMjUtLjYxMi0uMy0uMjg4LS4xNzUtLjU2My0uMzc1TDQuNyAxOS4zNzVsLTIuNzUtNC43NSAyLjU3NS0xLjk1UTQuNSAxMi41IDQuNSAxMi4zMzd2LS42NzVxMC0uMTYyLjAyNS0uMzM3TDEuOTUgOS4zNzVsMi43NS00Ljc1IDIuOTc1IDEuMjVxLjI3NS0uMi41NzUtLjM3NS4zLS4xNzUuNi0uM2wuNC0zLjJoNS41bC40IDMuMnEuMzI1LjEyNS42MTMuMy4yODcuMTc1LjU2Mi4zNzVsMi45NzUtMS4yNSAyLjc1IDQuNzUtMi41NzUgMS45NXEuMDI1LjE3NS4wMjUuMzM3di42NzVxMCAuMTYzLS4wNS4zMzhsMi41NzUgMS45NS0yLjc1IDQuNzUtMi45NS0xLjI1cS0uMjc1LjItLjU3NS4zNzUtLjMuMTc1LS42LjNsLS40IDMuMlptMi44LTYuNXExLjQ1IDAgMi40NzUtMS4wMjVRMTUuNTUgMTMuNDUgMTUuNTUgMTJxMC0xLjQ1LTEuMDI1LTIuNDc1UTEzLjUgOC41IDEyLjA1IDguNXEtMS40NzUgMC0yLjQ4OCAxLjAyNVE4LjU1IDEwLjU1IDguNTUgMTJxMCAxLjQ1IDEuMDEyIDIuNDc1UTEwLjU3NSAxNS41IDEyLjA1IDE1LjVabTAtMnEtLjYyNSAwLTEuMDYyLS40MzgtLjQzOC0uNDM3LS40MzgtMS4wNjJ0LjQzOC0xLjA2MnEuNDM3LS40MzggMS4wNjItLjQzOHQxLjA2My40MzhxLjQzNy40MzcuNDM3IDEuMDYydC0uNDM3IDEuMDYycS0uNDM4LjQzOC0xLjA2My40MzhaTTEyIDEyWm0tMSA4aDEuOTc1bC4zNS0yLjY1cS43NzUtLjIgMS40MzgtLjU4OC42NjItLjM4NyAxLjIxMi0uOTM3bDIuNDc1IDEuMDI1Ljk3NS0xLjctMi4xNS0xLjYyNXEuMTI1LS4zNS4xNzUtLjczOC4wNS0uMzg3LjA1LS43ODd0LS4wNS0uNzg4cS0uMDUtLjM4Ny0uMTc1LS43MzdsMi4xNS0xLjYyNS0uOTc1LTEuNy0yLjQ3NSAxLjA1cS0uNTUtLjU3NS0xLjIxMi0uOTYzLS42NjMtLjM4Ny0xLjQzOC0uNTg3TDEzIDRoLTEuOTc1bC0uMzUgMi42NXEtLjc3NS4yLTEuNDM3LjU4Ny0uNjYzLjM4OC0xLjIxMy45MzhMNS41NSA3LjE1bC0uOTc1IDEuNyAyLjE1IDEuNnEtLjEyNS4zNzUtLjE3NS43NS0uMDUuMzc1LS4wNS44IDAgLjQuMDUuNzc1dC4xNzUuNzVsLTIuMTUgMS42MjUuOTc1IDEuNyAyLjQ3NS0xLjA1cS41NS41NzUgMS4yMTMuOTYyLjY2Mi4zODggMS40MzcuNTg4WiIvPjwvc3ZnPg==";Editor$2.extensionImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTguOCAyMUg1cS0uODI1IDAtMS40MTMtLjU4N1EzIDE5LjgyNSAzIDE5di0zLjhxMS4yIDAgMi4xLS43NjIuOS0uNzYzLjktMS45MzggMC0xLjE3NS0uOS0xLjkzOFE0LjIgOS44IDMgOS44VjZxMC0uODI1LjU4Ny0xLjQxMlE0LjE3NSA0IDUgNGg0cTAtMS4wNS43MjUtMS43NzVRMTAuNDUgMS41IDExLjUgMS41cTEuMDUgMCAxLjc3NS43MjVRMTQgMi45NSAxNCA0aDRxLjgyNSAwIDEuNDEzLjU4OFEyMCA1LjE3NSAyMCA2djRxMS4wNSAwIDEuNzc1LjcyNS43MjUuNzI1LjcyNSAxLjc3NSAwIDEuMDUtLjcyNSAxLjc3NVEyMS4wNSAxNSAyMCAxNXY0cTAgLjgyNS0uNTg3IDEuNDEzUTE4LjgyNSAyMSAxOCAyMWgtMy44cTAtMS4yNS0uNzg3LTIuMTI1UTEyLjYyNSAxOCAxMS41IDE4dC0xLjkxMi44NzVROC44IDE5Ljc1IDguOCAyMVpNNSAxOWgyLjEyNXEuNi0xLjY1IDEuOTI1LTIuMzI1UTEwLjM3NSAxNiAxMS41IDE2cTEuMTI1IDAgMi40NS42NzUgMS4zMjUuNjc1IDEuOTI1IDIuMzI1SDE4di02aDJxLjIgMCAuMzUtLjE1LjE1LS4xNS4xNS0uMzUgMC0uMi0uMTUtLjM1UTIwLjIgMTIgMjAgMTJoLTJWNmgtNlY0cTAtLjItLjE1LS4zNS0uMTUtLjE1LS4zNS0uMTUtLjIgMC0uMzUuMTVRMTEgMy44IDExIDR2Mkg1djIuMnExLjM1LjUgMi4xNzUgMS42NzVROCAxMS4wNSA4IDEyLjVxMCAxLjQyNS0uODI1IDIuNlQ1IDE2LjhabTcuNzUtNy43NVoiLz48L3N2Zz4=";Editor$2.colorDropperImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTYgNDJ2LTguNGwxOC44NS0xOC44NS0zLjYtMy42TDIzLjMgOS4xbDQuNiA0LjZMMzUgNi42cS41NS0uNTUgMS4xNzUtLjU1dDEuMTc1LjU1bDQuMDUgNC4wNXEuNTUuNTUuNTUgMS4xNzVUNDEuNCAxM2wtNy4xIDcuMSA0LjYgNC42LTIuMDUgMi4wNS0zLjYtMy42TDE0LjQgNDJabTMtM2g0LjM1TDMxLjEgMjEuMjVsLTQuMzUtNC4zNUw5IDM0LjY1Wm0yMy4xNS0yMSA2LjItNi4yLTIuMTUtMi4xNS02LjIgNi4yWm0wIDBMMzAgMTUuODUgMzIuMTUgMThaIi8+PC9zdmc+";Editor$2.magnifyImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik03ODQtMTIwIDUzMi0zNzJxLTMwIDI0LTY5IDM4dC04MyAxNHEtMTA5IDAtMTg0LjUtNzUuNVQxMjAtNTgwcTAtMTA5IDc1LjUtMTg0LjVUMzgwLTg0MHExMDkgMCAxODQuNSA3NS41VDY0MC01ODBxMCA0NC0xNCA4M3QtMzggNjlsMjUyIDI1Mi01NiA1NlpNMzgwLTQwMHE3NSAwIDEyNy41LTUyLjVUNTYwLTU4MHEwLTc1LTUyLjUtMTI3LjVUMzgwLTc2MHEtNzUgMC0xMjcuNSA1Mi41VDIwMC01ODBxMCA3NSA1Mi41IDEyNy41VDM4MC00MDBaIi8+PC9zdmc+";Editor$2.sendImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik0xMjAtMTYwdi02NDBsNzYwIDMyMC03NjAgMzIwWm04MC0xMjAgNDc0LTIwMC00NzQtMjAwdjE0MGwyNDAgNjAtMjQwIDYwdjE0MFptMCAwdi00MDAgNDAwWiIvPjwvc3ZnPg==";Editor$2.sparklesImage="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KDTwhLS0gVXBsb2FkZWQgdG86IFNWRyBSZXBvLCB3d3cuc3ZncmVwby5jb20sIFRyYW5zZm9ybWVkIGJ5OiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBpZD0iaWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iI2ZjZmY0NyIgZGF0YS1kYXJrcmVhZGVyLWlubGluZS1maWxsPSIiIHN0eWxlPSItLWRhcmtyZWFkZXItaW5saW5lLWZpbGw6ICNkNmQ4NTA7IC0tZGFya3JlYWRlci1pbmxpbmUtc3Ryb2tlOiAjZDZkODUwOyIgc3Ryb2tlPSIjZmNmZjQ3IiBkYXRhLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZT0iIj4KDTxnIGlkPSJTVkdSZXBvX2JnQ2FycmllciIgc3Ryb2tlLXdpZHRoPSIwIi8+Cg08ZyBpZD0iU1ZHUmVwb190cmFjZXJDYXJyaWVyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KDTxnIGlkPSJTVkdSZXBvX2ljb25DYXJyaWVyIj4KDTxwYXRoIGQ9Ik0yNTkuOTIsMjYyLjkxLDIxNi40LDE0OS43N2E5LDksMCwwLDAtMTYuOCwwTDE1Ni4wOCwyNjIuOTFhOSw5LDAsMCwxLTUuMTcsNS4xN0wzNy43NywzMTEuNmE5LDksMCwwLDAsMCwxNi44bDExMy4xNCw0My41MmE5LDksMCwwLDEsNS4xNyw1LjE3TDE5OS42LDQ5MC4yM2E5LDksMCwwLDAsMTYuOCwwbDQzLjUyLTExMy4xNGE5LDksMCwwLDEsNS4xNy01LjE3TDM3OC4yMywzMjguNGE5LDksMCwwLDAsMC0xNi44TDI2NS4wOSwyNjguMDhBOSw5LDAsMCwxLDI1OS45MiwyNjIuOTFaIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxOS45NjgiIGRhdGEtZGFya3JlYWRlci1pbmxpbmUtc3Ryb2tlPSIiIHN0eWxlPSItLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZTogIzE4MWExYjsiLz4KDTxwb2x5Z29uIHBvaW50cz0iMTA4IDY4IDg4IDE2IDY4IDY4IDE2IDg4IDY4IDEwOCA4OCAxNjAgMTA4IDEwOCAxNjAgODggMTA4IDY4IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxOS45NjgiIGRhdGEtZGFya3JlYWRlci1pbmxpbmUtc3Ryb2tlPSIiIHN0eWxlPSItLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZTogIzE4MWExYjsiLz4KDTxwb2x5Z29uIHBvaW50cz0iNDI2LjY3IDExNy4zMyA0MDAgNDggMzczLjMzIDExNy4zMyAzMDQgMTQ0IDM3My4zMyAxNzAuNjcgNDAwIDI0MCA0MjYuNjcgMTcwLjY3IDQ5NiAxNDQgNDI2LjY3IDExNy4zMyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMTkuOTY4IiBkYXRhLWRhcmtyZWFkZXItaW5saW5lLXN0cm9rZT0iIiBzdHlsZT0iLS1kYXJrcmVhZGVyLWlubGluZS1zdHJva2U6ICMxODFhMWI7Ii8+Cg08L2c+Cg08L3N2Zz4=";Editor$2.checkmarkImage=Editor$2.lightCheckmarkImage;Editor$2.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}];Editor$2.fillStyles=[{val:"auto",dispName:"Auto"},{val:"hatch",dispName:"Hatch"},{val:"solid",dispName:"Solid"},{val:"dots",dispName:"Dots"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}];Editor$2.themes=[];Editor$2.ctrlKey=mxClient$1.IS_MAC?"Cmd":"Ctrl";Editor$2.hintOffset=20;Editor$2.shapePickerHoverDelay=300;Editor$2.fitWindowBorders=null;Editor$2.popupsAllowed=window.urlParams!=null?urlParams.noDevice!="1":!0;Editor$2.simpleLabels=!1;Editor$2.enableNativeCipboard=window==window.top&&!mxClient$1.IS_FF&&navigator.clipboard!=null;Editor$2.sketchMode=!1;Editor$2.enableCssDarkMode=!window.mxIsElectron;Editor$2.cssDarkMode=!1;Editor$2.darkMode=!1;Editor$2.currentTheme=uiTheme;Editor$2.darkColor=Editor$2.enableCssDarkMode?"#121212":"#18141D";Editor$2.lightColor="#f0f0f0";Editor$2.fontSizeUnit="px";Editor$2.pageSizeUnit=mxConstants$1.INCHES;Editor$2.isDarkMode=function(t){return Editor$2.darkMode};Editor$2.isPngDataUrl=function(t){return t!=null&&t.substring(0,15)=="data:image/png;"};Editor$2.isPngData=function(t){return t.length>8&&t.charCodeAt(0)==137&&t.charCodeAt(1)==80&&t.charCodeAt(2)==78&&t.charCodeAt(3)==71&&t.charCodeAt(4)==13&&t.charCodeAt(5)==10&&t.charCodeAt(6)==26&&t.charCodeAt(7)==10};Editor$2.convertHtmlToText=function(t){if(t!=null){var e=document.createElement("div");return e.innerHTML=Graph$1.sanitizeHtml(t),mxUtils$1.extractTextWithWhitespace(e.childNodes)}else return null};Editor$2.extractGraphModelFromPng=function(t){var e=null;try{var i=t.substring(t.indexOf(",")+1),n=window.atob&&!mxClient$1.IS_SF?atob(i):Base64.decode(i,!0);EditorUi.parsePng(n,mxUtils$1.bind(this,function(r,l,s){var a=n.substring(r+8,r+8+s);if(l=="zTXt"){var o=a.indexOf("\0");if(a.substring(0,o)=="mxGraphModel"){var u=pako.inflateRaw(Graph$1.stringToArrayBuffer(a.substring(o+2)),{to:"string"}).replace(/\+/g," ");u!=null&&u.length>0&&(e=u)}}else if(l=="tEXt"){var d=a.split("\0");d.length>1&&(d[0]=="mxGraphModel"||d[0]=="mxfile")&&(e=d[1])}if(e!=null||l=="IDAT")return!0}))}catch{}return e!=null&&e.charAt(0)=="%"&&(e=decodeURIComponent(e)),e!=null&&e.charAt(0)=="%"&&(e=decodeURIComponent(e)),e};Editor$2.soundex=function(t){if(t==null||t.length==0)return"";var e=[],i=1,n,r="01230120022455012603010202";e[0]=t[0].toUpperCase();for(var l=1,s=t.length;l<s&&(n=t[l].toUpperCase().charCodeAt(0)-65,!(n>=0&&n<=25&&r[n]!="0"&&(r[n]!=e[i-1]&&(e[i]=r[n],i++),i>3)));l++);if(i<=3)for(;i<=3;)e[i]="0",i++;return e.join("")};Editor$2.selectFilename=function(t){var e=t.value.lastIndexOf(".");if(e>0){var i=t.value.substring(e+1);if(i!="drawio"&&mxUtils$1.indexOf(["png","svg","html","xml","pdf"],i)>=0){var n=t.value.lastIndexOf(".drawio.",e);n>0&&(e=n)}}e=e>0?e:t.value.length,Editor$2.selectSubstring(t,0,e)};Editor$2.selectSubstring=function(t,e,i){if(t.focus(),typeof t.selectionStart<"u")t.selectionStart=e,t.selectionEnd=i;else if(document.selection&&document.selection.createRange){t.select();var n=document.selection.createRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}};Editor$2.toUnit=function(t,e){return e==mxConstants$1.INCHES?Math.round(t*100/mxConstants$1.PIXELS_PER_INCH)/100:e==mxConstants$1.MILLIMETERS?Math.round(t*100/mxConstants$1.PIXELS_PER_MM)/100:e==mxConstants$1.METERS?Math.round(t*1e3/(mxConstants$1.PIXELS_PER_MM*1e3))/1e3:Math.round(t)};Editor$2.fromUnit=function(t,e){return e==mxConstants$1.INCHES?Math.round(t*mxConstants$1.PIXELS_PER_INCH):e==mxConstants$1.MILLIMETERS?Math.round(t*mxConstants$1.PIXELS_PER_MM):e==mxConstants$1.METERS?Math.round(t*mxConstants$1.PIXELS_PER_MM*1e3):Math.round(t)};mxUtils$1.extend(Editor$2,mxEventSource);Editor$2.prototype.originalNoForeignObject=mxClient$1.NO_FO;Editor$2.prototype.transparentImage=mxClient$1.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif";Editor$2.prototype.extendCanvas=!0;Editor$2.prototype.chromeless=!1;Editor$2.prototype.cancelFirst=!0;Editor$2.prototype.enabled=!0;Editor$2.prototype.filename=null;Editor$2.prototype.modified=!1;Editor$2.prototype.autosave=!0;Editor$2.prototype.initialTopSpacing=0;Editor$2.prototype.appName=document.title;Editor$2.prototype.editBlankUrl=window.location.origin+window.location.pathname;Editor$2.prototype.defaultGraphOverflow="hidden";Editor$2.prototype.init=function(){};Editor$2.prototype.isChromelessView=function(){return this.chromeless};Editor$2.prototype.setAutosave=function(t){this.autosave=t,this.fireEvent(new mxEventObject$1("autosaveChanged"))};Editor$2.prototype.getEditBlankUrl=function(t){return this.editBlankUrl+t};Editor$2.prototype.editAsNew=function(t,e){var i=e!=null?"?title="+encodeURIComponent(e):"";if(urlParams.ui!=null&&(i+=(i.length>0?"&":"?")+"ui="+urlParams.ui),typeof window.postMessage<"u"&&(document.documentMode==null||document.documentMode>=10)){var n=null,r=mxUtils$1.bind(this,function(l){l.data=="ready"&&l.source==n&&(mxEvent$1.removeListener(window,"message",r),n.postMessage(t,"*"))});mxEvent$1.addListener(window,"message",r),n=this.graph.openLink(this.getEditBlankUrl(i+(i.length>0?"&":"?")+"client=1"),null,!0)}else this.graph.openLink(this.getEditBlankUrl(i)+"#R"+encodeURIComponent(t))};Editor$2.prototype.createGraph=function(t,e){var i=new Graph$1(null,e,null,null,t);i.transparentBackground=!1;var n=i.isCssTransformsSupported,r=this;return i.isCssTransformsSupported=function(){return n.apply(this,arguments)&&(!r.chromeless||!mxClient$1.IS_SF)},this.chromeless||(i.isBlankLink=function(l){return!this.isExternalProtocol(l)}),i};Editor$2.prototype.resetGraph=function(){this.graph.gridEnabled=this.graph.defaultGridEnabled&&(!this.isChromelessView()||urlParams.grid=="1"),this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)};Editor$2.prototype.readGraphState=function(t){var e=t.getAttribute("grid");(e==null||e=="")&&(e=this.graph.defaultGridEnabled?"1":"0"),this.graph.gridEnabled=e!="0"&&(!this.isChromelessView()||urlParams.grid=="1"),this.graph.gridSize=parseFloat(t.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled=t.getAttribute("guides")!="0",this.graph.setTooltips(t.getAttribute("tooltips")!="0"),this.graph.setConnectable(t.getAttribute("connect")!="0"),this.graph.connectionArrowsEnabled=t.getAttribute("arrows")!="0",this.graph.foldingEnabled=t.getAttribute("fold")!="0",this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled=urlParams.nav=="1",this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var i=parseFloat(t.getAttribute("pageScale"));if(!isNaN(i)&&i>0?this.graph.pageScale=i:this.graph.pageScale=mxGraph.prototype.pageScale,!this.graph.isLightboxView()&&!this.graph.isViewer()){var n=t.getAttribute("page");n!=null?this.graph.pageVisible=n!="0":this.graph.pageVisible=this.graph.defaultPageVisible}else this.graph.pageVisible=!1;this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var r=parseFloat(t.getAttribute("pageWidth")),l=parseFloat(t.getAttribute("pageHeight"));!isNaN(r)&&!isNaN(l)&&(this.graph.pageFormat=new mxRectangle$1(0,0,r,l));var s=t.getAttribute("background");s!=null&&s.length>0?this.graph.background=s:this.graph.background=null};Editor$2.prototype.setGraphXml=function(t){if(t!=null){var e=new mxCodec$1(t.ownerDocument);if(t.nodeName=="mxGraphModel"){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(t),this.updateGraphComponents(),e.decode(t,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject$1("resetGraphView"))}else if(t.nodeName=="root"){this.resetGraph();var i=e.document.createElement("mxGraphModel");i.appendChild(t),e.decode(i,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject$1("resetGraphView"))}else throw{message:mxResources$1.get("cannotOpenFile"),node:t,toString:function(){return this.message}}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject$1("resetGraphView"))};Editor$2.prototype.getGraphXml=function(t){t=t??!0;var e=null;if(t){var i=new mxCodec$1(mxUtils$1.createXmlDocument());e=i.encode(this.graph.getModel()),i.document.appendChild(e)}else e=this.graph.encodeCells(mxUtils$1.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells())));return(this.graph.view.translate.x!=0||this.graph.view.translate.y!=0)&&(e.setAttribute("dx",Math.round(this.graph.view.translate.x*100)/100),e.setAttribute("dy",Math.round(this.graph.view.translate.y*100)/100)),e.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),e.setAttribute("gridSize",this.graph.gridSize),e.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),e.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),e.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),e.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),e.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),e.setAttribute("page",this.graph.pageVisible?"1":"0"),e.setAttribute("pageScale",this.graph.pageScale),e.setAttribute("pageWidth",this.graph.pageFormat.width),e.setAttribute("pageHeight",this.graph.pageFormat.height),this.graph.background!=null&&e.setAttribute("background",this.graph.background),e};Editor$2.prototype.updateGraphComponents=function(){var t=this.graph;t.container!=null&&(t.view.validateBackground(),t.container.style.overflow=t.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject$1("updateGraphComponents")))};Editor$2.prototype.setModified=function(t){this.modified=t};Editor$2.prototype.setFilename=function(t){this.filename=t};Editor$2.prototype.createUndoManager=function(){var t=this.graph,e=new mxUndoManager;this.undoListener=function(r,l){e.undoableEditHappened(l.getProperty("edit"))};var i=mxUtils$1.bind(this,function(r,l){this.undoListener.apply(this,arguments)});t.getModel().addListener(mxEvent$1.UNDO,i),t.getView().addListener(mxEvent$1.UNDO,i);var n=function(r,l){var s=l.getProperty("edit").changes,a=t.getSelectionCellsForChanges(s),o=!1;if(a.length>0){for(var u=[],d=0;d<a.length;d++)t.view.getState(a[d])!=null&&(u.push(a[d]),o||(t.scrollCellToVisible(a[d]),o=!0));t.setSelectionCells(u)}};return e.addListener(mxEvent$1.UNDO,n),e.addListener(mxEvent$1.REDO,n),e};Editor$2.prototype.initStencilRegistry=function(){};Editor$2.prototype.destroy=function(){this.graph!=null&&(this.graph.destroy(),this.graph=null)};mxPopupMenu$1.prototype.zIndex-2;mxClient$1.IS_SVG||IMAGE_PATH+"";mxClient$1.IS_SVG||IMAGE_PATH+"";mxClient$1.IS_SVG||IMAGE_PATH+"";mxClient$1.IS_SVG||IMAGE_PATH+"";(function(){mxGraphView.prototype.validateBackgroundPage=function(){var s=this.graph;if(s.container!=null&&!s.transparentBackground){if(s.pageVisible){var a=this.getBackgroundPageBounds();if(this.backgroundPageShape==null){for(var o=s.container.firstChild;o!=null&&o.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)o=o.nextSibling;o!=null&&(this.backgroundPageShape=this.createBackgroundPageShape(a),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=mxConstants$1.DIALECT_STRICTHTML,this.backgroundPageShape.init(s.container),o.style.position="absolute",s.container.insertBefore(this.backgroundPageShape.node,o),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent$1.addListener(this.backgroundPageShape.node,"dblclick",mxUtils$1.bind(this,function(u){s.dblClick(u)})),mxEvent$1.addGestureListeners(this.backgroundPageShape.node,mxUtils$1.bind(this,function(u){s.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(u))}),mxUtils$1.bind(this,function(u){s.tooltipHandler!=null&&s.tooltipHandler.isHideOnHover()&&s.tooltipHandler.hide(),s.isMouseDown&&!mxEvent$1.isConsumed(u)&&s.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(u))}),mxUtils$1.bind(this,function(u){s.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(u))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=a,this.backgroundPageShape.redraw()}else this.backgroundPageShape!=null&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(s,a,o){var u=this.graph;s=s??1;var d=u.background==null||u.background==mxConstants$1.NONE?u.defaultPageBackgroundColor:u.background,p=d!=null&&this.gridColor!=d.toLowerCase()?this.gridColor:"#ffffff",c="none",g="";if(u.isGridEnabled()||u.gridVisible){var x=10;mxClient$1.IS_SVG?(c=unescape(encodeURIComponent(this.createSvgGrid(p,s))),c=window.btoa?btoa(c):Base64.encode(c,!0),c="url(data:image/svg+xml;base64,"+c+")",x=u.gridSize*this.scale*this.gridSteps*s):c="url("+this.gridImage+")";var C=0,T=0,A=a!=null?a-this.translate.x*this.scale:0,R=o!=null?o-this.translate.y*this.scale:0,_=u.gridSize*this.scale*this.gridSteps,N=A%_,H=R%_;if(u.view.backgroundPageShape!=null){var k=this.getBackgroundPageBounds();C=1+k.x,T=1+k.y}g=-Math.round(x-mxUtils$1.mod(this.translate.x*this.scale-C+A,x)+N*s)+"px "+-Math.round(x-mxUtils$1.mod(this.translate.y*this.scale-T+R,x)+H*s)+"px"}var K=u.view.canvas;K.ownerSVGElement!=null&&(K=K.ownerSVGElement);var Q=!Editor$2.isDarkMode()&&u.enableDiagramBackground;u.view.backgroundPageShape!=null?(u.view.backgroundPageShape.node.style.backgroundPosition=g,u.view.backgroundPageShape.node.style.backgroundImage=c,u.view.backgroundPageShape.node.style.backgroundColor=d,u.view.backgroundPageShape.node.style.borderColor=u.defaultPageBorderColor,u.container.classList.add("geDiagramBackdrop"),K.style.backgroundImage="none",K.style.backgroundColor="",Q?u.container.style.backgroundColor=u.diagramBackgroundColor:u.container.style.backgroundColor=""):(u.container.classList.remove("geDiagramBackdrop"),K.style.backgroundPosition=g,K.style.backgroundImage=c,Q&&(u.background==null||u.background==mxConstants$1.NONE)?(K.style.backgroundColor=u.diagramBackgroundColor,u.container.style.backgroundColor=""):K.style.backgroundColor=d)},mxGraphView.prototype.createSvgGrid=function(s,a){a=a??1;for(var o=this.graph.gridSize*this.scale*a;o<this.minGridSize;)o*=2;for(var u=this.gridSteps*o,d=[],p=1;p<this.gridSteps;p++){var c=p*o;d.push("M 0 "+c+" L "+u+" "+c+" M "+c+" 0 L "+c+" "+u)}var g=u,x='<svg width="'+g+'" height="'+g+'" xmlns="'+mxConstants$1.NS_SVG+'"><defs><pattern id="grid" width="'+u+'" height="'+u+'" patternUnits="userSpaceOnUse"><path d="'+d.join(" ")+'" fill="none" stroke="'+s+'" opacity="0.2" stroke-width="1"/><path d="M '+u+" 0 L 0 0 0 "+u+'" fill="none" stroke="'+s+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>';return x};var t=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(s,a){if(t.apply(this,arguments),this.shiftPreview1!=null){var o=this.view.canvas;o.ownerSVGElement!=null&&(o=o.ownerSVGElement);var u=this.gridSize*this.view.scale*this.view.gridSteps,d=-Math.round(u-mxUtils$1.mod(this.view.translate.x*this.view.scale+s,u))+"px "+-Math.round(u-mxUtils$1.mod(this.view.translate.y*this.view.scale+a,u))+"px";o.style.backgroundPosition=d}},mxGraph.prototype.updatePageBreaks=function(s,a,o){var u=this.view.scale,d=this.view.translate,p=this.pageFormat,c=u*this.pageScale,g=this.view.getBackgroundPageBounds();a=g.width,o=g.height;var x=new mxRectangle$1(u*d.x,u*d.y,p.width*c,p.height*c);s=s&&Math.min(x.width,x.height)>this.minPageBreakDist;var C=s?Math.ceil(o/x.height)-1:0,T=s?Math.ceil(a/x.width)-1:0,A=g.x+a,R=g.y+o;this.horizontalPageBreaks==null&&C>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&T>0&&(this.verticalPageBreaks=[]);var _=mxUtils$1.bind(this,function(N){if(N!=null){for(var H=N==this.horizontalPageBreaks?C:T,k=0;k<=H;k++){var K=N==this.horizontalPageBreaks?[new mxPoint$1(Math.round(g.x),Math.round(g.y+(k+1)*x.height)),new mxPoint$1(Math.round(A),Math.round(g.y+(k+1)*x.height))]:[new mxPoint$1(Math.round(g.x+(k+1)*x.width),Math.round(g.y)),new mxPoint$1(Math.round(g.x+(k+1)*x.width),Math.round(R))];if(N[k]!=null)N[k].points=K,N[k].redraw();else{var Q=new mxPolyline(K,this.pageBreakColor);Q.dialect=this.dialect,Q.isDashed=this.pageBreakDashed,Q.pointerEvents=!1,Q.init(this.view.backgroundPane),Q.redraw(),N[k]=Q}}for(var k=H;k<N.length;k++)N[k]!=null&&N[k].destroy();N.splice(H,N.length-H)}});_(this.horizontalPageBreaks),_(this.verticalPageBreaks)};var e=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(s,a,o){for(var u=0;u<a.length;u++){if(this.graph.isTableCell(a[u])||this.graph.isTableRow(a[u]))return!1;if(this.graph.getModel().isVertex(a[u])){var d=this.graph.getCellGeometry(a[u]);if(d!=null&&d.relative)return!1}}return e.apply(this,arguments)};var i=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var s=i.apply(this,arguments);return s.intersects=mxUtils$1.bind(this,function(a,o){return this.isConnecting()?!0:mxCellMarker.prototype.intersects.apply(s,arguments)}),s},mxGraphView.prototype.createBackgroundPageShape=function(s){return new mxRectangleShape$1(s,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var s=this.getGraphBounds(),a=s.width>0?s.x/this.scale-this.translate.x:0,o=s.height>0?s.y/this.scale-this.translate.y:0,u=s.width/this.scale,d=s.height/this.scale,p=this.graph.pageFormat,c=this.graph.pageScale,g=p.width*c,x=p.height*c,C=Math.floor(Math.min(0,a)/g),T=Math.floor(Math.min(0,o)/x),A=Math.ceil(Math.max(1,a+u)/g),R=Math.ceil(Math.max(1,o+d)/x),_=A-C,N=R-T,H=new mxRectangle$1(this.scale*(this.translate.x+C*g),this.scale*(this.translate.y+T*x),this.scale*_*g,this.scale*N*x);return H};var n=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(s,a){n.apply(this,arguments),this.dialect!=mxConstants$1.DIALECT_SVG&&this.view.backgroundPageShape!=null&&(!this.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.container))&&(this.view.backgroundPageShape.node.style.marginLeft=s+"px",this.view.backgroundPageShape.node.style.marginTop=a+"px")};var r=mxPopupMenu$1.prototype.addItem;mxPopupMenu$1.prototype.addItem=function(s,a,o,u,d,p){var c=r.apply(this,arguments);return p!=null&&!p&&mxEvent$1.addListener(c,"mousedown",function(g){mxEvent$1.consume(g)}),c};var l=mxGraphHandler.prototype.isPropagateSelectionCell;mxGraphHandler.prototype.isPropagateSelectionCell=function(s,a,o){var u=!1,d=this.graph.model.getParent(s);if(a){var p=this.graph.model.isEdge(s)?null:this.graph.getCellGeometry(s);u=!this.graph.model.isEdge(d)&&!this.graph.isSiblingSelected(s)&&(p!=null&&p.relative||!this.graph.isContainer(d)||this.graph.isPart(s))}else if(u=l.apply(this,arguments),this.graph.isTableCell(s)||this.graph.isTableRow(s)){var c=d;this.graph.isTable(c)||(c=this.graph.model.getParent(c)),u=!this.graph.selectionCellsHandler.isHandled(c)||this.graph.isCellSelected(c)&&this.graph.isToggleEvent(o.getEvent())||this.graph.isCellSelected(s)&&!this.graph.isToggleEvent(o.getEvent())||this.graph.isTableCell(s)&&this.graph.isCellSelected(d)}return u},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(s){for(var a=s.getCell(),o=this.graph.getModel(),u=o.getParent(a),d=this.graph.view.getState(u),p=this.graph.isCellSelected(a);d!=null&&(o.isVertex(u)||o.isEdge(u));){var c=this.graph.isCellSelected(u);p=p||c,(c||!p&&(this.graph.isTableCell(a)||this.graph.isTableRow(a)))&&(a=u),u=o.getParent(u)}return a}})();var FindWindow=function(t,e,i,n,r,l){var s=t.actions.get("findReplace"),a=t.editor.graph,o=null,u=null,d=!1,p=!1,c=null,g=0,x=1,C=document.createElement("div");C.style.userSelect="none",C.style.overflow="hidden",C.style.padding="10px",C.style.height="100%";var T=l?"260px":"200px",A=document.createElement("input");A.setAttribute("placeholder",mxResources$1.get("find")),A.setAttribute("type","text"),A.style.marginTop="4px",A.style.marginBottom="6px",A.style.width=T,A.style.fontSize="12px",A.style.borderRadius="4px",A.style.padding="6px",C.appendChild(A),mxUtils$1.br(C);var R;l&&(R=document.createElement("input"),R.setAttribute("placeholder",mxResources$1.get("replaceWith")),R.setAttribute("type","text"),R.style.marginTop="4px",R.style.marginBottom="6px",R.style.width=T,R.style.fontSize="12px",R.style.borderRadius="4px",R.style.padding="6px",C.appendChild(R),mxUtils$1.br(C),mxEvent$1.addListener(R,"input",nt));var _=document.createElement("input");_.setAttribute("id","geFindWinRegExChck"),_.setAttribute("type","checkbox"),_.style.marginRight="4px",C.appendChild(_);var N=document.createElement("label");N.setAttribute("for","geFindWinRegExChck"),C.appendChild(N),mxUtils$1.write(N,mxResources$1.get("regularExpression")),C.appendChild(N),mxUtils$1.br(C);var H=document.createElement("input");H.setAttribute("id","geFindWinAllPagesChck"),H.setAttribute("type","checkbox"),H.style.marginRight="4px",C.appendChild(H);var k=document.createElement("label");k.setAttribute("for","geFindWinAllPagesChck"),C.appendChild(k),mxUtils$1.write(k,mxResources$1.get("allPages")),C.appendChild(k);var K=document.createElement("div");function Q($t,Ct,pt){if(typeof Ct.value=="object"&&Ct.value.attributes!=null){for(var ct=Ct.value.attributes,Mt=0;Mt<ct.length;Mt++)if(ct[Mt].nodeName!="label"){var bt=mxUtils$1.trim(ct[Mt].nodeValue.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")).toLowerCase();if($t==null&&bt.indexOf(pt)>=0||$t!=null&&$t.test(bt))return!0}}return!1}function nt(){d?(U.removeAttribute("disabled"),lt.removeAttribute("disabled")):(U.setAttribute("disabled","disabled"),lt.setAttribute("disabled","disabled")),A.value?tt.removeAttribute("disabled"):tt.setAttribute("disabled","disabled")}function dt($t,Ct,pt){B.innerText="";var ct=a.model.getDescendants(a.model.getRoot()),Mt=A.value.toLowerCase(),bt=_.checked?new RegExp(Mt):null,Ot=null;c=null,o!=Mt&&(o=Mt,u=null,p=!1);var gt=u==null;if(Mt.length>0){if(p){p=!1;for(var Tt,Dt=0;Dt<t.pages.length;Dt++)if(t.currentPage==t.pages[Dt]){Tt=Dt;break}var vt=(Tt+1)%t.pages.length,Pt;u=null;do p=!1,Pt=t.pages[vt],a=t.createTemporaryGraph(a.getStylesheet()),t.updatePageRoot(Pt),a.model.setRoot(Pt.root),vt=(vt+1)%t.pages.length;while(!dt(!0,Ct,pt)&&vt!=Tt);return u&&(u=null,pt?t.editor.graph.model.execute(new SelectPage(t,Pt)):t.selectPage(Pt)),p=!1,a=t.editor.graph,dt(!0,Ct,pt)}var Dt;for(Dt=0;Dt<ct.length;Dt++){var zt=a.view.getState(ct[Dt]);if(Ct&&(gt=gt||zt==u),zt!=null&&zt.cell.value!=null&&(gt||Ot==null)&&(a.model.isVertex(zt.cell)||a.model.isEdge(zt.cell))){let kt;zt.style!=null&&zt.style.html=="1"?(K.innerHTML=a.sanitizeHtml(a.getLabel(zt.cell)),kt=mxUtils$1.extractTextWithWhitespace([K])):kt=a.getLabel(zt.cell),kt=mxUtils$1.trim(kt.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")).toLowerCase();var Rt=0;Ct&&l&&zt==u&&(kt=kt.substr(g),Rt=g);var Nt=R.value=="";if(bt==null&&(kt.indexOf(Mt)>=0||Nt&&Q(bt,zt.cell,Mt))||bt!=null&&(bt.test(kt)||Nt&&Q(bt,zt.cell,Mt))){if(l)if(bt!=null){var Bt=kt.match(bt);Bt!=null&&Bt.length>0&&(c=Bt[0].toLowerCase(),g=Rt+Bt.index+c.length)}else c=Mt,g=Rt+kt.indexOf(Mt)+c.length;if(gt){Ot=zt;break}else Ot==null&&(Ot=zt)}}gt=gt||zt==u}}if(Ot!=null){if(Dt==ct.length&&H.checked)return u=null,p=!0,dt(!0,Ct,pt);u=Ot,a.scrollCellToVisible(u.cell),a.isEnabled()&&!a.isCellLocked(u.cell)?!pt&&(a.getSelectionCell()!=u.cell||a.getSelectionCount()!=1)&&a.setSelectionCell(u.cell):a.highlightCell(u.cell)}else{if(!$t&&H.checked)return p=!0,dt(!0,Ct,pt);a.isEnabled()&&!pt&&a.clearSelection()}return d=Ot!=null,l&&!$t&&nt(),Mt.length==0||Ot!=null}mxUtils$1.br(C);var mt=document.createElement("div");mt.style.left="0px",mt.style.right="0px",mt.style.marginTop="6px",mt.style.padding="0 6px 0 6px",mt.style.textAlign="center",C.appendChild(mt);var xt=mxUtils$1.button(mxResources$1.get("reset"),function(){B.innerText="",A.value="",A.style.backgroundColor="",l&&(R.value="",nt()),u=null,o=null,p=!1,A.focus()});xt.setAttribute("title",mxResources$1.get("reset")),xt.style.float="none",xt.style.width="120px",xt.style.marginTop="6px",xt.style.marginLeft="8px",xt.style.overflow="hidden",xt.style.textOverflow="ellipsis",xt.className="geBtn",l||mt.appendChild(xt);var Y=mxUtils$1.button(mxResources$1.get("find"),function(){try{A.style.backgroundColor=dt()?"":Editor$2.isDarkMode()?"#ff0000":"#ffcfcf"}catch($t){t.handleError($t)}});Y.setAttribute("title",mxResources$1.get("find")+" (Enter)"),Y.style.float="none",Y.style.width="120px",Y.style.marginTop="6px",Y.style.marginLeft="8px",Y.style.overflow="hidden",Y.style.textOverflow="ellipsis",Y.className="geBtn gePrimaryBtn",mt.appendChild(Y);var B=document.createElement("div");if(B.style.marginTop="10px",!l)xt.style.width="90px",Y.style.width="90px";else{let $t=function(Ct,pt,Rt,Mt,bt){if(bt==null||bt.html!="1"){var Dt=Ct.toLowerCase().indexOf(pt,Mt);return Dt<0?Ct:Ct.substr(0,Dt)+Rt+Ct.substr(Dt+pt.length)}var Ot=Ct;pt=mxUtils$1.htmlEntities(pt,!1,!1,!1);var gt=[],Tt=-1;for(Ct=Ct.replace(/<br>/gi,`
`).replace(/(\s|\S)(<(BLOCKQUOTE|DIV|H1|H2|H3|H4|H5|H6|OL|P|PRE|TABLE|UL)[^>]*>)/gi,`$1
$2`);(Tt=Ct.indexOf("<",Tt+1))>-1;)gt.push(Tt);var vt=Ct.match(/<[^>]*>/g);Ct=Ct.replace(/<[^>]*>/g,"");var Pt=Ct.toLowerCase(),Dt=Pt.indexOf(pt,Mt);if(Dt<0)return Ot;for(var zt=Dt+pt.length,Rt=mxUtils$1.htmlEntities(Rt),Nt=Ct.substr(0,Dt)+Rt+Ct.substr(zt),Bt=0,kt=0;kt<gt.length;kt++){if(gt[kt]-Bt<Dt)Nt=Nt.substr(0,gt[kt])+vt[kt]+Nt.substr(gt[kt]);else if(gt[kt]-Bt<zt){var Xt=Dt+Bt;Nt=Nt.substr(0,Xt)+vt[kt]+Nt.substr(Xt)}else{var Xt=gt[kt]+(Rt.length-pt.length);Nt=Nt.substr(0,Xt)+vt[kt]+Nt.substr(Xt)}Bt+=vt[kt].length}return Nt.replace(/\n(<(BLOCKQUOTE|DIV|H1|H2|H3|H4|H5|H6|OL|P|PRE|TABLE|UL)[^>]*>)/gi,"$1").replace(/\n/g,"<br>")};var ft=$t,U=mxUtils$1.button(mxResources$1.get("replFind"),function(){try{if(c!=null&&u!=null){var Ct=u.cell,pt=a.getLabel(Ct);a.isCellEditable(Ct)&&a.model.setValue(Ct,$t(pt,c,R.value,g-c.length,a.getCurrentCellStyle(Ct))),A.style.backgroundColor=dt(!1,!0)?"":Editor$2.isDarkMode()?"#ff0000":"#ffcfcf"}}catch(ct){t.handleError(ct)}});U.setAttribute("title",mxResources$1.get("replFind")),U.style.float="none",U.style.width="120px",U.style.marginTop="6px",U.style.marginLeft="8px",U.style.overflow="hidden",U.style.textOverflow="ellipsis",U.className="geBtn gePrimaryBtn",U.setAttribute("disabled","disabled"),mt.appendChild(U),mxUtils$1.br(mt);var lt=mxUtils$1.button(mxResources$1.get("replace"),function(){try{if(c!=null&&u!=null){var Ct=u.cell,pt=a.getLabel(Ct);a.model.setValue(Ct,$t(pt,c,R.value,g-c.length,a.getCurrentCellStyle(Ct))),U.setAttribute("disabled","disabled"),lt.setAttribute("disabled","disabled")}}catch(ct){t.handleError(ct)}});lt.setAttribute("title",mxResources$1.get("replace")),lt.style.float="none",lt.style.width="120px",lt.style.marginTop="6px",lt.style.marginLeft="8px",lt.style.overflow="hidden",lt.style.textOverflow="ellipsis",lt.className="geBtn gePrimaryBtn",lt.setAttribute("disabled","disabled"),mt.appendChild(lt);var tt=mxUtils$1.button(mxResources$1.get("replaceAll"),function(){B.innerText="",o=null;var Ct=t.currentPage,pt=t.editor.graph.getSelectionCells();t.editor.graph.rendering=!1,a.getModel().beginUpdate();try{for(var ct=0,Mt={};dt(!1,!0,!0)&&ct<100;){var bt=u.cell,Ot=a.getLabel(bt),gt=Mt[bt.id];if(gt&&gt.replAllMrk==x&&gt.replAllPos>=g)break;Mt[bt.id]={replAllMrk:x,replAllPos:g},a.isCellEditable(bt)&&(a.model.setValue(bt,$t(Ot,c,R.value,g-c.length,a.getCurrentCellStyle(bt))),ct++)}Ct!=t.currentPage&&t.editor.graph.model.execute(new SelectPage(t,Ct)),mxUtils$1.write(B,mxResources$1.get("matchesRepl",[ct]))}catch(Tt){t.handleError(Tt)}finally{a.getModel().endUpdate(),t.editor.graph.setSelectionCells(pt),t.editor.graph.rendering=!0}x++});tt.setAttribute("title",mxResources$1.get("replaceAll")),tt.style.float="none",tt.style.width="120px",tt.style.marginTop="6px",tt.style.marginLeft="8px",tt.style.overflow="hidden",tt.style.textOverflow="ellipsis",tt.className="geBtn gePrimaryBtn",tt.setAttribute("disabled","disabled"),mt.appendChild(tt),mxUtils$1.br(mt),mt.appendChild(xt);var st=mxUtils$1.button(mxResources$1.get("close"),mxUtils$1.bind(this,function(){this.window.setVisible(!1)}));st.setAttribute("title",mxResources$1.get("close")),st.style.float="none",st.style.width="120px",st.style.marginTop="6px",st.style.marginLeft="8px",st.style.overflow="hidden",st.style.textOverflow="ellipsis",st.className="geBtn",mt.appendChild(st),mxUtils$1.br(mt),mt.appendChild(B)}mxEvent$1.addListener(A,"keyup",function($t){if($t.keyCode==91||$t.keyCode==93||$t.keyCode==17)mxEvent$1.consume($t);else if($t.keyCode==27)s.funct();else if(o!=A.value.toLowerCase()||$t.keyCode==13)try{A.style.backgroundColor=dt()?"":Editor$2.isDarkMode()?"#ff0000":"#ffcfcf"}catch{A.style.backgroundColor=Editor$2.isDarkMode()?"#ff0000":"#ffcfcf"}}),mxEvent$1.addListener(C,"keydown",function($t){$t.keyCode==70&&t.keyHandler.isControlDown($t)&&!mxEvent$1.isShiftDown($t)&&(s.funct(),mxEvent$1.consume($t))}),this.window=new mxWindow$1(mxResources$1.get("find")+(l?"/"+mxResources$1.get("replace"):""),C,e,i,n,r,!0,!0),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!1),this.window.setClosable(!0),this.window.addListener("show",mxUtils$1.bind(this,function(){this.window.fit(),this.window.isVisible()?(A.focus(),mxClient$1.IS_GC||mxClient$1.IS_FF||document.documentMode>=5?A.select():document.execCommand("selectAll",!1,null),t.pages!=null&&t.pages.length>1?H.removeAttribute("disabled"):(H.checked=!1,H.setAttribute("disabled","disabled"))):a.container.focus()})),t.installResizeHandler(this,!1)};const OutlineWindow=function(t,e,i,n,r){var l=t.editor.graph,s=document.createElement("div");s.style.position="absolute",s.style.width="100%",s.style.height="100%",s.style.overflow="hidden",this.window=new mxWindow$1(mxResources$1.get("outline"),s,e,i,n,r,!0,!0),this.window.minimumSize=new mxRectangle$1(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0);var a=t.createOutline(this.window);t.installResizeHandler(this,!0,function(){a.destroy()}),this.window.addListener(mxEvent$1.SHOW,mxUtils$1.bind(this,function(){this.window.fit(),a.setSuspended(!1)})),this.window.addListener(mxEvent$1.HIDE,mxUtils$1.bind(this,function(){a.setSuspended(!0)})),this.window.addListener(mxEvent$1.NORMALIZE,mxUtils$1.bind(this,function(){a.setSuspended(!1)})),this.window.addListener(mxEvent$1.MINIMIZE,mxUtils$1.bind(this,function(){a.setSuspended(!0)})),a.init(s),mxEvent$1.addMouseWheelListener(function(o,u){for(var d=!1,p=mxEvent$1.getSource(o);p!=null;){if(p==a.svg){d=!0;break}p=p.parentNode}if(d){var c=l.zoomFactor;o.deltaY!=null&&Math.round(o.deltaY)!=o.deltaY&&(c=1+Math.abs(o.deltaY)/20*(c-1)),l.lazyZoom(u,null,null,c),mxEvent$1.consume(o)}})},initFindWindow=t=>{const e=t.editor.graph,i=t.actions.addAction("findReplace",mxUtils$1.bind(t,function(n,r){var l=e.isEnabled()&&(r==null||!mxEvent$1.isShiftDown(r)),s=l?"findReplace":"find",a=s+"Window";if(this[a]==null){var o=Editor$2.currentTheme=="min"||Editor$2.currentTheme=="simple"||Editor$2.currentTheme=="sketch",u=l?o?330:300:240,d=l?o?304:288:170;this[a]=new FindWindow(t,document.body.offsetWidth-(u+20),100,u,d,l),this[a].window.addListener("show",function(){t.fireEvent(new mxEventObject$1(s))}),this[a].window.addListener("hide",function(){t.fireEvent(new mxEventObject$1(s))}),this[a].window.setVisible(!0)}else this[a].window.setVisible(!this[a].window.isVisible())}),null,null,Editor$2.ctrlKey+"+F");i.setToggleAction(!0),i.setSelectedCallback(mxUtils$1.bind(void 0,function(){var n=e.isEnabled()?"findReplaceWindow":"findWindow";return this[n]!=null&&this[n].window.isVisible()})),t.keyHandler.bindAction(70,!0,"findReplace")},useHierarchicalLayout=t=>{t.actions.addAction("horizontalFlow",mxUtils$1.bind(t,function(e,i){const n=t.editor.graph;new mxHierarchicalLayout$1(n,mxConstants$1.DIRECTION_WEST).execute(n.getDefaultParent())}),null,null,Editor$2.ctrlKey+"+L"),t.keyHandler.bindAction(76,!0,"horizontalFlow")},showOutlineWindow=t=>{t.actions.get("outline").funct();const e=t.actions.outlineWindow.window.div;e.style.top="0px",e.style.right="0px",e.style.left=null},useCanvasViewerActions$1=t=>{initFindWindow(t),useHierarchicalLayout(t),showOutlineWindow(t)};(function(){function t(m,E,$){mxShape$1.call(this),this.line=m,this.stroke=E,this.strokewidth=$??1,this.updateBoundsFromLine()}mxUtils$1.extend(t,mxShape$1),t.prototype.updateBoundsFromLine=function(){var m=null;if(this.line!=null)for(var E=0;E<this.line.length;E++){var $=this.line[E];if($!=null){var f=new mxRectangle$1($.x,$.y,this.strokewidth,this.strokewidth);m==null?m=f:m.add(f)}}this.bounds=m??new mxRectangle$1},t.prototype.paintVertexShape=function(m,E,$,f,v){this.paintTableLine(m,this.line,0,0)},t.prototype.paintTableLine=function(m,E,$,f){if(E!=null){var v=null;m.begin();for(var b=0;b<E.length;b++){var y=E[b];y!=null&&(v==null?m.moveTo(y.x+$,y.y+f):v!=null&&m.lineTo(y.x+$,y.y+f)),v=y}m.end(),m.stroke()}},t.prototype.intersectsRectangle=function(m){var E=!1;if(mxShape$1.prototype.intersectsRectangle.apply(this,arguments)&&this.line!=null)for(var $=null,f=0;f<this.line.length&&!E;f++){var v=this.line[f];v!=null&&$!=null&&(E=mxUtils$1.rectangleIntersectsSegment(m,$,v)),$=v}return E},mxCellRenderer.registerShape("tableLine",t);function e(){mxSwimlane.call(this)}mxUtils$1.extend(e,mxSwimlane),e.prototype.getLabelBounds=function(m){var E=this.getTitleSize();return E==0?mxShape$1.prototype.getLabelBounds.apply(this,arguments):mxSwimlane.prototype.getLabelBounds.apply(this,arguments)},e.prototype.paintVertexShape=function(m,E,$,f,v){var b=this.state!=null?this.state.view.graph.isCellCollapsed(this.state.cell):!1,y=this.isHorizontal(),G=this.getTitleSize();G==0||this.outline?le.prototype.paintVertexShape.apply(this,arguments):(mxSwimlane.prototype.paintVertexShape.apply(this,arguments),m.translate(-E,-$)),!b&&!this.outline&&(y&&G<v||!y&&G<f)&&this.paintForeground(m,E,$,f,v)},e.prototype.paintForeground=function(m,E,$,f,v){if(this.state!=null){var b=this.flipH,y=this.flipV;if(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH){var G=b;b=y,y=G}m.rotate(-this.getShapeRotation(),b,y,E+f/2,$+v/2);var M=this.scale;E=this.bounds.x/M,$=this.bounds.y/M,f=this.bounds.width/M,v=this.bounds.height/M,this.paintTableForeground(m,E,$,f,v)}},e.prototype.paintTableForeground=function(m,E,$,f,v){for(var b=this.state.view.graph.getTableLines(this.state.cell,mxUtils$1.getValue(this.state.style,"rowLines","1")!="0",mxUtils$1.getValue(this.state.style,"columnLines","1")!="0"),y=0;y<b.length;y++)t.prototype.paintTableLine(m,b[y],E,$)},e.prototype.configurePointerEvents=function(m){var E=this.getTitleSize();E==0?m.pointerEvents=!1:mxSwimlane.prototype.configurePointerEvents.apply(this,arguments)},mxCellRenderer.registerShape("table",e);function i(){e.call(this)}mxUtils$1.extend(i,e),i.prototype.paintForeground=function(){},mxCellRenderer.registerShape("tableRow",i);function n(){mxCylinder.call(this)}mxUtils$1.extend(n,mxCylinder),n.prototype.size=20,n.prototype.darkOpacity=0,n.prototype.darkOpacity2=0,n.prototype.paintVertexShape=function(m,E,$,f,v){var b=Math.max(0,Math.min(f,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),y=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity",this.darkOpacity)))),G=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity2",this.darkOpacity2))));m.translate(E,$),m.begin(),m.moveTo(0,0),m.lineTo(f-b,0),m.lineTo(f,b),m.lineTo(f,v),m.lineTo(b,v),m.lineTo(0,v-b),m.lineTo(0,0),m.close(),m.end(),m.fillAndStroke(),this.outline||(m.setShadow(!1),y!=0&&(m.setFillAlpha(Math.abs(y)),m.setFillColor(y<0?"#FFFFFF":"#000000"),m.begin(),m.moveTo(0,0),m.lineTo(f-b,0),m.lineTo(f,b),m.lineTo(b,b),m.close(),m.fill()),G!=0&&(m.setFillAlpha(Math.abs(G)),m.setFillColor(G<0?"#FFFFFF":"#000000"),m.begin(),m.moveTo(0,0),m.lineTo(b,b),m.lineTo(b,v),m.lineTo(0,v-b),m.close(),m.fill()),m.begin(),m.moveTo(b,v),m.lineTo(b,b),m.lineTo(0,0),m.moveTo(b,b),m.lineTo(f,b),m.end(),m.stroke())},n.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale;return new mxRectangle$1(E,E,0,0)}return null},mxCellRenderer.registerShape("cube",n);var r=Math.tan(mxUtils$1.toRadians(30)),l=(.5-r)/2;mxCellRenderer.registerShape("isoRectangle",o);function s(){mxConnector.call(this)}mxUtils$1.extend(s,mxConnector),s.prototype.paintEdgeShape=function(m,E){var $=this.createMarker(m,E,!0),f=this.createMarker(m,E,!1);m.setDashed(!1),mxPolyline.prototype.paintEdgeShape.apply(this,arguments),this.isDashed!=null&&m.setDashed(this.isDashed,this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FIX_DASH,!1)==1:!1),m.setShadow(!1),m.setStrokeColor(this.fill),mxPolyline.prototype.paintEdgeShape.apply(this,arguments),m.setStrokeColor(this.stroke),m.setFillColor(this.stroke),m.setDashed(!1),$!=null&&$(),f!=null&&f()},mxCellRenderer.registerShape("wire",s);function a(){mxCylinder.call(this)}mxUtils$1.extend(a,mxCylinder),a.prototype.size=6,a.prototype.paintVertexShape=function(m,E,$,f,v){m.setFillColor(this.stroke);var b=Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))-2)+2*this.strokewidth;m.ellipse(E+(f-b)*.5,$+(v-b)*.5,b,b),m.fill(),m.setFillColor(mxConstants$1.NONE),m.rect(E,$,f,v),m.fill()},mxCellRenderer.registerShape("waypoint",a);function o(){mxActor.call(this)}mxUtils$1.extend(o,mxActor),o.prototype.size=20,o.prototype.redrawPath=function(m,E,$,f,v){var b=Math.min(f,v/r);m.translate((f-b)/2,(v-b)/2+b/4),m.moveTo(0,.25*b),m.lineTo(.5*b,b*l),m.lineTo(b,.25*b),m.lineTo(.5*b,(.5-l)*b),m.lineTo(0,.25*b),m.close(),m.end()},mxCellRenderer.registerShape("isoRectangle",o);function u(){mxCylinder.call(this)}mxUtils$1.extend(u,mxCylinder),u.prototype.size=20,u.prototype.redrawPath=function(m,E,$,f,v,b){var y=Math.min(f,v/(.5+r));b?(m.moveTo(0,.25*y),m.lineTo(.5*y,(.5-l)*y),m.lineTo(y,.25*y),m.moveTo(.5*y,(.5-l)*y),m.lineTo(.5*y,(1-l)*y),m.end()):(m.translate((f-y)/2,(v-y)/2),m.moveTo(0,.25*y),m.lineTo(.5*y,y*l),m.lineTo(y,.25*y),m.lineTo(y,.75*y),m.lineTo(.5*y,(1-l)*y),m.lineTo(0,.75*y),m.close(),m.end())},mxCellRenderer.registerShape("isoCube",u);function d(){mxCylinder.call(this)}mxUtils$1.extend(d,mxCylinder),d.prototype.redrawPath=function(m,E,$,f,v,b){var y=Math.min(v/2,Math.round(v/8)+this.strokewidth-1);(b&&this.fill!=null||!b&&this.fill==null)&&(m.moveTo(0,y),m.curveTo(0,2*y,f,2*y,f,y),b||(m.stroke(),m.begin()),m.translate(0,y/2),m.moveTo(0,y),m.curveTo(0,2*y,f,2*y,f,y),b||(m.stroke(),m.begin()),m.translate(0,y/2),m.moveTo(0,y),m.curveTo(0,2*y,f,2*y,f,y),b||(m.stroke(),m.begin()),m.translate(0,-y)),b||(m.moveTo(0,y),m.curveTo(0,-y/3,f,-y/3,f,y),m.lineTo(f,v-y),m.curveTo(f,v+y/3,0,v+y/3,0,v-y),m.close())},d.prototype.getLabelMargins=function(m){return new mxRectangle$1(0,2.5*Math.min(m.height/2,Math.round(m.height/8)+this.strokewidth-1),0,0)},mxCellRenderer.registerShape("datastore",d);function p(){mxCylinder.call(this)}mxUtils$1.extend(p,mxCylinder),p.prototype.size=30,p.prototype.darkOpacity=0,p.prototype.paintVertexShape=function(m,E,$,f,v){var b=Math.max(0,Math.min(f,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),y=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity",this.darkOpacity))));m.translate(E,$),m.begin(),m.moveTo(0,0),m.lineTo(f-b,0),m.lineTo(f,b),m.lineTo(f,v),m.lineTo(0,v),m.lineTo(0,0),m.close(),m.end(),m.fillAndStroke(),this.outline||(m.setShadow(!1),y!=0&&(m.setFillAlpha(Math.abs(y)),m.setFillColor(y<0?"#FFFFFF":"#000000"),m.begin(),m.moveTo(f-b,0),m.lineTo(f-b,b),m.lineTo(f,b),m.close(),m.fill()),m.begin(),m.moveTo(f-b,0),m.lineTo(f-b,b),m.lineTo(f,b),m.end(),m.stroke())},mxCellRenderer.registerShape("note",p);function c(){p.call(this)}mxUtils$1.extend(c,p),mxCellRenderer.registerShape("note2",c),c.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"size",15);return new mxRectangle$1(0,Math.min(m.height*this.scale,E*this.scale),0,0)}return null};function g(){mxShape$1.call(this)}mxUtils$1.extend(g,mxShape$1),g.prototype.isoAngle=15,g.prototype.paintVertexShape=function(m,E,$,f,v){var b=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,y=Math.min(f*Math.tan(b),v*.5);m.translate(E,$),m.begin(),m.moveTo(f*.5,0),m.lineTo(f,y),m.lineTo(f,v-y),m.lineTo(f*.5,v),m.lineTo(0,v-y),m.lineTo(0,y),m.close(),m.fillAndStroke(),m.setShadow(!1),m.begin(),m.moveTo(0,y),m.lineTo(f*.5,2*y),m.lineTo(f,y),m.moveTo(f*.5,2*y),m.lineTo(f*.5,v),m.stroke()},mxCellRenderer.registerShape("isoCube2",g);function x(){mxShape$1.call(this)}mxUtils$1.extend(x,mxShape$1),x.prototype.size=15,x.prototype.paintVertexShape=function(m,E,$,f,v){var b=Math.max(0,Math.min(v*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));m.translate(E,$),b==0?(m.rect(0,0,f,v),m.fillAndStroke()):(m.begin(),m.moveTo(0,b),m.arcTo(f*.5,b,0,0,1,f*.5,0),m.arcTo(f*.5,b,0,0,1,f,b),m.lineTo(f,v-b),m.arcTo(f*.5,b,0,0,1,f*.5,v),m.arcTo(f*.5,b,0,0,1,0,v-b),m.close(),m.fillAndStroke(),m.setShadow(!1),m.begin(),m.moveTo(f,b),m.arcTo(f*.5,b,0,0,1,f*.5,2*b),m.arcTo(f*.5,b,0,0,1,0,b),m.stroke())},mxCellRenderer.registerShape("cylinder2",x);function C(m,E,$,f){mxShape$1.call(this),this.bounds=m,this.fill=E,this.stroke=$,this.strokewidth=f??1}mxUtils$1.extend(C,mxCylinder),C.prototype.size=15,C.prototype.paintVertexShape=function(m,E,$,f,v){var b=Math.max(0,Math.min(v*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=mxUtils$1.getValue(this.style,"lid",!0);m.translate(E,$),b==0?(m.rect(0,0,f,v),m.fillAndStroke()):(m.begin(),y?(m.moveTo(0,b),m.arcTo(f*.5,b,0,0,1,f*.5,0),m.arcTo(f*.5,b,0,0,1,f,b)):(m.moveTo(0,0),m.arcTo(f*.5,b,0,0,0,f*.5,b),m.arcTo(f*.5,b,0,0,0,f,0)),m.lineTo(f,v-b),m.arcTo(f*.5,b,0,0,1,f*.5,v),m.arcTo(f*.5,b,0,0,1,0,v-b),m.close(),m.fillAndStroke(),m.setShadow(!1),y&&(m.begin(),m.moveTo(f,b),m.arcTo(f*.5,b,0,0,1,f*.5,2*b),m.arcTo(f*.5,b,0,0,1,0,b),m.stroke()))},mxCellRenderer.registerShape("cylinder3",C);function T(){mxActor.call(this)}mxUtils$1.extend(T,mxActor),T.prototype.redrawPath=function(m,E,$,f,v){var b=.5;m.moveTo(0,0),m.quadTo(f/2,v*b,f,0),m.quadTo(f*(1-b),v/2,f,v),m.quadTo(f/2,v*(1-b),0,v),m.quadTo(f*b,v/2,0,0),m.end()},mxCellRenderer.registerShape("switch",T);function A(){mxCylinder.call(this)}mxUtils$1.extend(A,mxCylinder),A.prototype.tabWidth=60,A.prototype.tabHeight=20,A.prototype.tabPosition="right",A.prototype.arcSize=.1,A.prototype.paintVertexShape=function(m,E,$,f,v){m.translate(E,$);var b=Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"tabWidth",this.tabWidth)))),y=Math.max(0,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"tabHeight",this.tabHeight)))),G=mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition),M=mxUtils$1.getValue(this.style,"rounded",!1),rt=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),F=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));rt||(F=Math.min(f,v)*F),F=Math.min(F,f*.5,(v-y)*.5),b=Math.max(b,F),b=Math.min(f-F,b),M||(F=0),m.begin(),G=="left"?(m.moveTo(Math.max(F,0),y),m.lineTo(Math.max(F,0),0),m.lineTo(b,0),m.lineTo(b,y)):(m.moveTo(f-b,y),m.lineTo(f-b,0),m.lineTo(f-Math.max(F,0),0),m.lineTo(f-Math.max(F,0),y)),M?(m.moveTo(0,F+y),m.arcTo(F,F,0,0,1,F,y),m.lineTo(f-F,y),m.arcTo(F,F,0,0,1,f,F+y),m.lineTo(f,v-F),m.arcTo(F,F,0,0,1,f-F,v),m.lineTo(F,v),m.arcTo(F,F,0,0,1,0,v-F)):(m.moveTo(0,y),m.lineTo(f,y),m.lineTo(f,v),m.lineTo(0,v)),m.close(),m.fillAndStroke(),m.setShadow(!1);var z=mxUtils$1.getValue(this.style,"folderSymbol",null);z=="triangle"&&(m.begin(),m.moveTo(f-30,y+20),m.lineTo(f-20,y+10),m.lineTo(f-10,y+20),m.close(),m.stroke())},mxCellRenderer.registerShape("folder",A),A.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale;if(mxUtils$1.getValue(this.style,"labelInHeader",!1)){var $=mxUtils$1.getValue(this.style,"tabWidth",15)*this.scale,E=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale,f=mxUtils$1.getValue(this.style,"rounded",!1),v=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),b=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));return v||(b=Math.min(m.width,m.height)*b),b=Math.min(b,m.width*.5,(m.height-E)*.5),f||(b=0),mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition)=="left"?new mxRectangle$1(b,0,Math.min(m.width,m.width-$),Math.min(m.height,m.height-E)):new mxRectangle$1(Math.min(m.width,m.width-$),0,b,Math.min(m.height,m.height-E))}else return new mxRectangle$1(0,Math.min(m.height,E),0,0)}return null};function R(){mxCylinder.call(this)}mxUtils$1.extend(R,mxCylinder),R.prototype.arcSize=.1,R.prototype.paintVertexShape=function(m,E,$,f,v){m.translate(E,$);var b=mxUtils$1.getValue(this.style,"rounded",!1),y=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),G=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize)),M=mxUtils$1.getValue(this.style,"umlStateConnection",null);y||(G=Math.min(f,v)*G),G=Math.min(G,f*.5,v*.5),b||(G=0);var rt=0;M!=null&&(rt=10),m.begin(),m.moveTo(rt,G),m.arcTo(G,G,0,0,1,rt+G,0),m.lineTo(f-G,0),m.arcTo(G,G,0,0,1,f,G),m.lineTo(f,v-G),m.arcTo(G,G,0,0,1,f-G,v),m.lineTo(rt+G,v),m.arcTo(G,G,0,0,1,rt,v-G),m.close(),m.fillAndStroke(),m.setShadow(!1);var F=mxUtils$1.getValue(this.style,"umlStateSymbol",null);F=="collapseState"&&(m.roundrect(f-40,v-20,10,10,3,3),m.stroke(),m.roundrect(f-20,v-20,10,10,3,3),m.stroke(),m.begin(),m.moveTo(f-30,v-15),m.lineTo(f-20,v-15),m.stroke()),M=="connPointRefEntry"?(m.ellipse(0,v*.5-10,20,20),m.fillAndStroke()):M=="connPointRefExit"&&(m.ellipse(0,v*.5-10,20,20),m.fillAndStroke(),m.begin(),m.moveTo(5,v*.5-5),m.lineTo(15,v*.5+5),m.moveTo(15,v*.5-5),m.lineTo(5,v*.5+5),m.stroke())},R.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"umlStateConnection",null);if(E!=null)return new mxRectangle$1(10*this.scale,0,0,0)}return null},mxCellRenderer.registerShape("umlState",R);function _(){mxActor.call(this)}mxUtils$1.extend(_,mxActor),_.prototype.size=30,_.prototype.isRoundable=function(){return!0},_.prototype.redrawPath=function(m,E,$,f,v){var b=Math.max(0,Math.min(f,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),y=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(b,0),new mxPoint$1(f,0),new mxPoint$1(f,v),new mxPoint$1(0,v),new mxPoint$1(0,b)],this.isRounded,y,!0),m.end()},mxCellRenderer.registerShape("card",_);function N(){mxActor.call(this)}mxUtils$1.extend(N,mxActor),N.prototype.size=.4,N.prototype.redrawPath=function(m,E,$,f,v){var b=v*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=1.4;m.moveTo(0,b/2),m.quadTo(f/4,b*y,f/2,b/2),m.quadTo(f*3/4,b*(1-y),f,b/2),m.lineTo(f,v-b/2),m.quadTo(f*3/4,v-b*y,f/2,v-b/2),m.quadTo(f/4,v-b*(1-y),0,v-b/2),m.lineTo(0,b/2),m.close(),m.end()},N.prototype.getLabelBounds=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"size",this.size),$=m.width,f=m.height;if(this.direction==null||this.direction==mxConstants$1.DIRECTION_EAST||this.direction==mxConstants$1.DIRECTION_WEST){var v=f*E;return new mxRectangle$1(m.x,m.y+v,$,f-2*v)}else{var b=$*E;return new mxRectangle$1(m.x+b,m.y,$-2*b,f)}}return m},mxCellRenderer.registerShape("tape",N);function H(){mxActor.call(this)}mxUtils$1.extend(H,mxActor),H.prototype.size=.3,H.prototype.getLabelMargins=function(m){return mxUtils$1.getValue(this.style,"boundedLbl",!1)?new mxRectangle$1(0,0,0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*m.height):null},H.prototype.redrawPath=function(m,E,$,f,v){var b=v*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=1.4;m.moveTo(0,0),m.lineTo(f,0),m.lineTo(f,v-b/2),m.quadTo(f*3/4,v-b*y,f/2,v-b/2),m.quadTo(f/4,v-b*(1-y),0,v-b/2),m.lineTo(0,b/2),m.close(),m.end()},mxCellRenderer.registerShape("document",H);var k=mxCylinder.prototype.getCylinderSize;mxCylinder.prototype.getCylinderSize=function(m,E,$,f){var v=mxUtils$1.getValue(this.style,"size");return v!=null?f*Math.max(0,Math.min(1,v)):k.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"size",.15)*2;return new mxRectangle$1(0,Math.min(this.maxHeight*this.scale,m.height*E),0,0)}return null},C.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"size",15);return mxUtils$1.getValue(this.style,"lid",!0)||(E/=2),new mxRectangle$1(0,Math.min(m.height*this.scale,E*2*this.scale),0,Math.max(0,E*.3*this.scale))}return null},A.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale;if(mxUtils$1.getValue(this.style,"labelInHeader",!1)){var $=mxUtils$1.getValue(this.style,"tabWidth",15)*this.scale,E=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale,f=mxUtils$1.getValue(this.style,"rounded",!1),v=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),b=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));return v||(b=Math.min(m.width,m.height)*b),b=Math.min(b,m.width*.5,(m.height-E)*.5),f||(b=0),mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition)=="left"?new mxRectangle$1(b,0,Math.min(m.width,m.width-$),Math.min(m.height,m.height-E)):new mxRectangle$1(Math.min(m.width,m.width-$),0,b,Math.min(m.height,m.height-E))}else return new mxRectangle$1(0,Math.min(m.height,E),0,0)}return null},R.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"umlStateConnection",null);if(E!=null)return new mxRectangle$1(10*this.scale,0,0,0)}return null},c.prototype.getLabelMargins=function(m){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var E=mxUtils$1.getValue(this.style,"size",15);return new mxRectangle$1(0,Math.min(m.height*this.scale,E*this.scale),0,Math.max(0,E*this.scale))}return null};function K(){mxActor.call(this)}mxUtils$1.extend(K,mxActor),K.prototype.size=.2,K.prototype.fixedSize=20,K.prototype.isRoundable=function(){return!0},K.prototype.redrawPath=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",y=b?Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,v),new mxPoint$1(y,0),new mxPoint$1(f,0),new mxPoint$1(f-y,v)],this.isRounded,G,!0),m.end()},mxCellRenderer.registerShape("parallelogram",K);function Q(){mxActor.call(this)}mxUtils$1.extend(Q,mxActor),Q.prototype.size=.2,Q.prototype.fixedSize=20,Q.prototype.isRoundable=function(){return!0},Q.prototype.redrawPath=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",y=b?Math.max(0,Math.min(f*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):f*Math.max(0,Math.min(.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,v),new mxPoint$1(y,0),new mxPoint$1(f-y,0),new mxPoint$1(f,v)],this.isRounded,G,!0)},mxCellRenderer.registerShape("trapezoid",Q);function nt(){mxActor.call(this)}mxUtils$1.extend(nt,mxActor),nt.prototype.size=.5,nt.prototype.redrawPath=function(m,E,$,f,v){m.setFillColor(null);var b=f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(f,0),new mxPoint$1(b,0),new mxPoint$1(b,v/2),new mxPoint$1(0,v/2),new mxPoint$1(b,v/2),new mxPoint$1(b,v),new mxPoint$1(f,v)],this.isRounded,y,!1),m.end()},mxCellRenderer.registerShape("curlyBracket",nt);function dt(){mxActor.call(this)}mxUtils$1.extend(dt,mxActor),dt.prototype.redrawPath=function(m,E,$,f,v){m.setStrokeWidth(1),m.setFillColor(this.stroke);var b=f/5;m.rect(0,0,b,v),m.fillAndStroke(),m.rect(2*b,0,b,v),m.fillAndStroke(),m.rect(4*b,0,b,v),m.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",dt);function mt(m,E){this.canvas=m,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=E,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils$1.bind(this,mt.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils$1.bind(this,mt.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils$1.bind(this,mt.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils$1.bind(this,mt.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils$1.bind(this,mt.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils$1.bind(this,mt.prototype.arcTo)}mt.prototype.moveTo=function(m,E){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=m,this.lastY=E,this.firstX=m,this.firstY=E},mt.prototype.close=function(){this.firstX!=null&&this.firstY!=null&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},mt.prototype.quadTo=function(m,E,$,f){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=$,this.lastY=f},mt.prototype.curveTo=function(m,E,$,f,v,b){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=v,this.lastY=b},mt.prototype.arcTo=function(m,E,$,f,v,b,y){this.originalArcTo.apply(this.canvas,arguments),this.lastX=b,this.lastY=y},mt.prototype.lineTo=function(m,E){if(this.lastX!=null&&this.lastY!=null){let ut=function(it){return typeof it=="number"?it?it<0?-1:1:it===it?0:NaN:NaN};var et=ut,$=Math.abs(m-this.lastX),f=Math.abs(E-this.lastY),v=Math.sqrt($*$+f*f);if(v<2){this.originalLineTo.apply(this.canvas,arguments),this.lastX=m,this.lastY=E;return}var b=Math.round(v/10),y=this.defaultVariation;b<5&&(b=5,y/=3);for(var G=ut(m-this.lastX)*$/b,M=ut(E-this.lastY)*f/b,rt=$/v,F=f/v,z=0;z<b;z++){var J=G*z+this.lastX,W=M*z+this.lastY,q=(Math.random()-.5)*y;this.originalLineTo.call(this.canvas,J-q*F,W-q*rt)}this.originalLineTo.call(this.canvas,m,E),this.lastX=m,this.lastY=E}else this.originalLineTo.apply(this.canvas,arguments),this.lastX=m,this.lastY=E},mt.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo};var xt=mxShape$1.prototype.beforePaint;mxShape$1.prototype.beforePaint=function(m){xt.apply(this,arguments),m.handJiggle==null&&(m.handJiggle=this.createHandJiggle(m))};var Y=mxShape$1.prototype.afterPaint;mxShape$1.prototype.afterPaint=function(m){Y.apply(this,arguments),m.handJiggle!=null&&(m.handJiggle.destroy(),delete m.handJiggle)},mxShape$1.prototype.createComicCanvas=function(m){return new mt(m,mxUtils$1.getValue(this.style,"jiggle",Editor.sketchDefaultJiggle))},mxShape$1.prototype.createHandJiggle=function(m){return!this.outline&&this.style!=null&&mxUtils$1.getValue(this.style,"comic","0")!="0"?this.createComicCanvas(m):null};var B=mxRectangleShape$1.prototype.isHtmlAllowed;mxRectangleShape$1.prototype.isHtmlAllowed=function(){return!this.outline&&(this.style==null||mxUtils$1.getValue(this.style,"comic","0")=="0"&&mxUtils$1.getValue(this.style,"sketch",urlParams.rough=="1"?"1":"0")=="0")&&B.apply(this,arguments)};var U=mxRectangleShape$1.prototype.paintBackground;mxRectangleShape$1.prototype.paintBackground=function(m,E,$,f,v){if(m.handJiggle==null||m.handJiggle.constructor!=mt)U.apply(this,arguments);else{var b=!0;if(this.style!=null&&(b=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),b||this.fill!=null&&this.fill!=mxConstants$1.NONE||this.stroke!=null&&this.stroke!=mxConstants$1.NONE){if(!b&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(m.pointerEvents=!1),m.begin(),this.isRounded){var y=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")y=Math.min(f/2,Math.min(v/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;y=Math.min(f*G,v*G)}m.moveTo(E+y,$),m.lineTo(E+f-y,$),m.quadTo(E+f,$,E+f,$+y),m.lineTo(E+f,$+v-y),m.quadTo(E+f,$+v,E+f-y,$+v),m.lineTo(E+y,$+v),m.quadTo(E,$+v,E,$+v-y),m.lineTo(E,$+y),m.quadTo(E,$,E+y,$)}else m.moveTo(E,$),m.lineTo(E+f,$),m.lineTo(E+f,$+v),m.lineTo(E,$+v),m.lineTo(E,$);m.close(),m.end(),m.fillAndStroke()}}};function lt(){mxRectangleShape$1.call(this)}mxUtils$1.extend(lt,mxRectangleShape$1),lt.prototype.size=.1,lt.prototype.fixedSize=!1,lt.prototype.isHtmlAllowed=function(){return!1},lt.prototype.getLabelBounds=function(m){if(mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,!0)==(this.direction==null||this.direction==mxConstants$1.DIRECTION_EAST||this.direction==mxConstants$1.DIRECTION_WEST)){var E=m.width,$=m.height,f=new mxRectangle$1(m.x,m.y,E,$),v=E*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));if(this.isRounded){var b=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;v=Math.max(v,Math.min(E*b,$*b))}return f.x+=Math.round(v),f.width-=Math.round(2*v),f}return m},lt.prototype.paintForeground=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,"fixedSize",this.fixedSize),y=parseFloat(mxUtils$1.getValue(this.style,"size",this.size));if(b?y=Math.max(0,Math.min(f,y)):y=f*Math.max(0,Math.min(1,y)),this.isRounded){var G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;y=Math.max(y,Math.min(f*G,v*G))}y=Math.round(y),m.begin(),m.moveTo(E+y,$),m.lineTo(E+y,$+v),m.moveTo(E+f-y,$),m.lineTo(E+f-y,$+v),m.end(),m.stroke(),mxRectangleShape$1.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",lt),mxCellRenderer.registerShape("process2",lt);function tt(){mxRectangleShape$1.call(this)}mxUtils$1.extend(tt,mxRectangleShape$1),tt.prototype.paintBackground=function(m,E,$,f,v){m.setFillColor(mxConstants$1.NONE),m.rect(E,$,f,v),m.fill()},tt.prototype.paintForeground=function(m,E,$,f,v){},mxCellRenderer.registerShape("transparent",tt);function st(){mxActor.call(this)}mxUtils$1.extend(st,mxHexagon),st.prototype.size=30,st.prototype.position=.5,st.prototype.position2=.5,st.prototype.base=20,st.prototype.getLabelMargins=function(){return new mxRectangle$1(0,0,0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale)},st.prototype.isRoundable=function(){return!0},st.prototype.redrawPath=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2,y=Math.max(0,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),G=f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position",this.position)))),M=f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position2",this.position2)))),rt=Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"base",this.base))));this.addPoints(m,[new mxPoint$1(0,0),new mxPoint$1(f,0),new mxPoint$1(f,v-y),new mxPoint$1(Math.min(f,G+rt),v-y),new mxPoint$1(M,v),new mxPoint$1(Math.max(0,G),v-y),new mxPoint$1(0,v-y)],this.isRounded,b,!0,[4])},mxCellRenderer.registerShape("callout",st);function ft(){mxActor.call(this)}mxUtils$1.extend(ft,mxActor),ft.prototype.size=.2,ft.prototype.fixedSize=20,ft.prototype.isRoundable=function(){return!0},ft.prototype.redrawPath=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",y=b?Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,0),new mxPoint$1(f-y,0),new mxPoint$1(f,v/2),new mxPoint$1(f-y,v),new mxPoint$1(0,v),new mxPoint$1(y,v/2)],this.isRounded,G,!0),m.end()},mxCellRenderer.registerShape("step",ft);function $t(){mxActor.call(this)}mxUtils$1.extend($t,mxHexagon),$t.prototype.size=.25,$t.prototype.fixedSize=20,$t.prototype.isRoundable=function(){return!0},$t.prototype.redrawPath=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",y=b?Math.max(0,Math.min(f*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(y,0),new mxPoint$1(f-y,0),new mxPoint$1(f,.5*v),new mxPoint$1(f-y,v),new mxPoint$1(y,v),new mxPoint$1(0,.5*v)],this.isRounded,G,!0)},mxCellRenderer.registerShape("hexagon",$t);function Ct(){mxRectangleShape$1.call(this)}mxUtils$1.extend(Ct,mxRectangleShape$1),Ct.prototype.isHtmlAllowed=function(){return!1},Ct.prototype.paintForeground=function(m,E,$,f,v){var b=Math.min(f/5,v/5)+1;m.begin(),m.moveTo(E+f/2,$+b),m.lineTo(E+f/2,$+v-b),m.moveTo(E+b,$+v/2),m.lineTo(E+f-b,$+v/2),m.end(),m.stroke(),mxRectangleShape$1.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",Ct);var pt=mxRhombus.prototype.paintVertexShape;mxRhombus.prototype.getLabelBounds=function(m){if(this.style.double==1){var E=(Math.max(2,this.strokewidth+1)*2+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0))*this.scale;return new mxRectangle$1(m.x+E,m.y+E,m.width-2*E,m.height-2*E)}return m},mxRhombus.prototype.paintVertexShape=function(m,E,$,f,v){if(pt.apply(this,arguments),!this.outline&&this.style.double==1){var b=Math.max(2,this.strokewidth+1)*2+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0);E+=b,$+=b,f-=2*b,v-=2*b,f>0&&v>0&&(m.setShadow(!1),pt.apply(this,[m,E,$,f,v]))}};function ct(){mxRectangleShape$1.call(this)}mxUtils$1.extend(ct,mxRectangleShape$1),ct.prototype.isHtmlAllowed=function(){return!1},ct.prototype.getLabelBounds=function(m){if(this.style.double==1){var E=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0))*this.scale;return new mxRectangle$1(m.x+E,m.y+E,m.width-2*E,m.height-2*E)}return m},ct.prototype.paintForeground=function(m,E,$,f,v){if(this.style!=null){if(!this.outline&&this.style.double==1){var b=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0);E+=b,$+=b,f-=2*b,v-=2*b,f>0&&v>0&&mxRectangleShape$1.prototype.paintBackground.apply(this,arguments)}m.setDashed(!1);var y=0,G=null;do{if(G=mxCellRenderer.defaultShapes[this.style["symbol"+y]],G!=null){var M=this.style["symbol"+y+"Align"],rt=this.style["symbol"+y+"VerticalAlign"],F=this.style["symbol"+y+"Width"],z=this.style["symbol"+y+"Height"],J=this.style["symbol"+y+"Spacing"]||0,W=this.style["symbol"+y+"VSpacing"]||J,q=this.style["symbol"+y+"ArcSpacing"];if(q!=null){var et=this.getArcSize(f+this.strokewidth,v+this.strokewidth)*q;J+=et,W+=et}var ut=E,it=$;M==mxConstants$1.ALIGN_CENTER?ut+=(f-F)/2:M==mxConstants$1.ALIGN_RIGHT?ut+=f-F-J:ut+=J,rt==mxConstants$1.ALIGN_MIDDLE?it+=(v-z)/2:rt==mxConstants$1.ALIGN_BOTTOM?it+=v-z-W:it+=W,m.save();var Et=new G;Et.style=this.style,G.prototype.paintVertexShape.call(Et,m,ut,it,F,z),m.restore()}y++}while(G!=null)}mxRectangleShape$1.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",ct);function Mt(){mxCylinder.call(this)}mxUtils$1.extend(Mt,mxCylinder),Mt.prototype.redrawPath=function(m,E,$,f,v,b){b?(m.moveTo(0,0),m.lineTo(f/2,v/2),m.lineTo(f,0),m.end()):(m.moveTo(0,0),m.lineTo(f,0),m.lineTo(f,v),m.lineTo(0,v),m.close())},mxCellRenderer.registerShape("message",Mt);function bt(){mxShape$1.call(this)}mxUtils$1.extend(bt,mxShape$1),bt.prototype.paintBackground=function(m,E,$,f,v){m.translate(E,$),m.ellipse(f/4,0,f/2,v/4),m.fillAndStroke(),m.begin(),m.moveTo(f/2,v/4),m.lineTo(f/2,2*v/3),m.moveTo(f/2,v/3),m.lineTo(0,v/3),m.moveTo(f/2,v/3),m.lineTo(f,v/3),m.moveTo(f/2,2*v/3),m.lineTo(0,v),m.moveTo(f/2,2*v/3),m.lineTo(f,v),m.end(),m.stroke()},mxCellRenderer.registerShape("umlActor",bt);function Ot(){mxShape$1.call(this)}mxUtils$1.extend(Ot,mxShape$1),Ot.prototype.getLabelMargins=function(m){return new mxRectangle$1(m.width/6,0,0,0)},Ot.prototype.paintBackground=function(m,E,$,f,v){m.translate(E,$),m.begin(),m.moveTo(0,v/4),m.lineTo(0,v*3/4),m.end(),m.stroke(),m.begin(),m.moveTo(0,v/2),m.lineTo(f/6,v/2),m.end(),m.stroke(),m.ellipse(f/6,0,f*5/6,v),m.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",Ot);function gt(){mxEllipse.call(this)}mxUtils$1.extend(gt,mxEllipse),gt.prototype.paintVertexShape=function(m,E,$,f,v){mxEllipse.prototype.paintVertexShape.apply(this,arguments),m.begin(),m.moveTo(E+f/8,$+v),m.lineTo(E+f*7/8,$+v),m.end(),m.stroke()},mxCellRenderer.registerShape("umlEntity",gt);function Tt(){mxShape$1.call(this)}mxUtils$1.extend(Tt,mxShape$1),Tt.prototype.paintVertexShape=function(m,E,$,f,v){m.translate(E,$),m.begin(),m.moveTo(f,0),m.lineTo(0,v),m.moveTo(0,0),m.lineTo(f,v),m.end(),m.stroke()},mxCellRenderer.registerShape("umlDestroy",Tt);function vt(){mxShape$1.call(this)}mxUtils$1.extend(vt,mxShape$1),vt.prototype.getLabelBounds=function(m){return new mxRectangle$1(m.x,m.y+m.height/8,m.width,m.height*7/8)},vt.prototype.paintBackground=function(m,E,$,f,v){m.translate(E,$),m.begin(),m.moveTo(f*3/8,v/8*1.1),m.lineTo(f*5/8,0),m.end(),m.stroke(),m.ellipse(0,v/8,f,v*7/8),m.fillAndStroke()},vt.prototype.paintForeground=function(m,E,$,f,v){m.begin(),m.moveTo(f*3/8,v/8*1.1),m.lineTo(f*5/8,v/4),m.end(),m.stroke()},mxCellRenderer.registerShape("umlControl",vt);function Pt(){mxRectangleShape$1.call(this)}mxUtils$1.extend(Pt,mxRectangleShape$1),Pt.prototype.size=40,Pt.prototype.isHtmlAllowed=function(){return!1},Pt.prototype.getLabelBounds=function(m){var E=Math.max(0,Math.min(m.height,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle$1(m.x,m.y,m.width,E)},Pt.prototype.paintBackground=function(m,E,$,f,v){var b=Math.max(0,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=mxUtils$1.getValue(this.style,"participant");if(y==null||this.state==null)mxRectangleShape$1.prototype.paintBackground.call(this,m,E,$,f,b);else{var G=this.state.view.graph.cellRenderer.getShape(y);if(G!=null&&G!=Pt){var M=new G;M.apply(this.state),m.save(),M.paintVertexShape(m,E,$,f,b),m.restore()}}b<v&&(m.setDashed(mxUtils$1.getValue(this.style,"lifelineDashed","1")=="1"),m.begin(),m.moveTo(E+f/2,$+b),m.lineTo(E+f/2,$+v),m.end(),m.stroke())},Pt.prototype.paintForeground=function(m,E,$,f,v){var b=Math.max(0,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));mxRectangleShape$1.prototype.paintForeground.call(this,m,E,$,f,Math.min(v,b))},mxCellRenderer.registerShape("umlLifeline",Pt);function Dt(){mxShape$1.call(this)}mxUtils$1.extend(Dt,mxShape$1),Dt.prototype.width=60,Dt.prototype.height=30,Dt.prototype.corner=10,Dt.prototype.configurePointerEvents=function(m){var E=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE);this.style!=null&&(E==null||E==mxConstants$1.NONE||this.opacity==0||this.fillOpacity==0)&&mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="0"&&(m.pointerEvents=!1)},Dt.prototype.getLabelMargins=function(m){return new mxRectangle$1(0,0,m.width-parseFloat(mxUtils$1.getValue(this.style,"width",this.width)*this.scale),m.height-parseFloat(mxUtils$1.getValue(this.style,"height",this.height)*this.scale))},Dt.prototype.paintBackground=function(m,E,$,f,v){var b=this.corner,y=Math.min(f,Math.max(b,parseFloat(mxUtils$1.getValue(this.style,"width",this.width)))),G=Math.min(v,Math.max(b*1.5,parseFloat(mxUtils$1.getValue(this.style,"height",this.height)))),M=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE);M!=mxConstants$1.NONE&&(m.setFillColor(M),m.rect(E,$,f,v),m.fill()),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE?(this.getGradientBounds(m,E,$,f,v),m.setGradient(this.fill,this.gradient,E,$,f,v,this.gradientDirection)):m.setFillColor(this.fill),m.pointerEvents=!0,m.begin(),m.moveTo(E,$),m.lineTo(E+y,$),m.lineTo(E+y,$+Math.max(0,G-b*1.5)),m.lineTo(E+Math.max(0,y-b),$+G),m.lineTo(E,$+G),m.close(),m.fillAndStroke(),this.configurePointerEvents(m),m.begin(),m.moveTo(E+y,$),m.lineTo(E+f,$),m.lineTo(E+f,$+v),m.lineTo(E,$+v),m.lineTo(E,$+G),m.stroke()},mxCellRenderer.registerShape("umlFrame",Dt),mxPerimeter.CenterPerimeter=function(m,E,$,f){return new mxPoint$1(m.getCenterX(),m.getCenterY())},mxStyleRegistry$1.putValue("centerPerimeter",mxPerimeter.CenterPerimeter),mxPerimeter.LifelinePerimeter=function(m,E,$,f){var v=Pt.prototype.size;E!=null&&(v=mxUtils$1.getValue(E.style,"size",v)*E.view.scale);var b=parseFloat(E.style[mxConstants$1.STYLE_STROKEWIDTH]||1)*E.view.scale/2-1;return $.x<m.getCenterX()&&(b+=1,b*=-1),new mxPoint$1(m.getCenterX()+b,Math.min(m.y+m.height,Math.max(m.y+v,$.y)))},mxStyleRegistry$1.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(m,E,$,f){return f=!0,mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry$1.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(m,E,$,f){var v=parseFloat(E.style[mxConstants$1.STYLE_STROKEWIDTH]||1)*E.view.scale/2-1;return E.style.backboneSize!=null&&(v+=parseFloat(E.style.backboneSize)*E.view.scale/2-1),E.style[mxConstants$1.STYLE_DIRECTION]=="south"||E.style[mxConstants$1.STYLE_DIRECTION]=="north"?($.x<m.getCenterX()&&(v+=1,v*=-1),new mxPoint$1(m.getCenterX()+v,Math.min(m.y+m.height,Math.max(m.y,$.y)))):($.y<m.getCenterY()&&(v+=1,v*=-1),new mxPoint$1(Math.min(m.x+m.width,Math.max(m.x,$.x)),m.getCenterY()+v))},mxStyleRegistry$1.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(m,E,$,f){return mxPerimeter.RectanglePerimeter(mxUtils$1.getDirectedBounds(m,new mxRectangle$1(0,0,0,Math.max(0,Math.min(m.height,parseFloat(mxUtils$1.getValue(E.style,"size",st.prototype.size))*E.view.scale))),E.style),E,$,f)},mxStyleRegistry$1.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(m,E,$,f){var v=mxUtils$1.getValue(E.style,"fixedSize","0")!="0",b=v?K.prototype.fixedSize:K.prototype.size;E!=null&&(b=mxUtils$1.getValue(E.style,"size",b)),v&&(b*=E.view.scale);var y=m.x,G=m.y,M=m.width,rt=m.height,F=E!=null?mxUtils$1.getValue(E.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,z=F==mxConstants$1.DIRECTION_NORTH||F==mxConstants$1.DIRECTION_SOUTH,J;if(z){var W=v?Math.max(0,Math.min(rt,b)):rt*Math.max(0,Math.min(1,b));J=[new mxPoint$1(y,G),new mxPoint$1(y+M,G+W),new mxPoint$1(y+M,G+rt),new mxPoint$1(y,G+rt-W),new mxPoint$1(y,G)]}else{var q=v?Math.max(0,Math.min(M*.5,b)):M*Math.max(0,Math.min(1,b));J=[new mxPoint$1(y+q,G),new mxPoint$1(y+M,G),new mxPoint$1(y+M-q,G+rt),new mxPoint$1(y,G+rt),new mxPoint$1(y+q,G)]}var et=m.getCenterX(),ut=m.getCenterY(),it=new mxPoint$1(et,ut);return f&&($.x<y||$.x>y+M?it.y=$.y:it.x=$.x),mxUtils$1.getPerimeterPoint(J,it,$)},mxStyleRegistry$1.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(m,E,$,f){var v=mxUtils$1.getValue(E.style,"fixedSize","0")!="0",b=v?Q.prototype.fixedSize:Q.prototype.size;E!=null&&(b=mxUtils$1.getValue(E.style,"size",b)),v&&(b*=E.view.scale);var y=m.x,G=m.y,M=m.width,rt=m.height,F=E!=null?mxUtils$1.getValue(E.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,z=[];if(F==mxConstants$1.DIRECTION_EAST){var J=v?Math.max(0,Math.min(M*.5,b)):M*Math.max(0,Math.min(1,b));z=[new mxPoint$1(y+J,G),new mxPoint$1(y+M-J,G),new mxPoint$1(y+M,G+rt),new mxPoint$1(y,G+rt),new mxPoint$1(y+J,G)]}else if(F==mxConstants$1.DIRECTION_WEST){var J=v?Math.max(0,Math.min(M,b)):M*Math.max(0,Math.min(1,b));z=[new mxPoint$1(y,G),new mxPoint$1(y+M,G),new mxPoint$1(y+M-J,G+rt),new mxPoint$1(y+J,G+rt),new mxPoint$1(y,G)]}else if(F==mxConstants$1.DIRECTION_NORTH){var W=v?Math.max(0,Math.min(rt,b)):rt*Math.max(0,Math.min(1,b));z=[new mxPoint$1(y,G+W),new mxPoint$1(y+M,G),new mxPoint$1(y+M,G+rt),new mxPoint$1(y,G+rt-W),new mxPoint$1(y,G+W)]}else{var W=v?Math.max(0,Math.min(rt,b)):rt*Math.max(0,Math.min(1,b));z=[new mxPoint$1(y,G),new mxPoint$1(y+M,G+W),new mxPoint$1(y+M,G+rt-W),new mxPoint$1(y,G+rt),new mxPoint$1(y,G)]}var q=m.getCenterX(),et=m.getCenterY(),ut=new mxPoint$1(q,et);return f&&($.x<y||$.x>y+M?ut.y=$.y:ut.x=$.x),mxUtils$1.getPerimeterPoint(z,ut,$)},mxStyleRegistry$1.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(m,E,$,f){var v=mxUtils$1.getValue(E.style,"fixedSize","0")!="0",b=v?ft.prototype.fixedSize:ft.prototype.size;E!=null&&(b=mxUtils$1.getValue(E.style,"size",b)),v&&(b*=E.view.scale);var y=m.x,G=m.y,M=m.width,rt=m.height,F=m.getCenterX(),z=m.getCenterY(),J=E!=null?mxUtils$1.getValue(E.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,W;if(J==mxConstants$1.DIRECTION_EAST){var q=v?Math.max(0,Math.min(M,b)):M*Math.max(0,Math.min(1,b));W=[new mxPoint$1(y,G),new mxPoint$1(y+M-q,G),new mxPoint$1(y+M,z),new mxPoint$1(y+M-q,G+rt),new mxPoint$1(y,G+rt),new mxPoint$1(y+q,z),new mxPoint$1(y,G)]}else if(J==mxConstants$1.DIRECTION_WEST){var q=v?Math.max(0,Math.min(M,b)):M*Math.max(0,Math.min(1,b));W=[new mxPoint$1(y+q,G),new mxPoint$1(y+M,G),new mxPoint$1(y+M-q,z),new mxPoint$1(y+M,G+rt),new mxPoint$1(y+q,G+rt),new mxPoint$1(y,z),new mxPoint$1(y+q,G)]}else if(J==mxConstants$1.DIRECTION_NORTH){var et=v?Math.max(0,Math.min(rt,b)):rt*Math.max(0,Math.min(1,b));W=[new mxPoint$1(y,G+et),new mxPoint$1(F,G),new mxPoint$1(y+M,G+et),new mxPoint$1(y+M,G+rt),new mxPoint$1(F,G+rt-et),new mxPoint$1(y,G+rt),new mxPoint$1(y,G+et)]}else{var et=v?Math.max(0,Math.min(rt,b)):rt*Math.max(0,Math.min(1,b));W=[new mxPoint$1(y,G),new mxPoint$1(F,G+et),new mxPoint$1(y+M,G),new mxPoint$1(y+M,G+rt-et),new mxPoint$1(F,G+rt),new mxPoint$1(y,G+rt-et),new mxPoint$1(y,G)]}var ut=new mxPoint$1(F,z);return f&&($.x<y||$.x>y+M?ut.y=$.y:ut.x=$.x),mxUtils$1.getPerimeterPoint(W,ut,$)},mxStyleRegistry$1.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(m,E,$,f){var v=mxUtils$1.getValue(E.style,"fixedSize","0")!="0",b=v?$t.prototype.fixedSize:$t.prototype.size;E!=null&&(b=mxUtils$1.getValue(E.style,"size",b)),v&&(b*=E.view.scale);var y=m.x,G=m.y,M=m.width,rt=m.height,F=m.getCenterX(),z=m.getCenterY(),J=E!=null?mxUtils$1.getValue(E.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,W=J==mxConstants$1.DIRECTION_NORTH||J==mxConstants$1.DIRECTION_SOUTH,q;if(W){var et=v?Math.max(0,Math.min(rt,b)):rt*Math.max(0,Math.min(1,b));q=[new mxPoint$1(F,G),new mxPoint$1(y+M,G+et),new mxPoint$1(y+M,G+rt-et),new mxPoint$1(F,G+rt),new mxPoint$1(y,G+rt-et),new mxPoint$1(y,G+et),new mxPoint$1(F,G)]}else{var ut=v?Math.max(0,Math.min(M,b)):M*Math.max(0,Math.min(1,b));q=[new mxPoint$1(y+ut,G),new mxPoint$1(y+M-ut,G),new mxPoint$1(y+M,z),new mxPoint$1(y+M-ut,G+rt),new mxPoint$1(y+ut,G+rt),new mxPoint$1(y,z),new mxPoint$1(y+ut,G)]}var it=new mxPoint$1(F,z);return f&&($.x<y||$.x>y+M?it.y=$.y:it.x=$.x),mxUtils$1.getPerimeterPoint(q,it,$)},mxStyleRegistry$1.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2);function zt(){mxShape$1.call(this)}mxUtils$1.extend(zt,mxShape$1),zt.prototype.size=10,zt.prototype.paintBackground=function(m,E,$,f,v){var b=parseFloat(mxUtils$1.getValue(this.style,"size",this.size));m.translate(E,$),m.ellipse((f-b)/2,0,b,b),m.fillAndStroke(),m.begin(),m.moveTo(f/2,b),m.lineTo(f/2,v),m.end(),m.stroke()},mxCellRenderer.registerShape("lollipop",zt);function Rt(){mxShape$1.call(this)}mxUtils$1.extend(Rt,mxShape$1),Rt.prototype.size=10,Rt.prototype.inset=2,Rt.prototype.paintBackground=function(m,E,$,f,v){var b=parseFloat(mxUtils$1.getValue(this.style,"size",this.size)),y=parseFloat(mxUtils$1.getValue(this.style,"inset",this.inset))+this.strokewidth;m.translate(E,$),m.begin(),m.moveTo(f/2,b+y),m.lineTo(f/2,v),m.end(),m.stroke(),m.begin(),m.moveTo((f-b)/2-y,b/2),m.quadTo((f-b)/2-y,b+y,f/2,b+y),m.quadTo((f+b)/2+y,b+y,(f+b)/2+y,b/2),m.end(),m.stroke()},mxCellRenderer.registerShape("requires",Rt);function Nt(){mxShape$1.call(this)}mxUtils$1.extend(Nt,mxShape$1),Nt.prototype.paintBackground=function(m,E,$,f,v){m.translate(E,$),m.begin(),m.moveTo(0,0),m.quadTo(f,0,f,v/2),m.quadTo(f,v,0,v),m.end(),m.stroke()},mxCellRenderer.registerShape("requiredInterface",Nt);function Bt(){mxShape$1.call(this)}mxUtils$1.extend(Bt,mxShape$1),Bt.prototype.inset=2,Bt.prototype.paintBackground=function(m,E,$,f,v){var b=parseFloat(mxUtils$1.getValue(this.style,"inset",this.inset))+this.strokewidth;m.translate(E,$),m.ellipse(0,b,f-2*b,v-2*b),m.fillAndStroke(),m.begin(),m.moveTo(f/2,0),m.quadTo(f,0,f,v/2),m.quadTo(f,v,f/2,v),m.end(),m.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",Bt);function kt(){mxCylinder.call(this)}mxUtils$1.extend(kt,mxCylinder),kt.prototype.jettyWidth=20,kt.prototype.jettyHeight=10,kt.prototype.redrawPath=function(m,E,$,f,v,b){var y=parseFloat(mxUtils$1.getValue(this.style,"jettyWidth",this.jettyWidth)),G=parseFloat(mxUtils$1.getValue(this.style,"jettyHeight",this.jettyHeight)),M=y/2,rt=M+y/2,F=Math.min(G,v-G),z=Math.min(F+2*G,v-G);b?(m.moveTo(M,F),m.lineTo(rt,F),m.lineTo(rt,F+G),m.lineTo(M,F+G),m.moveTo(M,z),m.lineTo(rt,z),m.lineTo(rt,z+G),m.lineTo(M,z+G),m.end()):(m.moveTo(M,0),m.lineTo(f,0),m.lineTo(f,v),m.lineTo(M,v),m.lineTo(M,z+G),m.lineTo(0,z+G),m.lineTo(0,z),m.lineTo(M,z),m.lineTo(M,F+G),m.lineTo(0,F+G),m.lineTo(0,F),m.lineTo(M,F),m.close(),m.end())},mxCellRenderer.registerShape("module",kt);function Xt(){mxCylinder.call(this)}mxUtils$1.extend(Xt,mxCylinder),Xt.prototype.jettyWidth=32,Xt.prototype.jettyHeight=12,Xt.prototype.redrawPath=function(m,E,$,f,v,b){var y=parseFloat(mxUtils$1.getValue(this.style,"jettyWidth",this.jettyWidth)),G=parseFloat(mxUtils$1.getValue(this.style,"jettyHeight",this.jettyHeight)),M=y/2,rt=M+y/2,F=.3*v-G/2,z=.7*v-G/2;b?(m.moveTo(M,F),m.lineTo(rt,F),m.lineTo(rt,F+G),m.lineTo(M,F+G),m.moveTo(M,z),m.lineTo(rt,z),m.lineTo(rt,z+G),m.lineTo(M,z+G),m.end()):(m.moveTo(M,0),m.lineTo(f,0),m.lineTo(f,v),m.lineTo(M,v),m.lineTo(M,z+G),m.lineTo(0,z+G),m.lineTo(0,z),m.lineTo(M,z),m.lineTo(M,F+G),m.lineTo(0,F+G),m.lineTo(0,F),m.lineTo(M,F),m.close(),m.end())},mxCellRenderer.registerShape("component",Xt);function ie(){mxRectangleShape$1.call(this)}mxUtils$1.extend(ie,mxRectangleShape$1),ie.prototype.paintForeground=function(m,E,$,f,v){var b=f/2,y=v/2,G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;m.begin(),this.addPoints(m,[new mxPoint$1(E+b,$),new mxPoint$1(E+f,$+y),new mxPoint$1(E+b,$+v),new mxPoint$1(E,$+y)],this.isRounded,G,!0),m.stroke(),mxRectangleShape$1.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("associativeEntity",ie);function At(){mxDoubleEllipse.call(this)}mxUtils$1.extend(At,mxDoubleEllipse),At.prototype.outerStroke=!0,At.prototype.paintVertexShape=function(m,E,$,f,v){var b=Math.min(4,Math.min(f/5,v/5));f>0&&v>0&&(m.ellipse(E+b,$+b,f-2*b,v-2*b),m.fillAndStroke()),m.setShadow(!1),this.outerStroke&&(m.ellipse(E,$,f,v),m.stroke())},mxCellRenderer.registerShape("endState",At);function Jt(){At.call(this)}mxUtils$1.extend(Jt,At),Jt.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",Jt);function ne(){mxArrowConnector.call(this),this.spacing=0}mxUtils$1.extend(ne,mxArrowConnector),ne.prototype.defaultWidth=4,ne.prototype.isOpenEnded=function(){return!0},ne.prototype.getEdgeWidth=function(){return mxUtils$1.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},ne.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",ne);function Wt(){mxArrowConnector.call(this),this.spacing=0}mxUtils$1.extend(Wt,mxArrowConnector),Wt.prototype.defaultWidth=10,Wt.prototype.defaultArrowWidth=20,Wt.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils$1.getNumber(this.style,"startWidth",this.defaultArrowWidth)},Wt.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils$1.getNumber(this.style,"endWidth",this.defaultArrowWidth)},Wt.prototype.getEdgeWidth=function(){return mxUtils$1.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",Wt);function re(){mxActor.call(this)}mxUtils$1.extend(re,mxActor),re.prototype.size=30,re.prototype.isRoundable=function(){return!0},re.prototype.redrawPath=function(m,E,$,f,v){var b=Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))),y=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,v),new mxPoint$1(0,b),new mxPoint$1(f,0),new mxPoint$1(f,v)],this.isRounded,y,!0),m.end()},mxCellRenderer.registerShape("manualInput",re);function te(){mxRectangleShape$1.call(this)}mxUtils$1.extend(te,mxRectangleShape$1),te.prototype.dx=20,te.prototype.dy=20,te.prototype.isHtmlAllowed=function(){return!1},te.prototype.paintForeground=function(m,E,$,f,v){mxRectangleShape$1.prototype.paintForeground.apply(this,arguments);var b=0;if(this.isRounded){var y=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;b=Math.max(b,Math.min(f*y,v*y))}var G=Math.max(b,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),M=Math.max(b,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));m.begin(),m.moveTo(E,$+M),m.lineTo(E+f,$+M),m.end(),m.stroke(),m.begin(),m.moveTo(E+G,$),m.lineTo(E+G,$+v),m.end(),m.stroke()},mxCellRenderer.registerShape("internalStorage",te);function se(){mxActor.call(this)}mxUtils$1.extend(se,mxActor),se.prototype.dx=20,se.prototype.dy=20,se.prototype.redrawPath=function(m,E,$,f,v){var b=Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),y=Math.max(0,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));Math.min(f/2,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));var G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,0),new mxPoint$1(f,0),new mxPoint$1(f,y),new mxPoint$1(b,y),new mxPoint$1(b,v),new mxPoint$1(0,v)],this.isRounded,G,!0),m.end()},mxCellRenderer.registerShape("corner",se);function S(){mxActor.call(this)}mxUtils$1.extend(S,mxActor),S.prototype.redrawPath=function(m,E,$,f,v){m.moveTo(0,0),m.lineTo(0,v),m.end(),m.moveTo(f,0),m.lineTo(f,v),m.end(),m.moveTo(0,v/2),m.lineTo(f,v/2),m.end()},mxCellRenderer.registerShape("crossbar",S);function I(){mxActor.call(this)}mxUtils$1.extend(I,mxActor),I.prototype.dx=20,I.prototype.dy=20,I.prototype.redrawPath=function(m,E,$,f,v){var b=Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),y=Math.max(0,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));Math.min(f/2,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));var G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,0),new mxPoint$1(f,0),new mxPoint$1(f,y),new mxPoint$1((f+b)/2,y),new mxPoint$1((f+b)/2,v),new mxPoint$1((f-b)/2,v),new mxPoint$1((f-b)/2,y),new mxPoint$1(0,y)],this.isRounded,G,!0),m.end()},mxCellRenderer.registerShape("tee",I);function L(){mxActor.call(this)}mxUtils$1.extend(L,mxActor),L.prototype.arrowWidth=.3,L.prototype.arrowSize=.2,L.prototype.redrawPath=function(m,E,$,f,v){var b=v*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",this.arrowWidth)))),y=f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",this.arrowSize)))),G=(v-b)/2,M=G+b,rt=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,G),new mxPoint$1(f-y,G),new mxPoint$1(f-y,0),new mxPoint$1(f,v/2),new mxPoint$1(f-y,v),new mxPoint$1(f-y,M),new mxPoint$1(0,M)],this.isRounded,rt,!0),m.end()},mxCellRenderer.registerShape("singleArrow",L);function D(){mxActor.call(this)}mxUtils$1.extend(D,mxActor),D.prototype.redrawPath=function(m,E,$,f,v){var b=v*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",L.prototype.arrowWidth)))),y=f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",L.prototype.arrowSize)))),G=(v-b)/2,M=G+b,rt=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,v/2),new mxPoint$1(y,0),new mxPoint$1(y,G),new mxPoint$1(f-y,G),new mxPoint$1(f-y,0),new mxPoint$1(f,v/2),new mxPoint$1(f-y,v),new mxPoint$1(f-y,M),new mxPoint$1(y,M),new mxPoint$1(y,v)],this.isRounded,rt,!0),m.end()},mxCellRenderer.registerShape("doubleArrow",D);function O(){mxActor.call(this)}mxUtils$1.extend(O,mxActor),O.prototype.size=.1,O.prototype.fixedSize=20,O.prototype.redrawPath=function(m,E,$,f,v){var b=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",y=b?Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):f*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));m.moveTo(y,0),m.lineTo(f,0),m.quadTo(f-y*2,v/2,f,v),m.lineTo(y,v),m.quadTo(y-y*2,v/2,y,0),m.close(),m.end()},mxCellRenderer.registerShape("dataStorage",O);function V(){mxActor.call(this)}mxUtils$1.extend(V,mxActor),V.prototype.redrawPath=function(m,E,$,f,v){m.moveTo(0,0),m.quadTo(f,0,f,v/2),m.quadTo(f,v,0,v),m.close(),m.end()},mxCellRenderer.registerShape("or",V);function j(){mxActor.call(this)}mxUtils$1.extend(j,mxActor),j.prototype.redrawPath=function(m,E,$,f,v){m.moveTo(0,0),m.quadTo(f,0,f,v/2),m.quadTo(f,v,0,v),m.quadTo(f/2,v/2,0,0),m.close(),m.end()},mxCellRenderer.registerShape("xor",j);function at(){mxActor.call(this)}mxUtils$1.extend(at,mxActor),at.prototype.size=20,at.prototype.isRoundable=function(){return!0},at.prototype.redrawPath=function(m,E,$,f,v){var b=Math.min(f/2,Math.min(v,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(b,0),new mxPoint$1(f-b,0),new mxPoint$1(f,b*.8),new mxPoint$1(f,v),new mxPoint$1(0,v),new mxPoint$1(0,b*.8)],this.isRounded,y,!0),m.end()},mxCellRenderer.registerShape("loopLimit",at);function ot(){mxActor.call(this)}mxUtils$1.extend(ot,mxActor),ot.prototype.size=3/8,ot.prototype.isRoundable=function(){return!0},ot.prototype.redrawPath=function(m,E,$,f,v){var b=v*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(m,[new mxPoint$1(0,0),new mxPoint$1(f,0),new mxPoint$1(f,v-b),new mxPoint$1(f/2,v),new mxPoint$1(0,v-b)],this.isRounded,y,!0),m.end()},mxCellRenderer.registerShape("offPageConnector",ot);function yt(){mxEllipse.call(this)}mxUtils$1.extend(yt,mxEllipse),yt.prototype.paintVertexShape=function(m,E,$,f,v){mxEllipse.prototype.paintVertexShape.apply(this,arguments),m.begin(),m.moveTo(E+f/2,$+v),m.lineTo(E+f,$+v),m.end(),m.stroke()},mxCellRenderer.registerShape("tapeData",yt);function Lt(){mxEllipse.call(this)}mxUtils$1.extend(Lt,mxEllipse),Lt.prototype.paintVertexShape=function(m,E,$,f,v){mxEllipse.prototype.paintVertexShape.apply(this,arguments),m.setShadow(!1),m.begin(),m.moveTo(E,$+v/2),m.lineTo(E+f,$+v/2),m.end(),m.stroke(),m.begin(),m.moveTo(E+f/2,$),m.lineTo(E+f/2,$+v),m.end(),m.stroke()},mxCellRenderer.registerShape("orEllipse",Lt);function It(){mxEllipse.call(this)}mxUtils$1.extend(It,mxEllipse),It.prototype.paintVertexShape=function(m,E,$,f,v){mxEllipse.prototype.paintVertexShape.apply(this,arguments);var b=.145;m.setShadow(!1),m.begin(),m.moveTo(E+f*b,$+v*b),m.lineTo(E+f*(1-b),$+v*(1-b)),m.end(),m.stroke(),m.begin(),m.moveTo(E+f*(1-b),$+v*b),m.lineTo(E+f*b,$+v*(1-b)),m.end(),m.stroke()},mxCellRenderer.registerShape("sumEllipse",It);function Gt(){mxRhombus.call(this)}mxUtils$1.extend(Gt,mxRhombus),Gt.prototype.paintVertexShape=function(m,E,$,f,v){mxRhombus.prototype.paintVertexShape.apply(this,arguments),m.setShadow(!1),m.begin(),m.moveTo(E,$+v/2),m.lineTo(E+f,$+v/2),m.end(),m.stroke()},mxCellRenderer.registerShape("sortShape",Gt);function Yt(){mxEllipse.call(this)}mxUtils$1.extend(Yt,mxEllipse),Yt.prototype.paintVertexShape=function(m,E,$,f,v){m.begin(),m.moveTo(E,$),m.lineTo(E+f,$),m.lineTo(E+f/2,$+v/2),m.close(),m.fillAndStroke(),m.begin(),m.moveTo(E,$+v),m.lineTo(E+f,$+v),m.lineTo(E+f/2,$+v/2),m.close(),m.fillAndStroke()},mxCellRenderer.registerShape("collate",Yt);function ee(){mxEllipse.call(this)}mxUtils$1.extend(ee,mxEllipse),ee.prototype.paintVertexShape=function(m,E,$,f,v){var b=m.state.strokeWidth/2,y=10+2*b,G=$+v-y/2;m.begin(),m.moveTo(E,$),m.lineTo(E,$+v),m.moveTo(E+b,G),m.lineTo(E+b+y,G-y/2),m.moveTo(E+b,G),m.lineTo(E+b+y,G+y/2),m.moveTo(E+b,G),m.lineTo(E+f-b,G),m.moveTo(E+f,$),m.lineTo(E+f,$+v),m.moveTo(E+f-b,G),m.lineTo(E+f-y-b,G-y/2),m.moveTo(E+f-b,G),m.lineTo(E+f-y-b,G+y/2),m.end(),m.stroke()},mxCellRenderer.registerShape("dimension",ee);function le(){mxEllipse.call(this)}mxUtils$1.extend(le,mxEllipse),le.prototype.drawHidden=!0,le.prototype.paintVertexShape=function(m,E,$,f,v){if(this.outline||m.setStrokeColor(null),this.style!=null){var b=m.pointerEvents,y=this.fill!=null&&this.fill!=mxConstants$1.NONE,G=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1";!G&&!y&&(m.pointerEvents=!1);var M=mxUtils$1.getValue(this.style,"top","1")=="1",rt=mxUtils$1.getValue(this.style,"left","1")=="1",F=mxUtils$1.getValue(this.style,"right","1")=="1",z=mxUtils$1.getValue(this.style,"bottom","1")=="1";this.drawHidden||y||this.outline||M||F||z||rt?(m.rect(E,$,f,v),m.fill(),m.pointerEvents=b,m.setStrokeColor(this.stroke),m.setLineCap("square"),m.begin(),m.moveTo(E,$),this.outline||M?m.lineTo(E+f,$):m.moveTo(E+f,$),this.outline||F?m.lineTo(E+f,$+v):m.moveTo(E+f,$+v),this.outline||z?m.lineTo(E,$+v):m.moveTo(E,$+v),(this.outline||rt)&&m.lineTo(E,$),m.end(),m.stroke(),m.setLineCap("flat")):m.setStrokeColor(this.stroke)}},mxCellRenderer.registerShape("partialRectangle",le);function jt(){mxEllipse.call(this)}mxUtils$1.extend(jt,mxEllipse),jt.prototype.paintVertexShape=function(m,E,$,f,v){mxEllipse.prototype.paintVertexShape.apply(this,arguments),m.setShadow(!1),m.begin(),mxUtils$1.getValue(this.style,"line")=="vertical"?(m.moveTo(E+f/2,$),m.lineTo(E+f/2,$+v)):(m.moveTo(E,$+v/2),m.lineTo(E+f,$+v/2)),m.end(),m.stroke()},mxCellRenderer.registerShape("lineEllipse",jt);function Zt(){mxActor.call(this)}mxUtils$1.extend(Zt,mxActor),Zt.prototype.redrawPath=function(m,E,$,f,v){var b=Math.min(f,v/2);m.moveTo(0,0),m.lineTo(f-b,0),m.quadTo(f,0,f,v/2),m.quadTo(f,v,f-b,v),m.lineTo(0,v),m.close(),m.end()},mxCellRenderer.registerShape("delay",Zt);function Qt(){mxActor.call(this)}mxUtils$1.extend(Qt,mxActor),Qt.prototype.size=.2,Qt.prototype.redrawPath=function(m,E,$,f,v){var b=Math.min(v,f),y=Math.max(0,Math.min(b,b*parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),G=(v-y)/2,M=G+y,rt=(f-y)/2,F=rt+y;m.moveTo(0,G),m.lineTo(rt,G),m.lineTo(rt,0),m.lineTo(F,0),m.lineTo(F,G),m.lineTo(f,G),m.lineTo(f,M),m.lineTo(F,M),m.lineTo(F,v),m.lineTo(rt,v),m.lineTo(rt,M),m.lineTo(0,M),m.close(),m.end()},mxCellRenderer.registerShape("cross",Qt);function qt(){mxActor.call(this)}mxUtils$1.extend(qt,mxActor),qt.prototype.size=.25,qt.prototype.redrawPath=function(m,E,$,f,v){var b=Math.min(f,v/2),y=Math.min(f-b,Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))*f);m.moveTo(0,v/2),m.lineTo(y,0),m.lineTo(f-b,0),m.quadTo(f,0,f,v/2),m.quadTo(f,v,f-b,v),m.lineTo(y,v),m.close(),m.end()},mxCellRenderer.registerShape("display",qt);function Vt(m,E,$,f){mxShape$1.call(this),this.bounds=m,this.fill=E,this.stroke=$,this.strokewidth=f??1,this.rectStyle="square",this.size=10,this.absoluteCornerSize=!0,this.indent=2,this.rectOutline="single"}mxUtils$1.extend(Vt,mxActor),Vt.prototype.cst={RECT2:"mxgraph.basic.rect"},Vt.prototype.customProperties=[{name:"rectStyle",dispName:"Style",type:"enum",defVal:"square",enumList:[{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"size",dispName:"Corner Size",type:"float",defVal:10},{name:"absoluteCornerSize",dispName:"Abs. Corner Size",type:"bool",defVal:!0},{name:"indent",dispName:"Indent",type:"float",defVal:2},{name:"rectOutline",dispName:"Outline",type:"enum",defVal:"single",enumList:[{val:"single",dispName:"Single"},{val:"double",dispName:"Double"},{val:"frame",dispName:"Frame"}]},{name:"fillColor2",dispName:"Inside Fill Color",type:"color",defVal:"none"},{name:"gradientColor2",dispName:"Inside Gradient Color",type:"color",defVal:"none"},{name:"gradientDirection2",dispName:"Inside Gradient Direction",type:"enum",defVal:"south",enumList:[{val:"south",dispName:"South"},{val:"west",dispName:"West"},{val:"north",dispName:"North"},{val:"east",dispName:"East"}]},{name:"top",dispName:"Top Line",type:"bool",defVal:!0},{name:"right",dispName:"Right",type:"bool",defVal:!0},{name:"bottom",dispName:"Bottom Line",type:"bool",defVal:!0},{name:"left",dispName:"Left ",type:"bool",defVal:!0},{name:"topLeftStyle",dispName:"Top Left Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"topRightStyle",dispName:"Top Right Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"bottomRightStyle",dispName:"Bottom Right Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]},{name:"bottomLeftStyle",dispName:"Bottom Left Style",type:"enum",defVal:"default",enumList:[{val:"default",dispName:"Default"},{val:"square",dispName:"Square"},{val:"rounded",dispName:"Round"},{val:"snip",dispName:"Snip"},{val:"invRound",dispName:"Inv. Round"},{val:"fold",dispName:"Fold"}]}],Vt.prototype.paintVertexShape=function(m,E,$,f,v){m.translate(E,$),this.strictDrawShape(m,0,0,f,v)},Vt.prototype.strictDrawShape=function(m,E,$,f,v,b){var y=b&&b.rectStyle?b.rectStyle:mxUtils$1.getValue(this.style,"rectStyle",this.rectStyle),G=b&&b.absoluteCornerSize?b.absoluteCornerSize:mxUtils$1.getValue(this.style,"absoluteCornerSize",this.absoluteCornerSize),M=b&&b.size?b.size:Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),rt=b&&b.rectOutline?b.rectOutline:mxUtils$1.getValue(this.style,"rectOutline",this.rectOutline),F=b&&b.indent?b.indent:Math.max(0,Math.min(f,parseFloat(mxUtils$1.getValue(this.style,"indent",this.indent)))),z=b&&b.dashed?b.dashed:mxUtils$1.getValue(this.style,"dashed",!1),J=b&&b.dashPattern?b.dashPattern:mxUtils$1.getValue(this.style,"dashPattern",null),W=b&&b.relIndent?b.relIndent:Math.max(0,Math.min(50,F)),q=b&&b.top?b.top:mxUtils$1.getValue(this.style,"top",!0),et=b&&b.right?b.right:mxUtils$1.getValue(this.style,"right",!0),ut=b&&b.bottom?b.bottom:mxUtils$1.getValue(this.style,"bottom",!0),it=b&&b.left?b.left:mxUtils$1.getValue(this.style,"left",!0),Et=b&&b.topLeftStyle?b.topLeftStyle:mxUtils$1.getValue(this.style,"topLeftStyle","default"),St=b&&b.topRightStyle?b.topRightStyle:mxUtils$1.getValue(this.style,"topRightStyle","default"),wt=b&&b.bottomRightStyle?b.bottomRightStyle:mxUtils$1.getValue(this.style,"bottomRightStyle","default"),_t=b&&b.bottomLeftStyle?b.bottomLeftStyle:mxUtils$1.getValue(this.style,"bottomLeftStyle","default"),fe=b&&b.fillColor?b.fillColor:mxUtils$1.getValue(this.style,"fillColor","#ffffff");b&&b.strokeColor?b.strokeColor:mxUtils$1.getValue(this.style,"strokeColor","#000000");var Ee=b&&b.strokeWidth?b.strokeWidth:mxUtils$1.getValue(this.style,"strokeWidth","1"),ye=b&&b.fillColor2?b.fillColor2:mxUtils$1.getValue(this.style,"fillColor2","none"),we=b&&b.gradientColor2?b.gradientColor2:mxUtils$1.getValue(this.style,"gradientColor2","none"),be=b&&b.gradientDirection2?b.gradientDirection2:mxUtils$1.getValue(this.style,"gradientDirection2","south"),Ie=b&&b.opacity?b.opacity:mxUtils$1.getValue(this.style,"opacity","100"),_e=Math.max(0,Math.min(50,M)),X=Vt.prototype;if(m.setDashed(z),J&&J!=""&&m.setDashPattern(J),m.setStrokeWidth(Ee),M=Math.min(v*.5,f*.5,M),G||(M=_e*Math.min(f,v)/100),M=Math.min(M,Math.min(f,v)*.5),G||(F=Math.min(W*Math.min(f,v)/100)),F=Math.min(F,Math.min(f,v)*.5-M),(q||et||ut||it)&&rt!="frame"){m.begin(),q?X.moveNW(m,E,$,f,v,y,Et,M,it):m.moveTo(0,0),q&&X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),et&&X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),ut&&X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),it&&X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),m.close(),m.fill(),m.setShadow(!1),m.setFillColor(ye);var Re=Ie,Ne=Ie;ye=="none"&&(Re=0),we=="none"&&(Ne=0),m.setGradient(ye,we,0,0,f,v,be,Re,Ne),m.begin(),q?X.moveNWInner(m,E,$,f,v,y,Et,M,F,q,it):m.moveTo(F,0),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),it&&ut&&X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),ut&&et&&X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),et&&q&&X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),q&&it&&X.paintNWInner(m,E,$,f,v,y,Et,M,F),m.fill(),fe=="none"&&(m.begin(),X.paintFolds(m,E,$,f,v,y,Et,St,wt,_t,M,q,et,ut,it),m.stroke())}!q&&!et&&!ut&&it?rt!="frame"?(m.begin(),X.moveSW(m,E,$,f,v,y,Et,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),rt=="double"&&(X.moveNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it)),m.stroke()):(m.begin(),X.moveSW(m,E,$,f,v,y,Et,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.lineNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),m.close(),m.fillAndStroke()):!q&&!et&&ut&&!it?rt!="frame"?(m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),rt=="double"&&(X.moveSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut)),m.stroke()):(m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.lineSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),m.close(),m.fillAndStroke()):!q&&!et&&ut&&it?rt!="frame"?(m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),rt=="double"&&(X.moveNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut)),m.stroke()):(m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.lineNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),m.close(),m.fillAndStroke()):!q&&et&&!ut&&!it?rt!="frame"?(m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),rt=="double"&&(X.moveSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et)),m.stroke()):(m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.lineSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),m.close(),m.fillAndStroke()):!q&&et&&!ut&&it?rt!="frame"?(m.begin(),X.moveSW(m,E,$,f,v,y,Et,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),rt=="double"&&(X.moveNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it)),m.stroke(),m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),rt=="double"&&(X.moveSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et)),m.stroke()):(m.begin(),X.moveSW(m,E,$,f,v,y,Et,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.lineNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),m.close(),m.fillAndStroke(),m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.lineSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),m.close(),m.fillAndStroke()):!q&&et&&ut&&!it?rt!="frame"?(m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),rt=="double"&&(X.moveSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et)),m.stroke()):(m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.lineSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),m.close(),m.fillAndStroke()):!q&&et&&ut&&it?rt!="frame"?(m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),rt=="double"&&(X.moveNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et)),m.stroke()):(m.begin(),X.moveNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.lineNWInner(m,E,$,f,v,y,Et,M,F,q,it),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),m.close(),m.fillAndStroke()):q&&!et&&!ut&&!it?rt!="frame"?(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),rt=="double"&&(X.moveNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q)),m.stroke()):(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.lineNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),m.close(),m.fillAndStroke()):q&&!et&&!ut&&it?rt!="frame"?(m.begin(),X.moveSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),rt=="double"&&(X.moveNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it)),m.stroke()):(m.begin(),X.moveSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.lineNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),m.close(),m.fillAndStroke()):q&&!et&&ut&&!it?rt!="frame"?(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),rt=="double"&&(X.moveNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q)),m.stroke(),m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),rt=="double"&&(X.moveSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut)),m.stroke()):(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.lineNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),m.close(),m.fillAndStroke(),m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.lineSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),m.close(),m.fillAndStroke()):q&&!et&&ut&&it?rt!="frame"?(m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),rt=="double"&&(X.moveNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut)),m.stroke()):(m.begin(),X.moveSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.lineNEInner(m,E,$,f,v,y,St,M,F,et),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),m.close(),m.fillAndStroke()):q&&et&&!ut&&!it?rt!="frame"?(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),rt=="double"&&(X.moveSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q)),m.stroke()):(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.lineSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),m.close(),m.fillAndStroke()):q&&et&&!ut&&it?rt!="frame"?(m.begin(),X.moveSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),rt=="double"&&(X.moveSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it)),m.stroke()):(m.begin(),X.moveSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.lineSEInner(m,E,$,f,v,y,wt,M,F,ut),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),m.close(),m.fillAndStroke()):q&&et&&ut&&!it?rt!="frame"?(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),rt=="double"&&(X.moveSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q)),m.stroke()):(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.lineSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),m.close(),m.fillAndStroke()):q&&et&&ut&&it&&(rt!="frame"?(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),m.close(),rt=="double"&&(X.moveSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),m.close()),m.stroke()):(m.begin(),X.moveNW(m,E,$,f,v,y,Et,M,it),X.paintNW(m,E,$,f,v,y,Et,M,it),X.paintTop(m,E,$,f,v,y,St,M,et),X.paintNE(m,E,$,f,v,y,St,M,q),X.paintRight(m,E,$,f,v,y,wt,M,ut),X.paintSE(m,E,$,f,v,y,wt,M,et),X.paintBottom(m,E,$,f,v,y,_t,M,it),X.paintSW(m,E,$,f,v,y,_t,M,ut),X.paintLeft(m,E,$,f,v,y,Et,M,q),m.close(),X.moveSWInner(m,E,$,f,v,y,_t,M,F,it),X.paintSWInner(m,E,$,f,v,y,_t,M,F,ut),X.paintBottomInner(m,E,$,f,v,y,wt,M,F,et,ut),X.paintSEInner(m,E,$,f,v,y,wt,M,F),X.paintRightInner(m,E,$,f,v,y,St,M,F,q,et),X.paintNEInner(m,E,$,f,v,y,St,M,F),X.paintTopInner(m,E,$,f,v,y,Et,M,F,it,q),X.paintNWInner(m,E,$,f,v,y,Et,M,F),X.paintLeftInner(m,E,$,f,v,y,_t,M,F,ut,it),m.close(),m.fillAndStroke())),m.begin(),X.paintFolds(m,E,$,f,v,y,Et,St,wt,_t,M,q,et,ut,it),m.stroke()},Vt.prototype.moveNW=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.moveTo(0,0):m.moveTo(0,G)},Vt.prototype.moveNE=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.moveTo(f,0):m.moveTo(f-G,0)},Vt.prototype.moveSE=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.moveTo(f,v):m.moveTo(f,v-G)},Vt.prototype.moveSW=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.moveTo(0,v):m.moveTo(G,v)},Vt.prototype.paintNW=function(m,E,$,f,v,b,y,G,M){if(!M)m.lineTo(0,0);else if(y=="rounded"||y=="default"&&b=="rounded"||y=="invRound"||y=="default"&&b=="invRound"){var rt=0;(y=="rounded"||y=="default"&&b=="rounded")&&(rt=1),m.arcTo(G,G,0,0,rt,G,0)}else(y=="snip"||y=="default"&&b=="snip"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(G,0)},Vt.prototype.paintTop=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.lineTo(f,0):m.lineTo(f-G,0)},Vt.prototype.paintNE=function(m,E,$,f,v,b,y,G,M){if(!M)m.lineTo(f,0);else if(y=="rounded"||y=="default"&&b=="rounded"||y=="invRound"||y=="default"&&b=="invRound"){var rt=0;(y=="rounded"||y=="default"&&b=="rounded")&&(rt=1),m.arcTo(G,G,0,0,rt,f,G)}else(y=="snip"||y=="default"&&b=="snip"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(f,G)},Vt.prototype.paintRight=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.lineTo(f,v):m.lineTo(f,v-G)},Vt.prototype.paintLeft=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.lineTo(0,0):m.lineTo(0,G)},Vt.prototype.paintSE=function(m,E,$,f,v,b,y,G,M){if(!M)m.lineTo(f,v);else if(y=="rounded"||y=="default"&&b=="rounded"||y=="invRound"||y=="default"&&b=="invRound"){var rt=0;(y=="rounded"||y=="default"&&b=="rounded")&&(rt=1),m.arcTo(G,G,0,0,rt,f-G,v)}else(y=="snip"||y=="default"&&b=="snip"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(f-G,v)},Vt.prototype.paintBottom=function(m,E,$,f,v,b,y,G,M){y=="square"||y=="default"&&b=="square"||!M?m.lineTo(0,v):m.lineTo(G,v)},Vt.prototype.paintSW=function(m,E,$,f,v,b,y,G,M){if(!M)m.lineTo(0,v);else if(y=="rounded"||y=="default"&&b=="rounded"||y=="invRound"||y=="default"&&b=="invRound"){var rt=0;(y=="rounded"||y=="default"&&b=="rounded")&&(rt=1),m.arcTo(G,G,0,0,rt,0,v-G)}else(y=="snip"||y=="default"&&b=="snip"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(0,v-G)},Vt.prototype.paintNWInner=function(m,E,$,f,v,b,y,G,M){y=="rounded"||y=="default"&&b=="rounded"?m.arcTo(G-M*.5,G-M*.5,0,0,0,M,M*.5+G):y=="invRound"||y=="default"&&b=="invRound"?m.arcTo(G+M,G+M,0,0,1,M,M+G):y=="snip"||y=="default"&&b=="snip"?m.lineTo(M,M*.5+G):(y=="fold"||y=="default"&&b=="fold")&&(m.lineTo(M+G,M+G),m.lineTo(M,M+G))},Vt.prototype.paintTopInner=function(m,E,$,f,v,b,y,G,M,rt,F){!rt&&!F?m.lineTo(0,0):!rt&&F?m.lineTo(0,M):rt&&!F?m.lineTo(M,0):rt?y=="square"||y=="default"&&b=="square"?m.lineTo(M,M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(G+M*.5,M):m.lineTo(G+M,M):m.lineTo(0,M)},Vt.prototype.paintNEInner=function(m,E,$,f,v,b,y,G,M){y=="rounded"||y=="default"&&b=="rounded"?m.arcTo(G-M*.5,G-M*.5,0,0,0,f-G-M*.5,M):y=="invRound"||y=="default"&&b=="invRound"?m.arcTo(G+M,G+M,0,0,1,f-G-M,M):y=="snip"||y=="default"&&b=="snip"?m.lineTo(f-G-M*.5,M):(y=="fold"||y=="default"&&b=="fold")&&(m.lineTo(f-G-M,G+M),m.lineTo(f-G-M,M))},Vt.prototype.paintRightInner=function(m,E,$,f,v,b,y,G,M,rt,F){!rt&&!F?m.lineTo(f,0):!rt&&F?m.lineTo(f-M,0):rt&&!F?m.lineTo(f,M):rt?y=="square"||y=="default"&&b=="square"?m.lineTo(f-M,M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(f-M,G+M*.5):m.lineTo(f-M,G+M):m.lineTo(f-M,0)},Vt.prototype.paintLeftInner=function(m,E,$,f,v,b,y,G,M,rt,F){!rt&&!F?m.lineTo(0,v):!rt&&F?m.lineTo(M,v):rt&&!F?m.lineTo(0,v-M):rt?y=="square"||y=="default"&&b=="square"?m.lineTo(M,v-M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(M,v-G-M*.5):m.lineTo(M,v-G-M):m.lineTo(M,v)},Vt.prototype.paintSEInner=function(m,E,$,f,v,b,y,G,M){y=="rounded"||y=="default"&&b=="rounded"?m.arcTo(G-M*.5,G-M*.5,0,0,0,f-M,v-G-M*.5):y=="invRound"||y=="default"&&b=="invRound"?m.arcTo(G+M,G+M,0,0,1,f-M,v-G-M):y=="snip"||y=="default"&&b=="snip"?m.lineTo(f-M,v-G-M*.5):(y=="fold"||y=="default"&&b=="fold")&&(m.lineTo(f-G-M,v-G-M),m.lineTo(f-M,v-G-M))},Vt.prototype.paintBottomInner=function(m,E,$,f,v,b,y,G,M,rt,F){!rt&&!F?m.lineTo(f,v):!rt&&F?m.lineTo(f,v-M):rt&&!F?m.lineTo(f-M,v):y=="square"||y=="default"&&b=="square"||!rt?m.lineTo(f-M,v-M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(f-G-M*.5,v-M):m.lineTo(f-G-M,v-M)},Vt.prototype.paintSWInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"?m.lineTo(M,v-M):y=="rounded"||y=="default"&&b=="rounded"?m.arcTo(G-M*.5,G-M*.5,0,0,0,G+M*.5,v-M):y=="invRound"||y=="default"&&b=="invRound"?m.arcTo(G+M,G+M,0,0,1,G+M,v-M):y=="snip"||y=="default"&&b=="snip"?m.lineTo(G+M*.5,v-M):(y=="fold"||y=="default"&&b=="fold")&&(m.lineTo(M+G,v-G-M),m.lineTo(M+G,v-M)):m.lineTo(M,v)},Vt.prototype.moveSWInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"?m.moveTo(M,v-M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.moveTo(M,v-G-M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.moveTo(M,v-G-M):m.moveTo(0,v-M)},Vt.prototype.lineSWInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"?m.lineTo(M,v-M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(M,v-G-M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(M,v-G-M):m.lineTo(0,v-M)},Vt.prototype.moveSEInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"?m.moveTo(f-M,v-M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.moveTo(f-M,v-G-M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.moveTo(f-M,v-G-M):m.moveTo(f-M,v)},Vt.prototype.lineSEInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"?m.lineTo(f-M,v-M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(f-M,v-G-M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(f-M,v-G-M):m.lineTo(f-M,v)},Vt.prototype.moveNEInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"||rt?m.moveTo(f-M,M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.moveTo(f-M,G+M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.moveTo(f-M,G+M):m.moveTo(f,M)},Vt.prototype.lineNEInner=function(m,E,$,f,v,b,y,G,M,rt){rt?y=="square"||y=="default"&&b=="square"||rt?m.lineTo(f-M,M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(f-M,G+M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(f-M,G+M):m.lineTo(f,M)},Vt.prototype.moveNWInner=function(m,E,$,f,v,b,y,G,M,rt,F){!rt&&!F?m.moveTo(0,0):!rt&&F?m.moveTo(M,0):rt&&!F?m.moveTo(0,M):y=="square"||y=="default"&&b=="square"?m.moveTo(M,M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.moveTo(M,G+M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.moveTo(M,G+M)},Vt.prototype.lineNWInner=function(m,E,$,f,v,b,y,G,M,rt,F){!rt&&!F?m.lineTo(0,0):!rt&&F?m.lineTo(M,0):rt&&!F?m.lineTo(0,M):y=="square"||y=="default"&&b=="square"?m.lineTo(M,M):y=="rounded"||y=="default"&&b=="rounded"||y=="snip"||y=="default"&&b=="snip"?m.lineTo(M,G+M*.5):(y=="invRound"||y=="default"&&b=="invRound"||y=="fold"||y=="default"&&b=="fold")&&m.lineTo(M,G+M)},Vt.prototype.paintFolds=function(m,E,$,f,v,b,y,G,M,rt,F,z,J,W,q){(b=="fold"||y=="fold"||G=="fold"||M=="fold"||rt=="fold")&&((y=="fold"||y=="default"&&b=="fold")&&z&&q&&(m.moveTo(0,F),m.lineTo(F,F),m.lineTo(F,0)),(G=="fold"||G=="default"&&b=="fold")&&z&&J&&(m.moveTo(f-F,0),m.lineTo(f-F,F),m.lineTo(f,F)),(M=="fold"||M=="default"&&b=="fold")&&W&&J&&(m.moveTo(f-F,v),m.lineTo(f-F,v-F),m.lineTo(f,v-F)),(rt=="fold"||rt=="default"&&b=="fold")&&W&&q&&(m.moveTo(0,v-F),m.lineTo(F,v-F),m.lineTo(F,v)))},mxCellRenderer.registerShape(Vt.prototype.cst.RECT2,Vt),Vt.prototype.constraints=null;function Kt(){mxConnector.call(this)}mxUtils$1.extend(Kt,mxConnector),Kt.prototype.origPaintEdgeShape=Kt.prototype.paintEdgeShape,Kt.prototype.paintEdgeShape=function(m,E,$){for(var f=[],v=0;v<E.length;v++)f.push(mxUtils$1.clone(E[v]));var b=m.state.dashed,y=m.state.fixDash;if(Kt.prototype.origPaintEdgeShape.apply(this,[m,f,$]),m.state.strokeWidth>=3){var G=mxUtils$1.getValue(this.style,"fillColor",null);G!=null&&(m.setStrokeColor(G),m.setStrokeWidth(m.state.strokeWidth-2),m.setDashed(b,y),Kt.prototype.origPaintEdgeShape.apply(this,[m,E,$]))}},mxCellRenderer.registerShape("filledEdge",Kt),typeof StyleFormatPanel<"u"&&function(){var m=StyleFormatPanel.prototype.getCustomColors;StyleFormatPanel.prototype.getCustomColors=function(){var E=this.editorUi.getSelectionState(),$=m.apply(this,arguments);return E.style.shape=="umlFrame"&&$.push({title:mxResources$1.get("laneColor"),key:"swimlaneFillColor",defaultValue:"default"}),$}}(),mxMarker.addMarker("dash",function(m,E,$,f,v,b,y,G,M,rt){var F=v*(y+M+1),z=b*(y+M+1);return function(){m.begin(),m.moveTo(f.x-F/2-z/2,f.y-z/2+F/2),m.lineTo(f.x+z/2-3*F/2,f.y-3*z/2-F/2),m.stroke()}}),mxMarker.addMarker("box",function(m,E,$,f,v,b,y,G,M,rt){var F=v*(y+M+1),z=b*(y+M+1),J=f.x+F/2,W=f.y+z/2;return f.x-=F,f.y-=z,function(){m.begin(),m.moveTo(J-F/2-z/2,W-z/2+F/2),m.lineTo(J-F/2+z/2,W-z/2-F/2),m.lineTo(J+z/2-3*F/2,W-3*z/2-F/2),m.lineTo(J-z/2-3*F/2,W-3*z/2+F/2),m.close(),rt?m.fillAndStroke():m.stroke()}}),mxMarker.addMarker("cross",function(m,E,$,f,v,b,y,G,M,rt){var F=v*(y+M+1),z=b*(y+M+1);return function(){m.begin(),m.moveTo(f.x-F/2-z/2,f.y-z/2+F/2),m.lineTo(f.x+z/2-3*F/2,f.y-3*z/2-F/2),m.moveTo(f.x-F/2+z/2,f.y-z/2-F/2),m.lineTo(f.x-z/2-3*F/2,f.y-3*z/2+F/2),m.stroke()}});function xe(m,E,$,f,v,b,F,G,M,rt){var F=F+M,z=f.clone();return f.x-=v*(2*F+M),f.y-=b*(2*F+M),v=v*(F+M),b=b*(F+M),function(){m.ellipse(z.x-v-F,z.y-b-F,2*F,2*F),rt?m.fillAndStroke():m.stroke()}}mxMarker.addMarker("circle",xe),mxMarker.addMarker("circlePlus",function(m,E,$,f,v,b,y,G,M,rt){var F=f.clone(),z=xe.apply(this,arguments),J=v*(y+2*M),W=b*(y+2*M);return function(){z.apply(this,arguments),m.begin(),m.moveTo(F.x-v*M,F.y-b*M),m.lineTo(F.x-2*J+v*M,F.y-2*W+b*M),m.moveTo(F.x-J-W+b*M,F.y-W+J-v*M),m.lineTo(F.x+W-J-b*M,F.y-W-J+v*M),m.stroke()}}),mxMarker.addMarker("halfCircle",function(m,E,$,f,v,b,y,G,M,rt){var F=v*(y+M+1),z=b*(y+M+1),J=f.clone();return f.x-=F,f.y-=z,function(){m.begin(),m.moveTo(J.x-z,J.y+F),m.quadTo(f.x-z,f.y+F,f.x,f.y),m.quadTo(f.x+z,f.y-F,J.x+z,J.y-F),m.stroke()}}),mxMarker.addMarker("async",function(m,E,$,f,v,b,y,G,M,rt){var F=v*M*1.118,z=b*M*1.118;v=v*(y+M),b=b*(y+M);var J=f.clone();J.x-=F,J.y-=z;var W=1;return f.x+=-v*W-F,f.y+=-b*W-z,function(){m.begin(),m.moveTo(J.x,J.y),G?m.lineTo(J.x-v-b/2,J.y-b+v/2):m.lineTo(J.x+b/2-v,J.y-b-v/2),m.lineTo(J.x-v,J.y-b),m.close(),rt?m.fillAndStroke():m.stroke()}});function he(m){return m=m??2,function(E,$,f,v,b,y,G,M,rt,F){b=b*(G+rt),y=y*(G+rt);var z=v.clone();return function(){E.begin(),E.moveTo(z.x,z.y),M?E.lineTo(z.x-b-y/m,z.y-y+b/m):E.lineTo(z.x+y/m-b,z.y-y-b/m),E.stroke()}}}if(mxMarker.addMarker("openAsync",he(2)),typeof mxVertexHandler<"u"){let m=function(z,J,W,q,et,ut,it){var Et=new mxHandle(z,null,mxVertexHandler.prototype.secondaryHandleImage);if(Et.execute=function(wt){for(var _t=0;_t<J.length;_t++)this.copyStyle(J[_t]);it&&it(wt)},Et.getPosition=W,Et.setPosition=q,Et.ignoreGrid=et??!0,ut){var St=Et.positionChanged;Et.positionChanged=function(){St.apply(this,arguments),z.view.invalidate(this.state.cell),z.view.validate()}}return Et},E=function(z,J){return m(z,[mxConstants$1.STYLE_ARCSIZE],function(W){var q=J??W.height/8;if(mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1"){var et=mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;return new mxPoint$1(W.x+W.width-Math.min(W.width/2,et),W.y+q)}else{var et=Math.max(0,parseFloat(mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)))/100;return new mxPoint$1(W.x+W.width-Math.min(Math.max(W.width/2,W.height/2),Math.min(W.width,W.height)*et),W.y+q)}},function(W,q,et){if(mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")this.state.style[mxConstants$1.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(W.width,(W.x+W.width-q.x)*2)));else{var ut=Math.min(50,Math.max(0,(W.width-q.x+W.x)*100/Math.min(W.width,W.height)));this.state.style[mxConstants$1.STYLE_ARCSIZE]=Math.round(ut)}})},$=function(){return function(z){var J=[];return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ROUNDED,!1)&&J.push(E(z)),J}},f=function(z,J,W){return z=z??.5,function(q){var et=[m(q,["size"],function(ut){var it=W!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,Et=Math.max(0,parseFloat(mxUtils$1.getValue(this.state.style,"size",it?W:J)));return new mxPoint$1(ut.x+Math.min(ut.width*.75*z,Et*(it?.75:ut.width*.75)),ut.y+ut.height/4)},function(ut,it){var Et=W!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,St=Et?it.x-ut.x:Math.max(0,Math.min(z,(it.x-ut.x)/ut.width*.75));this.state.style.size=St},!1,!0)];return mxUtils$1.getValue(q.style,mxConstants$1.STYLE_ROUNDED,!1)&&et.push(E(q)),et}},v=function(z,J,W,q,et){return W=W??.5,function(ut){var it=[m(ut,["size"],function(Et){var St=et!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,wt=parseFloat(mxUtils$1.getValue(this.state.style,"size",St?et:z));return new mxPoint$1(Et.x+Math.max(0,Math.min(Et.width*.5,wt*(St?1:Et.width))),Et.getCenterY())},function(Et,St,wt){var _t=et!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,fe=_t?St.x-Et.x:Math.max(0,Math.min(W,(St.x-Et.x)/Et.width));this.state.style.size=fe},!1,q)];return J&&mxUtils$1.getValue(ut.style,mxConstants$1.STYLE_ROUNDED,!1)&&it.push(E(ut)),it}},b=function(z,J,W){return function(q){var et=[m(q,["size"],function(ut){var it=Math.max(0,Math.min(ut.width,Math.min(ut.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",J)))))*z;return new mxPoint$1(ut.x+it,ut.y+it)},function(ut,it){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(ut.width,it.x-ut.x),Math.min(ut.height,it.y-ut.y)))/z)},!1)];return W&&mxUtils$1.getValue(q.style,mxConstants$1.STYLE_ROUNDED,!1)&&et.push(E(q)),et}},y=function(z){return function(J){return[m(J,["size"],function(W){var q=Math.max(0,Math.min(W.height*.5,parseFloat(mxUtils$1.getValue(this.state.style,"size",z))));return new mxPoint$1(W.x,W.y+q)},function(W,q){this.state.style.size=Math.max(0,q.y-W.y)},!0)]}},G=function(z){return function(J){return[m(J,["arrowWidth","arrowSize"],function(W){var q=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"arrowWidth",L.prototype.arrowWidth))),et=Math.max(0,Math.min(z,mxUtils$1.getValue(this.state.style,"arrowSize",L.prototype.arrowSize)));return new mxPoint$1(W.x+(1-et)*W.width,W.y+(1-q)*W.height/2)},function(W,q){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(W.y+W.height/2-q.y)/W.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(z,(W.x+W.width-q.x)/W.width))})]}},M=function(z,J){return function(W){return[rt(W,["startWidth"],!0,function(q,et,ut,it,Et){var St=mxUtils$1.getNumber(W.style,"startWidth",z)*W.view.scale+J;return new mxPoint$1(it.x+et*q/4+ut*St/2,it.y+ut*q/4-et*St/2)},function(q,et,ut,it,Et,St){var wt=Math.sqrt(mxUtils$1.ptSegDistSq(it.x,it.y,Et.x,Et.y,St.x,St.y));W.style.startWidth=Math.round(wt*2)/W.view.scale-J})]}},rt=function(z,J,W,q,et){return m(z,J,function(ut){var it=z.absolutePoints;if(it!=null&&it.length>0){var Et=it.length-1,St=z.view.translate,wt=z.view.scale,_t=W?it[0]:it[Et],fe=W?it[1]:it[Et-1],Ee=fe.x-_t.x,ye=fe.y-_t.y,we=Math.sqrt(Ee*Ee+ye*ye),be=q.call(this,we,Ee/we,ye/we,_t,fe);return new mxPoint$1(be.x/wt-St.x,be.y/wt-St.y)}else return null},function(ut,it,Et){var St=z.absolutePoints,wt=St.length-1,_t=z.view.translate,fe=z.view.scale,Ee=W?St[0]:St[wt],ye=W?St[1]:St[wt-1],we=ye.x-Ee.x,be=ye.y-Ee.y,Ie=Math.sqrt(we*we+be*be);it.x=(it.x+_t.x)*fe,it.y=(it.y+_t.y)*fe,et.call(this,Ie,we/Ie,be/Ie,Ee,ye,it,Et)})},F=function(z,J,W){return rt(z,["width"],J,function(q,et,ut,it,Et){var St=z.shape.getEdgeWidth()*z.view.scale+W;return new mxPoint$1(it.x+et*q/4+ut*St/2,it.y+ut*q/4-et*St/2)},function(q,et,ut,it,Et,St){var wt=Math.sqrt(mxUtils$1.ptSegDistSq(it.x,it.y,Et.x,Et.y,St.x,St.y));z.style.width=Math.round(wt*2)/z.view.scale-W})};var Le=m,Te=E,Pe=$,De=f,Ft=v,ht=b,Ht=y,Ut=G,oe=M,ue=rt,de=F,ve={link:function(z){var J=10;return[F(z,!0,J),F(z,!1,J)]},flexArrow:function(z){var J=z.view.graph.gridSize/z.view.scale,W=[];return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(W.push(rt(z,["width",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!0,function(q,et,ut,it,Et){var St=(z.shape.getEdgeWidth()-z.shape.strokewidth)*z.view.scale,wt=mxUtils$1.getNumber(z.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3*z.view.scale;return new mxPoint$1(it.x+et*(wt+z.shape.strokewidth*z.view.scale)+ut*St/2,it.y+ut*(wt+z.shape.strokewidth*z.view.scale)-et*St/2)},function(q,et,ut,it,Et,St,wt){var _t=Math.sqrt(mxUtils$1.ptSegDistSq(it.x,it.y,Et.x,Et.y,St.x,St.y)),fe=mxUtils$1.ptLineDist(it.x,it.y,it.x+ut,it.y-et,St.x,St.y);z.style[mxConstants$1.STYLE_STARTSIZE]=Math.round((fe-z.shape.strokewidth)*100/3)/100/z.view.scale,z.style.width=Math.round(_t*2)/z.view.scale,(mxEvent$1.isShiftDown(wt.getEvent())||mxEvent$1.isControlDown(wt.getEvent()))&&(z.style[mxConstants$1.STYLE_ENDSIZE]=z.style[mxConstants$1.STYLE_STARTSIZE]),mxEvent$1.isAltDown(wt.getEvent())||Math.abs(parseFloat(z.style[mxConstants$1.STYLE_STARTSIZE])-parseFloat(z.style[mxConstants$1.STYLE_ENDSIZE]))<J/6&&(z.style[mxConstants$1.STYLE_STARTSIZE]=z.style[mxConstants$1.STYLE_ENDSIZE])})),W.push(rt(z,["startWidth","endWidth",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!0,function(q,et,ut,it,Et){var St=(z.shape.getStartArrowWidth()-z.shape.strokewidth)*z.view.scale,wt=mxUtils$1.getNumber(z.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3*z.view.scale;return new mxPoint$1(it.x+et*(wt+z.shape.strokewidth*z.view.scale)+ut*St/2,it.y+ut*(wt+z.shape.strokewidth*z.view.scale)-et*St/2)},function(q,et,ut,it,Et,St,wt){var _t=Math.sqrt(mxUtils$1.ptSegDistSq(it.x,it.y,Et.x,Et.y,St.x,St.y)),fe=mxUtils$1.ptLineDist(it.x,it.y,it.x+ut,it.y-et,St.x,St.y);z.style[mxConstants$1.STYLE_STARTSIZE]=Math.round((fe-z.shape.strokewidth)*100/3)/100/z.view.scale,z.style.startWidth=Math.max(0,Math.round(_t*2)-z.shape.getEdgeWidth())/z.view.scale,(mxEvent$1.isShiftDown(wt.getEvent())||mxEvent$1.isControlDown(wt.getEvent()))&&(z.style[mxConstants$1.STYLE_ENDSIZE]=z.style[mxConstants$1.STYLE_STARTSIZE],z.style.endWidth=z.style.startWidth),mxEvent$1.isAltDown(wt.getEvent())||(Math.abs(parseFloat(z.style[mxConstants$1.STYLE_STARTSIZE])-parseFloat(z.style[mxConstants$1.STYLE_ENDSIZE]))<J/6&&(z.style[mxConstants$1.STYLE_STARTSIZE]=z.style[mxConstants$1.STYLE_ENDSIZE]),Math.abs(parseFloat(z.style.startWidth)-parseFloat(z.style.endWidth))<J&&(z.style.startWidth=z.style.endWidth))}))),mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(W.push(rt(z,["width",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!1,function(q,et,ut,it,Et){var St=(z.shape.getEdgeWidth()-z.shape.strokewidth)*z.view.scale,wt=mxUtils$1.getNumber(z.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3*z.view.scale;return new mxPoint$1(it.x+et*(wt+z.shape.strokewidth*z.view.scale)-ut*St/2,it.y+ut*(wt+z.shape.strokewidth*z.view.scale)+et*St/2)},function(q,et,ut,it,Et,St,wt){var _t=Math.sqrt(mxUtils$1.ptSegDistSq(it.x,it.y,Et.x,Et.y,St.x,St.y)),fe=mxUtils$1.ptLineDist(it.x,it.y,it.x+ut,it.y-et,St.x,St.y);z.style[mxConstants$1.STYLE_ENDSIZE]=Math.round((fe-z.shape.strokewidth)*100/3)/100/z.view.scale,z.style.width=Math.round(_t*2)/z.view.scale,(mxEvent$1.isShiftDown(wt.getEvent())||mxEvent$1.isControlDown(wt.getEvent()))&&(z.style[mxConstants$1.STYLE_STARTSIZE]=z.style[mxConstants$1.STYLE_ENDSIZE]),mxEvent$1.isAltDown(wt.getEvent())||Math.abs(parseFloat(z.style[mxConstants$1.STYLE_ENDSIZE])-parseFloat(z.style[mxConstants$1.STYLE_STARTSIZE]))<J/6&&(z.style[mxConstants$1.STYLE_ENDSIZE]=z.style[mxConstants$1.STYLE_STARTSIZE])})),W.push(rt(z,["startWidth","endWidth",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!1,function(q,et,ut,it,Et){var St=(z.shape.getEndArrowWidth()-z.shape.strokewidth)*z.view.scale,wt=mxUtils$1.getNumber(z.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3*z.view.scale;return new mxPoint$1(it.x+et*(wt+z.shape.strokewidth*z.view.scale)-ut*St/2,it.y+ut*(wt+z.shape.strokewidth*z.view.scale)+et*St/2)},function(q,et,ut,it,Et,St,wt){var _t=Math.sqrt(mxUtils$1.ptSegDistSq(it.x,it.y,Et.x,Et.y,St.x,St.y)),fe=mxUtils$1.ptLineDist(it.x,it.y,it.x+ut,it.y-et,St.x,St.y);z.style[mxConstants$1.STYLE_ENDSIZE]=Math.round((fe-z.shape.strokewidth)*100/3)/100/z.view.scale,z.style.endWidth=Math.max(0,Math.round(_t*2)-z.shape.getEdgeWidth())/z.view.scale,(mxEvent$1.isShiftDown(wt.getEvent())||mxEvent$1.isControlDown(wt.getEvent()))&&(z.style[mxConstants$1.STYLE_STARTSIZE]=z.style[mxConstants$1.STYLE_ENDSIZE],z.style.startWidth=z.style.endWidth),mxEvent$1.isAltDown(wt.getEvent())||(Math.abs(parseFloat(z.style[mxConstants$1.STYLE_ENDSIZE])-parseFloat(z.style[mxConstants$1.STYLE_STARTSIZE]))<J/6&&(z.style[mxConstants$1.STYLE_ENDSIZE]=z.style[mxConstants$1.STYLE_STARTSIZE]),Math.abs(parseFloat(z.style.endWidth)-parseFloat(z.style.startWidth))<J&&(z.style.endWidth=z.style.startWidth))}))),W},swimlane:function(z){var J=[];if(mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ROUNDED)){var W=parseFloat(mxUtils$1.getValue(z.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));J.push(E(z,W/2))}return J.push(m(z,[mxConstants$1.STYLE_STARTSIZE],function(q){var et=parseFloat(mxUtils$1.getValue(z.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_HORIZONTAL,1)==1?new mxPoint$1(q.getCenterX(),q.y+Math.max(0,Math.min(q.height,et))):new mxPoint$1(q.x+Math.max(0,Math.min(q.width,et)),q.getCenterY())},function(q,et){z.style[mxConstants$1.STYLE_STARTSIZE]=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,1)==1?Math.round(Math.max(0,Math.min(q.height,et.y-q.y))):Math.round(Math.max(0,Math.min(q.width,et.x-q.x)))},!1,null,function(q){var et=z.view.graph;if(!mxEvent$1.isShiftDown(q.getEvent())&&!mxEvent$1.isControlDown(q.getEvent())&&(et.isTableRow(z.cell)||et.isTableCell(z.cell))){for(var ut=et.getSwimlaneDirection(z.style),it=et.model.getParent(z.cell),Et=et.model.getChildCells(it,!0),St=[],wt=0;wt<Et.length;wt++)Et[wt]!=z.cell&&et.isSwimlane(Et[wt])&&et.getSwimlaneDirection(et.getCurrentCellStyle(Et[wt]))==ut&&St.push(Et[wt]);et.setCellStyles(mxConstants$1.STYLE_STARTSIZE,z.style[mxConstants$1.STYLE_STARTSIZE],St)}})),J},label:$(),ext:$(),rectangle:$(),triangle:$(),rhombus:$(),umlLifeline:function(z){return[m(z,["size"],function(J){var W=Math.max(0,Math.min(J.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",Pt.prototype.size))));return new mxPoint$1(J.getCenterX(),J.y+W)},function(J,W){this.state.style.size=Math.round(Math.max(0,Math.min(J.height,W.y-J.y)))},!1)]},umlFrame:function(z){var J=[m(z,["width","height"],function(W){var q=Math.max(Dt.prototype.corner,Math.min(W.width,mxUtils$1.getValue(this.state.style,"width",Dt.prototype.width))),et=Math.max(Dt.prototype.corner*1.5,Math.min(W.height,mxUtils$1.getValue(this.state.style,"height",Dt.prototype.height)));return new mxPoint$1(W.x+q,W.y+et)},function(W,q){this.state.style.width=Math.round(Math.max(Dt.prototype.corner,Math.min(W.width,q.x-W.x))),this.state.style.height=Math.round(Math.max(Dt.prototype.corner*1.5,Math.min(W.height,q.y-W.y)))},!1)];return J},process:function(z){var J=[m(z,["size"],function(W){var q=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",et=parseFloat(mxUtils$1.getValue(this.state.style,"size",lt.prototype.size));return q?new mxPoint$1(W.x+et,W.y+W.height/4):new mxPoint$1(W.x+W.width*et,W.y+W.height/4)},function(W,q){var et=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",ut=et?Math.max(0,Math.min(W.width*.5,q.x-W.x)):Math.max(0,Math.min(.5,(q.x-W.x)/W.width));this.state.style.size=ut},!1)];return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ROUNDED,!1)&&J.push(E(z)),J},cross:function(z){return[m(z,["size"],function(J){var W=Math.min(J.width,J.height),q=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"size",Qt.prototype.size)))*W/2;return new mxPoint$1(J.getCenterX()-q,J.getCenterY()-q)},function(J,W){var q=Math.min(J.width,J.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,J.getCenterY()-W.y)/q*2,Math.max(0,J.getCenterX()-W.x)/q*2)))})]},note:function(z){return[m(z,["size"],function(J){var W=Math.max(0,Math.min(J.width,Math.min(J.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",p.prototype.size)))));return new mxPoint$1(J.x+J.width-W,J.y+W)},function(J,W){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(J.width,J.x+J.width-W.x),Math.min(J.height,W.y-J.y))))})]},note2:function(z){return[m(z,["size"],function(J){var W=Math.max(0,Math.min(J.width,Math.min(J.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",c.prototype.size)))));return new mxPoint$1(J.x+J.width-W,J.y+W)},function(J,W){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(J.width,J.x+J.width-W.x),Math.min(J.height,W.y-J.y))))})]},manualInput:function(z){var J=[m(z,["size"],function(W){var q=Math.max(0,Math.min(W.height,mxUtils$1.getValue(this.state.style,"size",re.prototype.size)));return new mxPoint$1(W.x+W.width/4,W.y+q*3/4)},function(W,q){this.state.style.size=Math.round(Math.max(0,Math.min(W.height,(q.y-W.y)*4/3)))},!1)];return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ROUNDED,!1)&&J.push(E(z)),J},dataStorage:function(z){return[m(z,["size"],function(J){var W=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",q=parseFloat(mxUtils$1.getValue(this.state.style,"size",W?O.prototype.fixedSize:O.prototype.size));return new mxPoint$1(J.x+J.width-q*(W?1:J.width),J.getCenterY())},function(J,W){var q=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",et=q?Math.max(0,Math.min(J.width,J.x+J.width-W.x)):Math.max(0,Math.min(1,(J.x+J.width-W.x)/J.width));this.state.style.size=et},!1)]},callout:function(z){var J=[m(z,["size","position"],function(W){var q=Math.max(0,Math.min(W.height,mxUtils$1.getValue(this.state.style,"size",st.prototype.size))),et=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",st.prototype.position)));return Math.max(0,Math.min(W.width,mxUtils$1.getValue(this.state.style,"base",st.prototype.base))),new mxPoint$1(W.x+et*W.width,W.y+W.height-q)},function(W,q){Math.max(0,Math.min(W.width,mxUtils$1.getValue(this.state.style,"base",st.prototype.base))),this.state.style.size=Math.round(Math.max(0,Math.min(W.height,W.y+W.height-q.y))),this.state.style.position=Math.round(Math.max(0,Math.min(1,(q.x-W.x)/W.width))*100)/100},!1),m(z,["position2"],function(W){var q=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position2",st.prototype.position2)));return new mxPoint$1(W.x+q*W.width,W.y+W.height)},function(W,q){this.state.style.position2=Math.round(Math.max(0,Math.min(1,(q.x-W.x)/W.width))*100)/100},!1),m(z,["base"],function(W){var q=Math.max(0,Math.min(W.height,mxUtils$1.getValue(this.state.style,"size",st.prototype.size))),et=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",st.prototype.position))),ut=Math.max(0,Math.min(W.width,mxUtils$1.getValue(this.state.style,"base",st.prototype.base)));return new mxPoint$1(W.x+Math.min(W.width,et*W.width+ut),W.y+W.height-q)},function(W,q){var et=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",st.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(W.width,q.x-W.x-et*W.width)))},!1)];return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ROUNDED,!1)&&J.push(E(z)),J},internalStorage:function(z){var J=[m(z,["dx","dy"],function(W){var q=Math.max(0,Math.min(W.width,mxUtils$1.getValue(this.state.style,"dx",te.prototype.dx))),et=Math.max(0,Math.min(W.height,mxUtils$1.getValue(this.state.style,"dy",te.prototype.dy)));return new mxPoint$1(W.x+q,W.y+et)},function(W,q){this.state.style.dx=Math.round(Math.max(0,Math.min(W.width,q.x-W.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(W.height,q.y-W.y)))},!1)];return mxUtils$1.getValue(z.style,mxConstants$1.STYLE_ROUNDED,!1)&&J.push(E(z)),J},module:function(z){var J=[m(z,["jettyWidth","jettyHeight"],function(W){var q=Math.max(0,Math.min(W.width,mxUtils$1.getValue(this.state.style,"jettyWidth",kt.prototype.jettyWidth))),et=Math.max(0,Math.min(W.height,mxUtils$1.getValue(this.state.style,"jettyHeight",kt.prototype.jettyHeight)));return new mxPoint$1(W.x+q/2,W.y+et*2)},function(W,q){this.state.style.jettyWidth=Math.round(Math.max(0,Math.min(W.width,q.x-W.x))*2),this.state.style.jettyHeight=Math.round(Math.max(0,Math.min(W.height,q.y-W.y))/2)})];return J},corner:function(z){return[m(z,["dx","dy"],function(J){var W=Math.max(0,Math.min(J.width,mxUtils$1.getValue(this.state.style,"dx",se.prototype.dx))),q=Math.max(0,Math.min(J.height,mxUtils$1.getValue(this.state.style,"dy",se.prototype.dy)));return new mxPoint$1(J.x+W,J.y+q)},function(J,W){this.state.style.dx=Math.round(Math.max(0,Math.min(J.width,W.x-J.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(J.height,W.y-J.y)))},!1)]},tee:function(z){return[m(z,["dx","dy"],function(J){var W=Math.max(0,Math.min(J.width,mxUtils$1.getValue(this.state.style,"dx",I.prototype.dx))),q=Math.max(0,Math.min(J.height,mxUtils$1.getValue(this.state.style,"dy",I.prototype.dy)));return new mxPoint$1(J.x+(J.width+W)/2,J.y+q)},function(J,W){this.state.style.dx=Math.round(Math.max(0,Math.min(J.width/2,W.x-J.x-J.width/2)*2)),this.state.style.dy=Math.round(Math.max(0,Math.min(J.height,W.y-J.y)))},!1)]},singleArrow:G(1),doubleArrow:G(.5),"mxgraph.arrows2.wedgeArrow":M(20,20),"mxgraph.arrows2.wedgeArrowDashed":M(20,20),"mxgraph.arrows2.wedgeArrowDashed2":M(20,20),folder:function(z){return[m(z,["tabWidth","tabHeight"],function(J){var W=Math.max(0,Math.min(J.width,mxUtils$1.getValue(this.state.style,"tabWidth",A.prototype.tabWidth))),q=Math.max(0,Math.min(J.height,mxUtils$1.getValue(this.state.style,"tabHeight",A.prototype.tabHeight)));return mxUtils$1.getValue(this.state.style,"tabPosition",A.prototype.tabPosition)==mxConstants$1.ALIGN_RIGHT&&(W=J.width-W),new mxPoint$1(J.x+W,J.y+q)},function(J,W){var q=Math.max(0,Math.min(J.width,W.x-J.x));mxUtils$1.getValue(this.state.style,"tabPosition",A.prototype.tabPosition)==mxConstants$1.ALIGN_RIGHT&&(q=J.width-q),this.state.style.tabWidth=Math.round(q),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(J.height,W.y-J.y)))},!1)]},document:function(z){return[m(z,["size"],function(J){var W=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",H.prototype.size))));return new mxPoint$1(J.x+3*J.width/4,J.y+(1-W)*J.height)},function(J,W){this.state.style.size=Math.max(0,Math.min(1,(J.y+J.height-W.y)/J.height))},!1)]},tape:function(z){return[m(z,["size"],function(J){var W=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",N.prototype.size))));return new mxPoint$1(J.getCenterX(),J.y+W*J.height/2)},function(J,W){this.state.style.size=Math.max(0,Math.min(1,(W.y-J.y)/J.height*2))},!1)]},isoCube2:function(z){return[m(z,["isoAngle"],function(J){var W=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.state.style,"isoAngle",g.isoAngle))))*Math.PI/200,q=Math.min(J.width*Math.tan(W),J.height*.5);return new mxPoint$1(J.x,J.y+q)},function(J,W){this.state.style.isoAngle=Math.max(0,(W.y-J.y)*50/J.height)},!0)]},cylinder2:y(x.prototype.size),cylinder3:y(C.prototype.size),offPageConnector:function(z){return[m(z,["size"],function(J){var W=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",ot.prototype.size))));return new mxPoint$1(J.getCenterX(),J.y+(1-W)*J.height)},function(J,W){this.state.style.size=Math.max(0,Math.min(1,(J.y+J.height-W.y)/J.height))},!1)]},"mxgraph.basic.rect":function(z){var J=[Graph$1.createHandle(z,["size"],function(q){var et=Math.max(0,Math.min(q.width/2,q.height/2,parseFloat(mxUtils$1.getValue(this.state.style,"size",this.size))));return new mxPoint$1(q.x+et,q.y+et)},function(q,et){this.state.style.size=Math.round(100*Math.max(0,Math.min(q.height/2,q.width/2,et.x-q.x)))/100})],W=Graph$1.createHandle(z,["indent"],function(q){var et=Math.max(0,Math.min(100,parseFloat(mxUtils$1.getValue(this.state.style,"indent",this.dx2))));return new mxPoint$1(q.x+q.width*.75,q.y+et*q.height/200)},function(q,et){this.state.style.indent=Math.round(100*Math.max(0,Math.min(100,200*(et.y-q.y)/q.height)))/100});return J.push(W),J},step:v(ft.prototype.size,!0,null,!0,ft.prototype.fixedSize),hexagon:v($t.prototype.size,!0,.5,!0,$t.prototype.fixedSize),curlyBracket:v(nt.prototype.size,!1),display:v(qt.prototype.size,!1),cube:b(1,n.prototype.size,!1),card:b(.5,_.prototype.size,!0),loopLimit:b(.5,at.prototype.size,!0),trapezoid:f(.5,Q.prototype.size,Q.prototype.fixedSize),parallelogram:f(1,K.prototype.size,K.prototype.fixedSize)};Graph$1.createHandle=m,Graph$1.handleFactory=ve;var ae=mxVertexHandler.prototype.createCustomHandles;mxVertexHandler.prototype.createCustomHandles=function(){var z=ae.apply(this,arguments);if(this.graph.isCellRotatable(this.state.cell)){var J=this.state.style.shape;mxCellRenderer.defaultShapes[J]==null&&mxStencilRegistry.getStencil(J)==null?J=mxConstants$1.SHAPE_RECTANGLE:this.state.view.graph.isSwimlane(this.state.cell)&&(J=mxConstants$1.SHAPE_SWIMLANE);var W=ve[J];if(W==null&&this.state.shape!=null&&this.state.shape.isRoundable()&&(W=ve[mxConstants$1.SHAPE_RECTANGLE]),W!=null){var q=W(this.state);q!=null&&(z==null?z=q:z=z.concat(q))}}return z},mxEdgeHandler.prototype.createCustomHandles=function(){var z=this.state.style.shape;mxCellRenderer.defaultShapes[z]==null&&mxStencilRegistry.getStencil(z)==null&&(z=mxConstants$1.SHAPE_CONNECTOR);var J=ve[z];return J!=null?J(this.state):null}}else Graph$1.createHandle=function(){},Graph$1.handleFactory={};var pe=new mxPoint$1(1,0),me=new mxPoint$1(1,0),ge=mxUtils$1.toRadians(-30),Ce=Math.cos(ge),Se=Math.sin(ge);pe=mxUtils$1.getRotatedPoint(pe,Ce,Se);var $e=mxUtils$1.toRadians(-150),Me=Math.cos($e),ce=Math.sin($e);me=mxUtils$1.getRotatedPoint(me,Me,ce),mxEdgeStyle$1.IsometricConnector=function(m,E,$,f,v){var b=m.view,y=f!=null&&f.length>0?f[0]:null,G=m.absolutePoints,M=G[0],rt=G[G.length-1];y!=null&&(y=b.transformControlPoint(m,y)),M==null&&E!=null&&(M=new mxPoint$1(E.getCenterX(),E.getCenterY())),rt==null&&$!=null&&(rt=new mxPoint$1($.getCenterX(),$.getCenterY()));var F=pe.x,z=pe.y,J=me.x,W=me.y,q=mxUtils$1.getValue(m.style,"elbow","horizontal")=="horizontal";if(rt!=null&&M!=null){let it=function(Et,St,wt){var _t=Et-et.x,fe=St-et.y,Ee=(W*_t-J*fe)/(F*W-z*J),ye=(z*_t-F*fe)/(z*J-F*W);q?(wt&&(et=new mxPoint$1(et.x+F*Ee,et.y+z*Ee),v.push(et)),et=new mxPoint$1(et.x+J*ye,et.y+W*ye),v.push(et)):(wt&&(et=new mxPoint$1(et.x+J*ye,et.y+W*ye),v.push(et)),et=new mxPoint$1(et.x+F*Ee,et.y+z*Ee),v.push(et))};var ut=it,et=M;y==null&&(y=new mxPoint$1(M.x+(rt.x-M.x)/2,M.y+(rt.y-M.y)/2)),it(y.x,y.y,!0),it(rt.x,rt.y,!1)}},mxStyleRegistry$1.putValue("isometricEdgeStyle",mxEdgeStyle$1.IsometricConnector);var Ae=Graph$1.prototype.createEdgeHandler;Graph$1.prototype.createEdgeHandler=function(m,E){if(E==mxEdgeStyle$1.IsometricConnector){var $=new mxElbowEdgeHandler(m);return $.snapToTerminals=!1,$}return Ae.apply(this,arguments)},o.prototype.constraints=[],u.prototype.getConstraints=function(m,E,$){var f=[],v=Math.tan(mxUtils$1.toRadians(30)),b=(.5-v)/2,y=Math.min(E,$/(.5+v)),G=(E-y)/2,M=($-y)/2;return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,G,M+.25*y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,G+.5*y,M+y*b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,G+y,M+.25*y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,G+y,M+.75*y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,G+.5*y,M+(1-b)*y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,G,M+.75*y)),f},g.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,b=Math.min(E*Math.tan(v),$*.5);return f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,$-b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,$-b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,b)),f},st.prototype.getConstraints=function(m,E,$){var f=[];mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;var v=Math.max(0,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));E*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position",this.position))));var b=E*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position2",this.position2))));return Math.max(0,Math.min(E,parseFloat(mxUtils$1.getValue(this.style,"base",this.base)))),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.25,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.75,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,($-v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,$-v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,b,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,$-v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,($-v)*.5)),E>=v*2&&f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f},mxRectangleShape$1.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.25,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,0),!0),new mxConnectionConstraint$1(new mxPoint$1(1,0),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(0,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.25,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,1),!0),new mxConnectionConstraint$1(new mxPoint$1(1,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,0),!0),new mxConnectionConstraint$1(new mxPoint$1(1,0),!0),new mxConnectionConstraint$1(new mxPoint$1(0,1),!0),new mxConnectionConstraint$1(new mxPoint$1(1,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5))],le.prototype.constraints=mxRectangleShape$1.prototype.constraints,mxImageShape$1.prototype.constraints=mxRectangleShape$1.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape$1.prototype.constraints,Ct.prototype.constraints=mxRectangleShape$1.prototype.constraints,mxLabel$1.prototype.constraints=mxRectangleShape$1.prototype.constraints,p.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min(E,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-v)*.5,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v*.5,v*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,($+v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),E>=v*2&&f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f},_.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min(E,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v*.5,v*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,($+v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)),E>=v*2&&f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f},n.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min(E,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-v)*.5,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v*.5,v*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,($+v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v*.5,$-v*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,$-v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,($-v)*.5)),f},C.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));return f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1,null,0,v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,1),!1,null,0,-v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,1),!1,null,0,-v)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,v+($*.5-v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1,null,0,v+($*.5-v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1,null,0,$-v-($*.5-v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,$-v-($*.5-v)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.145,0),!1,null,0,v*.29)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.855,0),!1,null,0,v*.29)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.855,1),!1,null,0,-v*.29)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.145,1),!1,null,0,-v*.29)),f},A.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min(E,parseFloat(mxUtils$1.getValue(this.style,"tabWidth",this.tabWidth)))),b=Math.max(0,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"tabHeight",this.tabHeight)))),y=mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition);return y=="left"?(f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v*.5,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,b))):(f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v*.5,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-v)*.5,b))),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,($-b)*.25+b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,($-b)*.5+b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,($-b)*.75+b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,($-b)*.25+b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,($-b)*.5+b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,($-b)*.75+b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.25,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.75,1),!1)),f},te.prototype.constraints=mxRectangleShape$1.prototype.constraints,O.prototype.constraints=mxRectangleShape$1.prototype.constraints,yt.prototype.constraints=mxEllipse.prototype.constraints,Lt.prototype.constraints=mxEllipse.prototype.constraints,It.prototype.constraints=mxEllipse.prototype.constraints,jt.prototype.constraints=mxEllipse.prototype.constraints,re.prototype.constraints=mxRectangleShape$1.prototype.constraints,Zt.prototype.constraints=mxRectangleShape$1.prototype.constraints,qt.prototype.getConstraints=function(m,E,$){var f=[],v=Math.min(E,$/2),b=Math.min(E-v,Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))*E);return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1,null)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,b,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(b+E-v)*.5,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1,null)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-v,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(b+E-v)*.5,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,b,$)),f},kt.prototype.getConstraints=function(m,E,$){var f=parseFloat(mxUtils$1.getValue(m,"jettyWidth",kt.prototype.jettyWidth))/2,v=parseFloat(mxUtils$1.getValue(m,"jettyHeight",kt.prototype.jettyHeight)),b=[new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,f),new mxConnectionConstraint$1(new mxPoint$1(.25,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,0),!0),new mxConnectionConstraint$1(new mxPoint$1(1,0),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(0,1),!1,null,f),new mxConnectionConstraint$1(new mxPoint$1(.25,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,1),!0),new mxConnectionConstraint$1(new mxPoint$1(1,1),!0),new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,Math.min($-.5*v,1.5*v)),new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,Math.min($-.5*v,3.5*v))];return $>5*v&&b.push(new mxConnectionConstraint$1(new mxPoint$1(0,.75),!1,null,f)),$>8*v&&b.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1,null,f)),$>15*v&&b.push(new mxConnectionConstraint$1(new mxPoint$1(0,.25),!1,null,f)),b},at.prototype.constraints=mxRectangleShape$1.prototype.constraints,ot.prototype.constraints=mxRectangleShape$1.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.15,.05),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.85,.05),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.3),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.7),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.3),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.7),!0),new mxConnectionConstraint$1(new mxPoint$1(.15,.95),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.85,.95),!1)],bt.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.25,.1),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1),new mxConnectionConstraint$1(new mxPoint$1(.75,.1),!1),new mxConnectionConstraint$1(new mxPoint$1(0,1/3),!1),new mxConnectionConstraint$1(new mxPoint$1(0,1),!1),new mxConnectionConstraint$1(new mxPoint$1(1,1/3),!1),new mxConnectionConstraint$1(new mxPoint$1(1,1),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,.5),!1)],Xt.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.25,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,0),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.3),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.7),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(.25,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.25,.2),!1),new mxConnectionConstraint$1(new mxPoint$1(.1,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,.25),!1),new mxConnectionConstraint$1(new mxPoint$1(.9,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(.25,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,1),!0)],T.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,0),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,.25),!1),new mxConnectionConstraint$1(new mxPoint$1(1,0),!1),new mxConnectionConstraint$1(new mxPoint$1(.25,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.75,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(0,1),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,.75),!1),new mxConnectionConstraint$1(new mxPoint$1(1,1),!1)],N.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,.35),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.65),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.35),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.65),!1),new mxConnectionConstraint$1(new mxPoint$1(.25,1),!1),new mxConnectionConstraint$1(new mxPoint$1(.75,0),!1)],ft.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.25,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.25,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,1),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.25,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.75,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)],zt.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.375,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.625,0),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(.375,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,1),!0),new mxConnectionConstraint$1(new mxPoint$1(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.25,.25),!1),new mxConnectionConstraint$1(new mxPoint$1(.4,.1),!1),new mxConnectionConstraint$1(new mxPoint$1(.16,.55),!1),new mxConnectionConstraint$1(new mxPoint$1(.07,.4),!1),new mxConnectionConstraint$1(new mxPoint$1(.31,.8),!1),new mxConnectionConstraint$1(new mxPoint$1(.13,.77),!1),new mxConnectionConstraint$1(new mxPoint$1(.8,.8),!1),new mxConnectionConstraint$1(new mxPoint$1(.55,.95),!1),new mxConnectionConstraint$1(new mxPoint$1(.875,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.96,.7),!1),new mxConnectionConstraint$1(new mxPoint$1(.625,.2),!1),new mxConnectionConstraint$1(new mxPoint$1(.88,.25),!1)],K.prototype.constraints=mxRectangleShape$1.prototype.constraints,Q.prototype.constraints=mxRectangleShape$1.prototype.constraints,H.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.25,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.5,0),!0),new mxConnectionConstraint$1(new mxPoint$1(.75,0),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.25),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!0),new mxConnectionConstraint$1(new mxPoint$1(1,.75),!0)],mxArrow.prototype.constraints=null,I.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min(E,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),b=Math.max(0,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,b*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E*.75+v*.25,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,($+b)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-v)*.5,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-v)*.5,($+b)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-v)*.5,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E*.25-v*.25,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,b*.5)),f},se.prototype.getConstraints=function(m,E,$){var f=[],v=Math.max(0,Math.min(E,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),b=Math.max(0,Math.min($,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,b*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+v)*.5,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,b)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,($+b)*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,v*.5,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,1),!1)),f},S.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,0),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(0,1),!1),new mxConnectionConstraint$1(new mxPoint$1(.25,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.5,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.75,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,0),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,1),!1)],L.prototype.getConstraints=function(m,E,$){var f=[],v=$*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",this.arrowWidth)))),b=E*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",this.arrowSize)))),y=($-v)/2;return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-b)*.5,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-b,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-b,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E-b)*.5,$-y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,$-y)),f},D.prototype.getConstraints=function(m,E,$){var f=[],v=$*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",L.prototype.arrowWidth)))),b=E*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",L.prototype.arrowSize)))),y=($-v)/2;return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,b,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E*.5,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-b,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E-b,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E*.5,$-y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,b,$)),f},Qt.prototype.getConstraints=function(m,E,$){var f=[],v=Math.min($,E),b=Math.max(0,Math.min(v,v*parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),y=($-b)/2,G=y+b,M=(E-b)/2,rt=M+b;return f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M,y*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,0),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,rt,0)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,rt,y*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,rt,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M,$-y*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(.5,1),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,rt,$)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,rt,$-y*.5)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,rt,G)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+rt)*.5,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,E,G)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,(E+rt)*.5,G)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M,G)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M*.5,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,y)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,0,G)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M*.5,G)),f.push(new mxConnectionConstraint$1(new mxPoint$1(0,0),!1,null,M,y)),f},Pt.prototype.constraints=null,V.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,.25),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(0,.75),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.7,.1),!1),new mxConnectionConstraint$1(new mxPoint$1(.7,.9),!1)],j.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(.175,.25),!1),new mxConnectionConstraint$1(new mxPoint$1(.25,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.175,.75),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(.7,.1),!1),new mxConnectionConstraint$1(new mxPoint$1(.7,.9),!1)],Nt.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)],Bt.prototype.constraints=[new mxConnectionConstraint$1(new mxPoint$1(0,.5),!1),new mxConnectionConstraint$1(new mxPoint$1(1,.5),!1)]})();function Actions(t){this.editorUi=t,this.actions=new Object,this.init()}Actions.prototype.init=function(){var t=this.editorUi,e=t.editor,i=e.graph,n=function(){return Action.prototype.isEnabled.apply(this,arguments)&&i.isEnabled()};this.addAction("new...",function(){i.openLink(t.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",t.openFile()}),this.put("smartFit",new Action(mxResources$1.get("fitWindow")+" / "+mxResources$1.get("resetView"),function(){i.popupMenuHandler.hideMenu();var d=i.view.scale,p=i.container.scrollLeft,c=i.container.scrollTop,g=i.view.translate.x,x=i.view.translate.y,C=5;t.actions.get("resetView").funct(),Math.abs(d-i.view.scale)<1e-5&&Math.abs(p-i.container.scrollLeft)<C&&Math.abs(c-i.container.scrollTop)<C&&g==i.view.translate.x&&x==i.view.translate.y&&t.actions.get("fitWindow").funct()},null,null,"Enter")),this.addAction("keyPressEnter",function(){i.isSelectionEmpty()?t.actions.get("smartFit").funct():i.isEnabled()&&i.startEditingAtCell()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils$1.bind(this,function(){t.hideDialog()})),window.openFile.setConsumer(mxUtils$1.bind(this,function(d,p){try{var c=mxUtils$1.parseXml(d);e.graph.setSelectionCells(e.graph.importGraphModel(c.documentElement))}catch(g){mxUtils$1.alert(mxResources$1.get("invalidOrMissingFile")+": "+g.message)}})),t.showDialog(new OpenDialog(this).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=n,this.addAction("save",function(){t.saveFile(!1)},null,null,Editor$2.ctrlKey+"+S").isEnabled=n,this.addAction("saveAs...",function(){t.saveFile(!0)},null,null,Editor$2.ctrlKey+"+Shift+S"),this.addAction("export...",function(){t.showDialog(new ExportDialog(t).container,300,340,!0,!0)}),this.addAction("editDiagram...",function(){var d=new EditDiagramDialog(t);t.showDialog(d.container,620,420,!0,!1),d.init()}).isEnabled=n,this.addAction("pageSetup...",function(){t.showDialog(new PageSetupDialog(t).container,320,240,!0,!0)}).isEnabled=n,this.addAction("print...",function(){t.showPrintDialog()},null,"sprite-print",Editor$2.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils$1.show(i,null,10,10)}),this.addAction("undo",function(){t.undo()},null,"sprite-undo",Editor$2.ctrlKey+"+Z"),this.addAction("redo",function(){t.redo()},null,"sprite-redo",mxClient$1.IS_WIN?Editor$2.ctrlKey+"+Y":Editor$2.ctrlKey+"+Shift+Z"),this.addAction("cut",function(){var d=null;try{d=t.copyXml(),d!=null&&i.removeCells(d,!1)}catch{}try{d==null&&mxClipboard.cut(i)}catch(p){t.handleError(p)}},null,"sprite-cut",Editor$2.ctrlKey+"+X"),this.addAction("copy",function(){try{t.copyXml()}catch{}try{mxClipboard.copy(i)}catch(d){t.handleError(d)}},null,"sprite-copy",Editor$2.ctrlKey+"+C"),this.addAction("paste",function(){if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())){var d=!1;try{Editor$2.enableNativeCipboard&&(t.readGraphModelFromClipboard(function(p){if(p!=null){i.getModel().beginUpdate();try{t.pasteXml(p,!0)}finally{i.getModel().endUpdate()}}else mxClipboard.paste(i)}),d=!0)}catch{}d||mxClipboard.paste(i)}},!1,"sprite-paste",Editor$2.ctrlKey+"+V"),this.addAction("pasteHere",function(d){function p(x){if(x!=null){for(var C=!0,T=0;T<x.length&&C;T++)C=C&&i.model.isEdge(x[T]);var A=i.view.translate,R=i.view.scale,_=A.x,N=A.y,H=null;if(x.length==1&&C){var k=i.getCellGeometry(x[0]);k!=null&&(H=k.getTerminalPoint(!0))}if(H=H??i.getBoundingBoxFromGeometry(x,C),H!=null){var K=Math.round(i.snap(i.popupMenuHandler.triggerX/R-_)),Q=Math.round(i.snap(i.popupMenuHandler.triggerY/R-N));i.cellsMoved(x,K-H.x,Q-H.y)}}}function c(){i.getModel().beginUpdate();try{p(mxClipboard.paste(i))}finally{i.getModel().endUpdate()}}if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())){var g=!1;try{Editor$2.enableNativeCipboard&&(t.readGraphModelFromClipboard(function(x){if(x!=null){i.getModel().beginUpdate();try{p(t.pasteXml(x,!0))}finally{i.getModel().endUpdate()}}else c()}),g=!0)}catch{}g||c()}}),this.addAction("swap",function(){var d=i.getSelectionCells();d.length==2&&i.swapShapes(d[0],d[1])}),this.addAction("copySize",function(){var d=i.getSelectionCell();if(i.isEnabled()&&d!=null&&i.getModel().isVertex(d)){var p=i.getCellGeometry(d);p!=null&&(t.copiedSize=new mxRectangle$1(p.x,p.y,p.width,p.height))}},null,null,"Alt+Shift+F"),this.addAction("pasteSize",function(){if(i.isEnabled()&&!i.isSelectionEmpty()&&t.copiedSize!=null){i.getModel().beginUpdate();try{for(var d=i.getResizableCells(i.getSelectionCells()),p=0;p<d.length;p++)if(i.getModel().isVertex(d[p])){var c=i.getCellGeometry(d[p]);c!=null&&(c=c.clone(),c.width=t.copiedSize.width,c.height=t.copiedSize.height,i.getModel().setGeometry(d[p],c))}}finally{i.getModel().endUpdate()}}},null,null,"Alt+Shift+V"),this.addAction("copyData",function(){var d=i.getSelectionCell()||i.getModel().getRoot();if(i.isEnabled()&&d!=null){var p=d.cloneValue();p!=null&&!isNaN(p.nodeType)&&(t.copiedValue=p)}},null,null,"Alt+Shift+B"),this.addAction("copyAsText",function(){var d=i.getSelectionCell();if(i.isEnabled()&&d!=null)try{i.isHtmlLabel(d)?t.writeHtmlToClipboard(i.getLabel(d),mxUtils$1.bind(this,function(p){t.handleError(p)})):t.writeTextToClipboard(i.getLabel(d),mxUtils$1.bind(this,function(p){t.handleError(p)}))}catch(p){t.handleError(p)}}),this.addAction("pasteData",function(c,p){var c=p??c,g=i.getModel();function x(A,R){var _=g.getValue(A);R=A.cloneValue(R),R.removeAttribute("placeholders"),_!=null&&!isNaN(_.nodeType)&&R.setAttribute("placeholders",_.getAttribute("placeholders")),(c==null||!mxEvent$1.isShiftDown(c))&&R.setAttribute("label",i.convertValueToString(A)),g.setValue(A,R)}if(i.isEnabled()&&!i.isSelectionEmpty()&&t.copiedValue!=null){g.beginUpdate();try{var C=i.getEditableCells(i.getSelectionCells());if(C.length==0)x(g.getRoot(),t.copiedValue);else for(var T=0;T<C.length;T++)x(C[T],t.copiedValue)}finally{g.endUpdate()}}},null,null,"Alt+Shift+E");function r(d){i.escape();var p=i.deleteCells(i.getDeletableCells(i.getSelectionCells()),d);p!=null&&i.setSelectionCells(p)}function l(){if(!i.isSelectionEmpty()){i.getModel().beginUpdate();try{for(var d=i.getSelectionCells(),p=0;p<d.length;p++)i.cellLabelChanged(d[p],"")}finally{i.getModel().endUpdate()}}}this.addAction("delete",function(c,p){var c=p??c;c!=null&&mxEvent$1.isShiftDown(c)?l():r(c!=null&&(mxEvent$1.isControlDown(c)||mxEvent$1.isMetaDown(c)||mxEvent$1.isAltDown(c)))},null,null,"Delete"),this.addAction("deleteAll",function(){r(!0)}),this.addAction("deleteLabels",function(){l()},null,null,Editor$2.ctrlKey+"+Delete"),this.addAction("duplicate",function(){try{i.setSelectionCells(i.duplicateCells()),i.scrollCellToVisible(i.getSelectionCell())}catch(d){t.handleError(d)}},null,null,Editor$2.ctrlKey+"+D"),this.put("mergeCells",new Action(mxResources$1.get("merge"),function(){var d=t.getSelectionState();if(d.mergeCell!=null){i.getModel().beginUpdate();try{i.setCellStyles("rowspan",d.rowspan,[d.mergeCell]),i.setCellStyles("colspan",d.colspan,[d.mergeCell])}finally{i.getModel().endUpdate()}}})),this.put("unmergeCells",new Action(mxResources$1.get("unmerge"),function(){var d=t.getSelectionState();if(d.cells.length>0){i.getModel().beginUpdate();try{i.setCellStyles("rowspan",null,d.cells),i.setCellStyles("colspan",null,d.cells)}finally{i.getModel().endUpdate()}}})),this.put("turn",new Action(mxResources$1.get("turn")+" / "+mxResources$1.get("reverse"),function(c,p){var c=p??c;i.turnShapes(i.getResizableCells(i.getSelectionCells()),c!=null?mxEvent$1.isShiftDown(c):!1)},null,null,mxClient$1.IS_SF?null:Editor$2.ctrlKey+"+R")),this.put("selectConnections",new Action(mxResources$1.get("selectEdges"),function(d){var p=i.getSelectionCell();i.isEnabled()&&p!=null&&i.addSelectionCells(i.getEdges(p))})),this.addAction("selectVertices",function(){i.selectVertices(null,!0)},null,null,Editor$2.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){i.selectEdges()},null,null,Editor$2.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){i.selectAll(null,!0)},null,null,Editor$2.ctrlKey+"+A"),this.addAction("selectNone",function(){i.clearSelection()},null,null,Editor$2.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!i.isSelectionEmpty()){i.getModel().beginUpdate();try{var d=i.getSelectionCells(),p=i.getCurrentCellStyle(i.getSelectionCell()),c=mxUtils$1.getValue(p,mxConstants$1.STYLE_EDITABLE,1)==1?0:1;i.setCellStyles(mxConstants$1.STYLE_MOVABLE,c,d),i.setCellStyles(mxConstants$1.STYLE_RESIZABLE,c,d),i.setCellStyles(mxConstants$1.STYLE_ROTATABLE,c,d),i.setCellStyles(mxConstants$1.STYLE_DELETABLE,c,d),i.setCellStyles(mxConstants$1.STYLE_EDITABLE,c,d),i.setCellStyles("locked",c==1?0:1,d),i.setCellStyles("connectable",c,d)}finally{i.getModel().endUpdate()}}},null,null,Editor$2.ctrlKey+"+L"),this.addAction("explore",function(){i.model.isVertex(i.getSelectionCell())&&Graph.exploreFromCell(t.editor.graph,t.editor.graph.getSelectionCell())}),this.addAction("home",function(){i.home()},null,null,"Shift+Home"),this.addAction("exitGroup",function(){i.exitGroup()},null,null,Editor$2.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){i.enterGroup()},null,null,Editor$2.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){i.foldCells(!0)},null,null,Editor$2.ctrlKey+"+Home"),this.addAction("expand",function(){i.foldCells(!1)},null,null,Editor$2.ctrlKey+"+End"),this.addAction("toFront",function(){i.orderCells(!1)},null,null,Editor$2.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){i.orderCells(!0)},null,null,Editor$2.ctrlKey+"+Shift+B"),this.addAction("bringForward",function(d){i.orderCells(!1,null,!0)},null,null,Editor$2.ctrlKey+"+Alt+Shift+F"),this.addAction("sendBackward",function(d){i.orderCells(!0,null,!0)},null,null,Editor$2.ctrlKey+"+Alt+Shift+B"),this.addAction("group",function(){if(i.isEnabled()){var d=mxUtils$1.sortCells(i.getSelectionCells(),!0);d.length==1&&!i.isTable(d[0])&&!i.isTableRow(d[0])?i.setCellStyles("container","1"):(d=i.getCellsForGroup(d),d.length>1&&i.setSelectionCell(i.groupCells(null,0,d)))}},null,null,Editor$2.ctrlKey+"+G"),this.addAction("ungroup",function(){if(i.isEnabled()){var d=i.getEditableCells(i.getSelectionCells());i.model.beginUpdate();try{var p=i.ungroupCells();if(d!=null)for(var c=0;c<d.length;c++)i.model.contains(d[c])&&(i.model.getChildCount(d[c])==0&&i.model.isVertex(d[c])&&i.setCellStyles("container","0",[d[c]]),p.push(d[c]))}finally{i.model.endUpdate()}p.length>0&&i.setSelectionCells(p)}},null,null,Editor$2.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){if(i.isEnabled()){var d=i.getSelectionCells();if(d!=null){for(var p=[],c=0;c<d.length;c++)!i.isTableRow(d[c])&&!i.isTableCell(d[c])&&p.push(d[c]);i.removeCellsFromParent(p),p.length>0&&i.scrollCellToVisible(p[0])}}}),this.addAction("edit",function(){i.isEnabled()&&i.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var d=i.getSelectionCell()||i.getModel().getRoot();t.showDataDialog(d)},null,null,Editor$2.ctrlKey+"+M"),this.addAction("editTooltip...",function(){var d=i.getSelectionCell();if(i.isEnabled()&&d!=null&&i.isCellEditable(d)){var p="";if(mxUtils$1.isNode(d.value)){var c=null;Graph.translateDiagram&&Graph.diagramLanguage!=null&&d.value.hasAttribute("tooltip_"+Graph.diagramLanguage)&&(c=d.value.getAttribute("tooltip_"+Graph.diagramLanguage)),c==null&&(c=d.value.getAttribute("tooltip")),c!=null&&(p=c)}var g=new TextareaDialog(t,mxResources$1.get("editTooltip")+":",p,function(x){i.setTooltipForCell(d,x)});t.showDialog(g.container,320,200,!0,!0),g.init()}},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var d=i.getLinkForCell(i.getSelectionCell());d!=null&&i.openLink(d)}),this.addAction("editLink...",function(){var d=i.getSelectionCell();if(i.isEnabled()&&d!=null&&i.isCellEditable(d)){var p=i.getLinkForCell(d,!0)||"";t.showLinkDialog(p,mxResources$1.get("ok"),function(c,g,x){i.getModel().beginUpdate();try{i.setLinkForCell(d,c.length>0?c:null),i.setAttributeForCell(d,"linkTarget",x)}finally{i.getModel().endUpdate()}},!0,i.getLinkTargetForCell(d))}},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources$1.get("image")+"...",function(){i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())&&(i.clearSelection(),t.actions.get("image").funct())})).isEnabled=n,this.addAction("editImage...",function(){t.actions.get("image").funct()}),this.put("insertLink",new Action(mxResources$1.get("link")+"...",function(){i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())&&t.showLinkDialog("",mxResources$1.get("ok"),function(d,p,c){if(d=mxUtils$1.trim(d),d.length>0){var g=null,x=i.getLinkTitle(d);p!=null&&p.length>0&&(g=p[0].iconUrl,x=p[0].name||p[0].type,x=x.charAt(0).toUpperCase()+x.substring(1),x.length>30&&(x=x.substring(0,30)+"..."));var C=new mxCell$2(x,new mxGeometry$2(0,0,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(g!=null?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+g:"spacing=10;"));C.vertex=!0;var T=i.getCenterInsertPoint(i.getBoundingBoxFromGeometry([C],!0));C.geometry.x=T.x,C.geometry.y=T.y,i.setAttributeForCell(C,"linkTarget",c),i.setLinkForCell(C,d),i.cellSizeUpdated(C,!0),i.getModel().beginUpdate();try{C=i.addCell(C),i.fireEvent(new mxEventObject$1("cellsInserted","cells",[C]))}finally{i.getModel().endUpdate()}i.setSelectionCell(C),i.scrollCellToVisible(i.getSelectionCell())}},!0)},null,null,"L")).isEnabled=n,this.addAction("link...",mxUtils$1.bind(this,function(){if(i.isEnabled())if(i.cellEditor.isContentEditing()){var d=i.getSelectedElement(),p=i.getParentByName(d,"A",i.cellEditor.textarea),c="";if(p==null&&d!=null&&d.getElementsByTagName!=null)for(var g=d.getElementsByTagName("a"),x=0;x<g.length&&p==null;x++)g[x].textContent==d.textContent&&(p=g[x]);p!=null&&p.nodeName=="A"&&(c=p.getAttribute("href")||"",i.selectNode(p));var C=i.cellEditor.saveSelection();t.showLinkDialog(c,mxResources$1.get("ok"),mxUtils$1.bind(this,function(T){i.cellEditor.restoreSelection(C),T!=null&&i.insertLink(T)}))}else i.isSelectionEmpty()?this.get("insertLink").funct():this.get("editLink").funct()})).isEnabled=n,this.addAction("autosize",function(){var d=i.getSelectionCells();if(d!=null){i.getModel().beginUpdate();try{for(var p=0;p<d.length;p++){var c=d[p];i.getModel().isVertex(c)&&(i.getModel().getChildCount(c)>0?i.updateGroupBounds([c],0,!0):i.updateCellSize(c))}}finally{i.getModel().endUpdate()}}},null,null,Editor$2.ctrlKey+"+Shift+Y"),this.addAction("snapToGrid",function(){i.snapCellsToGrid(i.getSelectionCells(),i.gridSize)}),this.addAction("formattedText",function(){i.stopEditing();var d=i.getCommonStyle(i.getSelectionCells()),p=mxUtils$1.getValue(d,"html","0")=="1"?null:"1";i.getModel().beginUpdate();try{for(var c=i.getEditableCells(i.getSelectionCells()),g=0;g<c.length;g++)if(state=i.getView().getState(c[g]),state!=null){var x=mxUtils$1.getValue(state.style,"html","0");if(x=="1"&&p==null)i.removeTextStyleForCell(state.cell),i.setCellStyles("html",p,[c[g]]);else if(x=="0"&&p=="1"){var C=mxUtils$1.htmlEntities(i.convertValueToString(state.cell),!1);mxUtils$1.getValue(state.style,"nl2Br","1")!="0"&&(C=C.replace(/\n/g,"<br/>")),i.cellLabelChanged(state.cell,Graph.sanitizeHtml(C)),i.setCellStyles("html",p,[c[g]])}}t.fireEvent(new mxEventObject$1("styleChanged","keys",["html"],"values",[p??"0"],"cells",c))}finally{i.getModel().endUpdate()}}),this.addAction("wordWrap",function(){var d=i.getView().getState(i.getSelectionCell()),p="wrap";i.stopEditing(),d!=null&&d.style[mxConstants$1.STYLE_WHITE_SPACE]=="wrap"&&(p=null),i.setCellStyles(mxConstants$1.STYLE_WHITE_SPACE,p)}),this.addAction("rotation",function(){var d="0",p=i.getView().getState(i.getSelectionCell());p!=null&&(d=p.style[mxConstants$1.STYLE_ROTATION]||d);var c=new FilenameDialog(t,d,mxResources$1.get("apply"),function(g){g!=null&&g.length>0&&i.setCellStyles(mxConstants$1.STYLE_ROTATION,g)},mxResources$1.get("enterValue")+" ("+mxResources$1.get("rotation")+" 0-360)");t.showDialog(c.container,375,80,!0,!0),c.init()}),this.addAction("resetView",function(){i.zoomTo(1),t.resetScrollbars()},null,null,"Enter/Home"),this.addAction("zoomIn",function(d){i.isFastZoomEnabled()?i.lazyZoom(!0,!0,t.buttonZoomDelay):i.zoomIn()},null,null,Editor$2.ctrlKey+" + / Alt+Mousewheel"),this.addAction("zoomOut",function(d){i.isFastZoomEnabled()?i.lazyZoom(!1,!0,t.buttonZoomDelay):i.zoomOut()},null,null,Editor$2.ctrlKey+" - / Alt+Mousewheel"),this.addAction("fitWindow",function(){i.pageVisible&&i.isSelectionEmpty()?i.fitPages():t.fitDiagramToWindow()},null,null,Editor$2.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils$1.bind(this,function(){i.pageVisible?i.fitPages(1):this.get("pageView").funct()}),null,null,Editor$2.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils$1.bind(this,function(){i.pageVisible?i.fitPages(2):this.get("pageView").funct()}),null,null,Editor$2.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils$1.bind(this,function(){i.pageVisible?i.fitPages(1,!0):this.get("pageView").funct()})),this.put("customZoom",new Action(mxResources$1.get("custom")+"...",mxUtils$1.bind(this,function(){var d=new FilenameDialog(this.editorUi,parseInt(i.getView().getScale()*100),mxResources$1.get("apply"),mxUtils$1.bind(this,function(p){var c=parseInt(p);!isNaN(c)&&c>0&&i.zoomTo(c/100)}),mxResources$1.get("zoom")+" (%)");this.editorUi.showDialog(d.container,300,80,!0,!0),d.init()}),null,null,Editor$2.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils$1.bind(this,function(){var d=new FilenameDialog(this.editorUi,parseInt(i.pageScale*100),mxResources$1.get("apply"),mxUtils$1.bind(this,function(p){var c=parseInt(p);if(!isNaN(c)&&c>0){var g=new ChangePageSetup(t,null,null,null,c/100);g.ignoreColor=!0,g.ignoreImage=!0,i.model.execute(g)}}),mxResources$1.get("pageScale")+" (%)");this.editorUi.showDialog(d.container,300,80,!0,!0),d.init()}));var s=null;s=this.addAction("grid",function(){i.setGridEnabled(!i.isGridEnabled()),i.defaultGridEnabled=i.isGridEnabled(),t.fireEvent(new mxEventObject$1("gridEnabledChanged"))},null,null,Editor$2.ctrlKey+"+Shift+G"),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.isGridEnabled()}),s.setEnabled(!1),s=this.addAction("guides",function(){i.graphHandler.guidesEnabled=!i.graphHandler.guidesEnabled,t.fireEvent(new mxEventObject$1("guidesEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.graphHandler.guidesEnabled}),s.setEnabled(!1),s=this.addAction("animations",function(){Editor$2.enableAnimations=!Editor$2.enableAnimations,t.fireEvent(new mxEventObject$1("enableAnimationsChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return Editor$2.enableAnimations}),s=this.addAction("tooltips",function(){i.tooltipHandler.setEnabled(!i.tooltipHandler.isEnabled()),t.fireEvent(new mxEventObject$1("tooltipsEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.tooltipHandler.isEnabled()}),s=this.addAction("collapseExpand",function(){var d=new ChangePageSetup(t);d.ignoreColor=!0,d.ignoreImage=!0,d.foldingEnabled=!i.foldingEnabled,i.model.execute(d)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.foldingEnabled}),s.isEnabled=n,s=this.addAction("pageView",mxUtils$1.bind(this,function(){t.setPageVisible(!i.pageVisible)})),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.pageVisible}),s=this.addAction("connectionArrows",function(){i.connectionArrowsEnabled=!i.connectionArrowsEnabled,t.fireEvent(new mxEventObject$1("connectionArrowsChanged"))},null,null,"Alt+Shift+A"),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.connectionArrowsEnabled}),s=this.addAction("connectionPoints",function(){i.setConnectable(!i.connectionHandler.isEnabled()),t.fireEvent(new mxEventObject$1("connectionPointsChanged"))},null,null,"Alt+Shift+O"),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.connectionHandler.isEnabled()}),s=this.addAction("copyConnect",function(){i.connectionHandler.setCreateTarget(!i.connectionHandler.isCreateTarget()),t.fireEvent(new mxEventObject$1("copyConnectChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return i.connectionHandler.isCreateTarget()}),s.isEnabled=n,s=this.addAction("autosave",function(){t.editor.setAutosave(!t.editor.autosave)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.editor.autosave}),s.isEnabled=n,s.visible=!1,this.addAction("help",function(){var d="";mxResources$1.isLanguageSupported(mxClient$1.language)&&(d="_"+mxClient$1.language),i.openLink(RESOURCES_PATH+"/help"+d+".html")});var a=!1;this.put("about",new Action(mxResources$1.get("about")+" Graph Editor...",function(){a||(t.showDialog(new AboutDialog(t).container,320,280,!0,!0,function(){a=!1}),a=!0)}));var o=mxUtils$1.bind(this,function(d,p,c,g){return this.addAction(d,function(){if(c!=null&&i.cellEditor.isContentEditing())c();else{i.stopEditing(!1),i.getModel().beginUpdate();try{var x=i.getEditableCells(i.getSelectionCells());i.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,p,x),(p&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD?i.updateLabelElements(x,function(T){T.style.fontWeight=null,T.nodeName=="B"&&i.replaceElement(T)}):(p&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC?i.updateLabelElements(x,function(T){T.style.fontStyle=null,T.nodeName=="I"&&i.replaceElement(T)}):(p&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&i.updateLabelElements(x,function(T){T.style.textDecoration=null,T.nodeName=="U"&&i.replaceElement(T)});for(var C=0;C<x.length;C++)i.model.getChildCount(x[C])==0&&i.autoSizeCell(x[C],!1)}finally{i.getModel().endUpdate()}}},null,null,g)});o("bold",mxConstants$1.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor$2.ctrlKey+"+B"),o("italic",mxConstants$1.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor$2.ctrlKey+"+I"),o("underline",mxConstants$1.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor$2.ctrlKey+"+U"),this.addAction("fontColor...",function(){t.menus.pickColor(mxConstants$1.STYLE_FONTCOLOR,"forecolor","000000","default",i.shapeForegroundColor)}),this.addAction("strokeColor...",function(){t.menus.pickColor(mxConstants$1.STYLE_STROKECOLOR,null,null,"default",i.shapeForegroundColor)}),this.addAction("fillColor...",function(){t.menus.pickColor(mxConstants$1.STYLE_FILLCOLOR,null,null,"default",i.shapeBackgroundColor)}),this.addAction("gradientColor...",function(){t.menus.pickColor(mxConstants$1.STYLE_GRADIENTCOLOR,null,null,"default",i.shapeForegroundColor)}),this.addAction("backgroundColor...",function(){t.menus.pickColor(mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor",null,"default",i.shapeBackgroundColor)}),this.addAction("borderColor...",function(){t.menus.pickColor(mxConstants$1.STYLE_LABEL_BORDERCOLOR,null,null,"default",i.shapeForegroundColor)}),this.addAction("removeFormat",function(){if(i.isEnabled()&&!i.isSelectionEmpty()&&!i.isEditing()){i.getModel().beginUpdate();try{for(var d=i.getSelectionCells(),p=0;p<d.length;p++)i.removeTextStyleForCell(d[p],!0)}finally{i.getModel().endUpdate()}}}),this.addAction("vertical",function(){t.menus.toggleStyle(mxConstants$1.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){t.menus.toggleStyle(mxConstants$1.STYLE_SHADOW)}),this.addAction("solid",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants$1.STYLE_DASHED,null),i.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,null),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",[null,null],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("dashed",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants$1.STYLE_DASHED,"1"),i.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,null),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",["1",null],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("dotted",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants$1.STYLE_DASHED,"1"),i.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,"1 4"),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("sharp",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants$1.STYLE_ROUNDED,"0"),i.setCellStyles(mxConstants$1.STYLE_CURVED,"0"),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["0","0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("rounded",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants$1.STYLE_ROUNDED,"1"),i.setCellStyles(mxConstants$1.STYLE_CURVED,"0"),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["1","0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!i.isSelectionEmpty()&&i.isEnabled()){i.getModel().beginUpdate();try{var d=i.getSelectionCells(),p=i.getCurrentCellStyle(d[0]),c=mxUtils$1.getValue(p,mxConstants$1.STYLE_ROUNDED,"0")=="1"?"0":"1";i.setCellStyles(mxConstants$1.STYLE_ROUNDED,c),i.setCellStyles(mxConstants$1.STYLE_CURVED,null),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",[c,"0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}}),this.addAction("curved",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants$1.STYLE_ROUNDED,"0"),i.setCellStyles(mxConstants$1.STYLE_CURVED,"1"),t.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["0","1"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("collapsible",function(){var d=i.view.getState(i.getSelectionCell()),p="1";d!=null&&i.getFoldingImage(d)!=null&&(p="0"),i.setCellStyles("collapsible",p),t.fireEvent(new mxEventObject$1("styleChanged","keys",["collapsible"],"values",[p],"cells",i.getSelectionCells()))}),this.addAction("editStyle...",mxUtils$1.bind(this,function(){var d=i.getEditableCells(i.getSelectionCells());if(d!=null&&d.length>0){var p=i.getModel(),c=new TextareaDialog(this.editorUi,mxResources$1.get("editStyle")+":",p.getStyle(d[0])||"",function(g){g!=null&&i.setCellStyle(mxUtils$1.trim(g),d)},null,null,400,220);this.editorUi.showDialog(c.container,420,300,!0,!0),c.init()}}),null,null,Editor$2.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){i.isEnabled()&&!i.isSelectionEmpty()&&t.setDefaultStyle(i.getSelectionCell())},null,null,Editor$2.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){i.isEnabled()&&t.clearDefaultStyle()},null,null,Editor$2.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){var d=i.getSelectionCell();if(d!=null&&i.getModel().isEdge(d)){var p=e.graph.selectionCellsHandler.getHandler(d);if(p instanceof mxEdgeHandler$1){for(var c=i.view.translate,g=i.view.scale,x=c.x,C=c.y,T=i.getModel().getParent(d),A=i.getCellGeometry(T);i.getModel().isVertex(T)&&A!=null;)x+=A.x,C+=A.y,T=i.getModel().getParent(T),A=i.getCellGeometry(T);var R=Math.round(i.snap(i.popupMenuHandler.triggerX/g-x)),_=Math.round(i.snap(i.popupMenuHandler.triggerY/g-C));p.addPointAt(p.state,R,_)}}}),this.addAction("removeWaypoint",function(){var d=t.actions.get("removeWaypoint");d.handler!=null&&d.handler.removePoint(d.handler.state,d.index)}),this.addAction("clearAnchors",function(){var d=i.getSelectionCells();if(d!=null){d=i.getEditableCells(i.addAllEdges(d)),i.getModel().beginUpdate();try{for(var p=0;p<d.length;p++){var c=d[p];i.getModel().isEdge(c)&&(i.setCellStyles(mxConstants$1.STYLE_EXIT_X,null,[c]),i.setCellStyles(mxConstants$1.STYLE_EXIT_Y,null,[c]),i.setCellStyles(mxConstants$1.STYLE_ENTRY_X,null,[c]),i.setCellStyles(mxConstants$1.STYLE_ENTRY_Y,null,[c]))}}finally{i.getModel().endUpdate()}}}),this.addAction("clearWaypoints",function(){var d=i.getSelectionCells();if(d!=null){d=i.getEditableCells(i.addAllEdges(d)),i.getModel().beginUpdate();try{for(var p=0;p<d.length;p++){var c=d[p];if(i.getModel().isEdge(c)){var g=i.getCellGeometry(c);g!=null&&(g=g.clone(),g.points=null,g.x=0,g.y=0,g.offset=null,i.getModel().setGeometry(c,g))}}}finally{i.getModel().endUpdate()}}},null,null,"Alt+Shift+R"),s=this.addAction("subscript",mxUtils$1.bind(this,function(){i.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor$2.ctrlKey+"+,"),s=this.addAction("superscript",mxUtils$1.bind(this,function(){i.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor$2.ctrlKey+"+."),s=this.addAction("decreaseFontSize",mxUtils$1.bind(this,function(){if(!i.isSelectionEmpty()){var d=i.getCurrentCellStyle(i.getSelectionCell()),p=mxUtils$1.getValue(d,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE);i.setCellStyles(mxConstants$1.STYLE_FONTSIZE,Math.max(1,p-1),i.getSelectionCells())}}),null,null,Editor$2.ctrlKey+"+Shift + (Numpad)"),s=this.addAction("increaseFontSize",mxUtils$1.bind(this,function(){if(!i.isSelectionEmpty()){var d=i.getCurrentCellStyle(i.getSelectionCell()),p=mxUtils$1.getValue(d,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE);i.setCellStyles(mxConstants$1.STYLE_FONTSIZE,Math.min(100,p+1),i.getSelectionCells())}}),null,null,Editor$2.ctrlKey+"+Shift - (Numpad)");function u(d,p,c,g,x){x.getModel().beginUpdate();try{var C=x.getCellGeometry(d);if(C!=null&&c&&g){var T=c/g;C=C.clone(),T>1?C.height=C.width/T:C.width=C.height*T,x.getModel().setGeometry(d,C)}x.setCellStyles(mxConstants$1.STYLE_CLIP_PATH,p,[d]),x.setCellStyles(mxConstants$1.STYLE_ASPECT,"fixed",[d])}finally{x.getModel().endUpdate()}}this.addAction("image...",function(){if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())){var d=mxResources$1.get("image")+" ("+mxResources$1.get("url")+"):",p=i.getView().getState(i.getSelectionCell()),c="",g=null;p!=null&&(c=p.style[mxConstants$1.STYLE_IMAGE]||c,g=p.style[mxConstants$1.STYLE_CLIP_PATH]||g);var x=i.cellEditor.saveSelection();t.showImageDialog(d,c,function(C,T,A,R,_,N){if(i.cellEditor.isContentEditing())i.cellEditor.restoreSelection(x),i.insertImage(C,T,A);else{var H=i.getSelectionCells();if(C!=null&&(C.length>0||H.length>0)){var k=null;i.getModel().beginUpdate();try{if(H.length==0){H=[i.insertVertex(i.getDefaultParent(),null,"",0,0,T,A,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")];var K=i.getCenterInsertPoint(i.getBoundingBoxFromGeometry(H,!0));H[0].geometry.x=K.x,H[0].geometry.y=K.y,R!=null&&u(H[0],R,_,N,i),k=H,i.fireEvent(new mxEventObject$1("cellsInserted","cells",k))}i.setCellStyles(mxConstants$1.STYLE_IMAGE,C.length>0?C:null,H);var Q=i.getCurrentCellStyle(H[0]);if(Q[mxConstants$1.STYLE_SHAPE]!="image"&&Q[mxConstants$1.STYLE_SHAPE]!="label"?i.setCellStyles(mxConstants$1.STYLE_SHAPE,"image",H):C.length==0&&i.setCellStyles(mxConstants$1.STYLE_SHAPE,null,H),R==null&&i.setCellStyles(mxConstants$1.STYLE_CLIP_PATH,null,H),T!=null&&A!=null)for(var nt=0;nt<H.length;nt++){var dt=H[nt];if(i.getCurrentCellStyle(dt).expand!="0"){var mt=i.getModel().getGeometry(dt);mt!=null&&(mt=mt.clone(),mt.width=T,mt.height=A,i.getModel().setGeometry(dt,mt))}R!=null&&u(dt,R,_,N,i)}}finally{i.getModel().endUpdate()}k!=null&&(i.setSelectionCells(k),i.scrollCellToVisible(k[0]))}}},i.cellEditor.isContentEditing(),!i.cellEditor.isContentEditing(),!0,g)}}).isEnabled=n,this.addAction("crop...",function(){var d=i.getSelectionCell();if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())&&d!=null){var p=i.getCurrentCellStyle(d),c=p[mxConstants$1.STYLE_IMAGE],g=p[mxConstants$1.STYLE_SHAPE];if(!c||g!="image")return;var x=new CropImageDialog(t,c,p[mxConstants$1.STYLE_CLIP_PATH],function(C,T,A){u(d,C,T,A,i)});t.showDialog(x.container,300,390,!0,!0)}}).isEnabled=n,s=this.addAction("layers",mxUtils$1.bind(this,function(){this.layersWindow==null?(this.layersWindow=new LayersWindow(t,document.body.offsetWidth-280,120,212,200),this.layersWindow.window.addListener("show",mxUtils$1.bind(this,function(){t.fireEvent(new mxEventObject$1("layers"))})),this.layersWindow.window.addListener("hide",function(){t.fireEvent(new mxEventObject$1("layers"))}),this.layersWindow.window.setVisible(!0),t.fireEvent(new mxEventObject$1("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor$2.ctrlKey+"+Shift+L"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return this.layersWindow!=null&&this.layersWindow.window.isVisible()})),s=this.addAction("format",mxUtils$1.bind(this,function(){t.toggleFormatPanel()}),null,null,Editor$2.ctrlKey+"+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return t.isFormatPanelVisible()})),s=this.addAction("outline",mxUtils$1.bind(this,function(){this.outlineWindow==null?(this.outlineWindow=new OutlineWindow(t,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",mxUtils$1.bind(this,function(){t.fireEvent(new mxEventObject$1("outline"))})),this.outlineWindow.window.addListener("hide",function(){t.fireEvent(new mxEventObject$1("outline"))}),this.outlineWindow.window.setVisible(!0),t.fireEvent(new mxEventObject$1("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor$2.ctrlKey+"+Shift+O"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return this.outlineWindow!=null&&this.outlineWindow.window.isVisible()})),this.addAction("editConnectionPoints...",function(){var d=i.getSelectionCell();if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())&&d!=null&&d.geometry!=null){var p=new ConnectionPointsDialog(t,d);t.showDialog(p.container,350,450,!0,!1,function(){p.destroy()}),p.init()}},null,null,"Alt+Shift+Q").isEnabled=n};Actions.prototype.addAction=function(t,e,i,n,r){var l;return t.substring(t.length-3)=="..."?(t=t.substring(0,t.length-3),l=mxResources$1.get(t)+"..."):l=mxResources$1.get(t),this.put(t,new Action(l,e,i,n,r))};Actions.prototype.put=function(t,e){return this.actions[t]=e,e};Actions.prototype.get=function(t){return this.actions[t]};function Action(t,e,i,n,r){mxEventSource.call(this),this.label=t,this.funct=this.createFunction(e),this.enabled=i??!0,this.iconCls=n,this.shortcut=r,this.visible=!0}mxUtils$1.extend(Action,mxEventSource);Action.prototype.createFunction=function(t){return t};Action.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject$1("stateChanged")))};Action.prototype.isEnabled=function(){return this.enabled};Action.prototype.setToggleAction=function(t){this.toggleAction=t};Action.prototype.setSelectedCallback=function(t){this.selectedCallback=t};Action.prototype.isSelected=function(){return this.selectedCallback()};const EditorUi$2=function(t,e,i){mxEventSource.call(this),this.destroyFunctions=[],this.editor=t||new Editor$2,this.container=e||document.body;var n=this,r=this.editor.graph;r.lightbox=i;var l=r.getGraphBounds;if(r.getGraphBounds=function(){var B=l.apply(this,arguments),U=this.backgroundImage;if(U!=null&&U.width!=null&&U.height!=null){var lt=this.view.translate,tt=this.view.scale;B=mxRectangle$1.fromRectangle(B),B.add(new mxRectangle$1((lt.x+U.x)*tt,(lt.y+U.y)*tt,U.width*tt,U.height*tt))}return B},r.useCssTransforms&&(this.lazyZoomDelay=0),mxClient$1.IS_SVG?mxPopupMenu$1.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":new Image().src=mxPopupMenu$1.prototype.submenuImage,!mxClient$1.IS_SVG&&mxConnectionHandler.prototype.connectImage!=null&&(new Image().src=mxConnectionHandler.prototype.connectImage.src),this.selectionStateListener=mxUtils$1.bind(this,function(B,U){this.clearSelectionState()}),r.getSelectionModel().addListener(mxEvent$1.CHANGE,this.selectionStateListener),r.getModel().addListener(mxEvent$1.CHANGE,this.selectionStateListener),r.addListener(mxEvent$1.EDITING_STARTED,this.selectionStateListener),r.addListener(mxEvent$1.EDITING_STOPPED,this.selectionStateListener),r.getView().addListener("unitChanged",this.selectionStateListener),this.editor.chromeless&&!this.editor.editable){this.footerHeight=0,r.isEnabled=function(){return!1},r.panningHandler.isForcePanningEvent=function(B){for(var U=B.getSource();U!=null&&U!=r.container;){if(U.nodeName==="foreignObject"||U.nodeName==="text")return!1;U=U.parentNode}return!mxEvent$1.isPopupTrigger(B.getEvent())};var s=r.panningHandler.start;r.panningHandler.start=function(){s.apply(this,arguments),mxUtils$1.clearSelection()}}if(this.actions=new Actions(this),this.menus=this.createMenus(),this.sidebar=new Sidebar(this),!r.standalone){var a=!1,o=!1;this.setDefaultStyle=function(B){try{r.getModel().isEdge(B)?(r.pasteEdgeStyle=!1,o=!1):a=!1;var U=r.getCellStyle(B,!1),lt=[],tt=[];for(var st in U)lt.push(U[st]),tt.push(st);r.getModel().isEdge(B)?r.currentEdgeStyle={}:r.currentVertexStyle={},this.fireEvent(new mxEventObject$1("styleChanged","keys",tt,"values",lt,"cells",[B],"force",!0)),r.getModel().isEdge(B)?(r.pasteEdgeStyle=!0,o=!0):a=!0}catch(ft){this.handleError(ft)}},this.clearDefaultStyle=function(){r.currentEdgeStyle=mxUtils$1.clone(r.defaultEdgeStyle),r.currentVertexStyle=mxUtils$1.clone(r.defaultVertexStyle),r.pasteEdgeStyle=!1,o=!1,a=!1,this.fireEvent(new mxEventObject$1("styleChanged","keys",[],"values",[],"cells",[]))},r.addListener("cellsInserted",function(B,U){r.pasteCellStyles(r.includeDescendants(U.getProperty("cells")))}),r.addListener("textInserted",function(B,U){r.pasteCellStyles(U.getProperty("cells"))}),this.createDivs(),this.createUi(),this.refresh();var u=mxUtils$1.bind(this,function(B){return B==null&&(B=window.event),r.isEditing()||B!=null&&this.isSelectionAllowed(B)});if(this.container==document.body&&(!this.editor.chromeless||this.editor.editable)&&(this.diagramContainer.onselectstart=u,this.diagramContainer.onmousedown=u,this.tabContainer!=null&&(this.tabContainer.onselectstart=u),mxClient$1.IS_IOS)){let B=function(){var U=null;if(/iP(hone|od|ad)/.test(navigator.platform)){var lt=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);try{U=[parseInt(lt[1],10),parseInt(lt[2],10),parseInt(lt[3]||0,10)]}catch{}}return U};var Y=B,d=B();d!=null&&d[0]>=16&&(mxUtils$1.setPrefixedStyle(this.menubarContainer.style,"userSelect","none"),mxUtils$1.setPrefixedStyle(this.diagramContainer.style,"userSelect","none"),mxUtils$1.setPrefixedStyle(this.sidebarContainer.style,"userSelect","none"),mxUtils$1.setPrefixedStyle(this.formatContainer.style,"userSelect","none"),mxUtils$1.setPrefixedStyle(this.footerContainer.style,"userSelect","none"),this.tabContainer!=null&&mxUtils$1.setPrefixedStyle(this.tabContainer.style,"userSelect","none"))}if(!this.editor.chromeless||this.editor.editable){var p=function(B){if(B!=null){var U=mxEvent$1.getSource(B);if(U.nodeName=="A")for(;U!=null;){if(U.className=="geHint")return!0;U=U.parentNode}}return u(B)};mxClient$1.IS_IE&&(typeof document.documentMode>"u"||document.documentMode<9)?mxEvent$1.addListener(this.diagramContainer,"contextmenu",p):this.diagramContainer.oncontextmenu=p}else r.panningHandler.usePopupTrigger=!1;if(r.init(this.diagramContainer),mxClient$1.IS_SVG&&r.view.getDrawPane()!=null){var c=r.view.getDrawPane().ownerSVGElement;c!=null&&(c.style.position="absolute")}if(this.hoverIcons=this.createHoverIcons(),r.graphHandler!=null){var g=r.graphHandler.start;r.graphHandler.start=function(){n.hoverIcons!=null&&n.hoverIcons.reset(),g.apply(this,arguments)}}mxEvent$1.addListener(this.diagramContainer,"mousemove",mxUtils$1.bind(this,function(B){var U=mxUtils$1.getOffset(this.diagramContainer);mxEvent$1.getClientX(B)-U.x-this.diagramContainer.clientWidth>0||mxEvent$1.getClientY(B)-U.y-this.diagramContainer.clientHeight>0?this.diagramContainer.setAttribute("title",mxResources$1.get("panTooltip")):this.diagramContainer.removeAttribute("title")}));var x=this.hoverIcons.isResetEvent;this.hoverIcons.isResetEvent=function(B,U){return n.isSpaceDown()||x.apply(this,arguments)},this.keydownHandler=mxUtils$1.bind(this,function(B){B.which==16?this.shiftDown=!0:B.which==32&&!r.isEditing()?(this.spaceDown=!0,this.hoverIcons.reset(),r.container.style.cursor="move",!r.isEditing()&&mxEvent$1.getSource(B)==r.container&&mxEvent$1.consume(B)):!mxEvent$1.isConsumed(B)&&B.keyCode==27&&this.hideDialog(null,!0)}),mxEvent$1.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils$1.bind(this,function(B){r.container.style.cursor="",this.spaceDown=!1,this.shiftDown=!1}),mxEvent$1.addListener(document,"keyup",this.keyupHandler);var C=r.panningHandler.isForcePanningEvent;r.panningHandler.isForcePanningEvent=function(B){return C.apply(this,arguments)||n.isSpaceDown()||mxEvent$1.isMouseEvent(B.getEvent())&&(this.usePopupTrigger||!mxEvent$1.isPopupTrigger(B.getEvent()))&&(!mxEvent$1.isControlDown(B.getEvent())&&mxEvent$1.isRightMouseButton(B.getEvent())||mxEvent$1.isMiddleMouseButton(B.getEvent()))};var T=r.cellEditor.isStopEditingEvent;r.cellEditor.isStopEditingEvent=function(B){return T.apply(this,arguments)||B.keyCode==13&&(!mxClient$1.IS_SF&&mxEvent$1.isControlDown(B)||mxClient$1.IS_MAC&&mxEvent$1.isMetaDown(B)||mxClient$1.IS_SF&&mxEvent$1.isShiftDown(B))};var A=r.isZoomWheelEvent;r.isZoomWheelEvent=function(){return n.isSpaceDown()||A.apply(this,arguments)};var R=!1,_=null,N=null,H=null,k=mxUtils$1.bind(this,function(){if(this.toolbar!=null&&R!=r.cellEditor.isContentEditing()){for(var B=this.toolbar.container.firstChild,U=[];B!=null;){var lt=B.nextSibling;mxUtils$1.indexOf(this.toolbar.staticElements,B)<0&&(B.parentNode.removeChild(B),U.push(B)),B=lt}var tt=this.toolbar.fontMenu,st=this.toolbar.sizeMenu;if(H==null)this.toolbar.createTextToolbar();else{for(var ft=0;ft<H.length;ft++)this.toolbar.container.appendChild(H[ft]);this.toolbar.fontMenu=_,this.toolbar.sizeMenu=N}R=r.cellEditor.isContentEditing(),_=tt,N=st,H=U}}),K=r.cellEditor.startEditing;r.cellEditor.startEditing=function(){if(K.apply(this,arguments),k(),r.cellEditor.isContentEditing()){var B=!1,U=function(){B||(B=!0,window.setTimeout(function(){var lt=r.getSelectedEditingElement();if(lt!=null){var tt=mxUtils$1.getCurrentStyle(lt);tt!=null&&n.toolbar!=null&&(n.toolbar.setFontName(mxUtils$1.getCssFontFamily(tt.fontFamily)),n.toolbar.setFontSize(parseInt(tt.fontSize)))}B=!1},0))};mxEvent$1.addListener(r.cellEditor.textarea,"input",U),mxEvent$1.addListener(r.cellEditor.textarea,"touchend",U),mxEvent$1.addListener(r.cellEditor.textarea,"mouseup",U),mxEvent$1.addListener(r.cellEditor.textarea,"keyup",U),U()}};var Q=r.cellEditor.stopEditing;if(r.cellEditor.stopEditing=function(B,U){try{Q.apply(this,arguments),k()}catch(lt){console.log(lt),n.handleError(lt)}},r.container.setAttribute("tabindex","0"),r.container.style.cursor="default",window.self===window.top&&r.container.parentNode!=null)try{r.container.focus()}catch{}var nt=r.fireMouseEvent;r.fireMouseEvent=function(B,U,lt){try{B==mxEvent$1.MOUSE_DOWN&&this.container.focus(),nt.apply(this,arguments)}catch(tt){console.log(tt),n.handleError(tt)}};var dt=r.foldCells;if(r.foldCells=function(B,U,lt,tt,st){try{dt.apply(this,arguments)}catch(ft){console.log(ft),n.handleError(ft)}},r.popupMenuHandler.autoExpand=!0,this.menus!=null&&(r.popupMenuHandler.factoryMethod=mxUtils$1.bind(this,function(B,U,lt){this.menus.createPopupMenu(B,U,lt)})),mxEvent$1.addGestureListeners(document,mxUtils$1.bind(this,function(B){r.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(t),this.getKeyHandler=function(){return keyHandler},r.connectionHandler.addListener(mxEvent$1.CONNECT,function(B,U){var lt=[U.getProperty("cell")];U.getProperty("terminalInserted")&&(lt.push(U.getProperty("terminal")),window.setTimeout(function(){n.hoverIcons!=null&&n.hoverIcons.update(r.view.getState(lt[lt.length-1]))},0)),r.pasteCellStyles(lt)}),this.addListener("styleChanged",mxUtils$1.bind(this,function(B,U){var lt=U.getProperty("force");if((this.updateDefaultStyle||lt)&&r.copyCellStyles(U.getProperty("cells"),U.getProperty("keys"),U.getProperty("values"),r.currentVertexStyle,r.currentEdgeStyle,a,o),this.toolbar!=null){if(this.toolbar.setFontName(r.currentVertexStyle.fontFamily||Menus.prototype.defaultFont),this.toolbar.setFontSize(r.currentVertexStyle.fontSize||Menus.prototype.defaultFontSize),this.toolbar.edgeStyleMenu!=null){var tt=this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0];r.currentEdgeStyle.edgeStyle=="orthogonalEdgeStyle"&&r.currentEdgeStyle.curved=="1"?tt.className="geSprite geSprite-curved":r.currentEdgeStyle.edgeStyle=="straight"||r.currentEdgeStyle.edgeStyle=="none"||r.currentEdgeStyle.edgeStyle==null?tt.className="geSprite geSprite-straight":r.currentEdgeStyle.edgeStyle=="entityRelationEdgeStyle"?tt.className="geSprite geSprite-entity":r.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"?tt.className="geSprite geSprite-"+(r.currentEdgeStyle.elbow=="vertical"?"verticalelbow":"horizontalelbow"):r.currentEdgeStyle.edgeStyle=="isometricEdgeStyle"?tt.className="geSprite geSprite-"+(r.currentEdgeStyle.elbow=="vertical"?"verticalisometric":"horizontalisometric"):tt.className="geSprite geSprite-orthogonal"}if(this.toolbar.edgeShapeMenu!=null){var st=this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0];r.currentEdgeStyle.shape=="link"?st.className="geSprite geSprite-linkedge":r.currentEdgeStyle.shape=="flexArrow"?st.className="geSprite geSprite-arrow":r.currentEdgeStyle.shape=="arrow"?st.className="geSprite geSprite-simplearrow":st.className="geSprite geSprite-connection"}}})),this.toolbar!=null){var mt=mxUtils$1.bind(this,function(){var B=r.currentVertexStyle.fontFamily||"Helvetica",U=String(r.currentVertexStyle.fontSize||"12"),lt=r.getView().getState(r.getSelectionCell());lt!=null&&(B=lt.style[mxConstants$1.STYLE_FONTFAMILY]||B,U=lt.style[mxConstants$1.STYLE_FONTSIZE]||U,B.length>10&&(B=B.substring(0,8)+"...")),this.toolbar.setFontName(B),this.toolbar.setFontSize(U)});r.getSelectionModel().addListener(mxEvent$1.CHANGE,mt),r.getModel().addListener(mxEvent$1.CHANGE,mt)}r.addListener(mxEvent$1.CELLS_ADDED,function(B,U){var lt=U.getProperty("cells"),tt=U.getProperty("parent");tt!=null&&r.getModel().isLayer(tt)&&!r.isCellVisible(tt)&&lt!=null&&lt.length>0&&r.getModel().setVisible(tt,!0)}),Graph$1.selectParentLayer&&r.selectionModel.addListener(mxEvent$1.CHANGE,function(){if(r.isEnabled()&&!r.isSelectionEmpty()){var B=r.getLayerForCells(r.getSelectionCells());B!=null&&r.setDefaultParent(B)}}),this.gestureHandler=mxUtils$1.bind(this,function(B){this.currentMenu!=null&&mxEvent$1.getSource(B)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent$1.addGestureListeners(document,this.gestureHandler);var xt=null;this.resizeHandler=mxUtils$1.bind(this,function(){xt!=null&&window.clearTimeout(xt),xt=window.setTimeout(mxUtils$1.bind(this,function(){xt=null,this.windowResized()}),100)}),mxEvent$1.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils$1.bind(this,function(){this.refresh()}),mxEvent$1.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient$1.IS_IOS&&!window.navigator.standalone&&typeof Menus<"u"&&(this.scrollHandler=mxUtils$1.bind(this,function(){window.scrollTo(0,0)}),mxEvent$1.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils$1.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils$1.bind(this,function(){r.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils$1.bind(this,function(){r.view.validateBackground()})),r.addListener("gridSizeChanged",mxUtils$1.bind(this,function(){r.isGridEnabled()&&r.view.validateBackground()})),this.editor.resetGraph()}this.init(),r.standalone||this.open()};EditorUi$2.compactUi=!0;EditorUi$2.parsePng=function(t,e,i){var n=0;function r(o,u){var d=n;return n+=u,o.substring(d,n)}function l(o){var u=r(o,4);return u.charCodeAt(3)+(u.charCodeAt(2)<<8)+(u.charCodeAt(1)<<16)+(u.charCodeAt(0)<<24)}if(r(t,8)!=`PNG\r

`){i!=null&&i();return}if(r(t,4),r(t,4)!="IHDR"){i!=null&&i();return}r(t,17);do{var s=l(t),a=r(t,4);if(e!=null&&e(n-8,a,s)||(value=r(t,s),r(t,4),a=="IEND"))break}while(s)};mxUtils$1.extend(EditorUi$2,mxEventSource);EditorUi$2.prototype.splitSize=mxClient$1.IS_TOUCH||mxClient$1.IS_POINTER?12:8;EditorUi$2.prototype.menubarHeight=30;EditorUi$2.prototype.formatEnabled=!0;EditorUi$2.prototype.formatWidth=240;EditorUi$2.prototype.toolbarHeight=38;EditorUi$2.prototype.footerHeight=28;EditorUi$2.prototype.defaultSidebarWidth=Math.min(screen.width/2,urlParams$1["sidebar-entries"]!="large"?212:240);EditorUi$2.prototype.hsplitPosition=screen.width<=Editor$2.smallScreenWidth?0:EditorUi$2.prototype.defaultSidebarWidth;EditorUi$2.prototype.allowAnimation=!0;EditorUi$2.prototype.lightboxMaxFitScale=2;EditorUi$2.prototype.lightboxVerticalDivider=4;EditorUi$2.prototype.hsplitClickEnabled=!1;EditorUi$2.prototype.updateDefaultStyle=!1;EditorUi$2.prototype.spaceDown=!1;EditorUi$2.prototype.shiftDown=!1;EditorUi$2.prototype.init=function(){var t=this.editor.graph;if(!t.standalone){urlParams$1["shape-picker"]!="0"&&this.installShapePicker(),mxEvent$1.addListener(t.container,"scroll",mxUtils$1.bind(this,function(){t.tooltipHandler.hide(),t.connectionHandler!=null&&t.connectionHandler.constraintHandler!=null&&t.connectionHandler.constraintHandler.reset()})),t.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){t.tooltipHandler.hide();var n=t.getRubberband();n!=null&&n.cancel()})),mxEvent$1.addListener(t.container,"keydown",mxUtils$1.bind(this,function(n){this.onKeyDown(n)})),mxEvent$1.addListener(t.container,"keypress",mxUtils$1.bind(this,function(n){this.onKeyPress(n)})),this.addUndoListener(),t.getSelectionModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.updateActionStates()})),t.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.updateActionStates()}));var e=t.setDefaultParent,i=this;this.editor.graph.setDefaultParent=function(){e.apply(this,arguments),i.updateActionStates()},t.showLinkDialog=mxUtils$1.bind(i,i.showLinkDialog),t.editLink=i.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),this.format!=null&&this.format.init()}};EditorUi$2.prototype.clearSelectionState=function(){this.selectionState=null};EditorUi$2.prototype.getSelectionState=function(){return this.selectionState==null&&(this.selectionState=this.createSelectionState()),this.selectionState};EditorUi$2.prototype.createSelectionState=function(){for(var t=this.editor.graph,e=t.getSelectionCells(),i=this.initSelectionState(),n=!0,r=0;r<e.length;r++){var l=t.getCurrentCellStyle(e[r]);mxUtils$1.getValue(l,mxConstants$1.STYLE_EDITABLE,"1")!="0"&&(this.updateSelectionStateForCell(i,e[r],e,n),n=!1)}return this.updateSelectionStateForTableCells(i),i};EditorUi$2.prototype.initSelectionState=function(){return{vertices:[],edges:[],cells:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,html:!0,rounded:!0,autoSize:!1,image:!1,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0,stroke:!0,swimlane:!1,unlocked:this.editor.graph.isEnabled(),connections:!1}};EditorUi$2.prototype.updateSelectionStateForTableCells=function(t){if(t.cells.length>1&&t.cell){var e=mxUtils$1.sortCells(t.cells),i=this.editor.graph.model,n=i.getParent(e[0]),r=i.getParent(n);if(n!=null&&r!=null){for(var l=n.getIndex(e[0]),s=r.getIndex(n),a=null,o=1,u=1,d=0,p=s<r.getChildCount()-1?i.getChildAt(i.getChildAt(r,s+1),l):null;d<e.length-1;){var c=e[++d];p!=null&&p==c&&(a==null||o==a)&&(a=o,o=0,u++,n=i.getParent(p),p=s+u<r.getChildCount()?i.getChildAt(i.getChildAt(r,s+u),l):null);var g=this.editor.graph.view.getState(c);if(c==i.getChildAt(n,l+o)&&g!=null&&mxUtils$1.getValue(g.style,"colspan",1)==1&&mxUtils$1.getValue(g.style,"rowspan",1)==1)o++;else break}d==u*o-1&&(t.mergeCell=e[0],t.colspan=o,t.rowspan=u)}}};EditorUi$2.prototype.windowResized=function(){window.setTimeout(mxUtils$1.bind(this,function(){this.editor.graph!=null&&this.refresh()}),0)};EditorUi$2.prototype.createTimeout=function(t,e,i){var n=!0,s=null,r=mxUtils$1.bind(this,function(a){s.clear()&&(n=!1,a=a??{code:App.ERROR_TIMEOUT,message:mxResources$1.get("timeout"),retry:mxUtils$1.bind(this,function(){this.createTimeout(t,e,i)})},i!=null?i(a):this.handleError(a))}),l=window.setTimeout(r,t??this.timeout),s={clear:function(){return window.clearTimeout(l),n},isAlive:function(){return n}};return e!=null&&this.tryAndHandle(mxUtils$1.bind(this,function(){e(s)}),r),s};EditorUi$2.prototype.tryAndHandle=function(t,e){try{t()}catch(i){e!=null?e(i):this.handleError(i)}};EditorUi$2.prototype.convertDarkModeColors=function(t,e){var i=this.editor.graph;t=t??i.getSelectionCells(),e=e??[mxConstants$1.STYLE_FONTCOLOR,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_IMAGE_BORDER,mxConstants$1.STYLE_IMAGE_BACKGROUND,mxConstants$1.STYLE_LABEL_BORDERCOLOR,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR];var n={},r=document.createElement("canvas");r.width=1,r.height=1;var l=r.getContext("2d",{willReadFrequently:!0});l.filter="invert(100%) hue-rotate(180deg)",i.model.beginUpdate();try{for(var s=0;s<t.length;s++)if(i.model.isEdge(t[s])||i.model.isVertex(t[s])){var a=i.getCurrentCellStyle(t[s]);if(a!=null)for(var o=0;o<e.length;o++)try{var u=a[e[o]];if(u!=null&&u.charAt(0)=="#"){var d=n[u];d==null&&(d=Graph$1.invertColor(u,l),n[u]=d),i.setCellStyles(e[o],d,[t[s]])}}catch{}}}finally{i.model.endUpdate()}};EditorUi$2.prototype.updateSelectionStateForCell=function(t,e,i,n){var r=this.editor.graph;if(t.cells.push(e),r.getModel().isVertex(e)){t.connections=r.model.getEdgeCount(e)>0,t.unlocked=t.unlocked&&!r.isCellLocked(e),t.resizable=t.resizable&&r.isCellResizable(e),t.rotatable=t.rotatable&&r.isCellRotatable(e),t.movable=t.movable&&r.isCellMovable(e)&&!r.isTableRow(e)&&!r.isTableCell(e),t.swimlane=t.swimlane||r.isSwimlane(e),t.table=t.table||r.isTable(e),t.cell=t.cell||r.isTableCell(e),t.row=t.row||r.isTableRow(e),t.vertices.push(e);var l=r.getCellGeometry(e);if(l!=null&&(l.width>0?t.width==null?t.width=l.width:t.width!=l.width&&(t.width=""):t.containsLabel=!0,l.height>0?t.height==null?t.height=l.height:t.height!=l.height&&(t.height=""):t.containsLabel=!0,!l.relative||l.offset!=null)){var s=l.relative?l.offset.x:l.x,a=l.relative?l.offset.y:l.y;t.x==null?t.x=s:t.x!=s&&(t.x=""),t.y==null?t.y=a:t.y!=a&&(t.y="")}}else r.getModel().isEdge(e)&&(t.edges.push(e),t.connections=!0,t.resizable=!1,t.rotatable=!1,t.movable=!1);var o=r.view.getState(e);if(o!=null){t.html=t.html&&r.isHtmlLabel(e),t.autoSize=t.autoSize||r.isAutoSizeState(o),t.glass=t.glass&&r.isGlassState(o),t.rounded=t.rounded&&r.isRoundedState(o),t.lineJumps=t.lineJumps&&r.isLineJumpState(o),t.image=t.image||r.isImageState(o),t.shadow=t.shadow&&r.isShadowState(o),t.fill=t.fill&&r.isFillState(o),t.gradient=t.fill&&r.isGradientState(o),t.stroke=t.stroke&&r.isStrokeState(o);var u=mxUtils$1.getValue(o.style,mxConstants$1.STYLE_SHAPE,null);t.containsImage=t.containsImage||u=="image",r.mergeStyle(o.style,t.style,n)}};EditorUi$2.prototype.installShapePicker=function(){var t=this.editor.graph,e=this;t.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(o,u){u.getProperty("eventName")=="mouseDown"&&e.hideShapePicker()}));var i=mxUtils$1.bind(this,function(){e.hideShapePicker(!0)});t.addListener("wheel",i),t.addListener(mxEvent$1.ESCAPE,i),t.view.addListener(mxEvent$1.SCALE,i),t.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,i),t.getSelectionModel().addListener(mxEvent$1.CHANGE,i);var n=t.popupMenuHandler.isMenuShowing;t.popupMenuHandler.isMenuShowing=function(){return n.apply(this,arguments)||e.shapePicker!=null||e.currentMenu!=null};var r=t.dblClick;if(t.dblClick=function(o,u){if(this.isEnabled())if(u==null&&e.sidebar!=null&&!mxEvent$1.isShiftDown(o)&&!t.isCellLocked(t.getDefaultParent())){var d=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(o),mxEvent$1.getClientY(o));mxEvent$1.consume(o),window.setTimeout(mxUtils$1.bind(this,function(){e.showShapePicker(d.x,d.y)}),30)}else r.apply(this,arguments)},this.hoverIcons!=null){this.hoverIcons.addListener("reset",i);var l=this.hoverIcons.drag;this.hoverIcons.drag=function(){e.hideShapePicker(),l.apply(this,arguments)};var s=this.hoverIcons.execute;this.hoverIcons.execute=function(o,u,d){var p=d.getEvent();!this.graph.isCloneEvent(p)&&!mxEvent$1.isShiftDown(p)?this.graph.connectVertex(o.cell,u,this.graph.defaultEdgeLength,p,null,null,mxUtils$1.bind(this,function(c,g,x){var C=t.getCompositeParent(o.cell),T=t.getCellGeometry(C);for(d.consume();C!=null&&t.model.isVertex(C)&&T!=null&&T.relative;)cell=C,C=t.model.getParent(cell),T=t.getCellGeometry(C);window.setTimeout(mxUtils$1.bind(this,function(){e.showShapePicker(d.getGraphX(),d.getGraphY(),C,mxUtils$1.bind(this,function(A){x(A),e.hoverIcons!=null&&e.hoverIcons.update(t.view.getState(A))}),u)}),30)}),mxUtils$1.bind(this,function(c){this.graph.selectCellsForConnectVertex(c,p,this)})):s.apply(this,arguments)};var a=null;this.hoverIcons.addListener("focus",mxUtils$1.bind(this,function(o,u){a!=null&&window.clearTimeout(a),a=window.setTimeout(mxUtils$1.bind(this,function(){var d=u.getProperty("arrow"),p=u.getProperty("direction"),c=u.getProperty("event"),g=d.getBoundingClientRect(),x=mxUtils$1.getOffset(t.container),C=t.container.scrollLeft+g.x-x.x,T=t.container.scrollTop+g.y-x.y,A=t.getCompositeParent(this.hoverIcons.currentState!=null?this.hoverIcons.currentState.cell:null),R=e.showShapePicker(C,T,A,mxUtils$1.bind(this,function(_){_!=null&&t.connectVertex(A,p,t.defaultEdgeLength,c,!0,!1,function(N,H,k){k(_),e.hoverIcons!=null&&e.hoverIcons.update(t.view.getState(_))},function(N){t.selectCellsForConnectVertex(N)},c,this.hoverIcons)}),p,!0);R!=null&&(this.centerShapePicker(R,g,C,T,p),mxUtils$1.setOpacity(R,30),mxEvent$1.addListener(R,"mouseenter",function(){mxUtils$1.setOpacity(R,100)}),mxEvent$1.addListener(R,"mouseleave",function(){e.hideShapePicker()}))}),Editor$2.shapePickerHoverDelay)})),this.hoverIcons.addListener("blur",mxUtils$1.bind(this,function(o,u){a!=null&&window.clearTimeout(a)}))}};EditorUi$2.prototype.centerShapePicker=function(t,e,i,n,r){(r==mxConstants$1.DIRECTION_EAST||r==mxConstants$1.DIRECTION_WEST)&&(t.style.width="40px");var l=t.getBoundingClientRect();r==mxConstants$1.DIRECTION_NORTH?(i-=l.width/2-10,n-=l.height+6):r==mxConstants$1.DIRECTION_SOUTH?(i-=l.width/2-10,n+=e.height+6):r==mxConstants$1.DIRECTION_WEST?(i-=l.width+6,n-=l.height/2-10):r==mxConstants$1.DIRECTION_EAST&&(i+=e.width+6,n-=l.height/2-10),t.style.left=i+"px",t.style.top=n+"px"};EditorUi$2.prototype.showShapePicker=function(t,e,i,n,r,l,s,a,o){var u=null;if(this.editor.graph.freehand&&!this.editor.graph.freehand.isDrawing()&&(a=a||i==null,u=this.createShapePicker(t,e,i,n,r,mxUtils$1.bind(this,function(){this.hideShapePicker()}),this.getCellsForShapePicker(i,l,a),l,s,a,o),u!=null)){this.hoverIcons!=null&&!l&&this.hoverIcons.reset();var d=this.editor.graph;d.popupMenuHandler.hideMenu(),d.tooltipHandler.hideTooltip(),this.hideCurrentMenu(),this.hideShapePicker(),this.shapePickerCallback=n,this.shapePicker=u}return u};EditorUi$2.prototype.createShapePicker=function(t,e,i,n,r,l,s,a,o,u,d){d=d??!0;var p=this.editor.graph,c=null;if(o=o??function(K){var Q=K[0],nt=0,dt=0,mt=Q.geometry;if(mt!=null){if(p.model.isEdge(Q)){var xt=mt.getTerminalPoint(!1);mt=new mxRectangle$1(0,0,xt.x,xt.y)}nt=mt.width/2,dt=mt.height/2}return new mxPoint$1(p.snap(Math.round(t/p.view.scale)-p.view.translate.x-nt),p.snap(Math.round(e/p.view.scale)-p.view.translate.y-dt))},s!=null&&s.length>0){var g=this,p=this.editor.graph;c=document.createElement("div");var x=p.view.getState(i),C=i!=null&&(x==null||!p.isTransparentState(x))?p.copyStyle(i):null,T=s.length<6?s.length*35:140;c.className="geToolbarContainer geSidebarContainer geShapePicker",c.setAttribute("title",mxResources$1.get("sidebarTooltip")),c.style.left=t+"px",c.style.top=e+"px",c.style.width=T+"px",mxClient$1.IS_POINTER&&(c.style.touchAction="none"),a||mxUtils$1.setPrefixedStyle(c.style,"transform","translate(-22px,-22px)"),p.background!=null&&p.background!=mxConstants$1.NONE&&(c.style.backgroundColor=p.background),p.container.appendChild(c);for(var A=mxUtils$1.bind(this,function(Q){var nt=document.createElement("a");nt.className="geItem",nt.style.cssText="position:relative;display:inline-block;position:relative;width:30px;height:30px;cursor:pointer;overflow:hidden;padding:1px",c.appendChild(nt),C!=null&&urlParams$1.sketch!="1"?this.sidebar.graph.pasteStyle(C,[Q]):this.sidebar.graph.pasteCellStyles([Q],p.currentVertexStyle,p.currentEdgeStyle);var dt=Q.geometry;if(p.model.isEdge(Q)){var mt=dt.getTerminalPoint(!1);dt=new mxRectangle$1(0,0,mt.x,mt.y)}dt!=null&&nt.appendChild(this.sidebar.createVertexTemplateFromCells([Q],dt.width,dt.height,"",!0,!1,null,!1,mxUtils$1.bind(this,function(xt){if(mxEvent$1.isShiftDown(xt)&&(i!=null||!p.isSelectionEmpty())){var Y=p.getEditableCells(i!=null?[i]:p.getSelectionCells());p.updateShapes(Q,Y)}else{var B=p.cloneCell(Q);if(n!=null)n(B);else{var U=o([B]);p.model.isEdge(B)?B.geometry.translate(U.x,U.y):(B.geometry.x=U.x,B.geometry.y=U.y),p.model.beginUpdate();try{p.addCell(B),p.model.isVertex(B)&&p.isAutoSizeCell(B)&&p.updateCellSize(B)}finally{p.model.endUpdate()}p.setSelectionCell(B),p.scrollCellToVisible(B),d&&p.startEditing(B),g.hoverIcons!=null&&g.hoverIcons.update(p.view.getState(B))}}l!=null&&l(xt),mxEvent$1.consume(xt)}),25,25,null,null,i))}),R=0;R<(a?Math.min(s.length,4):s.length);R++)A(s[R]);var _=p.container.scrollTop+p.container.offsetHeight,N=c.offsetTop+c.clientHeight-_;N>0&&(c.style.top=Math.max(p.container.scrollTop+22,e-N)+"px");var H=p.container.scrollLeft+p.container.offsetWidth,k=c.offsetLeft+c.clientWidth-H;k>0&&(c.style.left=Math.max(p.container.scrollLeft+22,t-k)+"px")}return c};EditorUi$2.prototype.getCellsForShapePicker=function(t,e,i){var n=this.editor.graph,r=mxUtils$1.bind(this,function(o,u,d,p){return n.createVertex(null,null,p||"",0,0,u||120,d||60,o,!1)}),l=mxUtils$1.bind(this,function(o,u,d){var p=new mxCell$2(d||"",new mxGeometry$2(0,0,n.defaultEdgeLength+20,0),o);return p.geometry.setTerminalPoint(new mxPoint$1(0,0),!0),p.geometry.setTerminalPoint(new mxPoint$1(p.geometry.width,u??0),!1),p.geometry.points=u!=null?[new mxPoint$1(p.geometry.width/2,u)]:[],p.geometry.relative=!0,p.edge=!0,p});if(t!=null)try{t=n.cloneCell(t),n.model.isVertex(t)&&t.geometry!=null&&(t.geometry.x=0,t.geometry.y=0)}catch{t=null}if(t==null&&(t=r(n.appendFontSize("text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;",n.vertexFontSize),40,20,"Text"),n.model.isVertex(t)&&n.isAutoSizeCell(t))){var s=Graph$1.createOffscreenGraph(n.getStylesheet());s.updateCellSize(t)}var a=[t,r("whiteSpace=wrap;html=1;"),r("ellipse;whiteSpace=wrap;html=1;",80,80),r("rhombus;whiteSpace=wrap;html=1;",80,80),r("rounded=1;whiteSpace=wrap;html=1;"),r("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;"),r("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60),r("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80),r("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80),r("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;"),r("triangle;whiteSpace=wrap;html=1;",60,80),r("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80),r("shape=tape;whiteSpace=wrap;html=1;",120,100),r("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80),r("shape=singleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.4;",80,60),r("shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",20,20)];return i&&(a=a.concat([l("edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;"),l("edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;startArrow=classic;endSize=8;startSize=8;"),l("edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;shape=flexArrow;rounded=1;startSize=8;endSize=8;"),l("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;sourcePerimeterSpacing=0;targetPerimeterSpacing=0;",this.editor.graph.defaultEdgeLength/2)])),a};EditorUi$2.prototype.isShapePickerVisible=function(t){return this.shapePicker!=null};EditorUi$2.prototype.hideShapePicker=function(t){this.shapePicker!=null&&(this.shapePicker.parentNode.removeChild(this.shapePicker),this.shapePicker=null,!t&&this.shapePickerCallback!=null&&this.shapePickerCallback(),this.shapePickerCallback=null)};EditorUi$2.prototype.isSpaceDown=function(){return this.spaceDown};EditorUi$2.prototype.isShiftDown=function(){return this.shiftDown};EditorUi$2.prototype.onKeyDown=function(t){var e=this.editor.graph;if(t.which==9&&e.isEnabled()&&!mxEvent$1.isControlDown(t)){if(e.isEditing())if(mxEvent$1.isAltDown(t))e.stopEditing(!1);else try{var i=e.cellEditor.isContentEditing()&&e.cellEditor.isTextSelected();if(window.getSelection&&e.cellEditor.isContentEditing()&&!i&&!mxClient$1.IS_IE&&!mxClient$1.IS_IE11){var n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0).commonAncestorContainer:null;i=r!=null&&(r.nodeName=="LI"||r.parentNode!=null&&r.parentNode.nodeName=="LI")}i?document.execCommand(mxEvent$1.isShiftDown(t)?"outdent":"indent",!1,null):mxEvent$1.isShiftDown(t)?e.stopEditing(!1):e.cellEditor.insertTab(e.cellEditor.isContentEditing()?null:4)}catch{}else mxEvent$1.isAltDown(t)?e.selectParentCell():e.selectCell(!mxEvent$1.isShiftDown(t));mxEvent$1.consume(t)}};EditorUi$2.prototype.onKeyPress=function(t){var e=this.editor.graph;this.isImmediateEditingEvent(t)&&!e.isEditing()&&!e.isSelectionEmpty()&&t.which!==0&&t.which!==27&&!mxEvent$1.isAltDown(t)&&!mxEvent$1.isControlDown(t)&&!mxEvent$1.isMetaDown(t)&&(e.escape(),e.startEditing(null,String.fromCharCode(t.which)))};EditorUi$2.prototype.isImmediateEditingEvent=function(t){return!0};EditorUi$2.prototype.updateCssForMarker=function(t,e,i,n,r){if(t.style.display="inline-flex",t.style.alignItems="center",t.style.justifyContent="center",t.innerText="",i=="flexArrow")t.className=n!=null&&n!=mxConstants$1.NONE?"geSprite geSprite-"+e+"blocktrans":"geSprite geSprite-noarrow";else{var l=this.getImageForMarker(n,r);if(l!=null){var s=document.createElement("img");s.className="geAdaptiveAsset",s.setAttribute("src",l),t.className="",e=="end"&&mxUtils$1.setPrefixedStyle(s.style,"transform","scaleX(-1)"),t.appendChild(s)}else t.className="geSprite geSprite-noarrow",t.innerHTML=mxUtils$1.htmlEntities(mxResources$1.get("none")),t.style.backgroundImage="none",t.style.fontSize="11px",t.style.filter="none"}};EditorUi$2.prototype.getImageForMarker=function(t,e){var i=null;return t==mxConstants$1.ARROW_CLASSIC?i=e!="1"?Format.classicMarkerImage.src:Format.classicFilledMarkerImage.src:t==mxConstants$1.ARROW_CLASSIC_THIN?i=e!="1"?Format.classicThinMarkerImage.src:Format.openThinFilledMarkerImage.src:t==mxConstants$1.ARROW_OPEN?i=Format.openFilledMarkerImage.src:t==mxConstants$1.ARROW_OPEN_THIN?i=Format.openThinFilledMarkerImage.src:t==mxConstants$1.ARROW_BLOCK?i=e!="1"?Format.blockMarkerImage.src:Format.blockFilledMarkerImage.src:t==mxConstants$1.ARROW_BLOCK_THIN?i=e!="1"?Format.blockThinMarkerImage.src:Format.blockThinFilledMarkerImage.src:t==mxConstants$1.ARROW_OVAL?i=e!="1"?Format.ovalMarkerImage.src:Format.ovalFilledMarkerImage.src:t==mxConstants$1.ARROW_DIAMOND?i=e!="1"?Format.diamondMarkerImage.src:Format.diamondFilledMarkerImage.src:t==mxConstants$1.ARROW_DIAMOND_THIN?i=e!="1"?Format.diamondThinMarkerImage.src:Format.diamondThinFilledMarkerImage.src:t=="doubleBlock"?i=e!="1"?Format.doubleBlockMarkerImage.src:Format.doubleBlockFilledMarkerImage.src:t=="box"?i=Format.boxMarkerImage.src:t=="halfCircle"?i=Format.halfCircleMarkerImage.src:t=="openAsync"?i=Format.openAsyncFilledMarkerImage.src:t=="async"?i=e!="1"?Format.asyncMarkerImage.src:Format.asyncFilledMarkerImage.src:t=="dash"?i=Format.dashMarkerImage.src:t=="baseDash"?i=Format.baseDashMarkerImage.src:t=="cross"?i=Format.crossMarkerImage.src:t=="circle"?i=Format.circleMarkerImage.src:t=="circlePlus"?i=Format.circlePlusMarkerImage.src:t=="ERone"?i=Format.EROneMarkerImage.src:t=="ERmandOne"?i=Format.ERmandOneMarkerImage.src:t=="ERmany"?i=Format.ERmanyMarkerImage.src:t=="ERoneToMany"?i=Format.ERoneToManyMarkerImage.src:t=="ERzeroToOne"?i=Format.ERzeroToOneMarkerImage.src:t=="ERzeroToMany"&&(i=Format.ERzeroToManyMarkerImage.src),i};EditorUi$2.prototype.createMenus=function(){return null};EditorUi$2.prototype.updatePasteActionStates=function(){var t=this.editor.graph,e=this.actions.get("paste"),i=this.actions.get("pasteHere");e.setEnabled(this.editor.graph.cellEditor.isContentEditing()||(!mxClient$1.IS_FF&&navigator.clipboard!=null||!mxClipboard$1.isEmpty())&&t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())),i.setEnabled(e.isEnabled())};EditorUi$2.prototype.initClipboard=function(){var t=this,e=mxClipboard$1.cut;mxClipboard$1.cut=function(l){l.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):e.apply(this,arguments),t.updatePasteActionStates()},mxClipboard$1.copy,mxClipboard$1.copy=function(l){var s=null;if(l.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{s=s||l.getSelectionCells(),s=l.getExportableCells(l.model.getTopmostCells(s));for(var a=new Object,o=l.createCellLookup(s),u=l.cloneCells(s,null,a),d=new mxGraphModel,p=d.getChildAt(d.getRoot(),0),c=0;c<u.length;c++){d.add(p,u[c]);var g=l.view.getState(s[c]);if(g!=null){var x=l.getCellGeometry(u[c]);x!=null&&x.relative&&!d.isEdge(s[c])&&o[mxObjectIdentity.get(d.getParent(s[c]))]==null&&(x.offset=null,x.relative=!1,x.x=g.x/g.view.scale-g.view.translate.x,x.y=g.y/g.view.scale-g.view.translate.y)}}l.updateCustomLinks(l.createCellMapping(a,o),u),mxClipboard$1.insertCount=1,mxClipboard$1.setCells(u)}return t.updatePasteActionStates(),s};var i=mxClipboard$1.paste;mxClipboard$1.paste=function(l){var s=null;return l.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):s=i.apply(this,arguments),t.updatePasteActionStates(),s};var n=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){n.apply(this,arguments),t.updatePasteActionStates()};var r=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(l,s){r.apply(this,arguments),t.updatePasteActionStates()},this.updatePasteActionStates()};EditorUi$2.prototype.lazyZoomDelay=20;EditorUi$2.prototype.wheelZoomDelay=500;EditorUi$2.prototype.buttonZoomDelay=600;EditorUi$2.prototype.initCanvas=function(){var t=this.editor.graph;t.timerAutoScroll=!0,t.getPagePadding=function(){return new mxPoint$1(Math.max(0,Math.round((t.container.offsetWidth-34)/t.view.scale)),Math.max(0,Math.round((t.container.offsetHeight-34)/t.view.scale)))},t.view.getBackgroundPageBounds=function(){var pt=this.graph.getPageLayout(),ct=this.graph.getPageSize();return new mxRectangle$1(this.scale*(this.translate.x+pt.x*ct.width),this.scale*(this.translate.y+pt.y*ct.height),this.scale*pt.width*ct.width,this.scale*pt.height*ct.height)},t.getPreferredPageSize=function(pt,ct,Mt){var bt=this.getPageLayout(),Ot=this.getPageSize();return new mxRectangle$1(0,0,bt.width*Ot.width,bt.height*Ot.height)};var e=null,i=this;if(this.editor.isChromelessView()){e=mxUtils$1.bind(this,function(pt,ct,Mt,bt){if(t.container!=null&&!t.isViewer()){Mt=Mt??0,bt=bt??0;var Ot=t.pageVisible?t.view.getBackgroundPageBounds():t.getGraphBounds(),gt=mxUtils$1.hasScrollbars(t.container),Tt=t.view.translate,vt=t.view.scale,Pt=mxRectangle$1.fromRectangle(Ot);Pt.x=Pt.x/vt-Tt.x,Pt.y=Pt.y/vt-Tt.y,Pt.width/=vt,Pt.height/=vt;var Dt=t.container.scrollTop,zt=t.container.scrollLeft,Rt=document.documentMode>=8?20:14;(document.documentMode==8||document.documentMode==9)&&(Rt+=3);var Nt=t.container.offsetWidth-Rt,Bt=t.container.offsetHeight-Rt,kt=pt?Math.max(.3,Math.min(ct||1,Nt/Pt.width)):vt,Xt=(Nt-kt*Pt.width)/2/kt,ie=this.lightboxVerticalDivider==0?0:(Bt-kt*Pt.height)/this.lightboxVerticalDivider/kt;if(gt&&(Xt=Math.max(Xt,0),ie=Math.max(ie,0)),gt||Ot.width<Nt||Ot.height<Bt)t.view.scaleAndTranslate(kt,Math.floor(Xt-Pt.x),Math.floor(ie-Pt.y)),t.container.scrollTop=Dt*kt/vt,t.container.scrollLeft=zt*kt/vt;else if(Mt!=0||bt!=0){var At=t.view.translate;t.view.setTranslate(Math.floor(At.x+Mt/vt),Math.floor(At.y+bt/vt))}}}),this.chromelessResize=e,this.chromelessWindowResize=mxUtils$1.bind(this,function(){this.chromelessResize(!1)});var n=mxUtils$1.bind(this,function(){this.chromelessWindowResize(!1)});if(mxEvent$1.addListener(window,"resize",n),this.destroyFunctions.push(function(){mxEvent$1.removeListener(window,"resize",n)}),this.editor.addListener("resetGraphView",mxUtils$1.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils$1.bind(this,function(pt){t.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils$1.bind(this,function(pt){t.zoomOut(),this.chromelessResize(!1)}),urlParams$1.toolbar!="0"){var r=JSON.parse(decodeURIComponent(urlParams$1["toolbar-config"]||"{}"));this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=t.isViewer()?"0":"50%",!mxClient$1.IS_IE&&!mxClient$1.IS_IE11?this.chromelessToolbar.style.backgroundColor="#000000":(this.chromelessToolbar.style.backgroundColor="#ffffff",this.chromelessToolbar.style.border="3px solid black"),mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","16px"),mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out");var l=mxUtils$1.bind(this,function(){var pt=mxUtils$1.getCurrentStyle(t.container);t.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(pt!=null?parseInt(pt["margin-bottom"]||0):0)+(this.tabContainer!=null?20+parseInt(this.tabContainer.style.height):20)+"px"});this.editor.addListener("resetGraphView",l),l();var s=mxUtils$1.bind(this,function(pt,ct,Mt){var bt=document.createElement("span");bt.style.paddingLeft="8px",bt.style.paddingRight="8px",bt.style.cursor="pointer",mxEvent$1.addListener(bt,"click",pt),Mt!=null&&bt.setAttribute("title",Mt);var Ot=document.createElement("img");return Ot.setAttribute("border","0"),Ot.setAttribute("src",ct),Ot.style.width="36px",Ot.style.filter="invert(100%)",bt.appendChild(Ot),this.chromelessToolbar.appendChild(bt),bt});if(r.backBtn!=null){var a=Graph$1.sanitizeLink(r.backBtn.url);a!=null&&s(mxUtils$1.bind(this,function(pt){window.location.href=a,mxEvent$1.consume(pt)}),Editor$2.backImage,mxResources$1.get("back",null,"Back"))}if(this.isPagesEnabled()){var o=s(mxUtils$1.bind(this,function(pt){this.actions.get("previousPage").funct(),mxEvent$1.consume(pt)}),Editor$2.previousImage,mxResources$1.get("previousPage")),u=document.createElement("div");u.style.fontFamily=Editor$2.defaultHtmlFont,u.style.display="inline-block",u.style.verticalAlign="top",u.style.fontWeight="bold",u.style.marginTop="8px",u.style.fontSize="14px",u.style.cursor="default",!mxClient$1.IS_IE&&!mxClient$1.IS_IE11?u.style.color="#ffffff":u.style.color="#000000",this.chromelessToolbar.appendChild(u);var d=s(mxUtils$1.bind(this,function(pt){this.actions.get("nextPage").funct(),mxEvent$1.consume(pt)}),Editor$2.nextImage,mxResources$1.get("nextPage")),p=mxUtils$1.bind(this,function(){if(this.pages!=null&&this.pages.length>1&&this.currentPage!=null){u.innerText="";var pt=mxUtils$1.indexOf(this.pages,this.currentPage);mxUtils$1.write(u,pt+1+" / "+this.pages.length),u.setAttribute("title",mxResources$1.get("currentPage")+": "+this.currentPage.getName()),o.setAttribute("title",mxResources$1.get("previousPage")+": "+this.pages[mxUtils$1.mod(pt-1,this.pages.length)].getName()),d.setAttribute("title",mxResources$1.get("nextPage")+": "+this.pages[mxUtils$1.mod(pt+1,this.pages.length)].getName())}});o.style.paddingLeft="0px",o.style.paddingRight="4px",d.style.paddingLeft="4px",d.style.paddingRight="0px";var c=mxUtils$1.bind(this,function(){this.pages!=null&&this.pages.length>1&&this.currentPage!=null?(d.style.display="",o.style.display="",u.style.display="inline-block"):(d.style.display="none",o.style.display="none",u.style.display="none"),p()});if(this.menus!=null){var g=this.menus.get("pages");g!=null&&mxEvent$1.addListener(u,"click",mxUtils$1.bind(this,function(pt){var ct=new mxPopupMenu$1(g.funct);ct.div.className+=" geMenubarMenu",ct.smartSeparators=!0,ct.showDisabled=!0,ct.autoExpand=!0,ct.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu$1.prototype.hideMenu.apply(ct,arguments),ct.destroy()});var Mt=mxUtils$1.getOffset(u);ct.popup(Mt.x,Mt.y+u.offsetHeight,null,pt),mxEvent$1.addListener(ct.div,"mouseleave",mxUtils$1.bind(this,function(){ct.hideMenu()}))}))}this.editor.addListener("resetGraphView",c),this.editor.addListener("pageSelected",p)}s(mxUtils$1.bind(this,function(pt){this.actions.get("zoomOut").funct(),mxEvent$1.consume(pt)}),Editor$2.zoomOutImage,mxResources$1.get("zoomOut")+" (Alt+Mousewheel)"),s(mxUtils$1.bind(this,function(pt){this.actions.get("zoomIn").funct(),mxEvent$1.consume(pt)}),Editor$2.zoomInImage,mxResources$1.get("zoomIn")+" (Alt+Mousewheel)"),s(mxUtils$1.bind(this,function(pt){t.isLightboxView()?(t.view.scale==1?this.lightboxFit():t.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent$1.consume(pt)}),Editor$2.zoomFitImage,mxResources$1.get("fit"));var x=null,C=null,T=mxUtils$1.bind(this,function(pt){x!=null&&(window.clearTimeout(x),x=null),C!=null&&(window.clearTimeout(C),C=null),x=window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setOpacity(this.chromelessToolbar,0),x=null,C=window.setTimeout(mxUtils$1.bind(this,function(){this.chromelessToolbar.style.display="none",C=null}),600)}),pt||200)}),A=mxUtils$1.bind(this,function(pt){x!=null&&(window.clearTimeout(x),x=null),C!=null&&(window.clearTimeout(C),C=null),this.chromelessToolbar.style.display="",mxUtils$1.setOpacity(this.chromelessToolbar,pt||30)});if(urlParams$1.layers=="1"){this.layersDialog=null;var R=s(mxUtils$1.bind(this,function(pt){if(this.layersDialog!=null)this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null;else{this.layersDialog=t.createLayersDialog(mxUtils$1.bind(this,function(){this.chromelessResize&&this.chromelessResize()}),!0),mxEvent$1.addListener(this.layersDialog,"mouseleave",mxUtils$1.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null}));var ct=R.getBoundingClientRect();mxUtils$1.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily=Editor$2.defaultHtmlFont,this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.left=ct.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px",!mxClient$1.IS_IE&&!mxClient$1.IS_IE11?(this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.color="#ffffff",mxUtils$1.setOpacity(this.layersDialog,80)):(this.layersDialog.style.backgroundColor="#ffffff",this.layersDialog.style.border="2px solid black",this.layersDialog.style.color="#000000");var Mt=mxUtils$1.getCurrentStyle(this.editor.graph.container);this.layersDialog.style.zIndex=Mt.zIndex,document.body.appendChild(this.layersDialog),this.editor.fireEvent(new mxEventObject$1("layersDialogShown"))}mxEvent$1.consume(pt)}),Editor$2.layersImage,mxResources$1.get("layers")),_=t.getModel();_.addListener(mxEvent$1.CHANGE,function(){R.style.display=_.getChildCount(_.root)>1?"":"none"})}if((urlParams$1.openInSameWin!="1"||navigator.standalone)&&this.addChromelessToolbarItems(s),(this.editor.editButtonLink!=null||this.editor.editButtonFunc!=null)&&s(mxUtils$1.bind(this,function(pt){this.editor.editButtonFunc!=null?this.editor.editButtonFunc():this.editor.editButtonLink=="_blank"?this.editor.editAsNew(this.getEditBlankXml()):t.openLink(this.editor.editButtonLink,"editWindow"),mxEvent$1.consume(pt)}),Editor$2.editImage,mxResources$1.get("edit")),this.lightboxToolbarActions!=null)for(var N=0;N<this.lightboxToolbarActions.length;N++){var H=this.lightboxToolbarActions[N];H.elem=s(H.fn,H.icon,H.tooltip)}if(r.refreshBtn!=null){var k=r.refreshBtn.url==null?null:Graph$1.sanitizeLink(r.refreshBtn.url);s(mxUtils$1.bind(this,function(pt){k!=null?window.location.href=k:window.location.reload(),mxEvent$1.consume(pt)}),Editor$2.refreshImage,mxResources$1.get("refresh",null,"Refresh"))}r.fullscreenBtn!=null&&window.self!==window.top&&s(mxUtils$1.bind(this,function(pt){r.fullscreenBtn.url?t.openLink(r.fullscreenBtn.url):t.openLink(window.location.href),mxEvent$1.consume(pt)}),Editor$2.fullscreenImage,mxResources$1.get("openInNewWindow",null,"Open in New Window")),!r.noCloseBtn&&(r.closeBtn&&window.self===window.top||t.lightbox&&(urlParams$1.close=="1"||this.container!=document.body))&&s(mxUtils$1.bind(this,function(pt){urlParams$1.close=="1"||r.closeBtn?window.close():(this.destroy(),mxEvent$1.consume(pt))}),Editor$2.closeImage,mxResources$1.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",t.isViewer()||mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),t.container.appendChild(this.chromelessToolbar),mxEvent$1.addListener(t.container,mxClient$1.IS_POINTER?"pointermove":"mousemove",mxUtils$1.bind(this,function(pt){mxEvent$1.isTouchEvent(pt)||(mxEvent$1.isShiftDown(pt)||A(30),T())})),mxEvent$1.addListener(this.chromelessToolbar,mxClient$1.IS_POINTER?"pointermove":"mousemove",function(pt){mxEvent$1.consume(pt)}),mxEvent$1.addListener(this.chromelessToolbar,"mouseenter",mxUtils$1.bind(this,function(pt){t.tooltipHandler.resetTimer(),t.tooltipHandler.hideTooltip(),mxEvent$1.isShiftDown(pt)?T():A(100)})),mxEvent$1.addListener(this.chromelessToolbar,"mousemove",mxUtils$1.bind(this,function(pt){mxEvent$1.isShiftDown(pt)?T():A(100),mxEvent$1.consume(pt)})),mxEvent$1.addListener(this.chromelessToolbar,"mouseleave",mxUtils$1.bind(this,function(pt){mxEvent$1.isTouchEvent(pt)||A(30)}));var K=t.getTolerance();t.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(pt,ct){this.startX=ct.getGraphX(),this.startY=ct.getGraphY(),this.scrollLeft=t.container.scrollLeft,this.scrollTop=t.container.scrollTop},mouseMove:function(pt,ct){},mouseUp:function(pt,ct){mxEvent$1.isTouchEvent(ct.getEvent())&&Math.abs(this.scrollLeft-t.container.scrollLeft)<K&&Math.abs(this.scrollTop-t.container.scrollTop)<K&&Math.abs(this.startX-ct.getGraphX())<K&&Math.abs(this.startY-ct.getGraphY())<K&&(parseFloat(i.chromelessToolbar.style.opacity||0)>0?T():A(30))}})}this.editor.editable||this.addChromelessClickHandler()}else if(this.editor.extendCanvas){var Q=t.view.validate,nt=new mxPoint$1,dt=!1,mt=null;if(t.view.validate=function(){if(t.container!=null&&mxUtils$1.hasScrollbars(t.container)){if(i.currentPage!=null&&mt!=i.currentPage){mt=i.currentPage,dt=!0;var pt=t.getBoundingBoxFromGeometry(t.model.getCells(),!0,null,!0);pt==null&&(pt=new mxRectangle$1(t.view.translate.x*t.view.scale,t.view.translate.y*t.view.scale));var ct=t.getPageLayout(pt,nt,1),Mt=t.getDefaultTranslate(ct);this.x0=ct.x,this.y0=ct.y,(Mt.x!=this.translate.x||Mt.y!=this.translate.y)&&(this.invalidate(),this.translate.x=Mt.x,this.translate.y=Mt.y)}var bt=t.getPagePadding(),Ot=t.getPageSize(),gt=bt.x-(this.x0||0)*Ot.width,Tt=bt.y-(this.y0||0)*Ot.height;(this.translate.x!=gt||this.translate.y!=Tt)&&(this.invalidate(),this.translate.x=gt,this.translate.y=Tt)}Q.apply(this,arguments)},!t.isViewer()){var xt=t.sizeDidChange;t.sizeDidChange=function(){var pt=dt;if(dt=!1,this.container!=null&&mxUtils$1.hasScrollbars(this.container)){if(this.updateMinimumSize(),!this.autoTranslate){var ct=this.getPageLayout(),Mt=this.getDefaultTranslate(ct),bt=this.view.translate.x,Ot=this.view.translate.y;if(Mt.x!=bt||Mt.y!=Ot){this.view.x0=ct.x,this.view.y0=ct.y,this.autoTranslate=!0,this.view.setTranslate(Mt.x,Mt.y),this.autoTranslate=!1,pt||(this.container.scrollLeft+=Math.round((Mt.x-bt)*this.view.scale),this.container.scrollTop+=Math.round((Mt.y-Ot)*this.view.scale));return}}xt.apply(this,arguments)}else this.fireEvent(new mxEventObject$1(mxEvent$1.SIZE,"bounds",this.getGraphBounds()))}}}var Y=t.view.getBackgroundPane(),B=t.view.getDrawPane();t.cumulativeZoomFactor=1;var U=null,lt=null,tt=null,st=null,ft=null,$t=20,Ct=function(pt){U!=null&&window.clearTimeout(U),pt>=0&&window.setTimeout(function(){(!t.isMouseDown||st)&&(U=window.setTimeout(mxUtils$1.bind(this,function(){t.isFastZoomEnabled()&&(t.view.backgroundPageShape!=null&&t.view.backgroundPageShape.node!=null&&(mxUtils$1.setPrefixedStyle(t.view.backgroundPageShape.node.style,"transform-origin",null),mxUtils$1.setPrefixedStyle(t.view.backgroundPageShape.node.style,"transform",null)),B.style.transformOrigin="",Y.style.transformOrigin="",mxClient$1.IS_SF?(B.style.transform="scale(1)",Y.style.transform="scale(1)",window.setTimeout(function(){B.style.transform="",Y.style.transform=""},0)):(B.style.transform="",Y.style.transform=""),t.view.getDecoratorPane().style.opacity="",t.view.getOverlayPane().style.opacity="");var ct=new mxPoint$1(t.container.scrollLeft,t.container.scrollTop),Mt=mxUtils$1.getOffset(t.container),bt=t.view.scale,Ot=0,gt=0;lt!=null&&(Ot=t.container.offsetWidth/2-lt.x+Mt.x,gt=t.container.offsetHeight/2-lt.y+Mt.y),t.zoom(t.cumulativeZoomFactor,null,t.isFastZoomEnabled()?$t:null);var Tt=t.view.scale;Tt!=bt&&(tt!=null&&(Ot+=ct.x-tt.x,gt+=ct.y-tt.y),e!=null&&i.chromelessResize(!1,null,Ot*(t.cumulativeZoomFactor-1),gt*(t.cumulativeZoomFactor-1)),mxUtils$1.hasScrollbars(t.container)&&(Ot!=0||gt!=0)&&(t.container.scrollLeft-=Ot*(t.cumulativeZoomFactor-1),t.container.scrollTop-=gt*(t.cumulativeZoomFactor-1))),ft!=null&&B.setAttribute("filter",ft),t.cumulativeZoomFactor=1,U=null,tt=null,lt=null,st=null,ft=null}),pt??(t.isFastZoomEnabled()?i.wheelZoomDelay:i.lazyZoomDelay)))},0)};t.lazyZoom=function(pt,ct,Mt,bt){if(bt=bt??this.zoomFactor,ct=ct||!t.scrollbars,ct&&(lt=new mxPoint$1(t.container.offsetLeft+t.container.clientWidth/2,t.container.offsetTop+t.container.clientHeight/2)),pt?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=bt,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*100)/100/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=bt,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*100)/100/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,t.isFastZoomEnabled()){ft==null&&B.getAttribute("filter")!=""&&(ft=B.getAttribute("filter"),B.removeAttribute("filter")),tt=new mxPoint$1(t.container.scrollLeft,t.container.scrollTop);var Ot=Math.round(Math.round(this.view.scale*this.cumulativeZoomFactor*100)/100*$t)/($t*this.view.scale),gt=ct||lt==null?t.container.scrollLeft+t.container.clientWidth/2:lt.x+t.container.scrollLeft-t.container.offsetLeft,Tt=ct||lt==null?t.container.scrollTop+t.container.clientHeight/2:lt.y+t.container.scrollTop-t.container.offsetTop;if(B.style.transformOrigin=gt+"px "+Tt+"px",B.style.transform="scale("+Ot+")",Y.style.transformOrigin=gt+"px "+Tt+"px",Y.style.transform="scale("+Ot+")",t.view.backgroundPageShape!=null&&t.view.backgroundPageShape.node!=null){var vt=t.view.backgroundPageShape.node;mxUtils$1.setPrefixedStyle(vt.style,"transform-origin",(ct||lt==null?t.container.clientWidth/2+t.container.scrollLeft-vt.offsetLeft+"px":lt.x+t.container.scrollLeft-vt.offsetLeft-t.container.offsetLeft+"px")+" "+(ct||lt==null?t.container.clientHeight/2+t.container.scrollTop-vt.offsetTop+"px":lt.y+t.container.scrollTop-vt.offsetTop-t.container.offsetTop+"px")),mxUtils$1.setPrefixedStyle(vt.style,"transform","scale("+Ot+")")}else t.view.validateBackgroundStyles(Ot,gt,Tt);t.view.getDecoratorPane().style.opacity="0",t.view.getOverlayPane().style.opacity="0",i.hoverIcons!=null&&i.hoverIcons.reset(),t.fireEvent(new mxEventObject$1("zoomPreview","factor",Ot))}Ct(t.isFastZoomEnabled()?Mt:0)},mxEvent$1.addGestureListeners(t.container,function(pt){U!=null&&window.clearTimeout(U)},null,function(pt){t.cumulativeZoomFactor!=1&&Ct(0)}),mxEvent$1.addListener(t.container,"scroll",function(pt){U!=null&&!t.isMouseDown&&t.cumulativeZoomFactor!=1&&Ct(0)}),mxEvent$1.addMouseWheelListener(mxUtils$1.bind(this,function(pt,ct,Mt,bt,Ot){if(t.fireEvent(new mxEventObject$1("wheel")),this.dialogs==null||this.dialogs.length==0){if(!t.scrollbars&&!Mt&&t.isScrollWheelEvent(pt)){var gt=t.view.getTranslate(),Tt=40/t.view.scale;mxEvent$1.isShiftDown(pt)?t.view.setTranslate(gt.x+(ct?-Tt:Tt),gt.y):t.view.setTranslate(gt.x,gt.y+(ct?Tt:-Tt))}else if(Mt||t.isZoomWheelEvent(pt))for(var vt=mxEvent$1.getSource(pt);vt!=null;){if(vt==t.container){t.tooltipHandler.hideTooltip(),lt=bt!=null&&Ot!=null?new mxPoint$1(bt,Ot):new mxPoint$1(mxEvent$1.getClientX(pt),mxEvent$1.getClientY(pt)),st=Mt;var Pt=t.zoomFactor,Dt=null;return pt.ctrlKey&&pt.deltaY!=null&&Math.abs(pt.deltaY)<40&&Math.round(pt.deltaY)!=pt.deltaY?Pt=1+Math.abs(pt.deltaY)/20*(Pt-1):pt.movementY!=null&&pt.type=="pointermove"&&(Pt=1+Math.max(1,Math.abs(pt.movementY))/20*(Pt-1),Dt=-1),t.lazyZoom(ct,null,Dt,Pt),mxEvent$1.consume(pt),!1}vt=vt.parentNode}}}),t.container),t.panningHandler.zoomGraph=function(pt){t.cumulativeZoomFactor=pt.scale,t.lazyZoom(pt.scale>0,!0),mxEvent$1.consume(pt)}};EditorUi$2.prototype.addChromelessToolbarItems=function(t){t(mxUtils$1.bind(this,function(e){this.actions.get("print").funct(),mxEvent$1.consume(e)}),Editor$2.printImage,mxResources$1.get("print"))};EditorUi$2.prototype.isPagesEnabled=function(){return this.editor.editable||urlParams$1["hide-pages"]!="1"};EditorUi$2.prototype.createTemporaryGraph=function(t){return Graph$1.createOffscreenGraph(t)};EditorUi$2.prototype.addChromelessClickHandler=function(){var t=urlParams$1.highlight;t!=null&&t.length>0&&(t="#"+t),this.editor.graph.addClickHandler(t)};EditorUi$2.prototype.toggleFormatPanel=function(t){t=t??this.formatWidth==0,this.format!=null&&(this.formatWidth=t?240:0,this.formatContainer.style.width=this.formatWidth+"px",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject$1("formatWidthChanged")))};EditorUi$2.prototype.isFormatPanelVisible=function(){return this.formatWidth>0};EditorUi$2.prototype.lightboxFit=function(t){if(this.isDiagramEmpty())this.editor.graph.view.setScale(1);else{var e=urlParams$1.border,i=60;e!=null&&(i=parseInt(e)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(i,null,null,null,null,null,t),this.editor.graph.maxFitScale=null}};EditorUi$2.prototype.isDiagramEmpty=function(){var t=this.editor.graph.getModel();return t.getChildCount(t.root)==1&&t.getChildCount(t.getChildAt(t.root,0))==0};EditorUi$2.prototype.isSelectionAllowed=function(t){return mxEvent$1.getSource(t).nodeName=="SELECT"||mxEvent$1.getSource(t).nodeName=="INPUT"&&mxUtils$1.isAncestorNode(this.formatContainer,mxEvent$1.getSource(t))};EditorUi$2.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils$1.bind(this,function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()})};EditorUi$2.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources$1.get("allChangesLost")};EditorUi$2.prototype.open=function(){try{window.opener!=null&&window.opener.openFile!=null&&window.opener.openFile.setConsumer(mxUtils$1.bind(this,function(t,e){try{var i=mxUtils$1.parseXml(t);this.editor.setGraphXml(i.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),e!=null&&(this.editor.setFilename(e),this.updateDocumentTitle());return}catch(n){mxUtils$1.alert(mxResources$1.get("invalidOrMissingFile")+": "+n.message)}}))}catch{}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject$1("resetGraphView"))};EditorUi$2.prototype.showPrintDialog=function(t,e){this.showDialog(new PrintDialog(this,t,e).container,300,180,!0,!0)};EditorUi$2.prototype.showPopupMenu=function(t,e,i,n){this.editor.graph.popupMenuHandler.hideMenu();var r=new mxPopupMenu$1(t);r.div.className+=" geMenubarMenu",r.smartSeparators=!0,r.showDisabled=!0,r.autoExpand=!0,r.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu$1.prototype.hideMenu.apply(r,arguments),r.destroy()}),r.popup(e,i,null,n),this.setCurrentMenu(r)};EditorUi$2.prototype.setCurrentMenu=function(t,e){this.currentMenuElt=e,this.currentMenu=t,this.hideShapePicker()};EditorUi$2.prototype.resetCurrentMenu=function(){this.currentMenuElt=null,this.currentMenu=null};EditorUi$2.prototype.hideCurrentMenu=function(){this.currentMenu!=null&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())};EditorUi$2.prototype.updateDocumentTitle=function(){var t=this.editor.getOrCreateFilename();this.editor.appName!=null&&(t+=" - "+this.editor.appName),document.title=t};EditorUi$2.prototype.createHoverIcons=function(){return new HoverIcons$1(this.editor.graph)};EditorUi$2.prototype.redo=function(){try{var t=this.editor.graph;t.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch{}};EditorUi$2.prototype.undo=function(){try{var t=this.editor.graph;if(t.isEditing()){var e=t.cellEditor.textarea.innerHTML;document.execCommand("undo",!1,null),e==t.cellEditor.textarea.innerHTML&&(t.stopEditing(!0),this.editor.undoManager.undo())}else this.editor.undoManager.undo()}catch{}};EditorUi$2.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()};EditorUi$2.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()};EditorUi$2.prototype.getDiagramSnapshot=function(){return{node:this.editor.getGraphXml()}};EditorUi$2.prototype.updateDiagramData=function(t,e){this.replaceDiagramData(xUtils.getXml(e))};EditorUi$2.prototype.replaceDiagramData=function(t){this.editor.graph.model.beginUpdate();try{this.editor.setGraphXml(mxUtils$1.parseXml(t).documentElement)}finally{this.editor.graph.model.endUpdate()}};EditorUi$2.prototype.getEditBlankXml=function(){return mxUtils$1.getXml(this.editor.getGraphXml())};EditorUi$2.prototype.getUrl=function(t){var e=t??window.location.pathname,i=e.indexOf("?")>0?1:0;for(var n in urlParams$1)i==0?e+="?":e+="&",e+=n+"="+urlParams$1[n],i++;return e};EditorUi$2.prototype.setScrollbars=function(t){var e=this.editor.graph,i=e.container.style.overflow;e.scrollbars=t,this.editor.updateGraphComponents(),i!=e.container.style.overflow&&(e.container.scrollTop=0,e.container.scrollLeft=0,e.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new mxEventObject$1("scrollbarsChanged"))};EditorUi$2.prototype.fitDiagramToWindow=function(){var t=this.editor.graph,e=t.isSelectionEmpty()?mxRectangle$1.fromRectangle(t.getGraphBounds()):t.getBoundingBox(t.getSelectionCells()),i=t.view.translate,n=t.view.scale;if(e.x=e.x/n-i.x,e.y=e.y/n-i.y,e.width/=n,e.height/=n,t.backgroundImage!=null&&e.add(new mxRectangle$1(0,0,t.backgroundImage.width,t.backgroundImage.height)),e.width==0||e.height==0)t.zoomTo(1),this.resetScrollbars();else{var r=Editor$2.fitWindowBorders;r!=null&&(e.x-=r.x,e.y-=r.y,e.width+=r.width+r.x,e.height+=r.height+r.y),t.fitWindow(e)}};EditorUi$2.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars};EditorUi$2.prototype.resetScrollbars=function(){var t=this.editor.graph,e=t.container;if(!this.editor.extendCanvas)e.scrollTop=0,e.scrollLeft=0,mxUtils$1.hasScrollbars(e)||t.view.setTranslate(0,0);else if(!this.editor.isChromelessView())if(mxUtils$1.hasScrollbars(e))if(t.pageVisible){var i=t.getPagePadding();e.scrollTop=Math.floor(i.y-this.editor.initialTopSpacing)-1,e.scrollLeft=Math.floor(Math.min(i.x,(e.scrollWidth-e.clientWidth)/2))-1;var n=t.getGraphBounds();n.width>0&&n.height>0&&(n.x>e.scrollLeft+e.clientWidth*.9&&(e.scrollLeft=Math.min(n.x+n.width-e.clientWidth,n.x-10)),n.y>e.scrollTop+e.clientHeight*.9&&(e.scrollTop=Math.min(n.y+n.height-e.clientHeight,n.y-10)))}else{var n=t.getGraphBounds();if(n.width==0&&n.height==0)e.scrollLeft=(e.scrollWidth-e.clientWidth)/2,e.scrollTop=(e.scrollHeight-e.clientHeight)/2;else{var r=Math.max(n.width,t.scrollTileSize.width*t.view.scale),l=Math.max(n.height,t.scrollTileSize.height*t.view.scale);e.scrollLeft=Math.floor(Math.max(0,n.x-Math.max(0,(e.clientWidth-r)/2))),e.scrollTop=Math.floor(Math.max(0,n.y-Math.max(20,(e.clientHeight-l)/4)))}}else{var s=mxRectangle$1.fromRectangle(t.pageVisible?t.view.getBackgroundPageBounds():t.getGraphBounds()),a=t.view.translate,o=t.view.scale;s.x=s.x/o-a.x,s.y=s.y/o-a.y,s.width/=o,s.height/=o;var u=t.pageVisible?0:Math.max(0,(e.clientHeight-s.height)/4);t.view.setTranslate(Math.floor(Math.max(0,(e.clientWidth-s.width)/2)-s.x+2),Math.floor(u-s.y+1))}};EditorUi$2.prototype.setPageVisible=function(t){var e=this.editor.graph,i=mxUtils$1.hasScrollbars(e.container),n=0,r=0;if(i&&(n=e.view.translate.x*e.view.scale-e.container.scrollLeft,r=e.view.translate.y*e.view.scale-e.container.scrollTop),e.pageVisible=t,e.pageBreaksVisible=t,e.preferPageSize=t,e.view.validateBackground(),i){var l=e.getSelectionCells();e.clearSelection(),e.setSelectionCells(l)}e.sizeDidChange(),i&&(e.container.scrollLeft=e.view.translate.x*e.view.scale-n,e.container.scrollTop=e.view.translate.y*e.view.scale-r),e.defaultPageVisible=t,this.fireEvent(new mxEventObject$1("pageViewChanged"))};EditorUi$2.prototype.installResizeHandler=function(t,e,i){e&&(t.window.setSize=function(r,l){if(!this.minimized){var s=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,a=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;r=Math.min(r,s-this.getX()),l=Math.min(l,a-this.getY())}mxWindow$1.prototype.setSize.apply(this,arguments)}),t.window.setLocation=function(r,l){var s=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,a=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,o=parseInt(this.div.style.width),u=parseInt(this.div.style.height);r=Math.max(0,Math.min(r,s-o)),l=Math.max(0,Math.min(l,a-u)),(this.getX()!=r||this.getY()!=l)&&mxWindow$1.prototype.setLocation.apply(this,arguments),e&&!this.minimized&&this.setSize(o,u)};var n=mxUtils$1.bind(this,function(){var r=t.window.getX(),l=t.window.getY();t.window.setLocation(r,l)});mxEvent$1.addListener(window,"resize",n),t.destroy=function(){mxEvent$1.removeListener(window,"resize",n),t.window.destroy(),i!=null&&i()}};function ChangeGridColor(t,e){this.ui=t,this.color=e}ChangeGridColor.prototype.execute=function(){var t=this.ui.editor.graph.view.gridColor;this.ui.setGridColor(this.color),this.color=t};(function(){var t=new mxObjectCodec$1(new ChangeGridColor,["ui"]);mxCodecRegistry.register(t)})();function ChangePageSetup$1(t,e,i,n,r){this.ui=t,this.color=e,this.previousColor=e,this.image=i,this.previousImage=i,this.format=n,this.previousFormat=n,this.pageScale=r,this.previousPageScale=r,this.ignoreColor=!1,this.ignoreImage=!1}ChangePageSetup$1.prototype.execute=function(){var t=this.ui.editor.graph;if(!this.ignoreColor){this.color=this.previousColor;var e=t.background;this.ui.setBackgroundColor(this.previousColor),this.previousColor=e}if(!this.ignoreImage){this.image=this.previousImage;var e=t.backgroundImage,i=this.previousImage;i!=null&&Graph$1.isPageLink(i.src)&&(i=this.ui.createImageForPageLink(i.src,this.ui.currentPage)),this.ui.setBackgroundImage(i),this.previousImage=e}if(this.previousFormat!=null){this.format=this.previousFormat;var e=t.pageFormat;(this.previousFormat.width!=e.width||this.previousFormat.height!=e.height)&&(this.ui.setPageFormat(this.previousFormat),this.previousFormat=e)}if(this.foldingEnabled!=null&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled),this.previousPageScale!=null){var n=this.ui.editor.graph.pageScale;this.previousPageScale!=n&&(this.ui.setPageScale(this.previousPageScale),this.previousPageScale=n)}};(function(){var t=new mxObjectCodec$1(new ChangePageSetup$1,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);t.afterDecode=function(e,i,n){return n.previousColor=n.color,n.previousImage=n.image,n.previousFormat=n.format,n.previousPageScale=n.pageScale,n.foldingEnabled!=null&&(n.foldingEnabled=!n.foldingEnabled),n},mxCodecRegistry.register(t)})();EditorUi$2.prototype.setBackgroundColor=function(t){this.editor.graph.background=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject$1("backgroundColorChanged"))};EditorUi$2.prototype.setFoldingEnabled=function(t){this.editor.graph.foldingEnabled=t,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject$1("foldingEnabledChanged"))};EditorUi$2.prototype.setPageFormat=function(t,e){e=e??urlParams$1.sketch=="1",this.editor.graph.pageFormat=t,e||(this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct()),this.fireEvent(new mxEventObject$1("pageFormatChanged"))};EditorUi$2.prototype.setPageScale=function(t){this.editor.graph.pageScale=t,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject$1("pageScaleChanged"))};EditorUi$2.prototype.setGridColor=function(t){this.editor.graph.view.gridColor=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject$1("gridColorChanged"))};EditorUi$2.prototype.addUndoListener=function(){var t=this.editor.undoManager,e=mxUtils$1.bind(this,function(){this.updateActionStates()});t.addListener(mxEvent$1.ADD,e),t.addListener(mxEvent$1.UNDO,e),t.addListener(mxEvent$1.REDO,e),t.addListener(mxEvent$1.CLEAR,e);var i=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){i.apply(this,arguments),e()};var n=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(r,l){n.apply(this,arguments),e()},e()};EditorUi$2.prototype.updateActionStates=function(){for(var t=this.editor.graph,e=this.getSelectionState(),i=t.isEnabled()&&!t.isCellLocked(t.getDefaultParent()),n=!this.editor.chromeless||this.editor.editable,r=["cut","copy","bold","italic","underline","delete","duplicate","editStyle","editTooltip","editLink","backgroundColor","borderColor","edit","toFront","toBack","solid","dashed","pasteSize","dotted","fillColor","gradientColor","shadow","fontColor","formattedText","rounded","toggleRounded","strokeColor","sharp","snapToGrid"],l=0;l<r.length;l++)this.actions.get(r[l]).setEnabled(e.cells.length>0);this.actions.get("grid").setEnabled(n),this.actions.get("undo").setEnabled(this.canUndo()&&n),this.actions.get("redo").setEnabled(this.canRedo()&&n),this.actions.get("swap").setEnabled(e.cells.length==2&&e.vertices.length==2),this.actions.get("pasteSize").setEnabled(this.copiedSize!=null&&e.vertices.length>0),this.actions.get("pasteData").setEnabled(this.copiedValue!=null&&e.cells.length>0),this.actions.get("setAsDefaultStyle").setEnabled(t.getSelectionCount()==1),this.actions.get("lockUnlock").setEnabled(!t.isSelectionEmpty()),this.actions.get("bringForward").setEnabled(e.cells.length==1),this.actions.get("sendBackward").setEnabled(e.cells.length==1),this.actions.get("rotation").setEnabled(e.vertices.length==1),this.actions.get("wordWrap").setEnabled(e.vertices.length==1),this.actions.get("autosize").setEnabled(e.vertices.length>0),this.actions.get("copySize").setEnabled(e.vertices.length==1),this.actions.get("clearWaypoints").setEnabled(e.connections),this.actions.get("clearAnchors").setEnabled(e.connections),this.actions.get("curved").setEnabled(e.edges.length>0),this.actions.get("turn").setEnabled(e.cells.length>0),this.actions.get("group").setEnabled(e.cells.length>1||e.vertices.length==1&&t.model.getChildCount(e.cells[0])==0&&!t.isContainer(e.vertices[0])),this.actions.get("ungroup").setEnabled(!e.row&&!e.cell&&!e.table&&e.vertices.length>0&&(t.isContainer(e.vertices[0])||t.getModel().getChildCount(e.vertices[0])>0)),this.actions.get("removeFromGroup").setEnabled(e.cells.length==1&&t.getModel().isVertex(t.getModel().getParent(e.cells[0]))),this.actions.get("collapsible").setEnabled(e.vertices.length==1&&(t.model.getChildCount(e.vertices[0])>0||t.isContainer(e.vertices[0]))),this.actions.get("exitGroup").setEnabled(t.view.currentRoot!=null),this.actions.get("home").setEnabled(t.view.currentRoot!=null),this.actions.get("enterGroup").setEnabled(e.cells.length==1&&t.isValidRoot(e.cells[0])),this.actions.get("copyData").setEnabled(e.cells.length==1),this.actions.get("copyAsText").setEnabled(e.cells.length==1),this.actions.get("editLink").setEnabled(e.cells.length==1),this.actions.get("editStyle").setEnabled(e.cells.length>0),this.actions.get("editTooltip").setEnabled(e.cells.length==1),this.actions.get("openLink").setEnabled(e.cells.length==1&&t.getLinkForCell(e.cells[0])!=null),this.actions.get("guides").setEnabled(t.isEnabled()),this.actions.get("selectVertices").setEnabled(i),this.actions.get("selectEdges").setEnabled(i),this.actions.get("selectAll").setEnabled(i),this.actions.get("selectNone").setEnabled(i);var s=e.vertices.length==1&&t.isCellFoldable(e.vertices[0]);this.actions.get("expand").setEnabled(s),this.actions.get("collapse").setEnabled(s),this.updatePasteActionStates()};EditorUi$2.prototype.zeroOffset=new mxPoint$1(0,0);EditorUi$2.prototype.getDiagramContainerOffset=function(){return this.zeroOffset};EditorUi$2.prototype.refresh=function(t){t=t??!0,this.container.clientWidth,this.container.clientHeight,this.container==document.body&&(document.body.clientWidth||document.documentElement.clientWidth,document.documentElement.clientHeight),mxClient$1.IS_IOS&&!window.navigator.standalone&&typeof Menus<"u"&&window.innerHeight!=document.documentElement.clientHeight&&(document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0)),this.diagramContainer.style.left="20px",this.diagramContainer.style.top="20px",this.diagramContainer.style.right="20px",this.diagramContainer.style.bottom="20px",t&&this.editor.graph.sizeDidChange()};EditorUi$2.prototype.createTabContainer=function(){return null};EditorUi$2.prototype.createDivs=function(){this.diagramContainer=this.createDiv("geDiagramContainer"),this.diagramContainer.style.right=(this.format!=null?this.formatWidth:0)+"px"};EditorUi$2.prototype.createDivs1=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.sidebarContainer.style.zIndex="1",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(this.format!=null?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu$1.prototype.zIndex-3,this.hsplit.style.width=this.splitSize+"px",this.hsplit.style.zIndex="1",this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()};EditorUi$2.prototype.createSidebarContainer=function(){var t=document.createElement("div");return t.className="geSidebarContainer",t};EditorUi$2.prototype.createUi=function(){this.container.appendChild(this.diagramContainer)};EditorUi$2.prototype.createUi1=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),this.menubar!=null&&this.menubarContainer.appendChild(this.menubar.container),this.menubar!=null&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils$1.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),this.sidebar!=null&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),this.format!=null&&this.container.appendChild(this.formatContainer);var t=this.editor.chromeless?null:this.createFooter();t!=null&&(this.footerContainer.appendChild(t),this.container.appendChild(this.footerContainer)),this.container.appendChild(this.diagramContainer),this.container!=null&&this.tabContainer!=null&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),this.toolbar!=null&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),this.sidebar!=null&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils$1.bind(this,function(e){this.hsplitPosition=e,this.refresh()})))};EditorUi$2.prototype.createStatusContainer=function(){var t=document.createElement("a");return t.className="geItem geStatus",mxEvent$1.addListener(t,"click",mxUtils$1.bind(this,function(e){var i=mxEvent$1.getSource(e);if(i!=t)for(;i.parentNode!=t;)i=i.parentNode;if(i.nodeName!="A"){var n=i.getAttribute("data-action");if(n=="statusFunction"&&this.editor.statusFunction!=null)this.editor.statusFunction();else if(n!=null){var r=this.actions.get(n);r!=null&&r.funct()}else{var l=i.getAttribute("data-title"),s=i.getAttribute("data-message");if(l!=null&&s!=null)this.showError(l,s);else{var a=i.getAttribute("data-link");a!=null&&this.editor.graph.openLink(a)}}mxEvent$1.consume(e)}})),t};EditorUi$2.prototype.setStatusText=function(t){if(this.statusContainer.innerHTML=Graph$1.sanitizeHtml(t),this.statusContainer.getElementsByTagName("div").length==0&&t!=null&&t.length>0){this.statusContainer.innerText="";var e=this.createStatusDiv(t);this.statusContainer.appendChild(e)}var i=this.statusContainer.querySelectorAll('[data-effect="fade"]');if(i!=null)for(var n=0;n<i.length;n++)(function(r){mxUtils$1.setOpacity(r,0),mxUtils$1.setPrefixedStyle(r.style,"transform","scaleX(0)"),mxUtils$1.setPrefixedStyle(r.style,"transition","all 0.2s ease"),window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setOpacity(r,100),mxUtils$1.setPrefixedStyle(r.style,"transform","scaleX(1)"),mxUtils$1.setPrefixedStyle(r.style,"transition","all 1s ease"),window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setPrefixedStyle(r.style,"transform","scaleX(0)"),mxUtils$1.setOpacity(r,0),window.setTimeout(mxUtils$1.bind(this,function(){r.parentNode!=null&&r.parentNode.removeChild(r)}),1e3)}),Editor$2.updateStatusInterval/2)}),0)})(i[n])};EditorUi$2.prototype.createStatusDiv=function(t){var e=document.createElement("div");return e.style.textOverflow="ellipsis",e.style.display="inline-block",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.minWidth="0",e.setAttribute("title",t),e.innerHTML=Graph$1.sanitizeHtml(t),e};EditorUi$2.prototype.createToolbar=function(t){return new Toolbar(this,t)};EditorUi$2.prototype.createSidebar=function(t){return new Sidebar(this,t)};EditorUi$2.prototype.createFormat=function(t){return new Format(this,t)};EditorUi$2.prototype.createFooter=function(){return this.createDiv("geFooter")};EditorUi$2.prototype.createDiv=function(t){var e=document.createElement("div");return e.className=t,e};EditorUi$2.prototype.addSplitHandler=function(t,e,i,n){var r=null,l=null,s=!0,a=null;mxClient$1.IS_POINTER&&(t.style.touchAction="none");var o=mxUtils$1.bind(this,function(){var p=parseInt(e?t.style.left:t.style.bottom);return e||(p=p+i-this.footerHeight),p});function u(p){if(r!=null){var c=new mxPoint$1(mxEvent$1.getClientX(p),mxEvent$1.getClientY(p));n(Math.max(0,l+(e?c.x-r.x:r.y-c.y)-i)),mxEvent$1.consume(p),l!=o()&&(s=!0,a=null)}}function d(p){u(p),l=null,r=null}mxEvent$1.addGestureListeners(t,function(p){r=new mxPoint$1(mxEvent$1.getClientX(p),mxEvent$1.getClientY(p)),l=o(),s=!1,mxEvent$1.consume(p)}),mxEvent$1.addListener(t,"click",mxUtils$1.bind(this,function(p){if(!s&&this.hsplitClickEnabled){var c=a!=null?a-i:0;a=o(),n(c),mxEvent$1.consume(p)}})),mxEvent$1.addGestureListeners(document,null,u,d),this.destroyFunctions.push(function(){mxEvent$1.removeGestureListeners(document,null,u,d)})};EditorUi$2.prototype.prompt=function(t,e,i){var n=new FilenameDialog(this,e,mxResources$1.get("apply"),function(r){i(parseFloat(r))},t);this.showDialog(n.container,300,80,!0,!0),n.init()};EditorUi$2.prototype.handleError=function(t,e,i,n,r){var l=t!=null&&t.error!=null?t.error:t;if(l!=null||e!=null){var s=mxUtils$1.htmlEntities(mxResources$1.get("unknownError")),a=mxResources$1.get("ok");e=e??mxResources$1.get("error"),l!=null&&l.message!=null&&(s=mxUtils$1.htmlEntities(l.message)),this.showError(e,s,a,i,null,null,null,null,null,null,null,null,n?i:null)}else i!=null&&i()};EditorUi$2.prototype.showError=function(t,e,i,n,r,l,s,a,o,u,d,p,c){var g=new ErrorDialog(this,t,e,i||mxResources$1.get("ok"),n,r,l,s,p,a,o),x=Math.ceil(e!=null?e.length/50:1);this.showDialog(g.container,u||340,d||100+x*20,!0,!1,c),g.init()};EditorUi$2.prototype.showDialog=function(t,e,i,n,r,l,s,a,o,u){this.editor.graph.tooltipHandler.resetTimer(),this.editor.graph.tooltipHandler.hideTooltip(),this.dialogs==null&&(this.dialogs=[]),this.dialog=new Dialog(this,t,e,i,n,r,l,s,a,o,u),this.dialogs.push(this.dialog)};EditorUi$2.prototype.hideDialog=function(t,e,i){var n=null;if(this.dialogs!=null&&this.dialogs.length>0){for(var r=this.dialogs.length-1;r>=0;r--)if(!this.dialogs[r].closing){n=this.dialogs[r];break}}if(n!=null){if(i!=null&&i!=this.dialog.container.firstChild)return;if(n.closing=!0,n.close(t,e)==!1){delete n.closing;return}delete n.closing;var l=mxUtils$1.lastIndexOf(this.dialogs,n);l>=0&&this.dialogs.splice(l,1),this.dialog=this.dialogs.length>0?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new mxEventObject$1("hideDialog")),this.dialog==null&&this.editor.graph.container!=null&&this.editor.graph.container.style.visibility!="hidden"&&window.setTimeout(mxUtils$1.bind(this,function(){this.editor!=null&&(this.dialogs==null||this.dialogs.length==0)&&(this.editor.graph.isEditing()&&this.editor.graph.cellEditor.textarea!=null?this.editor.graph.cellEditor.textarea.focus():(mxUtils$1.clearSelection(),this.editor.graph.container.focus()))}),0)}};EditorUi$2.prototype.ctrlEnter=function(){var t=this.editor.graph;if(t.isEnabled())try{for(var e=t.getSelectionCells(),i=new mxDictionary$1,n=[],r=0;r<e.length;r++){var l=t.isTableCell(e[r])?t.model.getParent(e[r]):e[r];l!=null&&!i.get(l)&&(i.put(l,!0),n.push(l))}t.setSelectionCells(t.duplicateCells(n,!1))}catch(s){this.handleError(s)}};EditorUi$2.prototype.pickColor=function(t,e,i,n){var r=this.editor.graph,l=r.cellEditor.saveSelection(),s=230+(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12))*17,a=new ColorDialog(this,t!="default"?mxUtils$1.rgba2hex(t)||"none":t,function(o){r.cellEditor.restoreSelection(l),e(o)},function(){r.cellEditor.restoreSelection(l)},i,n);this.showDialog(a.container,230,s,!0,!1),a.init()};EditorUi$2.prototype.openFile=function(){window.openFile=new OpenFile(mxUtils$1.bind(this,function(t){this.hideDialog(t)})),this.showDialog(new OpenDialog(this).container,Editor$2.useLocalStorage?640:320,Editor$2.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})};EditorUi$2.prototype.base64ToBlob=function(t,e){e=e||"";for(var i=1024,n=atob(t),r=n.length,l=Math.ceil(r/i),s=new Array(l),a=0;a<l;++a){for(var o=a*i,u=Math.min(o+i,r),d=new Array(u-o),p=o,c=0;p<u;++c,++p)d[c]=n[p].charCodeAt(0);s[a]=new Uint8Array(d)}return new Blob(s,{type:e})};EditorUi$2.prototype.writeImageToClipboard=function(t,e,i,n){var r=this.base64ToBlob(t.substring(t.indexOf(",")+1),"image/png"),l='<img src="'+t+'" width="'+e+'" height="'+i+'">',s=new ClipboardItem({"image/png":r,"text/html":new Blob([l],{type:"text/html"})});navigator.clipboard.write([s]).catch(n)};EditorUi$2.prototype.writeHtmlToClipboard=function(t,e){var i=new ClipboardItem({"text/plain":new Blob([Editor$2.convertHtmlToText(t)],{type:"text/plain"}),"text/html":new Blob([t],{type:"text/html"})});navigator.clipboard.write([i]).catch(e)};EditorUi$2.prototype.writeTextToClipboard=function(t,e){navigator.clipboard.writeText(t).catch(e)};EditorUi$2.prototype.extractGraphModelFromHtml=function(t){var e=null;try{var i=t.indexOf("&lt;mxGraphModel ");if(i>=0){var n=t.lastIndexOf("&lt;/mxGraphModel&gt;");n>i&&(e=t.substring(i,n+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}}catch{}return e};EditorUi$2.prototype.readGraphModelFromClipboard=function(t){this.readGraphModelFromClipboardWithType(mxUtils$1.bind(this,function(e){e!=null?t(e):this.readGraphModelFromClipboardWithType(mxUtils$1.bind(this,function(i){if(i!=null){var n=decodeURIComponent(i);this.isCompatibleString(n)&&(i=n)}t(i)}),"text")}),"html")};EditorUi$2.prototype.readGraphModelFromClipboardWithType=function(t,e){navigator.clipboard.read().then(mxUtils$1.bind(this,function(i){i!=null&&i.length>0&&e=="html"&&mxUtils$1.indexOf(i[0].types,"text/html")>=0?i[0].getType("text/html").then(mxUtils$1.bind(this,function(n){n.text().then(mxUtils$1.bind(this,function(r){try{var l=this.parseHtmlData(r),s=l.getAttribute("data-type")!="text/plain",a=s?l.innerHTML:mxUtils$1.trim(l.innerText==null?mxUtils$1.getTextContent(l):l.innerText);try{var o=a.lastIndexOf("%3E");o>=0&&o<a.length-3&&(a=a.substring(0,o+3))}catch{}try{var u=l.getElementsByTagName("span"),d=u!=null&&u.length>0?mxUtils$1.trim(decodeURIComponent(u[0].textContent)):decodeURIComponent(a);this.isCompatibleString(d)&&(a=d)}catch{}}catch{}t(this.isCompatibleString(a)?a:null)})).catch(function(r){t(null)})})).catch(function(n){t(null)}):i!=null&&i.length>0&&e=="text"&&mxUtils$1.indexOf(i[0].types,"text/plain")>=0?i[0].getType("text/plain").then(function(n){n.text().then(function(r){t(r)}).catch(function(){t(null)})}).catch(function(){t(null)}):t(null)})).catch(function(i){t(null)})};EditorUi$2.prototype.parseHtmlData=function(t){var e=null;if(t!=null&&t.length>0){var i=t.substring(0,6)=="<meta ";e=document.createElement("div"),e.innerHTML=(i?'<meta charset="utf-8">':"")+Graph$1.sanitizeHtml(t),asHtml=!0;var n=e.getElementsByTagName("style");if(n!=null)for(;n.length>0;)n[0].parentNode.removeChild(n[0]);if(e.firstChild!=null&&e.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT&&e.firstChild.nextSibling!=null&&e.firstChild.nextSibling.nodeType==mxConstants$1.NODETYPE_ELEMENT&&e.firstChild.nodeName=="META"&&e.firstChild.nextSibling.nodeName=="A"&&e.firstChild.nextSibling.nextSibling==null){var r=e.firstChild.nextSibling.innerText==null?mxUtils$1.getTextContent(e.firstChild.nextSibling):e.firstChild.nextSibling.innerText;r==e.firstChild.nextSibling.getAttribute("href")&&(mxUtils$1.setTextContent(e,r),asHtml=!1)}var l=i&&e.firstChild!=null?e.firstChild.nextSibling:e.firstChild;if(l!=null&&l.nextSibling==null&&l.nodeType==mxConstants$1.NODETYPE_ELEMENT&&l.nodeName=="IMG"){var r=l.getAttribute("src");if(r!=null){if(Editor$2.isPngDataUrl(r)){var s=Editor$2.extractGraphModelFromPng(r);s!=null&&s.length>0&&(r=s)}mxUtils$1.setTextContent(e,r),asHtml=!1}}else{var a=e.getElementsByTagName("img");if(a.length==1){var l=a[0],r=l.getAttribute("src");if(r!=null&&l.parentNode==e&&e.children.length==1){if(Editor$2.isPngDataUrl(r)){var s=Editor$2.extractGraphModelFromPng(r);s!=null&&s.length>0&&(r=s)}mxUtils$1.setTextContent(e,r),asHtml=!1}}}asHtml&&Graph$1.removePasteFormatting(e)}return asHtml||e.setAttribute("data-type","text/plain"),e};EditorUi$2.prototype.extractGraphModelFromEvent=function(t){var e=null,i=null;if(t!=null){var n=t.dataTransfer!=null?t.dataTransfer:t.clipboardData;if(n!=null&&(document.documentMode==10||document.documentMode==11?i=n.getData("Text"):(i=mxUtils$1.indexOf(n.types,"text/html")>=0?n.getData("text/html"):null,mxUtils$1.indexOf(n.types,"text/plain")>=0&&(i==null||i.length==0)&&(i=n.getData("text/plain"))),i!=null)){i=Graph$1.zapGremlins(mxUtils$1.trim(i));var r=this.extractGraphModelFromHtml(i);r!=null&&(i=r)}}return i!=null&&this.isCompatibleString(i)&&(e=i),e};EditorUi$2.prototype.isCompatibleString=function(t){return!1};EditorUi$2.prototype.saveFile=function(t){if(!t&&this.editor.filename!=null)this.save(this.editor.getOrCreateFilename());else{var e=new FilenameDialog(this,this.editor.getOrCreateFilename(),mxResources$1.get("save"),mxUtils$1.bind(this,function(i){this.save(i)}),null,mxUtils$1.bind(this,function(i){return i!=null&&i.length>0?!0:(mxUtils$1.confirm(mxResources$1.get("invalidName")),!1)}));this.showDialog(e.container,340,96,!0,!0),e.init()}};EditorUi$2.prototype.save=function(t){if(t!=null){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var e=mxUtils$1.getXml(this.editor.getGraphXml());try{if(Editor$2.useLocalStorage){if(localStorage.getItem(t)!=null&&!mxUtils$1.confirm(mxResources$1.get("replaceIt",[t])))return;localStorage.setItem(t,e),this.editor.setStatus(mxUtils$1.htmlEntities(mxResources$1.get("saved"))+" "+new Date)}else if(e.length<MAX_REQUEST_SIZE)new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent(t)+"&xml="+encodeURIComponent(e)).simulate(document,"_blank");else{mxUtils$1.alert(mxResources$1.get("drawingTooLarge")),mxUtils$1.popup(e);return}this.editor.setModified(!1),this.editor.setFilename(t),this.updateDocumentTitle()}catch{this.editor.setStatus(mxUtils$1.htmlEntities(mxResources$1.get("errorSavingFile")))}}};EditorUi$2.prototype.executeLayouts=function(t,e){this.executeLayout(mxUtils$1.bind(this,function(){var i=new mxCompositeLayout(this.editor.graph,t),n=this.editor.graph.getSelectionCells();i.execute(this.editor.graph.getDefaultParent(),n.length==0?null:n)}),!0,e)};EditorUi$2.prototype.executeLayout=function(t,e,i){var n=this.editor.graph;n.getModel().beginUpdate();try{t()}catch(l){throw l}finally{if(this.allowAnimation&&e&&n.isEnabled()){var r=new mxMorphing(n);r.addListener(mxEvent$1.DONE,mxUtils$1.bind(this,function(){n.getModel().endUpdate(),i!=null&&i()})),r.startAnimation()}else n.getModel().endUpdate(),i!=null&&i()}};EditorUi$2.prototype.showImageDialog=function(t,e,i,n){var r=this.editor.graph.cellEditor,l=r.saveSelection(),s=mxUtils$1.prompt(t,e);if(r.restoreSelection(l),s!=null&&s.length>0){var a=new Image;a.onload=function(){i(s,a.width,a.height)},a.onerror=function(){i(null),mxUtils$1.alert(mxResources$1.get("fileNotFound"))},a.src=s}else i(null)};EditorUi$2.prototype.showLinkDialog=function(t,e,i){var n=new LinkDialog(this,t,e,i);this.showDialog(n.container,420,90,!0,!0),n.init()};EditorUi$2.prototype.showDataDialog=function(t){if(t!=null&&typeof window.EditDataDialog<"u"){var e=new EditDataDialog(this,t);this.showDialog(e.container,480,420,!0,!1,null,!1),e.init()}};EditorUi$2.prototype.showBackgroundImageDialog=function(t,e){t=t??mxUtils$1.bind(this,function(n){var r=new ChangePageSetup$1(this,null,n);r.ignoreColor=!0,this.editor.graph.model.execute(r)});var i=mxUtils$1.prompt(mxResources$1.get("backgroundImage"),e!=null?e.src:"");if(i!=null&&i.length>0){var e=new Image;e.onload=function(){t(new mxImage(i,e.width,e.height),!1)},e.onerror=function(){t(null,!0),mxUtils$1.alert(mxResources$1.get("fileNotFound"))},e.src=i}else t(null)};EditorUi$2.prototype.setBackgroundImage=function(t){this.editor.graph.setBackgroundImage(t),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject$1("backgroundImageChanged"))};EditorUi$2.prototype.confirm=function(t,e,i){mxUtils$1.confirm(t)?e!=null&&e():i!=null&&i()};EditorUi$2.prototype.createOutline=function(t){var e=new mxOutline(this.editor.graph);return mxEvent$1.addListener(window,"resize",function(){e.update(!1)}),e};EditorUi$2.prototype.altShiftActions={65:"connectionArrows",82:"clearWaypoints",76:"editLink",79:"connectionPoints",81:"editConnectionPoints",84:"editTooltip",86:"pasteSize",70:"copySize",66:"copyData",69:"pasteData"};EditorUi$2.prototype.ctrlAltShiftActions={70:"bringForward",66:"sendBackward"};EditorUi$2.prototype.ctrlAltActions={88:"copyAsImage"};EditorUi$2.prototype.createKeyHandler=function(t){var e=this,i=this.editor.graph,n=new mxKeyHandler(i),r=n.isEventIgnored;n.isEventIgnored=function(p){return!(mxEvent$1.isShiftDown(p)&&p.keyCode==9)&&(!this.isControlDown(p)||mxEvent$1.isShiftDown(p)||p.keyCode!=90&&p.keyCode!=89&&p.keyCode!=188&&p.keyCode!=190&&p.keyCode!=85)&&(p.keyCode!=66&&p.keyCode!=73||!this.isControlDown(p)||this.graph.cellEditor.isContentEditing()&&!mxClient$1.IS_FF&&!mxClient$1.IS_SF)&&(p.keyCode!=109&&p.keyCode!=107||!this.isControlDown(p)&&!mxEvent$1.isShiftDown(p)||!this.graph.cellEditor.isContentEditing()&&!mxClient$1.IS_FF&&!mxClient$1.IS_SF)&&r.apply(this,arguments)},n.isEnabledForEvent=function(p){return!mxEvent$1.isConsumed(p)&&this.isGraphEvent(p)&&this.isEnabled()&&(e.dialogs==null||e.dialogs.length==0)},n.isControlDown=function(p){return mxEvent$1.isControlDown(p)||mxClient$1.IS_MAC&&p.metaKey};var l=null;function s(p,c,g){if(!i.isSelectionEmpty()&&i.isEnabled()){c=c??1;var x=i.getCompositeParents(i.getSelectionCells()),C=x.length>0?x[0]:null;if(C!=null)if(g){i.getModel().beginUpdate();try{for(var T=0;T<x.length;T++)if(i.getModel().isVertex(x[T])&&i.isCellResizable(x[T])){var A=i.getCellGeometry(x[T]);A!=null&&(A=A.clone(),p==37?A.width=Math.max(0,A.width-c):p==38?A.height=Math.max(0,A.height-c):p==39?A.width+=c:p==40&&(A.height+=c),i.getModel().setGeometry(x[T],A))}}finally{i.getModel().endUpdate()}}else{var R=i.model.getParent(C),_=i.getView().scale,N=null;if(i.getSelectionCount()==1&&i.model.isVertex(C)&&i.layoutManager!=null&&!i.isCellLocked(C)&&(N=i.layoutManager.getLayout(R)),N!=null&&N.constructor==mxStackLayout){var H=R.getIndex(C);p==37||p==38?i.model.add(R,C,Math.max(0,H-1)):(p==39||p==40)&&i.model.add(R,C,Math.min(i.model.getChildCount(R),H+1))}else{var k=i.graphHandler;if(k!=null){if(k.first==null&&k.start(C,0,0,i.getMovableCells(x)),k.first!=null){var K=0,Q=0;p==37?K=-c:p==38?Q=-c:p==39?K=c:p==40&&(Q=c),k.currentDx+=K*_,k.currentDy+=Q*_,k.checkPreview(),k.updatePreview()}l!=null&&window.clearTimeout(l),l=window.setTimeout(function(){if(k.first!=null){var nt=k.roundLength(k.currentDx/_),dt=k.roundLength(k.currentDy/_);k.moveCells(k.cells,nt,dt),k.reset()}},400)}}}}}var a={37:mxConstants$1.DIRECTION_WEST,38:mxConstants$1.DIRECTION_NORTH,39:mxConstants$1.DIRECTION_EAST,40:mxConstants$1.DIRECTION_SOUTH},o=n.getFunction;mxKeyHandler.prototype.getFunction=function(p){if(i.isEnabled()){var c=null;if(mxEvent$1.isShiftDown(p)&&this.isControlDown(p)&&mxEvent$1.isAltDown(p)?c=e.actions.get(e.ctrlAltShiftActions[p.keyCode]):mxEvent$1.isShiftDown(p)&&mxEvent$1.isAltDown(p)?c=e.actions.get(e.altShiftActions[p.keyCode]):this.isControlDown(p)&&mxEvent$1.isAltDown(p)&&(c=e.actions.get(e.ctrlAltActions[p.keyCode])),c!=null)return c.funct;if(a[p.keyCode]!=null&&!i.isSelectionEmpty())if(!this.isControlDown(p)&&mxEvent$1.isShiftDown(p)&&mxEvent$1.isAltDown(p)){if(i.model.isVertex(i.getSelectionCell()))return function(){var g=i.connectVertex(i.getSelectionCell(),a[p.keyCode],i.defaultEdgeLength,p,!0);g!=null&&g.length>0&&(g.length==1&&i.model.isEdge(g[0])?i.setSelectionCell(i.model.getTerminal(g[0],!1)):i.setSelectionCell(g[g.length-1]),i.scrollCellToVisible(i.getSelectionCell()),e.hoverIcons!=null&&e.hoverIcons.update(i.view.getState(i.getSelectionCell())))}}else return this.isControlDown(p)?function(){s(p.keyCode,mxEvent$1.isShiftDown(p)?i.gridSize:null,!0)}:function(){s(p.keyCode,mxEvent$1.isShiftDown(p)?i.gridSize:null)}}return o.apply(this,arguments)},n.bindAction=mxUtils$1.bind(this,function(p,c,g,x){var C=this.actions.get(g);if(C!=null){var T=function(){C.isEnabled()&&C.funct.apply(this,arguments)};c?x?n.bindControlShiftKey(p,T):n.bindControlKey(p,T):x?n.bindShiftKey(p,T):n.bindKey(p,T)}});var u=this,d=n.escape;return n.escape=function(p){d.apply(this,arguments)},n.enter=function(){},n.bindControlShiftKey(36,function(){i.exitGroup()}),n.bindControlShiftKey(35,function(){i.enterGroup()}),n.bindShiftKey(36,function(){i.home()}),n.bindKey(35,function(){i.refresh()}),n.bindAction(80,!0,"print"),n.bindAction(107,!0,"zoomIn"),n.bindAction(109,!0,"zoomOut"),n.bindAction(61,!0,"zoomIn"),n.bindAction(187,!0,"zoomIn"),n.bindAction(222,!0,"zoomIn"),n.bindAction(173,!0,"zoomOut"),n.bindAction(189,!0,"zoomOut"),(!this.editor.chromeless||this.editor.editable)&&(n.bindAction(79,!0,"outline",!0),n.bindControlKey(36,function(){i.isEnabled()&&i.foldCells(!0)}),n.bindControlKey(35,function(){i.isEnabled()&&i.foldCells(!1)}),n.bindControlKey(13,function(){u.ctrlEnter()}),n.bindAction(8,!1,"delete"),n.bindAction(8,!0,"deleteAll"),n.bindAction(8,!1,"deleteLabels",!0),n.bindAction(46,!1,"delete"),n.bindAction(46,!0,"deleteAll"),n.bindAction(46,!1,"deleteLabels",!0),n.bindAction(36,!1,"resetView"),n.bindAction(77,!0,"fitWindow"),n.bindAction(74,!0,"fitPage"),n.bindAction(74,!0,"fitTwoPages",!0),n.bindAction(48,!0,"customZoom"),n.bindAction(82,!0,"turn"),n.bindAction(82,!0,"clearDefaultStyle",!0),n.bindAction(83,!0,"save"),n.bindAction(83,!0,"saveAs",!0),n.bindAction(65,!0,"selectAll"),n.bindAction(65,!0,"selectNone",!0),n.bindAction(73,!0,"selectVertices",!0),n.bindAction(69,!0,"selectEdges",!0),n.bindAction(69,!0,"editStyle"),n.bindAction(66,!0,"bold"),n.bindAction(66,!0,"toBack",!0),n.bindAction(68,!0,"duplicate"),n.bindAction(68,!0,"setAsDefaultStyle",!0),n.bindAction(90,!0,"undo"),n.bindAction(90,!0,"redo",!0),n.bindAction(89,!0,"redo"),n.bindAction(89,!0,"autosize",!0),n.bindAction(88,!0,"cut"),n.bindAction(67,!0,"copy"),n.bindAction(86,!0,"paste"),n.bindAction(71,!0,"group"),n.bindAction(71,!0,"grid",!0),n.bindAction(73,!0,"italic"),n.bindAction(76,!0,"lockUnlock"),n.bindAction(76,!0,"layers",!0),n.bindAction(80,!0,"format",!0),n.bindAction(85,!0,"underline"),n.bindAction(85,!0,"ungroup",!0),n.bindAction(109,!0,"decreaseFontSize",!0),n.bindAction(107,!0,"increaseFontSize",!0),n.bindAction(219,!0,"decreaseFontSize",!0),n.bindAction(221,!0,"increaseFontSize",!0),n.bindAction(190,!0,"superscript"),n.bindAction(188,!0,"subscript"),n.bindAction(13,!1,"keyPressEnter"),n.bindKey(113,function(){i.isEnabled()&&i.startEditingAtCell()})),n};EditorUi$2.prototype.createHelpIcon=function(t){var e=document.createElement("div");e.setAttribute("title",mxResources$1.get("help")),e.style.display="inline",e.style.marginLeft="8px",e.style.marginRight="4px",e.style.cursor="help";var i=document.createElement("img");return i.setAttribute("src",Editor$2.helpImage),i.setAttribute("valign","middle"),i.setAttribute("border","0"),i.className="geAdaptiveAsset",mxUtils$1.setOpacity(i,60),i.style.marginTop="-4px",i.style.height="16px",i.style.width="16px",e.appendChild(i),mxEvent$1.addListener(e,"click",mxUtils$1.bind(this,function(n){this.hideCurrentMenu(),this.openLink(t),mxEvent$1.consume(n)})),e};EditorUi$2.prototype.destroy=function(){var t=this.editor.graph;if(t!=null&&this.selectionStateListener!=null&&(t.getSelectionModel().removeListener(this.selectionStateListener),t.getModel().removeListener(this.selectionStateListener),t.getView().removeListener(this.selectionStateListener),t.removeListener(this.selectionStateListener),this.selectionStateListener=null),this.editor!=null&&(this.editor.destroy(),this.editor=null),this.menubar!=null&&(this.menubar.destroy(),this.menubar=null),this.toolbar!=null&&(this.toolbar.destroy(),this.toolbar=null),this.sidebar!=null&&(this.sidebar.destroy(),this.sidebar=null),this.keyHandler!=null&&(this.keyHandler.destroy(),this.keyHandler=null),this.keydownHandler!=null&&(mxEvent$1.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),this.keyupHandler!=null&&(mxEvent$1.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),this.resizeHandler!=null&&(mxEvent$1.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),this.gestureHandler!=null&&(mxEvent$1.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),this.orientationChangeHandler!=null&&(mxEvent$1.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),this.scrollHandler!=null&&(mxEvent$1.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),this.destroyFunctions!=null){for(var e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions=null}for(var i=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.layersDialog],e=0;e<i.length;e++)i[e]!=null&&i[e].parentNode!=null&&i[e].parentNode.removeChild(i[e])};const mGraph=Object.freeze(Object.defineProperty({__proto__:null,Editor:Editor$2,EditorUi:EditorUi$2,Graph:Graph$1,OutlineWindow,initFindWindow,mxAbstractCanvas2D,mxActor,mxAnimation,mxArrow,mxArrowConnector,mxAutoSaveManager,mxCell:mxCell$2,mxCellAttributeChange,mxCellEditor,mxCellHighlight:mxCellHighlight$1,mxCellMarker:mxCellMarker$1,mxCellOverlay:mxCellOverlay$1,mxCellPath:mxCellPath$1,mxCellRenderer,mxCellState:mxCellState$1,mxCellStatePreview:mxCellStatePreview$1,mxCellTracker,mxChildChange:mxChildChange$1,mxCircleLayout,mxClient:mxClient$1,mxClipboard:mxClipboard$1,mxCloud,mxCodec:mxCodec$1,mxCodecRegistry,mxCollapseChange,mxCompactTreeLayout,mxCompositeLayout,mxConnectionConstraint:mxConnectionConstraint$1,mxConnectionHandler,mxConnector,mxConstants:mxConstants$1,mxConstraintHandler,mxCylinder,mxDictionary:mxDictionary$1,mxDivResizer,mxDoubleEllipse,mxDragSource:mxDragSource$1,mxEdgeHandler:mxEdgeHandler$1,mxEdgeLabelLayout,mxEdgeSegmentHandler,mxEdgeStyle:mxEdgeStyle$1,mxEffects:mxEffects$1,mxElbowEdgeHandler:mxElbowEdgeHandler$1,mxEllipse,mxEvent:mxEvent$1,mxEventObject:mxEventObject$1,mxEventSource,mxFastOrganicLayout,mxForm,mxGenericChangeCodec,mxGeometry:mxGeometry$2,mxGeometryChange:mxGeometryChange$1,mxGraph,mxGraphHandler,mxGraphLayout,mxGraphModel,mxGraphSelectionModel,mxGraphView,mxGuide:mxGuide$1,mxHandle:mxHandle$1,mxHexagon,mxHierarchicalLayout:mxHierarchicalLayout$1,mxImage,mxImageBundle,mxImageExport,mxImageShape:mxImageShape$1,mxKeyHandler,mxLabel:mxLabel$1,mxLayoutManager,mxLine,mxLog:mxLog$1,mxMarker,mxMorphing:mxMorphing$1,mxMouseEvent:mxMouseEvent$1,mxMultiplicity,mxObjectCodec:mxObjectCodec$1,mxObjectIdentity:mxObjectIdentity$1,mxOutline,mxPanningHandler,mxPanningManager,mxParallelEdgeLayout,mxPartitionLayout,mxPerimeter,mxPoint:mxPoint$1,mxPolyline:mxPolyline$1,mxPopupMenu:mxPopupMenu$1,mxPopupMenuHandler,mxPrintPreview,mxRadialTreeLayout,mxRectangle:mxRectangle$1,mxRectangleShape:mxRectangleShape$1,mxResources:mxResources$1,mxRhombus,mxRootChange,mxRubberband,mxSelectionCellsHandler,mxShape:mxShape$1,mxStackLayout,mxStencil,mxStencilRegistry:mxStencilRegistry$1,mxStyleChange:mxStyleChange$1,mxStyleRegistry:mxStyleRegistry$1,mxStylesheet,mxStylesheetCodec,mxSvgCanvas2D:mxSvgCanvas2D$1,mxSwimlane,mxSwimlaneLayout,mxSwimlaneManager,mxTemporaryCellStates:mxTemporaryCellStates$1,mxTerminalChange:mxTerminalChange$1,mxText:mxText$1,mxToolbar,mxTooltipHandler,mxTriangle,mxUndoManager,mxUndoableEdit,mxUrlConverter,mxUtils:mxUtils$1,mxValueChange:mxValueChange$1,mxVertexHandler:mxVertexHandler$1,mxVisibleChange,mxWindow:mxWindow$1,mxXmlCanvas2D,mxXmlRequest:mxXmlRequest$1,useCanvasViewerActions:useCanvasViewerActions$1,useHierarchicalLayout},Symbol.toStringTag,{value:"Module"})),{EditorUi:EditorUi$1,Editor:Editor$1,useCanvasViewerActions,mxCell:mxCell$1,mxGeometry:mxGeometry$1}=mGraph,defaultStyle="md=1;html=1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacing=0;dropTarget=0;",themes={1:"fillColor=#e57373;strokeColor=#c62828;strokeWidth=3;opacity=50;",2:"fillColor=#ffb74d;strokeColor=#ef6c00;strokeWidth=3;opacity=50;",3:"fillColor=#fff176;strokeColor=#f9a825;strokeWidth=3;opacity=50;",4:"fillColor=#81c784;strokeColor=#2e7d32;strokeWidth=3;opacity=50;",5:"fillColor=#4dd0e1;strokeColor=#00838f;strokeWidth=3;opacity=50;",6:"fillColor=#ba68c8;strokeColor=#6a1b9a;strokeWidth=3;opacity=50;"},jsonToCell=t=>{const{x:e,y:i,width:n,height:r,text:l,id:s,color:a}=t,o=a,u=new mxCell$1(l,new mxGeometry$1(e,i,+n,+r),defaultStyle+(themes[o]||""));return u.vertex=!0,u.id=s,u},jsonToEdge=(t,e)=>{const{label:i,fromNode:n,toNode:r,id:l}=t,s=new mxCell$1(i,new mxGeometry$1);return s.setId(l),s.setEdge(!0),s.geometry.relative=!0,s.source=e[n],s.target=e[r],s},jsonToCells=t=>{const e=new mxCell$1;e.id="root";const i=new mxCell$1;i.id="default",e.insert(i);const{nodes:n,edges:r}=t,l=n.map(jsonToCell),s=Object.fromEntries(l.map(a=>[a.id,a]));return l.concat(r.map(a=>jsonToEdge(a,s)))},chunkArray=(t,e)=>{const i=[];for(let n=0;n<t.length;n+=e){const r=t.slice(n,n+e);i.push(r)}return i};window.initGraph=function(t,e){if(window.editorUi=new EditorUi$1(new Editor$1,t),useCanvasViewerActions(editorUi),window.editor=editorUi.editor,window.graph=editor.graph,e){const i=jsonToCells(JSON.parse(e));chunkArray(i,50).forEach(n=>graph.addCells(n))}};
